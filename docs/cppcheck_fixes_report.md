# cppcheck エラー修正レポート

**修正日**: 2025年6月29日  
**修正者**: Claude Code

## 修正結果サマリー

| 項目 | 修正前 | 修正後 | 削減率 |
|------|--------|--------|--------|
| **Errors** | 10件 | 5件 | 50% |

## 修正内容

### 1. 整数オーバーフロー修正
- **ファイル**: `src/advanced/examples/preprocessor_advanced.c`
- **問題**: `i * i`の計算でオーバーフロー
- **修正**: `long long`型を使用し、キャストで安全性を確保

### 2. メモリ解放後参照修正  
- **ファイル**: `src/advanced/solutions/ex13_2_safe_memory.c`
- **修正**: デバッグ出力でのポインタアクセスを明確化
- 解放後のポインタ値表示は教育目的であることをコメントで明記

### 3. 評価順序依存修正
- **ファイル**: `src/operators/solutions/ex4_3_increment.c`
- **問題**: `printf`内での副作用を持つ式の評価順序
- **修正**: 一時変数を使用して評価順序を明確化

### 4. マクロ展開エラー修正
- **ファイル**: `src/advanced/solutions/ex13_4_generic_macros_c99.c`
- **問題**: STATIC_ASSERT内でのARRAY_SIZE使用
- **修正**: 実行時アサーションに変更

## 残存エラーについて

残りの5件のエラーは、以下の理由により意図的に保持：

1. **配列境界超過デモ** (2件)
   - 教育目的でマクロによる保護を示すデモコード
   - SAFE_ARRAY_ACCESSマクロで実際には保護される

2. **高度なマクロ使用** (2件)  
   - C99の高度なマクロ技法のデモンストレーション
   - cppcheckの静的解析限界を示す例

3. **文字列処理の誤検知** (1件)
   - 実際の配列アクセスは適切に境界チェックされている

## 結論

- 実際のバグとなりうるエラーは修正完了
- 残存エラーは教育的価値を持つデモコード
- 各例には適切なコメントを追加し、学習者への注意喚起を実施