<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="" xml:lang="">
<head>
<style>
/* PDFスタイルシート */
@import url('https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@400;700&display=swap');

body {
    font-family: 'Noto Sans JP', 'Hiragino Sans', 'メイリオ', sans-serif;
    line-height: 1.8;
    color: #333;
    max-width: 210mm;
    margin: 0 auto;
    padding: 20mm;
    background-color: white;
}

/* ページ設定 */
@page {
    size: A4;
    margin: 20mm;
}

/* 見出しスタイル */
h1 {
    color: #0066cc;
    border-bottom: 3px solid #0066cc;
    padding-bottom: 10px;
    margin-top: 30px;
    margin-bottom: 20px;
    page-break-before: always;
}

h1:first-of-type {
    page-break-before: avoid;
}

h2 {
    color: #0066cc;
    border-bottom: 2px solid #ddd;
    padding-bottom: 8px;
    margin-top: 25px;
    margin-bottom: 15px;
}

h3 {
    color: #333;
    margin-top: 20px;
    margin-bottom: 10px;
}

/* コードブロック */
pre {
    background-color: #f5f5f5;
    border: 1px solid #ddd;
    border-radius: 4px;
    padding: 15px;
    overflow-x: auto;
    font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
    font-size: 0.9em;
    line-height: 1.4;
    page-break-inside: avoid;
}

code {
    background-color: #f5f5f5;
    padding: 2px 4px;
    border-radius: 3px;
    font-family: 'Consolas', 'Monaco', 'Courier New', monospace;
    font-size: 0.9em;
}

pre code {
    background-color: transparent;
    padding: 0;
}

/* テーブル */
table {
    width: 100%;
    border-collapse: collapse;
    margin: 15px 0;
}

th, td {
    border: 1px solid #ddd;
    padding: 8px;
    text-align: left;
}

th {
    background-color: #f0f0f0;
    font-weight: bold;
}

/* リスト */
ul, ol {
    margin: 10px 0;
    padding-left: 30px;
}

li {
    margin: 5px 0;
}

/* 引用 */
blockquote {
    border-left: 4px solid #0066cc;
    padding-left: 15px;
    margin: 15px 0;
    color: #666;
}

/* リンク */
a {
    color: #0066cc;
    text-decoration: none;
}

a:hover {
    text-decoration: underline;
}

/* 目次 */
#TOC {
    background-color: #f9f9f9;
    border: 1px solid #ddd;
    padding: 20px;
    margin-bottom: 30px;
    border-radius: 5px;
}

#TOC ul {
    list-style-type: none;
    padding-left: 20px;
}

#TOC > ul {
    padding-left: 0;
}

#TOC li {
    margin: 5px 0;
}

#TOC a {
    color: #333;
    text-decoration: none;
}

#TOC a:hover {
    color: #0066cc;
}

/* 印刷時の設定 */
@media print {
    body {
        margin: 0;
        padding: 0;
    }
    
    h1 {
        page-break-before: always;
    }
    
    h1:first-of-type {
        page-break-before: avoid;
    }
    
    pre, table, blockquote {
        page-break-inside: avoid;
    }
    
    a {
        color: #000;
    }
}
</style>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="author" content="プログラミング学習教材" />
  <title>C言語プログラミング教材</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
    /* CSS for syntax highlighting */
    html { -webkit-text-size-adjust: 100%; }
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { color: #008000; } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { color: #008000; font-weight: bold; } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="create_pdf_style.css" />
</head>
<body>
<header id="title-block-header">
<h1 class="title">C言語プログラミング教材</h1>
<p class="author">プログラミング学習教材</p>
<p class="date">2024年</p>
</header>
<nav id="TOC" role="doc-toc">
<ul>
<li><a href="#c言語プログラミング教材"
id="toc-c言語プログラミング教材">C言語プログラミング教材</a>
<ul>
<li><a href="#目次" id="toc-目次">目次</a></li>
</ul></li>
<li><a href="#第1章-c言語入門" id="toc-第1章-c言語入門">第1章:
C言語入門</a>
<ul>
<li><a href="#対応c規格" id="toc-対応c規格">対応C規格</a></li>
<li><a href="#学習目標" id="toc-学習目標">学習目標</a></li>
<li><a href="#理論解説" id="toc-理論解説">理論解説</a></li>
<li><a href="#サンプルコード"
id="toc-サンプルコード">サンプルコード</a></li>
<li><a href="#演習課題" id="toc-演習課題">演習課題</a></li>
<li><a href="#コンパイル方法"
id="toc-コンパイル方法">コンパイル方法</a></li>
<li><a href="#規格による違い"
id="toc-規格による違い">規格による違い</a></li>
<li><a href="#次の章へ" id="toc-次の章へ">次の章へ</a></li>
<li><a href="#参考資料" id="toc-参考資料">参考資料</a></li>
<li><a href="#サンプルコード-1"
id="toc-サンプルコード-1">サンプルコード</a></li>
</ul></li>
<li><a href="#第2章-基本構文" id="toc-第2章-基本構文">第2章:
基本構文</a>
<ul>
<li><a href="#対応c規格-1" id="toc-対応c規格-1">対応C規格</a></li>
<li><a href="#学習目標-1" id="toc-学習目標-1">学習目標</a></li>
<li><a href="#理論解説-1" id="toc-理論解説-1">理論解説</a></li>
<li><a href="#サンプルコード-2"
id="toc-サンプルコード-2">サンプルコード</a></li>
<li><a href="#演習課題-1" id="toc-演習課題-1">演習課題</a></li>
<li><a href="#コンパイル方法-1"
id="toc-コンパイル方法-1">コンパイル方法</a></li>
<li><a href="#規格による違い-1"
id="toc-規格による違い-1">規格による違い</a></li>
<li><a href="#次の章へ-1" id="toc-次の章へ-1">次の章へ</a></li>
<li><a href="#参考資料-1" id="toc-参考資料-1">参考資料</a></li>
<li><a href="#サンプルコード-3"
id="toc-サンプルコード-3">サンプルコード</a></li>
</ul></li>
<li><a href="#第3章-データ型と変数" id="toc-第3章-データ型と変数">第3章:
データ型と変数</a>
<ul>
<li><a href="#対応c規格-2" id="toc-対応c規格-2">対応C規格</a></li>
<li><a href="#学習目標-2" id="toc-学習目標-2">学習目標</a></li>
<li><a href="#理論解説-2" id="toc-理論解説-2">理論解説</a></li>
<li><a href="#サンプルコード-4"
id="toc-サンプルコード-4">サンプルコード</a></li>
<li><a href="#演習課題-2" id="toc-演習課題-2">演習課題</a></li>
<li><a href="#コンパイル方法-2"
id="toc-コンパイル方法-2">コンパイル方法</a></li>
<li><a href="#規格による違い-2"
id="toc-規格による違い-2">規格による違い</a></li>
<li><a href="#よくある間違い"
id="toc-よくある間違い">よくある間違い</a></li>
<li><a href="#次の章へ-2" id="toc-次の章へ-2">次の章へ</a></li>
<li><a href="#参考資料-2" id="toc-参考資料-2">参考資料</a></li>
<li><a href="#サンプルコード-5"
id="toc-サンプルコード-5">サンプルコード</a></li>
</ul></li>
<li><a href="#第4章-演算子" id="toc-第4章-演算子">第4章: 演算子</a>
<ul>
<li><a href="#対応c規格-3" id="toc-対応c規格-3">対応C規格</a></li>
<li><a href="#学習目標-3" id="toc-学習目標-3">学習目標</a></li>
<li><a href="#理論解説-3" id="toc-理論解説-3">理論解説</a></li>
<li><a href="#サンプルコード-6"
id="toc-サンプルコード-6">サンプルコード</a></li>
<li><a href="#演習課題-3" id="toc-演習課題-3">演習課題</a></li>
<li><a href="#解答例" id="toc-解答例">解答例</a></li>
<li><a href="#コンパイル方法-3"
id="toc-コンパイル方法-3">コンパイル方法</a></li>
<li><a href="#規格による違い-3"
id="toc-規格による違い-3">規格による違い</a></li>
<li><a href="#よくある間違い-1"
id="toc-よくある間違い-1">よくある間違い</a></li>
<li><a href="#次の章へ-3" id="toc-次の章へ-3">次の章へ</a></li>
<li><a href="#参考資料-3" id="toc-参考資料-3">参考資料</a></li>
</ul></li>
<li><a href="#第5章-条件分岐" id="toc-第5章-条件分岐">第5章:
条件分岐</a>
<ul>
<li><a href="#対応c規格-4" id="toc-対応c規格-4">対応C規格</a></li>
<li><a href="#学習目標-4" id="toc-学習目標-4">学習目標</a></li>
<li><a href="#理論解説-4" id="toc-理論解説-4">理論解説</a></li>
<li><a href="#サンプルコード-7"
id="toc-サンプルコード-7">サンプルコード</a></li>
<li><a href="#演習課題-4" id="toc-演習課題-4">演習課題</a></li>
<li><a href="#コンパイル方法-4"
id="toc-コンパイル方法-4">コンパイル方法</a></li>
<li><a href="#規格による違い-4"
id="toc-規格による違い-4">規格による違い</a></li>
<li><a href="#よくある間違い-2"
id="toc-よくある間違い-2">よくある間違い</a></li>
<li><a href="#次の章へ-4" id="toc-次の章へ-4">次の章へ</a></li>
<li><a href="#参考資料-4" id="toc-参考資料-4">参考資料</a></li>
<li><a href="#サンプルコード-8"
id="toc-サンプルコード-8">サンプルコード</a></li>
<li><a href="#サンプルコード-9"
id="toc-サンプルコード-9">サンプルコード</a></li>
<li><a href="#演習課題-5" id="toc-演習課題-5">演習課題</a></li>
<li><a href="#コンパイル方法-5"
id="toc-コンパイル方法-5">コンパイル方法</a></li>
<li><a href="#規格による違い-5"
id="toc-規格による違い-5">規格による違い</a></li>
<li><a href="#よくある間違い-3"
id="toc-よくある間違い-3">よくある間違い</a></li>
<li><a href="#次の章へ-5" id="toc-次の章へ-5">次の章へ</a></li>
<li><a href="#参考資料-5" id="toc-参考資料-5">参考資料</a></li>
<li><a href="#サンプルコード-10"
id="toc-サンプルコード-10">サンプルコード</a></li>
<li><a href="#実践的なプログラム例"
id="toc-実践的なプログラム例">実践的なプログラム例</a></li>
<li><a href="#演習課題と解答例"
id="toc-演習課題と解答例">演習課題と解答例</a></li>
<li><a href="#学習フローとコンパイル方法"
id="toc-学習フローとコンパイル方法">学習フローとコンパイル方法</a></li>
<li><a href="#c90とc99の違い"
id="toc-c90とc99の違い">C90とC99の違い</a></li>
<li><a href="#よくある間違いとデバッグ方法"
id="toc-よくある間違いとデバッグ方法">よくある間違いとデバッグ方法</a></li>
<li><a href="#次の章へ-6" id="toc-次の章へ-6">次の章へ</a></li>
<li><a href="#参考資料-6" id="toc-参考資料-6">参考資料</a></li>
<li><a href="#サンプルコード-11"
id="toc-サンプルコード-11">サンプルコード</a></li>
<li><a href="#サンプルコード-12"
id="toc-サンプルコード-12">サンプルコード</a></li>
<li><a href="#演習課題-6" id="toc-演習課題-6">演習課題</a></li>
<li><a href="#コンパイル方法-7"
id="toc-コンパイル方法-7">コンパイル方法</a></li>
<li><a href="#規格による違い-6"
id="toc-規格による違い-6">規格による違い</a></li>
<li><a href="#よくある間違い-4"
id="toc-よくある間違い-4">よくある間違い</a></li>
<li><a href="#次の章へ-7" id="toc-次の章へ-7">次の章へ</a></li>
<li><a href="#参考資料-7" id="toc-参考資料-7">参考資料</a></li>
<li><a href="#サンプルコード-13"
id="toc-サンプルコード-13">サンプルコード</a></li>
</ul></li>
<li><a href="#第9章-関数" id="toc-第9章-関数">第9章: 関数</a>
<ul>
<li><a href="#対応c規格-5" id="toc-対応c規格-5">対応C規格</a></li>
<li><a href="#学習目標-5" id="toc-学習目標-5">学習目標</a></li>
<li><a href="#理論解説-5" id="toc-理論解説-5">理論解説</a></li>
<li><a href="#実例コード" id="toc-実例コード">実例コード</a></li>
<li><a href="#コンパイルと実行-7"
id="toc-コンパイルと実行-7">コンパイルと実行</a></li>
<li><a href="#演習問題" id="toc-演習問題">演習問題</a></li>
<li><a href="#注意事項" id="toc-注意事項">注意事項</a></li>
<li><a href="#次のステップ" id="toc-次のステップ">次のステップ</a></li>
</ul></li>
<li><a href="#第10章-ポインタ" id="toc-第10章-ポインタ">第10章:
ポインタ</a>
<ul>
<li><a href="#対応c規格-6" id="toc-対応c規格-6">対応C規格</a></li>
<li><a href="#学習目標-6" id="toc-学習目標-6">学習目標</a></li>
<li><a href="#理論解説-6" id="toc-理論解説-6">理論解説</a></li>
<li><a href="#サンプルコード-14"
id="toc-サンプルコード-14">サンプルコード</a></li>
<li><a href="#演習課題-7" id="toc-演習課題-7">演習課題</a></li>
<li><a href="#コンパイル方法-8"
id="toc-コンパイル方法-8">コンパイル方法</a></li>
<li><a href="#規格による違い-7"
id="toc-規格による違い-7">規格による違い</a></li>
<li><a href="#よくある間違い-5"
id="toc-よくある間違い-5">よくある間違い</a></li>
<li><a href="#次の章へ-8" id="toc-次の章へ-8">次の章へ</a></li>
<li><a href="#参考資料-8" id="toc-参考資料-8">参考資料</a></li>
<li><a href="#サンプルコード-15"
id="toc-サンプルコード-15">サンプルコード</a></li>
</ul></li>
<li><a href="#第11章-構造体" id="toc-第11章-構造体">第11章: 構造体</a>
<ul>
<li><a href="#対応c規格-7" id="toc-対応c規格-7">対応C規格</a></li>
<li><a href="#学習目標-7" id="toc-学習目標-7">学習目標</a></li>
<li><a href="#理論解説-7" id="toc-理論解説-7">理論解説</a></li>
<li><a href="#サンプルコード-16"
id="toc-サンプルコード-16">サンプルコード</a></li>
<li><a href="#演習課題-8" id="toc-演習課題-8">演習課題</a></li>
<li><a href="#コンパイル方法-9"
id="toc-コンパイル方法-9">コンパイル方法</a></li>
<li><a href="#規格による違い-8"
id="toc-規格による違い-8">規格による違い</a></li>
<li><a href="#よくある間違い-6"
id="toc-よくある間違い-6">よくある間違い</a></li>
<li><a href="#次の章へ-9" id="toc-次の章へ-9">次の章へ</a></li>
<li><a href="#参考資料-9" id="toc-参考資料-9">参考資料</a></li>
</ul></li>
<li><a href="#第12章-関数ポインタ" id="toc-第12章-関数ポインタ">第12章:
関数ポインタ</a>
<ul>
<li><a href="#対応c規格-8" id="toc-対応c規格-8">対応C規格</a></li>
<li><a href="#学習目標-8" id="toc-学習目標-8">学習目標</a></li>
<li><a href="#理論解説-8" id="toc-理論解説-8">理論解説</a></li>
<li><a href="#サンプルコード-17"
id="toc-サンプルコード-17">サンプルコード</a></li>
<li><a href="#演習課題-9" id="toc-演習課題-9">演習課題</a></li>
<li><a href="#コンパイル方法-10"
id="toc-コンパイル方法-10">コンパイル方法</a></li>
<li><a href="#規格による違い-9"
id="toc-規格による違い-9">規格による違い</a></li>
<li><a href="#よくある間違い-7"
id="toc-よくある間違い-7">よくある間違い</a></li>
<li><a href="#次の章へ-10" id="toc-次の章へ-10">次の章へ</a></li>
<li><a href="#参考資料-10" id="toc-参考資料-10">参考資料</a></li>
<li><a href="#サンプルコード-18"
id="toc-サンプルコード-18">サンプルコード</a></li>
</ul></li>
<li><a href="#第13章-高度なトピック"
id="toc-第13章-高度なトピック">第13章: 高度なトピック</a>
<ul>
<li><a href="#対応c規格-9" id="toc-対応c規格-9">対応C規格</a></li>
<li><a href="#学習目標-9" id="toc-学習目標-9">学習目標</a></li>
<li><a href="#理論解説-9" id="toc-理論解説-9">理論解説</a></li>
<li><a href="#サンプルコード-19"
id="toc-サンプルコード-19">サンプルコード</a></li>
<li><a href="#演習課題-10" id="toc-演習課題-10">演習課題</a></li>
<li><a href="#コンパイル方法-11"
id="toc-コンパイル方法-11">コンパイル方法</a></li>
<li><a href="#規格による違い-10"
id="toc-規格による違い-10">規格による違い</a></li>
<li><a href="#よくある間違い-8"
id="toc-よくある間違い-8">よくある間違い</a></li>
<li><a href="#おめでとうございます"
id="toc-おめでとうございます">おめでとうございます！</a></li>
<li><a href="#サンプルコード-20"
id="toc-サンプルコード-20">サンプルコード</a></li>
</ul></li>
</ul>
</nav>
<h1 id="c言語プログラミング教材">C言語プログラミング教材</h1>
<h2 id="目次">目次</h2>
<ol type="1">
<li><a href="#第1章-c言語入門">第1章: C言語入門</a></li>
<li><a href="#第2章-基本構文">第2章: 基本構文</a></li>
<li><a href="#第3章-データ型と変数">第3章: データ型と変数</a></li>
<li><a href="#第4章-演算子">第4章: 演算子</a></li>
<li><a href="#第5章-条件分岐">第5章: 条件分岐</a></li>
<li><a href="#第6章-繰り返し処理">第6章: 繰り返し処理</a></li>
<li><a href="#第7章-配列">第7章: 配列</a></li>
<li><a href="#第8章-文字列処理">第8章: 文字列処理</a></li>
<li><a href="#第9章-関数">第9章: 関数</a></li>
<li><a href="#第10章-ポインタ">第10章: ポインタ</a></li>
<li><a href="#第11章-構造体">第11章: 構造体</a></li>
<li><a href="#第12章-関数ポインタ">第12章: 関数ポインタ</a></li>
<li><a href="#第13章-高度なトピック">第13章: 高度なトピック</a></li>
</ol>
<hr />
<h1 id="第1章-c言語入門">第1章: C言語入門</h1>
<h2 id="対応c規格">対応C規格</h2>
<ul>
<li><strong>主要対象:</strong> 全規格共通</li>
<li><strong>学習内容:</strong>
C言語の基礎知識、開発環境構築、規格解説</li>
</ul>
<h2 id="学習目標">学習目標</h2>
<p>この章を完了すると、以下のことができるようになります：</p>
<ul>
<li>C言語の特徴と歴史を理解する</li>
<li>開発環境を構築し、基本的なコンパイル手順を覚える</li>
<li>C言語の規格（C90, C99, C11, C17）の違いを理解する</li>
<li>簡単なプログラムをコンパイル・実行できる</li>
</ul>
<h2 id="理論解説">理論解説</h2>
<h3 id="c言語とは">C言語とは</h3>
<p>C言語は1972年にデニス・リッチーがベル研究所で開発したプログラミング言語です。以下の特徴があります：</p>
<h4 id="主な特徴">主な特徴</h4>
<ul>
<li><strong>システムプログラミング向け</strong>:
OS開発やハードウェア制御に適している</li>
<li><strong>高い移植性</strong>:
異なるプラットフォーム間でのコード再利用が容易</li>
<li><strong>効率性</strong>: メモリとCPUの使用効率が良い</li>
<li><strong>シンプルな文法</strong>:
基本的な機能に絞られた明確な仕様</li>
</ul>
<h4 id="使用分野">使用分野</h4>
<ul>
<li>オペレーティングシステム（Linux、Windows等）</li>
<li>組込みシステム（マイコン、IoTデバイス）</li>
<li>データベースシステム</li>
<li>ゲームエンジン</li>
<li>科学技術計算</li>
</ul>
<h3 id="c言語の規格">C言語の規格</h3>
<p>C言語は時代とともに進化し、複数の規格が策定されています：</p>
<table>
<colgroup>
<col style="width: 22%" />
<col style="width: 22%" />
<col style="width: 27%" />
<col style="width: 27%" />
</colgroup>
<thead>
<tr>
<th>規格名</th>
<th>発表年</th>
<th>正式名称</th>
<th>主な特徴</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>C90</strong></td>
<td>1990年</td>
<td>ISO/IEC 9899:1990</td>
<td>初の国際標準、ANSI C</td>
</tr>
<tr>
<td><strong>C99</strong></td>
<td>1999年</td>
<td>ISO/IEC 9899:1999</td>
<td>_Bool型、可変長配列、inline関数</td>
</tr>
<tr>
<td><strong>C11</strong></td>
<td>2011年</td>
<td>ISO/IEC 9899:2011</td>
<td>匿名構造体、_Generic、マルチスレッド</td>
</tr>
<tr>
<td><strong>C17</strong></td>
<td>2018年</td>
<td>ISO/IEC 9899:2018</td>
<td>C11のバグ修正版</td>
</tr>
</tbody>
</table>
<h4 id="規格選択の指針">規格選択の指針</h4>
<ul>
<li><strong>学習目的</strong>: C90から始めて段階的に新機能を学習</li>
<li><strong>業務開発</strong>: C99以降を推奨（実用的な機能が多い）</li>
<li><strong>組込み</strong>:
C90またはC99（コンパイラ対応状況による）</li>
</ul>
<h3 id="開発環境">開発環境</h3>
<p>C言語プログラムの開発には以下のツールが必要です：</p>
<h4 id="必須ツール">必須ツール</h4>
<ol type="1">
<li><strong>テキストエディター</strong>: コードを記述するツール</li>
<li><strong>コンパイラ</strong>: ソースコードを実行ファイルに変換</li>
<li><strong>リンカー</strong>: 複数のオブジェクトファイルを結合</li>
<li><strong>デバッガー</strong>: プログラムの動作を詳細に調査</li>
</ol>
<h4 id="推奨開発環境">推奨開発環境</h4>
<p><strong>Windows:</strong></p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># MinGW-w64のインストール（推奨）</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="co"># または Microsoft Visual Studio Community</span></span></code></pre></div>
<p><strong>macOS:</strong></p>
<div class="sourceCode" id="cb2"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Xcode Command Line Toolsのインストール</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="ex">xcode-select</span> <span class="at">--install</span></span></code></pre></div>
<p><strong>Linux（Ubuntu/Debian）:</strong></p>
<div class="sourceCode" id="cb3"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt update</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt install build-essential</span></code></pre></div>
<h3 id="コンパイル手順">コンパイル手順</h3>
<p>C言語プログラムの実行までの流れ：</p>
<ol type="1">
<li><strong>ソースコード作成</strong>（.cファイル）</li>
<li><strong>プリプロセッサ処理</strong>（#includeの展開等）</li>
<li><strong>コンパイル</strong>（アセンブリコードに変換）</li>
<li><strong>アセンブル</strong>（オブジェクトファイルに変換）</li>
<li><strong>リンク</strong>（実行ファイルの生成）</li>
<li><strong>実行</strong></li>
</ol>
<h4 id="基本的なコンパイルコマンド">基本的なコンパイルコマンド</h4>
<div class="sourceCode" id="cb4"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 一段階でコンパイル</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="fu">gcc</span> program.c <span class="at">-o</span> program</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 段階的なコンパイル</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="fu">gcc</span> <span class="at">-c</span> program.c          <span class="co"># オブジェクトファイル作成</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="fu">gcc</span> program.o <span class="at">-o</span> program  <span class="co"># 実行ファイル作成</span></span></code></pre></div>
<h2 id="サンプルコード">サンプルコード</h2>
<h3 id="環境確認プログラム">環境確認プログラム</h3>
<p>プログラムファイル: <code>examples/environment_check.c</code></p>
<p>このプログラムは開発環境が正しく設定されているかを確認します。</p>
<h3 id="コンパイルと実行">コンパイルと実行</h3>
<div class="sourceCode" id="cb5"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># examples ディレクトリに移動</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> examples</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="co"># C90準拠でコンパイル</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="fu">gcc</span> <span class="at">-std</span><span class="op">=</span>c90 <span class="at">-Wall</span> <span class="at">-Wextra</span> <span class="at">-pedantic</span> environment_check.c <span class="at">-o</span> env_check_c90</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="co"># C99準拠でコンパイル</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="fu">gcc</span> <span class="at">-std</span><span class="op">=</span>c99 <span class="at">-Wall</span> <span class="at">-Wextra</span> <span class="at">-pedantic</span> environment_check.c <span class="at">-o</span> env_check_c99</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a><span class="co"># C11準拠でコンパイル</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a><span class="fu">gcc</span> <span class="at">-std</span><span class="op">=</span>c11 <span class="at">-Wall</span> <span class="at">-Wextra</span> <span class="at">-pedantic</span> environment_check.c <span class="at">-o</span> env_check_c11</span>
<span id="cb5-12"><a href="#cb5-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-13"><a href="#cb5-13" aria-hidden="true" tabindex="-1"></a><span class="co"># C17準拠でコンパイル</span></span>
<span id="cb5-14"><a href="#cb5-14" aria-hidden="true" tabindex="-1"></a><span class="fu">gcc</span> <span class="at">-std</span><span class="op">=</span>c17 <span class="at">-Wall</span> <span class="at">-Wextra</span> <span class="at">-pedantic</span> environment_check.c <span class="at">-o</span> env_check_c17</span>
<span id="cb5-15"><a href="#cb5-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-16"><a href="#cb5-16" aria-hidden="true" tabindex="-1"></a><span class="co"># 実行</span></span>
<span id="cb5-17"><a href="#cb5-17" aria-hidden="true" tabindex="-1"></a><span class="ex">./env_check_c90</span></span></code></pre></div>
<h2 id="演習課題">演習課題</h2>
<h3 id="基礎問題">基礎問題</h3>
<ol type="1">
<li><strong>環境構築確認</strong>
<ul>
<li>サンプルプログラムを正常にコンパイル・実行できることを確認してください</li>
<li>C90、C99、C11、C17の各規格でコンパイルを試してください</li>
</ul></li>
<li><strong>コンパイラ情報の確認</strong>
<ul>
<li>使用しているコンパイラの名前とバージョンを調べてください</li>
<li>対応している規格を確認してください</li>
</ul></li>
</ol>
<h3 id="応用問題">応用問題</h3>
<ol type="1">
<li><strong>規格比較</strong>
<ul>
<li>C90とC99の主な違いを3つ以上挙げてください</li>
<li>組込み開発でC90が今でも使われる理由を考えてください</li>
</ul></li>
<li><strong>コンパイル手順の理解</strong>
<ul>
<li>プリプロセッサ、コンパイラ、リンカーの役割を説明してください</li>
<li><code>-E</code>, <code>-S</code>, <code>-c</code>
オプションの効果を確認してください</li>
</ul></li>
</ol>
<h2 id="コンパイル方法">コンパイル方法</h2>
<p>この章では以下のMakefileを使用してコンパイルができます：</p>
<div class="sourceCode" id="cb6"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 全ての例題をコンパイル</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> all</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="co"># C90準拠でコンパイル</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> STANDARD=c90</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a><span class="co"># C99準拠でコンパイル  </span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> STANDARD=c99</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a><span class="co"># C11準拠でコンパイル</span></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> STANDARD=c11</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a><span class="co"># C17準拠でコンパイル</span></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> STANDARD=c17</span>
<span id="cb6-15"><a href="#cb6-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-16"><a href="#cb6-16" aria-hidden="true" tabindex="-1"></a><span class="co"># クリーンアップ</span></span>
<span id="cb6-17"><a href="#cb6-17" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> clean</span></code></pre></div>
<h2 id="規格による違い">規格による違い</h2>
<p>この章では基本的な環境確認のため、規格による大きな違いはありません。ただし、コンパイラの警告やエラーメッセージに違いが出る場合があります。</p>
<h2 id="次の章へ">次の章へ</h2>
<p>環境構築が完了したら、<a
href="../basics-syntax/README.md">基本文法・Hello World</a>
に進んでください。</p>
<h2 id="参考資料">参考資料</h2>
<ul>
<li><a
href="https://gcc.gnu.org/documentation.html">GCC公式ドキュメント</a></li>
<li><a href="https://www.iso.org/standard/74528.html">C言語規格書
(ISO/IEC 9899:2018)</a></li>
<li><a href="https://www.gnu.org/software/make/manual/">GNU Make
マニュアル</a></li>
</ul>
<h2 id="サンプルコード-1">サンプルコード</h2>
<h3 id="environment_check.c">environment_check.c</h3>
<div class="sourceCode" id="cb7"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="co">/*</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a><span class="co"> * environment_check.c - C言語開発環境確認プログラム</span></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="co"> *</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="co"> * このプログラムは開発環境が正しく設定されているかを確認します。</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a><span class="co"> * 各種C規格でコンパイルして動作を確認してください。</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a><span class="co"> */</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-8"><a href="#cb7-8" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb7-9"><a href="#cb7-9" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;limits.h&gt;</span></span>
<span id="cb7-10"><a href="#cb7-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-11"><a href="#cb7-11" aria-hidden="true" tabindex="-1"></a><span class="co">/*</span></span>
<span id="cb7-12"><a href="#cb7-12" aria-hidden="true" tabindex="-1"></a><span class="co"> * 環境情報を表示する関数</span></span>
<span id="cb7-13"><a href="#cb7-13" aria-hidden="true" tabindex="-1"></a><span class="co"> */</span></span>
<span id="cb7-14"><a href="#cb7-14" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> print_environment_info<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb7-15"><a href="#cb7-15" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb7-16"><a href="#cb7-16" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== C言語開発環境確認 ===</span><span class="sc">\n\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb7-17"><a href="#cb7-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-18"><a href="#cb7-18" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* コンパイラ情報 */</span></span>
<span id="cb7-19"><a href="#cb7-19" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;コンパイラ情報:</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb7-20"><a href="#cb7-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-21"><a href="#cb7-21" aria-hidden="true" tabindex="-1"></a><span class="pp">#ifdef __GNUC__</span></span>
<span id="cb7-22"><a href="#cb7-22" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;- GCC version: </span><span class="sc">%d</span><span class="st">.</span><span class="sc">%d</span><span class="st">.</span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> __GNUC__<span class="op">,</span> __GNUC_MINOR__<span class="op">,</span> __GNUC_PATCHLEVEL__<span class="op">);</span></span>
<span id="cb7-23"><a href="#cb7-23" aria-hidden="true" tabindex="-1"></a><span class="pp">#endif</span></span>
<span id="cb7-24"><a href="#cb7-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-25"><a href="#cb7-25" aria-hidden="true" tabindex="-1"></a><span class="pp">#ifdef _MSC_VER</span></span>
<span id="cb7-26"><a href="#cb7-26" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;- Microsoft Visual C++ version: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> _MSC_VER<span class="op">);</span></span>
<span id="cb7-27"><a href="#cb7-27" aria-hidden="true" tabindex="-1"></a><span class="pp">#endif</span></span>
<span id="cb7-28"><a href="#cb7-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-29"><a href="#cb7-29" aria-hidden="true" tabindex="-1"></a><span class="pp">#ifdef __clang__</span></span>
<span id="cb7-30"><a href="#cb7-30" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;- Clang version: </span><span class="sc">%d</span><span class="st">.</span><span class="sc">%d</span><span class="st">.</span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> __clang_major__<span class="op">,</span> __clang_minor__<span class="op">,</span> __clang_patchlevel__<span class="op">);</span></span>
<span id="cb7-31"><a href="#cb7-31" aria-hidden="true" tabindex="-1"></a><span class="pp">#endif</span></span>
<span id="cb7-32"><a href="#cb7-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-33"><a href="#cb7-33" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* C規格情報 */</span></span>
<span id="cb7-34"><a href="#cb7-34" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">C規格情報:</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb7-35"><a href="#cb7-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-36"><a href="#cb7-36" aria-hidden="true" tabindex="-1"></a><span class="pp">#ifdef __STDC_VERSION__</span></span>
<span id="cb7-37"><a href="#cb7-37" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;- __STDC_VERSION__: </span><span class="sc">%ld</span><span class="st">L</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> __STDC_VERSION__<span class="op">);</span></span>
<span id="cb7-38"><a href="#cb7-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-39"><a href="#cb7-39" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>__STDC_VERSION__ <span class="op">&gt;=</span> <span class="dv">201710</span><span class="bu">L</span><span class="op">)</span></span>
<span id="cb7-40"><a href="#cb7-40" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb7-41"><a href="#cb7-41" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;- 対応規格: C17 (C18)</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb7-42"><a href="#cb7-42" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb7-43"><a href="#cb7-43" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>__STDC_VERSION__ <span class="op">&gt;=</span> <span class="dv">201112</span><span class="bu">L</span><span class="op">)</span></span>
<span id="cb7-44"><a href="#cb7-44" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb7-45"><a href="#cb7-45" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;- 対応規格: C11</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb7-46"><a href="#cb7-46" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb7-47"><a href="#cb7-47" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>__STDC_VERSION__ <span class="op">&gt;=</span> <span class="dv">199901</span><span class="bu">L</span><span class="op">)</span></span>
<span id="cb7-48"><a href="#cb7-48" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb7-49"><a href="#cb7-49" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;- 対応規格: C99</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb7-50"><a href="#cb7-50" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb7-51"><a href="#cb7-51" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span></span>
<span id="cb7-52"><a href="#cb7-52" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb7-53"><a href="#cb7-53" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;- 対応規格: C90 (ANSI C)</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb7-54"><a href="#cb7-54" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb7-55"><a href="#cb7-55" aria-hidden="true" tabindex="-1"></a><span class="pp">#else</span></span>
<span id="cb7-56"><a href="#cb7-56" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;- 対応規格: C90 (ANSI C) または未定義</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb7-57"><a href="#cb7-57" aria-hidden="true" tabindex="-1"></a><span class="pp">#endif</span></span>
<span id="cb7-58"><a href="#cb7-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-59"><a href="#cb7-59" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* システム情報 */</span></span>
<span id="cb7-60"><a href="#cb7-60" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">システム情報:</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb7-61"><a href="#cb7-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-62"><a href="#cb7-62" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;- int型サイズ: </span><span class="sc">%lu</span><span class="st"> bytes</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(</span><span class="dt">unsigned</span> <span class="dt">long</span><span class="op">)</span><span class="kw">sizeof</span><span class="op">(</span><span class="dt">int</span><span class="op">));</span></span>
<span id="cb7-63"><a href="#cb7-63" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;- long型サイズ: </span><span class="sc">%lu</span><span class="st"> bytes</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(</span><span class="dt">unsigned</span> <span class="dt">long</span><span class="op">)</span><span class="kw">sizeof</span><span class="op">(</span><span class="dt">long</span><span class="op">));</span></span>
<span id="cb7-64"><a href="#cb7-64" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;- ポインタサイズ: </span><span class="sc">%lu</span><span class="st"> bytes</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(</span><span class="dt">unsigned</span> <span class="dt">long</span><span class="op">)</span><span class="kw">sizeof</span><span class="op">(</span><span class="dt">void</span> <span class="op">*));</span></span>
<span id="cb7-65"><a href="#cb7-65" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;- char型範囲: </span><span class="sc">%d</span><span class="st"> 〜 </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> CHAR_MIN<span class="op">,</span> CHAR_MAX<span class="op">);</span></span>
<span id="cb7-66"><a href="#cb7-66" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;- int型範囲: </span><span class="sc">%d</span><span class="st"> 〜 </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> INT_MIN<span class="op">,</span> INT_MAX<span class="op">);</span></span>
<span id="cb7-67"><a href="#cb7-67" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb7-68"><a href="#cb7-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-69"><a href="#cb7-69" aria-hidden="true" tabindex="-1"></a><span class="co">/*</span></span>
<span id="cb7-70"><a href="#cb7-70" aria-hidden="true" tabindex="-1"></a><span class="co"> * 基本的な計算テスト</span></span>
<span id="cb7-71"><a href="#cb7-71" aria-hidden="true" tabindex="-1"></a><span class="co"> */</span></span>
<span id="cb7-72"><a href="#cb7-72" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> test_basic_operations<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb7-73"><a href="#cb7-73" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb7-74"><a href="#cb7-74" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> a <span class="op">=</span> <span class="dv">10</span><span class="op">;</span></span>
<span id="cb7-75"><a href="#cb7-75" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> b <span class="op">=</span> <span class="dv">3</span><span class="op">;</span></span>
<span id="cb7-76"><a href="#cb7-76" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> result<span class="op">;</span></span>
<span id="cb7-77"><a href="#cb7-77" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-78"><a href="#cb7-78" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">=== 基本演算テスト ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb7-79"><a href="#cb7-79" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-80"><a href="#cb7-80" aria-hidden="true" tabindex="-1"></a>    result <span class="op">=</span> a <span class="op">+</span> b<span class="op">;</span></span>
<span id="cb7-81"><a href="#cb7-81" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st"> + </span><span class="sc">%d</span><span class="st"> = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> a<span class="op">,</span> b<span class="op">,</span> result<span class="op">);</span></span>
<span id="cb7-82"><a href="#cb7-82" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-83"><a href="#cb7-83" aria-hidden="true" tabindex="-1"></a>    result <span class="op">=</span> a <span class="op">-</span> b<span class="op">;</span></span>
<span id="cb7-84"><a href="#cb7-84" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st"> - </span><span class="sc">%d</span><span class="st"> = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> a<span class="op">,</span> b<span class="op">,</span> result<span class="op">);</span></span>
<span id="cb7-85"><a href="#cb7-85" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-86"><a href="#cb7-86" aria-hidden="true" tabindex="-1"></a>    result <span class="op">=</span> a <span class="op">*</span> b<span class="op">;</span></span>
<span id="cb7-87"><a href="#cb7-87" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st"> * </span><span class="sc">%d</span><span class="st"> = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> a<span class="op">,</span> b<span class="op">,</span> result<span class="op">);</span></span>
<span id="cb7-88"><a href="#cb7-88" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-89"><a href="#cb7-89" aria-hidden="true" tabindex="-1"></a>    result <span class="op">=</span> a <span class="op">/</span> b<span class="op">;</span></span>
<span id="cb7-90"><a href="#cb7-90" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st"> / </span><span class="sc">%d</span><span class="st"> = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> a<span class="op">,</span> b<span class="op">,</span> result<span class="op">);</span></span>
<span id="cb7-91"><a href="#cb7-91" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-92"><a href="#cb7-92" aria-hidden="true" tabindex="-1"></a>    result <span class="op">=</span> a <span class="op">%</span> b<span class="op">;</span></span>
<span id="cb7-93"><a href="#cb7-93" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st"> </span><span class="sc">%%</span><span class="st"> </span><span class="sc">%d</span><span class="st"> = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> a<span class="op">,</span> b<span class="op">,</span> result<span class="op">);</span></span>
<span id="cb7-94"><a href="#cb7-94" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-95"><a href="#cb7-95" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;基本演算テスト: 正常完了</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb7-96"><a href="#cb7-96" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb7-97"><a href="#cb7-97" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-98"><a href="#cb7-98" aria-hidden="true" tabindex="-1"></a><span class="co">/*</span></span>
<span id="cb7-99"><a href="#cb7-99" aria-hidden="true" tabindex="-1"></a><span class="co"> * メイン関数</span></span>
<span id="cb7-100"><a href="#cb7-100" aria-hidden="true" tabindex="-1"></a><span class="co"> */</span></span>
<span id="cb7-101"><a href="#cb7-101" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb7-102"><a href="#cb7-102" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb7-103"><a href="#cb7-103" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;C言語開発環境確認プログラム</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb7-104"><a href="#cb7-104" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;コンパイル日時: </span><span class="sc">%s</span><span class="st"> </span><span class="sc">%s\n\n</span><span class="st">&quot;</span><span class="op">,</span> __DATE__<span class="op">,</span> __TIME__<span class="op">);</span></span>
<span id="cb7-105"><a href="#cb7-105" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-106"><a href="#cb7-106" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 環境情報の表示 */</span></span>
<span id="cb7-107"><a href="#cb7-107" aria-hidden="true" tabindex="-1"></a>    print_environment_info<span class="op">();</span></span>
<span id="cb7-108"><a href="#cb7-108" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-109"><a href="#cb7-109" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 基本演算のテスト */</span></span>
<span id="cb7-110"><a href="#cb7-110" aria-hidden="true" tabindex="-1"></a>    test_basic_operations<span class="op">();</span></span>
<span id="cb7-111"><a href="#cb7-111" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-112"><a href="#cb7-112" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">=== 環境確認完了 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb7-113"><a href="#cb7-113" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;この出力が正常に表示されれば、開発環境は正しく設定されています。</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb7-114"><a href="#cb7-114" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-115"><a href="#cb7-115" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb7-116"><a href="#cb7-116" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
<h1 id="第2章-基本構文">第2章: 基本構文</h1>
<h2 id="対応c規格-1">対応C規格</h2>
<ul>
<li><strong>主要対象:</strong> C90</li>
<li><strong>学習内容:</strong>
プログラムの基本構造、main関数、printf関数</li>
</ul>
<h2 id="学習目標-1">学習目標</h2>
<p>この章を完了すると、以下のことができるようになります：</p>
<ul>
<li>C言語プログラムの基本構造を理解する</li>
<li>main関数の役割を理解する</li>
<li>printf関数を使った文字列出力ができる</li>
<li>コメントの書き方を覚える</li>
<li>基本的なエスケープシーケンスを使える</li>
</ul>
<h2 id="理論解説-1">理論解説</h2>
<h3 id="プログラムの基本構造">プログラムの基本構造</h3>
<p>C言語のプログラムは以下の基本構造を持ちます：</p>
<div class="sourceCode" id="cb8"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span><span class="pp">    </span><span class="co">/* ヘッダーファイルのインクルード */</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span>        <span class="co">/* メイン関数の定義 */</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;Hello, World!</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span>  <span class="co">/* 処理文 */</span></span>
<span id="cb8-6"><a href="#cb8-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span>         <span class="co">/* 戻り値 */</span></span></code></pre></div>
<h4 id="各部分の説明">各部分の説明</h4>
<ol type="1">
<li><strong>プリプロセッサ指令</strong> (<code>#include</code>)
<ul>
<li>ヘッダーファイルを取り込む指令</li>
<li><code>stdio.h</code>は標準入出力関数の宣言を含む</li>
</ul></li>
<li><strong>main関数</strong>
<ul>
<li>プログラムの実行開始点</li>
<li>すべてのC言語プログラムに必須</li>
</ul></li>
<li><strong>関数本体</strong>（<code>{</code> と <code>}</code>
で囲まれた部分）
<ul>
<li>実際の処理を記述する場所</li>
</ul></li>
<li><strong>return文</strong>
<ul>
<li>関数の終了と戻り値の指定</li>
</ul></li>
</ol>
<h3 id="main関数の詳細">main関数の詳細</h3>
<p>main関数はプログラムの<strong>エントリーポイント</strong>（実行開始点）です。</p>
<h4 id="main関数の形式">main関数の形式</h4>
<p><strong>標準的な形式:</strong></p>
<div class="sourceCode" id="cb9"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* プログラムの処理 */</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span></code></pre></div>
<p><strong>コマンドライン引数を受け取る形式:</strong></p>
<div class="sourceCode" id="cb10"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">int</span> argc<span class="op">,</span> <span class="dt">char</span> <span class="op">*</span>argv<span class="op">[])</span></span>
<span id="cb10-2"><a href="#cb10-2" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb10-3"><a href="#cb10-3" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* プログラムの処理 */</span></span>
<span id="cb10-4"><a href="#cb10-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span></code></pre></div>
<h4 id="戻り値の意味">戻り値の意味</h4>
<ul>
<li><strong>0</strong>: プログラムが正常終了</li>
<li><strong>0以外</strong>: エラーで終了（エラーコード）</li>
</ul>
<h3 id="printf関数">printf関数</h3>
<p>printf関数は<strong>フォーマット付き出力</strong>を実行う標準ライブラリ関数です。</p>
<h4 id="基本的な使い方">基本的な使い方</h4>
<div class="sourceCode" id="cb11"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a>printf<span class="op">(</span><span class="st">&quot;Hello, World!</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span></code></pre></div>
<h4 id="フォーマット指定子">フォーマット指定子</h4>
<table>
<thead>
<tr>
<th>指定子</th>
<th>データ型</th>
<th>説明</th>
<th>例</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>%d</code></td>
<td>int</td>
<td>10進整数</td>
<td><code>printf("%d", 42);</code></td>
</tr>
<tr>
<td><code>%c</code></td>
<td>char</td>
<td>文字</td>
<td><code>printf("%c", 'A');</code></td>
</tr>
<tr>
<td><code>%s</code></td>
<td>char*</td>
<td>文字列</td>
<td><code>printf("%s", "Hello");</code></td>
</tr>
<tr>
<td><code>%f</code></td>
<td>double</td>
<td>浮動小数点数</td>
<td><code>printf("%f", 3.14);</code></td>
</tr>
</tbody>
</table>
<h4 id="エスケープシーケンス">エスケープシーケンス</h4>
<p>特殊文字を表現するための記号です：</p>
<table>
<thead>
<tr>
<th>シーケンス</th>
<th>意味</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>\n</code></td>
<td>改行</td>
<td>次の実行に移る</td>
</tr>
<tr>
<td><code>\t</code></td>
<td>タブ</td>
<td>タブ文字を挿入</td>
</tr>
<tr>
<td><code>\"</code></td>
<td>ダブルクォート</td>
<td>文字列内で<code>"</code>を表示</td>
</tr>
<tr>
<td><code>\\</code></td>
<td>バックスラッシュ</td>
<td><code>\</code>文字を表示</td>
</tr>
</tbody>
</table>
<h3 id="コメント">コメント</h3>
<p>プログラムに説明を追加するためのコメント記法：</p>
<h4 id="c90スタイル">C90スタイル</h4>
<div class="sourceCode" id="cb12"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* これは複数実行にわたる</span></span>
<span id="cb12-2"><a href="#cb12-2" aria-hidden="true" tabindex="-1"></a><span class="co">   コメントです */</span></span>
<span id="cb12-3"><a href="#cb12-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb12-4"><a href="#cb12-4" aria-hidden="true" tabindex="-1"></a><span class="co">/* 1行コメント */</span></span></code></pre></div>
<h4 id="c99以降のスタイル">C99以降のスタイル</h4>
<div class="sourceCode" id="cb13"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="co">// これは1行コメントです（C99以降）</span></span></code></pre></div>
<p><strong>重要:</strong> この章ではC90準拠のため、<code>/* */</code>
スタイルを使用します。</p>
<h3 id="基本的なプログラム例">基本的なプログラム例</h3>
<h4 id="例-単純な文字列出力">例: 単純な文字列出力</h4>
<div class="sourceCode" id="cb14"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;Hello, World!</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span></code></pre></div>
<h4 id="例-複数実行の出力">例: 複数実行の出力</h4>
<div class="sourceCode" id="cb15"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;C言語学習教材</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;基本文法・Hello World</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;プログラムが正常に動作しています！</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span></code></pre></div>
<h4 id="例-エスケープシーケンスの使用">例:
エスケープシーケンスの使用</h4>
<div class="sourceCode" id="cb16"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;タブ区切り:</span><span class="sc">\t</span><span class="st">アイテム1</span><span class="sc">\t</span><span class="st">アイテム2</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;引用符の表示: </span><span class="sc">\&quot;</span><span class="st">Hello, World!</span><span class="sc">\&quot;\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;パス表示: C:</span><span class="sc">\\</span><span class="st">Program Files</span><span class="sc">\\</span><span class="st">MyApp</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span></code></pre></div>
<h2 id="サンプルコード-2">サンプルコード</h2>
<h3 id="hello-worldプログラム">Hello Worldプログラム</h3>
<p>プログラムファイル: <code>examples/hello_world.c</code></p>
<p>もっとも基本的なC言語プログラムです。</p>
<h3 id="フォーマット出力プログラム">フォーマット出力プログラム</h3>
<p>プログラムファイル: <code>examples/formatted_output.c</code></p>
<p>printf関数のさまざまな使い方を学習します。</p>
<h3 id="コンパイルと実行-1">コンパイルと実行</h3>
<div class="sourceCode" id="cb17"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># examples ディレクトリに移動</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> examples</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="co"># C90準拠でコンパイル</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a><span class="fu">gcc</span> <span class="at">-std</span><span class="op">=</span>c90 <span class="at">-Wall</span> <span class="at">-Wextra</span> <span class="at">-pedantic</span> hello_world.c <span class="at">-o</span> hello_world</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 実行</span></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a><span class="ex">./hello_world</span></span></code></pre></div>
<h2 id="演習課題-1">演習課題</h2>
<h3 id="基礎問題-1">基礎問題</h3>
<ol type="1">
<li><strong>Hello World</strong>
<ul>
<li>自分の名前を表示するプログラムを作成してください</li>
</ul></li>
<li><strong>複数実行出力</strong>
<ul>
<li>好きな詩や歌詞を3実行以上で表示するプログラムを作成してください</li>
</ul></li>
<li><strong>エスケープシーケンス</strong>
<ul>
<li>タブとダブルクォートを使った表示プログラムを作成してください</li>
</ul></li>
</ol>
<h3 id="応用問題-1">応用問題</h3>
<ol type="1">
<li><strong>フォーマット文字列</strong>
<ul>
<li>printf関数のさまざまなフォーマット指定子を試してください</li>
</ul></li>
<li><strong>プログラム構造の理解</strong>
<ul>
<li>main関数の戻り値を変更して動作を確認してください</li>
</ul></li>
</ol>
<h2 id="コンパイル方法-1">コンパイル方法</h2>
<p>この章では以下のMakefileを使用してコンパイルができます：</p>
<div class="sourceCode" id="cb18"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 全ての例題をコンパイル</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> all</span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-4"><a href="#cb18-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 特定のプログラムをコンパイル</span></span>
<span id="cb18-5"><a href="#cb18-5" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> hello_world</span>
<span id="cb18-6"><a href="#cb18-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-7"><a href="#cb18-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 実行</span></span>
<span id="cb18-8"><a href="#cb18-8" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> run</span>
<span id="cb18-9"><a href="#cb18-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb18-10"><a href="#cb18-10" aria-hidden="true" tabindex="-1"></a><span class="co"># クリーンアップ</span></span>
<span id="cb18-11"><a href="#cb18-11" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> clean</span></code></pre></div>
<h2 id="規格による違い-1">規格による違い</h2>
<h3 id="c90での制限事項">C90での制限事項</h3>
<ul>
<li>コメントは <code>/* */</code> 形式のみ</li>
<li>変数宣言は関数やブロックの先頭で実行う</li>
<li>forループ内での変数宣言は不可</li>
</ul>
<h3 id="c99以降の拡張">C99以降の拡張</h3>
<ul>
<li><code>//</code> 形式のコメント追加</li>
<li>forループ内での変数宣言が可能</li>
<li>複合リテラル等の新機能</li>
</ul>
<h2 id="次の章へ-1">次の章へ</h2>
<p>基本文法を理解したら、<a
href="../data-types/README.md">データ型と変数</a> に進んでください。</p>
<h2 id="参考資料-1">参考資料</h2>
<ul>
<li><a
href="https://ja.cppreference.com/w/c/io/fprintf">printf関数リファレンス</a></li>
<li><a
href="https://ja.cppreference.com/w/c/language/escape">エスケープシーケンス一覧</a></li>
<li><a
href="https://www.iso.org/standard/17782.html">C90規格仕様</a></li>
</ul>
<h2 id="サンプルコード-3">サンプルコード</h2>
<h3 id="formatted_output.c">formatted_output.c</h3>
<div class="sourceCode" id="cb19"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="co">/*</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="co"> * ファイル名: formatted_output.c</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="co"> * 説明: printf関数のさまざまなフォーマット指定子を学習</span></span>
<span id="cb19-4"><a href="#cb19-4" aria-hidden="true" tabindex="-1"></a><span class="co"> * 規格: C90準拠</span></span>
<span id="cb19-5"><a href="#cb19-5" aria-hidden="true" tabindex="-1"></a><span class="co"> */</span></span>
<span id="cb19-6"><a href="#cb19-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-7"><a href="#cb19-7" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb19-8"><a href="#cb19-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-9"><a href="#cb19-9" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb19-10"><a href="#cb19-10" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb19-11"><a href="#cb19-11" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 基本的な文字列出力 */</span></span>
<span id="cb19-12"><a href="#cb19-12" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== C言語フォーマット出力 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb19-13"><a href="#cb19-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-14"><a href="#cb19-14" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 整数の出力 */</span></span>
<span id="cb19-15"><a href="#cb19-15" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;整数: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="dv">42</span><span class="op">);</span></span>
<span id="cb19-16"><a href="#cb19-16" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;負の整数: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">-</span><span class="dv">123</span><span class="op">);</span></span>
<span id="cb19-17"><a href="#cb19-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-18"><a href="#cb19-18" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 文字の出力 */</span></span>
<span id="cb19-19"><a href="#cb19-19" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;文字: </span><span class="sc">%c\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="ch">&#39;A&#39;</span><span class="op">);</span></span>
<span id="cb19-20"><a href="#cb19-20" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;文字コード: </span><span class="sc">%c\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="dv">65</span><span class="op">);</span> <span class="co">/* Aのアスキーコード */</span></span>
<span id="cb19-21"><a href="#cb19-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-22"><a href="#cb19-22" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 文字列の出力 */</span></span>
<span id="cb19-23"><a href="#cb19-23" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;文字列: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;Hello, World!&quot;</span><span class="op">);</span></span>
<span id="cb19-24"><a href="#cb19-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-25"><a href="#cb19-25" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 浮動小数点数の出力 */</span></span>
<span id="cb19-26"><a href="#cb19-26" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;浮動小数点数: </span><span class="sc">%f\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="fl">3.14159</span><span class="op">);</span></span>
<span id="cb19-27"><a href="#cb19-27" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;小数点以下2桁: </span><span class="sc">%.2f\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="fl">3.14159</span><span class="op">);</span></span>
<span id="cb19-28"><a href="#cb19-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-29"><a href="#cb19-29" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* エスケープシーケンスの使用 */</span></span>
<span id="cb19-30"><a href="#cb19-30" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">--- エスケープシーケンス ---</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb19-31"><a href="#cb19-31" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;改行</span><span class="sc">\n</span><span class="st">とタブ</span><span class="sc">\t</span><span class="st">の使用例：</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb19-32"><a href="#cb19-32" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;項目1</span><span class="sc">\t</span><span class="st">項目2</span><span class="sc">\t</span><span class="st">項目3</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb19-33"><a href="#cb19-33" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;値A</span><span class="sc">\t</span><span class="st">値B</span><span class="sc">\t</span><span class="st">値C</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb19-34"><a href="#cb19-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-35"><a href="#cb19-35" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 特殊文字の表示 */</span></span>
<span id="cb19-36"><a href="#cb19-36" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">--- 特殊文字の表示 ---</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb19-37"><a href="#cb19-37" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ダブルクォート: </span><span class="sc">\&quot;</span><span class="st">Hello</span><span class="sc">\&quot;\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb19-38"><a href="#cb19-38" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;バックスラッシュ: C:</span><span class="sc">\\</span><span class="st">Program Files</span><span class="sc">\\\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb19-39"><a href="#cb19-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-40"><a href="#cb19-40" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* フォーマット指定子の組み合わせ */</span></span>
<span id="cb19-41"><a href="#cb19-41" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">--- 複合表示 ---</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb19-42"><a href="#cb19-42" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;名前: </span><span class="sc">%s</span><span class="st">, 年齢: </span><span class="sc">%d</span><span class="st">歳, 身長: </span><span class="sc">%.1f</span><span class="st">cm</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;田中太郎&quot;</span><span class="op">,</span> <span class="dv">25</span><span class="op">,</span> <span class="fl">175.5</span><span class="op">);</span></span>
<span id="cb19-43"><a href="#cb19-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb19-44"><a href="#cb19-44" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb19-45"><a href="#cb19-45" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<blockquote>
<p>C99版は<a
href="formatted_output_c99.c">こちら</a>を参照してください。</p>
</blockquote>
<h3 id="hello_world.c">hello_world.c</h3>
<div class="sourceCode" id="cb20"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="co">/*</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="co"> * ファイル名: hello_world.c</span></span>
<span id="cb20-3"><a href="#cb20-3" aria-hidden="true" tabindex="-1"></a><span class="co"> * 説明: C言語の最も基本的なプログラム</span></span>
<span id="cb20-4"><a href="#cb20-4" aria-hidden="true" tabindex="-1"></a><span class="co"> * 規格: C90準拠</span></span>
<span id="cb20-5"><a href="#cb20-5" aria-hidden="true" tabindex="-1"></a><span class="co"> */</span></span>
<span id="cb20-6"><a href="#cb20-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-7"><a href="#cb20-7" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb20-8"><a href="#cb20-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb20-9"><a href="#cb20-9" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb20-10"><a href="#cb20-10" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb20-11"><a href="#cb20-11" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;Hello, World!</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb20-12"><a href="#cb20-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb20-13"><a href="#cb20-13" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<blockquote>
<p>C99版は<a href="hello_world_c99.c">こちら</a>を参照してください。</p>
</blockquote>
<hr />
<h1 id="第3章-データ型と変数">第3章: データ型と変数</h1>
<h2 id="対応c規格-2">対応C規格</h2>
<ul>
<li><strong>主要対象:</strong> C90</li>
<li><strong>学習内容:</strong>
基本データ型、変数宣言、初期化、スコープ、変数の生存期間</li>
</ul>
<h2 id="学習目標-2">学習目標</h2>
<p>この章を完了すると、以下のことができるようになります：</p>
<ul>
<li>C言語の基本データ型を理解する</li>
<li>変数の宣言と初期化ができる</li>
<li>変数のスコープ（有効範囲）を理解する</li>
<li>データ型のサイズと範囲を把握する</li>
<li>適切な型を選択してプログラムを作成できる</li>
</ul>
<h2 id="理論解説-2">理論解説</h2>
<h3 id="c言語の基本データ型">C言語の基本データ型</h3>
<p>C言語では、さまざまなデータ型が用意されています。</p>
<h4 id="整数型">整数型</h4>
<table>
<thead>
<tr>
<th>型名</th>
<th>サイズ</th>
<th>範囲</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>char</code></td>
<td>1バイト</td>
<td>-128 〜 127</td>
<td>文字、小さな整数</td>
</tr>
<tr>
<td><code>unsigned char</code></td>
<td>1バイト</td>
<td>0 〜 255</td>
<td>符号なし文字</td>
</tr>
<tr>
<td><code>short</code></td>
<td>2バイト</td>
<td>-32,768 〜 32,767</td>
<td>短整数</td>
</tr>
<tr>
<td><code>unsigned short</code></td>
<td>2バイト</td>
<td>0 〜 65,535</td>
<td>符号なし短整数</td>
</tr>
<tr>
<td><code>int</code></td>
<td>4バイト</td>
<td>-2,147,483,648 〜 2,147,483,647</td>
<td>整数</td>
</tr>
<tr>
<td><code>unsigned int</code></td>
<td>4バイト</td>
<td>0 〜 4,294,967,295</td>
<td>符号なし整数</td>
</tr>
<tr>
<td><code>long</code></td>
<td>4/8バイト</td>
<td>システム依存</td>
<td>長整数</td>
</tr>
<tr>
<td><code>unsigned long</code></td>
<td>4/8バイト</td>
<td>システム依存</td>
<td>符号なし長整数</td>
</tr>
</tbody>
</table>
<h4 id="浮動小数点数型">浮動小数点数型</h4>
<table>
<thead>
<tr>
<th>型名</th>
<th>サイズ</th>
<th>精度</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>float</code></td>
<td>4バイト</td>
<td>約7桁</td>
<td>単精度浮動小数点</td>
</tr>
<tr>
<td><code>double</code></td>
<td>8バイト</td>
<td>約15桁</td>
<td>倍精度浮動小数点</td>
</tr>
<tr>
<td><code>long double</code></td>
<td>12/16バイト</td>
<td>システム依存</td>
<td>拡張精度浮動小数点</td>
</tr>
</tbody>
</table>
<h4 id="その他の型">その他の型</h4>
<table>
<thead>
<tr>
<th>型名</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>void</code></td>
<td>「型なし」を表す（関数の戻り値等で使用）</td>
</tr>
</tbody>
</table>
<h3 id="変数の宣言と初期化">変数の宣言と初期化</h3>
<h4 id="基本的な変数宣言">基本的な変数宣言</h4>
<div class="sourceCode" id="cb21"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> age<span class="op">;</span>        <span class="co">/* 整数型変数の宣言 */</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a><span class="dt">double</span> height<span class="op">;</span>  <span class="co">/* 倍精度浮動小数点型変数の宣言 */</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a><span class="dt">char</span> grade<span class="op">;</span>     <span class="co">/* 文字型変数の宣言 */</span></span></code></pre></div>
<h4 id="初期化付き宣言">初期化付き宣言</h4>
<div class="sourceCode" id="cb22"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> count <span class="op">=</span> <span class="dv">10</span><span class="op">;</span>           <span class="co">/* 宣言と同時に初期化 */</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="dt">double</span> pi <span class="op">=</span> <span class="fl">3.14159</span><span class="op">;</span>     <span class="co">/* 浮動小数点数の初期化 |</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="co">char letter = &#39;A&#39;;       /* 文字の初期化 */</span></span></code></pre></div>
<h4 id="複数変数の同時宣言">複数変数の同時宣言</h4>
<div class="sourceCode" id="cb23"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> x<span class="op">,</span> y<span class="op">,</span> z<span class="op">;</span>                    <span class="co">/* 同じ型の複数変数 */</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> a <span class="op">=</span> <span class="dv">1</span><span class="op">,</span> b <span class="op">=</span> <span class="dv">2</span><span class="op">,</span> c<span class="op">;</span>          <span class="co">/* 一部だけ初期化 */</span></span></code></pre></div>
<h3 id="変数の代入と演算">変数の代入と演算</h3>
<h4 id="代入演算子">代入演算子</h4>
<div class="sourceCode" id="cb24"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> number<span class="op">;</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a>number <span class="op">=</span> <span class="dv">10</span><span class="op">;</span>        <span class="co">/* 代入 */</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>number <span class="op">+=</span> <span class="dv">5</span><span class="op">;</span>        <span class="co">/* number = number + 5 と同じ */</span></span>
<span id="cb24-4"><a href="#cb24-4" aria-hidden="true" tabindex="-1"></a>number <span class="op">-=</span> <span class="dv">3</span><span class="op">;</span>        <span class="co">/* number = number - 3 と同じ */</span></span>
<span id="cb24-5"><a href="#cb24-5" aria-hidden="true" tabindex="-1"></a>number <span class="op">*=</span> <span class="dv">2</span><span class="op">;</span>        <span class="co">/* number = number * 2 と同じ */</span></span>
<span id="cb24-6"><a href="#cb24-6" aria-hidden="true" tabindex="-1"></a>number <span class="op">/=</span> <span class="dv">4</span><span class="op">;</span>        <span class="co">/* number = number / 4 と同じ */</span></span></code></pre></div>
<h4 id="基本演算子">基本演算子</h4>
<div class="sourceCode" id="cb25"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> a <span class="op">=</span> <span class="dv">10</span><span class="op">,</span> b <span class="op">=</span> <span class="dv">3</span><span class="op">;</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> sum <span class="op">=</span> a <span class="op">+</span> b<span class="op">;</span>        <span class="co">/* 加算: 13 */</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> diff <span class="op">=</span> a <span class="op">-</span> b<span class="op">;</span>       <span class="co">/* 減算: 7 */</span></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> product <span class="op">=</span> a <span class="op">*</span> b<span class="op">;</span>    <span class="co">/* 乗算: 30 */</span></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> quotient <span class="op">=</span> a <span class="op">/</span> b<span class="op">;</span>   <span class="co">/* 除算: 3 (整数除算) */</span></span>
<span id="cb25-6"><a href="#cb25-6" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> remainder <span class="op">=</span> a <span class="op">%</span> b<span class="op">;</span>  <span class="co">/* 剰余: 1 */</span></span></code></pre></div>
<h3 id="型変換キャスト">型変換（キャスト）</h3>
<h4 id="暗黙の型変換">暗黙の型変換</h4>
<div class="sourceCode" id="cb26"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> i <span class="op">=</span> <span class="dv">42</span><span class="op">;</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a><span class="dt">double</span> d<span class="op">;</span></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a>d <span class="op">=</span> i<span class="op">;</span>          <span class="co">/* int から double への自動変換 */</span></span></code></pre></div>
<h4 id="明示的な型変換">明示的な型変換</h4>
<div class="sourceCode" id="cb27"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="dt">double</span> pi <span class="op">=</span> <span class="fl">3.14159</span><span class="op">;</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> rounded<span class="op">;</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>rounded <span class="op">=</span> <span class="op">(</span><span class="dt">int</span><span class="op">)</span>pi<span class="op">;</span>      <span class="co">/* 明示的にintに変換（3になる） */</span></span></code></pre></div>
<h4 id="型変換の注意点">型変換の注意点</h4>
<div class="sourceCode" id="cb28"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> a <span class="op">=</span> <span class="dv">5</span><span class="op">,</span> b <span class="op">=</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="dt">double</span> result<span class="op">;</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>result <span class="op">=</span> a <span class="op">/</span> b<span class="op">;</span>         <span class="co">/* 結果: 2.0 (整数除算後に変換) */</span></span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>result <span class="op">=</span> <span class="op">(</span><span class="dt">double</span><span class="op">)</span>a <span class="op">/</span> b<span class="op">;</span> <span class="co">/* 結果: 2.5 (実数除算) */</span></span></code></pre></div>
<h3 id="変数のスコープ有効範囲">変数のスコープ（有効範囲）</h3>
<p>スコープとは、変数がプログラム中のどの部分でアクセス可能かを示す概念です。</p>
<h4 id="ファイルスコープグローバルスコープ">1.
ファイルスコープ（グローバルスコープ）</h4>
<p>ファイル全体でアクセス可能な変数です。</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> global_count <span class="op">=</span> <span class="dv">100</span><span class="op">;</span>   <span class="co">/* ファイルスコープ変数 */</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a><span class="dt">double</span> global_rate<span class="op">;</span>     <span class="co">/* 初期化されていない場合は0になる */</span></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> function<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a>    global_count <span class="op">=</span> <span class="dv">200</span><span class="op">;</span> <span class="co">/* 関数内からアクセス可能 */</span></span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb29-13"><a href="#cb29-13" aria-hidden="true" tabindex="-1"></a>    global_count <span class="op">=</span> <span class="dv">150</span><span class="op">;</span>  <span class="co">/* main関数からもアクセス可能 */</span></span>
<span id="cb29-14"><a href="#cb29-14" aria-hidden="true" tabindex="-1"></a>    function<span class="op">();</span></span>
<span id="cb29-15"><a href="#cb29-15" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;global_count = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> global_count<span class="op">);</span> <span class="co">/* 200が出力 */</span></span>
<span id="cb29-16"><a href="#cb29-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb29-17"><a href="#cb29-17" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h4 id="関数スコープ">2. 関数スコープ</h4>
<p>関数内で宣言された変数は、その関数内でのみアクセス可能です。</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> function_a<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> local_a <span class="op">=</span> <span class="dv">10</span><span class="op">;</span>   <span class="co">/* function_a内でのみ有効 */</span></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;local_a = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> local_a<span class="op">);</span></span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> function_b<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> local_a <span class="op">=</span> <span class="dv">20</span><span class="op">;</span>   <span class="co">/* 異なる関数なので同じ名前でも別変数 */</span></span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;local_a = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> local_a<span class="op">);</span></span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* function_aのlocal_aにはアクセス不可 */</span></span>
<span id="cb30-12"><a href="#cb30-12" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h4 id="ブロックスコープ">3. ブロックスコープ</h4>
<p><code>{</code> と <code>}</code>
で囲まれたブロック内でのみアクセス可能な変数です。</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> main_var <span class="op">=</span> <span class="dv">5</span><span class="op">;</span></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>main_var <span class="op">&gt;</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> block_var <span class="op">=</span> <span class="dv">10</span><span class="op">;</span>      <span class="co">/* このifブロック内でのみ有効 */</span></span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;block_var = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> block_var<span class="op">);</span></span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span></span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a>            <span class="dt">int</span> nested_var <span class="op">=</span> <span class="dv">20</span><span class="op">;</span> <span class="co">/* さらに内側のブロック */</span></span>
<span id="cb31-11"><a href="#cb31-11" aria-hidden="true" tabindex="-1"></a>            printf<span class="op">(</span><span class="st">&quot;nested_var = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> nested_var<span class="op">);</span></span>
<span id="cb31-12"><a href="#cb31-12" aria-hidden="true" tabindex="-1"></a>            <span class="co">/* block_varとmain_varにもアクセス可能 */</span></span>
<span id="cb31-13"><a href="#cb31-13" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb31-14"><a href="#cb31-14" aria-hidden="true" tabindex="-1"></a>        <span class="co">/* nested_varはここではアクセス不可 */</span></span>
<span id="cb31-15"><a href="#cb31-15" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb31-16"><a href="#cb31-16" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* block_varはここではアクセス不可 */</span></span>
<span id="cb31-17"><a href="#cb31-17" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb31-18"><a href="#cb31-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb31-19"><a href="#cb31-19" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h4 id="スコープの隠蔽シャドウイング">4.
スコープの隠蔽（シャドウイング）</h4>
<p>内側のスコープで同じ名前の変数を宣言すると、外側の変数が隠蔽されます。</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> x <span class="op">=</span> <span class="dv">100</span><span class="op">;</span>     <span class="co">/* グローバル変数 */</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;グローバルx = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> x<span class="op">);</span>    <span class="co">/* 100が出力 */</span></span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> x <span class="op">=</span> <span class="dv">200</span><span class="op">;</span> <span class="co">/* ローカル変数がグローバル変数を隠蔽 */</span></span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;ローカルx = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> x<span class="op">);</span>   <span class="co">/* 200が出力 */</span></span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span></span>
<span id="cb32-12"><a href="#cb32-12" aria-hidden="true" tabindex="-1"></a>            <span class="dt">int</span> x <span class="op">=</span> <span class="dv">300</span><span class="op">;</span> <span class="co">/* さらに内側で隠蔽 */</span></span>
<span id="cb32-13"><a href="#cb32-13" aria-hidden="true" tabindex="-1"></a>            printf<span class="op">(</span><span class="st">&quot;内側x = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> x<span class="op">);</span>   <span class="co">/* 300が出力 */</span></span>
<span id="cb32-14"><a href="#cb32-14" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb32-15"><a href="#cb32-15" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb32-16"><a href="#cb32-16" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;ローカルx = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> x<span class="op">);</span>   <span class="co">/* 200が出力（復活） */</span></span>
<span id="cb32-17"><a href="#cb32-17" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb32-18"><a href="#cb32-18" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb32-19"><a href="#cb32-19" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;グローバルx = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> x<span class="op">);</span>    <span class="co">/* 100が出力（復活） */</span></span>
<span id="cb32-20"><a href="#cb32-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb32-21"><a href="#cb32-21" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 id="変数の生存期間storage-duration">変数の生存期間（Storage
Duration）</h3>
<p>変数がメモリ上に存在する期間を生存期間といいます。</p>
<h4 id="自動変数automatic-variables">1. 自動変数（Automatic
Variables）</h4>
<p>関数やブロックに入るときに作成され、出るときに破棄される変数です。</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> demo_function<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> auto_var <span class="op">=</span> <span class="dv">5</span><span class="op">;</span>      <span class="co">/* 自動変数（autoは省略可能） */</span></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">auto</span> <span class="dt">int</span> explicit_auto <span class="op">=</span> <span class="dv">10</span><span class="op">;</span> <span class="co">/* 明示的にauto指定 */</span></span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;auto_var = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> auto_var<span class="op">);</span></span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 関数終了時にauto_varは破棄される */</span></span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb33-10"><a href="#cb33-10" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb33-11"><a href="#cb33-11" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb33-12"><a href="#cb33-12" aria-hidden="true" tabindex="-1"></a>    demo_function<span class="op">();</span></span>
<span id="cb33-13"><a href="#cb33-13" aria-hidden="true" tabindex="-1"></a>    demo_function<span class="op">();</span>    <span class="co">/* 毎回新しくauto_varが作成される */</span></span>
<span id="cb33-14"><a href="#cb33-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb33-15"><a href="#cb33-15" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h4 id="静的変数static-variables">2. 静的変数（Static Variables）</h4>
<p>プログラム開始時に作成され、プログラム終了まで存在し続ける変数です。</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> counter_function<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">static</span> <span class="dt">int</span> count <span class="op">=</span> <span class="dv">0</span><span class="op">;</span>   <span class="co">/* 静的ローカル変数、初期化は11回のみ */</span></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>    count<span class="op">++;</span></span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;関数呼出回数: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> count<span class="op">);</span></span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb34-10"><a href="#cb34-10" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb34-11"><a href="#cb34-11" aria-hidden="true" tabindex="-1"></a>    counter_function<span class="op">();</span>     <span class="co">/* 1が出力 */</span></span>
<span id="cb34-12"><a href="#cb34-12" aria-hidden="true" tabindex="-1"></a>    counter_function<span class="op">();</span>     <span class="co">/* 2が出力 */</span></span>
<span id="cb34-13"><a href="#cb34-13" aria-hidden="true" tabindex="-1"></a>    counter_function<span class="op">();</span>     <span class="co">/* 3が出力 */</span></span>
<span id="cb34-14"><a href="#cb34-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb34-15"><a href="#cb34-15" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h4 id="静的グローバル変数">3. 静的グローバル変数</h4>
<p>ファイル内でのみアクセス可能なグローバル変数です。</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="dt">static</span> <span class="dt">int</span> file_private <span class="op">=</span> <span class="dv">10</span><span class="op">;</span>  <span class="co">/* このファイル内でのみアクセス可能 */</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> file_public <span class="op">=</span> <span class="dv">20</span><span class="op">;</span>          <span class="co">/* 他のファイルからもアクセス可能 */</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a><span class="dt">static</span> <span class="dt">void</span> private_function<span class="op">(</span><span class="dt">void</span><span class="op">)</span>  <span class="co">/* このファイル内でのみ呼出可能 */</span></span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;file_private = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> file_private<span class="op">);</span></span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb35-10"><a href="#cb35-10" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb35-11"><a href="#cb35-11" aria-hidden="true" tabindex="-1"></a>    private_function<span class="op">();</span></span>
<span id="cb35-12"><a href="#cb35-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb35-13"><a href="#cb35-13" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h4 id="レジスタ変数register-variables">4. レジスタ変数（Register
Variables）</h4>
<p>可能であればレジスタに格納される変数です（C90では推奨のみ）。</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">register</span> <span class="dt">int</span> fast_var <span class="op">=</span> <span class="dv">100</span><span class="op">;</span> <span class="co">/* レジスタ格納を要求 */</span></span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* レジスタ変数のアドレスは取得できない */</span></span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* int *ptr = &amp;fast_var;  &lt;- エラー */</span></span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb36-9"><a href="#cb36-9" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 id="ストレージクラス指定子まとめ">ストレージクラス指定子まとめ</h3>
<table>
<thead>
<tr>
<th>指定子</th>
<th>スコープ</th>
<th>生存期間</th>
<th>初期化</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>auto</code></td>
<td>ブロック</td>
<td>自動</td>
<td>未定義値</td>
<td>デフォルト（省略可能）</td>
</tr>
<tr>
<td><code>static</code>（ローカル）</td>
<td>ブロック</td>
<td>静的</td>
<td>0</td>
<td>関数呼出間で値保持</td>
</tr>
<tr>
<td><code>static</code>（グローバル）</td>
<td>ファイル</td>
<td>静的</td>
<td>0</td>
<td>ファイル内限定</td>
</tr>
<tr>
<td><code>extern</code></td>
<td>グローバル</td>
<td>静的</td>
<td>他で定義</td>
<td>他ファイルの変数参照</td>
</tr>
<tr>
<td><code>register</code></td>
<td>ブロック</td>
<td>自動</td>
<td>未定義値</td>
<td>レジスタ格納要求</td>
</tr>
</tbody>
</table>
<h3 id="変数の初期化規則">変数の初期化規則</h3>
<h4 id="自動変数の初期化">自動変数の初期化</h4>
<div class="sourceCode" id="cb37"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> uninitialized<span class="op">;</span>          <span class="co">/* 未定義値（危険） */</span></span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> initialized <span class="op">=</span> <span class="dv">0</span><span class="op">;</span>       <span class="co">/* 明示的初期化（推奨） */</span></span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;uninitialized = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> uninitialized<span class="op">);</span> <span class="co">/* 予測不能 */</span></span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;initialized = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> initialized<span class="op">);</span>     <span class="co">/* 0 */</span></span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb37-10"><a href="#cb37-10" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h4 id="静的変数の初期化">静的変数の初期化</h4>
<div class="sourceCode" id="cb38"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> global_int<span class="op">;</span>          <span class="co">/* 自動的に0で初期化 */</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a><span class="dt">static</span> <span class="dt">int</span> static_int<span class="op">;</span>   <span class="co">/* 自動的に0で初期化 */</span></span>
<span id="cb38-3"><a href="#cb38-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb38-4"><a href="#cb38-4" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb38-5"><a href="#cb38-5" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb38-6"><a href="#cb38-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">static</span> <span class="dt">int</span> local_static<span class="op">;</span>    <span class="co">/* 自動的に0で初期化 */</span></span>
<span id="cb38-7"><a href="#cb38-7" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb38-8"><a href="#cb38-8" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;global_int = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> global_int<span class="op">);</span>       <span class="co">/* 0 */</span></span>
<span id="cb38-9"><a href="#cb38-9" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;static_int = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> static_int<span class="op">);</span>       <span class="co">/* 0 */</span></span>
<span id="cb38-10"><a href="#cb38-10" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;local_static = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> local_static<span class="op">);</span>   <span class="co">/* 0 */</span></span>
<span id="cb38-11"><a href="#cb38-11" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb38-12"><a href="#cb38-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb38-13"><a href="#cb38-13" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 id="実践的なスコープ活用例">実践的なスコープ活用例</h3>
<h4 id="カウンター関数の実装">カウンター関数の実装</h4>
<div class="sourceCode" id="cb39"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> get_next_id<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb39-3"><a href="#cb39-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">static</span> <span class="dt">int</span> id_counter <span class="op">=</span> <span class="dv">1000</span><span class="op">;</span>   <span class="co">/* 初期値 */</span></span>
<span id="cb39-4"><a href="#cb39-4" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb39-5"><a href="#cb39-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> id_counter<span class="op">++;</span>    <span class="co">/* 現在値を返してからインクリメント */</span></span>
<span id="cb39-6"><a href="#cb39-6" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb39-7"><a href="#cb39-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb39-8"><a href="#cb39-8" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb39-9"><a href="#cb39-9" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb39-10"><a href="#cb39-10" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ID: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> get_next_id<span class="op">());</span>    <span class="co">/* 1000 */</span></span>
<span id="cb39-11"><a href="#cb39-11" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ID: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> get_next_id<span class="op">());</span>    <span class="co">/* 1001 */</span></span>
<span id="cb39-12"><a href="#cb39-12" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ID: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> get_next_id<span class="op">());</span>    <span class="co">/* 1002 */</span></span>
<span id="cb39-13"><a href="#cb39-13" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb39-14"><a href="#cb39-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb39-15"><a href="#cb39-15" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h4 id="モジュール内状態管理">モジュール内状態管理</h4>
<div class="sourceCode" id="cb40"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* 設定管理モジュールの例 */</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a><span class="dt">static</span> <span class="dt">int</span> debug_mode <span class="op">=</span> <span class="dv">0</span><span class="op">;</span>      <span class="co">/* モジュール内部状態 */</span></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a><span class="dt">static</span> <span class="dt">int</span> max_connections <span class="op">=</span> <span class="dv">10</span><span class="op">;</span></span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> set_debug_mode<span class="op">(</span><span class="dt">int</span> mode<span class="op">)</span></span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a>    debug_mode <span class="op">=</span> mode<span class="op">;</span></span>
<span id="cb40-8"><a href="#cb40-8" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb40-9"><a href="#cb40-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-10"><a href="#cb40-10" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> is_debug_enabled<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb40-11"><a href="#cb40-11" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb40-12"><a href="#cb40-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> debug_mode<span class="op">;</span></span>
<span id="cb40-13"><a href="#cb40-13" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb40-14"><a href="#cb40-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-15"><a href="#cb40-15" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> set_max_connections<span class="op">(</span><span class="dt">int</span> max<span class="op">)</span></span>
<span id="cb40-16"><a href="#cb40-16" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb40-17"><a href="#cb40-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>max <span class="op">&gt;</span> <span class="dv">0</span> <span class="op">&amp;&amp;</span> max <span class="op">&lt;=</span> <span class="dv">100</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb40-18"><a href="#cb40-18" aria-hidden="true" tabindex="-1"></a>        max_connections <span class="op">=</span> max<span class="op">;</span></span>
<span id="cb40-19"><a href="#cb40-19" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb40-20"><a href="#cb40-20" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb40-21"><a href="#cb40-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-22"><a href="#cb40-22" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> get_max_connections<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb40-23"><a href="#cb40-23" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb40-24"><a href="#cb40-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> max_connections<span class="op">;</span></span>
<span id="cb40-25"><a href="#cb40-25" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 id="定数の定義">定数の定義</h3>
<h4 id="constキーワード"><code>const</code>キーワード</h4>
<div class="sourceCode" id="cb41"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="dt">const</span> <span class="dt">int</span> MAX_SIZE <span class="op">=</span> <span class="dv">100</span><span class="op">;</span>       <span class="co">/* 定数の定義 */</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a><span class="dt">const</span> <span class="dt">double</span> PI <span class="op">=</span> <span class="fl">3.14159</span><span class="op">;</span>      <span class="co">/* 浮動小数点定数 */</span></span></code></pre></div>
<h4 id="defineプリプロセッサ"><code>#define</code>プリプロセッサ</h4>
<div class="sourceCode" id="cb42"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#define MAX_STUDENTS </span><span class="dv">50</span><span class="pp">          </span><span class="co">/* マクロ定数 */</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#define TITLE </span><span class="st">&quot;C Language Tutorial&quot;</span></span></code></pre></div>
<h3 id="データ型のサイズ確認">データ型のサイズ確認</h3>
<p><code>sizeof</code>演算子を使ってデータ型のサイズを確認できます：</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb43-4"><a href="#cb43-4" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb43-5"><a href="#cb43-5" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;char: </span><span class="sc">%lu</span><span class="st"> バイト</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="kw">sizeof</span><span class="op">(</span><span class="dt">char</span><span class="op">));</span></span>
<span id="cb43-6"><a href="#cb43-6" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;int: </span><span class="sc">%lu</span><span class="st"> バイト</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="kw">sizeof</span><span class="op">(</span><span class="dt">int</span><span class="op">));</span></span>
<span id="cb43-7"><a href="#cb43-7" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;double: </span><span class="sc">%lu</span><span class="st"> バイト</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="kw">sizeof</span><span class="op">(</span><span class="dt">double</span><span class="op">));</span></span>
<span id="cb43-8"><a href="#cb43-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span></code></pre></div>
<h2 id="サンプルコード-4">サンプルコード</h2>
<h3 id="基本データ型の使用例">基本データ型の使用例</h3>
<p><strong>プログラムファイル:</strong> <a
href="examples/data_types_demo.c"><code>examples/data_types_demo.c</code></a>
| <a href="examples/data_types_demo_c99.c">C99版</a></p>
<p>各データ型の宣言、初期化、出力を学習します。</p>
<div class="sourceCode" id="cb44"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="co">/*</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a><span class="co"> * ファイル名: data_types_demo.c</span></span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a><span class="co"> * 説明: C言語の基本データ型の使用例</span></span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a><span class="co"> * 規格: C90準拠</span></span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a><span class="co"> */</span></span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb44-8"><a href="#cb44-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-9"><a href="#cb44-9" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb44-10"><a href="#cb44-10" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb44-11"><a href="#cb44-11" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 整数型の変数宣言と初期化 */</span></span>
<span id="cb44-12"><a href="#cb44-12" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> letter <span class="op">=</span> <span class="ch">&#39;A&#39;</span><span class="op">;</span></span>
<span id="cb44-13"><a href="#cb44-13" aria-hidden="true" tabindex="-1"></a>    <span class="dt">short</span> small_num <span class="op">=</span> <span class="dv">1000</span><span class="op">;</span></span>
<span id="cb44-14"><a href="#cb44-14" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> age <span class="op">=</span> <span class="dv">25</span><span class="op">;</span></span>
<span id="cb44-15"><a href="#cb44-15" aria-hidden="true" tabindex="-1"></a>    <span class="dt">long</span> big_num <span class="op">=</span> <span class="dv">1234567</span><span class="bu">L</span><span class="op">;</span></span>
<span id="cb44-16"><a href="#cb44-16" aria-hidden="true" tabindex="-1"></a>    <span class="dt">unsigned</span> <span class="dt">int</span> positive <span class="op">=</span> <span class="dv">100</span><span class="bu">U</span><span class="op">;</span></span>
<span id="cb44-17"><a href="#cb44-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-18"><a href="#cb44-18" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 浮動小数点型の変数宣言と初期化 */</span></span>
<span id="cb44-19"><a href="#cb44-19" aria-hidden="true" tabindex="-1"></a>    <span class="dt">float</span> pi_f <span class="op">=</span> <span class="fl">3.14</span><span class="bu">f</span><span class="op">;</span></span>
<span id="cb44-20"><a href="#cb44-20" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span> pi_d <span class="op">=</span> <span class="fl">3.141592653589793</span><span class="op">;</span></span>
<span id="cb44-21"><a href="#cb44-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-22"><a href="#cb44-22" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== データ型のサイズと値 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb44-23"><a href="#cb44-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-24"><a href="#cb44-24" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 各データ型のサイズを表示 */</span></span>
<span id="cb44-25"><a href="#cb44-25" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;char     : </span><span class="sc">%lu</span><span class="st"> バイト, 値: </span><span class="sc">%c</span><span class="st"> (</span><span class="sc">%d</span><span class="st">)</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span></span>
<span id="cb44-26"><a href="#cb44-26" aria-hidden="true" tabindex="-1"></a>           <span class="kw">sizeof</span><span class="op">(</span><span class="dt">char</span><span class="op">),</span> letter<span class="op">,</span> letter<span class="op">);</span></span>
<span id="cb44-27"><a href="#cb44-27" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;short    : </span><span class="sc">%lu</span><span class="st"> バイト, 値: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span></span>
<span id="cb44-28"><a href="#cb44-28" aria-hidden="true" tabindex="-1"></a>           <span class="kw">sizeof</span><span class="op">(</span><span class="dt">short</span><span class="op">),</span> small_num<span class="op">);</span></span>
<span id="cb44-29"><a href="#cb44-29" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;int      : </span><span class="sc">%lu</span><span class="st"> バイト, 値: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span></span>
<span id="cb44-30"><a href="#cb44-30" aria-hidden="true" tabindex="-1"></a>           <span class="kw">sizeof</span><span class="op">(</span><span class="dt">int</span><span class="op">),</span> age<span class="op">);</span></span>
<span id="cb44-31"><a href="#cb44-31" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;long     : </span><span class="sc">%lu</span><span class="st"> バイト, 値: </span><span class="sc">%ld\n</span><span class="st">&quot;</span><span class="op">,</span></span>
<span id="cb44-32"><a href="#cb44-32" aria-hidden="true" tabindex="-1"></a>           <span class="kw">sizeof</span><span class="op">(</span><span class="dt">long</span><span class="op">),</span> big_num<span class="op">);</span></span>
<span id="cb44-33"><a href="#cb44-33" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;unsigned : </span><span class="sc">%lu</span><span class="st"> バイト, 値: </span><span class="sc">%u\n</span><span class="st">&quot;</span><span class="op">,</span></span>
<span id="cb44-34"><a href="#cb44-34" aria-hidden="true" tabindex="-1"></a>           <span class="kw">sizeof</span><span class="op">(</span><span class="dt">unsigned</span> <span class="dt">int</span><span class="op">),</span> positive<span class="op">);</span></span>
<span id="cb44-35"><a href="#cb44-35" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;float    : </span><span class="sc">%lu</span><span class="st"> バイト, 値: </span><span class="sc">%.6f\n</span><span class="st">&quot;</span><span class="op">,</span></span>
<span id="cb44-36"><a href="#cb44-36" aria-hidden="true" tabindex="-1"></a>           <span class="kw">sizeof</span><span class="op">(</span><span class="dt">float</span><span class="op">),</span> pi_f<span class="op">);</span></span>
<span id="cb44-37"><a href="#cb44-37" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;double   : </span><span class="sc">%lu</span><span class="st"> バイト, 値: </span><span class="sc">%.15f\n</span><span class="st">&quot;</span><span class="op">,</span></span>
<span id="cb44-38"><a href="#cb44-38" aria-hidden="true" tabindex="-1"></a>           <span class="kw">sizeof</span><span class="op">(</span><span class="dt">double</span><span class="op">),</span> pi_d<span class="op">);</span></span>
<span id="cb44-39"><a href="#cb44-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-40"><a href="#cb44-40" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 演算の例 */</span></span>
<span id="cb44-41"><a href="#cb44-41" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">=== 基本演算 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb44-42"><a href="#cb44-42" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;10 + 3 = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="dv">10</span> <span class="op">+</span> <span class="dv">3</span><span class="op">);</span></span>
<span id="cb44-43"><a href="#cb44-43" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;10 - 3 = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="dv">10</span> <span class="op">-</span> <span class="dv">3</span><span class="op">);</span></span>
<span id="cb44-44"><a href="#cb44-44" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;10 * 3 = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="dv">10</span> <span class="op">*</span> <span class="dv">3</span><span class="op">);</span></span>
<span id="cb44-45"><a href="#cb44-45" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;10 / 3 = </span><span class="sc">%d</span><span class="st"> (整数除算)</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="dv">10</span> <span class="op">/</span> <span class="dv">3</span><span class="op">);</span></span>
<span id="cb44-46"><a href="#cb44-46" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;10 </span><span class="sc">%%</span><span class="st"> 3 = </span><span class="sc">%d</span><span class="st"> (剰余)</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="dv">10</span> <span class="op">%</span> <span class="dv">3</span><span class="op">);</span></span>
<span id="cb44-47"><a href="#cb44-47" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;10.0 / 3.0 = </span><span class="sc">%.2f</span><span class="st"> (実数除算)</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="fl">10.0</span> <span class="op">/</span> <span class="fl">3.0</span><span class="op">);</span></span>
<span id="cb44-48"><a href="#cb44-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-49"><a href="#cb44-49" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb44-50"><a href="#cb44-50" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 id="数値計算の応用例">数値計算の応用例</h3>
<p><strong>プログラムファイル:</strong> <a
href="solutions/numerical_calc.c"><code>solutions/numerical_calc.c</code></a>
| <a href="solutions/numerical_calc_c99.c">C99版</a></p>
<p>math.hライブラリを使用した高度な数値計算を学習します。</p>
<h3 id="コンパイルと実行-2">コンパイルと実行</h3>
<div class="sourceCode" id="cb45"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="co"># examples ディレクトリに移動</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> examples</span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a><span class="co"># C90準拠でコンパイル</span></span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a><span class="fu">gcc</span> <span class="at">-std</span><span class="op">=</span>c90 <span class="at">-Wall</span> <span class="at">-Wextra</span> <span class="at">-pedantic</span> data_types_demo.c <span class="at">-o</span> data_types_demo</span>
<span id="cb45-6"><a href="#cb45-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-7"><a href="#cb45-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 実行</span></span>
<span id="cb45-8"><a href="#cb45-8" aria-hidden="true" tabindex="-1"></a><span class="ex">./data_types_demo</span></span></code></pre></div>
<h2 id="演習課題-2">演習課題</h2>
<h3 id="基礎問題-2">基礎問題</h3>
<ol type="1">
<li><strong>変数宣言と初期化</strong>
<ul>
<li>さまざまなデータ型の変数を宣言し、初期化してください</li>
<li>各変数の値をprintf関数で出力してください</li>
</ul></li>
<li><strong>四則演算計算機</strong>
<ul>
<li>2つの数値を変数に格納し、四則演算の結果を表示するプログラムを作成してください</li>
</ul></li>
<li><strong>データ型サイズの確認</strong>
<ul>
<li>sizeof演算子を使って、各データ型のサイズを表示するプログラムを作成してください</li>
</ul></li>
</ol>
<h3 id="応用問題-2">応用問題</h3>
<ol type="1">
<li><strong>型変換の理解</strong>
<ul>
<li>整数除算と実数除算の違いを確認するプログラムを作成してください</li>
</ul></li>
<li><strong>スコープの実験</strong>
<ul>
<li>グローバル変数とローカル変数を使い分けるプログラムを作成してください</li>
</ul></li>
<li><strong>定数の活用</strong>
<ul>
<li>constと#defineを使って定数を定義し、計算に使用してください</li>
</ul></li>
</ol>
<h2 id="コンパイル方法-2">コンパイル方法</h2>
<p>この章では以下のMakefileを使用してコンパイルができます：</p>
<div class="sourceCode" id="cb46"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 全ての例題をコンパイル</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> all</span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 特定のプログラムをコンパイル</span></span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> data_types_demo</span>
<span id="cb46-6"><a href="#cb46-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-7"><a href="#cb46-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 実行</span></span>
<span id="cb46-8"><a href="#cb46-8" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> run</span>
<span id="cb46-9"><a href="#cb46-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-10"><a href="#cb46-10" aria-hidden="true" tabindex="-1"></a><span class="co"># クリーンアップ</span></span>
<span id="cb46-11"><a href="#cb46-11" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> clean</span></code></pre></div>
<h2 id="規格による違い-2">規格による違い</h2>
<h3 id="c90での制限事項-1">C90での制限事項</h3>
<ul>
<li>変数宣言は関数やブロックの先頭で行う必要がある</li>
<li><code>long long</code>型は使用できない</li>
<li><code>_Bool</code>型は使用できない</li>
</ul>
<h3 id="c99以降の拡張-1">C99以降の拡張</h3>
<ul>
<li><code>long long</code>型の追加（64ビット整数）</li>
<li><code>_Bool</code>型の追加（論理型）</li>
<li>複素数型（<code>_Complex</code>）の追加</li>
<li>変数宣言位置の制限緩和</li>
</ul>
<h3 id="型サイズの注意点">型サイズの注意点</h3>
<p>データ型のサイズはシステムに依存するため、portable（移植可能）なプログラムを書く際は注意が必要です：</p>
<div class="sourceCode" id="cb47"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* 推奨: 具体的なサイズが必要な場合 */</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdint.h&gt;</span></span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int32_t</span> exact_32bit<span class="op">;</span>    <span class="co">/* C99以降 */</span></span></code></pre></div>
<h2 id="よくある間違い">よくある間違い</h2>
<h3 id="初期化忘れ">1. 初期化忘れ</h3>
<div class="sourceCode" id="cb48"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* NG: 初期化せずに使用 */</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> count<span class="op">;</span></span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> count<span class="op">);</span>  <span class="co">/* 未定義値が出力される */</span></span>
<span id="cb48-4"><a href="#cb48-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb48-5"><a href="#cb48-5" aria-hidden="true" tabindex="-1"></a><span class="co">/* OK: 初期化してから使用 */</span></span>
<span id="cb48-6"><a href="#cb48-6" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> count <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb48-7"><a href="#cb48-7" aria-hidden="true" tabindex="-1"></a>printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> count<span class="op">);</span></span></code></pre></div>
<h3 id="整数除算の結果">2. 整数除算の結果</h3>
<div class="sourceCode" id="cb49"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* NG: 期待した結果にならない */</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> result <span class="op">=</span> <span class="dv">5</span> <span class="op">/</span> <span class="dv">2</span><span class="op">;</span>     <span class="co">/* 結果: 2 */</span></span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a><span class="co">/* OK: 実数除算を使用 */</span></span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a><span class="dt">double</span> result <span class="op">=</span> <span class="fl">5.0</span> <span class="op">/</span> <span class="fl">2.0</span><span class="op">;</span>  <span class="co">/* 結果: 2.5 */</span></span></code></pre></div>
<h3 id="型の範囲超過">3. 型の範囲超過</h3>
<div class="sourceCode" id="cb50"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* NG: charの範囲を超える */</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a><span class="dt">char</span> big_num <span class="op">=</span> <span class="dv">300</span><span class="op">;</span>     <span class="co">/* オーバーフロー */</span></span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a><span class="co">/* OK: 適切な型を使用 */</span></span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> big_num <span class="op">=</span> <span class="dv">300</span><span class="op">;</span></span></code></pre></div>
<h2 id="次の章へ-2">次の章へ</h2>
<p>データ型と変数を理解したら、<a
href="../operators/README.md">演算子と式</a> に進んでください。</p>
<h2 id="参考資料-2">参考資料</h2>
<ul>
<li><a
href="https://ja.cppreference.com/w/c/language/type">C言語データ型リファレンス</a></li>
<li><a
href="https://ja.cppreference.com/w/c/language/sizeof">sizeof演算子</a></li>
<li><a
href="https://ja.cppreference.com/w/c/language/conversion">型変換</a></li>
</ul>
<h2 id="サンプルコード-5">サンプルコード</h2>
<h3 id="data_types_demo.c">data_types_demo.c</h3>
<div class="sourceCode" id="cb51"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="co">/*</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a><span class="co"> * ファイル名: data_types_demo.c</span></span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a><span class="co"> * 説明: C言語の基本データ型の使用例</span></span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a><span class="co"> * 規格: C90準拠</span></span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a><span class="co"> */</span></span>
<span id="cb51-6"><a href="#cb51-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-7"><a href="#cb51-7" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb51-8"><a href="#cb51-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-9"><a href="#cb51-9" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb51-10"><a href="#cb51-10" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb51-11"><a href="#cb51-11" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 整数型の変数宣言と初期化 */</span></span>
<span id="cb51-12"><a href="#cb51-12" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> letter <span class="op">=</span> <span class="ch">&#39;A&#39;</span><span class="op">;</span></span>
<span id="cb51-13"><a href="#cb51-13" aria-hidden="true" tabindex="-1"></a>    <span class="dt">short</span> small_num <span class="op">=</span> <span class="dv">1000</span><span class="op">;</span></span>
<span id="cb51-14"><a href="#cb51-14" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> age <span class="op">=</span> <span class="dv">25</span><span class="op">;</span></span>
<span id="cb51-15"><a href="#cb51-15" aria-hidden="true" tabindex="-1"></a>    <span class="dt">long</span> big_num <span class="op">=</span> <span class="dv">1234567</span><span class="bu">L</span><span class="op">;</span></span>
<span id="cb51-16"><a href="#cb51-16" aria-hidden="true" tabindex="-1"></a>    <span class="dt">unsigned</span> <span class="dt">int</span> positive <span class="op">=</span> <span class="dv">100</span><span class="bu">U</span><span class="op">;</span></span>
<span id="cb51-17"><a href="#cb51-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-18"><a href="#cb51-18" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 浮動小数点型の変数宣言と初期化 */</span></span>
<span id="cb51-19"><a href="#cb51-19" aria-hidden="true" tabindex="-1"></a>    <span class="dt">float</span> pi_f <span class="op">=</span> <span class="fl">3.14</span><span class="bu">f</span><span class="op">;</span></span>
<span id="cb51-20"><a href="#cb51-20" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span> pi_d <span class="op">=</span> <span class="fl">3.141592653589793</span><span class="op">;</span></span>
<span id="cb51-21"><a href="#cb51-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-22"><a href="#cb51-22" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== データ型のサイズと値 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb51-23"><a href="#cb51-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-24"><a href="#cb51-24" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 各データ型のサイズを表示 */</span></span>
<span id="cb51-25"><a href="#cb51-25" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;char     : </span><span class="sc">%lu</span><span class="st"> バイト, 値: </span><span class="sc">%c</span><span class="st"> (</span><span class="sc">%d</span><span class="st">)</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span></span>
<span id="cb51-26"><a href="#cb51-26" aria-hidden="true" tabindex="-1"></a>           <span class="kw">sizeof</span><span class="op">(</span><span class="dt">char</span><span class="op">),</span> letter<span class="op">,</span> letter<span class="op">);</span></span>
<span id="cb51-27"><a href="#cb51-27" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;short    : </span><span class="sc">%lu</span><span class="st"> バイト, 値: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span></span>
<span id="cb51-28"><a href="#cb51-28" aria-hidden="true" tabindex="-1"></a>           <span class="kw">sizeof</span><span class="op">(</span><span class="dt">short</span><span class="op">),</span> small_num<span class="op">);</span></span>
<span id="cb51-29"><a href="#cb51-29" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;int      : </span><span class="sc">%lu</span><span class="st"> バイト, 値: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span></span>
<span id="cb51-30"><a href="#cb51-30" aria-hidden="true" tabindex="-1"></a>           <span class="kw">sizeof</span><span class="op">(</span><span class="dt">int</span><span class="op">),</span> age<span class="op">);</span></span>
<span id="cb51-31"><a href="#cb51-31" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;long     : </span><span class="sc">%lu</span><span class="st"> バイト, 値: </span><span class="sc">%ld\n</span><span class="st">&quot;</span><span class="op">,</span></span>
<span id="cb51-32"><a href="#cb51-32" aria-hidden="true" tabindex="-1"></a>           <span class="kw">sizeof</span><span class="op">(</span><span class="dt">long</span><span class="op">),</span> big_num<span class="op">);</span></span>
<span id="cb51-33"><a href="#cb51-33" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;unsigned : </span><span class="sc">%lu</span><span class="st"> バイト, 値: </span><span class="sc">%u\n</span><span class="st">&quot;</span><span class="op">,</span></span>
<span id="cb51-34"><a href="#cb51-34" aria-hidden="true" tabindex="-1"></a>           <span class="kw">sizeof</span><span class="op">(</span><span class="dt">unsigned</span> <span class="dt">int</span><span class="op">),</span> positive<span class="op">);</span></span>
<span id="cb51-35"><a href="#cb51-35" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;float    : </span><span class="sc">%lu</span><span class="st"> バイト, 値: </span><span class="sc">%.6f\n</span><span class="st">&quot;</span><span class="op">,</span></span>
<span id="cb51-36"><a href="#cb51-36" aria-hidden="true" tabindex="-1"></a>           <span class="kw">sizeof</span><span class="op">(</span><span class="dt">float</span><span class="op">),</span> pi_f<span class="op">);</span></span>
<span id="cb51-37"><a href="#cb51-37" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;double   : </span><span class="sc">%lu</span><span class="st"> バイト, 値: </span><span class="sc">%.15f\n</span><span class="st">&quot;</span><span class="op">,</span></span>
<span id="cb51-38"><a href="#cb51-38" aria-hidden="true" tabindex="-1"></a>           <span class="kw">sizeof</span><span class="op">(</span><span class="dt">double</span><span class="op">),</span> pi_d<span class="op">);</span></span>
<span id="cb51-39"><a href="#cb51-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-40"><a href="#cb51-40" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 演算の例 */</span></span>
<span id="cb51-41"><a href="#cb51-41" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">=== 基本演算 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb51-42"><a href="#cb51-42" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;10 + 3 = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="dv">10</span> <span class="op">+</span> <span class="dv">3</span><span class="op">);</span></span>
<span id="cb51-43"><a href="#cb51-43" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;10 - 3 = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="dv">10</span> <span class="op">-</span> <span class="dv">3</span><span class="op">);</span></span>
<span id="cb51-44"><a href="#cb51-44" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;10 * 3 = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="dv">10</span> <span class="op">*</span> <span class="dv">3</span><span class="op">);</span></span>
<span id="cb51-45"><a href="#cb51-45" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;10 / 3 = </span><span class="sc">%d</span><span class="st"> (整数除算)</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="dv">10</span> <span class="op">/</span> <span class="dv">3</span><span class="op">);</span></span>
<span id="cb51-46"><a href="#cb51-46" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;10 </span><span class="sc">%%</span><span class="st"> 3 = </span><span class="sc">%d</span><span class="st"> (剰余)</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="dv">10</span> <span class="op">%</span> <span class="dv">3</span><span class="op">);</span></span>
<span id="cb51-47"><a href="#cb51-47" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;10.0 / 3.0 = </span><span class="sc">%.2f</span><span class="st"> (実数除算)</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="fl">10.0</span> <span class="op">/</span> <span class="fl">3.0</span><span class="op">);</span></span>
<span id="cb51-48"><a href="#cb51-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-49"><a href="#cb51-49" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb51-50"><a href="#cb51-50" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<blockquote>
<p>C99版は<a
href="data_types_demo_c99.c">こちら</a>を参照してください。</p>
</blockquote>
<hr />
<h1 id="第4章-演算子">第4章: 演算子</h1>
<h2 id="対応c規格-3">対応C規格</h2>
<ul>
<li><strong>主要対象:</strong> C90</li>
<li><strong>学習内容:</strong>
算術演算子、関係演算子、論理演算子、ビット演算子、演算子の優先順位</li>
</ul>
<h2 id="学習目標-3">学習目標</h2>
<p>この章を完了すると、以下のことができるようになります：</p>
<ul>
<li>さまざまな演算子の種類と使い方を理解する</li>
<li>演算子の優先順位と結合規則を把握する</li>
<li>複雑な式を正しく記述できる</li>
<li>インクリメント・デクリメント演算子を適切に使える</li>
<li>ビット演算の基本を理解する</li>
</ul>
<h2 id="理論解説-3">理論解説</h2>
<h3 id="算術演算子">算術演算子</h3>
<p>基本的な数値計算を実行する演算子です。</p>
<table>
<thead>
<tr>
<th>演算子</th>
<th>意味</th>
<th>例</th>
<th>結果</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>+</code></td>
<td>加算</td>
<td><code>5 + 3</code></td>
<td><code>8</code></td>
</tr>
<tr>
<td><code>-</code></td>
<td>減算</td>
<td><code>5 - 3</code></td>
<td><code>2</code></td>
</tr>
<tr>
<td><code>*</code></td>
<td>乗算</td>
<td><code>5 * 3</code></td>
<td><code>15</code></td>
</tr>
<tr>
<td><code>/</code></td>
<td>除算</td>
<td><code>7 / 3</code></td>
<td><code>2</code> (整数除算)</td>
</tr>
<tr>
<td><code>%</code></td>
<td>剰余</td>
<td><code>7 % 3</code></td>
<td><code>1</code></td>
</tr>
</tbody>
</table>
<h4 id="除算の注意点">除算の注意点</h4>
<div class="sourceCode" id="cb52"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> a <span class="op">=</span> <span class="dv">7</span><span class="op">,</span> b <span class="op">=</span> <span class="dv">3</span><span class="op">;</span></span>
<span id="cb52-2"><a href="#cb52-2" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> result <span class="op">=</span> a <span class="op">/</span> b<span class="op">;</span>        <span class="co">/* 結果: 2 (整数除算) */</span></span>
<span id="cb52-3"><a href="#cb52-3" aria-hidden="true" tabindex="-1"></a><span class="dt">double</span> result <span class="op">=</span> a <span class="op">/</span> b<span class="op">;</span>     <span class="co">/* 結果: 2.0 (整数除算後に型変換) */</span></span>
<span id="cb52-4"><a href="#cb52-4" aria-hidden="true" tabindex="-1"></a><span class="dt">double</span> result <span class="op">=</span> <span class="op">(</span><span class="dt">double</span><span class="op">)</span>a <span class="op">/</span> b<span class="op">;</span> <span class="co">/* 結果: 2.333... (実数除算) */</span></span></code></pre></div>
<h3 id="代入演算子-1">代入演算子</h3>
<p>値を変数に代入する演算子です。</p>
<table>
<thead>
<tr>
<th>演算子</th>
<th>意味</th>
<th>例</th>
<th>等価な記述</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>=</code></td>
<td>代入</td>
<td><code>a = 5</code></td>
<td>-</td>
</tr>
<tr>
<td><code>+=</code></td>
<td>加算代入</td>
<td><code>a += 3</code></td>
<td><code>a = a + 3</code></td>
</tr>
<tr>
<td><code>-=</code></td>
<td>減算代入</td>
<td><code>a -= 2</code></td>
<td><code>a = a - 2</code></td>
</tr>
<tr>
<td><code>*=</code></td>
<td>乗算代入</td>
<td><code>a *= 2</code></td>
<td><code>a = a * 2</code></td>
</tr>
<tr>
<td><code>/=</code></td>
<td>除算代入</td>
<td><code>a /= 3</code></td>
<td><code>a = a / 3</code></td>
</tr>
<tr>
<td><code>%=</code></td>
<td>剰余代入</td>
<td><code>a %= 4</code></td>
<td><code>a = a % 4</code></td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb53"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> count <span class="op">=</span> <span class="dv">10</span><span class="op">;</span></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a>count <span class="op">+=</span> <span class="dv">5</span><span class="op">;</span>     <span class="co">/* count は 15 になる */</span></span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a>count <span class="op">*=</span> <span class="dv">2</span><span class="op">;</span>     <span class="co">/* count は 30 になる */</span></span></code></pre></div>
<h3
id="インクリメントデクリメント演算子">インクリメント・デクリメント演算子</h3>
<p>変数の値を増減させる演算子です。</p>
<table>
<thead>
<tr>
<th>演算子</th>
<th>意味</th>
<th>前置</th>
<th>後置</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>++</code></td>
<td>インクリメント</td>
<td><code>++a</code></td>
<td><code>a++</code></td>
</tr>
<tr>
<td><code>--</code></td>
<td>デクリメント</td>
<td><code>--a</code></td>
<td><code>a--</code></td>
</tr>
</tbody>
</table>
<h4 id="前置と後置の違い">前置と後置の違い</h4>
<div class="sourceCode" id="cb54"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> a <span class="op">=</span> <span class="dv">5</span><span class="op">,</span> b <span class="op">=</span> <span class="dv">5</span><span class="op">;</span></span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> x<span class="op">,</span> y<span class="op">;</span></span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> <span class="op">++</span>a<span class="op">;</span>    <span class="co">/* a を先にインクリメント, x = 6, a = 6 */</span></span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> b<span class="op">++;</span>    <span class="co">/* b の値を先に使用, y = 5, b = 6 */</span></span></code></pre></div>
<p><strong>C99版での詳細:</strong> <a
href="solutions/increment_decrement_c99.c">increment_decrement_c99.c</a></p>
<h3 id="関係演算子">関係演算子</h3>
<p>2つの値を比較する演算子です。結果は真（非0）または偽（0）になります。</p>
<table>
<thead>
<tr>
<th>演算子</th>
<th>意味</th>
<th>例</th>
<th>結果</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>==</code></td>
<td>等しい</td>
<td><code>5 == 3</code></td>
<td><code>0</code> (偽)</td>
</tr>
<tr>
<td><code>!=</code></td>
<td>等しくない</td>
<td><code>5 != 3</code></td>
<td><code>1</code> (真)</td>
</tr>
<tr>
<td><code>&lt;</code></td>
<td>より小さい</td>
<td><code>5 &lt; 3</code></td>
<td><code>0</code> (偽)</td>
</tr>
<tr>
<td><code>&lt;=</code></td>
<td>以下</td>
<td><code>5 &lt;= 3</code></td>
<td><code>0</code> (偽)</td>
</tr>
<tr>
<td><code>&gt;</code></td>
<td>より大きい</td>
<td><code>5 &gt; 3</code></td>
<td><code>1</code> (真)</td>
</tr>
<tr>
<td><code>&gt;=</code></td>
<td>以上</td>
<td><code>5 &gt;= 3</code></td>
<td><code>1</code> (真)</td>
</tr>
</tbody>
</table>
<h3 id="論理演算子">論理演算子</h3>
<p>論理値（真偽）を操作する演算子です。</p>
<table>
<thead>
<tr>
<th>演算子</th>
<th>意味</th>
<th>例</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>&amp;&amp;</code></td>
<td>論理積（AND）</td>
<td><code>a &amp;&amp; b</code></td>
<td>a も b も真の場合のみ真</td>
</tr>
<tr>
<td><code>||</code></td>
<td>論理和（OR）</td>
<td><code>a || b</code></td>
<td>a または b が真なら真</td>
</tr>
<tr>
<td><code>!</code></td>
<td>論理否定（NOT）</td>
<td><code>!a</code></td>
<td>a が偽なら真、真なら偽</td>
</tr>
</tbody>
</table>
<h4 id="短絡評価">短絡評価</h4>
<div class="sourceCode" id="cb55"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> a <span class="op">=</span> <span class="dv">0</span><span class="op">,</span> b <span class="op">=</span> <span class="dv">10</span><span class="op">;</span></span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb55-3"><a href="#cb55-3" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="op">(</span>a <span class="op">!=</span> <span class="dv">0</span> <span class="op">&amp;&amp;</span> b <span class="op">/</span> a <span class="op">&gt;</span> <span class="dv">5</span><span class="op">)</span>   <span class="co">/* a が 0 なので、b / a は評価されない */</span></span>
<span id="cb55-4"><a href="#cb55-4" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 実行されない */</span></span></code></pre></div>
<h3 id="ビット演算子">ビット演算子</h3>
<p>ビットレベルで値を操作する演算子です。</p>
<table>
<thead>
<tr>
<th>演算子</th>
<th>意味</th>
<th>例</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>&amp;</code></td>
<td>ビットAND</td>
<td><code>a &amp; b</code></td>
<td>対応するビットが両方1の場合1</td>
</tr>
<tr>
<td><code>|</code></td>
<td>ビットOR</td>
<td><code>a | b</code></td>
<td>対応するビットのいずれかが1の場合1</td>
</tr>
<tr>
<td><code>^</code></td>
<td>ビットXOR</td>
<td><code>a ^ b</code></td>
<td>対応するビットが異なる場合1</td>
</tr>
<tr>
<td><code>~</code></td>
<td>ビット反転</td>
<td><code>~a</code></td>
<td>各ビットを反転</td>
</tr>
<tr>
<td><code>&lt;&lt;</code></td>
<td>左シフト</td>
<td><code>a &lt;&lt; 2</code></td>
<td>ビットを左に2つシフト</td>
</tr>
<tr>
<td><code>&gt;&gt;</code></td>
<td>右シフト</td>
<td><code>a &gt;&gt; 1</code></td>
<td>ビットを右に1つシフト</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb56"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="dt">unsigned</span> <span class="dt">char</span> a <span class="op">=</span> <span class="dv">5</span><span class="op">;</span>    <span class="co">/* 00000101 */</span></span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a><span class="dt">unsigned</span> <span class="dt">char</span> b <span class="op">=</span> <span class="dv">3</span><span class="op">;</span>    <span class="co">/* 00000011 */</span></span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a>printf<span class="op">(</span><span class="st">&quot;a &amp; b = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> a <span class="op">&amp;</span> b<span class="op">);</span>  <span class="co">/* 1 (00000001) */</span></span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a>printf<span class="op">(</span><span class="st">&quot;a | b = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> a <span class="op">|</span> b<span class="op">);</span>  <span class="co">/* 7 (00000111) */</span></span>
<span id="cb56-6"><a href="#cb56-6" aria-hidden="true" tabindex="-1"></a>printf<span class="op">(</span><span class="st">&quot;a ^ b = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> a <span class="op">^</span> b<span class="op">);</span>  <span class="co">/* 6 (00000110) */</span></span>
<span id="cb56-7"><a href="#cb56-7" aria-hidden="true" tabindex="-1"></a>printf<span class="op">(</span><span class="st">&quot;~a = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">~</span>a<span class="op">);</span>        <span class="co">/* 250 (11111010) */</span></span></code></pre></div>
<p><strong>C99版での詳細:</strong> <a
href="examples/bitwise_demo_c99.c">bitwise_demo_c99.c</a></p>
<h3 id="条件演算子三項演算子">条件演算子（三項演算子）</h3>
<p>条件に基づいて値を選択する演算子です。</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a>条件 <span class="op">?</span> 真の場合の値 <span class="op">:</span> 偽の場合の値</span></code></pre></div>
<div class="sourceCode" id="cb58"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> a <span class="op">=</span> <span class="dv">3</span><span class="op">,</span> b <span class="op">=</span> <span class="dv">7</span><span class="op">;</span></span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> max <span class="op">=</span> <span class="op">(</span>a <span class="op">&gt;</span> b<span class="op">)</span> <span class="op">?</span> a <span class="op">:</span> b<span class="op">;</span>  <span class="co">/* b が大きいので max = 7 */</span></span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"></a>printf<span class="op">(</span><span class="st">&quot;大きい方: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> max<span class="op">);</span></span></code></pre></div>
<p><strong>C99版での詳細:</strong> <a
href="solutions/conditional_operator_c99.c">conditional_operator_c99.c</a></p>
<h3 id="sizeof演算子">sizeof演算子</h3>
<p>データ型や変数のサイズを取得する演算子です。</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a>printf<span class="op">(</span><span class="st">&quot;int のサイズ: </span><span class="sc">%lu</span><span class="st"> バイト</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(</span><span class="dt">unsigned</span> <span class="dt">long</span><span class="op">)</span><span class="kw">sizeof</span><span class="op">(</span><span class="dt">int</span><span class="op">));</span></span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a>printf<span class="op">(</span><span class="st">&quot;double のサイズ: </span><span class="sc">%lu</span><span class="st"> バイト</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(</span><span class="dt">unsigned</span> <span class="dt">long</span><span class="op">)</span><span class="kw">sizeof</span><span class="op">(</span><span class="dt">double</span><span class="op">));</span></span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> arr<span class="op">[</span><span class="dv">10</span><span class="op">];</span></span>
<span id="cb59-5"><a href="#cb59-5" aria-hidden="true" tabindex="-1"></a>printf<span class="op">(</span><span class="st">&quot;配列のサイズ: </span><span class="sc">%lu</span><span class="st"> バイト</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(</span><span class="dt">unsigned</span> <span class="dt">long</span><span class="op">)</span><span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">));</span></span></code></pre></div>
<h3 id="演算子の優先順位">演算子の優先順位</h3>
<p>演算子には優先順位があり、計算の順序に影響します。</p>
<table>
<colgroup>
<col style="width: 35%" />
<col style="width: 28%" />
<col style="width: 35%" />
</colgroup>
<thead>
<tr>
<th>優先順位</th>
<th>演算子</th>
<th>結合規則</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td><code>()</code> <code>[]</code> <code>-&gt;</code>
<code>.</code></td>
<td>左から右</td>
</tr>
<tr>
<td>2</td>
<td><code>!</code> <code>~</code> <code>++</code> <code>--</code>
<code>+</code> <code>-</code> <code>*</code> <code>&amp;</code>
<code>sizeof</code> <code>(型)</code></td>
<td>右から左</td>
</tr>
<tr>
<td>3</td>
<td><code>*</code> <code>/</code> <code>%</code></td>
<td>左から右</td>
</tr>
<tr>
<td>4</td>
<td><code>+</code> <code>-</code></td>
<td>左から右</td>
</tr>
<tr>
<td>5</td>
<td><code>&lt;&lt;</code> <code>&gt;&gt;</code></td>
<td>左から右</td>
</tr>
<tr>
<td>6</td>
<td><code>&lt;</code> <code>&lt;=</code> <code>&gt;</code>
<code>&gt;=</code></td>
<td>左から右</td>
</tr>
<tr>
<td>7</td>
<td><code>==</code> <code>!=</code></td>
<td>左から右</td>
</tr>
<tr>
<td>8</td>
<td><code>&amp;</code></td>
<td>左から右</td>
</tr>
<tr>
<td>9</td>
<td><code>^</code></td>
<td>左から右</td>
</tr>
<tr>
<td>10</td>
<td><code>|</code></td>
<td>左から右</td>
</tr>
<tr>
<td>11</td>
<td><code>&amp;&amp;</code></td>
<td>左から右</td>
</tr>
<tr>
<td>12</td>
<td><code>||</code></td>
<td>左から右</td>
</tr>
<tr>
<td>13</td>
<td><code>?:</code></td>
<td>右から左</td>
</tr>
<tr>
<td>14</td>
<td><code>=</code> <code>+=</code> <code>-=</code> <code>*=</code>
<code>/=</code> <code>%=</code> <code>&amp;=</code> <code>^=</code>
<code>|=</code> <code>&lt;&lt;=</code> <code>&gt;&gt;=</code></td>
<td>右から左</td>
</tr>
<tr>
<td>15</td>
<td><code>,</code></td>
<td>左から右</td>
</tr>
</tbody>
</table>
<h4 id="優先順位の例">優先順位の例</h4>
<div class="sourceCode" id="cb60"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> result <span class="op">=</span> <span class="dv">2</span> <span class="op">+</span> <span class="dv">3</span> <span class="op">*</span> <span class="dv">4</span><span class="op">;</span>     <span class="co">/* 結果: 14 (乗算が先) */</span></span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> result <span class="op">=</span> <span class="op">(</span><span class="dv">2</span> <span class="op">+</span> <span class="dv">3</span><span class="op">)</span> <span class="op">*</span> <span class="dv">4</span><span class="op">;</span>  <span class="co">/* 結果: 20 (括弧が先) */</span></span></code></pre></div>
<p><strong>C99版での詳細:</strong> <a
href="examples/precedence_demo_c99.c">precedence_demo_c99.c</a></p>
<h2 id="サンプルコード-6">サンプルコード</h2>
<h3 id="演算子の基本使用例">演算子の基本使用例</h3>
<p>プログラムファイル: <a
href="examples/operators_demo.c">operators_demo.c</a><br />
C99版: <a
href="examples/operators_demo_c99.c">operators_demo_c99.c</a></p>
<p>さまざまな演算子の使用方法を学習します。</p>
<h3 id="ビット演算の実例">ビット演算の実例</h3>
<p>プログラムファイル: <a
href="examples/bitwise_demo.c">bitwise_demo.c</a><br />
C99版: <a href="examples/bitwise_demo_c99.c">bitwise_demo_c99.c</a></p>
<p>ビット演算の動作を可視化して確認します。</p>
<h3 id="演算子優先順位の確認">演算子優先順位の確認</h3>
<p>プログラムファイル: <a
href="examples/precedence_demo.c">precedence_demo.c</a><br />
C99版: <a
href="examples/precedence_demo_c99.c">precedence_demo_c99.c</a></p>
<p>演算子の優先順位による計算結果の違いを確認します。</p>
<h3 id="コンパイルと実行-3">コンパイルと実行</h3>
<div class="sourceCode" id="cb61"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="co"># C90準拠でコンパイル</span></span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a><span class="fu">gcc</span> <span class="at">-std</span><span class="op">=</span>c90 <span class="at">-Wall</span> <span class="at">-Wextra</span> <span class="at">-pedantic</span> examples/operators_demo.c <span class="at">-o</span> operators_demo</span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-4"><a href="#cb61-4" aria-hidden="true" tabindex="-1"></a><span class="co"># C99準拠でコンパイル</span></span>
<span id="cb61-5"><a href="#cb61-5" aria-hidden="true" tabindex="-1"></a><span class="fu">gcc</span> <span class="at">-std</span><span class="op">=</span>c99 <span class="at">-Wall</span> <span class="at">-Wextra</span> <span class="at">-pedantic</span> examples/operators_demo_c99.c <span class="at">-o</span> operators_demo_c99</span>
<span id="cb61-6"><a href="#cb61-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb61-7"><a href="#cb61-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 実行</span></span>
<span id="cb61-8"><a href="#cb61-8" aria-hidden="true" tabindex="-1"></a><span class="ex">./operators_demo</span></span></code></pre></div>
<h2 id="演習課題-3">演習課題</h2>
<p>演習課題の詳細は <a
href="exercises/README.md">exercises/README.md</a>
を参照してください。</p>
<h3 id="基礎問題-3">基礎問題</h3>
<ol type="1">
<li><strong>四則演算計算機</strong>
<ul>
<li>2つの数値に対してすべての算術演算を実行するプログラムを作成してください</li>
</ul></li>
<li><strong>比較と論理演算</strong>
<ul>
<li>2つの数値の中から最大値を求めるプログラムを作成してください</li>
</ul></li>
<li><strong>インクリメント・デクリメント</strong>
<ul>
<li>前置と後置の違いを確認するプログラムを作成してください</li>
</ul></li>
</ol>
<h3 id="応用問題-3">応用問題</h3>
<ol start="4" type="1">
<li><strong>ビット操作</strong>
<ul>
<li>整数の各ビットを表示するプログラムを作成してください</li>
</ul></li>
<li><strong>条件演算子の活用</strong>
<ul>
<li>三項演算子を使って複雑な条件分岐を実装してください</li>
</ul></li>
<li><strong>演算子優先順位</strong>
<ul>
<li>複雑な式の計算順序を確認するプログラムを作成してください</li>
</ul></li>
</ol>
<h2 id="解答例">解答例</h2>
<p>各演習問題の解答例は <a href="solutions/">solutions/</a>
ディレクトリにあります：</p>
<ul>
<li><a href="solutions/increment_decrement.c">increment_decrement.c</a>
/ <a href="solutions/increment_decrement_c99.c">C99版</a></li>
<li><a href="solutions/operator_precedence.c">operator_precedence.c</a>
/ <a href="solutions/operator_precedence_c99.c">C99版</a></li>
<li><a
href="solutions/conditional_operator.c">conditional_operator.c</a> / <a
href="solutions/conditional_operator_c99.c">C99版</a></li>
</ul>
<h2 id="コンパイル方法-3">コンパイル方法</h2>
<p>この章では以下のMakefileを使用してコンパイルができます：</p>
<div class="sourceCode" id="cb62"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 全ての例題をコンパイル</span></span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> all</span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 特定のプログラムをコンパイル</span></span>
<span id="cb62-5"><a href="#cb62-5" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> operators_demo</span>
<span id="cb62-6"><a href="#cb62-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-7"><a href="#cb62-7" aria-hidden="true" tabindex="-1"></a><span class="co"># C99版をコンパイル</span></span>
<span id="cb62-8"><a href="#cb62-8" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> operators_demo_c99</span>
<span id="cb62-9"><a href="#cb62-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-10"><a href="#cb62-10" aria-hidden="true" tabindex="-1"></a><span class="co"># 全て実行</span></span>
<span id="cb62-11"><a href="#cb62-11" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> run-all</span>
<span id="cb62-12"><a href="#cb62-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-13"><a href="#cb62-13" aria-hidden="true" tabindex="-1"></a><span class="co"># クリーンアップ</span></span>
<span id="cb62-14"><a href="#cb62-14" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> clean</span></code></pre></div>
<h2 id="規格による違い-3">規格による違い</h2>
<h3 id="c90での制限事項-2">C90での制限事項</h3>
<ul>
<li>ビット演算子は整数型に対してのみ使用可能</li>
<li>論理演算子の結果は0または1</li>
<li>ブロック先頭でのみ変数宣言可能</li>
</ul>
<h3 id="c99以降の拡張-2">C99以降の拡張</h3>
<ul>
<li><code>_Bool</code>型の追加により、論理値の取り扱いが明確化</li>
<li>複素数型に対する演算子の追加</li>
<li>forループ内での変数宣言が可能</li>
<li>インライン関数の使用が可能</li>
</ul>
<h2 id="よくある間違い-1">よくある間違い</h2>
<h3 id="代入と比較の混同">1. 代入と比較の混同</h3>
<div class="sourceCode" id="cb63"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* NG: 代入を条件文で使用 */</span></span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="op">(</span>a <span class="op">=</span> <span class="dv">5</span><span class="op">)</span>     <span class="co">/* 常に真になる */</span></span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* ... */</span></span>
<span id="cb63-4"><a href="#cb63-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb63-5"><a href="#cb63-5" aria-hidden="true" tabindex="-1"></a><span class="co">/* OK: 比較演算子を使用 */</span></span>
<span id="cb63-6"><a href="#cb63-6" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="op">(</span>a <span class="op">==</span> <span class="dv">5</span><span class="op">)</span>    <span class="co">/* a が 5 と等しいかチェック */</span></span>
<span id="cb63-7"><a href="#cb63-7" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* ... */</span></span></code></pre></div>
<h3 id="整数除算の結果-1">2. 整数除算の結果</h3>
<div class="sourceCode" id="cb64"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* NG: 期待した結果にならない */</span></span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a><span class="dt">double</span> result <span class="op">=</span> <span class="dv">5</span> <span class="op">/</span> <span class="dv">2</span><span class="op">;</span>      <span class="co">/* 結果: 2.0 */</span></span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-4"><a href="#cb64-4" aria-hidden="true" tabindex="-1"></a><span class="co">/* OK: 実数除算を使用 */</span></span>
<span id="cb64-5"><a href="#cb64-5" aria-hidden="true" tabindex="-1"></a><span class="dt">double</span> result <span class="op">=</span> <span class="fl">5.0</span> <span class="op">/</span> <span class="fl">2.0</span><span class="op">;</span>  <span class="co">/* 結果: 2.5 */</span></span></code></pre></div>
<h3 id="演算子の優先順位-1">3. 演算子の優先順位</h3>
<div class="sourceCode" id="cb65"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* NG: 意図しない計算順序 */</span></span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> result <span class="op">=</span> a <span class="op">+</span> b <span class="op">*</span> c <span class="op">+</span> d<span class="op">;</span> <span class="co">/* b * c が先に計算される */</span></span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb65-4"><a href="#cb65-4" aria-hidden="true" tabindex="-1"></a><span class="co">/* OK: 括弧で明示 */</span></span>
<span id="cb65-5"><a href="#cb65-5" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> result <span class="op">=</span> <span class="op">(</span>a <span class="op">+</span> b<span class="op">)</span> <span class="op">*</span> <span class="op">(</span>c <span class="op">+</span> d<span class="op">);</span></span></code></pre></div>
<h3 id="ビット演算の優先順位">4. ビット演算の優先順位</h3>
<div class="sourceCode" id="cb66"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* NG: 期待しない結果 */</span></span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="op">(</span>flags <span class="op">&amp;</span> MASK <span class="op">==</span> <span class="dv">1</span><span class="op">)</span>      <span class="co">/* flags &amp; (MASK == 1) として評価される */</span></span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-4"><a href="#cb66-4" aria-hidden="true" tabindex="-1"></a><span class="co">/* OK: 括弧で明示 */</span></span>
<span id="cb66-5"><a href="#cb66-5" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="op">((</span>flags <span class="op">&amp;</span> MASK<span class="op">)</span> <span class="op">==</span> <span class="dv">1</span><span class="op">)</span>    <span class="co">/* 正しい評価順序 */</span></span></code></pre></div>
<h2 id="次の章へ-3">次の章へ</h2>
<p>演算子と式を理解したら、<a
href="../control-if/README.md">制御構造（条件分岐）</a>
に進んでください。</p>
<h2 id="参考資料-3">参考資料</h2>
<ul>
<li><a
href="https://ja.cppreference.com/w/c/language/operator_precedence">C言語演算子リファレンス</a></li>
<li><a
href="https://ja.cppreference.com/w/c/language/operator_arithmetic">ビット演算詳細</a></li>
<li><a
href="https://ja.cppreference.com/w/c/language/operator_precedence">演算子優先順位表</a>
## サンプルコード</li>
</ul>
<h3 id="bitwise_demo.c">bitwise_demo.c</h3>
<div class="sourceCode" id="cb67"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="co">/*</span></span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a><span class="co"> * bitwise_demo.c</span></span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"></a><span class="co"> * ビット演算の動作を可視化して確認</span></span>
<span id="cb67-4"><a href="#cb67-4" aria-hidden="true" tabindex="-1"></a><span class="co"> * C90準拠</span></span>
<span id="cb67-5"><a href="#cb67-5" aria-hidden="true" tabindex="-1"></a><span class="co"> */</span></span>
<span id="cb67-6"><a href="#cb67-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-7"><a href="#cb67-7" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb67-8"><a href="#cb67-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-9"><a href="#cb67-9" aria-hidden="true" tabindex="-1"></a><span class="co">/* ビットパターンを表示する関数 */</span></span>
<span id="cb67-10"><a href="#cb67-10" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> print_bits<span class="op">(</span><span class="dt">unsigned</span> <span class="dt">char</span> value<span class="op">)</span> <span class="op">{</span></span>
<span id="cb67-11"><a href="#cb67-11" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb67-12"><a href="#cb67-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">7</span><span class="op">;</span> i <span class="op">&gt;=</span> <span class="dv">0</span><span class="op">;</span> i<span class="op">--)</span> <span class="op">{</span></span>
<span id="cb67-13"><a href="#cb67-13" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(</span>value <span class="op">&gt;&gt;</span> i<span class="op">)</span> <span class="op">&amp;</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb67-14"><a href="#cb67-14" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>i <span class="op">==</span> <span class="dv">4</span><span class="op">)</span> printf<span class="op">(</span><span class="st">&quot; &quot;</span><span class="op">);</span> <span class="co">/* 読みやすさのため4ビットごとに空白 */</span></span>
<span id="cb67-15"><a href="#cb67-15" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb67-16"><a href="#cb67-16" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb67-17"><a href="#cb67-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-18"><a href="#cb67-18" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb67-19"><a href="#cb67-19" aria-hidden="true" tabindex="-1"></a>    <span class="dt">unsigned</span> <span class="dt">char</span> a <span class="op">=</span> <span class="dv">5</span><span class="op">;</span>    <span class="co">/* 00000101 */</span></span>
<span id="cb67-20"><a href="#cb67-20" aria-hidden="true" tabindex="-1"></a>    <span class="dt">unsigned</span> <span class="dt">char</span> b <span class="op">=</span> <span class="dv">3</span><span class="op">;</span>    <span class="co">/* 00000011 */</span></span>
<span id="cb67-21"><a href="#cb67-21" aria-hidden="true" tabindex="-1"></a>    <span class="dt">unsigned</span> <span class="dt">char</span> result<span class="op">;</span></span>
<span id="cb67-22"><a href="#cb67-22" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb67-23"><a href="#cb67-23" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;===== ビット演算のデモ =====</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb67-24"><a href="#cb67-24" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;初期値:</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb67-25"><a href="#cb67-25" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;  a = </span><span class="sc">%3d</span><span class="st"> : &quot;</span><span class="op">,</span> a<span class="op">);</span></span>
<span id="cb67-26"><a href="#cb67-26" aria-hidden="true" tabindex="-1"></a>    print_bits<span class="op">(</span>a<span class="op">);</span></span>
<span id="cb67-27"><a href="#cb67-27" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb67-28"><a href="#cb67-28" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;  b = </span><span class="sc">%3d</span><span class="st"> : &quot;</span><span class="op">,</span> b<span class="op">);</span></span>
<span id="cb67-29"><a href="#cb67-29" aria-hidden="true" tabindex="-1"></a>    print_bits<span class="op">(</span>b<span class="op">);</span></span>
<span id="cb67-30"><a href="#cb67-30" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb67-31"><a href="#cb67-31" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb67-32"><a href="#cb67-32" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* ビットAND */</span></span>
<span id="cb67-33"><a href="#cb67-33" aria-hidden="true" tabindex="-1"></a>    result <span class="op">=</span> a <span class="op">&amp;</span> b<span class="op">;</span></span>
<span id="cb67-34"><a href="#cb67-34" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ビットAND (a &amp; b):</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb67-35"><a href="#cb67-35" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;  &quot;</span><span class="op">);</span></span>
<span id="cb67-36"><a href="#cb67-36" aria-hidden="true" tabindex="-1"></a>    print_bits<span class="op">(</span>a<span class="op">);</span></span>
<span id="cb67-37"><a href="#cb67-37" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&amp; &quot;</span><span class="op">);</span></span>
<span id="cb67-38"><a href="#cb67-38" aria-hidden="true" tabindex="-1"></a>    print_bits<span class="op">(</span>b<span class="op">);</span></span>
<span id="cb67-39"><a href="#cb67-39" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">---------------</span><span class="sc">\n</span><span class="st">  &quot;</span><span class="op">);</span></span>
<span id="cb67-40"><a href="#cb67-40" aria-hidden="true" tabindex="-1"></a>    print_bits<span class="op">(</span>result<span class="op">);</span></span>
<span id="cb67-41"><a href="#cb67-41" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot; = </span><span class="sc">%d\n\n</span><span class="st">&quot;</span><span class="op">,</span> result<span class="op">);</span></span>
<span id="cb67-42"><a href="#cb67-42" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb67-43"><a href="#cb67-43" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* ビットOR */</span></span>
<span id="cb67-44"><a href="#cb67-44" aria-hidden="true" tabindex="-1"></a>    result <span class="op">=</span> a <span class="op">|</span> b<span class="op">;</span></span>
<span id="cb67-45"><a href="#cb67-45" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ビットOR (a | b):</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb67-46"><a href="#cb67-46" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;  &quot;</span><span class="op">);</span></span>
<span id="cb67-47"><a href="#cb67-47" aria-hidden="true" tabindex="-1"></a>    print_bits<span class="op">(</span>a<span class="op">);</span></span>
<span id="cb67-48"><a href="#cb67-48" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">| &quot;</span><span class="op">);</span></span>
<span id="cb67-49"><a href="#cb67-49" aria-hidden="true" tabindex="-1"></a>    print_bits<span class="op">(</span>b<span class="op">);</span></span>
<span id="cb67-50"><a href="#cb67-50" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">---------------</span><span class="sc">\n</span><span class="st">  &quot;</span><span class="op">);</span></span>
<span id="cb67-51"><a href="#cb67-51" aria-hidden="true" tabindex="-1"></a>    print_bits<span class="op">(</span>result<span class="op">);</span></span>
<span id="cb67-52"><a href="#cb67-52" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot; = </span><span class="sc">%d\n\n</span><span class="st">&quot;</span><span class="op">,</span> result<span class="op">);</span></span>
<span id="cb67-53"><a href="#cb67-53" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb67-54"><a href="#cb67-54" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* ビットXOR */</span></span>
<span id="cb67-55"><a href="#cb67-55" aria-hidden="true" tabindex="-1"></a>    result <span class="op">=</span> a <span class="op">^</span> b<span class="op">;</span></span>
<span id="cb67-56"><a href="#cb67-56" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ビットXOR (a ^ b):</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb67-57"><a href="#cb67-57" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;  &quot;</span><span class="op">);</span></span>
<span id="cb67-58"><a href="#cb67-58" aria-hidden="true" tabindex="-1"></a>    print_bits<span class="op">(</span>a<span class="op">);</span></span>
<span id="cb67-59"><a href="#cb67-59" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">^ &quot;</span><span class="op">);</span></span>
<span id="cb67-60"><a href="#cb67-60" aria-hidden="true" tabindex="-1"></a>    print_bits<span class="op">(</span>b<span class="op">);</span></span>
<span id="cb67-61"><a href="#cb67-61" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">---------------</span><span class="sc">\n</span><span class="st">  &quot;</span><span class="op">);</span></span>
<span id="cb67-62"><a href="#cb67-62" aria-hidden="true" tabindex="-1"></a>    print_bits<span class="op">(</span>result<span class="op">);</span></span>
<span id="cb67-63"><a href="#cb67-63" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot; = </span><span class="sc">%d\n\n</span><span class="st">&quot;</span><span class="op">,</span> result<span class="op">);</span></span>
<span id="cb67-64"><a href="#cb67-64" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb67-65"><a href="#cb67-65" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* ビット反転 */</span></span>
<span id="cb67-66"><a href="#cb67-66" aria-hidden="true" tabindex="-1"></a>    result <span class="op">=</span> <span class="op">~</span>a<span class="op">;</span></span>
<span id="cb67-67"><a href="#cb67-67" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ビット反転 (~a):</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb67-68"><a href="#cb67-68" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;~ &quot;</span><span class="op">);</span></span>
<span id="cb67-69"><a href="#cb67-69" aria-hidden="true" tabindex="-1"></a>    print_bits<span class="op">(</span>a<span class="op">);</span></span>
<span id="cb67-70"><a href="#cb67-70" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">---------------</span><span class="sc">\n</span><span class="st">  &quot;</span><span class="op">);</span></span>
<span id="cb67-71"><a href="#cb67-71" aria-hidden="true" tabindex="-1"></a>    print_bits<span class="op">(</span>result<span class="op">);</span></span>
<span id="cb67-72"><a href="#cb67-72" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot; = </span><span class="sc">%d\n\n</span><span class="st">&quot;</span><span class="op">,</span> result<span class="op">);</span></span>
<span id="cb67-73"><a href="#cb67-73" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb67-74"><a href="#cb67-74" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 左シフト */</span></span>
<span id="cb67-75"><a href="#cb67-75" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;===== シフト演算のデモ =====</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb67-76"><a href="#cb67-76" aria-hidden="true" tabindex="-1"></a>    a <span class="op">=</span> <span class="dv">5</span><span class="op">;</span>  <span class="co">/* リセット */</span></span>
<span id="cb67-77"><a href="#cb67-77" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb67-78"><a href="#cb67-78" aria-hidden="true" tabindex="-1"></a>    result <span class="op">=</span> a <span class="op">&lt;&lt;</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb67-79"><a href="#cb67-79" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;左シフト (a &lt;&lt; 1):</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb67-80"><a href="#cb67-80" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;  &quot;</span><span class="op">);</span></span>
<span id="cb67-81"><a href="#cb67-81" aria-hidden="true" tabindex="-1"></a>    print_bits<span class="op">(</span>a<span class="op">);</span></span>
<span id="cb67-82"><a href="#cb67-82" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot; &lt;&lt; 1</span><span class="sc">\n</span><span class="st">= &quot;</span><span class="op">);</span></span>
<span id="cb67-83"><a href="#cb67-83" aria-hidden="true" tabindex="-1"></a>    print_bits<span class="op">(</span>result<span class="op">);</span></span>
<span id="cb67-84"><a href="#cb67-84" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot; = </span><span class="sc">%d</span><span class="st"> (2倍)</span><span class="sc">\n\n</span><span class="st">&quot;</span><span class="op">,</span> result<span class="op">);</span></span>
<span id="cb67-85"><a href="#cb67-85" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb67-86"><a href="#cb67-86" aria-hidden="true" tabindex="-1"></a>    result <span class="op">=</span> a <span class="op">&lt;&lt;</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb67-87"><a href="#cb67-87" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;左シフト (a &lt;&lt; 2):</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb67-88"><a href="#cb67-88" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;  &quot;</span><span class="op">);</span></span>
<span id="cb67-89"><a href="#cb67-89" aria-hidden="true" tabindex="-1"></a>    print_bits<span class="op">(</span>a<span class="op">);</span></span>
<span id="cb67-90"><a href="#cb67-90" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot; &lt;&lt; 2</span><span class="sc">\n</span><span class="st">= &quot;</span><span class="op">);</span></span>
<span id="cb67-91"><a href="#cb67-91" aria-hidden="true" tabindex="-1"></a>    print_bits<span class="op">(</span>result<span class="op">);</span></span>
<span id="cb67-92"><a href="#cb67-92" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot; = </span><span class="sc">%d</span><span class="st"> (4倍)</span><span class="sc">\n\n</span><span class="st">&quot;</span><span class="op">,</span> result<span class="op">);</span></span>
<span id="cb67-93"><a href="#cb67-93" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb67-94"><a href="#cb67-94" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 右シフト */</span></span>
<span id="cb67-95"><a href="#cb67-95" aria-hidden="true" tabindex="-1"></a>    a <span class="op">=</span> <span class="dv">20</span><span class="op">;</span> <span class="co">/* 00010100 */</span></span>
<span id="cb67-96"><a href="#cb67-96" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb67-97"><a href="#cb67-97" aria-hidden="true" tabindex="-1"></a>    result <span class="op">=</span> a <span class="op">&gt;&gt;</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb67-98"><a href="#cb67-98" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;右シフト (a &gt;&gt; 1):</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb67-99"><a href="#cb67-99" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;  &quot;</span><span class="op">);</span></span>
<span id="cb67-100"><a href="#cb67-100" aria-hidden="true" tabindex="-1"></a>    print_bits<span class="op">(</span>a<span class="op">);</span></span>
<span id="cb67-101"><a href="#cb67-101" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot; &gt;&gt; 1</span><span class="sc">\n</span><span class="st">= &quot;</span><span class="op">);</span></span>
<span id="cb67-102"><a href="#cb67-102" aria-hidden="true" tabindex="-1"></a>    print_bits<span class="op">(</span>result<span class="op">);</span></span>
<span id="cb67-103"><a href="#cb67-103" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot; = </span><span class="sc">%d</span><span class="st"> (1/2)</span><span class="sc">\n\n</span><span class="st">&quot;</span><span class="op">,</span> result<span class="op">);</span></span>
<span id="cb67-104"><a href="#cb67-104" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb67-105"><a href="#cb67-105" aria-hidden="true" tabindex="-1"></a>    result <span class="op">=</span> a <span class="op">&gt;&gt;</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb67-106"><a href="#cb67-106" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;右シフト (a &gt;&gt; 2):</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb67-107"><a href="#cb67-107" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;  &quot;</span><span class="op">);</span></span>
<span id="cb67-108"><a href="#cb67-108" aria-hidden="true" tabindex="-1"></a>    print_bits<span class="op">(</span>a<span class="op">);</span></span>
<span id="cb67-109"><a href="#cb67-109" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot; &gt;&gt; 2</span><span class="sc">\n</span><span class="st">= &quot;</span><span class="op">);</span></span>
<span id="cb67-110"><a href="#cb67-110" aria-hidden="true" tabindex="-1"></a>    print_bits<span class="op">(</span>result<span class="op">);</span></span>
<span id="cb67-111"><a href="#cb67-111" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot; = </span><span class="sc">%d</span><span class="st"> (1/4)</span><span class="sc">\n\n</span><span class="st">&quot;</span><span class="op">,</span> result<span class="op">);</span></span>
<span id="cb67-112"><a href="#cb67-112" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb67-113"><a href="#cb67-113" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 実用例：フラグ管理 */</span></span>
<span id="cb67-114"><a href="#cb67-114" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;===== ビット演算の実用例（フラグ管理） =====</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb67-115"><a href="#cb67-115" aria-hidden="true" tabindex="-1"></a>    <span class="pp">#define FLAG_A </span><span class="bn">0x01</span><span class="pp">  </span><span class="co">/* 0000 0001 */</span></span>
<span id="cb67-116"><a href="#cb67-116" aria-hidden="true" tabindex="-1"></a>    <span class="pp">#define FLAG_B </span><span class="bn">0x02</span><span class="pp">  </span><span class="co">/* 0000 0010 */</span></span>
<span id="cb67-117"><a href="#cb67-117" aria-hidden="true" tabindex="-1"></a>    <span class="pp">#define FLAG_C </span><span class="bn">0x04</span><span class="pp">  </span><span class="co">/* 0000 0100 */</span></span>
<span id="cb67-118"><a href="#cb67-118" aria-hidden="true" tabindex="-1"></a>    <span class="pp">#define FLAG_D </span><span class="bn">0x08</span><span class="pp">  </span><span class="co">/* 0000 1000 */</span></span>
<span id="cb67-119"><a href="#cb67-119" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb67-120"><a href="#cb67-120" aria-hidden="true" tabindex="-1"></a>    <span class="dt">unsigned</span> <span class="dt">char</span> flags <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb67-121"><a href="#cb67-121" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb67-122"><a href="#cb67-122" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;初期状態: &quot;</span><span class="op">);</span></span>
<span id="cb67-123"><a href="#cb67-123" aria-hidden="true" tabindex="-1"></a>    print_bits<span class="op">(</span>flags<span class="op">);</span></span>
<span id="cb67-124"><a href="#cb67-124" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb67-125"><a href="#cb67-125" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb67-126"><a href="#cb67-126" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* フラグを立てる */</span></span>
<span id="cb67-127"><a href="#cb67-127" aria-hidden="true" tabindex="-1"></a>    flags <span class="op">|=</span> FLAG_A<span class="op">;</span></span>
<span id="cb67-128"><a href="#cb67-128" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;FLAG_A を立てる: &quot;</span><span class="op">);</span></span>
<span id="cb67-129"><a href="#cb67-129" aria-hidden="true" tabindex="-1"></a>    print_bits<span class="op">(</span>flags<span class="op">);</span></span>
<span id="cb67-130"><a href="#cb67-130" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb67-131"><a href="#cb67-131" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb67-132"><a href="#cb67-132" aria-hidden="true" tabindex="-1"></a>    flags <span class="op">|=</span> FLAG_C<span class="op">;</span></span>
<span id="cb67-133"><a href="#cb67-133" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;FLAG_C を立てる: &quot;</span><span class="op">);</span></span>
<span id="cb67-134"><a href="#cb67-134" aria-hidden="true" tabindex="-1"></a>    print_bits<span class="op">(</span>flags<span class="op">);</span></span>
<span id="cb67-135"><a href="#cb67-135" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb67-136"><a href="#cb67-136" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb67-137"><a href="#cb67-137" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* フラグのチェック */</span></span>
<span id="cb67-138"><a href="#cb67-138" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>flags <span class="op">&amp;</span> FLAG_A<span class="op">)</span> <span class="op">{</span></span>
<span id="cb67-139"><a href="#cb67-139" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;FLAG_A は ON です</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb67-140"><a href="#cb67-140" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb67-141"><a href="#cb67-141" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>flags <span class="op">&amp;</span> FLAG_B<span class="op">)</span> <span class="op">{</span></span>
<span id="cb67-142"><a href="#cb67-142" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;FLAG_B は ON です</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb67-143"><a href="#cb67-143" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb67-144"><a href="#cb67-144" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;FLAG_B は OFF です</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb67-145"><a href="#cb67-145" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb67-146"><a href="#cb67-146" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb67-147"><a href="#cb67-147" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* フラグをクリア */</span></span>
<span id="cb67-148"><a href="#cb67-148" aria-hidden="true" tabindex="-1"></a>    flags <span class="op">&amp;=</span> <span class="op">~</span>FLAG_A<span class="op">;</span></span>
<span id="cb67-149"><a href="#cb67-149" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;FLAG_A をクリア: &quot;</span><span class="op">);</span></span>
<span id="cb67-150"><a href="#cb67-150" aria-hidden="true" tabindex="-1"></a>    print_bits<span class="op">(</span>flags<span class="op">);</span></span>
<span id="cb67-151"><a href="#cb67-151" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb67-152"><a href="#cb67-152" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb67-153"><a href="#cb67-153" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* フラグをトグル */</span></span>
<span id="cb67-154"><a href="#cb67-154" aria-hidden="true" tabindex="-1"></a>    flags <span class="op">^=</span> FLAG_B<span class="op">;</span></span>
<span id="cb67-155"><a href="#cb67-155" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;FLAG_B をトグル: &quot;</span><span class="op">);</span></span>
<span id="cb67-156"><a href="#cb67-156" aria-hidden="true" tabindex="-1"></a>    print_bits<span class="op">(</span>flags<span class="op">);</span></span>
<span id="cb67-157"><a href="#cb67-157" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb67-158"><a href="#cb67-158" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb67-159"><a href="#cb67-159" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb67-160"><a href="#cb67-160" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<blockquote>
<p>C99版は<a
href="bitwise_demo_c99.c">こちら</a>を参照してください。</p>
</blockquote>
<h3 id="operators_demo.c">operators_demo.c</h3>
<div class="sourceCode" id="cb68"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="co">/*</span></span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a><span class="co"> * operators_demo.c</span></span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a><span class="co"> * さまざまな演算子の使用方法を学習</span></span>
<span id="cb68-4"><a href="#cb68-4" aria-hidden="true" tabindex="-1"></a><span class="co"> * C90準拠</span></span>
<span id="cb68-5"><a href="#cb68-5" aria-hidden="true" tabindex="-1"></a><span class="co"> */</span></span>
<span id="cb68-6"><a href="#cb68-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-7"><a href="#cb68-7" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb68-8"><a href="#cb68-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-9"><a href="#cb68-9" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb68-10"><a href="#cb68-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> a <span class="op">=</span> <span class="dv">10</span><span class="op">,</span> b <span class="op">=</span> <span class="dv">3</span><span class="op">;</span></span>
<span id="cb68-11"><a href="#cb68-11" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span> x <span class="op">=</span> <span class="fl">10.0</span><span class="op">,</span> y <span class="op">=</span> <span class="fl">3.0</span><span class="op">;</span></span>
<span id="cb68-12"><a href="#cb68-12" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> result<span class="op">;</span></span>
<span id="cb68-13"><a href="#cb68-13" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb68-14"><a href="#cb68-14" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;===== 算術演算子のデモ =====</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb68-15"><a href="#cb68-15" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;整数演算 (a = </span><span class="sc">%d</span><span class="st">, b = </span><span class="sc">%d</span><span class="st">):</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> a<span class="op">,</span> b<span class="op">);</span></span>
<span id="cb68-16"><a href="#cb68-16" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;  a + b = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> a <span class="op">+</span> b<span class="op">);</span></span>
<span id="cb68-17"><a href="#cb68-17" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;  a - b = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> a <span class="op">-</span> b<span class="op">);</span></span>
<span id="cb68-18"><a href="#cb68-18" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;  a * b = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> a <span class="op">*</span> b<span class="op">);</span></span>
<span id="cb68-19"><a href="#cb68-19" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;  a / b = </span><span class="sc">%d</span><span class="st"> (整数除算)</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> a <span class="op">/</span> b<span class="op">);</span></span>
<span id="cb68-20"><a href="#cb68-20" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;  a </span><span class="sc">%%</span><span class="st"> b = </span><span class="sc">%d</span><span class="st"> (剰余)</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> a <span class="op">%</span> b<span class="op">);</span></span>
<span id="cb68-21"><a href="#cb68-21" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb68-22"><a href="#cb68-22" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">実数演算 (x = </span><span class="sc">%.1f</span><span class="st">, y = </span><span class="sc">%.1f</span><span class="st">):</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> x<span class="op">,</span> y<span class="op">);</span></span>
<span id="cb68-23"><a href="#cb68-23" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;  x / y = </span><span class="sc">%.2f</span><span class="st"> (実数除算)</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> x <span class="op">/</span> y<span class="op">);</span></span>
<span id="cb68-24"><a href="#cb68-24" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb68-25"><a href="#cb68-25" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">===== 代入演算子のデモ =====</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb68-26"><a href="#cb68-26" aria-hidden="true" tabindex="-1"></a>    result <span class="op">=</span> a<span class="op">;</span></span>
<span id="cb68-27"><a href="#cb68-27" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;result = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> result<span class="op">);</span></span>
<span id="cb68-28"><a href="#cb68-28" aria-hidden="true" tabindex="-1"></a>    result <span class="op">+=</span> <span class="dv">5</span><span class="op">;</span></span>
<span id="cb68-29"><a href="#cb68-29" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;result += 5 -&gt; </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> result<span class="op">);</span></span>
<span id="cb68-30"><a href="#cb68-30" aria-hidden="true" tabindex="-1"></a>    result <span class="op">-=</span> <span class="dv">3</span><span class="op">;</span></span>
<span id="cb68-31"><a href="#cb68-31" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;result -= 3 -&gt; </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> result<span class="op">);</span></span>
<span id="cb68-32"><a href="#cb68-32" aria-hidden="true" tabindex="-1"></a>    result <span class="op">*=</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb68-33"><a href="#cb68-33" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;result *= 2 -&gt; </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> result<span class="op">);</span></span>
<span id="cb68-34"><a href="#cb68-34" aria-hidden="true" tabindex="-1"></a>    result <span class="op">/=</span> <span class="dv">4</span><span class="op">;</span></span>
<span id="cb68-35"><a href="#cb68-35" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;result /= 4 -&gt; </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> result<span class="op">);</span></span>
<span id="cb68-36"><a href="#cb68-36" aria-hidden="true" tabindex="-1"></a>    result <span class="op">%=</span> <span class="dv">3</span><span class="op">;</span></span>
<span id="cb68-37"><a href="#cb68-37" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;result </span><span class="sc">%%</span><span class="st">= 3 -&gt; </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> result<span class="op">);</span></span>
<span id="cb68-38"><a href="#cb68-38" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb68-39"><a href="#cb68-39" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">===== インクリメント・デクリメント演算子 =====</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb68-40"><a href="#cb68-40" aria-hidden="true" tabindex="-1"></a>    a <span class="op">=</span> <span class="dv">5</span><span class="op">;</span></span>
<span id="cb68-41"><a href="#cb68-41" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;初期値: a = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> a<span class="op">);</span></span>
<span id="cb68-42"><a href="#cb68-42" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;a++ = </span><span class="sc">%d</span><span class="st"> (後置インクリメント)</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> a<span class="op">++);</span></span>
<span id="cb68-43"><a href="#cb68-43" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;現在の a = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> a<span class="op">);</span></span>
<span id="cb68-44"><a href="#cb68-44" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;++a = </span><span class="sc">%d</span><span class="st"> (前置インクリメント)</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">++</span>a<span class="op">);</span></span>
<span id="cb68-45"><a href="#cb68-45" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;現在の a = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> a<span class="op">);</span></span>
<span id="cb68-46"><a href="#cb68-46" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb68-47"><a href="#cb68-47" aria-hidden="true" tabindex="-1"></a>    a <span class="op">=</span> <span class="dv">5</span><span class="op">;</span></span>
<span id="cb68-48"><a href="#cb68-48" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">初期値: a = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> a<span class="op">);</span></span>
<span id="cb68-49"><a href="#cb68-49" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;a-- = </span><span class="sc">%d</span><span class="st"> (後置デクリメント)</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> a<span class="op">--);</span></span>
<span id="cb68-50"><a href="#cb68-50" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;現在の a = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> a<span class="op">);</span></span>
<span id="cb68-51"><a href="#cb68-51" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;--a = </span><span class="sc">%d</span><span class="st"> (前置デクリメント)</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">--</span>a<span class="op">);</span></span>
<span id="cb68-52"><a href="#cb68-52" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;現在の a = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> a<span class="op">);</span></span>
<span id="cb68-53"><a href="#cb68-53" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb68-54"><a href="#cb68-54" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">===== 関係演算子のデモ =====</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb68-55"><a href="#cb68-55" aria-hidden="true" tabindex="-1"></a>    a <span class="op">=</span> <span class="dv">5</span><span class="op">;</span> b <span class="op">=</span> <span class="dv">3</span><span class="op">;</span></span>
<span id="cb68-56"><a href="#cb68-56" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;a = </span><span class="sc">%d</span><span class="st">, b = </span><span class="sc">%d</span><span class="st"> のとき:</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> a<span class="op">,</span> b<span class="op">);</span></span>
<span id="cb68-57"><a href="#cb68-57" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;  a == b : </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> a <span class="op">==</span> b<span class="op">);</span></span>
<span id="cb68-58"><a href="#cb68-58" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;  a != b : </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> a <span class="op">!=</span> b<span class="op">);</span></span>
<span id="cb68-59"><a href="#cb68-59" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;  a &lt; b  : </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> a <span class="op">&lt;</span> b<span class="op">);</span></span>
<span id="cb68-60"><a href="#cb68-60" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;  a &lt;= b : </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> a <span class="op">&lt;=</span> b<span class="op">);</span></span>
<span id="cb68-61"><a href="#cb68-61" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;  a &gt; b  : </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> a <span class="op">&gt;</span> b<span class="op">);</span></span>
<span id="cb68-62"><a href="#cb68-62" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;  a &gt;= b : </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> a <span class="op">&gt;=</span> b<span class="op">);</span></span>
<span id="cb68-63"><a href="#cb68-63" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb68-64"><a href="#cb68-64" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">===== 論理演算子のデモ =====</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb68-65"><a href="#cb68-65" aria-hidden="true" tabindex="-1"></a>    a <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> b <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb68-66"><a href="#cb68-66" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;a = </span><span class="sc">%d</span><span class="st"> (真), b = </span><span class="sc">%d</span><span class="st"> (偽) のとき:</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> a<span class="op">,</span> b<span class="op">);</span></span>
<span id="cb68-67"><a href="#cb68-67" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;  a &amp;&amp; b : </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> a <span class="op">&amp;&amp;</span> b<span class="op">);</span></span>
<span id="cb68-68"><a href="#cb68-68" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;  a || b : </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> a <span class="op">||</span> b<span class="op">);</span></span>
<span id="cb68-69"><a href="#cb68-69" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;  !a     : </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">!</span>a<span class="op">);</span></span>
<span id="cb68-70"><a href="#cb68-70" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;  !b     : </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">!</span>b<span class="op">);</span></span>
<span id="cb68-71"><a href="#cb68-71" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb68-72"><a href="#cb68-72" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 短絡評価のデモ */</span></span>
<span id="cb68-73"><a href="#cb68-73" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">短絡評価のデモ:</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb68-74"><a href="#cb68-74" aria-hidden="true" tabindex="-1"></a>    a <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> b <span class="op">=</span> <span class="dv">5</span><span class="op">;</span></span>
<span id="cb68-75"><a href="#cb68-75" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;a = </span><span class="sc">%d</span><span class="st">, b = </span><span class="sc">%d</span><span class="st"> のとき:</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> a<span class="op">,</span> b<span class="op">);</span></span>
<span id="cb68-76"><a href="#cb68-76" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>a <span class="op">!=</span> <span class="dv">0</span> <span class="op">&amp;&amp;</span> b <span class="op">/</span> a <span class="op">&gt;</span> <span class="dv">2</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb68-77"><a href="#cb68-77" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;  条件は真です</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb68-78"><a href="#cb68-78" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb68-79"><a href="#cb68-79" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;  条件は偽です (a が 0 なので b/a は評価されない)</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb68-80"><a href="#cb68-80" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb68-81"><a href="#cb68-81" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb68-82"><a href="#cb68-82" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">===== 条件演算子（三項演算子）のデモ =====</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb68-83"><a href="#cb68-83" aria-hidden="true" tabindex="-1"></a>    a <span class="op">=</span> <span class="dv">10</span><span class="op">;</span> b <span class="op">=</span> <span class="dv">20</span><span class="op">;</span></span>
<span id="cb68-84"><a href="#cb68-84" aria-hidden="true" tabindex="-1"></a>    result <span class="op">=</span> <span class="op">(</span>a <span class="op">&gt;</span> b<span class="op">)</span> <span class="op">?</span> a <span class="op">:</span> b<span class="op">;</span></span>
<span id="cb68-85"><a href="#cb68-85" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;a = </span><span class="sc">%d</span><span class="st">, b = </span><span class="sc">%d</span><span class="st"> のとき:</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> a<span class="op">,</span> b<span class="op">);</span></span>
<span id="cb68-86"><a href="#cb68-86" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;  (a &gt; b) ? a : b = </span><span class="sc">%d</span><span class="st"> (大きい方の値)</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> result<span class="op">);</span></span>
<span id="cb68-87"><a href="#cb68-87" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb68-88"><a href="#cb68-88" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">===== sizeof演算子のデモ =====</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb68-89"><a href="#cb68-89" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;基本データ型のサイズ:</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb68-90"><a href="#cb68-90" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;  sizeof(char)   = </span><span class="sc">%lu</span><span class="st"> バイト</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(</span><span class="dt">unsigned</span> <span class="dt">long</span><span class="op">)</span><span class="kw">sizeof</span><span class="op">(</span><span class="dt">char</span><span class="op">));</span></span>
<span id="cb68-91"><a href="#cb68-91" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;  sizeof(short)  = </span><span class="sc">%lu</span><span class="st"> バイト</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(</span><span class="dt">unsigned</span> <span class="dt">long</span><span class="op">)</span><span class="kw">sizeof</span><span class="op">(</span><span class="dt">short</span><span class="op">));</span></span>
<span id="cb68-92"><a href="#cb68-92" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;  sizeof(int)    = </span><span class="sc">%lu</span><span class="st"> バイト</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(</span><span class="dt">unsigned</span> <span class="dt">long</span><span class="op">)</span><span class="kw">sizeof</span><span class="op">(</span><span class="dt">int</span><span class="op">));</span></span>
<span id="cb68-93"><a href="#cb68-93" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;  sizeof(long)   = </span><span class="sc">%lu</span><span class="st"> バイト</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(</span><span class="dt">unsigned</span> <span class="dt">long</span><span class="op">)</span><span class="kw">sizeof</span><span class="op">(</span><span class="dt">long</span><span class="op">));</span></span>
<span id="cb68-94"><a href="#cb68-94" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;  sizeof(float)  = </span><span class="sc">%lu</span><span class="st"> バイト</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(</span><span class="dt">unsigned</span> <span class="dt">long</span><span class="op">)</span><span class="kw">sizeof</span><span class="op">(</span><span class="dt">float</span><span class="op">));</span></span>
<span id="cb68-95"><a href="#cb68-95" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;  sizeof(double) = </span><span class="sc">%lu</span><span class="st"> バイト</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(</span><span class="dt">unsigned</span> <span class="dt">long</span><span class="op">)</span><span class="kw">sizeof</span><span class="op">(</span><span class="dt">double</span><span class="op">));</span></span>
<span id="cb68-96"><a href="#cb68-96" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb68-97"><a href="#cb68-97" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb68-98"><a href="#cb68-98" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<blockquote>
<p>C99版は<a
href="operators_demo_c99.c">こちら</a>を参照してください。</p>
</blockquote>
<h3 id="precedence_demo.c">precedence_demo.c</h3>
<div class="sourceCode" id="cb69"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="co">/*</span></span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a><span class="co"> * precedence_demo.c</span></span>
<span id="cb69-3"><a href="#cb69-3" aria-hidden="true" tabindex="-1"></a><span class="co"> * 演算子の優先順位による計算結果の違いを確認</span></span>
<span id="cb69-4"><a href="#cb69-4" aria-hidden="true" tabindex="-1"></a><span class="co"> * C90準拠</span></span>
<span id="cb69-5"><a href="#cb69-5" aria-hidden="true" tabindex="-1"></a><span class="co"> */</span></span>
<span id="cb69-6"><a href="#cb69-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-7"><a href="#cb69-7" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb69-8"><a href="#cb69-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-9"><a href="#cb69-9" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb69-10"><a href="#cb69-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> a <span class="op">=</span> <span class="dv">2</span><span class="op">,</span> b <span class="op">=</span> <span class="dv">3</span><span class="op">,</span> c <span class="op">=</span> <span class="dv">4</span><span class="op">,</span> d <span class="op">=</span> <span class="dv">5</span><span class="op">;</span></span>
<span id="cb69-11"><a href="#cb69-11" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> result<span class="op">;</span></span>
<span id="cb69-12"><a href="#cb69-12" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb69-13"><a href="#cb69-13" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;===== 演算子優先順位のデモ =====</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb69-14"><a href="#cb69-14" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;初期値: a = </span><span class="sc">%d</span><span class="st">, b = </span><span class="sc">%d</span><span class="st">, c = </span><span class="sc">%d</span><span class="st">, d = </span><span class="sc">%d\n\n</span><span class="st">&quot;</span><span class="op">,</span> a<span class="op">,</span> b<span class="op">,</span> c<span class="op">,</span> d<span class="op">);</span></span>
<span id="cb69-15"><a href="#cb69-15" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb69-16"><a href="#cb69-16" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 算術演算子の優先順位 */</span></span>
<span id="cb69-17"><a href="#cb69-17" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;【算術演算子の優先順位】</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb69-18"><a href="#cb69-18" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb69-19"><a href="#cb69-19" aria-hidden="true" tabindex="-1"></a>    result <span class="op">=</span> a <span class="op">+</span> b <span class="op">*</span> c<span class="op">;</span></span>
<span id="cb69-20"><a href="#cb69-20" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;a + b * c = </span><span class="sc">%d</span><span class="st"> + </span><span class="sc">%d</span><span class="st"> * </span><span class="sc">%d</span><span class="st"> = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> a<span class="op">,</span> b<span class="op">,</span> c<span class="op">,</span> result<span class="op">);</span></span>
<span id="cb69-21"><a href="#cb69-21" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;  → 乗算が先: </span><span class="sc">%d</span><span class="st"> + (</span><span class="sc">%d</span><span class="st"> * </span><span class="sc">%d</span><span class="st">) = </span><span class="sc">%d</span><span class="st"> + </span><span class="sc">%d</span><span class="st"> = </span><span class="sc">%d\n\n</span><span class="st">&quot;</span><span class="op">,</span> a<span class="op">,</span> b<span class="op">,</span> c<span class="op">,</span> b <span class="op">*</span> c<span class="op">,</span> b <span class="op">*</span> c<span class="op">,</span> result<span class="op">);</span></span>
<span id="cb69-22"><a href="#cb69-22" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb69-23"><a href="#cb69-23" aria-hidden="true" tabindex="-1"></a>    result <span class="op">=</span> <span class="op">(</span>a <span class="op">+</span> b<span class="op">)</span> <span class="op">*</span> c<span class="op">;</span></span>
<span id="cb69-24"><a href="#cb69-24" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;(a + b) * c = (</span><span class="sc">%d</span><span class="st"> + </span><span class="sc">%d</span><span class="st">) * </span><span class="sc">%d</span><span class="st"> = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> a<span class="op">,</span> b<span class="op">,</span> c<span class="op">,</span> result<span class="op">);</span></span>
<span id="cb69-25"><a href="#cb69-25" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;  → 括弧が先: (</span><span class="sc">%d</span><span class="st"> + </span><span class="sc">%d</span><span class="st">) * </span><span class="sc">%d</span><span class="st"> = </span><span class="sc">%d</span><span class="st"> * </span><span class="sc">%d</span><span class="st"> = </span><span class="sc">%d\n\n</span><span class="st">&quot;</span><span class="op">,</span> a<span class="op">,</span> b<span class="op">,</span> c<span class="op">,</span> a <span class="op">+</span> b<span class="op">,</span> a <span class="op">+</span> b<span class="op">,</span> result<span class="op">);</span></span>
<span id="cb69-26"><a href="#cb69-26" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb69-27"><a href="#cb69-27" aria-hidden="true" tabindex="-1"></a>    result <span class="op">=</span> a <span class="op">*</span> b <span class="op">+</span> c <span class="op">*</span> d<span class="op">;</span></span>
<span id="cb69-28"><a href="#cb69-28" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;a * b + c * d = </span><span class="sc">%d</span><span class="st"> * </span><span class="sc">%d</span><span class="st"> + </span><span class="sc">%d</span><span class="st"> * </span><span class="sc">%d</span><span class="st"> = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> a<span class="op">,</span> b<span class="op">,</span> c<span class="op">,</span> d<span class="op">,</span> result<span class="op">);</span></span>
<span id="cb69-29"><a href="#cb69-29" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;  → 乗算が先: (</span><span class="sc">%d</span><span class="st"> * </span><span class="sc">%d</span><span class="st">) + (</span><span class="sc">%d</span><span class="st"> * </span><span class="sc">%d</span><span class="st">) = </span><span class="sc">%d</span><span class="st"> + </span><span class="sc">%d</span><span class="st"> = </span><span class="sc">%d\n\n</span><span class="st">&quot;</span><span class="op">,</span> </span>
<span id="cb69-30"><a href="#cb69-30" aria-hidden="true" tabindex="-1"></a>           a<span class="op">,</span> b<span class="op">,</span> c<span class="op">,</span> d<span class="op">,</span> a <span class="op">*</span> b<span class="op">,</span> c <span class="op">*</span> d<span class="op">,</span> result<span class="op">);</span></span>
<span id="cb69-31"><a href="#cb69-31" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb69-32"><a href="#cb69-32" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 複雑な式の例 */</span></span>
<span id="cb69-33"><a href="#cb69-33" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;【複雑な式の評価順序】</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb69-34"><a href="#cb69-34" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb69-35"><a href="#cb69-35" aria-hidden="true" tabindex="-1"></a>    result <span class="op">=</span> a <span class="op">+</span> b <span class="op">*</span> c <span class="op">-</span> d<span class="op">;</span></span>
<span id="cb69-36"><a href="#cb69-36" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;a + b * c - d = </span><span class="sc">%d</span><span class="st"> + </span><span class="sc">%d</span><span class="st"> * </span><span class="sc">%d</span><span class="st"> - </span><span class="sc">%d</span><span class="st"> = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> a<span class="op">,</span> b<span class="op">,</span> c<span class="op">,</span> d<span class="op">,</span> result<span class="op">);</span></span>
<span id="cb69-37"><a href="#cb69-37" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;  評価順序:</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb69-38"><a href="#cb69-38" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;  1) b * c = </span><span class="sc">%d</span><span class="st"> * </span><span class="sc">%d</span><span class="st"> = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> b<span class="op">,</span> c<span class="op">,</span> b <span class="op">*</span> c<span class="op">);</span></span>
<span id="cb69-39"><a href="#cb69-39" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;  2) a + (b * c) = </span><span class="sc">%d</span><span class="st"> + </span><span class="sc">%d</span><span class="st"> = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> a<span class="op">,</span> b <span class="op">*</span> c<span class="op">,</span> a <span class="op">+</span> b <span class="op">*</span> c<span class="op">);</span></span>
<span id="cb69-40"><a href="#cb69-40" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;  3) (a + b * c) - d = </span><span class="sc">%d</span><span class="st"> - </span><span class="sc">%d</span><span class="st"> = </span><span class="sc">%d\n\n</span><span class="st">&quot;</span><span class="op">,</span> a <span class="op">+</span> b <span class="op">*</span> c<span class="op">,</span> d<span class="op">,</span> result<span class="op">);</span></span>
<span id="cb69-41"><a href="#cb69-41" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb69-42"><a href="#cb69-42" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 関係演算子と論理演算子 */</span></span>
<span id="cb69-43"><a href="#cb69-43" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;【関係演算子と論理演算子の優先順位】</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb69-44"><a href="#cb69-44" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb69-45"><a href="#cb69-45" aria-hidden="true" tabindex="-1"></a>    result <span class="op">=</span> a <span class="op">&lt;</span> b <span class="op">&amp;&amp;</span> c <span class="op">&gt;</span> d<span class="op">;</span></span>
<span id="cb69-46"><a href="#cb69-46" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;a &lt; b &amp;&amp; c &gt; d = </span><span class="sc">%d</span><span class="st"> &lt; </span><span class="sc">%d</span><span class="st"> &amp;&amp; </span><span class="sc">%d</span><span class="st"> &gt; </span><span class="sc">%d</span><span class="st"> = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> a<span class="op">,</span> b<span class="op">,</span> c<span class="op">,</span> d<span class="op">,</span> result<span class="op">);</span></span>
<span id="cb69-47"><a href="#cb69-47" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;  評価順序:</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb69-48"><a href="#cb69-48" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;  1) a &lt; b = </span><span class="sc">%d</span><span class="st"> &lt; </span><span class="sc">%d</span><span class="st"> = </span><span class="sc">%d</span><span class="st"> (真)</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> a<span class="op">,</span> b<span class="op">,</span> a <span class="op">&lt;</span> b<span class="op">);</span></span>
<span id="cb69-49"><a href="#cb69-49" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;  2) c &gt; d = </span><span class="sc">%d</span><span class="st"> &gt; </span><span class="sc">%d</span><span class="st"> = </span><span class="sc">%d</span><span class="st"> (偽)</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> c<span class="op">,</span> d<span class="op">,</span> c <span class="op">&gt;</span> d<span class="op">);</span></span>
<span id="cb69-50"><a href="#cb69-50" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;  3) (a &lt; b) &amp;&amp; (c &gt; d) = </span><span class="sc">%d</span><span class="st"> &amp;&amp; </span><span class="sc">%d</span><span class="st"> = </span><span class="sc">%d\n\n</span><span class="st">&quot;</span><span class="op">,</span> a <span class="op">&lt;</span> b<span class="op">,</span> c <span class="op">&gt;</span> d<span class="op">,</span> result<span class="op">);</span></span>
<span id="cb69-51"><a href="#cb69-51" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb69-52"><a href="#cb69-52" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* ビット演算子と比較演算子 */</span></span>
<span id="cb69-53"><a href="#cb69-53" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;【ビット演算子と比較演算子の優先順位】</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb69-54"><a href="#cb69-54" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb69-55"><a href="#cb69-55" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 注意：この例は優先順位を示すためのもの */</span></span>
<span id="cb69-56"><a href="#cb69-56" aria-hidden="true" tabindex="-1"></a>    result <span class="op">=</span> <span class="op">(</span>a <span class="op">&amp;</span> b<span class="op">)</span> <span class="op">==</span> <span class="dv">2</span><span class="op">;</span>  <span class="co">/* 括弧を使って意図を明確にする */</span></span>
<span id="cb69-57"><a href="#cb69-57" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;(a &amp; b) == 2 = (</span><span class="sc">%d</span><span class="st"> &amp; </span><span class="sc">%d</span><span class="st">) == 2 = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> a<span class="op">,</span> b<span class="op">,</span> result<span class="op">);</span></span>
<span id="cb69-58"><a href="#cb69-58" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;  評価順序:</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb69-59"><a href="#cb69-59" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;  1) a &amp; b = </span><span class="sc">%d</span><span class="st"> &amp; </span><span class="sc">%d</span><span class="st"> = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> a<span class="op">,</span> b<span class="op">,</span> a <span class="op">&amp;</span> b<span class="op">);</span></span>
<span id="cb69-60"><a href="#cb69-60" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;  2) (a &amp; b) == 2 = </span><span class="sc">%d</span><span class="st"> == 2 = </span><span class="sc">%d\n\n</span><span class="st">&quot;</span><span class="op">,</span> a <span class="op">&amp;</span> b<span class="op">,</span> result<span class="op">);</span></span>
<span id="cb69-61"><a href="#cb69-61" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb69-62"><a href="#cb69-62" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 代入演算子の結合性 */</span></span>
<span id="cb69-63"><a href="#cb69-63" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;【代入演算子の結合性（右結合）】</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb69-64"><a href="#cb69-64" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb69-65"><a href="#cb69-65" aria-hidden="true" tabindex="-1"></a>    a <span class="op">=</span> b <span class="op">=</span> c <span class="op">=</span> <span class="dv">10</span><span class="op">;</span></span>
<span id="cb69-66"><a href="#cb69-66" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;a = b = c = 10 の後: a = </span><span class="sc">%d</span><span class="st">, b = </span><span class="sc">%d</span><span class="st">, c = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> a<span class="op">,</span> b<span class="op">,</span> c<span class="op">);</span></span>
<span id="cb69-67"><a href="#cb69-67" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;  → 右から左に評価: a = (b = (c = 10))</span><span class="sc">\n\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb69-68"><a href="#cb69-68" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb69-69"><a href="#cb69-69" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* インクリメントと他の演算子 */</span></span>
<span id="cb69-70"><a href="#cb69-70" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;【インクリメント演算子の優先順位】</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb69-71"><a href="#cb69-71" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb69-72"><a href="#cb69-72" aria-hidden="true" tabindex="-1"></a>    a <span class="op">=</span> <span class="dv">5</span><span class="op">;</span></span>
<span id="cb69-73"><a href="#cb69-73" aria-hidden="true" tabindex="-1"></a>    result <span class="op">=</span> <span class="op">++</span>a <span class="op">*</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb69-74"><a href="#cb69-74" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;a = 5; result = ++a * 2;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb69-75"><a href="#cb69-75" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;  result = </span><span class="sc">%d</span><span class="st"> (前置++が先: 6 * 2)</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> result<span class="op">);</span></span>
<span id="cb69-76"><a href="#cb69-76" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;  a = </span><span class="sc">%d\n\n</span><span class="st">&quot;</span><span class="op">,</span> a<span class="op">);</span></span>
<span id="cb69-77"><a href="#cb69-77" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb69-78"><a href="#cb69-78" aria-hidden="true" tabindex="-1"></a>    a <span class="op">=</span> <span class="dv">5</span><span class="op">;</span></span>
<span id="cb69-79"><a href="#cb69-79" aria-hidden="true" tabindex="-1"></a>    result <span class="op">=</span> a<span class="op">++</span> <span class="op">*</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb69-80"><a href="#cb69-80" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;a = 5; result = a++ * 2;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb69-81"><a href="#cb69-81" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;  result = </span><span class="sc">%d</span><span class="st"> (後置++は後: 5 * 2)</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> result<span class="op">);</span></span>
<span id="cb69-82"><a href="#cb69-82" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;  a = </span><span class="sc">%d\n\n</span><span class="st">&quot;</span><span class="op">,</span> a<span class="op">);</span></span>
<span id="cb69-83"><a href="#cb69-83" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb69-84"><a href="#cb69-84" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 括弧を使った明確な表現 */</span></span>
<span id="cb69-85"><a href="#cb69-85" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;【推奨：括弧で意図を明確にする】</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb69-86"><a href="#cb69-86" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb69-87"><a href="#cb69-87" aria-hidden="true" tabindex="-1"></a>    a <span class="op">=</span> <span class="dv">2</span><span class="op">;</span> b <span class="op">=</span> <span class="dv">3</span><span class="op">;</span> c <span class="op">=</span> <span class="dv">4</span><span class="op">;</span> d <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb69-88"><a href="#cb69-88" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb69-89"><a href="#cb69-89" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 曖昧な式 */</span></span>
<span id="cb69-90"><a href="#cb69-90" aria-hidden="true" tabindex="-1"></a>    result <span class="op">=</span> a <span class="op">+</span> b <span class="op">&lt;&lt;</span> <span class="dv">2</span> <span class="op">&amp;</span> c<span class="op">;</span></span>
<span id="cb69-91"><a href="#cb69-91" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;曖昧: a + b &lt;&lt; 2 &amp; c = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> result<span class="op">);</span></span>
<span id="cb69-92"><a href="#cb69-92" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb69-93"><a href="#cb69-93" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 明確な式 */</span></span>
<span id="cb69-94"><a href="#cb69-94" aria-hidden="true" tabindex="-1"></a>    result <span class="op">=</span> <span class="op">((</span>a <span class="op">+</span> b<span class="op">)</span> <span class="op">&lt;&lt;</span> <span class="dv">2</span><span class="op">)</span> <span class="op">&amp;</span> c<span class="op">;</span></span>
<span id="cb69-95"><a href="#cb69-95" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;明確: ((a + b) &lt;&lt; 2) &amp; c = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> result<span class="op">);</span></span>
<span id="cb69-96"><a href="#cb69-96" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;  評価順序:</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb69-97"><a href="#cb69-97" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;  1) a + b = </span><span class="sc">%d</span><span class="st"> + </span><span class="sc">%d</span><span class="st"> = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> a<span class="op">,</span> b<span class="op">,</span> a <span class="op">+</span> b<span class="op">);</span></span>
<span id="cb69-98"><a href="#cb69-98" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;  2) (a + b) &lt;&lt; 2 = </span><span class="sc">%d</span><span class="st"> &lt;&lt; 2 = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> a <span class="op">+</span> b<span class="op">,</span> <span class="op">(</span>a <span class="op">+</span> b<span class="op">)</span> <span class="op">&lt;&lt;</span> <span class="dv">2</span><span class="op">);</span></span>
<span id="cb69-99"><a href="#cb69-99" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;  3) ((a + b) &lt;&lt; 2) &amp; c = </span><span class="sc">%d</span><span class="st"> &amp; </span><span class="sc">%d</span><span class="st"> = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(</span>a <span class="op">+</span> b<span class="op">)</span> <span class="op">&lt;&lt;</span> <span class="dv">2</span><span class="op">,</span> c<span class="op">,</span> result<span class="op">);</span></span>
<span id="cb69-100"><a href="#cb69-100" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb69-101"><a href="#cb69-101" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb69-102"><a href="#cb69-102" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<blockquote>
<p>C99版は<a
href="precedence_demo_c99.c">こちら</a>を参照してください。</p>
</blockquote>
<hr />
<h1 id="第5章-条件分岐">第5章: 条件分岐</h1>
<h2 id="対応c規格-4">対応C規格</h2>
<ul>
<li><strong>主要対象:</strong> C90</li>
<li><strong>学習内容:</strong>
if文、else文、switch文、条件演算子による分岐処理</li>
</ul>
<h2 id="学習目標-4">学習目標</h2>
<p>この章を完了すると、以下のことができるようになります：</p>
<ul>
<li>if文を使った条件分岐ができる</li>
<li>else if文で複数条件を処理できる</li>
<li>switch文による多分岐処理ができる</li>
<li>条件演算子を適切に使える</li>
<li>ネストした条件分岐を理解する</li>
</ul>
<h2 id="理論解説-4">理論解説</h2>
<h3 id="if文の基本">if文の基本 🤔</h3>
<p>if文は条件に基づいてプログラムの実行を分岐させます。</p>
<h4 id="基本構文">基本構文</h4>
<div class="sourceCode" id="cb70"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="op">(</span>条件式<span class="op">)</span> </span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 条件が真の場合に実行される文 */</span></span></code></pre></div>
<h4 id="単純なif文の例">単純なif文の例</h4>
<div class="sourceCode" id="cb71"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-3"><a href="#cb71-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb71-4"><a href="#cb71-4" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb71-5"><a href="#cb71-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-6"><a href="#cb71-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> score <span class="op">=</span> <span class="op">;</span></span>
<span id="cb71-7"><a href="#cb71-7" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb71-8"><a href="#cb71-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>score <span class="op">&gt;=</span> <span class="op">)</span> </span>
<span id="cb71-9"><a href="#cb71-9" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;優秀です！n&quot;</span><span class="op">);</span></span>
<span id="cb71-10"><a href="#cb71-10" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb71-11"><a href="#cb71-11" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb71-12"><a href="#cb71-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">;</span></span></code></pre></div>
<h3 id="if-else文">if-else文</h3>
<p>条件が偽の場合の処理も指定できます。</p>
<h4 id="基本構文-1">基本構文</h4>
<div class="sourceCode" id="cb72"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="op">(</span>条件式<span class="op">)</span> </span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 条件が真の場合の処理 */</span></span>
<span id="cb72-3"><a href="#cb72-3" aria-hidden="true" tabindex="-1"></a> <span class="cf">else</span> </span>
<span id="cb72-4"><a href="#cb72-4" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 条件が偽の場合の処理 */</span></span></code></pre></div>
<h4 id="if-else文の例">if-else文の例</h4>
<div class="sourceCode" id="cb73"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> age <span class="op">=</span> <span class="op">;</span></span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-3"><a href="#cb73-3" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="op">(</span>age <span class="op">&gt;=</span> <span class="op">)</span> </span>
<span id="cb73-4"><a href="#cb73-4" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;成人ですn&quot;</span><span class="op">);</span></span>
<span id="cb73-5"><a href="#cb73-5" aria-hidden="true" tabindex="-1"></a> <span class="cf">else</span> </span>
<span id="cb73-6"><a href="#cb73-6" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;未成年ですn&quot;</span><span class="op">);</span></span></code></pre></div>
<h3 id="if-else-if文">if-else if文</h3>
<p>複数の条件を順次チェックできます。</p>
<h4 id="基本構文-2">基本構文</h4>
<div class="sourceCode" id="cb74"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="op">(</span>条件<span class="op">)</span> </span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 条件が真の場合 */</span></span>
<span id="cb74-3"><a href="#cb74-3" aria-hidden="true" tabindex="-1"></a> <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>条件<span class="op">)</span> </span>
<span id="cb74-4"><a href="#cb74-4" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 条件が真の場合 */</span></span>
<span id="cb74-5"><a href="#cb74-5" aria-hidden="true" tabindex="-1"></a> <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>条件<span class="op">)</span> </span>
<span id="cb74-6"><a href="#cb74-6" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 条件が真の場合 */</span></span>
<span id="cb74-7"><a href="#cb74-7" aria-hidden="true" tabindex="-1"></a> <span class="cf">else</span> </span>
<span id="cb74-8"><a href="#cb74-8" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* すべての条件が偽の場合 */</span></span></code></pre></div>
<h4 id="成績判定の例">成績判定の例</h4>
<div class="sourceCode" id="cb75"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> score <span class="op">=</span> <span class="op">;</span></span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-3"><a href="#cb75-3" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="op">(</span>score <span class="op">&gt;=</span> <span class="dv">9</span><span class="op">)</span> </span>
<span id="cb75-4"><a href="#cb75-4" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;成績: An&quot;</span><span class="op">);</span></span>
<span id="cb75-5"><a href="#cb75-5" aria-hidden="true" tabindex="-1"></a> <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>score <span class="op">&gt;=</span> <span class="op">)</span> </span>
<span id="cb75-6"><a href="#cb75-6" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;成績: n&quot;</span><span class="op">);</span></span>
<span id="cb75-7"><a href="#cb75-7" aria-hidden="true" tabindex="-1"></a> <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>score <span class="op">&gt;=</span> <span class="op">)</span> </span>
<span id="cb75-8"><a href="#cb75-8" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;成績: Cn&quot;</span><span class="op">);</span></span>
<span id="cb75-9"><a href="#cb75-9" aria-hidden="true" tabindex="-1"></a> <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>score <span class="op">&gt;=</span> <span class="op">)</span> </span>
<span id="cb75-10"><a href="#cb75-10" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;成績: Dn&quot;</span><span class="op">);</span></span>
<span id="cb75-11"><a href="#cb75-11" aria-hidden="true" tabindex="-1"></a> <span class="cf">else</span> </span>
<span id="cb75-12"><a href="#cb75-12" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;成績: n&quot;</span><span class="op">);</span></span></code></pre></div>
<h3 id="ネストしたif文">ネストしたif文</h3>
<p>if文の中にさらにif文を書くことができます。</p>
<div class="sourceCode" id="cb76"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> temperatrue <span class="op">=</span> <span class="op">;</span></span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> hmidity <span class="op">=</span> <span class="op">;</span></span>
<span id="cb76-3"><a href="#cb76-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb76-4"><a href="#cb76-4" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="op">(</span>temperatrue <span class="op">&gt;=</span> <span class="op">)</span> </span>
<span id="cb76-5"><a href="#cb76-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>hmidity <span class="op">&lt;=</span> <span class="op">)</span> </span>
<span id="cb76-6"><a href="#cb76-6" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;快適な天気ですn&quot;</span><span class="op">);</span></span>
<span id="cb76-7"><a href="#cb76-7" aria-hidden="true" tabindex="-1"></a>     <span class="cf">else</span> </span>
<span id="cb76-8"><a href="#cb76-8" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;暖かいですが湿度が高いですn&quot;</span><span class="op">);</span></span>
<span id="cb76-9"><a href="#cb76-9" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb76-10"><a href="#cb76-10" aria-hidden="true" tabindex="-1"></a> <span class="cf">else</span> </span>
<span id="cb76-11"><a href="#cb76-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>hmidity <span class="op">&lt;=</span> <span class="op">)</span> </span>
<span id="cb76-12"><a href="#cb76-12" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;涼しく乾燥していますn&quot;</span><span class="op">);</span></span>
<span id="cb76-13"><a href="#cb76-13" aria-hidden="true" tabindex="-1"></a>     <span class="cf">else</span> </span>
<span id="cb76-14"><a href="#cb76-14" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;寒くて湿気がありますn&quot;</span><span class="op">);</span></span>
<span id="cb76-15"><a href="#cb76-15" aria-hidden="true" tabindex="-1"></a>    </span></code></pre></div>
<h3 id="条件式の詳細">条件式の詳細</h3>
<h4 id="比較演算子">比較演算子</h4>
<div class="sourceCode" id="cb77"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> a <span class="op">=</span> <span class="op">,</span> b <span class="op">=</span> <span class="op">;</span></span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-3"><a href="#cb77-3" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="op">(</span>a <span class="op">==</span> b<span class="op">)</span>   printf<span class="op">(</span><span class="st">&quot;等しいn&quot;</span><span class="op">);</span> </span>
<span id="cb77-4"><a href="#cb77-4" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="op">(</span>a <span class="op">!=</span> b<span class="op">)</span>   printf<span class="op">(</span><span class="st">&quot;等しくないn&quot;</span><span class="op">);</span> </span>
<span id="cb77-5"><a href="#cb77-5" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="op">(</span>a <span class="op">&lt;</span> b<span class="op">)</span>    printf<span class="op">(</span><span class="st">&quot;a は b より小さいn&quot;</span><span class="op">);</span> </span>
<span id="cb77-6"><a href="#cb77-6" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="op">(</span>a <span class="op">&lt;=</span> b<span class="op">)</span>   printf<span class="op">(</span><span class="st">&quot;a は b 以下n&quot;</span><span class="op">);</span> </span>
<span id="cb77-7"><a href="#cb77-7" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="op">(</span>a <span class="op">&gt;</span> b<span class="op">)</span>    printf<span class="op">(</span><span class="st">&quot;a は b より大きいn&quot;</span><span class="op">);</span> </span>
<span id="cb77-8"><a href="#cb77-8" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="op">(</span>a <span class="op">&gt;=</span> b<span class="op">)</span>   printf<span class="op">(</span><span class="st">&quot;a は b 以上n&quot;</span><span class="op">);</span> </span></code></pre></div>
<h4 id="論理演算子の組み合わせ">論理演算子の組み合わせ</h4>
<div class="sourceCode" id="cb78"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> age <span class="op">=</span> <span class="op">;</span></span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> income <span class="op">=</span> <span class="op">;</span></span>
<span id="cb78-3"><a href="#cb78-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-4"><a href="#cb78-4" aria-hidden="true" tabindex="-1"></a><span class="co">/* AND演算子 */</span></span>
<span id="cb78-5"><a href="#cb78-5" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="op">(</span>age <span class="op">&gt;=</span>  <span class="op">&amp;&amp;</span> income <span class="op">&gt;=</span> <span class="op">)</span> </span>
<span id="cb78-6"><a href="#cb78-6" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ローン審査に通りましたn&quot;</span><span class="op">);</span></span>
<span id="cb78-7"><a href="#cb78-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-8"><a href="#cb78-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-9"><a href="#cb78-9" aria-hidden="true" tabindex="-1"></a><span class="co">/* OR演算子 */</span></span>
<span id="cb78-10"><a href="#cb78-10" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="op">(</span>age <span class="op">&lt;</span>  <span class="op">||</span> age <span class="op">&gt;</span> <span class="op">)</span> </span>
<span id="cb78-11"><a href="#cb78-11" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;特別料金が適用されますn&quot;</span><span class="op">);</span></span>
<span id="cb78-12"><a href="#cb78-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-13"><a href="#cb78-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-14"><a href="#cb78-14" aria-hidden="true" tabindex="-1"></a><span class="co">/* NOT演算子 */</span></span>
<span id="cb78-15"><a href="#cb78-15" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="op">(!(</span>age <span class="op">&gt;=</span> <span class="op">))</span> </span>
<span id="cb78-16"><a href="#cb78-16" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;歳未満ですn&quot;</span><span class="op">);</span></span></code></pre></div>
<h3 id="switch文">switch文</h3>
<p>複数の値に対する分岐処理を効率的に記述できます。</p>
<h4 id="基本構文-3">基本構文</h4>
<div class="sourceCode" id="cb79"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="cf">switch</span> <span class="op">(</span>変数または式<span class="op">)</span> </span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> 値<span class="op">:</span></span>
<span id="cb79-3"><a href="#cb79-3" aria-hidden="true" tabindex="-1"></a>        <span class="co">/* 値の場合の処理 */</span></span>
<span id="cb79-4"><a href="#cb79-4" aria-hidden="true" tabindex="-1"></a>        <span class="cf">break</span><span class="op">;</span></span>
<span id="cb79-5"><a href="#cb79-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> 値<span class="op">:</span></span>
<span id="cb79-6"><a href="#cb79-6" aria-hidden="true" tabindex="-1"></a>        <span class="co">/* 値の場合の処理 */</span></span>
<span id="cb79-7"><a href="#cb79-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">break</span><span class="op">;</span></span>
<span id="cb79-8"><a href="#cb79-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> 値<span class="op">:</span></span>
<span id="cb79-9"><a href="#cb79-9" aria-hidden="true" tabindex="-1"></a>        <span class="co">/* 値の場合の処理 */</span></span>
<span id="cb79-10"><a href="#cb79-10" aria-hidden="true" tabindex="-1"></a>        <span class="cf">break</span><span class="op">;</span></span>
<span id="cb79-11"><a href="#cb79-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">default</span><span class="op">:</span></span>
<span id="cb79-12"><a href="#cb79-12" aria-hidden="true" tabindex="-1"></a>        <span class="co">/* どの値にも一致しない場合の処理 */</span></span>
<span id="cb79-13"><a href="#cb79-13" aria-hidden="true" tabindex="-1"></a>        <span class="cf">break</span><span class="op">;</span></span></code></pre></div>
<h4 id="曜日判定の例">曜日判定の例</h4>
<div class="sourceCode" id="cb80"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> day <span class="op">=</span> <span class="op">;</span></span>
<span id="cb80-2"><a href="#cb80-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb80-3"><a href="#cb80-3" aria-hidden="true" tabindex="-1"></a><span class="cf">switch</span> <span class="op">(</span>day<span class="op">)</span> </span>
<span id="cb80-4"><a href="#cb80-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> <span class="op">:</span></span>
<span id="cb80-5"><a href="#cb80-5" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;月曜日n&quot;</span><span class="op">);</span></span>
<span id="cb80-6"><a href="#cb80-6" aria-hidden="true" tabindex="-1"></a>        <span class="cf">break</span><span class="op">;</span></span>
<span id="cb80-7"><a href="#cb80-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> <span class="op">:</span></span>
<span id="cb80-8"><a href="#cb80-8" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;火曜日n&quot;</span><span class="op">);</span></span>
<span id="cb80-9"><a href="#cb80-9" aria-hidden="true" tabindex="-1"></a>        <span class="cf">break</span><span class="op">;</span></span>
<span id="cb80-10"><a href="#cb80-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> <span class="op">:</span></span>
<span id="cb80-11"><a href="#cb80-11" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;水曜日n&quot;</span><span class="op">);</span></span>
<span id="cb80-12"><a href="#cb80-12" aria-hidden="true" tabindex="-1"></a>        <span class="cf">break</span><span class="op">;</span></span>
<span id="cb80-13"><a href="#cb80-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> <span class="op">:</span></span>
<span id="cb80-14"><a href="#cb80-14" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;木曜日n&quot;</span><span class="op">);</span></span>
<span id="cb80-15"><a href="#cb80-15" aria-hidden="true" tabindex="-1"></a>        <span class="cf">break</span><span class="op">;</span></span>
<span id="cb80-16"><a href="#cb80-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> <span class="op">:</span></span>
<span id="cb80-17"><a href="#cb80-17" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;金曜日n&quot;</span><span class="op">);</span></span>
<span id="cb80-18"><a href="#cb80-18" aria-hidden="true" tabindex="-1"></a>        <span class="cf">break</span><span class="op">;</span></span>
<span id="cb80-19"><a href="#cb80-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> <span class="op">:</span></span>
<span id="cb80-20"><a href="#cb80-20" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;土曜日n&quot;</span><span class="op">);</span></span>
<span id="cb80-21"><a href="#cb80-21" aria-hidden="true" tabindex="-1"></a>        <span class="cf">break</span><span class="op">;</span></span>
<span id="cb80-22"><a href="#cb80-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> <span class="op">:</span></span>
<span id="cb80-23"><a href="#cb80-23" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;日曜日n&quot;</span><span class="op">);</span></span>
<span id="cb80-24"><a href="#cb80-24" aria-hidden="true" tabindex="-1"></a>        <span class="cf">break</span><span class="op">;</span></span>
<span id="cb80-25"><a href="#cb80-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">default</span><span class="op">:</span></span>
<span id="cb80-26"><a href="#cb80-26" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;無効な曜日ですn&quot;</span><span class="op">);</span></span>
<span id="cb80-27"><a href="#cb80-27" aria-hidden="true" tabindex="-1"></a>        <span class="cf">break</span><span class="op">;</span></span></code></pre></div>
<h4 id="break文の重要性">break文の重要性</h4>
<p>break文を忘れると、次のcaseも実行されます（フォールスルー）：</p>
<div class="sourceCode" id="cb81"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> grade <span class="op">=</span> <span class="ch">&#39;</span><span class="er">&#39;</span><span class="op">;</span></span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-3"><a href="#cb81-3" aria-hidden="true" tabindex="-1"></a><span class="cf">switch</span> <span class="op">(</span>grade<span class="op">)</span> </span>
<span id="cb81-4"><a href="#cb81-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> <span class="ch">&#39;A&#39;</span><span class="op">:</span></span>
<span id="cb81-5"><a href="#cb81-5" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;優秀n&quot;</span><span class="op">);</span></span>
<span id="cb81-6"><a href="#cb81-6" aria-hidden="true" tabindex="-1"></a>        <span class="co">/* break がないので次のcaseも実行される */</span></span>
<span id="cb81-7"><a href="#cb81-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> <span class="ch">&#39;</span><span class="er">&#39;</span><span class="op">:</span></span>
<span id="cb81-8"><a href="#cb81-8" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;良好n&quot;</span><span class="op">);</span></span>
<span id="cb81-9"><a href="#cb81-9" aria-hidden="true" tabindex="-1"></a>        <span class="co">/* break がないので次のcaseも実行される */</span></span>
<span id="cb81-10"><a href="#cb81-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> <span class="ch">&#39;C&#39;</span><span class="op">:</span></span>
<span id="cb81-11"><a href="#cb81-11" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;普通n&quot;</span><span class="op">);</span></span>
<span id="cb81-12"><a href="#cb81-12" aria-hidden="true" tabindex="-1"></a>        <span class="cf">break</span><span class="op">;</span></span>
<span id="cb81-13"><a href="#cb81-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">default</span><span class="op">:</span></span>
<span id="cb81-14"><a href="#cb81-14" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;要努力n&quot;</span><span class="op">);</span></span>
<span id="cb81-15"><a href="#cb81-15" aria-hidden="true" tabindex="-1"></a>        <span class="cf">break</span><span class="op">;</span></span>
<span id="cb81-16"><a href="#cb81-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-17"><a href="#cb81-17" aria-hidden="true" tabindex="-1"></a><span class="co">/* grade が &#39;&#39; の場合、&quot;良好&quot; と &quot;普通&quot; の両方が出力される */</span></span></code></pre></div>
<h4 id="意図的なフォールスルー">意図的なフォールスルー</h4>
<p>時には意図的にbreakを省略することもあります：</p>
<div class="sourceCode" id="cb82"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="dt">char</span> ch <span class="op">=</span> <span class="ch">&#39;a&#39;</span><span class="op">;</span></span>
<span id="cb82-2"><a href="#cb82-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb82-3"><a href="#cb82-3" aria-hidden="true" tabindex="-1"></a><span class="cf">switch</span> <span class="op">(</span>ch<span class="op">)</span> </span>
<span id="cb82-4"><a href="#cb82-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> <span class="ch">&#39;a&#39;</span><span class="op">:</span></span>
<span id="cb82-5"><a href="#cb82-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> <span class="ch">&#39;e&#39;</span><span class="op">:</span></span>
<span id="cb82-6"><a href="#cb82-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> <span class="ch">&#39;i&#39;</span><span class="op">:</span></span>
<span id="cb82-7"><a href="#cb82-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> <span class="ch">&#39;o&#39;</span><span class="op">:</span></span>
<span id="cb82-8"><a href="#cb82-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> <span class="ch">&#39;</span><span class="er">&#39;</span><span class="op">:</span></span>
<span id="cb82-9"><a href="#cb82-9" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;母音ですn&quot;</span><span class="op">);</span></span>
<span id="cb82-10"><a href="#cb82-10" aria-hidden="true" tabindex="-1"></a>        <span class="cf">break</span><span class="op">;</span></span>
<span id="cb82-11"><a href="#cb82-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">default</span><span class="op">:</span></span>
<span id="cb82-12"><a href="#cb82-12" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;子音ですn&quot;</span><span class="op">);</span></span>
<span id="cb82-13"><a href="#cb82-13" aria-hidden="true" tabindex="-1"></a>        <span class="cf">break</span><span class="op">;</span></span></code></pre></div>
<h3 id="条件演算子三項演算子の復習">条件演算子（三項演算子）の復習</h3>
<p>条件分岐の簡潔な書き方として条件演算子があります。</p>
<div class="sourceCode" id="cb83"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> a <span class="op">=</span> <span class="op">,</span> b <span class="op">=</span> <span class="op">;</span></span>
<span id="cb83-2"><a href="#cb83-2" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> max<span class="op">;</span></span>
<span id="cb83-3"><a href="#cb83-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-4"><a href="#cb83-4" aria-hidden="true" tabindex="-1"></a><span class="co">/* if-else文での記述 */</span></span>
<span id="cb83-5"><a href="#cb83-5" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="op">(</span>a <span class="op">&gt;</span> b<span class="op">)</span> </span>
<span id="cb83-6"><a href="#cb83-6" aria-hidden="true" tabindex="-1"></a>    max <span class="op">=</span> a<span class="op">;</span></span>
<span id="cb83-7"><a href="#cb83-7" aria-hidden="true" tabindex="-1"></a> <span class="cf">else</span> </span>
<span id="cb83-8"><a href="#cb83-8" aria-hidden="true" tabindex="-1"></a>    max <span class="op">=</span> b<span class="op">;</span></span>
<span id="cb83-9"><a href="#cb83-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-10"><a href="#cb83-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-11"><a href="#cb83-11" aria-hidden="true" tabindex="-1"></a><span class="co">/* 条件演算子での記述 */</span></span>
<span id="cb83-12"><a href="#cb83-12" aria-hidden="true" tabindex="-1"></a>max <span class="op">=</span> <span class="op">(</span>a <span class="op">&gt;</span> b<span class="op">)</span> <span class="op">?</span> a <span class="op">:</span> b<span class="op">;</span></span>
<span id="cb83-13"><a href="#cb83-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-14"><a href="#cb83-14" aria-hidden="true" tabindex="-1"></a>printf<span class="op">(</span><span class="st">&quot;最大値: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> max<span class="op">);</span></span></code></pre></div>
<h3 id="条件式での注意点">条件式での注意点</h3>
<h4 id="代入と比較の混同-1">代入と比較の混同</h4>
<div class="sourceCode" id="cb84"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> x <span class="op">=</span> <span class="op">;</span></span>
<span id="cb84-2"><a href="#cb84-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb84-3"><a href="#cb84-3" aria-hidden="true" tabindex="-1"></a><span class="co">/* NG: 代入になってしまう */</span></span>
<span id="cb84-4"><a href="#cb84-4" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="op">(</span>x <span class="op">=</span> <span class="op">)</span> </span>
<span id="cb84-5"><a href="#cb84-5" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;常に実行されるn&quot;</span><span class="op">);</span>  <span class="co">/* x に  が代入され、常に真 */</span></span>
<span id="cb84-6"><a href="#cb84-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb84-7"><a href="#cb84-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb84-8"><a href="#cb84-8" aria-hidden="true" tabindex="-1"></a><span class="co">/* OK: 比較演算子を使用 */</span></span>
<span id="cb84-9"><a href="#cb84-9" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="op">(</span>x <span class="op">==</span> <span class="op">)</span> </span>
<span id="cb84-10"><a href="#cb84-10" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;x が  の場合のみ実行n&quot;</span><span class="op">);</span></span></code></pre></div>
<h4 id="浮動小数点数の比較">浮動小数点数の比較</h4>
<div class="sourceCode" id="cb85"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="dt">double</span> d <span class="op">=</span> <span class="op">.</span> <span class="op">+</span> <span class="op">.;</span></span>
<span id="cb85-2"><a href="#cb85-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb85-3"><a href="#cb85-3" aria-hidden="true" tabindex="-1"></a><span class="co">/* NG: 浮動小数点の誤差で期待通りにならない可能性 */</span></span>
<span id="cb85-4"><a href="#cb85-4" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="op">(</span>d <span class="op">==</span> <span class="op">.)</span> </span>
<span id="cb85-5"><a href="#cb85-5" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;等しいn&quot;</span><span class="op">);</span></span>
<span id="cb85-6"><a href="#cb85-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb85-7"><a href="#cb85-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb85-8"><a href="#cb85-8" aria-hidden="true" tabindex="-1"></a><span class="co">/* OK: 誤差を考慮した比較 */</span></span>
<span id="cb85-9"><a href="#cb85-9" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="op">(</span>d <span class="op">&gt;=</span> <span class="fl">.99999</span> <span class="op">&amp;&amp;</span> d <span class="op">&lt;=</span> <span class="op">.)</span> </span>
<span id="cb85-10"><a href="#cb85-10" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ほぼ等しいn&quot;</span><span class="op">);</span></span></code></pre></div>
<h2 id="サンプルコード-7">サンプルコード</h2>
<h3 id="if文の基本使用例">if文の基本使用例</h3>
<p>プログラムファイル: <code>examples/if_basic.c</code></p>
<p>基本的なif文、if-else文の使用方法を学習します。</p>
<h3 id="複雑な条件分岐">複雑な条件分岐</h3>
<p>プログラムファイル: <code>examples/complex_conditions.c</code></p>
<p>複数条件を組み合わせた分岐処理を学習します。</p>
<h3 id="switch文の実例">switch文の実例</h3>
<p>プログラムファイル: <code>examples/switch_demo.c</code></p>
<p>switch文を使った多分岐処理を学習します。</p>
<h3 id="コンパイルと実行-4">コンパイルと実行</h3>
<div class="sourceCode" id="cb86"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="co"># examples ディレクトリに移動</span></span>
<span id="cb86-2"><a href="#cb86-2" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> examples</span>
<span id="cb86-3"><a href="#cb86-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb86-4"><a href="#cb86-4" aria-hidden="true" tabindex="-1"></a><span class="co"># C90準拠でコンパイル</span></span>
<span id="cb86-5"><a href="#cb86-5" aria-hidden="true" tabindex="-1"></a><span class="fu">gcc</span> <span class="at">-std</span><span class="op">=</span>c90 <span class="at">-Wall</span> <span class="at">-Wextra</span> <span class="at">-pedantic</span> if_basic.c <span class="at">-o</span> if_basic</span>
<span id="cb86-6"><a href="#cb86-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb86-7"><a href="#cb86-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 実行</span></span>
<span id="cb86-8"><a href="#cb86-8" aria-hidden="true" tabindex="-1"></a><span class="ex">./if_basic</span></span></code></pre></div>
<h2 id="演習課題-4">演習課題</h2>
<h3 id="基礎問題-4">基礎問題</h3>
<p>. <strong>年齢判定プログラム</strong> -
年齢を入力して、幼児・児童・学生・成人・高齢者に分類するプログラムを作成してください</p>
<p>. <strong>電卓プログラム</strong> - 2つの数値と演算子（+, -, *,
/）を入力して計算結果を表示するプログラムをswitch文で作成してください</p>
<p>. <strong>成績判定システム</strong> -
点数を入力してA〜の成績を判定するプログラムを作成してください</p>
<h3 id="応用問題-4">応用問題</h3>
<p>. <strong>うるう年判定</strong> -
年を入力してうるう年かどうかを判定するプログラムを作成してください -
条件:
で割り切れる、ただしで割り切れる年は平年、で割り切れる年はうるう年</p>
<p>. <strong>MI計算と判定</strong> -
身長と体重を入力してMIを計算し、肥満度を判定するプログラムを作成してください</p>
<p>. <strong>三角形の判定</strong> -
2つの辺の長さを入力して、三角形として成立するか、どの種類の三角形かを判定してください</p>
<h2 id="コンパイル方法-4">コンパイル方法</h2>
<p>この章では以下のMakefileを使用してコンパイルができます：</p>
<div class="sourceCode" id="cb87"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 全ての例題をコンパイル</span></span>
<span id="cb87-2"><a href="#cb87-2" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> all</span>
<span id="cb87-3"><a href="#cb87-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb87-4"><a href="#cb87-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 特定のプログラムをコンパイル</span></span>
<span id="cb87-5"><a href="#cb87-5" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> if_basic</span>
<span id="cb87-6"><a href="#cb87-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb87-7"><a href="#cb87-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 実行</span></span>
<span id="cb87-8"><a href="#cb87-8" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> run</span>
<span id="cb87-9"><a href="#cb87-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb87-10"><a href="#cb87-10" aria-hidden="true" tabindex="-1"></a><span class="co"># クリーンアップ</span></span>
<span id="cb87-11"><a href="#cb87-11" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> clean</span></code></pre></div>
<h2 id="規格による違い-4">規格による違い</h2>
<h3 id="c90での制限事項-3">C90での制限事項</h3>
<ul>
<li>switch文の case ラベルは整数定数のみ</li>
<li>複合文内での変数宣言は先頭のみ</li>
</ul>
<h3 id="c99以降の拡張-3">C99以降の拡張</h3>
<ul>
<li>switch文でlong long型が使用可能</li>
<li>ブロック内での変数宣言位置の制限緩和</li>
</ul>
<h2 id="よくある間違い-2">よくある間違い</h2>
<h3 id="セミコロンの位置">. セミコロンの位置</h3>
<div class="sourceCode" id="cb88"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* NG: if文の後にセミコロン */</span></span>
<span id="cb88-2"><a href="#cb88-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="op">(</span>condition<span class="op">);</span></span>
<span id="cb88-3"><a href="#cb88-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb88-4"><a href="#cb88-4" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;常に実行されるn&quot;</span><span class="op">);</span>  <span class="co">/* 条件に関係なく実行 */</span></span>
<span id="cb88-5"><a href="#cb88-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb88-6"><a href="#cb88-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb88-7"><a href="#cb88-7" aria-hidden="true" tabindex="-1"></a><span class="co">/* OK: 正しい記述 */</span></span>
<span id="cb88-8"><a href="#cb88-8" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="op">(</span>condition<span class="op">)</span> </span>
<span id="cb88-9"><a href="#cb88-9" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;条件が真の場合のみ実行n&quot;</span><span class="op">);</span></span></code></pre></div>
<h3 id="switch文でのbreak忘れ">. switch文でのbreak忘れ</h3>
<div class="sourceCode" id="cb89"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* NG: break忘れでフォールスルー */</span></span>
<span id="cb89-2"><a href="#cb89-2" aria-hidden="true" tabindex="-1"></a><span class="cf">switch</span> <span class="op">(</span>vale<span class="op">)</span> </span>
<span id="cb89-3"><a href="#cb89-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> <span class="op">:</span></span>
<span id="cb89-4"><a href="#cb89-4" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;ですn&quot;</span><span class="op">);</span></span>
<span id="cb89-5"><a href="#cb89-5" aria-hidden="true" tabindex="-1"></a>        <span class="co">/* break; を忘れると次のcaseも実行される */</span></span>
<span id="cb89-6"><a href="#cb89-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> <span class="op">:</span></span>
<span id="cb89-7"><a href="#cb89-7" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;ですn&quot;</span><span class="op">);</span></span>
<span id="cb89-8"><a href="#cb89-8" aria-hidden="true" tabindex="-1"></a>        <span class="cf">break</span><span class="op">;</span></span>
<span id="cb89-9"><a href="#cb89-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-10"><a href="#cb89-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb89-11"><a href="#cb89-11" aria-hidden="true" tabindex="-1"></a><span class="co">/* OK: 適切なbreak文 */</span></span>
<span id="cb89-12"><a href="#cb89-12" aria-hidden="true" tabindex="-1"></a><span class="cf">switch</span> <span class="op">(</span>vale<span class="op">)</span> </span>
<span id="cb89-13"><a href="#cb89-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> <span class="op">:</span></span>
<span id="cb89-14"><a href="#cb89-14" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;ですn&quot;</span><span class="op">);</span></span>
<span id="cb89-15"><a href="#cb89-15" aria-hidden="true" tabindex="-1"></a>        <span class="cf">break</span><span class="op">;</span></span>
<span id="cb89-16"><a href="#cb89-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> <span class="op">:</span></span>
<span id="cb89-17"><a href="#cb89-17" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;ですn&quot;</span><span class="op">);</span></span>
<span id="cb89-18"><a href="#cb89-18" aria-hidden="true" tabindex="-1"></a>        <span class="cf">break</span><span class="op">;</span></span></code></pre></div>
<h3 id="複雑な条件式での括弧不足">. 複雑な条件式での括弧不足</h3>
<div class="sourceCode" id="cb90"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* NG: 意図しない優先順位 */</span></span>
<span id="cb90-2"><a href="#cb90-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="op">(</span>a <span class="op">==</span>  <span class="op">||</span> b <span class="op">==</span>  <span class="op">&amp;&amp;</span> c <span class="op">==</span> <span class="op">)</span> </span>
<span id="cb90-3"><a href="#cb90-3" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* &amp;&amp; が || より優先される */</span></span>
<span id="cb90-4"><a href="#cb90-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb90-5"><a href="#cb90-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb90-6"><a href="#cb90-6" aria-hidden="true" tabindex="-1"></a><span class="co">/* OK: 括弧で明示 */</span></span>
<span id="cb90-7"><a href="#cb90-7" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="op">((</span>a <span class="op">==</span> <span class="op">)</span> <span class="op">||</span> <span class="op">(</span>b <span class="op">==</span>  <span class="op">&amp;&amp;</span> c <span class="op">==</span> <span class="op">))</span> </span>
<span id="cb90-8"><a href="#cb90-8" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 意図が明確 */</span></span></code></pre></div>
<h2 id="次の章へ-4">次の章へ</h2>
<p>条件分岐を理解したら、<a
href="../control-loop/README.md">制御構造（ループ）</a>
に進んでください。</p>
<h2 id="参考資料-4">参考資料</h2>
<ul>
<li><a
href="https://ja.cppreference.com/w/c/language/if">if文詳細</a></li>
<li><a
href="https://ja.cppreference.com/w/c/language/switch">switch文詳細</a></li>
<li><a
href="https://ja.cppreference.com/w/c/language/operautor_other">条件演算子</a></li>
</ul>
<h2 id="サンプルコード-8">サンプルコード</h2>
<h3 id="conditional_operator.c">conditional_operator.c</h3>
<div class="sourceCode" id="cb91"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a><span class="co">/*</span></span>
<span id="cb91-2"><a href="#cb91-2" aria-hidden="true" tabindex="-1"></a><span class="co"> * 条件演算子（三項演算子）の使い方（C90準拠）</span></span>
<span id="cb91-3"><a href="#cb91-3" aria-hidden="true" tabindex="-1"></a><span class="co"> * </span></span>
<span id="cb91-4"><a href="#cb91-4" aria-hidden="true" tabindex="-1"></a><span class="co"> * このプログラムは、条件演算子を使った</span></span>
<span id="cb91-5"><a href="#cb91-5" aria-hidden="true" tabindex="-1"></a><span class="co"> * 簡潔な条件分岐の書き方を示します。</span></span>
<span id="cb91-6"><a href="#cb91-6" aria-hidden="true" tabindex="-1"></a><span class="co"> * 規格: C90準拠</span></span>
<span id="cb91-7"><a href="#cb91-7" aria-hidden="true" tabindex="-1"></a><span class="co"> */</span></span>
<span id="cb91-8"><a href="#cb91-8" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb91-9"><a href="#cb91-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-10"><a href="#cb91-10" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb91-11"><a href="#cb91-11" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb91-12"><a href="#cb91-12" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 変数の宣言（C90では先頭で宣言） */</span></span>
<span id="cb91-13"><a href="#cb91-13" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> a<span class="op">,</span> b<span class="op">;</span></span>
<span id="cb91-14"><a href="#cb91-14" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> max<span class="op">,</span> min<span class="op">;</span></span>
<span id="cb91-15"><a href="#cb91-15" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> age<span class="op">;</span></span>
<span id="cb91-16"><a href="#cb91-16" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> score<span class="op">;</span></span>
<span id="cb91-17"><a href="#cb91-17" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> bonus<span class="op">;</span></span>
<span id="cb91-18"><a href="#cb91-18" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> number<span class="op">;</span></span>
<span id="cb91-19"><a href="#cb91-19" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> abs_value<span class="op">;</span></span>
<span id="cb91-20"><a href="#cb91-20" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> <span class="op">*</span>result<span class="op">;</span></span>
<span id="cb91-21"><a href="#cb91-21" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> <span class="op">*</span>status<span class="op">;</span></span>
<span id="cb91-22"><a href="#cb91-22" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb91-23"><a href="#cb91-23" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 2つの数の最大値・最小値を求める */</span></span>
<span id="cb91-24"><a href="#cb91-24" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;2つの整数を入力してください: &quot;</span><span class="op">);</span></span>
<span id="cb91-25"><a href="#cb91-25" aria-hidden="true" tabindex="-1"></a>    scanf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st"> </span><span class="sc">%d</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">&amp;</span>a<span class="op">,</span> <span class="op">&amp;</span>b<span class="op">);</span></span>
<span id="cb91-26"><a href="#cb91-26" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb91-27"><a href="#cb91-27" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 条件演算子を使った最大値・最小値の判定 */</span></span>
<span id="cb91-28"><a href="#cb91-28" aria-hidden="true" tabindex="-1"></a>    max <span class="op">=</span> <span class="op">(</span>a <span class="op">&gt;</span> b<span class="op">)</span> <span class="op">?</span> a <span class="op">:</span> b<span class="op">;</span></span>
<span id="cb91-29"><a href="#cb91-29" aria-hidden="true" tabindex="-1"></a>    min <span class="op">=</span> <span class="op">(</span>a <span class="op">&lt;</span> b<span class="op">)</span> <span class="op">?</span> a <span class="op">:</span> b<span class="op">;</span></span>
<span id="cb91-30"><a href="#cb91-30" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb91-31"><a href="#cb91-31" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;最大値: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> max<span class="op">);</span></span>
<span id="cb91-32"><a href="#cb91-32" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;最小値: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> min<span class="op">);</span></span>
<span id="cb91-33"><a href="#cb91-33" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb91-34"><a href="#cb91-34" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 年齢による判定 */</span></span>
<span id="cb91-35"><a href="#cb91-35" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">年齢を入力してください: &quot;</span><span class="op">);</span></span>
<span id="cb91-36"><a href="#cb91-36" aria-hidden="true" tabindex="-1"></a>    scanf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">&amp;</span>age<span class="op">);</span></span>
<span id="cb91-37"><a href="#cb91-37" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb91-38"><a href="#cb91-38" aria-hidden="true" tabindex="-1"></a>    status <span class="op">=</span> <span class="op">(</span>age <span class="op">&gt;=</span> <span class="dv">20</span><span class="op">)</span> <span class="op">?</span> <span class="st">&quot;成人&quot;</span> <span class="op">:</span> <span class="st">&quot;未成年&quot;</span><span class="op">;</span></span>
<span id="cb91-39"><a href="#cb91-39" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;あなたは</span><span class="sc">%s</span><span class="st">です。</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> status<span class="op">);</span></span>
<span id="cb91-40"><a href="#cb91-40" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb91-41"><a href="#cb91-41" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 成績による合否判定 */</span></span>
<span id="cb91-42"><a href="#cb91-42" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">点数を入力してください (0-100): &quot;</span><span class="op">);</span></span>
<span id="cb91-43"><a href="#cb91-43" aria-hidden="true" tabindex="-1"></a>    scanf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">&amp;</span>score<span class="op">);</span></span>
<span id="cb91-44"><a href="#cb91-44" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb91-45"><a href="#cb91-45" aria-hidden="true" tabindex="-1"></a>    result <span class="op">=</span> <span class="op">(</span>score <span class="op">&gt;=</span> <span class="dv">60</span><span class="op">)</span> <span class="op">?</span> <span class="st">&quot;合格&quot;</span> <span class="op">:</span> <span class="st">&quot;不合格&quot;</span><span class="op">;</span></span>
<span id="cb91-46"><a href="#cb91-46" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;判定: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> result<span class="op">);</span></span>
<span id="cb91-47"><a href="#cb91-47" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb91-48"><a href="#cb91-48" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* ネストした条件演算子（読みやすさには注意） */</span></span>
<span id="cb91-49"><a href="#cb91-49" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;成績評価: &quot;</span><span class="op">);</span></span>
<span id="cb91-50"><a href="#cb91-50" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%c\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(</span>score <span class="op">&gt;=</span> <span class="dv">90</span><span class="op">)</span> <span class="op">?</span> <span class="ch">&#39;A&#39;</span> <span class="op">:</span></span>
<span id="cb91-51"><a href="#cb91-51" aria-hidden="true" tabindex="-1"></a>                   <span class="op">(</span>score <span class="op">&gt;=</span> <span class="dv">80</span><span class="op">)</span> <span class="op">?</span> <span class="ch">&#39;B&#39;</span> <span class="op">:</span></span>
<span id="cb91-52"><a href="#cb91-52" aria-hidden="true" tabindex="-1"></a>                   <span class="op">(</span>score <span class="op">&gt;=</span> <span class="dv">70</span><span class="op">)</span> <span class="op">?</span> <span class="ch">&#39;C&#39;</span> <span class="op">:</span></span>
<span id="cb91-53"><a href="#cb91-53" aria-hidden="true" tabindex="-1"></a>                   <span class="op">(</span>score <span class="op">&gt;=</span> <span class="dv">60</span><span class="op">)</span> <span class="op">?</span> <span class="ch">&#39;D&#39;</span> <span class="op">:</span> <span class="ch">&#39;F&#39;</span><span class="op">);</span></span>
<span id="cb91-54"><a href="#cb91-54" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb91-55"><a href="#cb91-55" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 条件演算子と通常の計算を組み合わせる */</span></span>
<span id="cb91-56"><a href="#cb91-56" aria-hidden="true" tabindex="-1"></a>    bonus <span class="op">=</span> <span class="op">(</span>score <span class="op">&gt;=</span> <span class="dv">80</span><span class="op">)</span> <span class="op">?</span> <span class="dv">10</span> <span class="op">:</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb91-57"><a href="#cb91-57" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ボーナス点: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> bonus<span class="op">);</span></span>
<span id="cb91-58"><a href="#cb91-58" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;最終得点: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> score <span class="op">+</span> bonus<span class="op">);</span></span>
<span id="cb91-59"><a href="#cb91-59" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb91-60"><a href="#cb91-60" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 絶対値の計算 */</span></span>
<span id="cb91-61"><a href="#cb91-61" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">整数を入力してください: &quot;</span><span class="op">);</span></span>
<span id="cb91-62"><a href="#cb91-62" aria-hidden="true" tabindex="-1"></a>    scanf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">&amp;</span>number<span class="op">);</span></span>
<span id="cb91-63"><a href="#cb91-63" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb91-64"><a href="#cb91-64" aria-hidden="true" tabindex="-1"></a>    abs_value <span class="op">=</span> <span class="op">(</span>number <span class="op">&gt;=</span> <span class="dv">0</span><span class="op">)</span> <span class="op">?</span> number <span class="op">:</span> <span class="op">-</span>number<span class="op">;</span></span>
<span id="cb91-65"><a href="#cb91-65" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st"> の絶対値は </span><span class="sc">%d</span><span class="st"> です。</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> number<span class="op">,</span> abs_value<span class="op">);</span></span>
<span id="cb91-66"><a href="#cb91-66" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb91-67"><a href="#cb91-67" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb91-68"><a href="#cb91-68" aria-hidden="true" tabindex="-1"></a><span class="op">}</span>```</span>
<span id="cb91-69"><a href="#cb91-69" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-70"><a href="#cb91-70" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> C99版は<span class="op">[</span>こちら<span class="op">](</span>conditional_operator_c99<span class="op">.</span>c<span class="op">)</span>を参照してください。</span>
<span id="cb91-71"><a href="#cb91-71" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-72"><a href="#cb91-72" aria-hidden="true" tabindex="-1"></a><span class="pp">#</span><span class="er">## if_basic.c</span></span>
<span id="cb91-73"><a href="#cb91-73" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-74"><a href="#cb91-74" aria-hidden="true" tabindex="-1"></a>```c</span>
<span id="cb91-75"><a href="#cb91-75" aria-hidden="true" tabindex="-1"></a><span class="co">/*</span></span>
<span id="cb91-76"><a href="#cb91-76" aria-hidden="true" tabindex="-1"></a><span class="co"> * if文の基本的な使い方（C90準拠）</span></span>
<span id="cb91-77"><a href="#cb91-77" aria-hidden="true" tabindex="-1"></a><span class="co"> * </span></span>
<span id="cb91-78"><a href="#cb91-78" aria-hidden="true" tabindex="-1"></a><span class="co"> * このプログラムは、if文、if-else文、if-else if文の</span></span>
<span id="cb91-79"><a href="#cb91-79" aria-hidden="true" tabindex="-1"></a><span class="co"> * 基本的な使い方を示します。</span></span>
<span id="cb91-80"><a href="#cb91-80" aria-hidden="true" tabindex="-1"></a><span class="co"> * 規格: C90準拠</span></span>
<span id="cb91-81"><a href="#cb91-81" aria-hidden="true" tabindex="-1"></a><span class="co"> */</span></span>
<span id="cb91-82"><a href="#cb91-82" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb91-83"><a href="#cb91-83" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-84"><a href="#cb91-84" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb91-85"><a href="#cb91-85" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb91-86"><a href="#cb91-86" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 変数の宣言（C90では先頭で宣言） */</span></span>
<span id="cb91-87"><a href="#cb91-87" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> score<span class="op">;</span></span>
<span id="cb91-88"><a href="#cb91-88" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb91-89"><a href="#cb91-89" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;点数を入力してください (0-100): &quot;</span><span class="op">);</span></span>
<span id="cb91-90"><a href="#cb91-90" aria-hidden="true" tabindex="-1"></a>    scanf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">&amp;</span>score<span class="op">);</span></span>
<span id="cb91-91"><a href="#cb91-91" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb91-92"><a href="#cb91-92" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 単純なif文 */</span></span>
<span id="cb91-93"><a href="#cb91-93" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>score <span class="op">==</span> <span class="dv">100</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb91-94"><a href="#cb91-94" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;満点です！素晴らしい！</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb91-95"><a href="#cb91-95" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb91-96"><a href="#cb91-96" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb91-97"><a href="#cb91-97" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* if-else文 */</span></span>
<span id="cb91-98"><a href="#cb91-98" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>score <span class="op">&gt;=</span> <span class="dv">60</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb91-99"><a href="#cb91-99" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;合格です</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb91-100"><a href="#cb91-100" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb91-101"><a href="#cb91-101" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;不合格です</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb91-102"><a href="#cb91-102" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb91-103"><a href="#cb91-103" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb91-104"><a href="#cb91-104" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* if-else if文による成績判定 */</span></span>
<span id="cb91-105"><a href="#cb91-105" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;成績評価: &quot;</span><span class="op">);</span></span>
<span id="cb91-106"><a href="#cb91-106" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>score <span class="op">&gt;=</span> <span class="dv">90</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb91-107"><a href="#cb91-107" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;A (優秀)</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb91-108"><a href="#cb91-108" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span> <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>score <span class="op">&gt;=</span> <span class="dv">80</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb91-109"><a href="#cb91-109" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;B (良好)</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb91-110"><a href="#cb91-110" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span> <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>score <span class="op">&gt;=</span> <span class="dv">70</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb91-111"><a href="#cb91-111" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;C (普通)</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb91-112"><a href="#cb91-112" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span> <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>score <span class="op">&gt;=</span> <span class="dv">60</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb91-113"><a href="#cb91-113" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;D (可)</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb91-114"><a href="#cb91-114" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb91-115"><a href="#cb91-115" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;F (不可)</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb91-116"><a href="#cb91-116" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb91-117"><a href="#cb91-117" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb91-118"><a href="#cb91-118" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* ネストしたif文 */</span></span>
<span id="cb91-119"><a href="#cb91-119" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>score <span class="op">&gt;=</span> <span class="dv">60</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb91-120"><a href="#cb91-120" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;おめでとうございます！&quot;</span><span class="op">);</span></span>
<span id="cb91-121"><a href="#cb91-121" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>score <span class="op">&gt;=</span> <span class="dv">80</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb91-122"><a href="#cb91-122" aria-hidden="true" tabindex="-1"></a>            printf<span class="op">(</span><span class="st">&quot;優秀な成績です！&quot;</span><span class="op">);</span></span>
<span id="cb91-123"><a href="#cb91-123" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb91-124"><a href="#cb91-124" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb91-125"><a href="#cb91-125" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb91-126"><a href="#cb91-126" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb91-127"><a href="#cb91-127" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb91-128"><a href="#cb91-128" aria-hidden="true" tabindex="-1"></a><span class="op">}</span>```</span>
<span id="cb91-129"><a href="#cb91-129" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-130"><a href="#cb91-130" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> C99版は<span class="op">[</span>こちら<span class="op">](</span>if_basic_c99<span class="op">.</span>c<span class="op">)</span>を参照してください。</span>
<span id="cb91-131"><a href="#cb91-131" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-132"><a href="#cb91-132" aria-hidden="true" tabindex="-1"></a><span class="pp">#</span><span class="er">## switch_basic.c</span></span>
<span id="cb91-133"><a href="#cb91-133" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-134"><a href="#cb91-134" aria-hidden="true" tabindex="-1"></a>```c</span>
<span id="cb91-135"><a href="#cb91-135" aria-hidden="true" tabindex="-1"></a><span class="co">/*</span></span>
<span id="cb91-136"><a href="#cb91-136" aria-hidden="true" tabindex="-1"></a><span class="co"> * switch文の基本的な使い方（C90準拠）</span></span>
<span id="cb91-137"><a href="#cb91-137" aria-hidden="true" tabindex="-1"></a><span class="co"> * </span></span>
<span id="cb91-138"><a href="#cb91-138" aria-hidden="true" tabindex="-1"></a><span class="co"> * このプログラムは、switch文による多分岐処理の</span></span>
<span id="cb91-139"><a href="#cb91-139" aria-hidden="true" tabindex="-1"></a><span class="co"> * 基本的な使い方を示します。</span></span>
<span id="cb91-140"><a href="#cb91-140" aria-hidden="true" tabindex="-1"></a><span class="co"> * 規格: C90準拠</span></span>
<span id="cb91-141"><a href="#cb91-141" aria-hidden="true" tabindex="-1"></a><span class="co"> */</span></span>
<span id="cb91-142"><a href="#cb91-142" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb91-143"><a href="#cb91-143" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-144"><a href="#cb91-144" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb91-145"><a href="#cb91-145" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb91-146"><a href="#cb91-146" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 変数の宣言（C90では先頭で宣言） */</span></span>
<span id="cb91-147"><a href="#cb91-147" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> menu_choice<span class="op">;</span></span>
<span id="cb91-148"><a href="#cb91-148" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> grade<span class="op">;</span></span>
<span id="cb91-149"><a href="#cb91-149" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> month<span class="op">;</span></span>
<span id="cb91-150"><a href="#cb91-150" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb91-151"><a href="#cb91-151" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* メニュー選択の例 */</span></span>
<span id="cb91-152"><a href="#cb91-152" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== レストランメニュー ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb91-153"><a href="#cb91-153" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;1. ハンバーガー (500円)</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb91-154"><a href="#cb91-154" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;2. ピザ (800円)</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb91-155"><a href="#cb91-155" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;3. パスタ (700円)</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb91-156"><a href="#cb91-156" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;4. サラダ (400円)</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb91-157"><a href="#cb91-157" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;選択してください (1-4): &quot;</span><span class="op">);</span></span>
<span id="cb91-158"><a href="#cb91-158" aria-hidden="true" tabindex="-1"></a>    scanf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">&amp;</span>menu_choice<span class="op">);</span></span>
<span id="cb91-159"><a href="#cb91-159" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb91-160"><a href="#cb91-160" aria-hidden="true" tabindex="-1"></a>    <span class="cf">switch</span> <span class="op">(</span>menu_choice<span class="op">)</span> <span class="op">{</span></span>
<span id="cb91-161"><a href="#cb91-161" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> <span class="dv">1</span><span class="op">:</span></span>
<span id="cb91-162"><a href="#cb91-162" aria-hidden="true" tabindex="-1"></a>            printf<span class="op">(</span><span class="st">&quot;ハンバーガーを注文しました。500円です。</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb91-163"><a href="#cb91-163" aria-hidden="true" tabindex="-1"></a>            <span class="cf">break</span><span class="op">;</span></span>
<span id="cb91-164"><a href="#cb91-164" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> <span class="dv">2</span><span class="op">:</span></span>
<span id="cb91-165"><a href="#cb91-165" aria-hidden="true" tabindex="-1"></a>            printf<span class="op">(</span><span class="st">&quot;ピザを注文しました。800円です。</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb91-166"><a href="#cb91-166" aria-hidden="true" tabindex="-1"></a>            <span class="cf">break</span><span class="op">;</span></span>
<span id="cb91-167"><a href="#cb91-167" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> <span class="dv">3</span><span class="op">:</span></span>
<span id="cb91-168"><a href="#cb91-168" aria-hidden="true" tabindex="-1"></a>            printf<span class="op">(</span><span class="st">&quot;パスタを注文しました。700円です。</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb91-169"><a href="#cb91-169" aria-hidden="true" tabindex="-1"></a>            <span class="cf">break</span><span class="op">;</span></span>
<span id="cb91-170"><a href="#cb91-170" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> <span class="dv">4</span><span class="op">:</span></span>
<span id="cb91-171"><a href="#cb91-171" aria-hidden="true" tabindex="-1"></a>            printf<span class="op">(</span><span class="st">&quot;サラダを注文しました。400円です。</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb91-172"><a href="#cb91-172" aria-hidden="true" tabindex="-1"></a>            <span class="cf">break</span><span class="op">;</span></span>
<span id="cb91-173"><a href="#cb91-173" aria-hidden="true" tabindex="-1"></a>        <span class="cf">default</span><span class="op">:</span></span>
<span id="cb91-174"><a href="#cb91-174" aria-hidden="true" tabindex="-1"></a>            printf<span class="op">(</span><span class="st">&quot;無効な選択です。</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb91-175"><a href="#cb91-175" aria-hidden="true" tabindex="-1"></a>            <span class="cf">break</span><span class="op">;</span></span>
<span id="cb91-176"><a href="#cb91-176" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb91-177"><a href="#cb91-177" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb91-178"><a href="#cb91-178" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 成績評価の例 */</span></span>
<span id="cb91-179"><a href="#cb91-179" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">成績を入力してください (A-F): &quot;</span><span class="op">);</span></span>
<span id="cb91-180"><a href="#cb91-180" aria-hidden="true" tabindex="-1"></a>    scanf<span class="op">(</span><span class="st">&quot; </span><span class="sc">%c</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">&amp;</span>grade<span class="op">);</span>  <span class="co">/* 空白文字を読み飛ばすため、%cの前に空白を入れる */</span></span>
<span id="cb91-181"><a href="#cb91-181" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb91-182"><a href="#cb91-182" aria-hidden="true" tabindex="-1"></a>    <span class="cf">switch</span> <span class="op">(</span>grade<span class="op">)</span> <span class="op">{</span></span>
<span id="cb91-183"><a href="#cb91-183" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> <span class="ch">&#39;A&#39;</span><span class="op">:</span></span>
<span id="cb91-184"><a href="#cb91-184" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> <span class="ch">&#39;a&#39;</span><span class="op">:</span></span>
<span id="cb91-185"><a href="#cb91-185" aria-hidden="true" tabindex="-1"></a>            printf<span class="op">(</span><span class="st">&quot;優秀: 90点以上</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb91-186"><a href="#cb91-186" aria-hidden="true" tabindex="-1"></a>            <span class="cf">break</span><span class="op">;</span></span>
<span id="cb91-187"><a href="#cb91-187" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> <span class="ch">&#39;B&#39;</span><span class="op">:</span></span>
<span id="cb91-188"><a href="#cb91-188" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> <span class="ch">&#39;b&#39;</span><span class="op">:</span></span>
<span id="cb91-189"><a href="#cb91-189" aria-hidden="true" tabindex="-1"></a>            printf<span class="op">(</span><span class="st">&quot;良好: 80-89点</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb91-190"><a href="#cb91-190" aria-hidden="true" tabindex="-1"></a>            <span class="cf">break</span><span class="op">;</span></span>
<span id="cb91-191"><a href="#cb91-191" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> <span class="ch">&#39;C&#39;</span><span class="op">:</span></span>
<span id="cb91-192"><a href="#cb91-192" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> <span class="ch">&#39;c&#39;</span><span class="op">:</span></span>
<span id="cb91-193"><a href="#cb91-193" aria-hidden="true" tabindex="-1"></a>            printf<span class="op">(</span><span class="st">&quot;普通: 70-79点</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb91-194"><a href="#cb91-194" aria-hidden="true" tabindex="-1"></a>            <span class="cf">break</span><span class="op">;</span></span>
<span id="cb91-195"><a href="#cb91-195" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> <span class="ch">&#39;D&#39;</span><span class="op">:</span></span>
<span id="cb91-196"><a href="#cb91-196" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> <span class="ch">&#39;d&#39;</span><span class="op">:</span></span>
<span id="cb91-197"><a href="#cb91-197" aria-hidden="true" tabindex="-1"></a>            printf<span class="op">(</span><span class="st">&quot;可: 60-69点</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb91-198"><a href="#cb91-198" aria-hidden="true" tabindex="-1"></a>            <span class="cf">break</span><span class="op">;</span></span>
<span id="cb91-199"><a href="#cb91-199" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> <span class="ch">&#39;F&#39;</span><span class="op">:</span></span>
<span id="cb91-200"><a href="#cb91-200" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> <span class="ch">&#39;f&#39;</span><span class="op">:</span></span>
<span id="cb91-201"><a href="#cb91-201" aria-hidden="true" tabindex="-1"></a>            printf<span class="op">(</span><span class="st">&quot;不可: 60点未満</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb91-202"><a href="#cb91-202" aria-hidden="true" tabindex="-1"></a>            <span class="cf">break</span><span class="op">;</span></span>
<span id="cb91-203"><a href="#cb91-203" aria-hidden="true" tabindex="-1"></a>        <span class="cf">default</span><span class="op">:</span></span>
<span id="cb91-204"><a href="#cb91-204" aria-hidden="true" tabindex="-1"></a>            printf<span class="op">(</span><span class="st">&quot;無効な成績です。</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb91-205"><a href="#cb91-205" aria-hidden="true" tabindex="-1"></a>            <span class="cf">break</span><span class="op">;</span></span>
<span id="cb91-206"><a href="#cb91-206" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb91-207"><a href="#cb91-207" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb91-208"><a href="#cb91-208" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 月から季節を判定する例（フォールスルーの活用） */</span></span>
<span id="cb91-209"><a href="#cb91-209" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">月を入力してください (1-12): &quot;</span><span class="op">);</span></span>
<span id="cb91-210"><a href="#cb91-210" aria-hidden="true" tabindex="-1"></a>    scanf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">&amp;</span>month<span class="op">);</span></span>
<span id="cb91-211"><a href="#cb91-211" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb91-212"><a href="#cb91-212" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;季節: &quot;</span><span class="op">);</span></span>
<span id="cb91-213"><a href="#cb91-213" aria-hidden="true" tabindex="-1"></a>    <span class="cf">switch</span> <span class="op">(</span>month<span class="op">)</span> <span class="op">{</span></span>
<span id="cb91-214"><a href="#cb91-214" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> <span class="dv">12</span><span class="op">:</span></span>
<span id="cb91-215"><a href="#cb91-215" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> <span class="dv">1</span><span class="op">:</span></span>
<span id="cb91-216"><a href="#cb91-216" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> <span class="dv">2</span><span class="op">:</span></span>
<span id="cb91-217"><a href="#cb91-217" aria-hidden="true" tabindex="-1"></a>            printf<span class="op">(</span><span class="st">&quot;冬</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb91-218"><a href="#cb91-218" aria-hidden="true" tabindex="-1"></a>            <span class="cf">break</span><span class="op">;</span></span>
<span id="cb91-219"><a href="#cb91-219" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> <span class="dv">3</span><span class="op">:</span></span>
<span id="cb91-220"><a href="#cb91-220" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> <span class="dv">4</span><span class="op">:</span></span>
<span id="cb91-221"><a href="#cb91-221" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> <span class="dv">5</span><span class="op">:</span></span>
<span id="cb91-222"><a href="#cb91-222" aria-hidden="true" tabindex="-1"></a>            printf<span class="op">(</span><span class="st">&quot;春</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb91-223"><a href="#cb91-223" aria-hidden="true" tabindex="-1"></a>            <span class="cf">break</span><span class="op">;</span></span>
<span id="cb91-224"><a href="#cb91-224" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> <span class="dv">6</span><span class="op">:</span></span>
<span id="cb91-225"><a href="#cb91-225" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> <span class="dv">7</span><span class="op">:</span></span>
<span id="cb91-226"><a href="#cb91-226" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> <span class="dv">8</span><span class="op">:</span></span>
<span id="cb91-227"><a href="#cb91-227" aria-hidden="true" tabindex="-1"></a>            printf<span class="op">(</span><span class="st">&quot;夏</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb91-228"><a href="#cb91-228" aria-hidden="true" tabindex="-1"></a>            <span class="cf">break</span><span class="op">;</span></span>
<span id="cb91-229"><a href="#cb91-229" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> <span class="dv">9</span><span class="op">:</span></span>
<span id="cb91-230"><a href="#cb91-230" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> <span class="dv">10</span><span class="op">:</span></span>
<span id="cb91-231"><a href="#cb91-231" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> <span class="dv">11</span><span class="op">:</span></span>
<span id="cb91-232"><a href="#cb91-232" aria-hidden="true" tabindex="-1"></a>            printf<span class="op">(</span><span class="st">&quot;秋</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb91-233"><a href="#cb91-233" aria-hidden="true" tabindex="-1"></a>            <span class="cf">break</span><span class="op">;</span></span>
<span id="cb91-234"><a href="#cb91-234" aria-hidden="true" tabindex="-1"></a>        <span class="cf">default</span><span class="op">:</span></span>
<span id="cb91-235"><a href="#cb91-235" aria-hidden="true" tabindex="-1"></a>            printf<span class="op">(</span><span class="st">&quot;無効な月です</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb91-236"><a href="#cb91-236" aria-hidden="true" tabindex="-1"></a>            <span class="cf">break</span><span class="op">;</span></span>
<span id="cb91-237"><a href="#cb91-237" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb91-238"><a href="#cb91-238" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb91-239"><a href="#cb91-239" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb91-240"><a href="#cb91-240" aria-hidden="true" tabindex="-1"></a><span class="op">}</span>```</span>
<span id="cb91-241"><a href="#cb91-241" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-242"><a href="#cb91-242" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> C99版は<span class="op">[</span>こちら<span class="op">](</span>switch_basic_c99<span class="op">.</span>c<span class="op">)</span>を参照してください。</span>
<span id="cb91-243"><a href="#cb91-243" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-244"><a href="#cb91-244" aria-hidden="true" tabindex="-1"></a><span class="op">---</span></span>
<span id="cb91-245"><a href="#cb91-245" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-246"><a href="#cb91-246" aria-hidden="true" tabindex="-1"></a><span class="pp"># </span><span class="er">第6章: 繰り返し処理</span></span>
<span id="cb91-247"><a href="#cb91-247" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-248"><a href="#cb91-248" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-249"><a href="#cb91-249" aria-hidden="true" tabindex="-1"></a><span class="pp">#</span><span class="er">#  対応C規格</span></span>
<span id="cb91-250"><a href="#cb91-250" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> <span class="op">**</span>主要対象<span class="op">:**</span> C90</span>
<span id="cb91-251"><a href="#cb91-251" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> <span class="op">**</span>学習内容<span class="op">:**</span> for文、while文、do<span class="op">-</span>while文、break文、continue文、ネストしたループ</span>
<span id="cb91-252"><a href="#cb91-252" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-253"><a href="#cb91-253" aria-hidden="true" tabindex="-1"></a><span class="pp">#</span><span class="er">#  学習目標</span></span>
<span id="cb91-254"><a href="#cb91-254" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-255"><a href="#cb91-255" aria-hidden="true" tabindex="-1"></a>この章を完了すると、以下のことができるようになります：</span>
<span id="cb91-256"><a href="#cb91-256" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-257"><a href="#cb91-257" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> for文を使った繰り返し処理ができる</span>
<span id="cb91-258"><a href="#cb91-258" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> while文とdo<span class="op">-</span>while文の違いを理解する</span>
<span id="cb91-259"><a href="#cb91-259" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> break文とcontinue文を適切に使える</span>
<span id="cb91-260"><a href="#cb91-260" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> ネストしたループを理解して活用できる</span>
<span id="cb91-261"><a href="#cb91-261" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> ループを使った実践的なプログラムを作成できる</span>
<span id="cb91-262"><a href="#cb91-262" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-263"><a href="#cb91-263" aria-hidden="true" tabindex="-1"></a><span class="pp">#</span><span class="er">#  理論解説</span></span>
<span id="cb91-264"><a href="#cb91-264" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-265"><a href="#cb91-265" aria-hidden="true" tabindex="-1"></a><span class="pp">#</span><span class="er">## for文 </span></span>
<span id="cb91-266"><a href="#cb91-266" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-267"><a href="#cb91-267" aria-hidden="true" tabindex="-1"></a>最も一般的なループ文で、初期化・条件・更新を実行で記述できます。</span>
<span id="cb91-268"><a href="#cb91-268" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-269"><a href="#cb91-269" aria-hidden="true" tabindex="-1"></a><span class="pp">#</span><span class="er">### 基本構文</span></span>
<span id="cb91-270"><a href="#cb91-270" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-271"><a href="#cb91-271" aria-hidden="true" tabindex="-1"></a>```c</span>
<span id="cb91-272"><a href="#cb91-272" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> <span class="op">(</span>初期化<span class="op">;</span> 条件式<span class="op">;</span> 更新式<span class="op">)</span> </span>
<span id="cb91-273"><a href="#cb91-273" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 繰り返し実行される文 */</span></span></code></pre></div>
<h4 id="基本的な使用例">基本的な使用例</h4>
<div class="sourceCode" id="cb92"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb92-2"><a href="#cb92-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-3"><a href="#cb92-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb92-4"><a href="#cb92-4" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb92-5"><a href="#cb92-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-6"><a href="#cb92-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb92-7"><a href="#cb92-7" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb92-8"><a href="#cb92-8" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 1から10まで出力 */</span></span>
<span id="cb92-9"><a href="#cb92-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&lt;=</span> <span class="dv">10</span><span class="op">;</span> i<span class="op">++)</span> </span>
<span id="cb92-10"><a href="#cb92-10" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st"> &quot;</span><span class="op">,</span> i<span class="op">);</span></span>
<span id="cb92-11"><a href="#cb92-11" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb92-12"><a href="#cb92-12" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb92-13"><a href="#cb92-13" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb92-14"><a href="#cb92-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span></code></pre></div>
<h4 id="for文の詳細動作">for文の詳細動作</h4>
<div class="sourceCode" id="cb93"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="op">;</span> i <span class="op">&lt;</span> <span class="op">;</span> i<span class="op">++)</span> </span>
<span id="cb93-2"><a href="#cb93-2" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;i = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> i<span class="op">);</span></span>
<span id="cb93-3"><a href="#cb93-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb93-4"><a href="#cb93-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb93-5"><a href="#cb93-5" aria-hidden="true" tabindex="-1"></a><span class="co">/* 上記は以下と同等 */</span></span>
<span id="cb93-6"><a href="#cb93-6" aria-hidden="true" tabindex="-1"></a>i <span class="op">=</span> <span class="op">;</span>              <span class="co">/* 初期化（1回のみ実行） */</span></span>
<span id="cb93-7"><a href="#cb93-7" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span> <span class="op">(</span>i <span class="op">&lt;</span> <span class="op">)</span>      <span class="co">/* 条件チェック */</span></span>
<span id="cb93-8"><a href="#cb93-8" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;i = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> i<span class="op">);</span>  <span class="co">/* ループ本体 */</span></span>
<span id="cb93-9"><a href="#cb93-9" aria-hidden="true" tabindex="-1"></a>    i<span class="op">++;</span>            <span class="co">/* 更新式 */</span></span></code></pre></div>
<h4 id="さまざまなfor文のパターン">さまざまなfor文のパターン</h4>
<div class="sourceCode" id="cb94"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* 逆順ループ */</span></span>
<span id="cb94-2"><a href="#cb94-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="op">;</span> i <span class="op">&gt;=</span> <span class="op">;</span> i<span class="op">--)</span> </span>
<span id="cb94-3"><a href="#cb94-3" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st"> &quot;</span><span class="op">,</span> i<span class="op">);</span></span>
<span id="cb94-4"><a href="#cb94-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-5"><a href="#cb94-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-6"><a href="#cb94-6" aria-hidden="true" tabindex="-1"></a><span class="co">/* 2つず2つ増加 */</span></span>
<span id="cb94-7"><a href="#cb94-7" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="op">;</span> i <span class="op">&lt;=</span> <span class="op">;</span> i <span class="op">+=</span> <span class="op">)</span> </span>
<span id="cb94-8"><a href="#cb94-8" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st"> &quot;</span><span class="op">,</span> i<span class="op">);</span></span>
<span id="cb94-9"><a href="#cb94-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-10"><a href="#cb94-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-11"><a href="#cb94-11" aria-hidden="true" tabindex="-1"></a><span class="co">/* 複数変数の制御 */</span></span>
<span id="cb94-12"><a href="#cb94-12" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="op">,</span> j <span class="op">=</span> <span class="op">;</span> i <span class="op">&lt;</span> j<span class="op">;</span> i<span class="op">++,</span> j<span class="op">--)</span> </span>
<span id="cb94-13"><a href="#cb94-13" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;i=</span><span class="sc">%d</span><span class="st">, j=</span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> i<span class="op">,</span> j<span class="op">);</span></span></code></pre></div>
<h3 id="while文">while文</h3>
<p>条件が真である間、繰り返し処理を実行します。</p>
<h4 id="基本構文-4">基本構文</h4>
<div class="sourceCode" id="cb95"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span> <span class="op">(</span>条件式<span class="op">)</span> </span>
<span id="cb95-2"><a href="#cb95-2" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 繰り返し実行される文 */</span></span></code></pre></div>
<h4 id="while文の使用例">while文の使用例</h4>
<div class="sourceCode" id="cb96"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb96-2"><a href="#cb96-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-3"><a href="#cb96-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb96-4"><a href="#cb96-4" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb96-5"><a href="#cb96-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-6"><a href="#cb96-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> count <span class="op">=</span> <span class="op">;</span></span>
<span id="cb96-7"><a href="#cb96-7" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb96-8"><a href="#cb96-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>count <span class="op">&lt;=</span> <span class="op">)</span> </span>
<span id="cb96-9"><a href="#cb96-9" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;count = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> count<span class="op">);</span></span>
<span id="cb96-10"><a href="#cb96-10" aria-hidden="true" tabindex="-1"></a>        count<span class="op">++;</span></span>
<span id="cb96-11"><a href="#cb96-11" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb96-12"><a href="#cb96-12" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb96-13"><a href="#cb96-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">;</span></span></code></pre></div>
<h4 id="while文の実践例">while文の実践例</h4>
<div class="sourceCode" id="cb97"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* ユーザー入力の処理 */</span></span>
<span id="cb97-2"><a href="#cb97-2" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> number<span class="op">;</span></span>
<span id="cb97-3"><a href="#cb97-3" aria-hidden="true" tabindex="-1"></a>printf<span class="op">(</span><span class="st">&quot;正の数を入力してください（で終了）: &quot;</span><span class="op">);</span></span>
<span id="cb97-4"><a href="#cb97-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-5"><a href="#cb97-5" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span> <span class="op">(</span>scanf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">&amp;</span>number<span class="op">)</span> <span class="op">==</span>  <span class="op">&amp;&amp;</span> number <span class="op">&gt;</span> <span class="op">)</span> </span>
<span id="cb97-6"><a href="#cb97-6" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;入力された数: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> number<span class="op">);</span></span>
<span id="cb97-7"><a href="#cb97-7" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;次の数を入力してください（で終了）: &quot;</span><span class="op">);</span></span>
<span id="cb97-8"><a href="#cb97-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-9"><a href="#cb97-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-10"><a href="#cb97-10" aria-hidden="true" tabindex="-1"></a>printf<span class="op">(</span><span class="st">&quot;プログラムを終了します。n&quot;</span><span class="op">);</span></span></code></pre></div>
<h3 id="do-while文">do-while文</h3>
<p>最低1回は実行され、その後条件をチェックするループです。</p>
<h4 id="基本構文-5">基本構文</h4>
<div class="sourceCode" id="cb98"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a><span class="cf">do</span> </span>
<span id="cb98-2"><a href="#cb98-2" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 最低1回は実行される文 */</span></span>
<span id="cb98-3"><a href="#cb98-3" aria-hidden="true" tabindex="-1"></a> <span class="cf">while</span> <span class="op">(</span>条件式<span class="op">);</span></span></code></pre></div>
<h4 id="do-while文の使用例">do-while文の使用例</h4>
<div class="sourceCode" id="cb99"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb99-2"><a href="#cb99-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-3"><a href="#cb99-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb99-4"><a href="#cb99-4" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb99-5"><a href="#cb99-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-6"><a href="#cb99-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> choice<span class="op">;</span></span>
<span id="cb99-7"><a href="#cb99-7" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb99-8"><a href="#cb99-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">do</span> </span>
<span id="cb99-9"><a href="#cb99-9" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;nメニュー:n&quot;</span><span class="op">);</span></span>
<span id="cb99-10"><a href="#cb99-10" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;. オプションn&quot;</span><span class="op">);</span></span>
<span id="cb99-11"><a href="#cb99-11" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;. オプションn&quot;</span><span class="op">);</span></span>
<span id="cb99-12"><a href="#cb99-12" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;. 終了n&quot;</span><span class="op">);</span></span>
<span id="cb99-13"><a href="#cb99-13" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;選択してください: &quot;</span><span class="op">);</span></span>
<span id="cb99-14"><a href="#cb99-14" aria-hidden="true" tabindex="-1"></a>        scanf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">&amp;</span>choice<span class="op">);</span></span>
<span id="cb99-15"><a href="#cb99-15" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb99-16"><a href="#cb99-16" aria-hidden="true" tabindex="-1"></a>        <span class="cf">switch</span> <span class="op">(</span>choice<span class="op">)</span> </span>
<span id="cb99-17"><a href="#cb99-17" aria-hidden="true" tabindex="-1"></a>            <span class="cf">case</span> <span class="op">:</span></span>
<span id="cb99-18"><a href="#cb99-18" aria-hidden="true" tabindex="-1"></a>                printf<span class="op">(</span><span class="st">&quot;オプションが選択されましたn&quot;</span><span class="op">);</span></span>
<span id="cb99-19"><a href="#cb99-19" aria-hidden="true" tabindex="-1"></a>                <span class="cf">break</span><span class="op">;</span></span>
<span id="cb99-20"><a href="#cb99-20" aria-hidden="true" tabindex="-1"></a>            <span class="cf">case</span> <span class="op">:</span></span>
<span id="cb99-21"><a href="#cb99-21" aria-hidden="true" tabindex="-1"></a>                printf<span class="op">(</span><span class="st">&quot;オプションが選択されましたn&quot;</span><span class="op">);</span></span>
<span id="cb99-22"><a href="#cb99-22" aria-hidden="true" tabindex="-1"></a>                <span class="cf">break</span><span class="op">;</span></span>
<span id="cb99-23"><a href="#cb99-23" aria-hidden="true" tabindex="-1"></a>            <span class="cf">case</span> <span class="op">:</span></span>
<span id="cb99-24"><a href="#cb99-24" aria-hidden="true" tabindex="-1"></a>                printf<span class="op">(</span><span class="st">&quot;プログラムを終了しますn&quot;</span><span class="op">);</span></span>
<span id="cb99-25"><a href="#cb99-25" aria-hidden="true" tabindex="-1"></a>                <span class="cf">break</span><span class="op">;</span></span>
<span id="cb99-26"><a href="#cb99-26" aria-hidden="true" tabindex="-1"></a>            <span class="cf">default</span><span class="op">:</span></span>
<span id="cb99-27"><a href="#cb99-27" aria-hidden="true" tabindex="-1"></a>                printf<span class="op">(</span><span class="st">&quot;無効な選択ですn&quot;</span><span class="op">);</span></span>
<span id="cb99-28"><a href="#cb99-28" aria-hidden="true" tabindex="-1"></a>                <span class="cf">break</span><span class="op">;</span></span>
<span id="cb99-29"><a href="#cb99-29" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb99-30"><a href="#cb99-30" aria-hidden="true" tabindex="-1"></a>     <span class="cf">while</span> <span class="op">(</span>choice <span class="op">!=</span> <span class="op">);</span></span>
<span id="cb99-31"><a href="#cb99-31" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb99-32"><a href="#cb99-32" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">;</span></span></code></pre></div>
<h3 id="break文とcontinue文">break文とcontinue文 ⏭</h3>
<p>ループの流れを制御する特別な文です。</p>
<h4 id="break文">break文</h4>
<p>ループを強制的に終了します。</p>
<div class="sourceCode" id="cb100"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb100-2"><a href="#cb100-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-3"><a href="#cb100-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb100-4"><a href="#cb100-4" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb100-5"><a href="#cb100-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-6"><a href="#cb100-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb100-7"><a href="#cb100-7" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb100-8"><a href="#cb100-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="op">;</span> i <span class="op">&lt;=</span> <span class="op">;</span> i<span class="op">++)</span> </span>
<span id="cb100-9"><a href="#cb100-9" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>i <span class="op">==</span> <span class="op">)</span> </span>
<span id="cb100-10"><a href="#cb100-10" aria-hidden="true" tabindex="-1"></a>            <span class="cf">break</span><span class="op">;</span>  <span class="co">/* i が  のときループを抜ける */</span></span>
<span id="cb100-11"><a href="#cb100-11" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb100-12"><a href="#cb100-12" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st"> &quot;</span><span class="op">,</span> i<span class="op">);</span></span>
<span id="cb100-13"><a href="#cb100-13" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb100-14"><a href="#cb100-14" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;nループを抜けましたn&quot;</span><span class="op">);</span></span>
<span id="cb100-15"><a href="#cb100-15" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb100-16"><a href="#cb100-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">;</span></span>
<span id="cb100-17"><a href="#cb100-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb100-18"><a href="#cb100-18" aria-hidden="true" tabindex="-1"></a><span class="co">/* 出力:      */</span></span></code></pre></div>
<h4 id="continue文">continue文</h4>
<p>現在の繰り返しをスキップして、次の繰り返しに進みます。</p>
<div class="sourceCode" id="cb101"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb101-2"><a href="#cb101-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb101-3"><a href="#cb101-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb101-4"><a href="#cb101-4" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb101-5"><a href="#cb101-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb101-6"><a href="#cb101-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb101-7"><a href="#cb101-7" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb101-8"><a href="#cb101-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="op">;</span> i <span class="op">&lt;=</span> <span class="op">;</span> i<span class="op">++)</span> </span>
<span id="cb101-9"><a href="#cb101-9" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>i <span class="op">%</span>  <span class="op">==</span> <span class="op">)</span> </span>
<span id="cb101-10"><a href="#cb101-10" aria-hidden="true" tabindex="-1"></a>            <span class="cf">continue</span><span class="op">;</span>  <span class="co">/* 偶数の場合はスキップ */</span></span>
<span id="cb101-11"><a href="#cb101-11" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb101-12"><a href="#cb101-12" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st"> &quot;</span><span class="op">,</span> i<span class="op">);</span></span>
<span id="cb101-13"><a href="#cb101-13" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb101-14"><a href="#cb101-14" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;n&quot;</span><span class="op">);</span></span>
<span id="cb101-15"><a href="#cb101-15" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb101-16"><a href="#cb101-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">;</span></span>
<span id="cb101-17"><a href="#cb101-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb101-18"><a href="#cb101-18" aria-hidden="true" tabindex="-1"></a><span class="co">/* 出力:     9 */</span></span></code></pre></div>
<h3 id="ネストしたループ">ネストしたループ</h3>
<p>ループの中にさらにループを含む構造です。</p>
<h4 id="二重ループの例">二重ループの例</h4>
<div class="sourceCode" id="cb102"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb102-1"><a href="#cb102-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb102-2"><a href="#cb102-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-3"><a href="#cb102-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb102-4"><a href="#cb102-4" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb102-5"><a href="#cb102-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb102-6"><a href="#cb102-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">,</span> j<span class="op">;</span></span>
<span id="cb102-7"><a href="#cb102-7" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb102-8"><a href="#cb102-8" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 九九表の作成 */</span></span>
<span id="cb102-9"><a href="#cb102-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="op">;</span> i <span class="op">&lt;=</span> <span class="dv">9</span><span class="op">;</span> i<span class="op">++)</span> </span>
<span id="cb102-10"><a href="#cb102-10" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span>j <span class="op">=</span> <span class="op">;</span> j <span class="op">&lt;=</span> <span class="dv">9</span><span class="op">;</span> j<span class="op">++)</span> </span>
<span id="cb102-11"><a href="#cb102-11" aria-hidden="true" tabindex="-1"></a>            printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st"> &quot;</span><span class="op">,</span> i <span class="op">*</span> j<span class="op">);</span></span>
<span id="cb102-12"><a href="#cb102-12" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb102-13"><a href="#cb102-13" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;n&quot;</span><span class="op">);</span></span>
<span id="cb102-14"><a href="#cb102-14" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb102-15"><a href="#cb102-15" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb102-16"><a href="#cb102-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">;</span></span></code></pre></div>
<h4 id="三角形パターンの出力">三角形パターンの出力</h4>
<div class="sourceCode" id="cb103"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb103-2"><a href="#cb103-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb103-3"><a href="#cb103-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb103-4"><a href="#cb103-4" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb103-5"><a href="#cb103-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb103-6"><a href="#cb103-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">,</span> j<span class="op">;</span></span>
<span id="cb103-7"><a href="#cb103-7" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb103-8"><a href="#cb103-8" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 星印の三角形 */</span></span>
<span id="cb103-9"><a href="#cb103-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="op">;</span> i <span class="op">&lt;=</span> <span class="op">;</span> i<span class="op">++)</span> </span>
<span id="cb103-10"><a href="#cb103-10" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span>j <span class="op">=</span> <span class="op">;</span> j <span class="op">&lt;=</span> i<span class="op">;</span> j<span class="op">++)</span> </span>
<span id="cb103-11"><a href="#cb103-11" aria-hidden="true" tabindex="-1"></a>            printf<span class="op">(</span><span class="st">&quot;* &quot;</span><span class="op">);</span></span>
<span id="cb103-12"><a href="#cb103-12" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb103-13"><a href="#cb103-13" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;n&quot;</span><span class="op">);</span></span>
<span id="cb103-14"><a href="#cb103-14" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb103-15"><a href="#cb103-15" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb103-16"><a href="#cb103-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">;</span></span>
<span id="cb103-17"><a href="#cb103-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb103-18"><a href="#cb103-18" aria-hidden="true" tabindex="-1"></a><span class="co">/*</span></span>
<span id="cb103-19"><a href="#cb103-19" aria-hidden="true" tabindex="-1"></a><span class="co">出力:</span></span>
<span id="cb103-20"><a href="#cb103-20" aria-hidden="true" tabindex="-1"></a><span class="co">* </span></span>
<span id="cb103-21"><a href="#cb103-21" aria-hidden="true" tabindex="-1"></a><span class="co">* * </span></span>
<span id="cb103-22"><a href="#cb103-22" aria-hidden="true" tabindex="-1"></a><span class="co">* * * </span></span>
<span id="cb103-23"><a href="#cb103-23" aria-hidden="true" tabindex="-1"></a><span class="co">* * * * </span></span>
<span id="cb103-24"><a href="#cb103-24" aria-hidden="true" tabindex="-1"></a><span class="co">* * * * * </span></span>
<span id="cb103-25"><a href="#cb103-25" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span></span></code></pre></div>
<h3
id="ループでのbreakcontinueの応用">ループでのbreak・continueの応用</h3>
<h4 id="ネストしたループでのbreak">ネストしたループでのbreak</h4>
<div class="sourceCode" id="cb104"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb104-2"><a href="#cb104-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-3"><a href="#cb104-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb104-4"><a href="#cb104-4" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb104-5"><a href="#cb104-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb104-6"><a href="#cb104-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">,</span> j<span class="op">;</span></span>
<span id="cb104-7"><a href="#cb104-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> fond <span class="op">=</span> <span class="op">;</span></span>
<span id="cb104-8"><a href="#cb104-8" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb104-9"><a href="#cb104-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="op">;</span> i <span class="op">&lt;=</span>  <span class="op">&amp;&amp;</span> <span class="op">!</span>fond<span class="op">;</span> i<span class="op">++)</span> </span>
<span id="cb104-10"><a href="#cb104-10" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span>j <span class="op">=</span> <span class="op">;</span> j <span class="op">&lt;=</span> <span class="op">;</span> j<span class="op">++)</span> </span>
<span id="cb104-11"><a href="#cb104-11" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>i <span class="op">*</span> j <span class="op">==</span> <span class="op">)</span> </span>
<span id="cb104-12"><a href="#cb104-12" aria-hidden="true" tabindex="-1"></a>                printf<span class="op">(</span><span class="st">&quot;発見: </span><span class="sc">%d</span><span class="st"> * </span><span class="sc">%d</span><span class="st"> = n&quot;</span><span class="op">,</span> i<span class="op">,</span> j<span class="op">);</span></span>
<span id="cb104-13"><a href="#cb104-13" aria-hidden="true" tabindex="-1"></a>                fond <span class="op">=</span> <span class="op">;</span></span>
<span id="cb104-14"><a href="#cb104-14" aria-hidden="true" tabindex="-1"></a>                <span class="cf">break</span><span class="op">;</span>  <span class="co">/* 内側のループを抜ける */</span></span>
<span id="cb104-15"><a href="#cb104-15" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb104-16"><a href="#cb104-16" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb104-17"><a href="#cb104-17" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb104-18"><a href="#cb104-18" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb104-19"><a href="#cb104-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">;</span></span></code></pre></div>
<h4
id="ラベル付きbreakgoto文を使用">ラベル付きbreak（goto文を使用）</h4>
<div class="sourceCode" id="cb105"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb105-2"><a href="#cb105-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb105-3"><a href="#cb105-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb105-4"><a href="#cb105-4" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb105-5"><a href="#cb105-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb105-6"><a href="#cb105-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">,</span> j<span class="op">;</span></span>
<span id="cb105-7"><a href="#cb105-7" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb105-8"><a href="#cb105-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="op">;</span> i <span class="op">&lt;=</span> <span class="op">;</span> i<span class="op">++)</span> </span>
<span id="cb105-9"><a href="#cb105-9" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span>j <span class="op">=</span> <span class="op">;</span> j <span class="op">&lt;=</span> <span class="op">;</span> j<span class="op">++)</span> </span>
<span id="cb105-10"><a href="#cb105-10" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>i <span class="op">*</span> j <span class="op">==</span> <span class="op">)</span> </span>
<span id="cb105-11"><a href="#cb105-11" aria-hidden="true" tabindex="-1"></a>                printf<span class="op">(</span><span class="st">&quot;発見: </span><span class="sc">%d</span><span class="st"> * </span><span class="sc">%d</span><span class="st"> = n&quot;</span><span class="op">,</span> i<span class="op">,</span> j<span class="op">);</span></span>
<span id="cb105-12"><a href="#cb105-12" aria-hidden="true" tabindex="-1"></a>                <span class="cf">goto</span> exit_loops<span class="op">;</span>  <span class="co">/* 両方のループを抜ける */</span></span>
<span id="cb105-13"><a href="#cb105-13" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb105-14"><a href="#cb105-14" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb105-15"><a href="#cb105-15" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb105-16"><a href="#cb105-16" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb105-17"><a href="#cb105-17" aria-hidden="true" tabindex="-1"></a>exit_loops<span class="op">:</span></span>
<span id="cb105-18"><a href="#cb105-18" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ループ終了n&quot;</span><span class="op">);</span></span>
<span id="cb105-19"><a href="#cb105-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">;</span></span></code></pre></div>
<h3 id="無限ループ">無限ループ ♾</h3>
<p>意図的に終了しないループを作成することもあります。</p>
<h4 id="無限ループの作成方法">無限ループの作成方法</h4>
<div class="sourceCode" id="cb106"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* 方法: for文 */</span></span>
<span id="cb106-2"><a href="#cb106-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> <span class="op">(;;)</span> </span>
<span id="cb106-3"><a href="#cb106-3" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 無限ループ */</span></span>
<span id="cb106-4"><a href="#cb106-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>条件<span class="op">)</span> <span class="cf">break</span><span class="op">;</span></span>
<span id="cb106-5"><a href="#cb106-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb106-6"><a href="#cb106-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb106-7"><a href="#cb106-7" aria-hidden="true" tabindex="-1"></a><span class="co">/* 方法: while文 */</span></span>
<span id="cb106-8"><a href="#cb106-8" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span> <span class="op">()</span> </span>
<span id="cb106-9"><a href="#cb106-9" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 無限ループ */</span></span>
<span id="cb106-10"><a href="#cb106-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>条件<span class="op">)</span> <span class="cf">break</span><span class="op">;</span></span>
<span id="cb106-11"><a href="#cb106-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb106-12"><a href="#cb106-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb106-13"><a href="#cb106-13" aria-hidden="true" tabindex="-1"></a><span class="co">/* 方法: do-while文 */</span></span>
<span id="cb106-14"><a href="#cb106-14" aria-hidden="true" tabindex="-1"></a><span class="cf">do</span> </span>
<span id="cb106-15"><a href="#cb106-15" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 無限ループ */</span></span>
<span id="cb106-16"><a href="#cb106-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>条件<span class="op">)</span> <span class="cf">break</span><span class="op">;</span></span>
<span id="cb106-17"><a href="#cb106-17" aria-hidden="true" tabindex="-1"></a> <span class="cf">while</span> <span class="op">();</span></span></code></pre></div>
<h4 id="無限ループの実用例">無限ループの実用例</h4>
<div class="sourceCode" id="cb107"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb107-2"><a href="#cb107-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb107-3"><a href="#cb107-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb107-4"><a href="#cb107-4" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb107-5"><a href="#cb107-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb107-6"><a href="#cb107-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> choice<span class="op">;</span></span>
<span id="cb107-7"><a href="#cb107-7" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb107-8"><a href="#cb107-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">()</span>   <span class="co">/* 無限ループ */</span></span>
<span id="cb107-9"><a href="#cb107-9" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;n=== 計算機 ===n&quot;</span><span class="op">);</span></span>
<span id="cb107-10"><a href="#cb107-10" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;. 足し算n&quot;</span><span class="op">);</span></span>
<span id="cb107-11"><a href="#cb107-11" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;. 引き算n&quot;</span><span class="op">);</span></span>
<span id="cb107-12"><a href="#cb107-12" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;. 終了n&quot;</span><span class="op">);</span></span>
<span id="cb107-13"><a href="#cb107-13" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;選択: &quot;</span><span class="op">);</span></span>
<span id="cb107-14"><a href="#cb107-14" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb107-15"><a href="#cb107-15" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>scanf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">&amp;</span>choice<span class="op">)</span> <span class="op">!=</span> <span class="op">)</span> </span>
<span id="cb107-16"><a href="#cb107-16" aria-hidden="true" tabindex="-1"></a>            printf<span class="op">(</span><span class="st">&quot;入力エラーn&quot;</span><span class="op">);</span></span>
<span id="cb107-17"><a href="#cb107-17" aria-hidden="true" tabindex="-1"></a>            <span class="cf">break</span><span class="op">;</span></span>
<span id="cb107-18"><a href="#cb107-18" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb107-19"><a href="#cb107-19" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb107-20"><a href="#cb107-20" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>choice <span class="op">==</span> <span class="op">)</span> </span>
<span id="cb107-21"><a href="#cb107-21" aria-hidden="true" tabindex="-1"></a>            printf<span class="op">(</span><span class="st">&quot;終了しますn&quot;</span><span class="op">);</span></span>
<span id="cb107-22"><a href="#cb107-22" aria-hidden="true" tabindex="-1"></a>            <span class="cf">break</span><span class="op">;</span></span>
<span id="cb107-23"><a href="#cb107-23" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb107-24"><a href="#cb107-24" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb107-25"><a href="#cb107-25" aria-hidden="true" tabindex="-1"></a>        <span class="co">/* 計算処理... */</span></span>
<span id="cb107-26"><a href="#cb107-26" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb107-27"><a href="#cb107-27" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb107-28"><a href="#cb107-28" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">;</span></span></code></pre></div>
<h3
id="ループの最適化とベストプラクティス">ループの最適化とベストプラクティス</h3>
<h4 id="効率的なループ">効率的なループ</h4>
<div class="sourceCode" id="cb108"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* NG: 毎回strlen()を呼び出し */</span></span>
<span id="cb108-2"><a href="#cb108-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="op">;</span> i <span class="op">&lt;</span> strlen<span class="op">(</span>str<span class="op">);</span> i<span class="op">++)</span> </span>
<span id="cb108-3"><a href="#cb108-3" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 処理 */</span></span>
<span id="cb108-4"><a href="#cb108-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb108-5"><a href="#cb108-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb108-6"><a href="#cb108-6" aria-hidden="true" tabindex="-1"></a><span class="co">/* OK: 長さを事前に計算 */</span></span>
<span id="cb108-7"><a href="#cb108-7" aria-hidden="true" tabindex="-1"></a>len <span class="op">=</span> strlen<span class="op">(</span>str<span class="op">);</span></span>
<span id="cb108-8"><a href="#cb108-8" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="op">;</span> i <span class="op">&lt;</span> len<span class="op">;</span> i<span class="op">++)</span> </span>
<span id="cb108-9"><a href="#cb108-9" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 処理 */</span></span></code></pre></div>
<h4 id="ループ変数の適切な使用">ループ変数の適切な使用</h4>
<div class="sourceCode" id="cb109"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb109-2"><a href="#cb109-2" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb109-3"><a href="#cb109-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb109-4"><a href="#cb109-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span>  <span class="co">/* C90では関数の先頭で宣言 */</span></span>
<span id="cb109-5"><a href="#cb109-5" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb109-6"><a href="#cb109-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="op">;</span> i <span class="op">&lt;</span> <span class="op">;</span> i<span class="op">++)</span> </span>
<span id="cb109-7"><a href="#cb109-7" aria-hidden="true" tabindex="-1"></a>        <span class="co">/* iはループ外でも有効 */</span></span>
<span id="cb109-8"><a href="#cb109-8" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb109-9"><a href="#cb109-9" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb109-10"><a href="#cb109-10" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;最終的なi = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> i<span class="op">);</span>  <span class="co">/* が出力 */</span></span>
<span id="cb109-11"><a href="#cb109-11" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb109-12"><a href="#cb109-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">;</span></span></code></pre></div>
<h2 id="サンプルコード-9">サンプルコード</h2>
<h3 id="基本的なループ例">基本的なループ例</h3>
<p>プログラムファイル: <code>examples/loop_basic.c</code></p>
<p>for、while、do-while文の基本的な使用方法を学習します。</p>
<h3 id="ネストしたループ-1">ネストしたループ</h3>
<p>プログラムファイル: <code>examples/nested_loops.c</code></p>
<p>二重・三重ループの使用例を学習します。</p>
<h3 id="breakcontinue文">break・continue文</h3>
<p>プログラムファイル: <code>examples/break_continue.c</code></p>
<p>ループ制御文の使い方を学習します。</p>
<h3 id="コンパイルと実行-5">コンパイルと実行</h3>
<div class="sourceCode" id="cb110"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true" tabindex="-1"></a><span class="co"># examples ディレクトリに移動</span></span>
<span id="cb110-2"><a href="#cb110-2" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> examples</span>
<span id="cb110-3"><a href="#cb110-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-4"><a href="#cb110-4" aria-hidden="true" tabindex="-1"></a><span class="co"># C90準拠でコンパイル</span></span>
<span id="cb110-5"><a href="#cb110-5" aria-hidden="true" tabindex="-1"></a><span class="fu">gcc</span> <span class="at">-std</span><span class="op">=</span>c90 <span class="at">-Wall</span> <span class="at">-Wextra</span> <span class="at">-pedantic</span> loop_basic.c <span class="at">-o</span> loop_basic</span>
<span id="cb110-6"><a href="#cb110-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-7"><a href="#cb110-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 実行</span></span>
<span id="cb110-8"><a href="#cb110-8" aria-hidden="true" tabindex="-1"></a><span class="ex">./loop_basic</span></span></code></pre></div>
<h2 id="演習課題-5">演習課題</h2>
<h3 id="基礎問題-5">基礎問題</h3>
<p>. <strong>数列の出力</strong> -
からまでの数を出力するプログラムを種類のループで作成してください</p>
<p>. <strong>偶数・奇数の判定</strong> -
からまでの数で、偶数のみを出力するプログラムを作成してください</p>
<p>. <strong>階乗の計算</strong> -
入力された数の階乗を計算するプログラムを作成してください</p>
<h3 id="応用問題-5">応用問題</h3>
<p>. <strong>素数判定</strong> -
入力された数が素数かどうかを判定するプログラムを作成してください</p>
<p>. <strong>フィボナッチ数列</strong> -
n項目までのフィボナッチ数列を出力するプログラムを作成してください</p>
<p>. <strong>パターン出力</strong> -
以下のようなパターンを出力するプログラムを作成してください：
<code>*    **    ***    ****    *****    ****    ***    **    *</code></p>
<h3 id="発展問題">発展問題</h3>
<p>. <strong>成績管理システム</strong> -
複数の学生の成績を入力し、平均・最高・最低点を計算するプログラム</p>
<p>. <strong>簡易ゲーム</strong> -
数当てゲームを作成してください（-の範囲で乱数を生成）</p>
<p>. <strong>データ検索</strong> -
配列の中から特定の値を検索するプログラムを作成してください</p>
<h2 id="コンパイル方法-5">コンパイル方法</h2>
<p>この章では以下のMakefileを使用してコンパイルができます：</p>
<div class="sourceCode" id="cb111"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 全ての例題をコンパイル</span></span>
<span id="cb111-2"><a href="#cb111-2" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> all</span>
<span id="cb111-3"><a href="#cb111-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb111-4"><a href="#cb111-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 特定のプログラムをコンパイル</span></span>
<span id="cb111-5"><a href="#cb111-5" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> loop_basic</span>
<span id="cb111-6"><a href="#cb111-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb111-7"><a href="#cb111-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 実行</span></span>
<span id="cb111-8"><a href="#cb111-8" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> run</span>
<span id="cb111-9"><a href="#cb111-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb111-10"><a href="#cb111-10" aria-hidden="true" tabindex="-1"></a><span class="co"># クリーンアップ</span></span>
<span id="cb111-11"><a href="#cb111-11" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> clean</span></code></pre></div>
<h2 id="規格による違い-5">規格による違い</h2>
<h3 id="c90での制限事項-4">C90での制限事項</h3>
<ul>
<li>ループ変数は関数の先頭で宣言する必要がある</li>
<li>for文内での変数宣言は不可</li>
</ul>
<h3 id="c99以降の拡張-4">C99以降の拡張</h3>
<ul>
<li><p>for文内での変数宣言が可能</p>
<div class="sourceCode" id="cb112"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb112-1"><a href="#cb112-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="op">;</span> i <span class="op">&lt;</span> <span class="op">;</span> i<span class="op">++)</span>   <span class="co">/* C99以降 */</span></span>
<span id="cb112-2"><a href="#cb112-2" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 処理 */</span></span></code></pre></div></li>
</ul>
<h2 id="よくある間違い-3">よくある間違い</h2>
<h3 id="無限ループの作成">. 無限ループの作成</h3>
<div class="sourceCode" id="cb113"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb113-1"><a href="#cb113-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* NG: 終了条件の記述ミス */</span></span>
<span id="cb113-2"><a href="#cb113-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="op">;</span> i <span class="op">&gt;</span> <span class="op">;</span> i<span class="op">++)</span>   <span class="co">/* 最初から条件が偽 */</span></span>
<span id="cb113-3"><a href="#cb113-3" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 実行されない */</span></span>
<span id="cb113-4"><a href="#cb113-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-5"><a href="#cb113-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-6"><a href="#cb113-6" aria-hidden="true" tabindex="-1"></a><span class="co">/* NG: 更新式の記述ミス */</span></span>
<span id="cb113-7"><a href="#cb113-7" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="op">;</span> i <span class="op">&lt;</span> <span class="op">;</span> i<span class="op">--)</span>   <span class="co">/* 負の方向に進む */</span></span>
<span id="cb113-8"><a href="#cb113-8" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 無限ループ */</span></span></code></pre></div>
<h3 id="セミコロンの位置-1">. セミコロンの位置</h3>
<div class="sourceCode" id="cb114"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb114-1"><a href="#cb114-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* NG: for文の後にセミコロン */</span></span>
<span id="cb114-2"><a href="#cb114-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="op">;</span> i <span class="op">&lt;</span> <span class="op">;</span> i<span class="op">++);</span>  <span class="co">/* 空文が実行される */</span></span>
<span id="cb114-3"><a href="#cb114-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb114-4"><a href="#cb114-4" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> i<span class="op">);</span>     <span class="co">/* ループ外で実行 */</span></span>
<span id="cb114-5"><a href="#cb114-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb114-6"><a href="#cb114-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb114-7"><a href="#cb114-7" aria-hidden="true" tabindex="-1"></a><span class="co">/* OK: 正しい記述 */</span></span>
<span id="cb114-8"><a href="#cb114-8" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="op">;</span> i <span class="op">&lt;</span> <span class="op">;</span> i<span class="op">++)</span> </span>
<span id="cb114-9"><a href="#cb114-9" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> i<span class="op">);</span></span></code></pre></div>
<h3 id="ループ変数の範囲外アクセス">. ループ変数の範囲外アクセス</h3>
<div class="sourceCode" id="cb115"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb115-1"><a href="#cb115-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* NG: 配列の範囲を超える */</span></span>
<span id="cb115-2"><a href="#cb115-2" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> arr<span class="op">[];</span></span>
<span id="cb115-3"><a href="#cb115-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="op">;</span> i <span class="op">&lt;=</span> <span class="op">;</span> i<span class="op">++)</span>   <span class="co">/* i=で範囲外 */</span></span>
<span id="cb115-4"><a href="#cb115-4" aria-hidden="true" tabindex="-1"></a>    arr<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> i<span class="op">;</span></span>
<span id="cb115-5"><a href="#cb115-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-6"><a href="#cb115-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-7"><a href="#cb115-7" aria-hidden="true" tabindex="-1"></a><span class="co">/* OK: 正しい範囲 */</span></span>
<span id="cb115-8"><a href="#cb115-8" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="op">;</span> i <span class="op">&lt;</span> <span class="op">;</span> i<span class="op">++)</span> </span>
<span id="cb115-9"><a href="#cb115-9" aria-hidden="true" tabindex="-1"></a>    arr<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> i<span class="op">;</span></span></code></pre></div>
<h2 id="次の章へ-5">次の章へ</h2>
<p>ループ処理を理解したら、<a href="../arrays/README.md">配列</a>
に進んでください。</p>
<h2 id="参考資料-5">参考資料</h2>
<ul>
<li><a
href="https://ja.cppreference.com/w/c/language/for">for文詳細</a></li>
<li><a
href="https://ja.cppreference.com/w/c/language/while">while文詳細</a></li>
<li><a
href="https://ja.cppreference.com/w/c/language/break">break・continue文</a></li>
</ul>
<h2 id="サンプルコード-10">サンプルコード</h2>
<h3 id="break_continue.c">break_continue.c</h3>
<div class="sourceCode" id="cb116"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb116-1"><a href="#cb116-1" aria-hidden="true" tabindex="-1"></a><span class="co">/*</span></span>
<span id="cb116-2"><a href="#cb116-2" aria-hidden="true" tabindex="-1"></a><span class="co"> * break文とcontinue文の使い方</span></span>
<span id="cb116-3"><a href="#cb116-3" aria-hidden="true" tabindex="-1"></a><span class="co"> *</span></span>
<span id="cb116-4"><a href="#cb116-4" aria-hidden="true" tabindex="-1"></a><span class="co"> * このプログラムは、ループ制御文である</span></span>
<span id="cb116-5"><a href="#cb116-5" aria-hidden="true" tabindex="-1"></a><span class="co"> * break文とcontinue文の使い方を示します。</span></span>
<span id="cb116-6"><a href="#cb116-6" aria-hidden="true" tabindex="-1"></a><span class="co"> */</span></span>
<span id="cb116-7"><a href="#cb116-7" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb116-8"><a href="#cb116-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-9"><a href="#cb116-9" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb116-10"><a href="#cb116-10" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb116-11"><a href="#cb116-11" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">,</span> j<span class="op">;</span></span>
<span id="cb116-12"><a href="#cb116-12" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> sum<span class="op">;</span></span>
<span id="cb116-13"><a href="#cb116-13" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> num<span class="op">;</span></span>
<span id="cb116-14"><a href="#cb116-14" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> is_prime<span class="op">;</span></span>
<span id="cb116-15"><a href="#cb116-15" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> count<span class="op">;</span></span>
<span id="cb116-16"><a href="#cb116-16" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> value<span class="op">;</span></span>
<span id="cb116-17"><a href="#cb116-17" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> ch<span class="op">;</span></span>
<span id="cb116-18"><a href="#cb116-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-19"><a href="#cb116-19" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 1. break文の基本 */</span></span>
<span id="cb116-20"><a href="#cb116-20" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== break文の基本 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb116-21"><a href="#cb116-21" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;1から10まで出力（5で中断）:</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb116-22"><a href="#cb116-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&lt;=</span> <span class="dv">10</span><span class="op">;</span> i<span class="op">++)</span></span>
<span id="cb116-23"><a href="#cb116-23" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb116-24"><a href="#cb116-24" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>i <span class="op">==</span> <span class="dv">5</span><span class="op">)</span></span>
<span id="cb116-25"><a href="#cb116-25" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span></span>
<span id="cb116-26"><a href="#cb116-26" aria-hidden="true" tabindex="-1"></a>            printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">5に到達したので終了します</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb116-27"><a href="#cb116-27" aria-hidden="true" tabindex="-1"></a>            <span class="cf">break</span><span class="op">;</span></span>
<span id="cb116-28"><a href="#cb116-28" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb116-29"><a href="#cb116-29" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st"> &quot;</span><span class="op">,</span> i<span class="op">);</span></span>
<span id="cb116-30"><a href="#cb116-30" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb116-31"><a href="#cb116-31" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb116-32"><a href="#cb116-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-33"><a href="#cb116-33" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 2. continue文の基本 */</span></span>
<span id="cb116-34"><a href="#cb116-34" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== continue文の基本 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb116-35"><a href="#cb116-35" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;1から10まで出力（偶数をスキップ）:</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb116-36"><a href="#cb116-36" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&lt;=</span> <span class="dv">10</span><span class="op">;</span> i<span class="op">++)</span></span>
<span id="cb116-37"><a href="#cb116-37" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb116-38"><a href="#cb116-38" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>i <span class="op">%</span> <span class="dv">2</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span></span>
<span id="cb116-39"><a href="#cb116-39" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span></span>
<span id="cb116-40"><a href="#cb116-40" aria-hidden="true" tabindex="-1"></a>            <span class="cf">continue</span><span class="op">;</span> <span class="co">/* 偶数の場合は次の繰り返しへ */</span></span>
<span id="cb116-41"><a href="#cb116-41" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb116-42"><a href="#cb116-42" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st"> &quot;</span><span class="op">,</span> i<span class="op">);</span></span>
<span id="cb116-43"><a href="#cb116-43" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb116-44"><a href="#cb116-44" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb116-45"><a href="#cb116-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-46"><a href="#cb116-46" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 3. 素数の判定（breakの活用） */</span></span>
<span id="cb116-47"><a href="#cb116-47" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== 素数判定 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb116-48"><a href="#cb116-48" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;整数を入力してください: &quot;</span><span class="op">);</span></span>
<span id="cb116-49"><a href="#cb116-49" aria-hidden="true" tabindex="-1"></a>    scanf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">&amp;</span>num<span class="op">);</span></span>
<span id="cb116-50"><a href="#cb116-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-51"><a href="#cb116-51" aria-hidden="true" tabindex="-1"></a>    is_prime <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> <span class="co">/* 素数フラグ（1:素数、0:素数でない） */</span></span>
<span id="cb116-52"><a href="#cb116-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-53"><a href="#cb116-53" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>num <span class="op">&lt;=</span> <span class="dv">1</span><span class="op">)</span></span>
<span id="cb116-54"><a href="#cb116-54" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb116-55"><a href="#cb116-55" aria-hidden="true" tabindex="-1"></a>        is_prime <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb116-56"><a href="#cb116-56" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb116-57"><a href="#cb116-57" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span></span>
<span id="cb116-58"><a href="#cb116-58" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb116-59"><a href="#cb116-59" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">2</span><span class="op">;</span> i <span class="op">*</span> i <span class="op">&lt;=</span> num<span class="op">;</span> i<span class="op">++)</span></span>
<span id="cb116-60"><a href="#cb116-60" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span></span>
<span id="cb116-61"><a href="#cb116-61" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>num <span class="op">%</span> i <span class="op">==</span> <span class="dv">0</span><span class="op">)</span></span>
<span id="cb116-62"><a href="#cb116-62" aria-hidden="true" tabindex="-1"></a>            <span class="op">{</span></span>
<span id="cb116-63"><a href="#cb116-63" aria-hidden="true" tabindex="-1"></a>                is_prime <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb116-64"><a href="#cb116-64" aria-hidden="true" tabindex="-1"></a>                <span class="cf">break</span><span class="op">;</span> <span class="co">/* 約数が見つかったら終了 */</span></span>
<span id="cb116-65"><a href="#cb116-65" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb116-66"><a href="#cb116-66" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb116-67"><a href="#cb116-67" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb116-68"><a href="#cb116-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-69"><a href="#cb116-69" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>is_prime<span class="op">)</span></span>
<span id="cb116-70"><a href="#cb116-70" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb116-71"><a href="#cb116-71" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st"> は素数です</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> num<span class="op">);</span></span>
<span id="cb116-72"><a href="#cb116-72" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb116-73"><a href="#cb116-73" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span></span>
<span id="cb116-74"><a href="#cb116-74" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb116-75"><a href="#cb116-75" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st"> は素数ではありません</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> num<span class="op">);</span></span>
<span id="cb116-76"><a href="#cb116-76" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb116-77"><a href="#cb116-77" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb116-78"><a href="#cb116-78" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-79"><a href="#cb116-79" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 4. 負の数を除外した合計（continueの活用） */</span></span>
<span id="cb116-80"><a href="#cb116-80" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== 正の数の合計計算 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb116-81"><a href="#cb116-81" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;5つの数を入力してください（負の数は無視されます）:</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb116-82"><a href="#cb116-82" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-83"><a href="#cb116-83" aria-hidden="true" tabindex="-1"></a>    sum <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb116-84"><a href="#cb116-84" aria-hidden="true" tabindex="-1"></a>    count <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb116-85"><a href="#cb116-85" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">5</span><span class="op">;</span> i<span class="op">++)</span></span>
<span id="cb116-86"><a href="#cb116-86" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb116-87"><a href="#cb116-87" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st">番目の数: &quot;</span><span class="op">,</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb116-88"><a href="#cb116-88" aria-hidden="true" tabindex="-1"></a>        scanf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">&amp;</span>value<span class="op">);</span></span>
<span id="cb116-89"><a href="#cb116-89" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-90"><a href="#cb116-90" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>value <span class="op">&lt;</span> <span class="dv">0</span><span class="op">)</span></span>
<span id="cb116-91"><a href="#cb116-91" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span></span>
<span id="cb116-92"><a href="#cb116-92" aria-hidden="true" tabindex="-1"></a>            printf<span class="op">(</span><span class="st">&quot;  → 負の数なのでスキップします</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb116-93"><a href="#cb116-93" aria-hidden="true" tabindex="-1"></a>            <span class="cf">continue</span><span class="op">;</span></span>
<span id="cb116-94"><a href="#cb116-94" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb116-95"><a href="#cb116-95" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-96"><a href="#cb116-96" aria-hidden="true" tabindex="-1"></a>        sum <span class="op">+=</span> value<span class="op">;</span></span>
<span id="cb116-97"><a href="#cb116-97" aria-hidden="true" tabindex="-1"></a>        count<span class="op">++;</span></span>
<span id="cb116-98"><a href="#cb116-98" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb116-99"><a href="#cb116-99" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-100"><a href="#cb116-100" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;正の数の合計: </span><span class="sc">%d</span><span class="st">（</span><span class="sc">%d</span><span class="st">個）</span><span class="sc">\n\n</span><span class="st">&quot;</span><span class="op">,</span> sum<span class="op">,</span> count<span class="op">);</span></span>
<span id="cb116-101"><a href="#cb116-101" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-102"><a href="#cb116-102" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 5. ネストしたループでのbreak */</span></span>
<span id="cb116-103"><a href="#cb116-103" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== ネストしたループでのbreak ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb116-104"><a href="#cb116-104" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;九九の表（5x5で中断）:</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb116-105"><a href="#cb116-105" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-106"><a href="#cb116-106" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&lt;=</span> <span class="dv">9</span><span class="op">;</span> i<span class="op">++)</span></span>
<span id="cb116-107"><a href="#cb116-107" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb116-108"><a href="#cb116-108" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span>j <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> j <span class="op">&lt;=</span> <span class="dv">9</span><span class="op">;</span> j<span class="op">++)</span></span>
<span id="cb116-109"><a href="#cb116-109" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span></span>
<span id="cb116-110"><a href="#cb116-110" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>i <span class="op">==</span> <span class="dv">5</span> <span class="op">&amp;&amp;</span> j <span class="op">==</span> <span class="dv">5</span><span class="op">)</span></span>
<span id="cb116-111"><a href="#cb116-111" aria-hidden="true" tabindex="-1"></a>            <span class="op">{</span></span>
<span id="cb116-112"><a href="#cb116-112" aria-hidden="true" tabindex="-1"></a>                printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">5x5で中断します</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb116-113"><a href="#cb116-113" aria-hidden="true" tabindex="-1"></a>                <span class="cf">break</span><span class="op">;</span> <span class="co">/* 内側のループのみ終了 */</span></span>
<span id="cb116-114"><a href="#cb116-114" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb116-115"><a href="#cb116-115" aria-hidden="true" tabindex="-1"></a>            printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%2d</span><span class="st"> &quot;</span><span class="op">,</span> i <span class="op">*</span> j<span class="op">);</span></span>
<span id="cb116-116"><a href="#cb116-116" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb116-117"><a href="#cb116-117" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>i <span class="op">==</span> <span class="dv">5</span> <span class="op">&amp;&amp;</span> j <span class="op">==</span> <span class="dv">5</span><span class="op">)</span></span>
<span id="cb116-118"><a href="#cb116-118" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span></span>
<span id="cb116-119"><a href="#cb116-119" aria-hidden="true" tabindex="-1"></a>            <span class="cf">break</span><span class="op">;</span> <span class="co">/* 外側のループも終了 */</span></span>
<span id="cb116-120"><a href="#cb116-120" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb116-121"><a href="#cb116-121" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb116-122"><a href="#cb116-122" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb116-123"><a href="#cb116-123" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb116-124"><a href="#cb116-124" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-125"><a href="#cb116-125" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 6. 無限ループとbreak */</span></span>
<span id="cb116-126"><a href="#cb116-126" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== 無限ループの制御 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb116-127"><a href="#cb116-127" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;&#39;q&#39;を入力すると終了します:</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb116-128"><a href="#cb116-128" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span><span class="dv">1</span><span class="op">)</span></span>
<span id="cb116-129"><a href="#cb116-129" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span> <span class="co">/* 無限ループ */</span></span>
<span id="cb116-130"><a href="#cb116-130" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;文字を入力: &quot;</span><span class="op">);</span></span>
<span id="cb116-131"><a href="#cb116-131" aria-hidden="true" tabindex="-1"></a>        scanf<span class="op">(</span><span class="st">&quot; </span><span class="sc">%c</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">&amp;</span>ch<span class="op">);</span></span>
<span id="cb116-132"><a href="#cb116-132" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-133"><a href="#cb116-133" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>ch <span class="op">==</span> <span class="ch">&#39;q&#39;</span> <span class="op">||</span> ch <span class="op">==</span> <span class="ch">&#39;Q&#39;</span><span class="op">)</span></span>
<span id="cb116-134"><a href="#cb116-134" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span></span>
<span id="cb116-135"><a href="#cb116-135" aria-hidden="true" tabindex="-1"></a>            printf<span class="op">(</span><span class="st">&quot;終了します</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb116-136"><a href="#cb116-136" aria-hidden="true" tabindex="-1"></a>            <span class="cf">break</span><span class="op">;</span></span>
<span id="cb116-137"><a href="#cb116-137" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb116-138"><a href="#cb116-138" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-139"><a href="#cb116-139" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;入力された文字: </span><span class="sc">%c\n</span><span class="st">&quot;</span><span class="op">,</span> ch<span class="op">);</span></span>
<span id="cb116-140"><a href="#cb116-140" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb116-141"><a href="#cb116-141" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb116-142"><a href="#cb116-142" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-143"><a href="#cb116-143" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 7. 3の倍数と5の倍数をスキップ */</span></span>
<span id="cb116-144"><a href="#cb116-144" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== 3の倍数と5の倍数以外を表示 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb116-145"><a href="#cb116-145" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;1から30まで（3の倍数と5の倍数を除く）:</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb116-146"><a href="#cb116-146" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-147"><a href="#cb116-147" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&lt;=</span> <span class="dv">30</span><span class="op">;</span> i<span class="op">++)</span></span>
<span id="cb116-148"><a href="#cb116-148" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb116-149"><a href="#cb116-149" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>i <span class="op">%</span> <span class="dv">3</span> <span class="op">==</span> <span class="dv">0</span> <span class="op">||</span> i <span class="op">%</span> <span class="dv">5</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span></span>
<span id="cb116-150"><a href="#cb116-150" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span></span>
<span id="cb116-151"><a href="#cb116-151" aria-hidden="true" tabindex="-1"></a>            <span class="cf">continue</span><span class="op">;</span></span>
<span id="cb116-152"><a href="#cb116-152" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb116-153"><a href="#cb116-153" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st"> &quot;</span><span class="op">,</span> i<span class="op">);</span></span>
<span id="cb116-154"><a href="#cb116-154" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb116-155"><a href="#cb116-155" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb116-156"><a href="#cb116-156" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-157"><a href="#cb116-157" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb116-158"><a href="#cb116-158" aria-hidden="true" tabindex="-1"></a><span class="op">}</span>```</span>
<span id="cb116-159"><a href="#cb116-159" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-160"><a href="#cb116-160" aria-hidden="true" tabindex="-1"></a><span class="pp">#</span><span class="er">## for_loop_basics.c</span></span>
<span id="cb116-161"><a href="#cb116-161" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-162"><a href="#cb116-162" aria-hidden="true" tabindex="-1"></a>```c</span>
<span id="cb116-163"><a href="#cb116-163" aria-hidden="true" tabindex="-1"></a><span class="co">/*</span></span>
<span id="cb116-164"><a href="#cb116-164" aria-hidden="true" tabindex="-1"></a><span class="co"> * for文の基本的な使い方</span></span>
<span id="cb116-165"><a href="#cb116-165" aria-hidden="true" tabindex="-1"></a><span class="co"> *</span></span>
<span id="cb116-166"><a href="#cb116-166" aria-hidden="true" tabindex="-1"></a><span class="co"> * このプログラムは、for文を使った様々な</span></span>
<span id="cb116-167"><a href="#cb116-167" aria-hidden="true" tabindex="-1"></a><span class="co"> * ループパターンを示します。</span></span>
<span id="cb116-168"><a href="#cb116-168" aria-hidden="true" tabindex="-1"></a><span class="co"> */</span></span>
<span id="cb116-169"><a href="#cb116-169" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb116-170"><a href="#cb116-170" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-171"><a href="#cb116-171" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb116-172"><a href="#cb116-172" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb116-173"><a href="#cb116-173" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">,</span> j<span class="op">;</span></span>
<span id="cb116-174"><a href="#cb116-174" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> sum<span class="op">;</span></span>
<span id="cb116-175"><a href="#cb116-175" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> ch<span class="op">;</span></span>
<span id="cb116-176"><a href="#cb116-176" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> n<span class="op">;</span></span>
<span id="cb116-177"><a href="#cb116-177" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> factorial<span class="op">;</span></span>
<span id="cb116-178"><a href="#cb116-178" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-179"><a href="#cb116-179" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 1. 基本的なfor文：1から10まで出力 */</span></span>
<span id="cb116-180"><a href="#cb116-180" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;1から10まで: &quot;</span><span class="op">);</span></span>
<span id="cb116-181"><a href="#cb116-181" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&lt;=</span> <span class="dv">10</span><span class="op">;</span> i<span class="op">++)</span></span>
<span id="cb116-182"><a href="#cb116-182" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb116-183"><a href="#cb116-183" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st"> &quot;</span><span class="op">,</span> i<span class="op">);</span></span>
<span id="cb116-184"><a href="#cb116-184" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb116-185"><a href="#cb116-185" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb116-186"><a href="#cb116-186" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-187"><a href="#cb116-187" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 2. 逆順ループ：10から1まで出力 */</span></span>
<span id="cb116-188"><a href="#cb116-188" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;10から1まで（逆順）: &quot;</span><span class="op">);</span></span>
<span id="cb116-189"><a href="#cb116-189" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">10</span><span class="op">;</span> i <span class="op">&gt;=</span> <span class="dv">1</span><span class="op">;</span> i<span class="op">--)</span></span>
<span id="cb116-190"><a href="#cb116-190" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb116-191"><a href="#cb116-191" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st"> &quot;</span><span class="op">,</span> i<span class="op">);</span></span>
<span id="cb116-192"><a href="#cb116-192" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb116-193"><a href="#cb116-193" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb116-194"><a href="#cb116-194" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-195"><a href="#cb116-195" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 3. 偶数だけを出力 */</span></span>
<span id="cb116-196"><a href="#cb116-196" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;0から20までの偶数: &quot;</span><span class="op">);</span></span>
<span id="cb116-197"><a href="#cb116-197" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;=</span> <span class="dv">20</span><span class="op">;</span> i <span class="op">+=</span> <span class="dv">2</span><span class="op">)</span></span>
<span id="cb116-198"><a href="#cb116-198" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb116-199"><a href="#cb116-199" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st"> &quot;</span><span class="op">,</span> i<span class="op">);</span></span>
<span id="cb116-200"><a href="#cb116-200" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb116-201"><a href="#cb116-201" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb116-202"><a href="#cb116-202" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-203"><a href="#cb116-203" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 4. 累計の計算 */</span></span>
<span id="cb116-204"><a href="#cb116-204" aria-hidden="true" tabindex="-1"></a>    sum <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb116-205"><a href="#cb116-205" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&lt;=</span> <span class="dv">100</span><span class="op">;</span> i<span class="op">++)</span></span>
<span id="cb116-206"><a href="#cb116-206" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb116-207"><a href="#cb116-207" aria-hidden="true" tabindex="-1"></a>        sum <span class="op">+=</span> i<span class="op">;</span></span>
<span id="cb116-208"><a href="#cb116-208" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb116-209"><a href="#cb116-209" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;1から100までの合計: </span><span class="sc">%d\n\n</span><span class="st">&quot;</span><span class="op">,</span> sum<span class="op">);</span></span>
<span id="cb116-210"><a href="#cb116-210" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-211"><a href="#cb116-211" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 5. 九九の表（ネストしたfor文） */</span></span>
<span id="cb116-212"><a href="#cb116-212" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;九九の表:</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb116-213"><a href="#cb116-213" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;    &quot;</span><span class="op">);</span></span>
<span id="cb116-214"><a href="#cb116-214" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&lt;=</span> <span class="dv">9</span><span class="op">;</span> i<span class="op">++)</span></span>
<span id="cb116-215"><a href="#cb116-215" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb116-216"><a href="#cb116-216" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%3d</span><span class="st"> &quot;</span><span class="op">,</span> i<span class="op">);</span></span>
<span id="cb116-217"><a href="#cb116-217" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb116-218"><a href="#cb116-218" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb116-219"><a href="#cb116-219" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;   &quot;</span><span class="op">);</span></span>
<span id="cb116-220"><a href="#cb116-220" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&lt;=</span> <span class="dv">9</span><span class="op">;</span> i<span class="op">++)</span></span>
<span id="cb116-221"><a href="#cb116-221" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb116-222"><a href="#cb116-222" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;----&quot;</span><span class="op">);</span></span>
<span id="cb116-223"><a href="#cb116-223" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb116-224"><a href="#cb116-224" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb116-225"><a href="#cb116-225" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-226"><a href="#cb116-226" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&lt;=</span> <span class="dv">9</span><span class="op">;</span> i<span class="op">++)</span></span>
<span id="cb116-227"><a href="#cb116-227" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb116-228"><a href="#cb116-228" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%2d</span><span class="st"> |&quot;</span><span class="op">,</span> i<span class="op">);</span></span>
<span id="cb116-229"><a href="#cb116-229" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span>j <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> j <span class="op">&lt;=</span> <span class="dv">9</span><span class="op">;</span> j<span class="op">++)</span></span>
<span id="cb116-230"><a href="#cb116-230" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span></span>
<span id="cb116-231"><a href="#cb116-231" aria-hidden="true" tabindex="-1"></a>            printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%3d</span><span class="st"> &quot;</span><span class="op">,</span> i <span class="op">*</span> j<span class="op">);</span></span>
<span id="cb116-232"><a href="#cb116-232" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb116-233"><a href="#cb116-233" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb116-234"><a href="#cb116-234" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb116-235"><a href="#cb116-235" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb116-236"><a href="#cb116-236" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-237"><a href="#cb116-237" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 6. 文字の出力 */</span></span>
<span id="cb116-238"><a href="#cb116-238" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;アルファベット（大文字）: &quot;</span><span class="op">);</span></span>
<span id="cb116-239"><a href="#cb116-239" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>ch <span class="op">=</span> <span class="ch">&#39;A&#39;</span><span class="op">;</span> ch <span class="op">&lt;=</span> <span class="ch">&#39;Z&#39;</span><span class="op">;</span> ch<span class="op">++)</span></span>
<span id="cb116-240"><a href="#cb116-240" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb116-241"><a href="#cb116-241" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%c</span><span class="st"> &quot;</span><span class="op">,</span> ch<span class="op">);</span></span>
<span id="cb116-242"><a href="#cb116-242" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb116-243"><a href="#cb116-243" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb116-244"><a href="#cb116-244" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-245"><a href="#cb116-245" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 7. 複数変数を使ったfor文 */</span></span>
<span id="cb116-246"><a href="#cb116-246" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;複数変数の例:</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb116-247"><a href="#cb116-247" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">,</span> j <span class="op">=</span> <span class="dv">10</span><span class="op">;</span> i <span class="op">&lt;</span> j<span class="op">;</span> i<span class="op">++,</span> j<span class="op">--)</span></span>
<span id="cb116-248"><a href="#cb116-248" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb116-249"><a href="#cb116-249" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;i = </span><span class="sc">%d</span><span class="st">, j = </span><span class="sc">%d</span><span class="st">, 合計 = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> i<span class="op">,</span> j<span class="op">,</span> i <span class="op">+</span> j<span class="op">);</span></span>
<span id="cb116-250"><a href="#cb116-250" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb116-251"><a href="#cb116-251" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb116-252"><a href="#cb116-252" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-253"><a href="#cb116-253" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 8. 階乗の計算 */</span></span>
<span id="cb116-254"><a href="#cb116-254" aria-hidden="true" tabindex="-1"></a>    n <span class="op">=</span> <span class="dv">5</span><span class="op">;</span></span>
<span id="cb116-255"><a href="#cb116-255" aria-hidden="true" tabindex="-1"></a>    factorial <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb116-256"><a href="#cb116-256" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st">! = &quot;</span><span class="op">,</span> n<span class="op">);</span></span>
<span id="cb116-257"><a href="#cb116-257" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> n<span class="op">;</span> i <span class="op">&gt;=</span> <span class="dv">1</span><span class="op">;</span> i<span class="op">--)</span></span>
<span id="cb116-258"><a href="#cb116-258" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb116-259"><a href="#cb116-259" aria-hidden="true" tabindex="-1"></a>        factorial <span class="op">*=</span> i<span class="op">;</span></span>
<span id="cb116-260"><a href="#cb116-260" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st">&quot;</span><span class="op">,</span> i<span class="op">);</span></span>
<span id="cb116-261"><a href="#cb116-261" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>i <span class="op">&gt;</span> <span class="dv">1</span><span class="op">)</span></span>
<span id="cb116-262"><a href="#cb116-262" aria-hidden="true" tabindex="-1"></a>            printf<span class="op">(</span><span class="st">&quot; x &quot;</span><span class="op">);</span></span>
<span id="cb116-263"><a href="#cb116-263" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb116-264"><a href="#cb116-264" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot; = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> factorial<span class="op">);</span></span>
<span id="cb116-265"><a href="#cb116-265" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-266"><a href="#cb116-266" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb116-267"><a href="#cb116-267" aria-hidden="true" tabindex="-1"></a><span class="op">}</span>```</span>
<span id="cb116-268"><a href="#cb116-268" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-269"><a href="#cb116-269" aria-hidden="true" tabindex="-1"></a><span class="pp">#</span><span class="er">## while_dowhile.c</span></span>
<span id="cb116-270"><a href="#cb116-270" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-271"><a href="#cb116-271" aria-hidden="true" tabindex="-1"></a>```c</span>
<span id="cb116-272"><a href="#cb116-272" aria-hidden="true" tabindex="-1"></a><span class="co">/*</span></span>
<span id="cb116-273"><a href="#cb116-273" aria-hidden="true" tabindex="-1"></a><span class="co"> * while文とdo-while文の使い方</span></span>
<span id="cb116-274"><a href="#cb116-274" aria-hidden="true" tabindex="-1"></a><span class="co"> *</span></span>
<span id="cb116-275"><a href="#cb116-275" aria-hidden="true" tabindex="-1"></a><span class="co"> * このプログラムは、while文とdo-while文の</span></span>
<span id="cb116-276"><a href="#cb116-276" aria-hidden="true" tabindex="-1"></a><span class="co"> * 基本的な使い方と違いを示します。</span></span>
<span id="cb116-277"><a href="#cb116-277" aria-hidden="true" tabindex="-1"></a><span class="co"> */</span></span>
<span id="cb116-278"><a href="#cb116-278" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb116-279"><a href="#cb116-279" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-280"><a href="#cb116-280" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb116-281"><a href="#cb116-281" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb116-282"><a href="#cb116-282" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb116-283"><a href="#cb116-283" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> num<span class="op">;</span></span>
<span id="cb116-284"><a href="#cb116-284" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> sum<span class="op">;</span></span>
<span id="cb116-285"><a href="#cb116-285" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> choice<span class="op">;</span></span>
<span id="cb116-286"><a href="#cb116-286" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> target<span class="op">;</span></span>
<span id="cb116-287"><a href="#cb116-287" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> guess<span class="op">;</span></span>
<span id="cb116-288"><a href="#cb116-288" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> attempts<span class="op">;</span></span>
<span id="cb116-289"><a href="#cb116-289" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-290"><a href="#cb116-290" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 1. 基本的なwhile文 */</span></span>
<span id="cb116-291"><a href="#cb116-291" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== while文の基本 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb116-292"><a href="#cb116-292" aria-hidden="true" tabindex="-1"></a>    i <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb116-293"><a href="#cb116-293" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>i <span class="op">&lt;=</span> <span class="dv">5</span><span class="op">)</span></span>
<span id="cb116-294"><a href="#cb116-294" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb116-295"><a href="#cb116-295" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;カウント: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> i<span class="op">);</span></span>
<span id="cb116-296"><a href="#cb116-296" aria-hidden="true" tabindex="-1"></a>        i<span class="op">++;</span></span>
<span id="cb116-297"><a href="#cb116-297" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb116-298"><a href="#cb116-298" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb116-299"><a href="#cb116-299" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-300"><a href="#cb116-300" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 2. ユーザー入力を使ったwhile文 */</span></span>
<span id="cb116-301"><a href="#cb116-301" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== 合計計算（0で終了）===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb116-302"><a href="#cb116-302" aria-hidden="true" tabindex="-1"></a>    sum <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb116-303"><a href="#cb116-303" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;数値を入力してください（0で終了）: &quot;</span><span class="op">);</span></span>
<span id="cb116-304"><a href="#cb116-304" aria-hidden="true" tabindex="-1"></a>    scanf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">&amp;</span>num<span class="op">);</span></span>
<span id="cb116-305"><a href="#cb116-305" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-306"><a href="#cb116-306" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>num <span class="op">!=</span> <span class="dv">0</span><span class="op">)</span></span>
<span id="cb116-307"><a href="#cb116-307" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb116-308"><a href="#cb116-308" aria-hidden="true" tabindex="-1"></a>        sum <span class="op">+=</span> num<span class="op">;</span></span>
<span id="cb116-309"><a href="#cb116-309" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;現在の合計: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> sum<span class="op">);</span></span>
<span id="cb116-310"><a href="#cb116-310" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;次の数値を入力してください（0で終了）: &quot;</span><span class="op">);</span></span>
<span id="cb116-311"><a href="#cb116-311" aria-hidden="true" tabindex="-1"></a>        scanf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">&amp;</span>num<span class="op">);</span></span>
<span id="cb116-312"><a href="#cb116-312" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb116-313"><a href="#cb116-313" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;最終合計: </span><span class="sc">%d\n\n</span><span class="st">&quot;</span><span class="op">,</span> sum<span class="op">);</span></span>
<span id="cb116-314"><a href="#cb116-314" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-315"><a href="#cb116-315" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 3. do-while文の基本 */</span></span>
<span id="cb116-316"><a href="#cb116-316" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== do-while文の基本 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb116-317"><a href="#cb116-317" aria-hidden="true" tabindex="-1"></a>    i <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb116-318"><a href="#cb116-318" aria-hidden="true" tabindex="-1"></a>    <span class="cf">do</span></span>
<span id="cb116-319"><a href="#cb116-319" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb116-320"><a href="#cb116-320" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;カウント: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> i<span class="op">);</span></span>
<span id="cb116-321"><a href="#cb116-321" aria-hidden="true" tabindex="-1"></a>        i<span class="op">++;</span></span>
<span id="cb116-322"><a href="#cb116-322" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span> <span class="cf">while</span> <span class="op">(</span>i <span class="op">&lt;=</span> <span class="dv">5</span><span class="op">);</span></span>
<span id="cb116-323"><a href="#cb116-323" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb116-324"><a href="#cb116-324" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-325"><a href="#cb116-325" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 4. メニュー選択（do-whileの典型的な使用例） */</span></span>
<span id="cb116-326"><a href="#cb116-326" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== メニューシステム ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb116-327"><a href="#cb116-327" aria-hidden="true" tabindex="-1"></a>    <span class="cf">do</span></span>
<span id="cb116-328"><a href="#cb116-328" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb116-329"><a href="#cb116-329" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">--- メインメニュー ---</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb116-330"><a href="#cb116-330" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;1. 挨拶</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb116-331"><a href="#cb116-331" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;2. 現在時刻の表示（ダミー）</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb116-332"><a href="#cb116-332" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;3. カウントダウン</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb116-333"><a href="#cb116-333" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;Q. 終了</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb116-334"><a href="#cb116-334" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;選択してください: &quot;</span><span class="op">);</span></span>
<span id="cb116-335"><a href="#cb116-335" aria-hidden="true" tabindex="-1"></a>        scanf<span class="op">(</span><span class="st">&quot; </span><span class="sc">%c</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">&amp;</span>choice<span class="op">);</span></span>
<span id="cb116-336"><a href="#cb116-336" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-337"><a href="#cb116-337" aria-hidden="true" tabindex="-1"></a>        <span class="cf">switch</span> <span class="op">(</span>choice<span class="op">)</span></span>
<span id="cb116-338"><a href="#cb116-338" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span></span>
<span id="cb116-339"><a href="#cb116-339" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> <span class="ch">&#39;1&#39;</span><span class="op">:</span></span>
<span id="cb116-340"><a href="#cb116-340" aria-hidden="true" tabindex="-1"></a>            printf<span class="op">(</span><span class="st">&quot;こんにちは！</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb116-341"><a href="#cb116-341" aria-hidden="true" tabindex="-1"></a>            <span class="cf">break</span><span class="op">;</span></span>
<span id="cb116-342"><a href="#cb116-342" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> <span class="ch">&#39;2&#39;</span><span class="op">:</span></span>
<span id="cb116-343"><a href="#cb116-343" aria-hidden="true" tabindex="-1"></a>            printf<span class="op">(</span><span class="st">&quot;現在時刻: 12:00（ダミー）</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb116-344"><a href="#cb116-344" aria-hidden="true" tabindex="-1"></a>            <span class="cf">break</span><span class="op">;</span></span>
<span id="cb116-345"><a href="#cb116-345" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> <span class="ch">&#39;3&#39;</span><span class="op">:</span></span>
<span id="cb116-346"><a href="#cb116-346" aria-hidden="true" tabindex="-1"></a>            printf<span class="op">(</span><span class="st">&quot;カウントダウン開始: &quot;</span><span class="op">);</span></span>
<span id="cb116-347"><a href="#cb116-347" aria-hidden="true" tabindex="-1"></a>            <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">5</span><span class="op">;</span> i <span class="op">&gt;=</span> <span class="dv">1</span><span class="op">;</span> i<span class="op">--)</span></span>
<span id="cb116-348"><a href="#cb116-348" aria-hidden="true" tabindex="-1"></a>            <span class="op">{</span></span>
<span id="cb116-349"><a href="#cb116-349" aria-hidden="true" tabindex="-1"></a>                printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st">... &quot;</span><span class="op">,</span> i<span class="op">);</span></span>
<span id="cb116-350"><a href="#cb116-350" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb116-351"><a href="#cb116-351" aria-hidden="true" tabindex="-1"></a>            printf<span class="op">(</span><span class="st">&quot;発射！</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb116-352"><a href="#cb116-352" aria-hidden="true" tabindex="-1"></a>            <span class="cf">break</span><span class="op">;</span></span>
<span id="cb116-353"><a href="#cb116-353" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> <span class="ch">&#39;Q&#39;</span><span class="op">:</span></span>
<span id="cb116-354"><a href="#cb116-354" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> <span class="ch">&#39;q&#39;</span><span class="op">:</span></span>
<span id="cb116-355"><a href="#cb116-355" aria-hidden="true" tabindex="-1"></a>            printf<span class="op">(</span><span class="st">&quot;プログラムを終了します。</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb116-356"><a href="#cb116-356" aria-hidden="true" tabindex="-1"></a>            <span class="cf">break</span><span class="op">;</span></span>
<span id="cb116-357"><a href="#cb116-357" aria-hidden="true" tabindex="-1"></a>        <span class="cf">default</span><span class="op">:</span></span>
<span id="cb116-358"><a href="#cb116-358" aria-hidden="true" tabindex="-1"></a>            printf<span class="op">(</span><span class="st">&quot;無効な選択です。</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb116-359"><a href="#cb116-359" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb116-360"><a href="#cb116-360" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span> <span class="cf">while</span> <span class="op">(</span>choice <span class="op">!=</span> <span class="ch">&#39;Q&#39;</span> <span class="op">&amp;&amp;</span> choice <span class="op">!=</span> <span class="ch">&#39;q&#39;</span><span class="op">);</span></span>
<span id="cb116-361"><a href="#cb116-361" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-362"><a href="#cb116-362" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 5. while vs do-whileの違い */</span></span>
<span id="cb116-363"><a href="#cb116-363" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">=== while vs do-while ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb116-364"><a href="#cb116-364" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-365"><a href="#cb116-365" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 条件が最初から偽の場合のwhile */</span></span>
<span id="cb116-366"><a href="#cb116-366" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;while文（条件が最初から偽）:</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb116-367"><a href="#cb116-367" aria-hidden="true" tabindex="-1"></a>    i <span class="op">=</span> <span class="dv">10</span><span class="op">;</span></span>
<span id="cb116-368"><a href="#cb116-368" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>i <span class="op">&lt;</span> <span class="dv">5</span><span class="op">)</span></span>
<span id="cb116-369"><a href="#cb116-369" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb116-370"><a href="#cb116-370" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;これは実行されません</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb116-371"><a href="#cb116-371" aria-hidden="true" tabindex="-1"></a>        i<span class="op">++;</span></span>
<span id="cb116-372"><a href="#cb116-372" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb116-373"><a href="#cb116-373" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;while文は一度も実行されませんでした</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb116-374"><a href="#cb116-374" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-375"><a href="#cb116-375" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 条件が最初から偽の場合のdo-while */</span></span>
<span id="cb116-376"><a href="#cb116-376" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">do-while文（条件が最初から偽）:</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb116-377"><a href="#cb116-377" aria-hidden="true" tabindex="-1"></a>    i <span class="op">=</span> <span class="dv">10</span><span class="op">;</span></span>
<span id="cb116-378"><a href="#cb116-378" aria-hidden="true" tabindex="-1"></a>    <span class="cf">do</span></span>
<span id="cb116-379"><a href="#cb116-379" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb116-380"><a href="#cb116-380" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;do-while文は最低1回実行されます（i = </span><span class="sc">%d</span><span class="st">）</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> i<span class="op">);</span></span>
<span id="cb116-381"><a href="#cb116-381" aria-hidden="true" tabindex="-1"></a>        i<span class="op">++;</span></span>
<span id="cb116-382"><a href="#cb116-382" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span> <span class="cf">while</span> <span class="op">(</span>i <span class="op">&lt;</span> <span class="dv">5</span><span class="op">);</span></span>
<span id="cb116-383"><a href="#cb116-383" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-384"><a href="#cb116-384" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 6. 数当てゲーム（簡易版） */</span></span>
<span id="cb116-385"><a href="#cb116-385" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">=== 数当てゲーム ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb116-386"><a href="#cb116-386" aria-hidden="true" tabindex="-1"></a>    target <span class="op">=</span> <span class="dv">42</span><span class="op">;</span> <span class="co">/* 正解の数 */</span></span>
<span id="cb116-387"><a href="#cb116-387" aria-hidden="true" tabindex="-1"></a>    attempts <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb116-388"><a href="#cb116-388" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-389"><a href="#cb116-389" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;1から100までの数を当ててください!</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb116-390"><a href="#cb116-390" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-391"><a href="#cb116-391" aria-hidden="true" tabindex="-1"></a>    <span class="cf">do</span></span>
<span id="cb116-392"><a href="#cb116-392" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb116-393"><a href="#cb116-393" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;予想を入力: &quot;</span><span class="op">);</span></span>
<span id="cb116-394"><a href="#cb116-394" aria-hidden="true" tabindex="-1"></a>        scanf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">&amp;</span>guess<span class="op">);</span></span>
<span id="cb116-395"><a href="#cb116-395" aria-hidden="true" tabindex="-1"></a>        attempts<span class="op">++;</span></span>
<span id="cb116-396"><a href="#cb116-396" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-397"><a href="#cb116-397" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>guess <span class="op">&lt;</span> target<span class="op">)</span></span>
<span id="cb116-398"><a href="#cb116-398" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span></span>
<span id="cb116-399"><a href="#cb116-399" aria-hidden="true" tabindex="-1"></a>            printf<span class="op">(</span><span class="st">&quot;もっと大きいです</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb116-400"><a href="#cb116-400" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb116-401"><a href="#cb116-401" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>guess <span class="op">&gt;</span> target<span class="op">)</span></span>
<span id="cb116-402"><a href="#cb116-402" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span></span>
<span id="cb116-403"><a href="#cb116-403" aria-hidden="true" tabindex="-1"></a>            printf<span class="op">(</span><span class="st">&quot;もっと小さいです</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb116-404"><a href="#cb116-404" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb116-405"><a href="#cb116-405" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span></span>
<span id="cb116-406"><a href="#cb116-406" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span></span>
<span id="cb116-407"><a href="#cb116-407" aria-hidden="true" tabindex="-1"></a>            printf<span class="op">(</span><span class="st">&quot;正解！ </span><span class="sc">%d</span><span class="st">回で当たりました!</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> attempts<span class="op">);</span></span>
<span id="cb116-408"><a href="#cb116-408" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb116-409"><a href="#cb116-409" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span> <span class="cf">while</span> <span class="op">(</span>guess <span class="op">!=</span> target<span class="op">);</span></span>
<span id="cb116-410"><a href="#cb116-410" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-411"><a href="#cb116-411" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb116-412"><a href="#cb116-412" aria-hidden="true" tabindex="-1"></a><span class="op">}</span>```</span>
<span id="cb116-413"><a href="#cb116-413" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-414"><a href="#cb116-414" aria-hidden="true" tabindex="-1"></a><span class="op">---</span></span>
<span id="cb116-415"><a href="#cb116-415" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-416"><a href="#cb116-416" aria-hidden="true" tabindex="-1"></a><span class="pp"># </span><span class="er">第7章: 配列</span></span>
<span id="cb116-417"><a href="#cb116-417" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-418"><a href="#cb116-418" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-419"><a href="#cb116-419" aria-hidden="true" tabindex="-1"></a><span class="pp">#</span><span class="er">#  対応C規格</span></span>
<span id="cb116-420"><a href="#cb116-420" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> <span class="op">**</span>主要対象<span class="op">:**</span> C90</span>
<span id="cb116-421"><a href="#cb116-421" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> <span class="op">**</span>学習内容<span class="op">:**</span> 次元配列、多次元配列、文字列配列、配列の初期化、配列とポインタの関係</span>
<span id="cb116-422"><a href="#cb116-422" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-423"><a href="#cb116-423" aria-hidden="true" tabindex="-1"></a><span class="pp">#</span><span class="er">#  学習目標</span></span>
<span id="cb116-424"><a href="#cb116-424" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-425"><a href="#cb116-425" aria-hidden="true" tabindex="-1"></a>この章を完了すると、以下のことができるようになります：</span>
<span id="cb116-426"><a href="#cb116-426" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-427"><a href="#cb116-427" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> 次元配列の宣言・初期化・使用ができる</span>
<span id="cb116-428"><a href="#cb116-428" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> 多次元配列を理解して活用できる</span>
<span id="cb116-429"><a href="#cb116-429" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> 文字列配列の扱い方を完全に理解する</span>
<span id="cb116-430"><a href="#cb116-430" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> char配列とchar<span class="op">*</span>配列の違いを把握する</span>
<span id="cb116-431"><a href="#cb116-431" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> 配列を使った実践的なプログラムを作成できる</span>
<span id="cb116-432"><a href="#cb116-432" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-433"><a href="#cb116-433" aria-hidden="true" tabindex="-1"></a><span class="pp">#</span><span class="er">#  理論解説</span></span>
<span id="cb116-434"><a href="#cb116-434" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-435"><a href="#cb116-435" aria-hidden="true" tabindex="-1"></a><span class="pp">#</span><span class="er">## 配列の基本概念 </span></span>
<span id="cb116-436"><a href="#cb116-436" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-437"><a href="#cb116-437" aria-hidden="true" tabindex="-1"></a>配列は同じデータ型の要素を連続したメモリ領域に格納するデータ構造です。</span>
<span id="cb116-438"><a href="#cb116-438" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-439"><a href="#cb116-439" aria-hidden="true" tabindex="-1"></a><span class="pp">#</span><span class="er">### 次元配列の宣言</span></span>
<span id="cb116-440"><a href="#cb116-440" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-441"><a href="#cb116-441" aria-hidden="true" tabindex="-1"></a>```c</span>
<span id="cb116-442"><a href="#cb116-442" aria-hidden="true" tabindex="-1"></a>データ型 配列名<span class="op">[</span>要素数<span class="op">];</span></span></code></pre></div>
<h4 id="基本的な配列の使用例">基本的な配列の使用例</h4>
<div class="sourceCode" id="cb117"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb117-1"><a href="#cb117-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb117-2"><a href="#cb117-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-3"><a href="#cb117-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb117-4"><a href="#cb117-4" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb117-5"><a href="#cb117-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-6"><a href="#cb117-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> numbers<span class="op">[</span><span class="dv">5</span><span class="op">];</span>         <span class="co">/* 5個のint型要素を持つ配列 */</span></span>
<span id="cb117-7"><a href="#cb117-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb117-8"><a href="#cb117-8" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb117-9"><a href="#cb117-9" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 配列への値の代入 */</span></span>
<span id="cb117-10"><a href="#cb117-10" aria-hidden="true" tabindex="-1"></a>    numbers<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="dv">10</span><span class="op">;</span></span>
<span id="cb117-11"><a href="#cb117-11" aria-hidden="true" tabindex="-1"></a>    numbers<span class="op">[</span><span class="dv">1</span><span class="op">]</span> <span class="op">=</span> <span class="dv">20</span><span class="op">;</span></span>
<span id="cb117-12"><a href="#cb117-12" aria-hidden="true" tabindex="-1"></a>    numbers<span class="op">[</span><span class="dv">2</span><span class="op">]</span> <span class="op">=</span> <span class="dv">30</span><span class="op">;</span></span>
<span id="cb117-13"><a href="#cb117-13" aria-hidden="true" tabindex="-1"></a>    numbers<span class="op">[</span><span class="dv">3</span><span class="op">]</span> <span class="op">=</span> <span class="dv">40</span><span class="op">;</span></span>
<span id="cb117-14"><a href="#cb117-14" aria-hidden="true" tabindex="-1"></a>    numbers<span class="op">[</span><span class="dv">4</span><span class="op">]</span> <span class="op">=</span> <span class="dv">50</span><span class="op">;</span></span>
<span id="cb117-15"><a href="#cb117-15" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb117-16"><a href="#cb117-16" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 配列の値を出力 */</span></span>
<span id="cb117-17"><a href="#cb117-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">5</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb117-18"><a href="#cb117-18" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;numbers[</span><span class="sc">%d</span><span class="st">] = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> i<span class="op">,</span> numbers<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb117-19"><a href="#cb117-19" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb117-20"><a href="#cb117-20" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb117-21"><a href="#cb117-21" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb117-22"><a href="#cb117-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span></code></pre></div>
<h3 id="配列の初期化">配列の初期化</h3>
<h4 id="宣言時の初期化">宣言時の初期化</h4>
<div class="sourceCode" id="cb118"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb118-1"><a href="#cb118-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* 方法1: 全要素を明示的に初期化 */</span></span>
<span id="cb118-2"><a href="#cb118-2" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> scores<span class="op">[</span><span class="dv">5</span><span class="op">]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">85</span><span class="op">,</span> <span class="dv">92</span><span class="op">,</span> <span class="dv">78</span><span class="op">,</span> <span class="dv">91</span><span class="op">,</span> <span class="dv">88</span><span class="op">};</span></span>
<span id="cb118-3"><a href="#cb118-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-4"><a href="#cb118-4" aria-hidden="true" tabindex="-1"></a><span class="co">/* 方法2: 部分的な初期化（残りは0で初期化） */</span></span>
<span id="cb118-5"><a href="#cb118-5" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> values<span class="op">[</span><span class="dv">10</span><span class="op">]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span><span class="op">};</span>  <span class="co">/* values[0]=1, values[1]=2, values[2]=3, 残りは0 */</span></span>
<span id="cb118-6"><a href="#cb118-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-7"><a href="#cb118-7" aria-hidden="true" tabindex="-1"></a><span class="co">/* 方法3: サイズを省略（要素数から自動決定） */</span></span>
<span id="cb118-8"><a href="#cb118-8" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> grades<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">95</span><span class="op">,</span> <span class="dv">87</span><span class="op">,</span> <span class="dv">92</span><span class="op">,</span> <span class="dv">76</span><span class="op">,</span> <span class="dv">89</span><span class="op">};</span>  <span class="co">/* サイズは5になる */</span></span>
<span id="cb118-9"><a href="#cb118-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-10"><a href="#cb118-10" aria-hidden="true" tabindex="-1"></a><span class="co">/* 方法4: 全要素を0で初期化 */</span></span>
<span id="cb118-11"><a href="#cb118-11" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> zeros<span class="op">[</span><span class="dv">10</span><span class="op">]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">0</span><span class="op">};</span>        <span class="co">/* 全要素が0 */</span></span></code></pre></div>
<h4 id="c90での初期化の制限">C90での初期化の制限</h4>
<div class="sourceCode" id="cb119"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb119-1"><a href="#cb119-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb119-2"><a href="#cb119-2" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb119-3"><a href="#cb119-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb119-4"><a href="#cb119-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> size <span class="op">=</span> <span class="dv">5</span><span class="op">;</span></span>
<span id="cb119-5"><a href="#cb119-5" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* int arr[size];  &lt;- C90では不可（Variable Length Array） */</span></span>
<span id="cb119-6"><a href="#cb119-6" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb119-7"><a href="#cb119-7" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* C90では定数でサイズを指定 */</span></span>
<span id="cb119-8"><a href="#cb119-8" aria-hidden="true" tabindex="-1"></a>    <span class="pp">#define ARRAY_SIZE </span><span class="dv">5</span></span>
<span id="cb119-9"><a href="#cb119-9" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> arr<span class="op">[</span>ARRAY_SIZE<span class="op">]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">5</span><span class="op">};</span></span>
<span id="cb119-10"><a href="#cb119-10" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb119-11"><a href="#cb119-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span></code></pre></div>
<h3 id="配列の操作">配列の操作</h3>
<h4 id="配列要素へのアクセス">配列要素へのアクセス</h4>
<div class="sourceCode" id="cb120"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb120-1"><a href="#cb120-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb120-2"><a href="#cb120-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-3"><a href="#cb120-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb120-4"><a href="#cb120-4" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb120-5"><a href="#cb120-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-6"><a href="#cb120-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> data<span class="op">[</span><span class="dv">5</span><span class="op">]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">10</span><span class="op">,</span> <span class="dv">20</span><span class="op">,</span> <span class="dv">30</span><span class="op">,</span> <span class="dv">40</span><span class="op">,</span> <span class="dv">50</span><span class="op">};</span></span>
<span id="cb120-7"><a href="#cb120-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb120-8"><a href="#cb120-8" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb120-9"><a href="#cb120-9" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 読み取り */</span></span>
<span id="cb120-10"><a href="#cb120-10" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;3番目の要素: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> data<span class="op">[</span><span class="dv">2</span><span class="op">]);</span>  <span class="co">/* 30が出力 */</span></span>
<span id="cb120-11"><a href="#cb120-11" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb120-12"><a href="#cb120-12" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 書き込み */</span></span>
<span id="cb120-13"><a href="#cb120-13" aria-hidden="true" tabindex="-1"></a>    data<span class="op">[</span><span class="dv">2</span><span class="op">]</span> <span class="op">=</span> <span class="dv">35</span><span class="op">;</span></span>
<span id="cb120-14"><a href="#cb120-14" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb120-15"><a href="#cb120-15" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* ループでのアクセス */</span></span>
<span id="cb120-16"><a href="#cb120-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">5</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb120-17"><a href="#cb120-17" aria-hidden="true" tabindex="-1"></a>        data<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> data<span class="op">[</span>i<span class="op">]</span> <span class="op">*</span> <span class="dv">2</span><span class="op">;</span>  <span class="co">/* 各要素を2倍 */</span></span>
<span id="cb120-18"><a href="#cb120-18" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb120-19"><a href="#cb120-19" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb120-20"><a href="#cb120-20" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb120-21"><a href="#cb120-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span></code></pre></div>
<h4 id="配列のサイズ計算">配列のサイズ計算</h4>
<div class="sourceCode" id="cb121"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb121-1"><a href="#cb121-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb121-2"><a href="#cb121-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb121-3"><a href="#cb121-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb121-4"><a href="#cb121-4" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb121-5"><a href="#cb121-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb121-6"><a href="#cb121-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> numbers<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">5</span><span class="op">,</span> <span class="dv">6</span><span class="op">,</span> <span class="dv">7</span><span class="op">,</span> <span class="dv">8</span><span class="op">,</span> <span class="dv">9</span><span class="op">,</span> <span class="dv">10</span><span class="op">};</span></span>
<span id="cb121-7"><a href="#cb121-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> size<span class="op">;</span></span>
<span id="cb121-8"><a href="#cb121-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb121-9"><a href="#cb121-9" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb121-10"><a href="#cb121-10" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 配列のサイズを計算 */</span></span>
<span id="cb121-11"><a href="#cb121-11" aria-hidden="true" tabindex="-1"></a>    size <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>numbers<span class="op">)</span> <span class="op">/</span> <span class="kw">sizeof</span><span class="op">(</span>numbers<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb121-12"><a href="#cb121-12" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb121-13"><a href="#cb121-13" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;配列のサイズ: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> size<span class="op">);</span>  <span class="co">/* 10が出力 */</span></span>
<span id="cb121-14"><a href="#cb121-14" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb121-15"><a href="#cb121-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> size<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb121-16"><a href="#cb121-16" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st"> &quot;</span><span class="op">,</span> numbers<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb121-17"><a href="#cb121-17" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb121-18"><a href="#cb121-18" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb121-19"><a href="#cb121-19" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb121-20"><a href="#cb121-20" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb121-21"><a href="#cb121-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span></code></pre></div>
<h3 id="文字配列文字列">文字配列（文字列）</h3>
<h4 id="char配列による文字列">char配列による文字列</h4>
<div class="sourceCode" id="cb122"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb122-1"><a href="#cb122-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb122-2"><a href="#cb122-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-3"><a href="#cb122-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb122-4"><a href="#cb122-4" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb122-5"><a href="#cb122-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-6"><a href="#cb122-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> str1<span class="op">[</span><span class="dv">6</span><span class="op">]</span> <span class="op">=</span> <span class="op">{</span><span class="ch">&#39;H&#39;</span><span class="op">,</span> <span class="ch">&#39;e&#39;</span><span class="op">,</span> <span class="ch">&#39;l&#39;</span><span class="op">,</span> <span class="ch">&#39;l&#39;</span><span class="op">,</span> <span class="ch">&#39;o&#39;</span><span class="op">,</span> <span class="ch">&#39;</span><span class="sc">\0</span><span class="ch">&#39;</span><span class="op">};</span>  <span class="co">/* 明示的初期化 */</span></span>
<span id="cb122-7"><a href="#cb122-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> str2<span class="op">[</span><span class="dv">6</span><span class="op">]</span> <span class="op">=</span> <span class="st">&quot;Hello&quot;</span><span class="op">;</span>                           <span class="co">/* 文字列リテラル */</span></span>
<span id="cb122-8"><a href="#cb122-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> str3<span class="op">[]</span> <span class="op">=</span> <span class="st">&quot;Hello&quot;</span><span class="op">;</span>                            <span class="co">/* サイズ自動決定 */</span></span>
<span id="cb122-9"><a href="#cb122-9" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb122-10"><a href="#cb122-10" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;str1: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> str1<span class="op">);</span></span>
<span id="cb122-11"><a href="#cb122-11" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;str2: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> str2<span class="op">);</span></span>
<span id="cb122-12"><a href="#cb122-12" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;str3: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> str3<span class="op">);</span></span>
<span id="cb122-13"><a href="#cb122-13" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb122-14"><a href="#cb122-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span></code></pre></div>
<h4 id="文字配列の操作">文字配列の操作</h4>
<div class="sourceCode" id="cb123"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb123-1"><a href="#cb123-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb123-2"><a href="#cb123-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;string.h&gt;</span></span>
<span id="cb123-3"><a href="#cb123-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb123-4"><a href="#cb123-4" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb123-5"><a href="#cb123-5" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb123-6"><a href="#cb123-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb123-7"><a href="#cb123-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> buffer<span class="op">[</span><span class="dv">50</span><span class="op">];</span></span>
<span id="cb123-8"><a href="#cb123-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> name<span class="op">[</span><span class="dv">20</span><span class="op">];</span></span>
<span id="cb123-9"><a href="#cb123-9" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb123-10"><a href="#cb123-10" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb123-11"><a href="#cb123-11" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 文字列のコピー */</span></span>
<span id="cb123-12"><a href="#cb123-12" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>buffer<span class="op">,</span> <span class="st">&quot;Hello, World!&quot;</span><span class="op">);</span></span>
<span id="cb123-13"><a href="#cb123-13" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;buffer: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> buffer<span class="op">);</span></span>
<span id="cb123-14"><a href="#cb123-14" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb123-15"><a href="#cb123-15" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 文字づつのアクセス */</span></span>
<span id="cb123-16"><a href="#cb123-16" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>name<span class="op">,</span> <span class="st">&quot;Alice&quot;</span><span class="op">);</span></span>
<span id="cb123-17"><a href="#cb123-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> name<span class="op">[</span>i<span class="op">]</span> <span class="op">!=</span> <span class="ch">&#39;</span><span class="sc">\0</span><span class="ch">&#39;</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb123-18"><a href="#cb123-18" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;name[</span><span class="sc">%d</span><span class="st">] = &#39;</span><span class="sc">%c</span><span class="st">&#39;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> i<span class="op">,</span> name<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb123-19"><a href="#cb123-19" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb123-20"><a href="#cb123-20" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb123-21"><a href="#cb123-21" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb123-22"><a href="#cb123-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span></code></pre></div>
<h3 id="文字列配列の扱い">文字列配列の扱い</h3>
<p>これがユーザーの重要な要望の一2つです。</p>
<h4 id="方法-次元char配列">方法: 次元char配列</h4>
<div class="sourceCode" id="cb124"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb124-1"><a href="#cb124-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb124-2"><a href="#cb124-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;string.h&gt;</span></span>
<span id="cb124-3"><a href="#cb124-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb124-4"><a href="#cb124-4" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb124-5"><a href="#cb124-5" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb124-6"><a href="#cb124-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb124-7"><a href="#cb124-7" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 各文字列の最大長を20文字とする5つの文字列 */</span></span>
<span id="cb124-8"><a href="#cb124-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> names<span class="op">[</span><span class="dv">5</span><span class="op">][</span><span class="dv">20</span><span class="op">];</span>  <span class="co">/* 19文字+null終端文字 */</span></span>
<span id="cb124-9"><a href="#cb124-9" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb124-10"><a href="#cb124-10" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb124-11"><a href="#cb124-11" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 文字列配列への代入 */</span></span>
<span id="cb124-12"><a href="#cb124-12" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>names<span class="op">[</span><span class="dv">0</span><span class="op">],</span> <span class="st">&quot;Alice&quot;</span><span class="op">);</span></span>
<span id="cb124-13"><a href="#cb124-13" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>names<span class="op">[</span><span class="dv">1</span><span class="op">],</span> <span class="st">&quot;Bob&quot;</span><span class="op">);</span></span>
<span id="cb124-14"><a href="#cb124-14" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>names<span class="op">[</span><span class="dv">2</span><span class="op">],</span> <span class="st">&quot;Charlie&quot;</span><span class="op">);</span></span>
<span id="cb124-15"><a href="#cb124-15" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>names<span class="op">[</span><span class="dv">3</span><span class="op">],</span> <span class="st">&quot;David&quot;</span><span class="op">);</span></span>
<span id="cb124-16"><a href="#cb124-16" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>names<span class="op">[</span><span class="dv">4</span><span class="op">],</span> <span class="st">&quot;Eve&quot;</span><span class="op">);</span></span>
<span id="cb124-17"><a href="#cb124-17" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb124-18"><a href="#cb124-18" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 文字列配列の表示 */</span></span>
<span id="cb124-19"><a href="#cb124-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">5</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb124-20"><a href="#cb124-20" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;names[</span><span class="sc">%d</span><span class="st">] = </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> i<span class="op">,</span> names<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb124-21"><a href="#cb124-21" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb124-22"><a href="#cb124-22" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb124-23"><a href="#cb124-23" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb124-24"><a href="#cb124-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span></code></pre></div>
<h4 id="方法-char配列文字列ポインタ配列">方法:
char*配列（文字列ポインタ配列）</h4>
<div class="sourceCode" id="cb125"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb125-1"><a href="#cb125-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb125-2"><a href="#cb125-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb125-3"><a href="#cb125-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb125-4"><a href="#cb125-4" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb125-5"><a href="#cb125-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb125-6"><a href="#cb125-6" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 文字列ポインタの配列 */</span></span>
<span id="cb125-7"><a href="#cb125-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> <span class="op">*</span>fruits<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb125-8"><a href="#cb125-8" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;Apple&quot;</span><span class="op">,</span></span>
<span id="cb125-9"><a href="#cb125-9" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;Banana&quot;</span><span class="op">,</span> </span>
<span id="cb125-10"><a href="#cb125-10" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;Cherry&quot;</span><span class="op">,</span></span>
<span id="cb125-11"><a href="#cb125-11" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;Date&quot;</span></span>
<span id="cb125-12"><a href="#cb125-12" aria-hidden="true" tabindex="-1"></a>    <span class="op">};</span></span>
<span id="cb125-13"><a href="#cb125-13" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb125-14"><a href="#cb125-14" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb125-15"><a href="#cb125-15" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 文字列ポインタ配列の表示 */</span></span>
<span id="cb125-16"><a href="#cb125-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">4</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb125-17"><a href="#cb125-17" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;fruits[</span><span class="sc">%d</span><span class="st">] = </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> i<span class="op">,</span> fruits<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb125-18"><a href="#cb125-18" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb125-19"><a href="#cb125-19" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb125-20"><a href="#cb125-20" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb125-21"><a href="#cb125-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span></code></pre></div>
<h4 id="文字列配列の初期化パターン">文字列配列の初期化パターン</h4>
<div class="sourceCode" id="cb126"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb126-1"><a href="#cb126-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* パターン1: 2次元char配列の初期化 */</span></span>
<span id="cb126-2"><a href="#cb126-2" aria-hidden="true" tabindex="-1"></a><span class="dt">char</span> cities<span class="op">[</span><span class="dv">3</span><span class="op">][</span><span class="dv">10</span><span class="op">]</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb126-3"><a href="#cb126-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;Tokyo&quot;</span><span class="op">,</span></span>
<span id="cb126-4"><a href="#cb126-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;Osaka&quot;</span><span class="op">,</span> </span>
<span id="cb126-5"><a href="#cb126-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;Kyoto&quot;</span></span>
<span id="cb126-6"><a href="#cb126-6" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb126-7"><a href="#cb126-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb126-8"><a href="#cb126-8" aria-hidden="true" tabindex="-1"></a><span class="co">/* パターン2: char*配列の初期化 */</span></span>
<span id="cb126-9"><a href="#cb126-9" aria-hidden="true" tabindex="-1"></a><span class="dt">char</span> <span class="op">*</span>colors<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb126-10"><a href="#cb126-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;Red&quot;</span><span class="op">,</span></span>
<span id="cb126-11"><a href="#cb126-11" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;Green&quot;</span><span class="op">,</span></span>
<span id="cb126-12"><a href="#cb126-12" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;Blue&quot;</span><span class="op">,</span></span>
<span id="cb126-13"><a href="#cb126-13" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;Yellow&quot;</span></span>
<span id="cb126-14"><a href="#cb126-14" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb126-15"><a href="#cb126-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb126-16"><a href="#cb126-16" aria-hidden="true" tabindex="-1"></a><span class="co">/* パターン3: 混合初期化 */</span></span>
<span id="cb126-17"><a href="#cb126-17" aria-hidden="true" tabindex="-1"></a><span class="dt">char</span> languages<span class="op">[</span><span class="dv">4</span><span class="op">][</span><span class="dv">15</span><span class="op">]</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb126-18"><a href="#cb126-18" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;C&quot;</span><span class="op">,</span>           <span class="co">/* 文字列リテラル */</span></span>
<span id="cb126-19"><a href="#cb126-19" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;Python&quot;</span><span class="op">,</span>        <span class="co">/* 文字列リテラル */</span></span>
<span id="cb126-20"><a href="#cb126-20" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;Java&quot;</span><span class="op">,</span>        <span class="co">/* 文字列リテラル */</span></span>
<span id="cb126-21"><a href="#cb126-21" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;JavaScript&quot;</span>     <span class="co">/* 文字列リテラル */</span></span>
<span id="cb126-22"><a href="#cb126-22" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span></code></pre></div>
<h3 id="char配列-vs-char配列の違い">char配列 vs char*配列の違い</h3>
<p>これは文字列配列を扱う上で重要な概念です。</p>
<h4 id="メモリ配置の違い">メモリ配置の違い</h4>
<div class="sourceCode" id="cb127"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb127-1"><a href="#cb127-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb127-2"><a href="#cb127-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb127-3"><a href="#cb127-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb127-4"><a href="#cb127-4" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb127-5"><a href="#cb127-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb127-6"><a href="#cb127-6" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 2次元char配列 */</span></span>
<span id="cb127-7"><a href="#cb127-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> matrix<span class="op">[</span><span class="dv">3</span><span class="op">][</span><span class="dv">4</span><span class="op">]</span> <span class="op">=</span> <span class="op">{</span><span class="st">&quot;ABC&quot;</span><span class="op">,</span> <span class="st">&quot;DEF&quot;</span><span class="op">,</span> <span class="st">&quot;GHI&quot;</span><span class="op">};</span></span>
<span id="cb127-8"><a href="#cb127-8" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb127-9"><a href="#cb127-9" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* char*配列 */</span></span>
<span id="cb127-10"><a href="#cb127-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> <span class="op">*</span>pointers<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="st">&quot;ABC&quot;</span><span class="op">,</span> <span class="st">&quot;DEF&quot;</span><span class="op">,</span> <span class="st">&quot;GHI&quot;</span><span class="op">};</span></span>
<span id="cb127-11"><a href="#cb127-11" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb127-12"><a href="#cb127-12" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== 2次元char配列 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb127-13"><a href="#cb127-13" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;全体サイズ: </span><span class="sc">%lu</span><span class="st"> バイト</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="kw">sizeof</span><span class="op">(</span>matrix<span class="op">));</span>        <span class="co">/* 12バイト */</span></span>
<span id="cb127-14"><a href="#cb127-14" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;1行のサイズ: </span><span class="sc">%lu</span><span class="st"> バイト</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="kw">sizeof</span><span class="op">(</span>matrix<span class="op">[</span><span class="dv">0</span><span class="op">]));</span>    <span class="co">/* 4バイト */</span></span>
<span id="cb127-15"><a href="#cb127-15" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb127-16"><a href="#cb127-16" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">=== char*配列 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb127-17"><a href="#cb127-17" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;全体サイズ: </span><span class="sc">%lu</span><span class="st"> バイト</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="kw">sizeof</span><span class="op">(</span>pointers<span class="op">));</span>      <span class="co">/* 24バイト（8バイトx3） */</span></span>
<span id="cb127-18"><a href="#cb127-18" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;要素のサイズ: </span><span class="sc">%lu</span><span class="st"> バイト</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="kw">sizeof</span><span class="op">(</span>pointers<span class="op">[</span><span class="dv">0</span><span class="op">]));</span> <span class="co">/* 8バイト（ポインタサイズ） */</span></span>
<span id="cb127-19"><a href="#cb127-19" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb127-20"><a href="#cb127-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span></code></pre></div>
<h4 id="変更可能性の違い">変更可能性の違い</h4>
<div class="sourceCode" id="cb128"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb128-1"><a href="#cb128-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb128-2"><a href="#cb128-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;string.h&gt;</span></span>
<span id="cb128-3"><a href="#cb128-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb128-4"><a href="#cb128-4" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb128-5"><a href="#cb128-5" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb128-6"><a href="#cb128-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb128-7"><a href="#cb128-7" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 2次元char配列（変更可能） */</span></span>
<span id="cb128-8"><a href="#cb128-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> mutable_array<span class="op">[</span><span class="dv">3</span><span class="op">][</span><span class="dv">10</span><span class="op">]</span> <span class="op">=</span> <span class="op">{</span><span class="st">&quot;Hello&quot;</span><span class="op">,</span> <span class="st">&quot;World&quot;</span><span class="op">,</span> <span class="st">&quot;Test&quot;</span><span class="op">};</span></span>
<span id="cb128-9"><a href="#cb128-9" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb128-10"><a href="#cb128-10" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* char*配列（文字列リテラルは変更不可） */</span></span>
<span id="cb128-11"><a href="#cb128-11" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> <span class="op">*</span>immutable_array<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="st">&quot;Hello&quot;</span><span class="op">,</span> <span class="st">&quot;World&quot;</span><span class="op">,</span> <span class="st">&quot;Test&quot;</span><span class="op">};</span></span>
<span id="cb128-12"><a href="#cb128-12" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb128-13"><a href="#cb128-13" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 配列の内容変更 */</span></span>
<span id="cb128-14"><a href="#cb128-14" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>mutable_array<span class="op">[</span><span class="dv">0</span><span class="op">],</span> <span class="st">&quot;Hi&quot;</span><span class="op">);</span>     <span class="co">/* OK: 内容変更可能 */</span></span>
<span id="cb128-15"><a href="#cb128-15" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* strcpy(immutable_array[0], &quot;Hi&quot;); &lt;- NG: 文字列リテラルは変更不可 */</span></span>
<span id="cb128-16"><a href="#cb128-16" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb128-17"><a href="#cb128-17" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* ポインタの変更 */</span></span>
<span id="cb128-18"><a href="#cb128-18" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* mutable_array[0] = &quot;New&quot;; &lt;- NG: 配列名は変更不可 */</span></span>
<span id="cb128-19"><a href="#cb128-19" aria-hidden="true" tabindex="-1"></a>    immutable_array<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="st">&quot;New&quot;</span><span class="op">;</span>         <span class="co">/* OK: ポインタ変更可能 */</span></span>
<span id="cb128-20"><a href="#cb128-20" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb128-21"><a href="#cb128-21" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;mutable_array[0]: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> mutable_array<span class="op">[</span><span class="dv">0</span><span class="op">]);</span>     <span class="co">/* &quot;Hi&quot; */</span></span>
<span id="cb128-22"><a href="#cb128-22" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;immutable_array[0]: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> immutable_array<span class="op">[</span><span class="dv">0</span><span class="op">]);</span> <span class="co">/* &quot;New&quot; */</span></span>
<span id="cb128-23"><a href="#cb128-23" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb128-24"><a href="#cb128-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span></code></pre></div>
<h4 id="用途に応じた使い分け">用途に応じた使い分け</h4>
<div class="sourceCode" id="cb129"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb129-1"><a href="#cb129-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* 固定文字列の配列（読み取り専用） - char*配列が適している */</span></span>
<span id="cb129-2"><a href="#cb129-2" aria-hidden="true" tabindex="-1"></a><span class="dt">char</span> <span class="op">*</span>error_messages<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb129-3"><a href="#cb129-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;Success&quot;</span><span class="op">,</span></span>
<span id="cb129-4"><a href="#cb129-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;File not found&quot;</span><span class="op">,</span></span>
<span id="cb129-5"><a href="#cb129-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;Permission denied&quot;</span><span class="op">,</span></span>
<span id="cb129-6"><a href="#cb129-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;Out of memory&quot;</span></span>
<span id="cb129-7"><a href="#cb129-7" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb129-8"><a href="#cb129-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-9"><a href="#cb129-9" aria-hidden="true" tabindex="-1"></a><span class="co">/* 動的に変更する文字列配列 - 2次元char配列が適している */</span></span>
<span id="cb129-10"><a href="#cb129-10" aria-hidden="true" tabindex="-1"></a><span class="dt">char</span> user_inputs<span class="op">[</span><span class="dv">10</span><span class="op">][</span><span class="dv">100</span><span class="op">];</span>  <span class="co">/* ユーザー入力を格納 */</span></span>
<span id="cb129-11"><a href="#cb129-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-12"><a href="#cb129-12" aria-hidden="true" tabindex="-1"></a><span class="co">/* 設定項目など（変更の可能性あり） - char*配列が適している */</span></span>
<span id="cb129-13"><a href="#cb129-13" aria-hidden="true" tabindex="-1"></a><span class="dt">char</span> <span class="op">*</span>config_items<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb129-14"><a href="#cb129-14" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;debug=on&quot;</span><span class="op">,</span></span>
<span id="cb129-15"><a href="#cb129-15" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;log_level=info&quot;</span><span class="op">,</span> </span>
<span id="cb129-16"><a href="#cb129-16" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;max_connections=100&quot;</span></span>
<span id="cb129-17"><a href="#cb129-17" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span></code></pre></div>
<h3 id="多次元配列">多次元配列</h3>
<h4 id="次元配列の基本">次元配列の基本</h4>
<div class="sourceCode" id="cb130"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb130-1"><a href="#cb130-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb130-2"><a href="#cb130-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb130-3"><a href="#cb130-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb130-4"><a href="#cb130-4" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb130-5"><a href="#cb130-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb130-6"><a href="#cb130-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> matrix<span class="op">[</span><span class="dv">3</span><span class="op">][</span><span class="dv">4</span><span class="op">]</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb130-7"><a href="#cb130-7" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span><span class="dv">1</span><span class="op">,</span>  <span class="dv">2</span><span class="op">,</span>  <span class="dv">3</span><span class="op">,</span>  <span class="dv">4</span><span class="op">},</span></span>
<span id="cb130-8"><a href="#cb130-8" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span><span class="dv">5</span><span class="op">,</span>  <span class="dv">6</span><span class="op">,</span>  <span class="dv">7</span><span class="op">,</span>  <span class="dv">8</span><span class="op">},</span></span>
<span id="cb130-9"><a href="#cb130-9" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span><span class="dv">9</span><span class="op">,</span> <span class="dv">10</span><span class="op">,</span> <span class="dv">11</span><span class="op">,</span> <span class="dv">12</span><span class="op">}</span></span>
<span id="cb130-10"><a href="#cb130-10" aria-hidden="true" tabindex="-1"></a>    <span class="op">};</span></span>
<span id="cb130-11"><a href="#cb130-11" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">,</span> j<span class="op">;</span></span>
<span id="cb130-12"><a href="#cb130-12" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb130-13"><a href="#cb130-13" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 2次元配列の表示 */</span></span>
<span id="cb130-14"><a href="#cb130-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">3</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb130-15"><a href="#cb130-15" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span>j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> j <span class="op">&lt;</span> <span class="dv">4</span><span class="op">;</span> j<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb130-16"><a href="#cb130-16" aria-hidden="true" tabindex="-1"></a>            printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st"> &quot;</span><span class="op">,</span> matrix<span class="op">[</span>i<span class="op">][</span>j<span class="op">]);</span></span>
<span id="cb130-17"><a href="#cb130-17" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb130-18"><a href="#cb130-18" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb130-19"><a href="#cb130-19" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb130-20"><a href="#cb130-20" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb130-21"><a href="#cb130-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span></code></pre></div>
<h4 id="次元配列の例">次元配列の例</h4>
<div class="sourceCode" id="cb131"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb131-1"><a href="#cb131-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb131-2"><a href="#cb131-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-3"><a href="#cb131-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb131-4"><a href="#cb131-4" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb131-5"><a href="#cb131-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-6"><a href="#cb131-6" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 3次元配列: [2][3][4] */</span></span>
<span id="cb131-7"><a href="#cb131-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> cube<span class="op">[</span><span class="dv">2</span><span class="op">][</span><span class="dv">3</span><span class="op">][</span><span class="dv">4</span><span class="op">]</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb131-8"><a href="#cb131-8" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span></span>
<span id="cb131-9"><a href="#cb131-9" aria-hidden="true" tabindex="-1"></a>            <span class="op">{</span><span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">4</span><span class="op">},</span></span>
<span id="cb131-10"><a href="#cb131-10" aria-hidden="true" tabindex="-1"></a>            <span class="op">{</span><span class="dv">5</span><span class="op">,</span> <span class="dv">6</span><span class="op">,</span> <span class="dv">7</span><span class="op">,</span> <span class="dv">8</span><span class="op">},</span></span>
<span id="cb131-11"><a href="#cb131-11" aria-hidden="true" tabindex="-1"></a>            <span class="op">{</span><span class="dv">9</span><span class="op">,</span> <span class="dv">10</span><span class="op">,</span> <span class="dv">11</span><span class="op">,</span> <span class="dv">12</span><span class="op">}</span></span>
<span id="cb131-12"><a href="#cb131-12" aria-hidden="true" tabindex="-1"></a>        <span class="op">},</span></span>
<span id="cb131-13"><a href="#cb131-13" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span></span>
<span id="cb131-14"><a href="#cb131-14" aria-hidden="true" tabindex="-1"></a>            <span class="op">{</span><span class="dv">13</span><span class="op">,</span> <span class="dv">14</span><span class="op">,</span> <span class="dv">15</span><span class="op">,</span> <span class="dv">16</span><span class="op">},</span></span>
<span id="cb131-15"><a href="#cb131-15" aria-hidden="true" tabindex="-1"></a>            <span class="op">{</span><span class="dv">17</span><span class="op">,</span> <span class="dv">18</span><span class="op">,</span> <span class="dv">19</span><span class="op">,</span> <span class="dv">20</span><span class="op">},</span></span>
<span id="cb131-16"><a href="#cb131-16" aria-hidden="true" tabindex="-1"></a>            <span class="op">{</span><span class="dv">21</span><span class="op">,</span> <span class="dv">22</span><span class="op">,</span> <span class="dv">23</span><span class="op">,</span> <span class="dv">24</span><span class="op">}</span></span>
<span id="cb131-17"><a href="#cb131-17" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb131-18"><a href="#cb131-18" aria-hidden="true" tabindex="-1"></a>    <span class="op">};</span></span>
<span id="cb131-19"><a href="#cb131-19" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">,</span> j<span class="op">,</span> k<span class="op">;</span></span>
<span id="cb131-20"><a href="#cb131-20" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb131-21"><a href="#cb131-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">2</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb131-22"><a href="#cb131-22" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;=== Layer </span><span class="sc">%d</span><span class="st"> ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> i<span class="op">);</span></span>
<span id="cb131-23"><a href="#cb131-23" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span>j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> j <span class="op">&lt;</span> <span class="dv">3</span><span class="op">;</span> j<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb131-24"><a href="#cb131-24" aria-hidden="true" tabindex="-1"></a>            <span class="cf">for</span> <span class="op">(</span>k <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> k <span class="op">&lt;</span> <span class="dv">4</span><span class="op">;</span> k<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb131-25"><a href="#cb131-25" aria-hidden="true" tabindex="-1"></a>                printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st"> &quot;</span><span class="op">,</span> cube<span class="op">[</span>i<span class="op">][</span>j<span class="op">][</span>k<span class="op">]);</span></span>
<span id="cb131-26"><a href="#cb131-26" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb131-27"><a href="#cb131-27" aria-hidden="true" tabindex="-1"></a>            printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb131-28"><a href="#cb131-28" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb131-29"><a href="#cb131-29" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb131-30"><a href="#cb131-30" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb131-31"><a href="#cb131-31" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb131-32"><a href="#cb131-32" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span></code></pre></div>
<h3 id="配列の実践的応用">配列の実践的応用</h3>
<h4 id="成績管理システム">成績管理システム</h4>
<div class="sourceCode" id="cb132"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb132-1"><a href="#cb132-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb132-2"><a href="#cb132-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb132-3"><a href="#cb132-3" aria-hidden="true" tabindex="-1"></a><span class="pp">#define MAX_STUDENTS </span><span class="dv">5</span></span>
<span id="cb132-4"><a href="#cb132-4" aria-hidden="true" tabindex="-1"></a><span class="pp">#define MAX_SUBJECTS </span><span class="dv">3</span></span>
<span id="cb132-5"><a href="#cb132-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb132-6"><a href="#cb132-6" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb132-7"><a href="#cb132-7" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb132-8"><a href="#cb132-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb132-9"><a href="#cb132-9" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> students<span class="op">[</span>MAX_STUDENTS<span class="op">][</span><span class="dv">20</span><span class="op">]</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb132-10"><a href="#cb132-10" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;Alice&quot;</span><span class="op">,</span> <span class="st">&quot;Bob&quot;</span><span class="op">,</span> <span class="st">&quot;Charlie&quot;</span><span class="op">,</span> <span class="st">&quot;David&quot;</span><span class="op">,</span> <span class="st">&quot;Eve&quot;</span></span>
<span id="cb132-11"><a href="#cb132-11" aria-hidden="true" tabindex="-1"></a>    <span class="op">};</span></span>
<span id="cb132-12"><a href="#cb132-12" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> subjects<span class="op">[</span>MAX_SUBJECTS<span class="op">][</span><span class="dv">10</span><span class="op">]</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb132-13"><a href="#cb132-13" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;Math&quot;</span><span class="op">,</span> <span class="st">&quot;English&quot;</span><span class="op">,</span> <span class="st">&quot;Science&quot;</span></span>
<span id="cb132-14"><a href="#cb132-14" aria-hidden="true" tabindex="-1"></a>    <span class="op">};</span></span>
<span id="cb132-15"><a href="#cb132-15" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> scores<span class="op">[</span>MAX_STUDENTS<span class="op">][</span>MAX_SUBJECTS<span class="op">]</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb132-16"><a href="#cb132-16" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span><span class="dv">85</span><span class="op">,</span> <span class="dv">92</span><span class="op">,</span> <span class="dv">78</span><span class="op">},</span>  <span class="co">/* Alice */</span></span>
<span id="cb132-17"><a href="#cb132-17" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span><span class="dv">90</span><span class="op">,</span> <span class="dv">87</span><span class="op">,</span> <span class="dv">85</span><span class="op">},</span>  <span class="co">/* Bob */</span></span>
<span id="cb132-18"><a href="#cb132-18" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span><span class="dv">95</span><span class="op">,</span> <span class="dv">91</span><span class="op">,</span> <span class="dv">89</span><span class="op">},</span>  <span class="co">/* Charlie */</span></span>
<span id="cb132-19"><a href="#cb132-19" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span><span class="dv">82</span><span class="op">,</span> <span class="dv">79</span><span class="op">,</span> <span class="dv">88</span><span class="op">},</span>  <span class="co">/* David */</span></span>
<span id="cb132-20"><a href="#cb132-20" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span><span class="dv">91</span><span class="op">,</span> <span class="dv">88</span><span class="op">,</span> <span class="dv">93</span><span class="op">}</span>   <span class="co">/* Eve */</span></span>
<span id="cb132-21"><a href="#cb132-21" aria-hidden="true" tabindex="-1"></a>    <span class="op">};</span></span>
<span id="cb132-22"><a href="#cb132-22" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">,</span> j<span class="op">;</span></span>
<span id="cb132-23"><a href="#cb132-23" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> total<span class="op">;</span></span>
<span id="cb132-24"><a href="#cb132-24" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb132-25"><a href="#cb132-25" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 成績表の表示 */</span></span>
<span id="cb132-26"><a href="#cb132-26" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;Student    &quot;</span><span class="op">);</span></span>
<span id="cb132-27"><a href="#cb132-27" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> j <span class="op">&lt;</span> MAX_SUBJECTS<span class="op">;</span> j<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb132-28"><a href="#cb132-28" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%-10s</span><span class="st">&quot;</span><span class="op">,</span> subjects<span class="op">[</span>j<span class="op">]);</span></span>
<span id="cb132-29"><a href="#cb132-29" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb132-30"><a href="#cb132-30" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;Average</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb132-31"><a href="#cb132-31" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;----------------------------------------</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb132-32"><a href="#cb132-32" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb132-33"><a href="#cb132-33" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> MAX_STUDENTS<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb132-34"><a href="#cb132-34" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%-10s</span><span class="st"> &quot;</span><span class="op">,</span> students<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb132-35"><a href="#cb132-35" aria-hidden="true" tabindex="-1"></a>        total <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb132-36"><a href="#cb132-36" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span>j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> j <span class="op">&lt;</span> MAX_SUBJECTS<span class="op">;</span> j<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb132-37"><a href="#cb132-37" aria-hidden="true" tabindex="-1"></a>            printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%-10d</span><span class="st">&quot;</span><span class="op">,</span> scores<span class="op">[</span>i<span class="op">][</span>j<span class="op">]);</span></span>
<span id="cb132-38"><a href="#cb132-38" aria-hidden="true" tabindex="-1"></a>            total <span class="op">+=</span> scores<span class="op">[</span>i<span class="op">][</span>j<span class="op">];</span></span>
<span id="cb132-39"><a href="#cb132-39" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb132-40"><a href="#cb132-40" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%.1f\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(</span><span class="dt">double</span><span class="op">)</span>total <span class="op">/</span> MAX_SUBJECTS<span class="op">);</span></span>
<span id="cb132-41"><a href="#cb132-41" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb132-42"><a href="#cb132-42" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb132-43"><a href="#cb132-43" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span></code></pre></div>
<h4 id="文字列配列のソート">文字列配列のソート</h4>
<div class="sourceCode" id="cb133"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb133-1"><a href="#cb133-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb133-2"><a href="#cb133-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;string.h&gt;</span></span>
<span id="cb133-3"><a href="#cb133-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb133-4"><a href="#cb133-4" aria-hidden="true" tabindex="-1"></a><span class="pp">#define MAX_NAMES </span><span class="dv">5</span></span>
<span id="cb133-5"><a href="#cb133-5" aria-hidden="true" tabindex="-1"></a><span class="pp">#define MAX_LENGTH </span><span class="dv">20</span></span>
<span id="cb133-6"><a href="#cb133-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb133-7"><a href="#cb133-7" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb133-8"><a href="#cb133-8" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb133-9"><a href="#cb133-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb133-10"><a href="#cb133-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> names<span class="op">[</span>MAX_NAMES<span class="op">][</span>MAX_LENGTH<span class="op">]</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb133-11"><a href="#cb133-11" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;Charlie&quot;</span><span class="op">,</span> <span class="st">&quot;Alice&quot;</span><span class="op">,</span> <span class="st">&quot;Eve&quot;</span><span class="op">,</span> <span class="st">&quot;Bob&quot;</span><span class="op">,</span> <span class="st">&quot;David&quot;</span></span>
<span id="cb133-12"><a href="#cb133-12" aria-hidden="true" tabindex="-1"></a>    <span class="op">};</span></span>
<span id="cb133-13"><a href="#cb133-13" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> temp<span class="op">[</span>MAX_LENGTH<span class="op">];</span></span>
<span id="cb133-14"><a href="#cb133-14" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">,</span> j<span class="op">;</span></span>
<span id="cb133-15"><a href="#cb133-15" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb133-16"><a href="#cb133-16" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ソート前:</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb133-17"><a href="#cb133-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> MAX_NAMES<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb133-18"><a href="#cb133-18" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%s</span><span class="st"> &quot;</span><span class="op">,</span> names<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb133-19"><a href="#cb133-19" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb133-20"><a href="#cb133-20" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb133-21"><a href="#cb133-21" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb133-22"><a href="#cb133-22" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* バブルソート */</span></span>
<span id="cb133-23"><a href="#cb133-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> MAX_NAMES <span class="op">-</span> <span class="dv">1</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb133-24"><a href="#cb133-24" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span>j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> j <span class="op">&lt;</span> MAX_NAMES <span class="op">-</span> <span class="dv">1</span> <span class="op">-</span> i<span class="op">;</span> j<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb133-25"><a href="#cb133-25" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>strcmp<span class="op">(</span>names<span class="op">[</span>j<span class="op">],</span> names<span class="op">[</span>j <span class="op">+</span> <span class="dv">1</span><span class="op">])</span> <span class="op">&gt;</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb133-26"><a href="#cb133-26" aria-hidden="true" tabindex="-1"></a>                strcpy<span class="op">(</span>temp<span class="op">,</span> names<span class="op">[</span>j<span class="op">]);</span></span>
<span id="cb133-27"><a href="#cb133-27" aria-hidden="true" tabindex="-1"></a>                strcpy<span class="op">(</span>names<span class="op">[</span>j<span class="op">],</span> names<span class="op">[</span>j <span class="op">+</span> <span class="dv">1</span><span class="op">]);</span></span>
<span id="cb133-28"><a href="#cb133-28" aria-hidden="true" tabindex="-1"></a>                strcpy<span class="op">(</span>names<span class="op">[</span>j <span class="op">+</span> <span class="dv">1</span><span class="op">],</span> temp<span class="op">);</span></span>
<span id="cb133-29"><a href="#cb133-29" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb133-30"><a href="#cb133-30" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb133-31"><a href="#cb133-31" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb133-32"><a href="#cb133-32" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb133-33"><a href="#cb133-33" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ソート後:</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb133-34"><a href="#cb133-34" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> MAX_NAMES<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb133-35"><a href="#cb133-35" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%s</span><span class="st"> &quot;</span><span class="op">,</span> names<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb133-36"><a href="#cb133-36" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb133-37"><a href="#cb133-37" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb133-38"><a href="#cb133-38" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb133-39"><a href="#cb133-39" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span></code></pre></div>
<h3 id="配列とポインタの関係">配列とポインタの関係</h3>
<p>配列名はその先頭要素へのポインタとして動作します。</p>
<div class="sourceCode" id="cb134"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb134-1"><a href="#cb134-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb134-2"><a href="#cb134-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb134-3"><a href="#cb134-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb134-4"><a href="#cb134-4" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb134-5"><a href="#cb134-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb134-6"><a href="#cb134-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> arr<span class="op">[</span><span class="dv">5</span><span class="op">]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">10</span><span class="op">,</span> <span class="dv">20</span><span class="op">,</span> <span class="dv">30</span><span class="op">,</span> <span class="dv">40</span><span class="op">,</span> <span class="dv">50</span><span class="op">};</span></span>
<span id="cb134-7"><a href="#cb134-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> <span class="op">*</span>ptr<span class="op">;</span></span>
<span id="cb134-8"><a href="#cb134-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb134-9"><a href="#cb134-9" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb134-10"><a href="#cb134-10" aria-hidden="true" tabindex="-1"></a>    ptr <span class="op">=</span> arr<span class="op">;</span>  <span class="co">/* arr は &amp;arr[0] と同じ */</span></span>
<span id="cb134-11"><a href="#cb134-11" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb134-12"><a href="#cb134-12" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== 配列表記 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb134-13"><a href="#cb134-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">5</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb134-14"><a href="#cb134-14" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;arr[</span><span class="sc">%d</span><span class="st">] = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> i<span class="op">,</span> arr<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb134-15"><a href="#cb134-15" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb134-16"><a href="#cb134-16" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb134-17"><a href="#cb134-17" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">=== ポインタ表記 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb134-18"><a href="#cb134-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">5</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb134-19"><a href="#cb134-19" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;*(ptr + </span><span class="sc">%d</span><span class="st">) = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> i<span class="op">,</span> <span class="op">*(</span>ptr <span class="op">+</span> i<span class="op">));</span></span>
<span id="cb134-20"><a href="#cb134-20" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb134-21"><a href="#cb134-21" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb134-22"><a href="#cb134-22" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 配列名とポインタの関係 */</span></span>
<span id="cb134-23"><a href="#cb134-23" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">=== アドレス比較 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb134-24"><a href="#cb134-24" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;arr = </span><span class="sc">%p\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(</span><span class="dt">void</span><span class="op">*)</span>arr<span class="op">);</span></span>
<span id="cb134-25"><a href="#cb134-25" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;&amp;arr[0] = </span><span class="sc">%p\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(</span><span class="dt">void</span><span class="op">*)&amp;</span>arr<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb134-26"><a href="#cb134-26" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ptr = </span><span class="sc">%p\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(</span><span class="dt">void</span><span class="op">*)</span>ptr<span class="op">);</span></span>
<span id="cb134-27"><a href="#cb134-27" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb134-28"><a href="#cb134-28" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span></code></pre></div>
<h2 id="実践的なプログラム例">実践的なプログラム例</h2>
<h3 id="基本的な配列操作c90準拠">基本的な配列操作（C90準拠）</h3>
<h4 id="次元配列の基本-1">1次元配列の基本</h4>
<div class="sourceCode" id="cb135"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb135-1"><a href="#cb135-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb135-2"><a href="#cb135-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb135-3"><a href="#cb135-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb135-4"><a href="#cb135-4" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb135-5"><a href="#cb135-5" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* C90では先頭で全ての変数を宣言 */</span></span>
<span id="cb135-6"><a href="#cb135-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> numbers<span class="op">[</span><span class="dv">5</span><span class="op">]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">10</span><span class="op">,</span> <span class="dv">20</span><span class="op">,</span> <span class="dv">30</span><span class="op">,</span> <span class="dv">40</span><span class="op">,</span> <span class="dv">50</span><span class="op">};</span></span>
<span id="cb135-7"><a href="#cb135-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> total <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb135-8"><a href="#cb135-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb135-9"><a href="#cb135-9" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb135-10"><a href="#cb135-10" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 配列の全要素を表示 */</span></span>
<span id="cb135-11"><a href="#cb135-11" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== 配列の内容 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb135-12"><a href="#cb135-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">5</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb135-13"><a href="#cb135-13" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;numbers[</span><span class="sc">%d</span><span class="st">] = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> i<span class="op">,</span> numbers<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb135-14"><a href="#cb135-14" aria-hidden="true" tabindex="-1"></a>        total <span class="op">+=</span> numbers<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb135-15"><a href="#cb135-15" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb135-16"><a href="#cb135-16" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb135-17"><a href="#cb135-17" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;合計: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> total<span class="op">);</span></span>
<span id="cb135-18"><a href="#cb135-18" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;平均: </span><span class="sc">%.1f\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(</span><span class="dt">double</span><span class="op">)</span>total <span class="op">/</span> <span class="dv">5</span><span class="op">);</span></span>
<span id="cb135-19"><a href="#cb135-19" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb135-20"><a href="#cb135-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb135-21"><a href="#cb135-21" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>📁 <strong>ファイル</strong>: <a
href="examples/array_basics.c"><code>examples/array_basics.c</code></a><br />
📁 <strong>C99版</strong>: <a
href="examples/array_basics_c99.c"><code>examples/array_basics_c99.c</code></a></p>
<h3 id="文字列配列の実例c90準拠">文字列配列の実例（C90準拠）</h3>
<h4 id="char配列-vs-char配列の違い-1">char配列 vs char*配列の違い</h4>
<div class="sourceCode" id="cb136"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb136-1"><a href="#cb136-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb136-2"><a href="#cb136-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;string.h&gt;</span></span>
<span id="cb136-3"><a href="#cb136-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-4"><a href="#cb136-4" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb136-5"><a href="#cb136-5" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb136-6"><a href="#cb136-6" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* C90では先頭で全ての変数を宣言 */</span></span>
<span id="cb136-7"><a href="#cb136-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> cities<span class="op">[</span><span class="dv">3</span><span class="op">][</span><span class="dv">20</span><span class="op">]</span> <span class="op">=</span> <span class="op">{</span><span class="st">&quot;Tokyo&quot;</span><span class="op">,</span> <span class="st">&quot;Osaka&quot;</span><span class="op">,</span> <span class="st">&quot;Kyoto&quot;</span><span class="op">};</span>  <span class="co">/* 2次元char配列 */</span></span>
<span id="cb136-8"><a href="#cb136-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> <span class="op">*</span>fruits<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="st">&quot;Apple&quot;</span><span class="op">,</span> <span class="st">&quot;Banana&quot;</span><span class="op">,</span> <span class="st">&quot;Cherry&quot;</span><span class="op">};</span>    <span class="co">/* char*配列 */</span></span>
<span id="cb136-9"><a href="#cb136-9" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb136-10"><a href="#cb136-10" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb136-11"><a href="#cb136-11" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== 2次元char配列 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb136-12"><a href="#cb136-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">3</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb136-13"><a href="#cb136-13" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;cities[</span><span class="sc">%d</span><span class="st">] = </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> i<span class="op">,</span> cities<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb136-14"><a href="#cb136-14" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb136-15"><a href="#cb136-15" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb136-16"><a href="#cb136-16" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">=== char*配列 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb136-17"><a href="#cb136-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">3</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb136-18"><a href="#cb136-18" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;fruits[</span><span class="sc">%d</span><span class="st">] = </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> i<span class="op">,</span> fruits<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb136-19"><a href="#cb136-19" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb136-20"><a href="#cb136-20" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb136-21"><a href="#cb136-21" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* メモリサイズの違い */</span></span>
<span id="cb136-22"><a href="#cb136-22" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">=== メモリサイズ比較 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb136-23"><a href="#cb136-23" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;cities配列のサイズ: </span><span class="sc">%lu</span><span class="st"> バイト</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(</span><span class="dt">unsigned</span> <span class="dt">long</span><span class="op">)</span><span class="kw">sizeof</span><span class="op">(</span>cities<span class="op">));</span></span>
<span id="cb136-24"><a href="#cb136-24" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;fruits配列のサイズ: </span><span class="sc">%lu</span><span class="st"> バイト</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(</span><span class="dt">unsigned</span> <span class="dt">long</span><span class="op">)</span><span class="kw">sizeof</span><span class="op">(</span>fruits<span class="op">));</span></span>
<span id="cb136-25"><a href="#cb136-25" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb136-26"><a href="#cb136-26" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb136-27"><a href="#cb136-27" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>📁 <strong>ファイル</strong>: <a
href="examples/string_arrays.c"><code>examples/string_arrays.c</code></a><br />
📁 <strong>C99版</strong>: <a
href="examples/string_arrays_c99.c"><code>examples/string_arrays_c99.c</code></a></p>
<h3 id="多次元配列の活用c90準拠">多次元配列の活用（C90準拠）</h3>
<h4 id="x4行列の操作">3x4行列の操作</h4>
<div class="sourceCode" id="cb137"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb137-1"><a href="#cb137-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb137-2"><a href="#cb137-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-3"><a href="#cb137-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb137-4"><a href="#cb137-4" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb137-5"><a href="#cb137-5" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* C90では先頭で全ての変数を宣言 */</span></span>
<span id="cb137-6"><a href="#cb137-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> matrix<span class="op">[</span><span class="dv">3</span><span class="op">][</span><span class="dv">4</span><span class="op">]</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb137-7"><a href="#cb137-7" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span><span class="dv">1</span><span class="op">,</span>  <span class="dv">2</span><span class="op">,</span>  <span class="dv">3</span><span class="op">,</span>  <span class="dv">4</span><span class="op">},</span></span>
<span id="cb137-8"><a href="#cb137-8" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span><span class="dv">5</span><span class="op">,</span>  <span class="dv">6</span><span class="op">,</span>  <span class="dv">7</span><span class="op">,</span>  <span class="dv">8</span><span class="op">},</span></span>
<span id="cb137-9"><a href="#cb137-9" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span><span class="dv">9</span><span class="op">,</span> <span class="dv">10</span><span class="op">,</span> <span class="dv">11</span><span class="op">,</span> <span class="dv">12</span><span class="op">}</span></span>
<span id="cb137-10"><a href="#cb137-10" aria-hidden="true" tabindex="-1"></a>    <span class="op">};</span></span>
<span id="cb137-11"><a href="#cb137-11" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">,</span> j<span class="op">;</span></span>
<span id="cb137-12"><a href="#cb137-12" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> row_sum<span class="op">;</span></span>
<span id="cb137-13"><a href="#cb137-13" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb137-14"><a href="#cb137-14" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== 行列の表示 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb137-15"><a href="#cb137-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">3</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb137-16"><a href="#cb137-16" aria-hidden="true" tabindex="-1"></a>        row_sum <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb137-17"><a href="#cb137-17" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span>j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> j <span class="op">&lt;</span> <span class="dv">4</span><span class="op">;</span> j<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb137-18"><a href="#cb137-18" aria-hidden="true" tabindex="-1"></a>            printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%3d</span><span class="st"> &quot;</span><span class="op">,</span> matrix<span class="op">[</span>i<span class="op">][</span>j<span class="op">]);</span></span>
<span id="cb137-19"><a href="#cb137-19" aria-hidden="true" tabindex="-1"></a>            row_sum <span class="op">+=</span> matrix<span class="op">[</span>i<span class="op">][</span>j<span class="op">];</span></span>
<span id="cb137-20"><a href="#cb137-20" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb137-21"><a href="#cb137-21" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;| 行の合計: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> row_sum<span class="op">);</span></span>
<span id="cb137-22"><a href="#cb137-22" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb137-23"><a href="#cb137-23" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb137-24"><a href="#cb137-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb137-25"><a href="#cb137-25" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>📁 <strong>ファイル</strong>: <a
href="examples/multidimensional_arrays.c"><code>examples/multidimensional_arrays.c</code></a><br />
📁 <strong>C99版</strong>: <a
href="examples/multidimensional_arrays_c99.c"><code>examples/multidimensional_arrays_c99.c</code></a></p>
<h3 id="コンパイル方法-6">コンパイル方法</h3>
<h4 id="基本的なコンパイルc90準拠">基本的なコンパイル（C90準拠）</h4>
<div class="sourceCode" id="cb138"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb138-1"><a href="#cb138-1" aria-hidden="true" tabindex="-1"></a><span class="fu">gcc</span> <span class="at">-std</span><span class="op">=</span>c90 <span class="at">-Wall</span> <span class="at">-Wextra</span> <span class="at">-pedantic</span> array_basics.c <span class="at">-o</span> array_basics</span></code></pre></div>
<h4 id="makefileを使用した場合">Makefileを使用した場合</h4>
<div class="sourceCode" id="cb139"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb139-1"><a href="#cb139-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 全てのプログラムをコンパイル</span></span>
<span id="cb139-2"><a href="#cb139-2" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> all</span>
<span id="cb139-3"><a href="#cb139-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-4"><a href="#cb139-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 特定のプログラムをコンパイル  </span></span>
<span id="cb139-5"><a href="#cb139-5" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> array_basics</span>
<span id="cb139-6"><a href="#cb139-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-7"><a href="#cb139-7" aria-hidden="true" tabindex="-1"></a><span class="co"># C99版をコンパイル</span></span>
<span id="cb139-8"><a href="#cb139-8" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> array_basics_c99</span>
<span id="cb139-9"><a href="#cb139-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-10"><a href="#cb139-10" aria-hidden="true" tabindex="-1"></a><span class="co"># プログラムを実行</span></span>
<span id="cb139-11"><a href="#cb139-11" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> run-all</span>
<span id="cb139-12"><a href="#cb139-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-13"><a href="#cb139-13" aria-hidden="true" tabindex="-1"></a><span class="co"># クリーンアップ</span></span>
<span id="cb139-14"><a href="#cb139-14" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> clean</span></code></pre></div>
<h2 id="演習課題と解答例">演習課題と解答例</h2>
<h3 id="利用可能な演習問題">利用可能な演習問題</h3>
<p><a
href="exercises/README.md">演習問題詳細</a>では、配列と文字列配列の理解を深める課題が提供されています。</p>
<h4 id="演習6-1-配列の基本操作c90準拠">演習6-1:
配列の基本操作（C90準拠）</h4>
<div class="sourceCode" id="cb140"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb140-1"><a href="#cb140-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb140-2"><a href="#cb140-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb140-3"><a href="#cb140-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb140-4"><a href="#cb140-4" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb140-5"><a href="#cb140-5" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* C90では先頭で全ての変数を宣言 */</span></span>
<span id="cb140-6"><a href="#cb140-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> numbers<span class="op">[</span><span class="dv">10</span><span class="op">]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">15</span><span class="op">,</span> <span class="dv">23</span><span class="op">,</span> <span class="dv">8</span><span class="op">,</span> <span class="dv">42</span><span class="op">,</span> <span class="dv">7</span><span class="op">,</span> <span class="dv">31</span><span class="op">,</span> <span class="dv">19</span><span class="op">,</span> <span class="dv">5</span><span class="op">,</span> <span class="dv">28</span><span class="op">,</span> <span class="dv">36</span><span class="op">};</span></span>
<span id="cb140-7"><a href="#cb140-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb140-8"><a href="#cb140-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> max<span class="op">,</span> min<span class="op">,</span> sum<span class="op">;</span></span>
<span id="cb140-9"><a href="#cb140-9" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span> average<span class="op">;</span></span>
<span id="cb140-10"><a href="#cb140-10" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb140-11"><a href="#cb140-11" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 最大値、最小値、合計の初期化 */</span></span>
<span id="cb140-12"><a href="#cb140-12" aria-hidden="true" tabindex="-1"></a>    max <span class="op">=</span> min <span class="op">=</span> sum <span class="op">=</span> numbers<span class="op">[</span><span class="dv">0</span><span class="op">];</span></span>
<span id="cb140-13"><a href="#cb140-13" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb140-14"><a href="#cb140-14" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 配列の全要素を処理 */</span></span>
<span id="cb140-15"><a href="#cb140-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">10</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb140-16"><a href="#cb140-16" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>numbers<span class="op">[</span>i<span class="op">]</span> <span class="op">&gt;</span> max<span class="op">)</span> max <span class="op">=</span> numbers<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb140-17"><a href="#cb140-17" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>numbers<span class="op">[</span>i<span class="op">]</span> <span class="op">&lt;</span> min<span class="op">)</span> min <span class="op">=</span> numbers<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb140-18"><a href="#cb140-18" aria-hidden="true" tabindex="-1"></a>        sum <span class="op">+=</span> numbers<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb140-19"><a href="#cb140-19" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb140-20"><a href="#cb140-20" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb140-21"><a href="#cb140-21" aria-hidden="true" tabindex="-1"></a>    average <span class="op">=</span> <span class="op">(</span><span class="dt">double</span><span class="op">)</span>sum <span class="op">/</span> <span class="dv">10</span><span class="op">;</span></span>
<span id="cb140-22"><a href="#cb140-22" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb140-23"><a href="#cb140-23" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== 配列の統計情報 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb140-24"><a href="#cb140-24" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;最大値: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> max<span class="op">);</span></span>
<span id="cb140-25"><a href="#cb140-25" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;最小値: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> min<span class="op">);</span></span>
<span id="cb140-26"><a href="#cb140-26" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;合計: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> sum<span class="op">);</span></span>
<span id="cb140-27"><a href="#cb140-27" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;平均: </span><span class="sc">%.1f\n</span><span class="st">&quot;</span><span class="op">,</span> average<span class="op">);</span></span>
<span id="cb140-28"><a href="#cb140-28" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb140-29"><a href="#cb140-29" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb140-30"><a href="#cb140-30" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>📁 <strong>解答例</strong>: <a
href="solutions/ex6_1.c"><code>solutions/ex6_1.c</code></a><br />
📁 <strong>C99版</strong>: <a
href="solutions/ex6_1_c99.c"><code>solutions/ex6_1_c99.c</code></a></p>
<h4 id="演習6-2-成績管理システムc90準拠">演習6-2:
成績管理システム（C90準拠）</h4>
<div class="sourceCode" id="cb141"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb141-1"><a href="#cb141-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb141-2"><a href="#cb141-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb141-3"><a href="#cb141-3" aria-hidden="true" tabindex="-1"></a><span class="pp">#define NUM_STUDENTS </span><span class="dv">5</span></span>
<span id="cb141-4"><a href="#cb141-4" aria-hidden="true" tabindex="-1"></a><span class="pp">#define NUM_SUBJECTS </span><span class="dv">4</span></span>
<span id="cb141-5"><a href="#cb141-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb141-6"><a href="#cb141-6" aria-hidden="true" tabindex="-1"></a><span class="co">/* 学生名と科目名 */</span></span>
<span id="cb141-7"><a href="#cb141-7" aria-hidden="true" tabindex="-1"></a><span class="dt">char</span> students<span class="op">[</span>NUM_STUDENTS<span class="op">][</span><span class="dv">20</span><span class="op">]</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb141-8"><a href="#cb141-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;田中太郎&quot;</span><span class="op">,</span> <span class="st">&quot;佐藤花子&quot;</span><span class="op">,</span> <span class="st">&quot;鈴木一郎&quot;</span><span class="op">,</span> <span class="st">&quot;高橋美咲&quot;</span><span class="op">,</span> <span class="st">&quot;伊藤健太&quot;</span></span>
<span id="cb141-9"><a href="#cb141-9" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb141-10"><a href="#cb141-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb141-11"><a href="#cb141-11" aria-hidden="true" tabindex="-1"></a><span class="dt">char</span> subjects<span class="op">[</span>NUM_SUBJECTS<span class="op">][</span><span class="dv">10</span><span class="op">]</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb141-12"><a href="#cb141-12" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;国語&quot;</span><span class="op">,</span> <span class="st">&quot;数学&quot;</span><span class="op">,</span> <span class="st">&quot;英語&quot;</span><span class="op">,</span> <span class="st">&quot;理科&quot;</span></span>
<span id="cb141-13"><a href="#cb141-13" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb141-14"><a href="#cb141-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb141-15"><a href="#cb141-15" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb141-16"><a href="#cb141-16" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb141-17"><a href="#cb141-17" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* C90では先頭で全ての変数を宣言 */</span></span>
<span id="cb141-18"><a href="#cb141-18" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> grades<span class="op">[</span>NUM_STUDENTS<span class="op">][</span>NUM_SUBJECTS<span class="op">];</span></span>
<span id="cb141-19"><a href="#cb141-19" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">,</span> j<span class="op">;</span></span>
<span id="cb141-20"><a href="#cb141-20" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb141-21"><a href="#cb141-21" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== 成績管理システム ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb141-22"><a href="#cb141-22" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;5人の学生の4科目の成績を入力してください。</span><span class="sc">\n\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb141-23"><a href="#cb141-23" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb141-24"><a href="#cb141-24" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 成績の入力 */</span></span>
<span id="cb141-25"><a href="#cb141-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> NUM_STUDENTS<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb141-26"><a href="#cb141-26" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;--- </span><span class="sc">%s</span><span class="st"> の成績 ---</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> students<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb141-27"><a href="#cb141-27" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span>j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> j <span class="op">&lt;</span> NUM_SUBJECTS<span class="op">;</span> j<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb141-28"><a href="#cb141-28" aria-hidden="true" tabindex="-1"></a>            printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%s</span><span class="st">: &quot;</span><span class="op">,</span> subjects<span class="op">[</span>j<span class="op">]);</span></span>
<span id="cb141-29"><a href="#cb141-29" aria-hidden="true" tabindex="-1"></a>            scanf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">&amp;</span>grades<span class="op">[</span>i<span class="op">][</span>j<span class="op">]);</span></span>
<span id="cb141-30"><a href="#cb141-30" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb141-31"><a href="#cb141-31" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb141-32"><a href="#cb141-32" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb141-33"><a href="#cb141-33" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb141-34"><a href="#cb141-34" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 成績表の表示処理などが続く... */</span></span>
<span id="cb141-35"><a href="#cb141-35" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb141-36"><a href="#cb141-36" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb141-37"><a href="#cb141-37" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>📁 <strong>解答例</strong>: <a
href="solutions/ex6_2.c"><code>solutions/ex6_2.c</code></a><br />
📁 <strong>C99版</strong>: <a
href="solutions/ex6_2_c99.c"><code>solutions/ex6_2_c99.c</code></a></p>
<h4 id="演習6-3-文字列配列の操作c90準拠">演習6-3:
文字列配列の操作（C90準拠）</h4>
<div class="sourceCode" id="cb142"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb142-1"><a href="#cb142-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb142-2"><a href="#cb142-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;string.h&gt;</span></span>
<span id="cb142-3"><a href="#cb142-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-4"><a href="#cb142-4" aria-hidden="true" tabindex="-1"></a><span class="pp">#define NUM_PREFECTURES </span><span class="dv">10</span></span>
<span id="cb142-5"><a href="#cb142-5" aria-hidden="true" tabindex="-1"></a><span class="pp">#define MAX_NAME_LENGTH </span><span class="dv">20</span></span>
<span id="cb142-6"><a href="#cb142-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-7"><a href="#cb142-7" aria-hidden="true" tabindex="-1"></a><span class="co">/* 都道府県名のサンプルデータ */</span></span>
<span id="cb142-8"><a href="#cb142-8" aria-hidden="true" tabindex="-1"></a><span class="dt">char</span> prefectures<span class="op">[</span>NUM_PREFECTURES<span class="op">][</span>MAX_NAME_LENGTH<span class="op">]</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb142-9"><a href="#cb142-9" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;東京都&quot;</span><span class="op">,</span> <span class="st">&quot;神奈川県&quot;</span><span class="op">,</span> <span class="st">&quot;大阪府&quot;</span><span class="op">,</span> <span class="st">&quot;愛知県&quot;</span><span class="op">,</span> <span class="st">&quot;埼玉県&quot;</span><span class="op">,</span></span>
<span id="cb142-10"><a href="#cb142-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;千葉県&quot;</span><span class="op">,</span> <span class="st">&quot;兵庫県&quot;</span><span class="op">,</span> <span class="st">&quot;北海道&quot;</span><span class="op">,</span> <span class="st">&quot;福岡県&quot;</span><span class="op">,</span> <span class="st">&quot;静岡県&quot;</span></span>
<span id="cb142-11"><a href="#cb142-11" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb142-12"><a href="#cb142-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-13"><a href="#cb142-13" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb142-14"><a href="#cb142-14" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb142-15"><a href="#cb142-15" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* C90では先頭で全ての変数を宣言 */</span></span>
<span id="cb142-16"><a href="#cb142-16" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> working_array<span class="op">[</span>NUM_PREFECTURES<span class="op">][</span>MAX_NAME_LENGTH<span class="op">];</span></span>
<span id="cb142-17"><a href="#cb142-17" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb142-18"><a href="#cb142-18" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb142-19"><a href="#cb142-19" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== 都道府県管理システム ===</span><span class="sc">\n\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb142-20"><a href="#cb142-20" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb142-21"><a href="#cb142-21" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 作業用配列にコピー */</span></span>
<span id="cb142-22"><a href="#cb142-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> NUM_PREFECTURES<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb142-23"><a href="#cb142-23" aria-hidden="true" tabindex="-1"></a>        strcpy<span class="op">(</span>working_array<span class="op">[</span>i<span class="op">],</span> prefectures<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb142-24"><a href="#cb142-24" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb142-25"><a href="#cb142-25" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb142-26"><a href="#cb142-26" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* ソート、検索処理などが続く... */</span></span>
<span id="cb142-27"><a href="#cb142-27" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb142-28"><a href="#cb142-28" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb142-29"><a href="#cb142-29" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p>📁 <strong>解答例</strong>: <a
href="solutions/ex6_3.c"><code>solutions/ex6_3.c</code></a><br />
📁 <strong>C99版</strong>: <a
href="solutions/ex6_3_c99.c"><code>solutions/ex6_3_c99.c</code></a></p>
<h3 id="演習問題一覧">演習問題一覧</h3>
<ol type="1">
<li><strong>演習6-1</strong>:
配列の基本操作（最大値・最小値・平均値）</li>
<li><strong>演習6-2</strong>: 成績管理システム（5人×4科目）</li>
<li><strong>演習6-3</strong>: 文字列配列の操作（都道府県管理）</li>
<li><strong>演習6-4</strong>: 行列演算（加算・減算・乗算・転置）</li>
<li><strong>演習6-5</strong>: 簡易辞書プログラム（英和・和英検索）</li>
</ol>
<h3 id="チャレンジ問題">チャレンジ問題</h3>
<ul>
<li><strong>チャレンジ1</strong>: ソートアルゴリズムの実装と比較</li>
<li><strong>チャレンジ2</strong>: ライフゲーム（Conway’s Game of
Life）</li>
</ul>
<p>すべての演習には<strong>C90版</strong>と<strong>C99版</strong>の両方の解答例が提供されています。</p>
<h2 id="学習フローとコンパイル方法">学習フローとコンパイル方法</h2>
<h3 id="推奨学習順序">推奨学習順序</h3>
<ol type="1">
<li><strong>理論学習</strong>: このREADME.mdで配列の概念を理解</li>
<li><strong>サンプルコード</strong>: examples/の基本例を確認</li>
<li><strong>演習課題</strong>: exercises/README.mdで課題を確認</li>
<li><strong>実装練習</strong>: solutions/の解答例を参考に自分で実装</li>
</ol>
<h3 id="makefileを使用したコンパイル">Makefileを使用したコンパイル</h3>
<div class="sourceCode" id="cb143"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb143-1"><a href="#cb143-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 全ての例題をコンパイル</span></span>
<span id="cb143-2"><a href="#cb143-2" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> all</span>
<span id="cb143-3"><a href="#cb143-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb143-4"><a href="#cb143-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 特定のプログラムをコンパイル</span></span>
<span id="cb143-5"><a href="#cb143-5" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> array_basics         <span class="co"># C90版</span></span>
<span id="cb143-6"><a href="#cb143-6" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> array_basics_c99     <span class="co"># C99版</span></span>
<span id="cb143-7"><a href="#cb143-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb143-8"><a href="#cb143-8" aria-hidden="true" tabindex="-1"></a><span class="co"># 全てのプログラムを実行</span></span>
<span id="cb143-9"><a href="#cb143-9" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> run-all</span>
<span id="cb143-10"><a href="#cb143-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb143-11"><a href="#cb143-11" aria-hidden="true" tabindex="-1"></a><span class="co"># C90準拠でのテスト</span></span>
<span id="cb143-12"><a href="#cb143-12" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> test</span>
<span id="cb143-13"><a href="#cb143-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb143-14"><a href="#cb143-14" aria-hidden="true" tabindex="-1"></a><span class="co"># 複数のC標準でのテスト</span></span>
<span id="cb143-15"><a href="#cb143-15" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> test-standards</span>
<span id="cb143-16"><a href="#cb143-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb143-17"><a href="#cb143-17" aria-hidden="true" tabindex="-1"></a><span class="co"># クリーンアップ</span></span>
<span id="cb143-18"><a href="#cb143-18" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> clean</span>
<span id="cb143-19"><a href="#cb143-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb143-20"><a href="#cb143-20" aria-hidden="true" tabindex="-1"></a><span class="co"># ヘルプ表示</span></span>
<span id="cb143-21"><a href="#cb143-21" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> help</span></code></pre></div>
<h3 id="手動コンパイル">手動コンパイル</h3>
<div class="sourceCode" id="cb144"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb144-1"><a href="#cb144-1" aria-hidden="true" tabindex="-1"></a><span class="co"># C90準拠でコンパイル（推奨）</span></span>
<span id="cb144-2"><a href="#cb144-2" aria-hidden="true" tabindex="-1"></a><span class="fu">gcc</span> <span class="at">-std</span><span class="op">=</span>c90 <span class="at">-Wall</span> <span class="at">-Wextra</span> <span class="at">-pedantic</span> examples/array_basics.c <span class="at">-o</span> array_basics</span>
<span id="cb144-3"><a href="#cb144-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb144-4"><a href="#cb144-4" aria-hidden="true" tabindex="-1"></a><span class="co"># C99準拠でコンパイル</span></span>
<span id="cb144-5"><a href="#cb144-5" aria-hidden="true" tabindex="-1"></a><span class="fu">gcc</span> <span class="at">-std</span><span class="op">=</span>c99 <span class="at">-Wall</span> <span class="at">-Wextra</span> <span class="at">-pedantic</span> examples/array_basics_c99.c <span class="at">-o</span> array_basics_c99</span>
<span id="cb144-6"><a href="#cb144-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb144-7"><a href="#cb144-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 実行</span></span>
<span id="cb144-8"><a href="#cb144-8" aria-hidden="true" tabindex="-1"></a><span class="ex">./array_basics</span></span></code></pre></div>
<h2 id="c90とc99の違い">C90とC99の違い</h2>
<h3
id="c90の特徴このチュートリアルの基準">C90の特徴（このチュートリアルの基準）</h3>
<div class="sourceCode" id="cb145"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb145-1"><a href="#cb145-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb145-2"><a href="#cb145-2" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb145-3"><a href="#cb145-3" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* すべての変数を関数の先頭で宣言 */</span></span>
<span id="cb145-4"><a href="#cb145-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> numbers<span class="op">[</span><span class="dv">5</span><span class="op">]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">5</span><span class="op">};</span></span>
<span id="cb145-5"><a href="#cb145-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb145-6"><a href="#cb145-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> sum <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb145-7"><a href="#cb145-7" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb145-8"><a href="#cb145-8" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 配列サイズは定数で指定 */</span></span>
<span id="cb145-9"><a href="#cb145-9" aria-hidden="true" tabindex="-1"></a>    <span class="pp">#define ARRAY_SIZE </span><span class="dv">10</span></span>
<span id="cb145-10"><a href="#cb145-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> arr<span class="op">[</span>ARRAY_SIZE<span class="op">];</span></span>
<span id="cb145-11"><a href="#cb145-11" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb145-12"><a href="#cb145-12" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* forループは従来のスタイル */</span></span>
<span id="cb145-13"><a href="#cb145-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">5</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb145-14"><a href="#cb145-14" aria-hidden="true" tabindex="-1"></a>        sum <span class="op">+=</span> numbers<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb145-15"><a href="#cb145-15" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb145-16"><a href="#cb145-16" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb145-17"><a href="#cb145-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb145-18"><a href="#cb145-18" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 id="c99の拡張機能">C99の拡張機能</h3>
<div class="sourceCode" id="cb146"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb146-1"><a href="#cb146-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb146-2"><a href="#cb146-2" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb146-3"><a href="#cb146-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> numbers<span class="op">[</span><span class="dv">5</span><span class="op">]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">5</span><span class="op">};</span></span>
<span id="cb146-4"><a href="#cb146-4" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb146-5"><a href="#cb146-5" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* forループ内での変数宣言（C99） */</span></span>
<span id="cb146-6"><a href="#cb146-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">5</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb146-7"><a href="#cb146-7" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st"> &quot;</span><span class="op">,</span> numbers<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb146-8"><a href="#cb146-8" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb146-9"><a href="#cb146-9" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb146-10"><a href="#cb146-10" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 必要な時点での変数宣言（C99） */</span></span>
<span id="cb146-11"><a href="#cb146-11" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> sum <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb146-12"><a href="#cb146-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">5</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb146-13"><a href="#cb146-13" aria-hidden="true" tabindex="-1"></a>        sum <span class="op">+=</span> numbers<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb146-14"><a href="#cb146-14" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb146-15"><a href="#cb146-15" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb146-16"><a href="#cb146-16" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 可変長配列（VLA）も可能（C99） */</span></span>
<span id="cb146-17"><a href="#cb146-17" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> size <span class="op">=</span> <span class="dv">10</span><span class="op">;</span></span>
<span id="cb146-18"><a href="#cb146-18" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> vla<span class="op">[</span>size<span class="op">];</span>  <span class="co">/* C90では不可 */</span></span>
<span id="cb146-19"><a href="#cb146-19" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb146-20"><a href="#cb146-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb146-21"><a href="#cb146-21" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 id="このチュートリアルでの方針">このチュートリアルでの方針</h3>
<ul>
<li><strong>C90版</strong>: 基準となる実装、互換性重視</li>
<li><strong>C99版</strong>: 現代的な書き方、読みやすさ重視</li>
<li><strong>学習推奨</strong>: まずC90で基礎を固めてからC99を学習</li>
</ul>
<h2 id="よくある間違いとデバッグ方法">よくある間違いとデバッグ方法</h2>
<h3 id="配列の境界外アクセス">1. 配列の境界外アクセス</h3>
<h4 id="間違った例">間違った例</h4>
<div class="sourceCode" id="cb147"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb147-1"><a href="#cb147-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* NG: 配列の範囲を超える */</span></span>
<span id="cb147-2"><a href="#cb147-2" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> arr<span class="op">[</span><span class="dv">5</span><span class="op">]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">5</span><span class="op">};</span></span>
<span id="cb147-3"><a href="#cb147-3" aria-hidden="true" tabindex="-1"></a>printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> arr<span class="op">[</span><span class="dv">5</span><span class="op">]);</span>  <span class="co">/* 範囲外アクセス - 未定義動作 */</span></span></code></pre></div>
<h4 id="正しい例">正しい例</h4>
<div class="sourceCode" id="cb148"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb148-1"><a href="#cb148-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* OK: 正しい範囲でアクセス */</span></span>
<span id="cb148-2"><a href="#cb148-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb148-3"><a href="#cb148-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb148-4"><a href="#cb148-4" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb148-5"><a href="#cb148-5" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb148-6"><a href="#cb148-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> arr<span class="op">[</span><span class="dv">5</span><span class="op">]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">5</span><span class="op">};</span></span>
<span id="cb148-7"><a href="#cb148-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb148-8"><a href="#cb148-8" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb148-9"><a href="#cb148-9" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 安全な配列アクセス */</span></span>
<span id="cb148-10"><a href="#cb148-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">5</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span>  <span class="co">/* i &lt; 5 であることを確認 */</span></span>
<span id="cb148-11"><a href="#cb148-11" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;arr[</span><span class="sc">%d</span><span class="st">] = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> i<span class="op">,</span> arr<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb148-12"><a href="#cb148-12" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb148-13"><a href="#cb148-13" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb148-14"><a href="#cb148-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb148-15"><a href="#cb148-15" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 id="文字列配列の初期化忘れ">2. 文字列配列の初期化忘れ</h3>
<h4 id="間違った例-1">間違った例</h4>
<div class="sourceCode" id="cb149"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb149-1"><a href="#cb149-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* NG: 初期化されていない文字配列 */</span></span>
<span id="cb149-2"><a href="#cb149-2" aria-hidden="true" tabindex="-1"></a><span class="dt">char</span> str<span class="op">[</span><span class="dv">20</span><span class="op">];</span></span>
<span id="cb149-3"><a href="#cb149-3" aria-hidden="true" tabindex="-1"></a>printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> str<span class="op">);</span>     <span class="co">/* 未定義動作 */</span></span></code></pre></div>
<h4 id="正しい例-1">正しい例</h4>
<div class="sourceCode" id="cb150"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb150-1"><a href="#cb150-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* OK: 適切な初期化 */</span></span>
<span id="cb150-2"><a href="#cb150-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb150-3"><a href="#cb150-3" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;string.h&gt;</span></span>
<span id="cb150-4"><a href="#cb150-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb150-5"><a href="#cb150-5" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb150-6"><a href="#cb150-6" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb150-7"><a href="#cb150-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> str<span class="op">[</span><span class="dv">20</span><span class="op">]</span> <span class="op">=</span> <span class="st">&quot;&quot;</span><span class="op">;</span>       <span class="co">/* 空文字列で初期化 */</span></span>
<span id="cb150-8"><a href="#cb150-8" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>str<span class="op">,</span> <span class="st">&quot;Hello&quot;</span><span class="op">);</span>    <span class="co">/* 後から代入 */</span></span>
<span id="cb150-9"><a href="#cb150-9" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> str<span class="op">);</span></span>
<span id="cb150-10"><a href="#cb150-10" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb150-11"><a href="#cb150-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb150-12"><a href="#cb150-12" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 id="配列代入の間違い">3. 配列代入の間違い</h3>
<h4 id="間違った例-2">間違った例</h4>
<div class="sourceCode" id="cb151"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb151-1"><a href="#cb151-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* NG: 配列は直接代入できない */</span></span>
<span id="cb151-2"><a href="#cb151-2" aria-hidden="true" tabindex="-1"></a><span class="dt">char</span> str1<span class="op">[</span><span class="dv">20</span><span class="op">],</span> str2<span class="op">[</span><span class="dv">20</span><span class="op">]</span> <span class="op">=</span> <span class="st">&quot;Hello&quot;</span><span class="op">;</span></span>
<span id="cb151-3"><a href="#cb151-3" aria-hidden="true" tabindex="-1"></a>str1 <span class="op">=</span> str2<span class="op">;</span>             <span class="co">/* コンパイルエラー */</span></span></code></pre></div>
<h4 id="正しい例-2">正しい例</h4>
<div class="sourceCode" id="cb152"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb152-1"><a href="#cb152-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* OK: strcpyを使用 */</span></span>
<span id="cb152-2"><a href="#cb152-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;string.h&gt;</span></span>
<span id="cb152-3"><a href="#cb152-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-4"><a href="#cb152-4" aria-hidden="true" tabindex="-1"></a><span class="dt">char</span> str1<span class="op">[</span><span class="dv">20</span><span class="op">],</span> str2<span class="op">[</span><span class="dv">20</span><span class="op">]</span> <span class="op">=</span> <span class="st">&quot;Hello&quot;</span><span class="op">;</span></span>
<span id="cb152-5"><a href="#cb152-5" aria-hidden="true" tabindex="-1"></a>strcpy<span class="op">(</span>str1<span class="op">,</span> str2<span class="op">);</span>      <span class="co">/* 正しい文字列コピー */</span></span></code></pre></div>
<h3 id="c90とc99の混在エラー">4. C90とC99の混在エラー</h3>
<h4 id="c90でコンパイル時のエラー例">C90でコンパイル時のエラー例</h4>
<div class="sourceCode" id="cb153"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb153-1"><a href="#cb153-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* C90ではエラーになる書き方 */</span></span>
<span id="cb153-2"><a href="#cb153-2" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb153-3"><a href="#cb153-3" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb153-4"><a href="#cb153-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> arr<span class="op">[</span><span class="dv">5</span><span class="op">]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">5</span><span class="op">};</span></span>
<span id="cb153-5"><a href="#cb153-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">5</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span>  <span class="co">/* C90ではNG */</span></span>
<span id="cb153-6"><a href="#cb153-6" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st"> &quot;</span><span class="op">,</span> arr<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb153-7"><a href="#cb153-7" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb153-8"><a href="#cb153-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb153-9"><a href="#cb153-9" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h4 id="正しいc90の書き方">正しいC90の書き方</h4>
<div class="sourceCode" id="cb154"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb154-1"><a href="#cb154-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* C90準拠の書き方 */</span></span>
<span id="cb154-2"><a href="#cb154-2" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb154-3"><a href="#cb154-3" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb154-4"><a href="#cb154-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> arr<span class="op">[</span><span class="dv">5</span><span class="op">]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">5</span><span class="op">};</span></span>
<span id="cb154-5"><a href="#cb154-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span>  <span class="co">/* 先頭で宣言 */</span></span>
<span id="cb154-6"><a href="#cb154-6" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb154-7"><a href="#cb154-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">5</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb154-8"><a href="#cb154-8" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st"> &quot;</span><span class="op">,</span> arr<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb154-9"><a href="#cb154-9" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb154-10"><a href="#cb154-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb154-11"><a href="#cb154-11" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 id="デバッグのコツ">デバッグのコツ</h3>
<ul>
<li><strong>境界チェック</strong>:
配列アクセス時は必ずインデックスが範囲内かチェック</li>
<li><strong>初期化の確認</strong>: 配列や文字列は使用前に必ず初期化</li>
<li><strong>コンパイル標準の確認</strong>: <code>-std=c90</code> または
<code>-std=c99</code> の指定を確認</li>
<li><strong>解答例との比較</strong>:
solutions/の正解コードと比較して違いを確認</li>
</ul>
<h2 id="次の章へ-6">次の章へ</h2>
<p>配列と文字列配列を理解したら、<a
href="../strings/README.md">文字列処理</a> に進んでください。</p>
<h2 id="参考資料-6">参考資料</h2>
<ul>
<li><a
href="https://ja.cppreference.com/w/c/language/array">C言語配列リファレンス</a></li>
<li><a
href="https://ja.cppreference.com/w/c/string/byte">文字列操作関数</a></li>
<li><a
href="https://ja.cppreference.com/w/c/language/array">多次元配列の詳細</a></li>
</ul>
<h2 id="サンプルコード-11">サンプルコード</h2>
<h3 id="array_basics.c">array_basics.c</h3>
<div class="sourceCode" id="cb155"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb155-1"><a href="#cb155-1" aria-hidden="true" tabindex="-1"></a><span class="co">/*</span></span>
<span id="cb155-2"><a href="#cb155-2" aria-hidden="true" tabindex="-1"></a><span class="co"> * 配列の基本的な使い方（C90準拠版）</span></span>
<span id="cb155-3"><a href="#cb155-3" aria-hidden="true" tabindex="-1"></a><span class="co"> * </span></span>
<span id="cb155-4"><a href="#cb155-4" aria-hidden="true" tabindex="-1"></a><span class="co"> * このプログラムは、1次元配列の宣言、初期化、</span></span>
<span id="cb155-5"><a href="#cb155-5" aria-hidden="true" tabindex="-1"></a><span class="co"> * 操作の基本的な方法を示します。</span></span>
<span id="cb155-6"><a href="#cb155-6" aria-hidden="true" tabindex="-1"></a><span class="co"> */</span></span>
<span id="cb155-7"><a href="#cb155-7" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb155-8"><a href="#cb155-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb155-9"><a href="#cb155-9" aria-hidden="true" tabindex="-1"></a><span class="pp">#define MAX_SIZE </span><span class="dv">10</span></span>
<span id="cb155-10"><a href="#cb155-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb155-11"><a href="#cb155-11" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb155-12"><a href="#cb155-12" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb155-13"><a href="#cb155-13" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* C90では先頭で全ての変数を宣言 */</span></span>
<span id="cb155-14"><a href="#cb155-14" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> numbers<span class="op">[</span><span class="dv">5</span><span class="op">];</span></span>
<span id="cb155-15"><a href="#cb155-15" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb155-16"><a href="#cb155-16" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> scores<span class="op">[</span><span class="dv">5</span><span class="op">]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">85</span><span class="op">,</span> <span class="dv">92</span><span class="op">,</span> <span class="dv">78</span><span class="op">,</span> <span class="dv">96</span><span class="op">,</span> <span class="dv">88</span><span class="op">};</span></span>
<span id="cb155-17"><a href="#cb155-17" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> partial<span class="op">[</span><span class="dv">10</span><span class="op">]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span><span class="op">};</span></span>
<span id="cb155-18"><a href="#cb155-18" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> auto_size<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">5</span><span class="op">,</span> <span class="dv">10</span><span class="op">,</span> <span class="dv">15</span><span class="op">,</span> <span class="dv">20</span><span class="op">,</span> <span class="dv">25</span><span class="op">,</span> <span class="dv">30</span><span class="op">};</span></span>
<span id="cb155-19"><a href="#cb155-19" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> size<span class="op">;</span></span>
<span id="cb155-20"><a href="#cb155-20" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> test_scores<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">75</span><span class="op">,</span> <span class="dv">88</span><span class="op">,</span> <span class="dv">92</span><span class="op">,</span> <span class="dv">67</span><span class="op">,</span> <span class="dv">85</span><span class="op">,</span> <span class="dv">91</span><span class="op">,</span> <span class="dv">78</span><span class="op">,</span> <span class="dv">84</span><span class="op">,</span> <span class="dv">90</span><span class="op">,</span> <span class="dv">86</span><span class="op">};</span></span>
<span id="cb155-21"><a href="#cb155-21" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> n<span class="op">;</span></span>
<span id="cb155-22"><a href="#cb155-22" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> sum <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb155-23"><a href="#cb155-23" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> max<span class="op">;</span></span>
<span id="cb155-24"><a href="#cb155-24" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> min<span class="op">;</span></span>
<span id="cb155-25"><a href="#cb155-25" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> search_array<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">15</span><span class="op">,</span> <span class="dv">23</span><span class="op">,</span> <span class="dv">8</span><span class="op">,</span> <span class="dv">42</span><span class="op">,</span> <span class="dv">16</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">11</span><span class="op">,</span> <span class="dv">29</span><span class="op">,</span> <span class="dv">36</span><span class="op">,</span> <span class="dv">19</span><span class="op">};</span></span>
<span id="cb155-26"><a href="#cb155-26" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> search_value <span class="op">=</span> <span class="dv">42</span><span class="op">;</span></span>
<span id="cb155-27"><a href="#cb155-27" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> found <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb155-28"><a href="#cb155-28" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> position <span class="op">=</span> <span class="op">-</span><span class="dv">1</span><span class="op">;</span></span>
<span id="cb155-29"><a href="#cb155-29" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> original<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">5</span><span class="op">,</span> <span class="dv">6</span><span class="op">,</span> <span class="dv">7</span><span class="op">,</span> <span class="dv">8</span><span class="op">,</span> <span class="dv">9</span><span class="op">,</span> <span class="dv">10</span><span class="op">};</span></span>
<span id="cb155-30"><a href="#cb155-30" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> source<span class="op">[</span><span class="dv">5</span><span class="op">]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">11</span><span class="op">,</span> <span class="dv">22</span><span class="op">,</span> <span class="dv">33</span><span class="op">,</span> <span class="dv">44</span><span class="op">,</span> <span class="dv">55</span><span class="op">};</span></span>
<span id="cb155-31"><a href="#cb155-31" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> destination<span class="op">[</span><span class="dv">5</span><span class="op">];</span></span>
<span id="cb155-32"><a href="#cb155-32" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> arr<span class="op">[</span>MAX_SIZE<span class="op">];</span></span>
<span id="cb155-33"><a href="#cb155-33" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb155-34"><a href="#cb155-34" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== 配列の基本的な使用 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb155-35"><a href="#cb155-35" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb155-36"><a href="#cb155-36" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 配列に値を代入 */</span></span>
<span id="cb155-37"><a href="#cb155-37" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">5</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb155-38"><a href="#cb155-38" aria-hidden="true" tabindex="-1"></a>        numbers<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> <span class="op">(</span>i <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">*</span> <span class="dv">10</span><span class="op">;</span></span>
<span id="cb155-39"><a href="#cb155-39" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb155-40"><a href="#cb155-40" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb155-41"><a href="#cb155-41" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 配列の内容を表示 */</span></span>
<span id="cb155-42"><a href="#cb155-42" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;配列の内容: &quot;</span><span class="op">);</span></span>
<span id="cb155-43"><a href="#cb155-43" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">5</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb155-44"><a href="#cb155-44" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st"> &quot;</span><span class="op">,</span> numbers<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb155-45"><a href="#cb155-45" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb155-46"><a href="#cb155-46" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb155-47"><a href="#cb155-47" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb155-48"><a href="#cb155-48" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 2. 配列の初期化 */</span></span>
<span id="cb155-49"><a href="#cb155-49" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== 配列の初期化 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb155-50"><a href="#cb155-50" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb155-51"><a href="#cb155-51" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 完全な初期化 */</span></span>
<span id="cb155-52"><a href="#cb155-52" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;scores配列: &quot;</span><span class="op">);</span></span>
<span id="cb155-53"><a href="#cb155-53" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">5</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb155-54"><a href="#cb155-54" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st"> &quot;</span><span class="op">,</span> scores<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb155-55"><a href="#cb155-55" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb155-56"><a href="#cb155-56" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb155-57"><a href="#cb155-57" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb155-58"><a href="#cb155-58" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 部分的な初期化 */</span></span>
<span id="cb155-59"><a href="#cb155-59" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;partial配列: &quot;</span><span class="op">);</span></span>
<span id="cb155-60"><a href="#cb155-60" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">10</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb155-61"><a href="#cb155-61" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st"> &quot;</span><span class="op">,</span> partial<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb155-62"><a href="#cb155-62" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb155-63"><a href="#cb155-63" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb155-64"><a href="#cb155-64" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb155-65"><a href="#cb155-65" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* サイズを省略した初期化 */</span></span>
<span id="cb155-66"><a href="#cb155-66" aria-hidden="true" tabindex="-1"></a>    size <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>auto_size<span class="op">)</span> <span class="op">/</span> <span class="kw">sizeof</span><span class="op">(</span>auto_size<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb155-67"><a href="#cb155-67" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;auto_size配列（要素数</span><span class="sc">%d</span><span class="st">）: &quot;</span><span class="op">,</span> size<span class="op">);</span></span>
<span id="cb155-68"><a href="#cb155-68" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> size<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb155-69"><a href="#cb155-69" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st"> &quot;</span><span class="op">,</span> auto_size<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb155-70"><a href="#cb155-70" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb155-71"><a href="#cb155-71" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb155-72"><a href="#cb155-72" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb155-73"><a href="#cb155-73" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 3. 配列の統計計算 */</span></span>
<span id="cb155-74"><a href="#cb155-74" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== 配列の統計計算 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb155-75"><a href="#cb155-75" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb155-76"><a href="#cb155-76" aria-hidden="true" tabindex="-1"></a>    n <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>test_scores<span class="op">)</span> <span class="op">/</span> <span class="kw">sizeof</span><span class="op">(</span>test_scores<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb155-77"><a href="#cb155-77" aria-hidden="true" tabindex="-1"></a>    sum <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb155-78"><a href="#cb155-78" aria-hidden="true" tabindex="-1"></a>    max <span class="op">=</span> test_scores<span class="op">[</span><span class="dv">0</span><span class="op">];</span></span>
<span id="cb155-79"><a href="#cb155-79" aria-hidden="true" tabindex="-1"></a>    min <span class="op">=</span> test_scores<span class="op">[</span><span class="dv">0</span><span class="op">];</span></span>
<span id="cb155-80"><a href="#cb155-80" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb155-81"><a href="#cb155-81" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 合計、最大値、最小値を計算 */</span></span>
<span id="cb155-82"><a href="#cb155-82" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb155-83"><a href="#cb155-83" aria-hidden="true" tabindex="-1"></a>        sum <span class="op">+=</span> test_scores<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb155-84"><a href="#cb155-84" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>test_scores<span class="op">[</span>i<span class="op">]</span> <span class="op">&gt;</span> max<span class="op">)</span> <span class="op">{</span></span>
<span id="cb155-85"><a href="#cb155-85" aria-hidden="true" tabindex="-1"></a>            max <span class="op">=</span> test_scores<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb155-86"><a href="#cb155-86" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb155-87"><a href="#cb155-87" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>test_scores<span class="op">[</span>i<span class="op">]</span> <span class="op">&lt;</span> min<span class="op">)</span> <span class="op">{</span></span>
<span id="cb155-88"><a href="#cb155-88" aria-hidden="true" tabindex="-1"></a>            min <span class="op">=</span> test_scores<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb155-89"><a href="#cb155-89" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb155-90"><a href="#cb155-90" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb155-91"><a href="#cb155-91" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb155-92"><a href="#cb155-92" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;テストの点数: &quot;</span><span class="op">);</span></span>
<span id="cb155-93"><a href="#cb155-93" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> n<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb155-94"><a href="#cb155-94" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st"> &quot;</span><span class="op">,</span> test_scores<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb155-95"><a href="#cb155-95" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb155-96"><a href="#cb155-96" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb155-97"><a href="#cb155-97" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;要素数: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> n<span class="op">);</span></span>
<span id="cb155-98"><a href="#cb155-98" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;合計: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> sum<span class="op">);</span></span>
<span id="cb155-99"><a href="#cb155-99" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;平均: </span><span class="sc">%.2f\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(</span><span class="dt">double</span><span class="op">)</span>sum <span class="op">/</span> n<span class="op">);</span></span>
<span id="cb155-100"><a href="#cb155-100" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;最高点: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> max<span class="op">);</span></span>
<span id="cb155-101"><a href="#cb155-101" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;最低点: </span><span class="sc">%d\n\n</span><span class="st">&quot;</span><span class="op">,</span> min<span class="op">);</span></span>
<span id="cb155-102"><a href="#cb155-102" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb155-103"><a href="#cb155-103" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 4. 配列の要素検索 */</span></span>
<span id="cb155-104"><a href="#cb155-104" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== 配列の検索 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb155-105"><a href="#cb155-105" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb155-106"><a href="#cb155-106" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 線形探索 */</span></span>
<span id="cb155-107"><a href="#cb155-107" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">10</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb155-108"><a href="#cb155-108" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>search_array<span class="op">[</span>i<span class="op">]</span> <span class="op">==</span> search_value<span class="op">)</span> <span class="op">{</span></span>
<span id="cb155-109"><a href="#cb155-109" aria-hidden="true" tabindex="-1"></a>            found <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb155-110"><a href="#cb155-110" aria-hidden="true" tabindex="-1"></a>            position <span class="op">=</span> i<span class="op">;</span></span>
<span id="cb155-111"><a href="#cb155-111" aria-hidden="true" tabindex="-1"></a>            <span class="cf">break</span><span class="op">;</span></span>
<span id="cb155-112"><a href="#cb155-112" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb155-113"><a href="#cb155-113" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb155-114"><a href="#cb155-114" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb155-115"><a href="#cb155-115" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>found<span class="op">)</span> <span class="op">{</span></span>
<span id="cb155-116"><a href="#cb155-116" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;値 </span><span class="sc">%d</span><span class="st"> は位置 </span><span class="sc">%d</span><span class="st"> にあります</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> search_value<span class="op">,</span> position<span class="op">);</span></span>
<span id="cb155-117"><a href="#cb155-117" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb155-118"><a href="#cb155-118" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;値 </span><span class="sc">%d</span><span class="st"> は見つかりませんでした</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> search_value<span class="op">);</span></span>
<span id="cb155-119"><a href="#cb155-119" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb155-120"><a href="#cb155-120" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb155-121"><a href="#cb155-121" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb155-122"><a href="#cb155-122" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 5. 配列の逆順表示 */</span></span>
<span id="cb155-123"><a href="#cb155-123" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== 配列の逆順表示 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb155-124"><a href="#cb155-124" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb155-125"><a href="#cb155-125" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;元の配列: &quot;</span><span class="op">);</span></span>
<span id="cb155-126"><a href="#cb155-126" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">10</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb155-127"><a href="#cb155-127" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st"> &quot;</span><span class="op">,</span> original<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb155-128"><a href="#cb155-128" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb155-129"><a href="#cb155-129" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb155-130"><a href="#cb155-130" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb155-131"><a href="#cb155-131" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;逆順: &quot;</span><span class="op">);</span></span>
<span id="cb155-132"><a href="#cb155-132" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">9</span><span class="op">;</span> i <span class="op">&gt;=</span> <span class="dv">0</span><span class="op">;</span> i<span class="op">--)</span> <span class="op">{</span></span>
<span id="cb155-133"><a href="#cb155-133" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st"> &quot;</span><span class="op">,</span> original<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb155-134"><a href="#cb155-134" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb155-135"><a href="#cb155-135" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb155-136"><a href="#cb155-136" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb155-137"><a href="#cb155-137" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 6. 配列のコピー */</span></span>
<span id="cb155-138"><a href="#cb155-138" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== 配列のコピー ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb155-139"><a href="#cb155-139" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb155-140"><a href="#cb155-140" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 要素を1つずつコピー */</span></span>
<span id="cb155-141"><a href="#cb155-141" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">5</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb155-142"><a href="#cb155-142" aria-hidden="true" tabindex="-1"></a>        destination<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> source<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb155-143"><a href="#cb155-143" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb155-144"><a href="#cb155-144" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb155-145"><a href="#cb155-145" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;source配列: &quot;</span><span class="op">);</span></span>
<span id="cb155-146"><a href="#cb155-146" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">5</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb155-147"><a href="#cb155-147" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st"> &quot;</span><span class="op">,</span> source<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb155-148"><a href="#cb155-148" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb155-149"><a href="#cb155-149" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb155-150"><a href="#cb155-150" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb155-151"><a href="#cb155-151" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;destination配列: &quot;</span><span class="op">);</span></span>
<span id="cb155-152"><a href="#cb155-152" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">5</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb155-153"><a href="#cb155-153" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st"> &quot;</span><span class="op">,</span> destination<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb155-154"><a href="#cb155-154" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb155-155"><a href="#cb155-155" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb155-156"><a href="#cb155-156" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb155-157"><a href="#cb155-157" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 7. 配列サイズの注意点 */</span></span>
<span id="cb155-158"><a href="#cb155-158" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== 配列サイズの情報 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb155-159"><a href="#cb155-159" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb155-160"><a href="#cb155-160" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;配列のサイズ: </span><span class="sc">%lu</span><span class="st"> バイト</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">));</span></span>
<span id="cb155-161"><a href="#cb155-161" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;要素1つのサイズ: </span><span class="sc">%lu</span><span class="st"> バイト</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">[</span><span class="dv">0</span><span class="op">]));</span></span>
<span id="cb155-162"><a href="#cb155-162" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;要素数: </span><span class="sc">%lu\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">)</span> <span class="op">/</span> <span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">[</span><span class="dv">0</span><span class="op">]));</span></span>
<span id="cb155-163"><a href="#cb155-163" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb155-164"><a href="#cb155-164" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb155-165"><a href="#cb155-165" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<blockquote>
<p>C99版は<a
href="array_basics_c99.c">こちら</a>を参照してください。</p>
</blockquote>
<h3 id="multidimensional_arrays.c">multidimensional_arrays.c</h3>
<div class="sourceCode" id="cb156"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb156-1"><a href="#cb156-1" aria-hidden="true" tabindex="-1"></a><span class="co">/*</span></span>
<span id="cb156-2"><a href="#cb156-2" aria-hidden="true" tabindex="-1"></a><span class="co"> * 多次元配列の使い方（C90準拠版）</span></span>
<span id="cb156-3"><a href="#cb156-3" aria-hidden="true" tabindex="-1"></a><span class="co"> *</span></span>
<span id="cb156-4"><a href="#cb156-4" aria-hidden="true" tabindex="-1"></a><span class="co"> * このプログラムは、2次元配列と3次元配列の</span></span>
<span id="cb156-5"><a href="#cb156-5" aria-hidden="true" tabindex="-1"></a><span class="co"> * 宣言、初期化、操作方法を示します。</span></span>
<span id="cb156-6"><a href="#cb156-6" aria-hidden="true" tabindex="-1"></a><span class="co"> */</span></span>
<span id="cb156-7"><a href="#cb156-7" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb156-8"><a href="#cb156-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb156-9"><a href="#cb156-9" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb156-10"><a href="#cb156-10" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb156-11"><a href="#cb156-11" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* C90では先頭で全ての変数を宣言 */</span></span>
<span id="cb156-12"><a href="#cb156-12" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">,</span> j<span class="op">;</span></span>
<span id="cb156-13"><a href="#cb156-13" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> matrix<span class="op">[</span><span class="dv">3</span><span class="op">][</span><span class="dv">4</span><span class="op">]</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb156-14"><a href="#cb156-14" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span><span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">4</span><span class="op">},</span></span>
<span id="cb156-15"><a href="#cb156-15" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span><span class="dv">5</span><span class="op">,</span> <span class="dv">6</span><span class="op">,</span> <span class="dv">7</span><span class="op">,</span> <span class="dv">8</span><span class="op">},</span></span>
<span id="cb156-16"><a href="#cb156-16" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span><span class="dv">9</span><span class="op">,</span> <span class="dv">10</span><span class="op">,</span> <span class="dv">11</span><span class="op">,</span> <span class="dv">12</span><span class="op">}};</span></span>
<span id="cb156-17"><a href="#cb156-17" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> grades<span class="op">[</span><span class="dv">5</span><span class="op">][</span><span class="dv">3</span><span class="op">]</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb156-18"><a href="#cb156-18" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span><span class="dv">85</span><span class="op">,</span> <span class="dv">92</span><span class="op">,</span> <span class="dv">78</span><span class="op">},</span> <span class="co">/* 学生1 */</span></span>
<span id="cb156-19"><a href="#cb156-19" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span><span class="dv">90</span><span class="op">,</span> <span class="dv">88</span><span class="op">,</span> <span class="dv">85</span><span class="op">},</span> <span class="co">/* 学生2 */</span></span>
<span id="cb156-20"><a href="#cb156-20" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span><span class="dv">78</span><span class="op">,</span> <span class="dv">85</span><span class="op">,</span> <span class="dv">92</span><span class="op">},</span> <span class="co">/* 学生3 */</span></span>
<span id="cb156-21"><a href="#cb156-21" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span><span class="dv">92</span><span class="op">,</span> <span class="dv">76</span><span class="op">,</span> <span class="dv">88</span><span class="op">},</span> <span class="co">/* 学生4 */</span></span>
<span id="cb156-22"><a href="#cb156-22" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span><span class="dv">88</span><span class="op">,</span> <span class="dv">90</span><span class="op">,</span> <span class="dv">82</span><span class="op">}</span>  <span class="co">/* 学生5 */</span></span>
<span id="cb156-23"><a href="#cb156-23" aria-hidden="true" tabindex="-1"></a>    <span class="op">};</span></span>
<span id="cb156-24"><a href="#cb156-24" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> <span class="op">*</span>subjects<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="st">&quot;国語&quot;</span><span class="op">,</span> <span class="st">&quot;数学&quot;</span><span class="op">,</span> <span class="st">&quot;英語&quot;</span><span class="op">};</span></span>
<span id="cb156-25"><a href="#cb156-25" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> partial<span class="op">[</span><span class="dv">4</span><span class="op">][</span><span class="dv">5</span><span class="op">]</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb156-26"><a href="#cb156-26" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span><span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">},</span>    <span class="co">/* 残りの要素は0 */</span></span>
<span id="cb156-27"><a href="#cb156-27" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span><span class="dv">3</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">5</span><span class="op">},</span> <span class="co">/* 残りの要素は0 */</span></span>
<span id="cb156-28"><a href="#cb156-28" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span><span class="dv">6</span><span class="op">}</span>        <span class="co">/* 残りの要素は0 */</span></span>
<span id="cb156-29"><a href="#cb156-29" aria-hidden="true" tabindex="-1"></a>        <span class="co">/* 4行目は全て0 */</span></span>
<span id="cb156-30"><a href="#cb156-30" aria-hidden="true" tabindex="-1"></a>    <span class="op">};</span></span>
<span id="cb156-31"><a href="#cb156-31" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> identity<span class="op">[</span><span class="dv">5</span><span class="op">][</span><span class="dv">5</span><span class="op">];</span></span>
<span id="cb156-32"><a href="#cb156-32" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> image<span class="op">[</span><span class="dv">2</span><span class="op">][</span><span class="dv">3</span><span class="op">][</span><span class="dv">3</span><span class="op">]</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb156-33"><a href="#cb156-33" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span></span>
<span id="cb156-34"><a href="#cb156-34" aria-hidden="true" tabindex="-1"></a>            <span class="op">{</span><span class="dv">255</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">},</span> <span class="co">/* 赤 */</span></span>
<span id="cb156-35"><a href="#cb156-35" aria-hidden="true" tabindex="-1"></a>            <span class="op">{</span><span class="dv">0</span><span class="op">,</span> <span class="dv">255</span><span class="op">,</span> <span class="dv">0</span><span class="op">},</span> <span class="co">/* 緑 */</span></span>
<span id="cb156-36"><a href="#cb156-36" aria-hidden="true" tabindex="-1"></a>            <span class="op">{</span><span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">255</span><span class="op">}</span>  <span class="co">/* 青 */</span></span>
<span id="cb156-37"><a href="#cb156-37" aria-hidden="true" tabindex="-1"></a>        <span class="op">},</span></span>
<span id="cb156-38"><a href="#cb156-38" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span></span>
<span id="cb156-39"><a href="#cb156-39" aria-hidden="true" tabindex="-1"></a>            <span class="op">{</span><span class="dv">255</span><span class="op">,</span> <span class="dv">255</span><span class="op">,</span> <span class="dv">0</span><span class="op">},</span> <span class="co">/* 黄 */</span></span>
<span id="cb156-40"><a href="#cb156-40" aria-hidden="true" tabindex="-1"></a>            <span class="op">{</span><span class="dv">255</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">255</span><span class="op">},</span> <span class="co">/* マゼンタ */</span></span>
<span id="cb156-41"><a href="#cb156-41" aria-hidden="true" tabindex="-1"></a>            <span class="op">{</span><span class="dv">0</span><span class="op">,</span> <span class="dv">255</span><span class="op">,</span> <span class="dv">255</span><span class="op">}</span>  <span class="co">/* シアン */</span></span>
<span id="cb156-42"><a href="#cb156-42" aria-hidden="true" tabindex="-1"></a>        <span class="op">}};</span></span>
<span id="cb156-43"><a href="#cb156-43" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> original_matrix<span class="op">[</span><span class="dv">3</span><span class="op">][</span><span class="dv">4</span><span class="op">]</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb156-44"><a href="#cb156-44" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span><span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">4</span><span class="op">},</span></span>
<span id="cb156-45"><a href="#cb156-45" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span><span class="dv">5</span><span class="op">,</span> <span class="dv">6</span><span class="op">,</span> <span class="dv">7</span><span class="op">,</span> <span class="dv">8</span><span class="op">},</span></span>
<span id="cb156-46"><a href="#cb156-46" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span><span class="dv">9</span><span class="op">,</span> <span class="dv">10</span><span class="op">,</span> <span class="dv">11</span><span class="op">,</span> <span class="dv">12</span><span class="op">}};</span></span>
<span id="cb156-47"><a href="#cb156-47" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> transposed<span class="op">[</span><span class="dv">4</span><span class="op">][</span><span class="dv">3</span><span class="op">];</span></span>
<span id="cb156-48"><a href="#cb156-48" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> sum<span class="op">;</span></span>
<span id="cb156-49"><a href="#cb156-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb156-50"><a href="#cb156-50" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 1. 2次元配列の基本 */</span></span>
<span id="cb156-51"><a href="#cb156-51" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== 2次元配列の基本 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb156-52"><a href="#cb156-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb156-53"><a href="#cb156-53" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 3x4の2次元配列 */</span></span>
<span id="cb156-54"><a href="#cb156-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb156-55"><a href="#cb156-55" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 2次元配列の表示 */</span></span>
<span id="cb156-56"><a href="#cb156-56" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;3x4の行列:</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb156-57"><a href="#cb156-57" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">3</span><span class="op">;</span> i<span class="op">++)</span></span>
<span id="cb156-58"><a href="#cb156-58" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb156-59"><a href="#cb156-59" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span>j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> j <span class="op">&lt;</span> <span class="dv">4</span><span class="op">;</span> j<span class="op">++)</span></span>
<span id="cb156-60"><a href="#cb156-60" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span></span>
<span id="cb156-61"><a href="#cb156-61" aria-hidden="true" tabindex="-1"></a>            printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%3d</span><span class="st"> &quot;</span><span class="op">,</span> matrix<span class="op">[</span>i<span class="op">][</span>j<span class="op">]);</span></span>
<span id="cb156-62"><a href="#cb156-62" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb156-63"><a href="#cb156-63" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb156-64"><a href="#cb156-64" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb156-65"><a href="#cb156-65" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb156-66"><a href="#cb156-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb156-67"><a href="#cb156-67" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 2. 成績表の管理 */</span></span>
<span id="cb156-68"><a href="#cb156-68" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== 成績表（学生x科目）===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb156-69"><a href="#cb156-69" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb156-70"><a href="#cb156-70" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 5人の学生、3科目（国語、数学、英語）の成績 */</span></span>
<span id="cb156-71"><a href="#cb156-71" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb156-72"><a href="#cb156-72" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 成績表の表示 */</span></span>
<span id="cb156-73"><a href="#cb156-73" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;       &quot;</span><span class="op">);</span></span>
<span id="cb156-74"><a href="#cb156-74" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> j <span class="op">&lt;</span> <span class="dv">3</span><span class="op">;</span> j<span class="op">++)</span></span>
<span id="cb156-75"><a href="#cb156-75" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb156-76"><a href="#cb156-76" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%-6s</span><span class="st"> &quot;</span><span class="op">,</span> subjects<span class="op">[</span>j<span class="op">]);</span></span>
<span id="cb156-77"><a href="#cb156-77" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb156-78"><a href="#cb156-78" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;平均</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb156-79"><a href="#cb156-79" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;----------------------------------------</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb156-80"><a href="#cb156-80" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb156-81"><a href="#cb156-81" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">5</span><span class="op">;</span> i<span class="op">++)</span></span>
<span id="cb156-82"><a href="#cb156-82" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb156-83"><a href="#cb156-83" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;学生</span><span class="sc">%d</span><span class="st">: &quot;</span><span class="op">,</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb156-84"><a href="#cb156-84" aria-hidden="true" tabindex="-1"></a>        sum <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb156-85"><a href="#cb156-85" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span>j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> j <span class="op">&lt;</span> <span class="dv">3</span><span class="op">;</span> j<span class="op">++)</span></span>
<span id="cb156-86"><a href="#cb156-86" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span></span>
<span id="cb156-87"><a href="#cb156-87" aria-hidden="true" tabindex="-1"></a>            printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%-6d</span><span class="st"> &quot;</span><span class="op">,</span> grades<span class="op">[</span>i<span class="op">][</span>j<span class="op">]);</span></span>
<span id="cb156-88"><a href="#cb156-88" aria-hidden="true" tabindex="-1"></a>            sum <span class="op">+=</span> grades<span class="op">[</span>i<span class="op">][</span>j<span class="op">];</span></span>
<span id="cb156-89"><a href="#cb156-89" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb156-90"><a href="#cb156-90" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%.1f\n</span><span class="st">&quot;</span><span class="op">,</span> sum <span class="op">/</span> <span class="fl">3.0</span><span class="op">);</span></span>
<span id="cb156-91"><a href="#cb156-91" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb156-92"><a href="#cb156-92" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb156-93"><a href="#cb156-93" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 科目別平均 */</span></span>
<span id="cb156-94"><a href="#cb156-94" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;----------------------------------------</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb156-95"><a href="#cb156-95" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;平均:  &quot;</span><span class="op">);</span></span>
<span id="cb156-96"><a href="#cb156-96" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> j <span class="op">&lt;</span> <span class="dv">3</span><span class="op">;</span> j<span class="op">++)</span></span>
<span id="cb156-97"><a href="#cb156-97" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb156-98"><a href="#cb156-98" aria-hidden="true" tabindex="-1"></a>        sum <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb156-99"><a href="#cb156-99" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">5</span><span class="op">;</span> i<span class="op">++)</span></span>
<span id="cb156-100"><a href="#cb156-100" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span></span>
<span id="cb156-101"><a href="#cb156-101" aria-hidden="true" tabindex="-1"></a>            sum <span class="op">+=</span> grades<span class="op">[</span>i<span class="op">][</span>j<span class="op">];</span></span>
<span id="cb156-102"><a href="#cb156-102" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb156-103"><a href="#cb156-103" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%-6.1f</span><span class="st"> &quot;</span><span class="op">,</span> sum <span class="op">/</span> <span class="fl">5.0</span><span class="op">);</span></span>
<span id="cb156-104"><a href="#cb156-104" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb156-105"><a href="#cb156-105" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb156-106"><a href="#cb156-106" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb156-107"><a href="#cb156-107" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 3. 部分的な初期化 */</span></span>
<span id="cb156-108"><a href="#cb156-108" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== 2次元配列の部分初期化 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb156-109"><a href="#cb156-109" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb156-110"><a href="#cb156-110" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 部分的に初期化（残りは0） */</span></span>
<span id="cb156-111"><a href="#cb156-111" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb156-112"><a href="#cb156-112" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;部分的に初期化された配列:</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb156-113"><a href="#cb156-113" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">4</span><span class="op">;</span> i<span class="op">++)</span></span>
<span id="cb156-114"><a href="#cb156-114" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb156-115"><a href="#cb156-115" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span>j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> j <span class="op">&lt;</span> <span class="dv">5</span><span class="op">;</span> j<span class="op">++)</span></span>
<span id="cb156-116"><a href="#cb156-116" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span></span>
<span id="cb156-117"><a href="#cb156-117" aria-hidden="true" tabindex="-1"></a>            printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%2d</span><span class="st"> &quot;</span><span class="op">,</span> partial<span class="op">[</span>i<span class="op">][</span>j<span class="op">]);</span></span>
<span id="cb156-118"><a href="#cb156-118" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb156-119"><a href="#cb156-119" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb156-120"><a href="#cb156-120" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb156-121"><a href="#cb156-121" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb156-122"><a href="#cb156-122" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb156-123"><a href="#cb156-123" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 4. 単位行列の作成 */</span></span>
<span id="cb156-124"><a href="#cb156-124" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== 単位行列の作成 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb156-125"><a href="#cb156-125" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb156-126"><a href="#cb156-126" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 単位行列を作成 */</span></span>
<span id="cb156-127"><a href="#cb156-127" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">5</span><span class="op">;</span> i<span class="op">++)</span></span>
<span id="cb156-128"><a href="#cb156-128" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb156-129"><a href="#cb156-129" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span>j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> j <span class="op">&lt;</span> <span class="dv">5</span><span class="op">;</span> j<span class="op">++)</span></span>
<span id="cb156-130"><a href="#cb156-130" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span></span>
<span id="cb156-131"><a href="#cb156-131" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>i <span class="op">==</span> j<span class="op">)</span></span>
<span id="cb156-132"><a href="#cb156-132" aria-hidden="true" tabindex="-1"></a>            <span class="op">{</span></span>
<span id="cb156-133"><a href="#cb156-133" aria-hidden="true" tabindex="-1"></a>                identity<span class="op">[</span>i<span class="op">][</span>j<span class="op">]</span> <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb156-134"><a href="#cb156-134" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb156-135"><a href="#cb156-135" aria-hidden="true" tabindex="-1"></a>            <span class="cf">else</span></span>
<span id="cb156-136"><a href="#cb156-136" aria-hidden="true" tabindex="-1"></a>            <span class="op">{</span></span>
<span id="cb156-137"><a href="#cb156-137" aria-hidden="true" tabindex="-1"></a>                identity<span class="op">[</span>i<span class="op">][</span>j<span class="op">]</span> <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb156-138"><a href="#cb156-138" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb156-139"><a href="#cb156-139" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb156-140"><a href="#cb156-140" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb156-141"><a href="#cb156-141" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb156-142"><a href="#cb156-142" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 単位行列を表示 */</span></span>
<span id="cb156-143"><a href="#cb156-143" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;5x5の単位行列:</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb156-144"><a href="#cb156-144" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">5</span><span class="op">;</span> i<span class="op">++)</span></span>
<span id="cb156-145"><a href="#cb156-145" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb156-146"><a href="#cb156-146" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span>j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> j <span class="op">&lt;</span> <span class="dv">5</span><span class="op">;</span> j<span class="op">++)</span></span>
<span id="cb156-147"><a href="#cb156-147" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span></span>
<span id="cb156-148"><a href="#cb156-148" aria-hidden="true" tabindex="-1"></a>            printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st"> &quot;</span><span class="op">,</span> identity<span class="op">[</span>i<span class="op">][</span>j<span class="op">]);</span></span>
<span id="cb156-149"><a href="#cb156-149" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb156-150"><a href="#cb156-150" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb156-151"><a href="#cb156-151" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb156-152"><a href="#cb156-152" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb156-153"><a href="#cb156-153" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb156-154"><a href="#cb156-154" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 5. 3次元配列の例 */</span></span>
<span id="cb156-155"><a href="#cb156-155" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== 3次元配列（RGB画像データの例）===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb156-156"><a href="#cb156-156" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb156-157"><a href="#cb156-157" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 2x3ピクセル、各ピクセルはRGB（3値） */</span></span>
<span id="cb156-158"><a href="#cb156-158" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb156-159"><a href="#cb156-159" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;画像データ（2x3ピクセル）:</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb156-160"><a href="#cb156-160" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">2</span><span class="op">;</span> i<span class="op">++)</span></span>
<span id="cb156-161"><a href="#cb156-161" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb156-162"><a href="#cb156-162" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;行 </span><span class="sc">%d</span><span class="st">:</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> i<span class="op">);</span></span>
<span id="cb156-163"><a href="#cb156-163" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span>j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> j <span class="op">&lt;</span> <span class="dv">3</span><span class="op">;</span> j<span class="op">++)</span></span>
<span id="cb156-164"><a href="#cb156-164" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span></span>
<span id="cb156-165"><a href="#cb156-165" aria-hidden="true" tabindex="-1"></a>            printf<span class="op">(</span><span class="st">&quot;  ピクセル[</span><span class="sc">%d</span><span class="st">][</span><span class="sc">%d</span><span class="st">]: R=</span><span class="sc">%3d</span><span class="st">, G=</span><span class="sc">%3d</span><span class="st">, B=</span><span class="sc">%3d\n</span><span class="st">&quot;</span><span class="op">,</span></span>
<span id="cb156-166"><a href="#cb156-166" aria-hidden="true" tabindex="-1"></a>                   i<span class="op">,</span> j<span class="op">,</span> image<span class="op">[</span>i<span class="op">][</span>j<span class="op">][</span><span class="dv">0</span><span class="op">],</span> image<span class="op">[</span>i<span class="op">][</span>j<span class="op">][</span><span class="dv">1</span><span class="op">],</span> image<span class="op">[</span>i<span class="op">][</span>j<span class="op">][</span><span class="dv">2</span><span class="op">]);</span></span>
<span id="cb156-167"><a href="#cb156-167" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb156-168"><a href="#cb156-168" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb156-169"><a href="#cb156-169" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb156-170"><a href="#cb156-170" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb156-171"><a href="#cb156-171" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 6. 転置行列 */</span></span>
<span id="cb156-172"><a href="#cb156-172" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== 行列の転置 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb156-173"><a href="#cb156-173" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb156-174"><a href="#cb156-174" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 転置を計算 */</span></span>
<span id="cb156-175"><a href="#cb156-175" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">3</span><span class="op">;</span> i<span class="op">++)</span></span>
<span id="cb156-176"><a href="#cb156-176" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb156-177"><a href="#cb156-177" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span>j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> j <span class="op">&lt;</span> <span class="dv">4</span><span class="op">;</span> j<span class="op">++)</span></span>
<span id="cb156-178"><a href="#cb156-178" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span></span>
<span id="cb156-179"><a href="#cb156-179" aria-hidden="true" tabindex="-1"></a>            transposed<span class="op">[</span>j<span class="op">][</span>i<span class="op">]</span> <span class="op">=</span> original_matrix<span class="op">[</span>i<span class="op">][</span>j<span class="op">];</span></span>
<span id="cb156-180"><a href="#cb156-180" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb156-181"><a href="#cb156-181" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb156-182"><a href="#cb156-182" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb156-183"><a href="#cb156-183" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;元の行列（3x4）:</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb156-184"><a href="#cb156-184" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">3</span><span class="op">;</span> i<span class="op">++)</span></span>
<span id="cb156-185"><a href="#cb156-185" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb156-186"><a href="#cb156-186" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span>j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> j <span class="op">&lt;</span> <span class="dv">4</span><span class="op">;</span> j<span class="op">++)</span></span>
<span id="cb156-187"><a href="#cb156-187" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span></span>
<span id="cb156-188"><a href="#cb156-188" aria-hidden="true" tabindex="-1"></a>            printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%3d</span><span class="st"> &quot;</span><span class="op">,</span> original_matrix<span class="op">[</span>i<span class="op">][</span>j<span class="op">]);</span></span>
<span id="cb156-189"><a href="#cb156-189" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb156-190"><a href="#cb156-190" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb156-191"><a href="#cb156-191" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb156-192"><a href="#cb156-192" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb156-193"><a href="#cb156-193" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">転置行列（4x3）:</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb156-194"><a href="#cb156-194" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">4</span><span class="op">;</span> i<span class="op">++)</span></span>
<span id="cb156-195"><a href="#cb156-195" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb156-196"><a href="#cb156-196" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span>j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> j <span class="op">&lt;</span> <span class="dv">3</span><span class="op">;</span> j<span class="op">++)</span></span>
<span id="cb156-197"><a href="#cb156-197" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span></span>
<span id="cb156-198"><a href="#cb156-198" aria-hidden="true" tabindex="-1"></a>            printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%3d</span><span class="st"> &quot;</span><span class="op">,</span> transposed<span class="op">[</span>i<span class="op">][</span>j<span class="op">]);</span></span>
<span id="cb156-199"><a href="#cb156-199" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb156-200"><a href="#cb156-200" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb156-201"><a href="#cb156-201" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb156-202"><a href="#cb156-202" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb156-203"><a href="#cb156-203" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb156-204"><a href="#cb156-204" aria-hidden="true" tabindex="-1"></a><span class="op">}</span>```</span>
<span id="cb156-205"><a href="#cb156-205" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb156-206"><a href="#cb156-206" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> C99版は<span class="op">[</span>こちら<span class="op">](</span>multidimensional_arrays_c99<span class="op">.</span>c<span class="op">)</span>を参照してください。</span>
<span id="cb156-207"><a href="#cb156-207" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb156-208"><a href="#cb156-208" aria-hidden="true" tabindex="-1"></a><span class="pp">#</span><span class="er">## string_arrays.c</span></span>
<span id="cb156-209"><a href="#cb156-209" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb156-210"><a href="#cb156-210" aria-hidden="true" tabindex="-1"></a>```c</span>
<span id="cb156-211"><a href="#cb156-211" aria-hidden="true" tabindex="-1"></a><span class="co">/*</span></span>
<span id="cb156-212"><a href="#cb156-212" aria-hidden="true" tabindex="-1"></a><span class="co"> * 文字列配列の使い方（C90準拠版）</span></span>
<span id="cb156-213"><a href="#cb156-213" aria-hidden="true" tabindex="-1"></a><span class="co"> * </span></span>
<span id="cb156-214"><a href="#cb156-214" aria-hidden="true" tabindex="-1"></a><span class="co"> * このプログラムは、文字列配列の宣言、初期化、</span></span>
<span id="cb156-215"><a href="#cb156-215" aria-hidden="true" tabindex="-1"></a><span class="co"> * 操作方法、およびchar配列とchar*配列の違いを示します。</span></span>
<span id="cb156-216"><a href="#cb156-216" aria-hidden="true" tabindex="-1"></a><span class="co"> */</span></span>
<span id="cb156-217"><a href="#cb156-217" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb156-218"><a href="#cb156-218" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;string.h&gt;</span></span>
<span id="cb156-219"><a href="#cb156-219" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb156-220"><a href="#cb156-220" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb156-221"><a href="#cb156-221" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb156-222"><a href="#cb156-222" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* C90では先頭で全ての変数を宣言 */</span></span>
<span id="cb156-223"><a href="#cb156-223" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb156-224"><a href="#cb156-224" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> str1<span class="op">[</span><span class="dv">20</span><span class="op">];</span></span>
<span id="cb156-225"><a href="#cb156-225" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> str2<span class="op">[]</span> <span class="op">=</span> <span class="st">&quot;World&quot;</span><span class="op">;</span></span>
<span id="cb156-226"><a href="#cb156-226" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> fruits<span class="op">[</span><span class="dv">5</span><span class="op">][</span><span class="dv">20</span><span class="op">]</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb156-227"><a href="#cb156-227" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;Apple&quot;</span><span class="op">,</span></span>
<span id="cb156-228"><a href="#cb156-228" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;Banana&quot;</span><span class="op">,</span></span>
<span id="cb156-229"><a href="#cb156-229" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;Orange&quot;</span><span class="op">,</span></span>
<span id="cb156-230"><a href="#cb156-230" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;Grape&quot;</span><span class="op">,</span></span>
<span id="cb156-231"><a href="#cb156-231" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;Strawberry&quot;</span></span>
<span id="cb156-232"><a href="#cb156-232" aria-hidden="true" tabindex="-1"></a>    <span class="op">};</span></span>
<span id="cb156-233"><a href="#cb156-233" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> <span class="op">*</span>months<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb156-234"><a href="#cb156-234" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;January&quot;</span><span class="op">,</span> <span class="st">&quot;February&quot;</span><span class="op">,</span> <span class="st">&quot;March&quot;</span><span class="op">,</span> <span class="st">&quot;April&quot;</span><span class="op">,</span></span>
<span id="cb156-235"><a href="#cb156-235" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;May&quot;</span><span class="op">,</span> <span class="st">&quot;June&quot;</span><span class="op">,</span> <span class="st">&quot;July&quot;</span><span class="op">,</span> <span class="st">&quot;August&quot;</span><span class="op">,</span></span>
<span id="cb156-236"><a href="#cb156-236" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;September&quot;</span><span class="op">,</span> <span class="st">&quot;October&quot;</span><span class="op">,</span> <span class="st">&quot;November&quot;</span><span class="op">,</span> <span class="st">&quot;December&quot;</span></span>
<span id="cb156-237"><a href="#cb156-237" aria-hidden="true" tabindex="-1"></a>    <span class="op">};</span></span>
<span id="cb156-238"><a href="#cb156-238" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> cities1<span class="op">[</span><span class="dv">3</span><span class="op">][</span><span class="dv">20</span><span class="op">]</span> <span class="op">=</span> <span class="op">{</span><span class="st">&quot;Tokyo&quot;</span><span class="op">,</span> <span class="st">&quot;New York&quot;</span><span class="op">,</span> <span class="st">&quot;London&quot;</span><span class="op">};</span></span>
<span id="cb156-239"><a href="#cb156-239" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> <span class="op">*</span>cities2<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="st">&quot;Tokyo&quot;</span><span class="op">,</span> <span class="st">&quot;New York&quot;</span><span class="op">,</span> <span class="st">&quot;London&quot;</span><span class="op">};</span></span>
<span id="cb156-240"><a href="#cb156-240" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> <span class="op">*</span>programming_languages<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb156-241"><a href="#cb156-241" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;C&quot;</span><span class="op">,</span> <span class="st">&quot;C++&quot;</span><span class="op">,</span> <span class="st">&quot;Java&quot;</span><span class="op">,</span> <span class="st">&quot;Python&quot;</span><span class="op">,</span> <span class="st">&quot;JavaScript&quot;</span><span class="op">,</span></span>
<span id="cb156-242"><a href="#cb156-242" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;Ruby&quot;</span><span class="op">,</span> <span class="st">&quot;Go&quot;</span><span class="op">,</span> <span class="st">&quot;Rust&quot;</span><span class="op">,</span> <span class="st">&quot;Swift&quot;</span><span class="op">,</span> <span class="st">&quot;Kotlin&quot;</span></span>
<span id="cb156-243"><a href="#cb156-243" aria-hidden="true" tabindex="-1"></a>    <span class="op">};</span></span>
<span id="cb156-244"><a href="#cb156-244" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> n_languages<span class="op">;</span></span>
<span id="cb156-245"><a href="#cb156-245" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> search_lang<span class="op">[</span><span class="dv">20</span><span class="op">];</span></span>
<span id="cb156-246"><a href="#cb156-246" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> found <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb156-247"><a href="#cb156-247" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> <span class="op">*</span>words<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="st">&quot;cat&quot;</span><span class="op">,</span> <span class="st">&quot;elephant&quot;</span><span class="op">,</span> <span class="st">&quot;dog&quot;</span><span class="op">,</span> <span class="st">&quot;hippopotamus&quot;</span><span class="op">,</span> <span class="st">&quot;ant&quot;</span><span class="op">,</span> <span class="st">&quot;butterfly&quot;</span><span class="op">};</span></span>
<span id="cb156-248"><a href="#cb156-248" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> n_words<span class="op">;</span></span>
<span id="cb156-249"><a href="#cb156-249" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> len<span class="op">;</span></span>
<span id="cb156-250"><a href="#cb156-250" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> <span class="op">*</span>menu_items<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb156-251"><a href="#cb156-251" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;1. ファイルを開く&quot;</span><span class="op">,</span></span>
<span id="cb156-252"><a href="#cb156-252" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;2. ファイルを保存&quot;</span><span class="op">,</span></span>
<span id="cb156-253"><a href="#cb156-253" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;3. 設定&quot;</span><span class="op">,</span></span>
<span id="cb156-254"><a href="#cb156-254" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;4. ヘルプ&quot;</span><span class="op">,</span></span>
<span id="cb156-255"><a href="#cb156-255" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;5. 終了&quot;</span></span>
<span id="cb156-256"><a href="#cb156-256" aria-hidden="true" tabindex="-1"></a>    <span class="op">};</span></span>
<span id="cb156-257"><a href="#cb156-257" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> n_items<span class="op">;</span></span>
<span id="cb156-258"><a href="#cb156-258" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb156-259"><a href="#cb156-259" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 1. char配列（文字配列）の基本 */</span></span>
<span id="cb156-260"><a href="#cb156-260" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== char配列（文字配列）===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb156-261"><a href="#cb156-261" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb156-262"><a href="#cb156-262" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>str1<span class="op">,</span> <span class="st">&quot;Hello&quot;</span><span class="op">);</span>  <span class="co">/* C90では初期化後に代入 */</span></span>
<span id="cb156-263"><a href="#cb156-263" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb156-264"><a href="#cb156-264" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;str1: </span><span class="sc">%s</span><span class="st">（サイズ: </span><span class="sc">%lu</span><span class="st">）</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> str1<span class="op">,</span> <span class="kw">sizeof</span><span class="op">(</span>str1<span class="op">));</span></span>
<span id="cb156-265"><a href="#cb156-265" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;str2: </span><span class="sc">%s</span><span class="st">（サイズ: </span><span class="sc">%lu</span><span class="st">）</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> str2<span class="op">,</span> <span class="kw">sizeof</span><span class="op">(</span>str2<span class="op">));</span></span>
<span id="cb156-266"><a href="#cb156-266" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb156-267"><a href="#cb156-267" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 文字配列の変更 */</span></span>
<span id="cb156-268"><a href="#cb156-268" aria-hidden="true" tabindex="-1"></a>    str1<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="ch">&#39;h&#39;</span><span class="op">;</span>  <span class="co">/* 最初の文字を小文字に */</span></span>
<span id="cb156-269"><a href="#cb156-269" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;変更後のstr1: </span><span class="sc">%s\n\n</span><span class="st">&quot;</span><span class="op">,</span> str1<span class="op">);</span></span>
<span id="cb156-270"><a href="#cb156-270" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb156-271"><a href="#cb156-271" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 2. 文字列配列（2次元char配列）*/</span></span>
<span id="cb156-272"><a href="#cb156-272" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== 2次元char配列による文字列配列 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb156-273"><a href="#cb156-273" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb156-274"><a href="#cb156-274" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;果物リスト:</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb156-275"><a href="#cb156-275" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">5</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb156-276"><a href="#cb156-276" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st">: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">,</span> fruits<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb156-277"><a href="#cb156-277" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb156-278"><a href="#cb156-278" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb156-279"><a href="#cb156-279" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 文字列の変更 */</span></span>
<span id="cb156-280"><a href="#cb156-280" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>fruits<span class="op">[</span><span class="dv">2</span><span class="op">],</span> <span class="st">&quot;Mango&quot;</span><span class="op">);</span>  <span class="co">/* OrangeをMangoに変更 */</span></span>
<span id="cb156-281"><a href="#cb156-281" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">変更後（3番目をMangoに）:</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb156-282"><a href="#cb156-282" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">5</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb156-283"><a href="#cb156-283" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st">: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">,</span> fruits<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb156-284"><a href="#cb156-284" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb156-285"><a href="#cb156-285" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb156-286"><a href="#cb156-286" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb156-287"><a href="#cb156-287" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 3. char*配列（ポインタ配列）*/</span></span>
<span id="cb156-288"><a href="#cb156-288" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== char*配列による文字列配列 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb156-289"><a href="#cb156-289" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb156-290"><a href="#cb156-290" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;月の名前:</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb156-291"><a href="#cb156-291" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">12</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb156-292"><a href="#cb156-292" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%2d</span><span class="st">月: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">,</span> months<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb156-293"><a href="#cb156-293" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb156-294"><a href="#cb156-294" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb156-295"><a href="#cb156-295" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb156-296"><a href="#cb156-296" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 4. char配列とchar*配列の違い */</span></span>
<span id="cb156-297"><a href="#cb156-297" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== char配列とchar*配列の違い ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb156-298"><a href="#cb156-298" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb156-299"><a href="#cb156-299" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;char配列のサイズ: </span><span class="sc">%lu</span><span class="st"> バイト</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="kw">sizeof</span><span class="op">(</span>cities1<span class="op">));</span></span>
<span id="cb156-300"><a href="#cb156-300" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;char*配列のサイズ: </span><span class="sc">%lu</span><span class="st"> バイト</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="kw">sizeof</span><span class="op">(</span>cities2<span class="op">));</span></span>
<span id="cb156-301"><a href="#cb156-301" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;（ポインタのサイズx要素数）</span><span class="sc">\n\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb156-302"><a href="#cb156-302" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb156-303"><a href="#cb156-303" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 5. 文字列の検索と操作 */</span></span>
<span id="cb156-304"><a href="#cb156-304" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== 文字列配列の検索 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb156-305"><a href="#cb156-305" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb156-306"><a href="#cb156-306" aria-hidden="true" tabindex="-1"></a>    n_languages <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>programming_languages<span class="op">)</span> <span class="op">/</span> <span class="kw">sizeof</span><span class="op">(</span>programming_languages<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb156-307"><a href="#cb156-307" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb156-308"><a href="#cb156-308" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;検索する言語名を入力: &quot;</span><span class="op">);</span></span>
<span id="cb156-309"><a href="#cb156-309" aria-hidden="true" tabindex="-1"></a>    scanf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%s</span><span class="st">&quot;</span><span class="op">,</span> search_lang<span class="op">);</span></span>
<span id="cb156-310"><a href="#cb156-310" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb156-311"><a href="#cb156-311" aria-hidden="true" tabindex="-1"></a>    found <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb156-312"><a href="#cb156-312" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> n_languages<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb156-313"><a href="#cb156-313" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>strcmp<span class="op">(</span>programming_languages<span class="op">[</span>i<span class="op">],</span> search_lang<span class="op">)</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb156-314"><a href="#cb156-314" aria-hidden="true" tabindex="-1"></a>            printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%s</span><span class="st"> は </span><span class="sc">%d</span><span class="st"> 番目にあります</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> search_lang<span class="op">,</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb156-315"><a href="#cb156-315" aria-hidden="true" tabindex="-1"></a>            found <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb156-316"><a href="#cb156-316" aria-hidden="true" tabindex="-1"></a>            <span class="cf">break</span><span class="op">;</span></span>
<span id="cb156-317"><a href="#cb156-317" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb156-318"><a href="#cb156-318" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb156-319"><a href="#cb156-319" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb156-320"><a href="#cb156-320" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(!</span>found<span class="op">)</span> <span class="op">{</span></span>
<span id="cb156-321"><a href="#cb156-321" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%s</span><span class="st"> は見つかりませんでした</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> search_lang<span class="op">);</span></span>
<span id="cb156-322"><a href="#cb156-322" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb156-323"><a href="#cb156-323" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb156-324"><a href="#cb156-324" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb156-325"><a href="#cb156-325" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 6. 文字列の長さ順にソート（簡易版）*/</span></span>
<span id="cb156-326"><a href="#cb156-326" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== 文字列の長さ順表示 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb156-327"><a href="#cb156-327" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb156-328"><a href="#cb156-328" aria-hidden="true" tabindex="-1"></a>    n_words <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>words<span class="op">)</span> <span class="op">/</span> <span class="kw">sizeof</span><span class="op">(</span>words<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb156-329"><a href="#cb156-329" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb156-330"><a href="#cb156-330" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;元の順序:</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb156-331"><a href="#cb156-331" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> n_words<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb156-332"><a href="#cb156-332" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%s</span><span class="st"> &quot;</span><span class="op">,</span> words<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb156-333"><a href="#cb156-333" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb156-334"><a href="#cb156-334" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb156-335"><a href="#cb156-335" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb156-336"><a href="#cb156-336" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 長さ順に表示（実際の配列は変更しない） */</span></span>
<span id="cb156-337"><a href="#cb156-337" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">長さ順:</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb156-338"><a href="#cb156-338" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>len <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> len <span class="op">&lt;=</span> <span class="dv">20</span><span class="op">;</span> len<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb156-339"><a href="#cb156-339" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> n_words<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb156-340"><a href="#cb156-340" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">((</span><span class="dt">int</span><span class="op">)</span>strlen<span class="op">(</span>words<span class="op">[</span>i<span class="op">])</span> <span class="op">==</span> len<span class="op">)</span> <span class="op">{</span> <span class="co">/* 型キャストで警告を回避 */</span></span>
<span id="cb156-341"><a href="#cb156-341" aria-hidden="true" tabindex="-1"></a>                printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%s</span><span class="st">（</span><span class="sc">%d</span><span class="st">文字） &quot;</span><span class="op">,</span> words<span class="op">[</span>i<span class="op">],</span> len<span class="op">);</span></span>
<span id="cb156-342"><a href="#cb156-342" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb156-343"><a href="#cb156-343" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb156-344"><a href="#cb156-344" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb156-345"><a href="#cb156-345" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb156-346"><a href="#cb156-346" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb156-347"><a href="#cb156-347" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 7. 動的な文字列配列の例 */</span></span>
<span id="cb156-348"><a href="#cb156-348" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== コマンドメニューシステム ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb156-349"><a href="#cb156-349" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb156-350"><a href="#cb156-350" aria-hidden="true" tabindex="-1"></a>    n_items <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>menu_items<span class="op">)</span> <span class="op">/</span> <span class="kw">sizeof</span><span class="op">(</span>menu_items<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb156-351"><a href="#cb156-351" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb156-352"><a href="#cb156-352" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;メニュー:</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb156-353"><a href="#cb156-353" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> n_items<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb156-354"><a href="#cb156-354" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> menu_items<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb156-355"><a href="#cb156-355" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb156-356"><a href="#cb156-356" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb156-357"><a href="#cb156-357" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb156-358"><a href="#cb156-358" aria-hidden="true" tabindex="-1"></a><span class="op">}</span>```</span>
<span id="cb156-359"><a href="#cb156-359" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb156-360"><a href="#cb156-360" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> C99版は<span class="op">[</span>こちら<span class="op">](</span>string_arrays_c99<span class="op">.</span>c<span class="op">)</span>を参照してください。</span>
<span id="cb156-361"><a href="#cb156-361" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb156-362"><a href="#cb156-362" aria-hidden="true" tabindex="-1"></a><span class="op">---</span></span>
<span id="cb156-363"><a href="#cb156-363" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb156-364"><a href="#cb156-364" aria-hidden="true" tabindex="-1"></a><span class="pp"># </span><span class="er">第8章: 文字列処理</span></span>
<span id="cb156-365"><a href="#cb156-365" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb156-366"><a href="#cb156-366" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb156-367"><a href="#cb156-367" aria-hidden="true" tabindex="-1"></a><span class="pp">#</span><span class="er">#  対応C規格</span></span>
<span id="cb156-368"><a href="#cb156-368" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> <span class="op">**</span>主要対象<span class="op">:**</span> C90</span>
<span id="cb156-369"><a href="#cb156-369" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> <span class="op">**</span>学習内容<span class="op">:**</span> 文字列の基本、文字列操作関数、文字列配列の詳細操作、文字列の比較・検索・変換</span>
<span id="cb156-370"><a href="#cb156-370" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb156-371"><a href="#cb156-371" aria-hidden="true" tabindex="-1"></a><span class="pp">#</span><span class="er">#  学習目標</span></span>
<span id="cb156-372"><a href="#cb156-372" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb156-373"><a href="#cb156-373" aria-hidden="true" tabindex="-1"></a>この章を完了すると、以下のことができるようになります：</span>
<span id="cb156-374"><a href="#cb156-374" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb156-375"><a href="#cb156-375" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> 文字列の基本概念を完全に理解する</span>
<span id="cb156-376"><a href="#cb156-376" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> 標準ライブラリの文字列操作関数を使いこなせる</span>
<span id="cb156-377"><a href="#cb156-377" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> 文字列配列の詳細な操作ができる</span>
<span id="cb156-378"><a href="#cb156-378" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> 次元文字配列と文字列ポインタ配列を使い分けられる</span>
<span id="cb156-379"><a href="#cb156-379" aria-hidden="true" tabindex="-1"></a><span class="op">-</span> 実践的な文字列処理プログラムを作成できる</span>
<span id="cb156-380"><a href="#cb156-380" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb156-381"><a href="#cb156-381" aria-hidden="true" tabindex="-1"></a><span class="pp">#</span><span class="er">#  理論解説</span></span>
<span id="cb156-382"><a href="#cb156-382" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb156-383"><a href="#cb156-383" aria-hidden="true" tabindex="-1"></a><span class="pp">#</span><span class="er">## 文字列の基本概念 </span></span>
<span id="cb156-384"><a href="#cb156-384" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb156-385"><a href="#cb156-385" aria-hidden="true" tabindex="-1"></a>C言語では文字列は文字の配列として表現され、nll文字（<span class="ch">&#39;</span><span class="er">&#39;</span>）で終端されます。</span>
<span id="cb156-386"><a href="#cb156-386" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb156-387"><a href="#cb156-387" aria-hidden="true" tabindex="-1"></a><span class="pp">#</span><span class="er">### 文字列の表現方法</span></span>
<span id="cb156-388"><a href="#cb156-388" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb156-389"><a href="#cb156-389" aria-hidden="true" tabindex="-1"></a>```c</span>
<span id="cb156-390"><a href="#cb156-390" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb156-391"><a href="#cb156-391" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb156-392"><a href="#cb156-392" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb156-393"><a href="#cb156-393" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb156-394"><a href="#cb156-394" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb156-395"><a href="#cb156-395" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 方法: 文字配列として宣言 */</span></span>
<span id="cb156-396"><a href="#cb156-396" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> str<span class="op">[]</span> <span class="op">=</span> <span class="ch">&#39;H&#39;</span><span class="op">,</span> <span class="ch">&#39;e&#39;</span><span class="op">,</span> <span class="ch">&#39;l&#39;</span><span class="op">,</span> <span class="ch">&#39;l&#39;</span><span class="op">,</span> <span class="ch">&#39;o&#39;</span><span class="op">,</span> <span class="ch">&#39;</span><span class="er">&#39;</span><span class="op">;</span></span>
<span id="cb156-397"><a href="#cb156-397" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb156-398"><a href="#cb156-398" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 方法: 文字列リテラルで初期化 */</span></span>
<span id="cb156-399"><a href="#cb156-399" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> str<span class="op">[]</span> <span class="op">=</span> <span class="st">&quot;Hello&quot;</span><span class="op">;</span></span>
<span id="cb156-400"><a href="#cb156-400" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb156-401"><a href="#cb156-401" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 方法: サイズを自動決定 */</span></span>
<span id="cb156-402"><a href="#cb156-402" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> str<span class="op">[]</span> <span class="op">=</span> <span class="st">&quot;Hello&quot;</span><span class="op">;</span></span>
<span id="cb156-403"><a href="#cb156-403" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb156-404"><a href="#cb156-404" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 方法: 文字列ポインタ */</span></span>
<span id="cb156-405"><a href="#cb156-405" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> <span class="op">*</span>str <span class="op">=</span> <span class="st">&quot;Hello&quot;</span><span class="op">;</span></span>
<span id="cb156-406"><a href="#cb156-406" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb156-407"><a href="#cb156-407" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;str: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> str<span class="op">);</span></span>
<span id="cb156-408"><a href="#cb156-408" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;str: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> str<span class="op">);</span></span>
<span id="cb156-409"><a href="#cb156-409" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;str: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> str<span class="op">);</span></span>
<span id="cb156-410"><a href="#cb156-410" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;str: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> str<span class="op">);</span></span>
<span id="cb156-411"><a href="#cb156-411" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb156-412"><a href="#cb156-412" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">;</span></span></code></pre></div>
<h4 id="文字列の長さとサイズ">文字列の長さとサイズ</h4>
<div class="sourceCode" id="cb157"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb157-1"><a href="#cb157-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb157-2"><a href="#cb157-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;string.h&gt;</span></span>
<span id="cb157-3"><a href="#cb157-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb157-4"><a href="#cb157-4" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb157-5"><a href="#cb157-5" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb157-6"><a href="#cb157-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb157-7"><a href="#cb157-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> str<span class="op">[]</span> <span class="op">=</span> <span class="st">&quot;Hello&quot;</span><span class="op">;</span></span>
<span id="cb157-8"><a href="#cb157-8" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb157-9"><a href="#cb157-9" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;文字列: &quot;</span><span class="op">%</span>s<span class="st">&quot;n&quot;</span><span class="op">,</span> str<span class="op">);</span></span>
<span id="cb157-10"><a href="#cb157-10" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;strlen(str): </span><span class="sc">%lu\n</span><span class="st">&quot;</span><span class="op">,</span> strlen<span class="op">(</span>str<span class="op">));</span>    <span class="co">/*  (文字数) */</span></span>
<span id="cb157-11"><a href="#cb157-11" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;sizeof(str): </span><span class="sc">%lu\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="kw">sizeof</span><span class="op">(</span>str<span class="op">));</span>    <span class="co">/*  (配列サイズ) */</span></span>
<span id="cb157-12"><a href="#cb157-12" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb157-13"><a href="#cb157-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">;</span></span></code></pre></div>
<h3 id="標準文字列操作関数">標準文字列操作関数</h3>
<h4 id="strcpy---文字列のコピー">strcpy() - 文字列のコピー</h4>
<div class="sourceCode" id="cb158"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb158-1"><a href="#cb158-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb158-2"><a href="#cb158-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;string.h&gt;</span></span>
<span id="cb158-3"><a href="#cb158-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb158-4"><a href="#cb158-4" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb158-5"><a href="#cb158-5" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb158-6"><a href="#cb158-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb158-7"><a href="#cb158-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> sorce<span class="op">[]</span> <span class="op">=</span> <span class="st">&quot;Hello, World!&quot;</span><span class="op">;</span></span>
<span id="cb158-8"><a href="#cb158-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> destination<span class="op">[];</span></span>
<span id="cb158-9"><a href="#cb158-9" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb158-10"><a href="#cb158-10" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 文字列のコピー */</span></span>
<span id="cb158-11"><a href="#cb158-11" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>destination<span class="op">,</span> sorce<span class="op">);</span></span>
<span id="cb158-12"><a href="#cb158-12" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;destination: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> destination<span class="op">);</span></span>
<span id="cb158-13"><a href="#cb158-13" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb158-14"><a href="#cb158-14" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 部分的なコピー */</span></span>
<span id="cb158-15"><a href="#cb158-15" aria-hidden="true" tabindex="-1"></a>    struncpy<span class="op">(</span>destination<span class="op">,</span> sorce<span class="op">,</span> <span class="op">);</span></span>
<span id="cb158-16"><a href="#cb158-16" aria-hidden="true" tabindex="-1"></a>    destination<span class="op">[]</span> <span class="op">=</span> <span class="ch">&#39;</span><span class="er">&#39;</span><span class="op">;</span>  <span class="co">/* nll終端を明示的に追加 */</span></span>
<span id="cb158-17"><a href="#cb158-17" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;partial copy: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> destination<span class="op">);</span>  <span class="co">/* &quot;Hello&quot; */</span></span>
<span id="cb158-18"><a href="#cb158-18" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb158-19"><a href="#cb158-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">;</span></span></code></pre></div>
<h4 id="strcat---文字列の連結">strcat() - 文字列の連結</h4>
<div class="sourceCode" id="cb159"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb159-1"><a href="#cb159-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb159-2"><a href="#cb159-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;string.h&gt;</span></span>
<span id="cb159-3"><a href="#cb159-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb159-4"><a href="#cb159-4" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb159-5"><a href="#cb159-5" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb159-6"><a href="#cb159-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb159-7"><a href="#cb159-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> str<span class="op">[]</span> <span class="op">=</span> <span class="st">&quot;Hello&quot;</span><span class="op">;</span></span>
<span id="cb159-8"><a href="#cb159-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> str<span class="op">[]</span> <span class="op">=</span> <span class="st">&quot;, World!&quot;</span><span class="op">;</span></span>
<span id="cb159-9"><a href="#cb159-9" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> str<span class="op">[]</span> <span class="op">=</span> <span class="st">&quot; How are yo?&quot;</span><span class="op">;</span></span>
<span id="cb159-10"><a href="#cb159-10" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb159-11"><a href="#cb159-11" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 文字列の連結 */</span></span>
<span id="cb159-12"><a href="#cb159-12" aria-hidden="true" tabindex="-1"></a>    strcat<span class="op">(</span>str<span class="op">,</span> str<span class="op">);</span></span>
<span id="cb159-13"><a href="#cb159-13" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;After strcat: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> str<span class="op">);</span>  <span class="co">/* &quot;Hello, World!&quot; */</span></span>
<span id="cb159-14"><a href="#cb159-14" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb159-15"><a href="#cb159-15" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 部分的な連結 */</span></span>
<span id="cb159-16"><a href="#cb159-16" aria-hidden="true" tabindex="-1"></a>    struncat<span class="op">(</span>str<span class="op">,</span> str<span class="op">,</span> <span class="op">);</span></span>
<span id="cb159-17"><a href="#cb159-17" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;After struncat: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> str<span class="op">);</span> <span class="co">/* &quot;Hello, World! How&quot; */</span></span>
<span id="cb159-18"><a href="#cb159-18" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb159-19"><a href="#cb159-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">;</span></span></code></pre></div>
<h4 id="strcmp---文字列の比較">strcmp() - 文字列の比較</h4>
<div class="sourceCode" id="cb160"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb160-1"><a href="#cb160-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb160-2"><a href="#cb160-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;string.h&gt;</span></span>
<span id="cb160-3"><a href="#cb160-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb160-4"><a href="#cb160-4" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb160-5"><a href="#cb160-5" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb160-6"><a href="#cb160-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb160-7"><a href="#cb160-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> str<span class="op">[]</span> <span class="op">=</span> <span class="st">&quot;Apple&quot;</span><span class="op">;</span></span>
<span id="cb160-8"><a href="#cb160-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> str<span class="op">[]</span> <span class="op">=</span> <span class="st">&quot;anana&quot;</span><span class="op">;</span></span>
<span id="cb160-9"><a href="#cb160-9" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> str<span class="op">[]</span> <span class="op">=</span> <span class="st">&quot;Apple&quot;</span><span class="op">;</span></span>
<span id="cb160-10"><a href="#cb160-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> result<span class="op">;</span></span>
<span id="cb160-11"><a href="#cb160-11" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb160-12"><a href="#cb160-12" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 文字列の比較 */</span></span>
<span id="cb160-13"><a href="#cb160-13" aria-hidden="true" tabindex="-1"></a>    result <span class="op">=</span> strcmp<span class="op">(</span>str<span class="op">,</span> str<span class="op">);</span></span>
<span id="cb160-14"><a href="#cb160-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>result <span class="op">&lt;</span> <span class="op">)</span> </span>
<span id="cb160-15"><a href="#cb160-15" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;&quot;</span><span class="op">%</span>s<span class="st">&quot; &lt; &quot;</span><span class="op">%</span>s<span class="st">&quot;n&quot;</span><span class="op">,</span> str<span class="op">,</span> str<span class="op">);</span></span>
<span id="cb160-16"><a href="#cb160-16" aria-hidden="true" tabindex="-1"></a>     <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>result <span class="op">&gt;</span> <span class="op">)</span> </span>
<span id="cb160-17"><a href="#cb160-17" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;&quot;</span><span class="op">%</span>s<span class="st">&quot; &gt; &quot;</span><span class="op">%</span>s<span class="st">&quot;n&quot;</span><span class="op">,</span> str<span class="op">,</span> str<span class="op">);</span></span>
<span id="cb160-18"><a href="#cb160-18" aria-hidden="true" tabindex="-1"></a>     <span class="cf">else</span> </span>
<span id="cb160-19"><a href="#cb160-19" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;&quot;</span><span class="op">%</span>s<span class="st">&quot; == &quot;</span><span class="op">%</span>s<span class="st">&quot;n&quot;</span><span class="op">,</span> str<span class="op">,</span> str<span class="op">);</span></span>
<span id="cb160-20"><a href="#cb160-20" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb160-21"><a href="#cb160-21" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb160-22"><a href="#cb160-22" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 等価性の確認 */</span></span>
<span id="cb160-23"><a href="#cb160-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>strcmp<span class="op">(</span>str<span class="op">,</span> str<span class="op">)</span> <span class="op">==</span> <span class="op">)</span> </span>
<span id="cb160-24"><a href="#cb160-24" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;&quot;</span><span class="op">%</span>s<span class="st">&quot; と &quot;</span><span class="op">%</span>s<span class="st">&quot; は同じですn&quot;</span><span class="op">,</span> str<span class="op">,</span> str<span class="op">);</span></span>
<span id="cb160-25"><a href="#cb160-25" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb160-26"><a href="#cb160-26" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb160-27"><a href="#cb160-27" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 部分比較 */</span></span>
<span id="cb160-28"><a href="#cb160-28" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>struncmp<span class="op">(</span>str<span class="op">,</span> str<span class="op">,</span> <span class="op">)</span> <span class="op">!=</span> <span class="op">)</span> </span>
<span id="cb160-29"><a href="#cb160-29" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;最初の文字が異なりますn&quot;</span><span class="op">);</span></span>
<span id="cb160-30"><a href="#cb160-30" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb160-31"><a href="#cb160-31" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb160-32"><a href="#cb160-32" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">;</span></span></code></pre></div>
<h4 id="文字列検索関数">文字列検索関数</h4>
<div class="sourceCode" id="cb161"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb161-1"><a href="#cb161-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb161-2"><a href="#cb161-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;string.h&gt;</span></span>
<span id="cb161-3"><a href="#cb161-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb161-4"><a href="#cb161-4" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb161-5"><a href="#cb161-5" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb161-6"><a href="#cb161-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb161-7"><a href="#cb161-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> text<span class="op">[]</span> <span class="op">=</span> <span class="st">&quot;Hello, World! Welcome to C programming.&quot;</span><span class="op">;</span></span>
<span id="cb161-8"><a href="#cb161-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> <span class="op">*</span>fond<span class="op">;</span></span>
<span id="cb161-9"><a href="#cb161-9" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb161-10"><a href="#cb161-10" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 文字の検索 */</span></span>
<span id="cb161-11"><a href="#cb161-11" aria-hidden="true" tabindex="-1"></a>    fond <span class="op">=</span> strchr<span class="op">(</span>text<span class="op">,</span> <span class="ch">&#39;W&#39;</span><span class="op">);</span></span>
<span id="cb161-12"><a href="#cb161-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>fond <span class="op">!=</span> NULL<span class="op">)</span> </span>
<span id="cb161-13"><a href="#cb161-13" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;&#39;W&#39; fond at position: </span><span class="sc">%ld</span><span class="st">n&quot;</span><span class="op">,</span> fond <span class="op">-</span> text<span class="op">);</span></span>
<span id="cb161-14"><a href="#cb161-14" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb161-15"><a href="#cb161-15" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb161-16"><a href="#cb161-16" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 文字列の検索 */</span></span>
<span id="cb161-17"><a href="#cb161-17" aria-hidden="true" tabindex="-1"></a>    fond <span class="op">=</span> strstr<span class="op">(</span>text<span class="op">,</span> <span class="st">&quot;World&quot;</span><span class="op">);</span></span>
<span id="cb161-18"><a href="#cb161-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>fond <span class="op">!=</span> NULL<span class="op">)</span> </span>
<span id="cb161-19"><a href="#cb161-19" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;&quot;</span>World<span class="st">&quot; fond at position: </span><span class="sc">%ld</span><span class="st">n&quot;</span><span class="op">,</span> fond <span class="op">-</span> text<span class="op">);</span></span>
<span id="cb161-20"><a href="#cb161-20" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;ond: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> fond<span class="op">);</span></span>
<span id="cb161-21"><a href="#cb161-21" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb161-22"><a href="#cb161-22" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb161-23"><a href="#cb161-23" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 最後の文字を検索 */</span></span>
<span id="cb161-24"><a href="#cb161-24" aria-hidden="true" tabindex="-1"></a>    fond <span class="op">=</span> strrchr<span class="op">(</span>text<span class="op">,</span> <span class="ch">&#39;o&#39;</span><span class="op">);</span></span>
<span id="cb161-25"><a href="#cb161-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>fond <span class="op">!=</span> NULL<span class="op">)</span> </span>
<span id="cb161-26"><a href="#cb161-26" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;Last &#39;o&#39; at position: </span><span class="sc">%ld</span><span class="st">n&quot;</span><span class="op">,</span> fond <span class="op">-</span> text<span class="op">);</span></span>
<span id="cb161-27"><a href="#cb161-27" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb161-28"><a href="#cb161-28" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb161-29"><a href="#cb161-29" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">;</span></span></code></pre></div>
<h3 id="文字列配列の詳細操作">文字列配列の詳細操作</h3>
<p>これがユーザーの重要な要望の2つです。</p>
<h4 id="次元文字配列での文字列配列">次元文字配列での文字列配列</h4>
<div class="sourceCode" id="cb162"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb162-1"><a href="#cb162-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb162-2"><a href="#cb162-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;string.h&gt;</span></span>
<span id="cb162-3"><a href="#cb162-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb162-4"><a href="#cb162-4" aria-hidden="true" tabindex="-1"></a><span class="pp">#define MAX_STRINGS </span></span>
<span id="cb162-5"><a href="#cb162-5" aria-hidden="true" tabindex="-1"></a><span class="pp">#define MAX_LNGTH </span></span>
<span id="cb162-6"><a href="#cb162-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb162-7"><a href="#cb162-7" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb162-8"><a href="#cb162-8" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb162-9"><a href="#cb162-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb162-10"><a href="#cb162-10" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 次元文字配列による文字列配列 */</span></span>
<span id="cb162-11"><a href="#cb162-11" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> languages<span class="op">[</span>MAX_STRINGS<span class="op">][</span>MAX_LNGTH<span class="op">];</span></span>
<span id="cb162-12"><a href="#cb162-12" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> count <span class="op">=</span> <span class="op">;</span></span>
<span id="cb162-13"><a href="#cb162-13" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb162-14"><a href="#cb162-14" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb162-15"><a href="#cb162-15" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 文字列配列への代入 */</span></span>
<span id="cb162-16"><a href="#cb162-16" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>languages<span class="op">[</span>count<span class="op">++],</span> <span class="st">&quot;C&quot;</span><span class="op">);</span></span>
<span id="cb162-17"><a href="#cb162-17" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>languages<span class="op">[</span>count<span class="op">++],</span> <span class="st">&quot;Python&quot;</span><span class="op">);</span></span>
<span id="cb162-18"><a href="#cb162-18" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>languages<span class="op">[</span>count<span class="op">++],</span> <span class="st">&quot;Java&quot;</span><span class="op">);</span></span>
<span id="cb162-19"><a href="#cb162-19" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>languages<span class="op">[</span>count<span class="op">++],</span> <span class="st">&quot;JavaScript&quot;</span><span class="op">);</span></span>
<span id="cb162-20"><a href="#cb162-20" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>languages<span class="op">[</span>count<span class="op">++],</span> <span class="st">&quot;C++&quot;</span><span class="op">);</span></span>
<span id="cb162-21"><a href="#cb162-21" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb162-22"><a href="#cb162-22" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 表示 */</span></span>
<span id="cb162-23"><a href="#cb162-23" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;プログラミング言語一覧:n&quot;</span><span class="op">);</span></span>
<span id="cb162-24"><a href="#cb162-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="op">;</span> i <span class="op">&lt;</span> count<span class="op">;</span> i<span class="op">++)</span> </span>
<span id="cb162-25"><a href="#cb162-25" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st">. </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> i <span class="op">+</span> <span class="op">,</span> languages<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb162-26"><a href="#cb162-26" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb162-27"><a href="#cb162-27" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb162-28"><a href="#cb162-28" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 文字列の変更 */</span></span>
<span id="cb162-29"><a href="#cb162-29" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>languages<span class="op">[],</span> <span class="st">&quot;C言語&quot;</span><span class="op">);</span></span>
<span id="cb162-30"><a href="#cb162-30" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;n変更後の番目: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> languages<span class="op">[]);</span></span>
<span id="cb162-31"><a href="#cb162-31" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb162-32"><a href="#cb162-32" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">;</span></span></code></pre></div>
<h4
id="文字列ポインタ配列での文字列配列">文字列ポインタ配列での文字列配列</h4>
<div class="sourceCode" id="cb163"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb163-1"><a href="#cb163-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb163-2"><a href="#cb163-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;string.h&gt;</span></span>
<span id="cb163-3"><a href="#cb163-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-4"><a href="#cb163-4" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb163-5"><a href="#cb163-5" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb163-6"><a href="#cb163-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-7"><a href="#cb163-7" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 文字列ポインタ配列 */</span></span>
<span id="cb163-8"><a href="#cb163-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> <span class="op">*</span>frits<span class="op">[]</span> <span class="op">=</span> </span>
<span id="cb163-9"><a href="#cb163-9" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;Apple&quot;</span><span class="op">,</span></span>
<span id="cb163-10"><a href="#cb163-10" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;anana&quot;</span><span class="op">,</span> </span>
<span id="cb163-11"><a href="#cb163-11" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;Cherry&quot;</span><span class="op">,</span></span>
<span id="cb163-12"><a href="#cb163-12" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;Date&quot;</span><span class="op">,</span></span>
<span id="cb163-13"><a href="#cb163-13" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;lderberry&quot;</span></span>
<span id="cb163-14"><a href="#cb163-14" aria-hidden="true" tabindex="-1"></a>    <span class="op">;</span></span>
<span id="cb163-15"><a href="#cb163-15" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> count <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>frits<span class="op">)</span> <span class="op">/</span> <span class="kw">sizeof</span><span class="op">(</span>frits<span class="op">[]);</span></span>
<span id="cb163-16"><a href="#cb163-16" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb163-17"><a href="#cb163-17" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb163-18"><a href="#cb163-18" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 表示 */</span></span>
<span id="cb163-19"><a href="#cb163-19" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;果物一覧:n&quot;</span><span class="op">);</span></span>
<span id="cb163-20"><a href="#cb163-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="op">;</span> i <span class="op">&lt;</span> count<span class="op">;</span> i<span class="op">++)</span> </span>
<span id="cb163-21"><a href="#cb163-21" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st">. </span><span class="sc">%s</span><span class="st"> (長さ: %l)n&quot;</span><span class="op">,</span> i <span class="op">+</span> <span class="op">,</span> frits<span class="op">[</span>i<span class="op">],</span> strlen<span class="op">(</span>frits<span class="op">[</span>i<span class="op">]));</span></span>
<span id="cb163-22"><a href="#cb163-22" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb163-23"><a href="#cb163-23" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb163-24"><a href="#cb163-24" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* ポインタの変更（文字列リテラルの置き換え） */</span></span>
<span id="cb163-25"><a href="#cb163-25" aria-hidden="true" tabindex="-1"></a>    frits<span class="op">[]</span> <span class="op">=</span> <span class="st">&quot;リンゴ&quot;</span><span class="op">;</span></span>
<span id="cb163-26"><a href="#cb163-26" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;n変更後の番目: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> frits<span class="op">[]);</span></span>
<span id="cb163-27"><a href="#cb163-27" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb163-28"><a href="#cb163-28" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">;</span></span></code></pre></div>
<h4 id="文字列配列の初期化と動的変更">文字列配列の初期化と動的変更</h4>
<div class="sourceCode" id="cb164"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb164-1"><a href="#cb164-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb164-2"><a href="#cb164-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;string.h&gt;</span></span>
<span id="cb164-3"><a href="#cb164-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb164-4"><a href="#cb164-4" aria-hidden="true" tabindex="-1"></a><span class="pp">#define MAX_ITMS </span></span>
<span id="cb164-5"><a href="#cb164-5" aria-hidden="true" tabindex="-1"></a><span class="pp">#define MAX_LNGTH </span></span>
<span id="cb164-6"><a href="#cb164-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb164-7"><a href="#cb164-7" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb164-8"><a href="#cb164-8" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb164-9"><a href="#cb164-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb164-10"><a href="#cb164-10" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 動的に変更可能な文字列配列 */</span></span>
<span id="cb164-11"><a href="#cb164-11" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> men_items<span class="op">[</span>MAX_ITMS<span class="op">][</span>MAX_LNGTH<span class="op">];</span></span>
<span id="cb164-12"><a href="#cb164-12" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> <span class="op">*</span>categories<span class="op">[]</span> <span class="op">=</span> <span class="st">&quot;前菜&quot;</span><span class="op">,</span> <span class="st">&quot;メイン&quot;</span><span class="op">,</span> <span class="st">&quot;デザート&quot;</span><span class="op">,</span> <span class="st">&quot;飲み物&quot;</span><span class="op">;</span></span>
<span id="cb164-13"><a href="#cb164-13" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> item_count <span class="op">=</span> <span class="op">;</span></span>
<span id="cb164-14"><a href="#cb164-14" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb164-15"><a href="#cb164-15" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb164-16"><a href="#cb164-16" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* メニュー項目の追加 */</span></span>
<span id="cb164-17"><a href="#cb164-17" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>men_items<span class="op">[</span>item_count<span class="op">++],</span> <span class="st">&quot;サラダ&quot;</span><span class="op">);</span></span>
<span id="cb164-18"><a href="#cb164-18" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>men_items<span class="op">[</span>item_count<span class="op">++],</span> <span class="st">&quot;ステーキ&quot;</span><span class="op">);</span></span>
<span id="cb164-19"><a href="#cb164-19" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>men_items<span class="op">[</span>item_count<span class="op">++],</span> <span class="st">&quot;アイスクリーム&quot;</span><span class="op">);</span></span>
<span id="cb164-20"><a href="#cb164-20" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>men_items<span class="op">[</span>item_count<span class="op">++],</span> <span class="st">&quot;コーヒー&quot;</span><span class="op">);</span></span>
<span id="cb164-21"><a href="#cb164-21" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb164-22"><a href="#cb164-22" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* カテゴリ別表示 */</span></span>
<span id="cb164-23"><a href="#cb164-23" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== レストランメニュー ===n&quot;</span><span class="op">);</span></span>
<span id="cb164-24"><a href="#cb164-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="op">;</span> i <span class="op">&lt;</span> item_count <span class="op">&amp;&amp;</span> i <span class="op">&lt;</span> <span class="op">;</span> i<span class="op">++)</span> </span>
<span id="cb164-25"><a href="#cb164-25" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;[</span><span class="sc">%s</span><span class="st">] </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> categories<span class="op">[</span>i<span class="op">],</span> men_items<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb164-26"><a href="#cb164-26" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb164-27"><a href="#cb164-27" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb164-28"><a href="#cb164-28" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 項目の変更 */</span></span>
<span id="cb164-29"><a href="#cb164-29" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>men_items<span class="op">[],</span> <span class="st">&quot;ハンバーグ&quot;</span><span class="op">);</span></span>
<span id="cb164-30"><a href="#cb164-30" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;nメイン料理を変更: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> men_items<span class="op">[]);</span></span>
<span id="cb164-31"><a href="#cb164-31" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb164-32"><a href="#cb164-32" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">;</span></span></code></pre></div>
<h3 id="文字列配列の比較と使い分け">文字列配列の比較と使い分け</h3>
<h4 id="メモリ使用量の比較">メモリ使用量の比較</h4>
<div class="sourceCode" id="cb165"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb165-1"><a href="#cb165-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb165-2"><a href="#cb165-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;string.h&gt;</span></span>
<span id="cb165-3"><a href="#cb165-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb165-4"><a href="#cb165-4" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb165-5"><a href="#cb165-5" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb165-6"><a href="#cb165-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb165-7"><a href="#cb165-7" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 次元文字配列 */</span></span>
<span id="cb165-8"><a href="#cb165-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> matrix_strings<span class="op">[][]</span> <span class="op">=</span> </span>
<span id="cb165-9"><a href="#cb165-9" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;Cat&quot;</span><span class="op">,</span> <span class="st">&quot;Dog&quot;</span><span class="op">,</span> <span class="st">&quot;ird&quot;</span><span class="op">,</span> <span class="st">&quot;ish&quot;</span><span class="op">,</span> <span class="st">&quot;Rabbit&quot;</span></span>
<span id="cb165-10"><a href="#cb165-10" aria-hidden="true" tabindex="-1"></a>    <span class="op">;</span></span>
<span id="cb165-11"><a href="#cb165-11" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb165-12"><a href="#cb165-12" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 文字列ポインタ配列 */</span></span>
<span id="cb165-13"><a href="#cb165-13" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> <span class="op">*</span>pointer_strings<span class="op">[]</span> <span class="op">=</span> </span>
<span id="cb165-14"><a href="#cb165-14" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;Cat&quot;</span><span class="op">,</span> <span class="st">&quot;Dog&quot;</span><span class="op">,</span> <span class="st">&quot;ird&quot;</span><span class="op">,</span> <span class="st">&quot;ish&quot;</span><span class="op">,</span> <span class="st">&quot;Rabbit&quot;</span></span>
<span id="cb165-15"><a href="#cb165-15" aria-hidden="true" tabindex="-1"></a>    <span class="op">;</span></span>
<span id="cb165-16"><a href="#cb165-16" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb165-17"><a href="#cb165-17" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== メモリ使用量比較 ===n&quot;</span><span class="op">);</span></span>
<span id="cb165-18"><a href="#cb165-18" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;次元文字配列: </span><span class="sc">%lu</span><span class="st"> バイトn&quot;</span><span class="op">,</span> <span class="kw">sizeof</span><span class="op">(</span>matrix_strings<span class="op">));</span></span>
<span id="cb165-19"><a href="#cb165-19" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;文字列ポインタ配列: </span><span class="sc">%lu</span><span class="st"> バイトn&quot;</span><span class="op">,</span> <span class="kw">sizeof</span><span class="op">(</span>pointer_strings<span class="op">));</span></span>
<span id="cb165-20"><a href="#cb165-20" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb165-21"><a href="#cb165-21" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;n=== 実際の文字列長 ===n&quot;</span><span class="op">);</span></span>
<span id="cb165-22"><a href="#cb165-22" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb165-23"><a href="#cb165-23" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> total_chars <span class="op">=</span> <span class="op">;</span></span>
<span id="cb165-24"><a href="#cb165-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="op">;</span> i <span class="op">&lt;</span> <span class="op">;</span> i<span class="op">++)</span> </span>
<span id="cb165-25"><a href="#cb165-25" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> len <span class="op">=</span> strlen<span class="op">(</span>matrix_strings<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb165-26"><a href="#cb165-26" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%s</span><span class="st">: </span><span class="sc">%d</span><span class="st">文字n&quot;</span><span class="op">,</span> matrix_strings<span class="op">[</span>i<span class="op">],</span> len<span class="op">);</span></span>
<span id="cb165-27"><a href="#cb165-27" aria-hidden="true" tabindex="-1"></a>        total_chars <span class="op">+=</span> len<span class="op">;</span></span>
<span id="cb165-28"><a href="#cb165-28" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb165-29"><a href="#cb165-29" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;総文字数: </span><span class="sc">%d</span><span class="st">文字n&quot;</span><span class="op">,</span> total_chars<span class="op">);</span></span>
<span id="cb165-30"><a href="#cb165-30" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;未使用領域: </span><span class="sc">%lu</span><span class="st"> バイトn&quot;</span><span class="op">,</span> <span class="kw">sizeof</span><span class="op">(</span>matrix_strings<span class="op">)</span> <span class="op">-</span> total_chars <span class="op">-</span> <span class="op">);</span></span>
<span id="cb165-31"><a href="#cb165-31" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb165-32"><a href="#cb165-32" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">;</span></span></code></pre></div>
<h4 id="動的な文字列配列の管理">動的な文字列配列の管理</h4>
<div class="sourceCode" id="cb166"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb166-1"><a href="#cb166-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb166-2"><a href="#cb166-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;string.h&gt;</span></span>
<span id="cb166-3"><a href="#cb166-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb166-4"><a href="#cb166-4" aria-hidden="true" tabindex="-1"></a><span class="pp">#define MAX_STUDENTS </span></span>
<span id="cb166-5"><a href="#cb166-5" aria-hidden="true" tabindex="-1"></a><span class="pp">#define MAX_NAM_LNGTH </span></span>
<span id="cb166-6"><a href="#cb166-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb166-7"><a href="#cb166-7" aria-hidden="true" tabindex="-1"></a><span class="kw">typedef</span> strct </span>
<span id="cb166-8"><a href="#cb166-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> name<span class="op">[</span>MAX_NAM_LNGTH<span class="op">];</span></span>
<span id="cb166-9"><a href="#cb166-9" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> age<span class="op">;</span></span>
<span id="cb166-10"><a href="#cb166-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">float</span> gpa<span class="op">;</span></span>
<span id="cb166-11"><a href="#cb166-11" aria-hidden="true" tabindex="-1"></a> Stdent<span class="op">;</span></span>
<span id="cb166-12"><a href="#cb166-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb166-13"><a href="#cb166-13" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb166-14"><a href="#cb166-14" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb166-15"><a href="#cb166-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb166-16"><a href="#cb166-16" aria-hidden="true" tabindex="-1"></a>    Stdent stdents<span class="op">[</span>MAX_STUDENTS<span class="op">];</span></span>
<span id="cb166-17"><a href="#cb166-17" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> <span class="op">*</span>stats_messages<span class="op">[]</span> <span class="op">=</span> </span>
<span id="cb166-18"><a href="#cb166-18" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;優秀&quot;</span><span class="op">,</span> <span class="st">&quot;良好&quot;</span><span class="op">,</span> <span class="st">&quot;普通&quot;</span><span class="op">,</span> <span class="st">&quot;要努力&quot;</span></span>
<span id="cb166-19"><a href="#cb166-19" aria-hidden="true" tabindex="-1"></a>    <span class="op">;</span></span>
<span id="cb166-20"><a href="#cb166-20" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> stdent_count <span class="op">=</span> <span class="op">;</span></span>
<span id="cb166-21"><a href="#cb166-21" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb166-22"><a href="#cb166-22" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb166-23"><a href="#cb166-23" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 学生データの追加 */</span></span>
<span id="cb166-24"><a href="#cb166-24" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>stdents<span class="op">[</span>stdent_count<span class="op">].</span>name<span class="op">,</span> <span class="st">&quot;田中太郎&quot;</span><span class="op">);</span></span>
<span id="cb166-25"><a href="#cb166-25" aria-hidden="true" tabindex="-1"></a>    stdents<span class="op">[</span>stdent_count<span class="op">].</span>age <span class="op">=</span> <span class="op">;</span></span>
<span id="cb166-26"><a href="#cb166-26" aria-hidden="true" tabindex="-1"></a>    stdents<span class="op">[</span>stdent_count<span class="op">].</span>gpa <span class="op">=</span> <span class="op">.;</span></span>
<span id="cb166-27"><a href="#cb166-27" aria-hidden="true" tabindex="-1"></a>    stdent_count<span class="op">++;</span></span>
<span id="cb166-28"><a href="#cb166-28" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb166-29"><a href="#cb166-29" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>stdents<span class="op">[</span>stdent_count<span class="op">].</span>name<span class="op">,</span> <span class="st">&quot;佐藤花子&quot;</span><span class="op">);</span></span>
<span id="cb166-30"><a href="#cb166-30" aria-hidden="true" tabindex="-1"></a>    stdents<span class="op">[</span>stdent_count<span class="op">].</span>age <span class="op">=</span> <span class="dv">9</span><span class="op">;</span></span>
<span id="cb166-31"><a href="#cb166-31" aria-hidden="true" tabindex="-1"></a>    stdents<span class="op">[</span>stdent_count<span class="op">].</span>gpa <span class="op">=</span> <span class="op">.;</span></span>
<span id="cb166-32"><a href="#cb166-32" aria-hidden="true" tabindex="-1"></a>    stdent_count<span class="op">++;</span></span>
<span id="cb166-33"><a href="#cb166-33" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb166-34"><a href="#cb166-34" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>stdents<span class="op">[</span>stdent_count<span class="op">].</span>name<span class="op">,</span> <span class="st">&quot;鈴木一郎&quot;</span><span class="op">);</span></span>
<span id="cb166-35"><a href="#cb166-35" aria-hidden="true" tabindex="-1"></a>    stdents<span class="op">[</span>stdent_count<span class="op">].</span>age <span class="op">=</span> <span class="op">;</span></span>
<span id="cb166-36"><a href="#cb166-36" aria-hidden="true" tabindex="-1"></a>    stdents<span class="op">[</span>stdent_count<span class="op">].</span>gpa <span class="op">=</span> <span class="op">.;</span></span>
<span id="cb166-37"><a href="#cb166-37" aria-hidden="true" tabindex="-1"></a>    stdent_count<span class="op">++;</span></span>
<span id="cb166-38"><a href="#cb166-38" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb166-39"><a href="#cb166-39" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 学生情報の表示 */</span></span>
<span id="cb166-40"><a href="#cb166-40" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== 学生一覧 ===n&quot;</span><span class="op">);</span></span>
<span id="cb166-41"><a href="#cb166-41" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="op">;</span> i <span class="op">&lt;</span> stdent_count<span class="op">;</span> i<span class="op">++)</span> </span>
<span id="cb166-42"><a href="#cb166-42" aria-hidden="true" tabindex="-1"></a>        <span class="dt">char</span> <span class="op">*</span>stats<span class="op">;</span></span>
<span id="cb166-43"><a href="#cb166-43" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>stdents<span class="op">[</span>i<span class="op">].</span>gpa <span class="op">&gt;=</span> <span class="op">.)</span> stats <span class="op">=</span> stats_messages<span class="op">[];</span></span>
<span id="cb166-44"><a href="#cb166-44" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>stdents<span class="op">[</span>i<span class="op">].</span>gpa <span class="op">&gt;=</span> <span class="op">.)</span> stats <span class="op">=</span> stats_messages<span class="op">[];</span></span>
<span id="cb166-45"><a href="#cb166-45" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>stdents<span class="op">[</span>i<span class="op">].</span>gpa <span class="op">&gt;=</span> <span class="op">.)</span> stats <span class="op">=</span> stats_messages<span class="op">[];</span></span>
<span id="cb166-46"><a href="#cb166-46" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span> stats <span class="op">=</span> stats_messages<span class="op">[];</span></span>
<span id="cb166-47"><a href="#cb166-47" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb166-48"><a href="#cb166-48" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%s</span><span class="st"> (</span><span class="sc">%d</span><span class="st">歳) - GPA: %.f [</span><span class="sc">%s</span><span class="st">]n&quot;</span><span class="op">,</span> </span>
<span id="cb166-49"><a href="#cb166-49" aria-hidden="true" tabindex="-1"></a>               stdents<span class="op">[</span>i<span class="op">].</span>name<span class="op">,</span> stdents<span class="op">[</span>i<span class="op">].</span>age<span class="op">,</span> stdents<span class="op">[</span>i<span class="op">].</span>gpa<span class="op">,</span> stats<span class="op">);</span></span>
<span id="cb166-50"><a href="#cb166-50" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb166-51"><a href="#cb166-51" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb166-52"><a href="#cb166-52" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">;</span></span></code></pre></div>
<h3 id="文字列配列のソートと検索">文字列配列のソートと検索</h3>
<h4 id="文字列配列のバブルソート">文字列配列のバブルソート</h4>
<div class="sourceCode" id="cb167"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb167-1"><a href="#cb167-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb167-2"><a href="#cb167-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;string.h&gt;</span></span>
<span id="cb167-3"><a href="#cb167-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb167-4"><a href="#cb167-4" aria-hidden="true" tabindex="-1"></a><span class="pp">#define MAX_WORDS </span></span>
<span id="cb167-5"><a href="#cb167-5" aria-hidden="true" tabindex="-1"></a><span class="pp">#define MAX_LNGTH </span></span>
<span id="cb167-6"><a href="#cb167-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb167-7"><a href="#cb167-7" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb167-8"><a href="#cb167-8" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb167-9"><a href="#cb167-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb167-10"><a href="#cb167-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> words<span class="op">[</span>MAX_WORDS<span class="op">][</span>MAX_LNGTH<span class="op">]</span> <span class="op">=</span> </span>
<span id="cb167-11"><a href="#cb167-11" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;Zebra&quot;</span><span class="op">,</span> <span class="st">&quot;Apple&quot;</span><span class="op">,</span> <span class="st">&quot;Monkey&quot;</span><span class="op">,</span> <span class="st">&quot;anana&quot;</span><span class="op">,</span></span>
<span id="cb167-12"><a href="#cb167-12" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;Cat&quot;</span><span class="op">,</span> <span class="st">&quot;Dog&quot;</span><span class="op">,</span> <span class="st">&quot;lephant&quot;</span><span class="op">,</span> <span class="st">&quot;ish&quot;</span></span>
<span id="cb167-13"><a href="#cb167-13" aria-hidden="true" tabindex="-1"></a>    <span class="op">;</span></span>
<span id="cb167-14"><a href="#cb167-14" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> temp<span class="op">[</span>MAX_LNGTH<span class="op">];</span></span>
<span id="cb167-15"><a href="#cb167-15" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">,</span> j<span class="op">;</span></span>
<span id="cb167-16"><a href="#cb167-16" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb167-17"><a href="#cb167-17" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ソート前:n&quot;</span><span class="op">);</span></span>
<span id="cb167-18"><a href="#cb167-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="op">;</span> i <span class="op">&lt;</span> MAX_WORDS<span class="op">;</span> i<span class="op">++)</span> </span>
<span id="cb167-19"><a href="#cb167-19" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%s</span><span class="st"> &quot;</span><span class="op">,</span> words<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb167-20"><a href="#cb167-20" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb167-21"><a href="#cb167-21" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;nn&quot;</span><span class="op">);</span></span>
<span id="cb167-22"><a href="#cb167-22" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb167-23"><a href="#cb167-23" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* バブルソート */</span></span>
<span id="cb167-24"><a href="#cb167-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="op">;</span> i <span class="op">&lt;</span> MAX_WORDS <span class="op">-</span> <span class="op">;</span> i<span class="op">++)</span> </span>
<span id="cb167-25"><a href="#cb167-25" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span>j <span class="op">=</span> <span class="op">;</span> j <span class="op">&lt;</span> MAX_WORDS <span class="op">-</span>  <span class="op">-</span> i<span class="op">;</span> j<span class="op">++)</span> </span>
<span id="cb167-26"><a href="#cb167-26" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>strcmp<span class="op">(</span>words<span class="op">[</span>j<span class="op">],</span> words<span class="op">[</span>j <span class="op">+</span> <span class="op">])</span> <span class="op">&gt;</span> <span class="op">)</span> </span>
<span id="cb167-27"><a href="#cb167-27" aria-hidden="true" tabindex="-1"></a>                strcpy<span class="op">(</span>temp<span class="op">,</span> words<span class="op">[</span>j<span class="op">]);</span></span>
<span id="cb167-28"><a href="#cb167-28" aria-hidden="true" tabindex="-1"></a>                strcpy<span class="op">(</span>words<span class="op">[</span>j<span class="op">],</span> words<span class="op">[</span>j <span class="op">+</span> <span class="op">]);</span></span>
<span id="cb167-29"><a href="#cb167-29" aria-hidden="true" tabindex="-1"></a>                strcpy<span class="op">(</span>words<span class="op">[</span>j <span class="op">+</span> <span class="op">],</span> temp<span class="op">);</span></span>
<span id="cb167-30"><a href="#cb167-30" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb167-31"><a href="#cb167-31" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb167-32"><a href="#cb167-32" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb167-33"><a href="#cb167-33" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb167-34"><a href="#cb167-34" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ソート後:n&quot;</span><span class="op">);</span></span>
<span id="cb167-35"><a href="#cb167-35" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="op">;</span> i <span class="op">&lt;</span> MAX_WORDS<span class="op">;</span> i<span class="op">++)</span> </span>
<span id="cb167-36"><a href="#cb167-36" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%s</span><span class="st"> &quot;</span><span class="op">,</span> words<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb167-37"><a href="#cb167-37" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb167-38"><a href="#cb167-38" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;n&quot;</span><span class="op">);</span></span>
<span id="cb167-39"><a href="#cb167-39" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb167-40"><a href="#cb167-40" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">;</span></span></code></pre></div>
<h4 id="文字列配列での検索">文字列配列での検索</h4>
<div class="sourceCode" id="cb168"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb168-1"><a href="#cb168-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb168-2"><a href="#cb168-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;string.h&gt;</span></span>
<span id="cb168-3"><a href="#cb168-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb168-4"><a href="#cb168-4" aria-hidden="true" tabindex="-1"></a><span class="pp">#define MAX_CITIS </span></span>
<span id="cb168-5"><a href="#cb168-5" aria-hidden="true" tabindex="-1"></a><span class="pp">#define MAX_LNGTH </span></span>
<span id="cb168-6"><a href="#cb168-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb168-7"><a href="#cb168-7" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> search_city<span class="op">(</span><span class="dt">char</span> cities<span class="op">[][</span>MAX_LNGTH<span class="op">],</span> <span class="dt">int</span> count<span class="op">,</span> <span class="dt">char</span> <span class="op">*</span>target<span class="op">)</span></span>
<span id="cb168-8"><a href="#cb168-8" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb168-9"><a href="#cb168-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb168-10"><a href="#cb168-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb168-11"><a href="#cb168-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="op">;</span> i <span class="op">&lt;</span> count<span class="op">;</span> i<span class="op">++)</span> </span>
<span id="cb168-12"><a href="#cb168-12" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>strcmp<span class="op">(</span>cities<span class="op">[</span>i<span class="op">],</span> target<span class="op">)</span> <span class="op">==</span> <span class="op">)</span> </span>
<span id="cb168-13"><a href="#cb168-13" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> i<span class="op">;</span>  <span class="co">/* 見2つかった場合のインデックス */</span></span>
<span id="cb168-14"><a href="#cb168-14" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb168-15"><a href="#cb168-15" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb168-16"><a href="#cb168-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">-;</span>  <span class="co">/* 見2つからない場合 */</span></span>
<span id="cb168-17"><a href="#cb168-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb168-18"><a href="#cb168-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb168-19"><a href="#cb168-19" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb168-20"><a href="#cb168-20" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb168-21"><a href="#cb168-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb168-22"><a href="#cb168-22" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> cities<span class="op">[</span>MAX_CITIS<span class="op">][</span>MAX_LNGTH<span class="op">]</span> <span class="op">=</span> </span>
<span id="cb168-23"><a href="#cb168-23" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;Tokyo&quot;</span><span class="op">,</span> <span class="st">&quot;Osaka&quot;</span><span class="op">,</span> <span class="st">&quot;Kyoto&quot;</span><span class="op">,</span> <span class="st">&quot;Nagoya&quot;</span><span class="op">,</span> <span class="st">&quot;Sapporo&quot;</span><span class="op">,</span></span>
<span id="cb168-24"><a href="#cb168-24" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;koka&quot;</span><span class="op">,</span> <span class="st">&quot;Kobe&quot;</span><span class="op">,</span> <span class="st">&quot;Sendai&quot;</span><span class="op">,</span> <span class="st">&quot;Hiroshima&quot;</span><span class="op">,</span> <span class="st">&quot;Yokohama&quot;</span></span>
<span id="cb168-25"><a href="#cb168-25" aria-hidden="true" tabindex="-1"></a>    <span class="op">;</span></span>
<span id="cb168-26"><a href="#cb168-26" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> search_target<span class="op">[]</span> <span class="op">=</span> <span class="st">&quot;Kyoto&quot;</span><span class="op">;</span></span>
<span id="cb168-27"><a href="#cb168-27" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> result<span class="op">;</span></span>
<span id="cb168-28"><a href="#cb168-28" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb168-29"><a href="#cb168-29" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb168-30"><a href="#cb168-30" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;都市一覧:n&quot;</span><span class="op">);</span></span>
<span id="cb168-31"><a href="#cb168-31" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="op">;</span> i <span class="op">&lt;</span> MAX_CITIS<span class="op">;</span> i<span class="op">++)</span> </span>
<span id="cb168-32"><a href="#cb168-32" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st">. </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> i <span class="op">+</span> <span class="op">,</span> cities<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb168-33"><a href="#cb168-33" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb168-34"><a href="#cb168-34" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb168-35"><a href="#cb168-35" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 検索実行 */</span></span>
<span id="cb168-36"><a href="#cb168-36" aria-hidden="true" tabindex="-1"></a>    result <span class="op">=</span> search_city<span class="op">(</span>cities<span class="op">,</span> MAX_CITIS<span class="op">,</span> search_target<span class="op">);</span></span>
<span id="cb168-37"><a href="#cb168-37" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>result <span class="op">!=</span> <span class="op">-)</span> </span>
<span id="cb168-38"><a href="#cb168-38" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;n&quot;</span><span class="op">%</span>s<span class="st">&quot; は </span><span class="sc">%d</span><span class="st">番目にあります。n&quot;</span><span class="op">,</span> search_target<span class="op">,</span> result <span class="op">+</span> <span class="op">);</span></span>
<span id="cb168-39"><a href="#cb168-39" aria-hidden="true" tabindex="-1"></a>     <span class="cf">else</span> </span>
<span id="cb168-40"><a href="#cb168-40" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;n&quot;</span><span class="op">%</span>s<span class="st">&quot; は見2つかりませんでした。n&quot;</span><span class="op">,</span> search_target<span class="op">);</span></span>
<span id="cb168-41"><a href="#cb168-41" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb168-42"><a href="#cb168-42" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb168-43"><a href="#cb168-43" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">;</span></span></code></pre></div>
<h3 id="実践的な文字列処理">実践的な文字列処理</h3>
<h4 id="文字列の分割トークン化">文字列の分割（トークン化）</h4>
<div class="sourceCode" id="cb169"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb169-1"><a href="#cb169-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb169-2"><a href="#cb169-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;string.h&gt;</span></span>
<span id="cb169-3"><a href="#cb169-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb169-4"><a href="#cb169-4" aria-hidden="true" tabindex="-1"></a><span class="pp">#define MAX_TOKNS </span></span>
<span id="cb169-5"><a href="#cb169-5" aria-hidden="true" tabindex="-1"></a><span class="pp">#define MAX_LNGTH </span></span>
<span id="cb169-6"><a href="#cb169-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb169-7"><a href="#cb169-7" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb169-8"><a href="#cb169-8" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb169-9"><a href="#cb169-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb169-10"><a href="#cb169-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> inpt<span class="op">[]</span> <span class="op">=</span> <span class="st">&quot;apple,banana,cherry,date,elderberry&quot;</span><span class="op">;</span></span>
<span id="cb169-11"><a href="#cb169-11" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> tokens<span class="op">[</span>MAX_TOKNS<span class="op">][</span>MAX_LNGTH<span class="op">];</span></span>
<span id="cb169-12"><a href="#cb169-12" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> temp<span class="op">[];</span></span>
<span id="cb169-13"><a href="#cb169-13" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> <span class="op">*</span>token<span class="op">;</span></span>
<span id="cb169-14"><a href="#cb169-14" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> count <span class="op">=</span> <span class="op">;</span></span>
<span id="cb169-15"><a href="#cb169-15" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb169-16"><a href="#cb169-16" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb169-17"><a href="#cb169-17" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 入力文字列をコピー（strtokは元の文字列を変更するため） */</span></span>
<span id="cb169-18"><a href="#cb169-18" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>temp<span class="op">,</span> inpt<span class="op">);</span></span>
<span id="cb169-19"><a href="#cb169-19" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb169-20"><a href="#cb169-20" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* カンマで分割 */</span></span>
<span id="cb169-21"><a href="#cb169-21" aria-hidden="true" tabindex="-1"></a>    token <span class="op">=</span> strtok<span class="op">(</span>temp<span class="op">,</span> <span class="st">&quot;,&quot;</span><span class="op">);</span></span>
<span id="cb169-22"><a href="#cb169-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>token <span class="op">!=</span> NULL <span class="op">&amp;&amp;</span> count <span class="op">&lt;</span> MAX_TOKNS<span class="op">)</span> </span>
<span id="cb169-23"><a href="#cb169-23" aria-hidden="true" tabindex="-1"></a>        strcpy<span class="op">(</span>tokens<span class="op">[</span>count<span class="op">],</span> token<span class="op">);</span></span>
<span id="cb169-24"><a href="#cb169-24" aria-hidden="true" tabindex="-1"></a>        count<span class="op">++;</span></span>
<span id="cb169-25"><a href="#cb169-25" aria-hidden="true" tabindex="-1"></a>        token <span class="op">=</span> strtok<span class="op">(</span>NULL<span class="op">,</span> <span class="st">&quot;,&quot;</span><span class="op">);</span></span>
<span id="cb169-26"><a href="#cb169-26" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb169-27"><a href="#cb169-27" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb169-28"><a href="#cb169-28" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;分割結果:n&quot;</span><span class="op">);</span></span>
<span id="cb169-29"><a href="#cb169-29" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="op">;</span> i <span class="op">&lt;</span> count<span class="op">;</span> i<span class="op">++)</span> </span>
<span id="cb169-30"><a href="#cb169-30" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st">: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> i <span class="op">+</span> <span class="op">,</span> tokens<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb169-31"><a href="#cb169-31" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb169-32"><a href="#cb169-32" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb169-33"><a href="#cb169-33" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">;</span></span></code></pre></div>
<h4 id="文字列の変換大文字小文字">文字列の変換（大文字・小文字）</h4>
<div class="sourceCode" id="cb170"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb170-1"><a href="#cb170-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb170-2"><a href="#cb170-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;string.h&gt;</span></span>
<span id="cb170-3"><a href="#cb170-3" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;ctype.h&gt;</span></span>
<span id="cb170-4"><a href="#cb170-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb170-5"><a href="#cb170-5" aria-hidden="true" tabindex="-1"></a><span class="pp">#define MAX_STRINGS </span></span>
<span id="cb170-6"><a href="#cb170-6" aria-hidden="true" tabindex="-1"></a><span class="pp">#define MAX_LNGTH </span></span>
<span id="cb170-7"><a href="#cb170-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb170-8"><a href="#cb170-8" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> to_uuppercase<span class="op">(</span><span class="dt">char</span> <span class="op">*</span>str<span class="op">)</span></span>
<span id="cb170-9"><a href="#cb170-9" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb170-10"><a href="#cb170-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb170-11"><a href="#cb170-11" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb170-12"><a href="#cb170-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="op">;</span> str<span class="op">[</span>i<span class="op">]</span> <span class="op">!=</span> <span class="ch">&#39;</span><span class="er">&#39;</span><span class="op">;</span> i<span class="op">++)</span> </span>
<span id="cb170-13"><a href="#cb170-13" aria-hidden="true" tabindex="-1"></a>        str<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> topper<span class="op">(</span>str<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb170-14"><a href="#cb170-14" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb170-15"><a href="#cb170-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb170-16"><a href="#cb170-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb170-17"><a href="#cb170-17" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> to_lowercase<span class="op">(</span><span class="dt">char</span> <span class="op">*</span>str<span class="op">)</span></span>
<span id="cb170-18"><a href="#cb170-18" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb170-19"><a href="#cb170-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb170-20"><a href="#cb170-20" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb170-21"><a href="#cb170-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="op">;</span> str<span class="op">[</span>i<span class="op">]</span> <span class="op">!=</span> <span class="ch">&#39;</span><span class="er">&#39;</span><span class="op">;</span> i<span class="op">++)</span> </span>
<span id="cb170-22"><a href="#cb170-22" aria-hidden="true" tabindex="-1"></a>        str<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> tolower<span class="op">(</span>str<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb170-23"><a href="#cb170-23" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb170-24"><a href="#cb170-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb170-25"><a href="#cb170-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb170-26"><a href="#cb170-26" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb170-27"><a href="#cb170-27" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb170-28"><a href="#cb170-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb170-29"><a href="#cb170-29" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> original<span class="op">[</span>MAX_STRINGS<span class="op">][</span>MAX_LNGTH<span class="op">]</span> <span class="op">=</span> </span>
<span id="cb170-30"><a href="#cb170-30" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;Hello World&quot;</span><span class="op">,</span></span>
<span id="cb170-31"><a href="#cb170-31" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;Programming Langage&quot;</span><span class="op">,</span></span>
<span id="cb170-32"><a href="#cb170-32" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;C Langage Ttutorial&quot;</span><span class="op">,</span></span>
<span id="cb170-33"><a href="#cb170-33" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;String Processing&quot;</span><span class="op">,</span></span>
<span id="cb170-34"><a href="#cb170-34" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;Array Maniplation&quot;</span></span>
<span id="cb170-35"><a href="#cb170-35" aria-hidden="true" tabindex="-1"></a>    <span class="op">;</span></span>
<span id="cb170-36"><a href="#cb170-36" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> uuppercase<span class="op">[</span>MAX_STRINGS<span class="op">][</span>MAX_LNGTH<span class="op">];</span></span>
<span id="cb170-37"><a href="#cb170-37" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> lowercase<span class="op">[</span>MAX_STRINGS<span class="op">][</span>MAX_LNGTH<span class="op">];</span></span>
<span id="cb170-38"><a href="#cb170-38" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb170-39"><a href="#cb170-39" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb170-40"><a href="#cb170-40" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 文字列をコピーして変換 */</span></span>
<span id="cb170-41"><a href="#cb170-41" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="op">;</span> i <span class="op">&lt;</span> MAX_STRINGS<span class="op">;</span> i<span class="op">++)</span> </span>
<span id="cb170-42"><a href="#cb170-42" aria-hidden="true" tabindex="-1"></a>        strcpy<span class="op">(</span>uuppercase<span class="op">[</span>i<span class="op">],</span> original<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb170-43"><a href="#cb170-43" aria-hidden="true" tabindex="-1"></a>        strcpy<span class="op">(</span>lowercase<span class="op">[</span>i<span class="op">],</span> original<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb170-44"><a href="#cb170-44" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb170-45"><a href="#cb170-45" aria-hidden="true" tabindex="-1"></a>        to_uuppercase<span class="op">(</span>uuppercase<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb170-46"><a href="#cb170-46" aria-hidden="true" tabindex="-1"></a>        to_lowercase<span class="op">(</span>lowercase<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb170-47"><a href="#cb170-47" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb170-48"><a href="#cb170-48" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb170-49"><a href="#cb170-49" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 結果の表示 */</span></span>
<span id="cb170-50"><a href="#cb170-50" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;元の文字列 -&gt; 大文字 -&gt; 小文字n&quot;</span><span class="op">);</span></span>
<span id="cb170-51"><a href="#cb170-51" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=====================================n&quot;</span><span class="op">);</span></span>
<span id="cb170-52"><a href="#cb170-52" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="op">;</span> i <span class="op">&lt;</span> MAX_STRINGS<span class="op">;</span> i<span class="op">++)</span> </span>
<span id="cb170-53"><a href="#cb170-53" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%-s</span><span class="st"> -&gt; </span><span class="sc">%-s</span><span class="st"> -&gt; </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> </span>
<span id="cb170-54"><a href="#cb170-54" aria-hidden="true" tabindex="-1"></a>               original<span class="op">[</span>i<span class="op">],</span> uuppercase<span class="op">[</span>i<span class="op">],</span> lowercase<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb170-55"><a href="#cb170-55" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb170-56"><a href="#cb170-56" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb170-57"><a href="#cb170-57" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">;</span></span></code></pre></div>
<h4
id="文字列配列を使った簡易データベース">文字列配列を使った簡易データベース</h4>
<div class="sourceCode" id="cb171"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb171-1"><a href="#cb171-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb171-2"><a href="#cb171-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;string.h&gt;</span></span>
<span id="cb171-3"><a href="#cb171-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb171-4"><a href="#cb171-4" aria-hidden="true" tabindex="-1"></a><span class="pp">#define MAX_RCORDS </span></span>
<span id="cb171-5"><a href="#cb171-5" aria-hidden="true" tabindex="-1"></a><span class="pp">#define MAX_ILD_LNGTH </span></span>
<span id="cb171-6"><a href="#cb171-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb171-7"><a href="#cb171-7" aria-hidden="true" tabindex="-1"></a><span class="kw">typedef</span> strct </span>
<span id="cb171-8"><a href="#cb171-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> name<span class="op">[</span>MAX_ILD_LNGTH<span class="op">];</span></span>
<span id="cb171-9"><a href="#cb171-9" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> department<span class="op">[</span>MAX_ILD_LNGTH<span class="op">];</span></span>
<span id="cb171-10"><a href="#cb171-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> position<span class="op">[</span>MAX_ILD_LNGTH<span class="op">];</span></span>
<span id="cb171-11"><a href="#cb171-11" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> salary<span class="op">;</span></span>
<span id="cb171-12"><a href="#cb171-12" aria-hidden="true" tabindex="-1"></a> mployee<span class="op">;</span></span>
<span id="cb171-13"><a href="#cb171-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb171-14"><a href="#cb171-14" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb171-15"><a href="#cb171-15" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb171-16"><a href="#cb171-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb171-17"><a href="#cb171-17" aria-hidden="true" tabindex="-1"></a>    mployee employees<span class="op">[</span>MAX_RCORDS<span class="op">];</span></span>
<span id="cb171-18"><a href="#cb171-18" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> <span class="op">*</span>departments<span class="op">[]</span> <span class="op">=</span> <span class="st">&quot;営業&quot;</span><span class="op">,</span> <span class="st">&quot;開発&quot;</span><span class="op">,</span> <span class="st">&quot;人事&quot;</span><span class="op">,</span> <span class="st">&quot;経理&quot;</span><span class="op">;</span></span>
<span id="cb171-19"><a href="#cb171-19" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> <span class="op">*</span>positions<span class="op">[]</span> <span class="op">=</span> <span class="st">&quot;部長&quot;</span><span class="op">,</span> <span class="st">&quot;課長&quot;</span><span class="op">,</span> <span class="st">&quot;主任&quot;</span><span class="op">,</span> <span class="st">&quot;一般&quot;</span><span class="op">;</span></span>
<span id="cb171-20"><a href="#cb171-20" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> employee_count <span class="op">=</span> <span class="op">;</span></span>
<span id="cb171-21"><a href="#cb171-21" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">,</span> j<span class="op">;</span></span>
<span id="cb171-22"><a href="#cb171-22" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb171-23"><a href="#cb171-23" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* サンプルデータの追加 */</span></span>
<span id="cb171-24"><a href="#cb171-24" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>employees<span class="op">[</span>employee_count<span class="op">].</span>name<span class="op">,</span> <span class="st">&quot;田中太郎&quot;</span><span class="op">);</span></span>
<span id="cb171-25"><a href="#cb171-25" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>employees<span class="op">[</span>employee_count<span class="op">].</span>department<span class="op">,</span> departments<span class="op">[]);</span> <span class="co">/* 開発 */</span></span>
<span id="cb171-26"><a href="#cb171-26" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>employees<span class="op">[</span>employee_count<span class="op">].</span>position<span class="op">,</span> positions<span class="op">[]);</span>     <span class="co">/* 課長 */</span></span>
<span id="cb171-27"><a href="#cb171-27" aria-hidden="true" tabindex="-1"></a>    employees<span class="op">[</span>employee_count<span class="op">].</span>salary <span class="op">=</span> <span class="op">;</span></span>
<span id="cb171-28"><a href="#cb171-28" aria-hidden="true" tabindex="-1"></a>    employee_count<span class="op">++;</span></span>
<span id="cb171-29"><a href="#cb171-29" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb171-30"><a href="#cb171-30" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>employees<span class="op">[</span>employee_count<span class="op">].</span>name<span class="op">,</span> <span class="st">&quot;佐藤花子&quot;</span><span class="op">);</span></span>
<span id="cb171-31"><a href="#cb171-31" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>employees<span class="op">[</span>employee_count<span class="op">].</span>department<span class="op">,</span> departments<span class="op">[]);</span> <span class="co">/* 営業 */</span></span>
<span id="cb171-32"><a href="#cb171-32" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>employees<span class="op">[</span>employee_count<span class="op">].</span>position<span class="op">,</span> positions<span class="op">[]);</span>     <span class="co">/* 部長 */</span></span>
<span id="cb171-33"><a href="#cb171-33" aria-hidden="true" tabindex="-1"></a>    employees<span class="op">[</span>employee_count<span class="op">].</span>salary <span class="op">=</span> <span class="op">;</span></span>
<span id="cb171-34"><a href="#cb171-34" aria-hidden="true" tabindex="-1"></a>    employee_count<span class="op">++;</span></span>
<span id="cb171-35"><a href="#cb171-35" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb171-36"><a href="#cb171-36" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>employees<span class="op">[</span>employee_count<span class="op">].</span>name<span class="op">,</span> <span class="st">&quot;鈴木一郎&quot;</span><span class="op">);</span></span>
<span id="cb171-37"><a href="#cb171-37" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>employees<span class="op">[</span>employee_count<span class="op">].</span>department<span class="op">,</span> departments<span class="op">[]);</span> <span class="co">/* 開発 */</span></span>
<span id="cb171-38"><a href="#cb171-38" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>employees<span class="op">[</span>employee_count<span class="op">].</span>position<span class="op">,</span> positions<span class="op">[]);</span>     <span class="co">/* 一般 */</span></span>
<span id="cb171-39"><a href="#cb171-39" aria-hidden="true" tabindex="-1"></a>    employees<span class="op">[</span>employee_count<span class="op">].</span>salary <span class="op">=</span> <span class="op">;</span></span>
<span id="cb171-40"><a href="#cb171-40" aria-hidden="true" tabindex="-1"></a>    employee_count<span class="op">++;</span></span>
<span id="cb171-41"><a href="#cb171-41" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb171-42"><a href="#cb171-42" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 全従業員の表示 */</span></span>
<span id="cb171-43"><a href="#cb171-43" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== 従業員一覧 ===n&quot;</span><span class="op">);</span></span>
<span id="cb171-44"><a href="#cb171-44" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%-s</span><span class="st"> </span><span class="sc">%-s</span><span class="st"> </span><span class="sc">%-s</span><span class="st"> </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;名前&quot;</span><span class="op">,</span> <span class="st">&quot;部署&quot;</span><span class="op">,</span> <span class="st">&quot;役職&quot;</span><span class="op">,</span> <span class="st">&quot;給与&quot;</span><span class="op">);</span></span>
<span id="cb171-45"><a href="#cb171-45" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;--------------------------------------------------n&quot;</span><span class="op">);</span></span>
<span id="cb171-46"><a href="#cb171-46" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="op">;</span> i <span class="op">&lt;</span> employee_count<span class="op">;</span> i<span class="op">++)</span> </span>
<span id="cb171-47"><a href="#cb171-47" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%-s</span><span class="st"> </span><span class="sc">%-s</span><span class="st"> </span><span class="sc">%-s</span><span class="st"> </span><span class="sc">%d</span><span class="st">円n&quot;</span><span class="op">,</span></span>
<span id="cb171-48"><a href="#cb171-48" aria-hidden="true" tabindex="-1"></a>               employees<span class="op">[</span>i<span class="op">].</span>name<span class="op">,</span></span>
<span id="cb171-49"><a href="#cb171-49" aria-hidden="true" tabindex="-1"></a>               employees<span class="op">[</span>i<span class="op">].</span>department<span class="op">,</span></span>
<span id="cb171-50"><a href="#cb171-50" aria-hidden="true" tabindex="-1"></a>               employees<span class="op">[</span>i<span class="op">].</span>position<span class="op">,</span></span>
<span id="cb171-51"><a href="#cb171-51" aria-hidden="true" tabindex="-1"></a>               employees<span class="op">[</span>i<span class="op">].</span>salary<span class="op">);</span></span>
<span id="cb171-52"><a href="#cb171-52" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb171-53"><a href="#cb171-53" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb171-54"><a href="#cb171-54" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 部署別集計 */</span></span>
<span id="cb171-55"><a href="#cb171-55" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;n=== 部署別従業員数 ===n&quot;</span><span class="op">);</span></span>
<span id="cb171-56"><a href="#cb171-56" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="op">;</span> i <span class="op">&lt;</span> <span class="op">;</span> i<span class="op">++)</span> </span>
<span id="cb171-57"><a href="#cb171-57" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> count <span class="op">=</span> <span class="op">;</span></span>
<span id="cb171-58"><a href="#cb171-58" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span>j <span class="op">=</span> <span class="op">;</span> j <span class="op">&lt;</span> employee_count<span class="op">;</span> j<span class="op">++)</span> </span>
<span id="cb171-59"><a href="#cb171-59" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>strcmp<span class="op">(</span>employees<span class="op">[</span>j<span class="op">].</span>department<span class="op">,</span> departments<span class="op">[</span>i<span class="op">])</span> <span class="op">==</span> <span class="op">)</span> </span>
<span id="cb171-60"><a href="#cb171-60" aria-hidden="true" tabindex="-1"></a>                count<span class="op">++;</span></span>
<span id="cb171-61"><a href="#cb171-61" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb171-62"><a href="#cb171-62" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb171-63"><a href="#cb171-63" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%s</span><span class="st">: </span><span class="sc">%d</span><span class="st">人n&quot;</span><span class="op">,</span> departments<span class="op">[</span>i<span class="op">],</span> count<span class="op">);</span></span>
<span id="cb171-64"><a href="#cb171-64" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb171-65"><a href="#cb171-65" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb171-66"><a href="#cb171-66" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">;</span></span></code></pre></div>
<h2 id="サンプルコード-12">サンプルコード</h2>
<h3 id="基本的な文字列操作">基本的な文字列操作</h3>
<p>プログラムファイル: <code>examples/string_basic.c</code></p>
<p>標準ライブラリの文字列操作関数の使用方法を学習します。</p>
<h3 id="文字列配列の実践例">文字列配列の実践例</h3>
<p>プログラムファイル:
<code>examples/string_array_operations.c</code></p>
<p>次元文字配列と文字列ポインタ配列の使い分けを学習します。</p>
<h3 id="文字列処理の応用">文字列処理の応用</h3>
<p>プログラムファイル:
<code>examples/advanced_string_processing.c</code></p>
<p>実践的な文字列処理テクニックを学習します。</p>
<h3 id="コンパイルと実行-6">コンパイルと実行</h3>
<div class="sourceCode" id="cb172"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb172-1"><a href="#cb172-1" aria-hidden="true" tabindex="-1"></a><span class="co"># examples ディレクトリに移動</span></span>
<span id="cb172-2"><a href="#cb172-2" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> examples</span>
<span id="cb172-3"><a href="#cb172-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb172-4"><a href="#cb172-4" aria-hidden="true" tabindex="-1"></a><span class="co"># C90準拠でコンパイル</span></span>
<span id="cb172-5"><a href="#cb172-5" aria-hidden="true" tabindex="-1"></a><span class="fu">gcc</span> <span class="at">-std</span><span class="op">=</span>c90 <span class="at">-Wall</span> <span class="at">-Wextra</span> <span class="at">-pedantic</span> string_basic.c <span class="at">-o</span> string_basic</span>
<span id="cb172-6"><a href="#cb172-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb172-7"><a href="#cb172-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 実行</span></span>
<span id="cb172-8"><a href="#cb172-8" aria-hidden="true" tabindex="-1"></a><span class="ex">./string_basic</span></span></code></pre></div>
<h2 id="演習課題-6">演習課題</h2>
<h3 id="基礎問題-6">基礎問題</h3>
<p>. <strong>文字列の基本操作</strong> -
2つの文字列を入力して連結・比較・長さ計算を実行うプログラムを作成してください</p>
<p>. <strong>文字列配列の管理</strong> -
学生名を格納する文字列配列を作成し、追加・削除・表示機能を実装してください</p>
<p>. <strong>文字列の検索</strong> -
文字列配列から特定の文字列を検索するプログラムを作成してください</p>
<h3 id="応用問題-6">応用問題</h3>
<p>. <strong>単語カウンタ</strong> -
文章を入力して、各単語の出現1回数をカウントするプログラムを作成してください</p>
<p>. <strong>文字列ソートプログラム</strong> -
複数の文字列を入力してアルファベット順にソートするプログラムを作成してください</p>
<p>. <strong>簡易テキストエディタ</strong> -
文字列配列を使って行単位でテキストを管理するプログラムを作成してください</p>
<h3 id="発展問題-1">発展問題</h3>
<p>. <strong>文字列データベース</strong> -
商品情報（名前、価格、カテゴリ）を文字列配列で管理するシステムを作成してください</p>
<p>. <strong>文字列パーサー</strong> -
CSV形式の文字列を解析して構造化データに変換するプログラムを作成してください</p>
<p>. <strong>文字列暗号化</strong> -
簡単な暗号化・復号化機能を持2つプログラムを作成してください</p>
<h2 id="コンパイル方法-7">コンパイル方法</h2>
<p>この章では以下のMakefileを使用してコンパイルができます：</p>
<div class="sourceCode" id="cb173"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb173-1"><a href="#cb173-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 全ての例題をコンパイル</span></span>
<span id="cb173-2"><a href="#cb173-2" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> all</span>
<span id="cb173-3"><a href="#cb173-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb173-4"><a href="#cb173-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 特定のプログラムをコンパイル</span></span>
<span id="cb173-5"><a href="#cb173-5" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> string_basic</span>
<span id="cb173-6"><a href="#cb173-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb173-7"><a href="#cb173-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 実行</span></span>
<span id="cb173-8"><a href="#cb173-8" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> run</span>
<span id="cb173-9"><a href="#cb173-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb173-10"><a href="#cb173-10" aria-hidden="true" tabindex="-1"></a><span class="co"># クリーンアップ</span></span>
<span id="cb173-11"><a href="#cb173-11" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> clean</span></code></pre></div>
<h2 id="規格による違い-6">規格による違い</h2>
<h3 id="c90での制限事項-5">C90での制限事項</h3>
<ul>
<li>文字列操作はnll終端が前提</li>
<li>可変長文字列配列は使用不可</li>
<li>Unicode対応は限定的</li>
</ul>
<h3 id="c99以降の拡張-5">C99以降の拡張</h3>
<ul>
<li>snprintf()などの安全な文字列操作関数</li>
<li>可変長配列による動的な文字列配列</li>
<li>より豊富な文字分類関数</li>
</ul>
<h2 id="よくある間違い-4">よくある間違い</h2>
<h3 id="nll終端の忘れ">. nll終端の忘れ</h3>
<div class="sourceCode" id="cb174"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb174-1"><a href="#cb174-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* NG: nll終端なし */</span></span>
<span id="cb174-2"><a href="#cb174-2" aria-hidden="true" tabindex="-1"></a><span class="dt">char</span> str<span class="op">[];</span></span>
<span id="cb174-3"><a href="#cb174-3" aria-hidden="true" tabindex="-1"></a>struncpy<span class="op">(</span>str<span class="op">,</span> <span class="st">&quot;Hello&quot;</span><span class="op">,</span> <span class="op">);</span>  <span class="co">/* nll終端なし */</span></span>
<span id="cb174-4"><a href="#cb174-4" aria-hidden="true" tabindex="-1"></a>printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> str<span class="op">);</span>       <span class="co">/* 未定義動作 */</span></span>
<span id="cb174-5"><a href="#cb174-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb174-6"><a href="#cb174-6" aria-hidden="true" tabindex="-1"></a><span class="co">/* OK: 明示的にnll終端 */</span></span>
<span id="cb174-7"><a href="#cb174-7" aria-hidden="true" tabindex="-1"></a><span class="dt">char</span> str<span class="op">[];</span></span>
<span id="cb174-8"><a href="#cb174-8" aria-hidden="true" tabindex="-1"></a>struncpy<span class="op">(</span>str<span class="op">,</span> <span class="st">&quot;Hello&quot;</span><span class="op">,</span> <span class="op">);</span></span>
<span id="cb174-9"><a href="#cb174-9" aria-hidden="true" tabindex="-1"></a>str<span class="op">[]</span> <span class="op">=</span> <span class="ch">&#39;</span><span class="er">&#39;</span><span class="op">;</span></span>
<span id="cb174-10"><a href="#cb174-10" aria-hidden="true" tabindex="-1"></a>printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> str<span class="op">);</span></span></code></pre></div>
<h3 id="バッファオーバーフロー">. バッファオーバーフロー</h3>
<div class="sourceCode" id="cb175"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb175-1"><a href="#cb175-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* NG: バッファサイズ不足 */</span></span>
<span id="cb175-2"><a href="#cb175-2" aria-hidden="true" tabindex="-1"></a><span class="dt">char</span> sumall<span class="op">[];</span></span>
<span id="cb175-3"><a href="#cb175-3" aria-hidden="true" tabindex="-1"></a>strcpy<span class="op">(</span>sumall<span class="op">,</span> <span class="st">&quot;Hello, World!&quot;</span><span class="op">);</span>  <span class="co">/* バッファオーバーフロー */</span></span>
<span id="cb175-4"><a href="#cb175-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb175-5"><a href="#cb175-5" aria-hidden="true" tabindex="-1"></a><span class="co">/* OK: 適切なサイズ */</span></span>
<span id="cb175-6"><a href="#cb175-6" aria-hidden="true" tabindex="-1"></a><span class="dt">char</span> large<span class="op">[];</span></span>
<span id="cb175-7"><a href="#cb175-7" aria-hidden="true" tabindex="-1"></a>strcpy<span class="op">(</span>large<span class="op">,</span> <span class="st">&quot;Hello, World!&quot;</span><span class="op">);</span></span></code></pre></div>
<h3 id="文字列比較の間違い">. 文字列比較の間違い</h3>
<div class="sourceCode" id="cb176"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb176-1"><a href="#cb176-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* NG: ポインタの比較 */</span></span>
<span id="cb176-2"><a href="#cb176-2" aria-hidden="true" tabindex="-1"></a><span class="dt">char</span> <span class="op">*</span>str <span class="op">=</span> <span class="st">&quot;Hello&quot;</span><span class="op">;</span></span>
<span id="cb176-3"><a href="#cb176-3" aria-hidden="true" tabindex="-1"></a><span class="dt">char</span> <span class="op">*</span>str <span class="op">=</span> <span class="st">&quot;Hello&quot;</span><span class="op">;</span></span>
<span id="cb176-4"><a href="#cb176-4" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="op">(</span>str <span class="op">==</span> str<span class="op">)</span>  <span class="co">/* 間違い */</span> </span>
<span id="cb176-5"><a href="#cb176-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-6"><a href="#cb176-6" aria-hidden="true" tabindex="-1"></a><span class="co">/* OK: 文字列内容の比較 */</span></span>
<span id="cb176-7"><a href="#cb176-7" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="op">(</span>strcmp<span class="op">(</span>str<span class="op">,</span> str<span class="op">)</span> <span class="op">==</span> <span class="op">)</span>  <span class="co">/* 正しい */</span> </span></code></pre></div>
<h2 id="次の章へ-7">次の章へ</h2>
<p>文字列処理を理解したら、<a href="../functions/README.md">関数</a>
に進んでください。</p>
<h2 id="参考資料-7">参考資料</h2>
<ul>
<li><a
href="https://ja.cppreference.com/w/c/string/byte">C言語文字列リファレンス</a></li>
<li><a
href="https://ja.cppreference.com/w/c/string/ctype">文字分類関数</a></li>
<li><a
href="https://ja.cppreference.com/w/c/string">文字列操作のベストプラクティス</a></li>
</ul>
<h2 id="サンプルコード-13">サンプルコード</h2>
<h3 id="advanced_string_processing.c">advanced_string_processing.c</h3>
<div class="sourceCode" id="cb177"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb177-1"><a href="#cb177-1" aria-hidden="true" tabindex="-1"></a><span class="co">/*</span></span>
<span id="cb177-2"><a href="#cb177-2" aria-hidden="true" tabindex="-1"></a><span class="co"> * 文字列処理の応用</span></span>
<span id="cb177-3"><a href="#cb177-3" aria-hidden="true" tabindex="-1"></a><span class="co"> * ファイル名: advanced_string_processing.c</span></span>
<span id="cb177-4"><a href="#cb177-4" aria-hidden="true" tabindex="-1"></a><span class="co"> * 説明: 実践的な文字列処理テクニックを学習</span></span>
<span id="cb177-5"><a href="#cb177-5" aria-hidden="true" tabindex="-1"></a><span class="co"> */</span></span>
<span id="cb177-6"><a href="#cb177-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb177-7"><a href="#cb177-7" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb177-8"><a href="#cb177-8" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;string.h&gt;</span></span>
<span id="cb177-9"><a href="#cb177-9" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;ctype.h&gt;</span></span>
<span id="cb177-10"><a href="#cb177-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb177-11"><a href="#cb177-11" aria-hidden="true" tabindex="-1"></a><span class="pp">#define MAX_TOKENS </span><span class="dv">10</span></span>
<span id="cb177-12"><a href="#cb177-12" aria-hidden="true" tabindex="-1"></a><span class="pp">#define MAX_LENGTH </span><span class="dv">100</span></span>
<span id="cb177-13"><a href="#cb177-13" aria-hidden="true" tabindex="-1"></a><span class="pp">#define MAX_STRINGS </span><span class="dv">5</span></span>
<span id="cb177-14"><a href="#cb177-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb177-15"><a href="#cb177-15" aria-hidden="true" tabindex="-1"></a><span class="co">/* 文字列を大文字に変換 */</span></span>
<span id="cb177-16"><a href="#cb177-16" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> to_uppercase<span class="op">(</span><span class="dt">char</span> <span class="op">*</span>str<span class="op">)</span></span>
<span id="cb177-17"><a href="#cb177-17" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb177-18"><a href="#cb177-18" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb177-19"><a href="#cb177-19" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb177-20"><a href="#cb177-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>str <span class="op">==</span> NULL<span class="op">)</span> <span class="op">{</span></span>
<span id="cb177-21"><a href="#cb177-21" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span><span class="op">;</span></span>
<span id="cb177-22"><a href="#cb177-22" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb177-23"><a href="#cb177-23" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb177-24"><a href="#cb177-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> str<span class="op">[</span>i<span class="op">]</span> <span class="op">!=</span> <span class="ch">&#39;</span><span class="sc">\0</span><span class="ch">&#39;</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb177-25"><a href="#cb177-25" aria-hidden="true" tabindex="-1"></a>        str<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> toupper<span class="op">((</span><span class="dt">unsigned</span> <span class="dt">char</span><span class="op">)</span>str<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb177-26"><a href="#cb177-26" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb177-27"><a href="#cb177-27" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb177-28"><a href="#cb177-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb177-29"><a href="#cb177-29" aria-hidden="true" tabindex="-1"></a><span class="co">/* 文字列を小文字に変換 */</span></span>
<span id="cb177-30"><a href="#cb177-30" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> to_lowercase<span class="op">(</span><span class="dt">char</span> <span class="op">*</span>str<span class="op">)</span></span>
<span id="cb177-31"><a href="#cb177-31" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb177-32"><a href="#cb177-32" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb177-33"><a href="#cb177-33" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb177-34"><a href="#cb177-34" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>str <span class="op">==</span> NULL<span class="op">)</span> <span class="op">{</span></span>
<span id="cb177-35"><a href="#cb177-35" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span><span class="op">;</span></span>
<span id="cb177-36"><a href="#cb177-36" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb177-37"><a href="#cb177-37" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb177-38"><a href="#cb177-38" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> str<span class="op">[</span>i<span class="op">]</span> <span class="op">!=</span> <span class="ch">&#39;</span><span class="sc">\0</span><span class="ch">&#39;</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb177-39"><a href="#cb177-39" aria-hidden="true" tabindex="-1"></a>        str<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> tolower<span class="op">((</span><span class="dt">unsigned</span> <span class="dt">char</span><span class="op">)</span>str<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb177-40"><a href="#cb177-40" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb177-41"><a href="#cb177-41" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb177-42"><a href="#cb177-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb177-43"><a href="#cb177-43" aria-hidden="true" tabindex="-1"></a><span class="co">/* 文字列配列のバブルソート */</span></span>
<span id="cb177-44"><a href="#cb177-44" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> bubble_sort_strings<span class="op">(</span><span class="dt">char</span> arr<span class="op">[][</span>MAX_LENGTH<span class="op">],</span> <span class="dt">int</span> n<span class="op">)</span></span>
<span id="cb177-45"><a href="#cb177-45" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb177-46"><a href="#cb177-46" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">,</span> j<span class="op">;</span></span>
<span id="cb177-47"><a href="#cb177-47" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> temp<span class="op">[</span>MAX_LENGTH<span class="op">];</span></span>
<span id="cb177-48"><a href="#cb177-48" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb177-49"><a href="#cb177-49" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> n <span class="op">-</span> <span class="dv">1</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb177-50"><a href="#cb177-50" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span>j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> j <span class="op">&lt;</span> n <span class="op">-</span> <span class="dv">1</span> <span class="op">-</span> i<span class="op">;</span> j<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb177-51"><a href="#cb177-51" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>strcmp<span class="op">(</span>arr<span class="op">[</span>j<span class="op">],</span> arr<span class="op">[</span>j <span class="op">+</span> <span class="dv">1</span><span class="op">])</span> <span class="op">&gt;</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb177-52"><a href="#cb177-52" aria-hidden="true" tabindex="-1"></a>                strcpy<span class="op">(</span>temp<span class="op">,</span> arr<span class="op">[</span>j<span class="op">]);</span></span>
<span id="cb177-53"><a href="#cb177-53" aria-hidden="true" tabindex="-1"></a>                strcpy<span class="op">(</span>arr<span class="op">[</span>j<span class="op">],</span> arr<span class="op">[</span>j <span class="op">+</span> <span class="dv">1</span><span class="op">]);</span></span>
<span id="cb177-54"><a href="#cb177-54" aria-hidden="true" tabindex="-1"></a>                strcpy<span class="op">(</span>arr<span class="op">[</span>j <span class="op">+</span> <span class="dv">1</span><span class="op">],</span> temp<span class="op">);</span></span>
<span id="cb177-55"><a href="#cb177-55" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb177-56"><a href="#cb177-56" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb177-57"><a href="#cb177-57" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb177-58"><a href="#cb177-58" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb177-59"><a href="#cb177-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb177-60"><a href="#cb177-60" aria-hidden="true" tabindex="-1"></a><span class="co">/* 文字列配列での検索 */</span></span>
<span id="cb177-61"><a href="#cb177-61" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> search_string<span class="op">(</span><span class="dt">char</span> arr<span class="op">[][</span>MAX_LENGTH<span class="op">],</span> <span class="dt">int</span> count<span class="op">,</span> <span class="dt">char</span> <span class="op">*</span>target<span class="op">)</span></span>
<span id="cb177-62"><a href="#cb177-62" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb177-63"><a href="#cb177-63" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb177-64"><a href="#cb177-64" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb177-65"><a href="#cb177-65" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> count<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb177-66"><a href="#cb177-66" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>strcmp<span class="op">(</span>arr<span class="op">[</span>i<span class="op">],</span> target<span class="op">)</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb177-67"><a href="#cb177-67" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> i<span class="op">;</span>  <span class="co">/* 見つかった場合のインデックス */</span></span>
<span id="cb177-68"><a href="#cb177-68" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb177-69"><a href="#cb177-69" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb177-70"><a href="#cb177-70" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">-</span><span class="dv">1</span><span class="op">;</span>  <span class="co">/* 見つからない場合 */</span></span>
<span id="cb177-71"><a href="#cb177-71" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb177-72"><a href="#cb177-72" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb177-73"><a href="#cb177-73" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb177-74"><a href="#cb177-74" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb177-75"><a href="#cb177-75" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 文字列の分割（トークン化） */</span></span>
<span id="cb177-76"><a href="#cb177-76" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== 文字列の分割（トークン化） ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb177-77"><a href="#cb177-77" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> input<span class="op">[]</span> <span class="op">=</span> <span class="st">&quot;apple,banana,cherry,date,elderberry&quot;</span><span class="op">;</span></span>
<span id="cb177-78"><a href="#cb177-78" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> tokens<span class="op">[</span>MAX_TOKENS<span class="op">][</span>MAX_LENGTH<span class="op">];</span></span>
<span id="cb177-79"><a href="#cb177-79" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> temp<span class="op">[</span><span class="dv">100</span><span class="op">];</span></span>
<span id="cb177-80"><a href="#cb177-80" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> <span class="op">*</span>token<span class="op">;</span></span>
<span id="cb177-81"><a href="#cb177-81" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> token_count <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb177-82"><a href="#cb177-82" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb177-83"><a href="#cb177-83" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb177-84"><a href="#cb177-84" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 入力文字列をコピー（strtokは元の文字列を変更するため） */</span></span>
<span id="cb177-85"><a href="#cb177-85" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>temp<span class="op">,</span> input<span class="op">);</span></span>
<span id="cb177-86"><a href="#cb177-86" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb177-87"><a href="#cb177-87" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* カンマで分割 */</span></span>
<span id="cb177-88"><a href="#cb177-88" aria-hidden="true" tabindex="-1"></a>    token <span class="op">=</span> strtok<span class="op">(</span>temp<span class="op">,</span> <span class="st">&quot;,&quot;</span><span class="op">);</span></span>
<span id="cb177-89"><a href="#cb177-89" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>token <span class="op">!=</span> NULL <span class="op">&amp;&amp;</span> token_count <span class="op">&lt;</span> MAX_TOKENS<span class="op">)</span> <span class="op">{</span></span>
<span id="cb177-90"><a href="#cb177-90" aria-hidden="true" tabindex="-1"></a>        strcpy<span class="op">(</span>tokens<span class="op">[</span>token_count<span class="op">],</span> token<span class="op">);</span></span>
<span id="cb177-91"><a href="#cb177-91" aria-hidden="true" tabindex="-1"></a>        token_count<span class="op">++;</span></span>
<span id="cb177-92"><a href="#cb177-92" aria-hidden="true" tabindex="-1"></a>        token <span class="op">=</span> strtok<span class="op">(</span>NULL<span class="op">,</span> <span class="st">&quot;,&quot;</span><span class="op">);</span></span>
<span id="cb177-93"><a href="#cb177-93" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb177-94"><a href="#cb177-94" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb177-95"><a href="#cb177-95" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;分割結果:</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb177-96"><a href="#cb177-96" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> token_count<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb177-97"><a href="#cb177-97" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st">: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">,</span> tokens<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb177-98"><a href="#cb177-98" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb177-99"><a href="#cb177-99" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb177-100"><a href="#cb177-100" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 文字列の変換（大文字・小文字） */</span></span>
<span id="cb177-101"><a href="#cb177-101" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">=== 文字列の変換（大文字・小文字） ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb177-102"><a href="#cb177-102" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> original<span class="op">[</span>MAX_STRINGS<span class="op">][</span>MAX_LENGTH<span class="op">]</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb177-103"><a href="#cb177-103" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;Hello World&quot;</span><span class="op">,</span></span>
<span id="cb177-104"><a href="#cb177-104" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;Programming Language&quot;</span><span class="op">,</span></span>
<span id="cb177-105"><a href="#cb177-105" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;C Language Tutorial&quot;</span><span class="op">,</span></span>
<span id="cb177-106"><a href="#cb177-106" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;String Processing&quot;</span><span class="op">,</span></span>
<span id="cb177-107"><a href="#cb177-107" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;Array Manipulation&quot;</span></span>
<span id="cb177-108"><a href="#cb177-108" aria-hidden="true" tabindex="-1"></a>    <span class="op">};</span></span>
<span id="cb177-109"><a href="#cb177-109" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> uppercase_copy<span class="op">[</span>MAX_STRINGS<span class="op">][</span>MAX_LENGTH<span class="op">];</span></span>
<span id="cb177-110"><a href="#cb177-110" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> lowercase_copy<span class="op">[</span>MAX_STRINGS<span class="op">][</span>MAX_LENGTH<span class="op">];</span></span>
<span id="cb177-111"><a href="#cb177-111" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb177-112"><a href="#cb177-112" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 文字列をコピーして変換 */</span></span>
<span id="cb177-113"><a href="#cb177-113" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> MAX_STRINGS<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb177-114"><a href="#cb177-114" aria-hidden="true" tabindex="-1"></a>        strcpy<span class="op">(</span>uppercase_copy<span class="op">[</span>i<span class="op">],</span> original<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb177-115"><a href="#cb177-115" aria-hidden="true" tabindex="-1"></a>        strcpy<span class="op">(</span>lowercase_copy<span class="op">[</span>i<span class="op">],</span> original<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb177-116"><a href="#cb177-116" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb177-117"><a href="#cb177-117" aria-hidden="true" tabindex="-1"></a>        to_uppercase<span class="op">(</span>uppercase_copy<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb177-118"><a href="#cb177-118" aria-hidden="true" tabindex="-1"></a>        to_lowercase<span class="op">(</span>lowercase_copy<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb177-119"><a href="#cb177-119" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb177-120"><a href="#cb177-120" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb177-121"><a href="#cb177-121" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 結果の表示 */</span></span>
<span id="cb177-122"><a href="#cb177-122" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;元の文字列 -&gt; 大文字 -&gt; 小文字</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb177-123"><a href="#cb177-123" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=====================================</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb177-124"><a href="#cb177-124" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> MAX_STRINGS<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb177-125"><a href="#cb177-125" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%-20s</span><span class="st"> -&gt; </span><span class="sc">%-20s</span><span class="st"> -&gt; </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> </span>
<span id="cb177-126"><a href="#cb177-126" aria-hidden="true" tabindex="-1"></a>               original<span class="op">[</span>i<span class="op">],</span> uppercase_copy<span class="op">[</span>i<span class="op">],</span> lowercase_copy<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb177-127"><a href="#cb177-127" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb177-128"><a href="#cb177-128" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb177-129"><a href="#cb177-129" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 文字列配列のソートと検索 */</span></span>
<span id="cb177-130"><a href="#cb177-130" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">=== 文字列配列のソート ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb177-131"><a href="#cb177-131" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> words<span class="op">[</span><span class="dv">8</span><span class="op">][</span>MAX_LENGTH<span class="op">]</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb177-132"><a href="#cb177-132" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;Zebra&quot;</span><span class="op">,</span> <span class="st">&quot;Apple&quot;</span><span class="op">,</span> <span class="st">&quot;Monkey&quot;</span><span class="op">,</span> <span class="st">&quot;Banana&quot;</span><span class="op">,</span></span>
<span id="cb177-133"><a href="#cb177-133" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;Cat&quot;</span><span class="op">,</span> <span class="st">&quot;Dog&quot;</span><span class="op">,</span> <span class="st">&quot;Elephant&quot;</span><span class="op">,</span> <span class="st">&quot;Fish&quot;</span></span>
<span id="cb177-134"><a href="#cb177-134" aria-hidden="true" tabindex="-1"></a>    <span class="op">};</span></span>
<span id="cb177-135"><a href="#cb177-135" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb177-136"><a href="#cb177-136" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ソート前:</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb177-137"><a href="#cb177-137" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">8</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb177-138"><a href="#cb177-138" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%s</span><span class="st"> &quot;</span><span class="op">,</span> words<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb177-139"><a href="#cb177-139" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb177-140"><a href="#cb177-140" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb177-141"><a href="#cb177-141" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb177-142"><a href="#cb177-142" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* バブルソート */</span></span>
<span id="cb177-143"><a href="#cb177-143" aria-hidden="true" tabindex="-1"></a>    bubble_sort_strings<span class="op">(</span>words<span class="op">,</span> <span class="dv">8</span><span class="op">);</span></span>
<span id="cb177-144"><a href="#cb177-144" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb177-145"><a href="#cb177-145" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ソート後:</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb177-146"><a href="#cb177-146" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">8</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb177-147"><a href="#cb177-147" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%s</span><span class="st"> &quot;</span><span class="op">,</span> words<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb177-148"><a href="#cb177-148" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb177-149"><a href="#cb177-149" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb177-150"><a href="#cb177-150" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb177-151"><a href="#cb177-151" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 検索のテスト */</span></span>
<span id="cb177-152"><a href="#cb177-152" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">=== 文字列の検索 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb177-153"><a href="#cb177-153" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> cities<span class="op">[</span><span class="dv">10</span><span class="op">][</span>MAX_LENGTH<span class="op">]</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb177-154"><a href="#cb177-154" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;Tokyo&quot;</span><span class="op">,</span> <span class="st">&quot;Osaka&quot;</span><span class="op">,</span> <span class="st">&quot;Kyoto&quot;</span><span class="op">,</span> <span class="st">&quot;Nagoya&quot;</span><span class="op">,</span> <span class="st">&quot;Sapporo&quot;</span><span class="op">,</span></span>
<span id="cb177-155"><a href="#cb177-155" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;Fukuoka&quot;</span><span class="op">,</span> <span class="st">&quot;Kobe&quot;</span><span class="op">,</span> <span class="st">&quot;Sendai&quot;</span><span class="op">,</span> <span class="st">&quot;Hiroshima&quot;</span><span class="op">,</span> <span class="st">&quot;Yokohama&quot;</span></span>
<span id="cb177-156"><a href="#cb177-156" aria-hidden="true" tabindex="-1"></a>    <span class="op">};</span></span>
<span id="cb177-157"><a href="#cb177-157" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> search_target<span class="op">[]</span> <span class="op">=</span> <span class="st">&quot;Kyoto&quot;</span><span class="op">;</span></span>
<span id="cb177-158"><a href="#cb177-158" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> result<span class="op">;</span></span>
<span id="cb177-159"><a href="#cb177-159" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb177-160"><a href="#cb177-160" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;都市一覧:</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb177-161"><a href="#cb177-161" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">10</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb177-162"><a href="#cb177-162" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st">. </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">,</span> cities<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb177-163"><a href="#cb177-163" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb177-164"><a href="#cb177-164" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb177-165"><a href="#cb177-165" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 検索実行 */</span></span>
<span id="cb177-166"><a href="#cb177-166" aria-hidden="true" tabindex="-1"></a>    result <span class="op">=</span> search_string<span class="op">(</span>cities<span class="op">,</span> <span class="dv">10</span><span class="op">,</span> search_target<span class="op">);</span></span>
<span id="cb177-167"><a href="#cb177-167" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>result <span class="op">!=</span> <span class="op">-</span><span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb177-168"><a href="#cb177-168" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n\&quot;%s\&quot;</span><span class="st"> は </span><span class="sc">%d</span><span class="st">番目にあります。</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> search_target<span class="op">,</span> result <span class="op">+</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb177-169"><a href="#cb177-169" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb177-170"><a href="#cb177-170" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n\&quot;%s\&quot;</span><span class="st"> は見つかりませんでした。</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> search_target<span class="op">);</span></span>
<span id="cb177-171"><a href="#cb177-171" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb177-172"><a href="#cb177-172" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb177-173"><a href="#cb177-173" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 簡易データベースの例 */</span></span>
<span id="cb177-174"><a href="#cb177-174" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">=== 簡易従業員データベース ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb177-175"><a href="#cb177-175" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> employee_names<span class="op">[</span><span class="dv">3</span><span class="op">][</span>MAX_LENGTH<span class="op">]</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb177-176"><a href="#cb177-176" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;田中太郎&quot;</span><span class="op">,</span> <span class="st">&quot;佐藤花子&quot;</span><span class="op">,</span> <span class="st">&quot;鈴木一郎&quot;</span></span>
<span id="cb177-177"><a href="#cb177-177" aria-hidden="true" tabindex="-1"></a>    <span class="op">};</span></span>
<span id="cb177-178"><a href="#cb177-178" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> departments<span class="op">[</span><span class="dv">3</span><span class="op">][</span>MAX_LENGTH<span class="op">]</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb177-179"><a href="#cb177-179" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;開発&quot;</span><span class="op">,</span> <span class="st">&quot;営業&quot;</span><span class="op">,</span> <span class="st">&quot;開発&quot;</span></span>
<span id="cb177-180"><a href="#cb177-180" aria-hidden="true" tabindex="-1"></a>    <span class="op">};</span></span>
<span id="cb177-181"><a href="#cb177-181" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> positions<span class="op">[</span><span class="dv">3</span><span class="op">][</span>MAX_LENGTH<span class="op">]</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb177-182"><a href="#cb177-182" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;課長&quot;</span><span class="op">,</span> <span class="st">&quot;部長&quot;</span><span class="op">,</span> <span class="st">&quot;一般&quot;</span></span>
<span id="cb177-183"><a href="#cb177-183" aria-hidden="true" tabindex="-1"></a>    <span class="op">};</span></span>
<span id="cb177-184"><a href="#cb177-184" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> salaries<span class="op">[</span><span class="dv">3</span><span class="op">]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">800000</span><span class="op">,</span> <span class="dv">1200000</span><span class="op">,</span> <span class="dv">500000</span><span class="op">};</span></span>
<span id="cb177-185"><a href="#cb177-185" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb177-186"><a href="#cb177-186" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 全従業員の表示 */</span></span>
<span id="cb177-187"><a href="#cb177-187" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%-12s</span><span class="st"> </span><span class="sc">%-8s</span><span class="st"> </span><span class="sc">%-8s</span><span class="st"> </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;名前&quot;</span><span class="op">,</span> <span class="st">&quot;部署&quot;</span><span class="op">,</span> <span class="st">&quot;役職&quot;</span><span class="op">,</span> <span class="st">&quot;給与&quot;</span><span class="op">);</span></span>
<span id="cb177-188"><a href="#cb177-188" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;--------------------------------------------------</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb177-189"><a href="#cb177-189" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">3</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb177-190"><a href="#cb177-190" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%-12s</span><span class="st"> </span><span class="sc">%-8s</span><span class="st"> </span><span class="sc">%-8s</span><span class="st"> </span><span class="sc">%d</span><span class="st">円</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span></span>
<span id="cb177-191"><a href="#cb177-191" aria-hidden="true" tabindex="-1"></a>               employee_names<span class="op">[</span>i<span class="op">],</span></span>
<span id="cb177-192"><a href="#cb177-192" aria-hidden="true" tabindex="-1"></a>               departments<span class="op">[</span>i<span class="op">],</span></span>
<span id="cb177-193"><a href="#cb177-193" aria-hidden="true" tabindex="-1"></a>               positions<span class="op">[</span>i<span class="op">],</span></span>
<span id="cb177-194"><a href="#cb177-194" aria-hidden="true" tabindex="-1"></a>               salaries<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb177-195"><a href="#cb177-195" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb177-196"><a href="#cb177-196" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb177-197"><a href="#cb177-197" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 部署別集計 */</span></span>
<span id="cb177-198"><a href="#cb177-198" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">=== 部署別従業員数 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb177-199"><a href="#cb177-199" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> unique_depts<span class="op">[</span><span class="dv">4</span><span class="op">][</span>MAX_LENGTH<span class="op">]</span> <span class="op">=</span> <span class="op">{</span><span class="st">&quot;営業&quot;</span><span class="op">,</span> <span class="st">&quot;開発&quot;</span><span class="op">,</span> <span class="st">&quot;人事&quot;</span><span class="op">,</span> <span class="st">&quot;経理&quot;</span><span class="op">};</span></span>
<span id="cb177-200"><a href="#cb177-200" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> dept_count<span class="op">;</span></span>
<span id="cb177-201"><a href="#cb177-201" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb177-202"><a href="#cb177-202" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">4</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb177-203"><a href="#cb177-203" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> count <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb177-204"><a href="#cb177-204" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> j<span class="op">;</span></span>
<span id="cb177-205"><a href="#cb177-205" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb177-206"><a href="#cb177-206" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span>j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> j <span class="op">&lt;</span> <span class="dv">3</span><span class="op">;</span> j<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb177-207"><a href="#cb177-207" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>strcmp<span class="op">(</span>departments<span class="op">[</span>j<span class="op">],</span> unique_depts<span class="op">[</span>i<span class="op">])</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb177-208"><a href="#cb177-208" aria-hidden="true" tabindex="-1"></a>                count<span class="op">++;</span></span>
<span id="cb177-209"><a href="#cb177-209" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb177-210"><a href="#cb177-210" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb177-211"><a href="#cb177-211" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%s</span><span class="st">: </span><span class="sc">%d</span><span class="st">人</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> unique_depts<span class="op">[</span>i<span class="op">],</span> count<span class="op">);</span></span>
<span id="cb177-212"><a href="#cb177-212" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb177-213"><a href="#cb177-213" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb177-214"><a href="#cb177-214" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb177-215"><a href="#cb177-215" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb177-216"><a href="#cb177-216" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb177-217"><a href="#cb177-217" aria-hidden="true" tabindex="-1"></a><span class="co">/*</span></span>
<span id="cb177-218"><a href="#cb177-218" aria-hidden="true" tabindex="-1"></a><span class="co">学習ポイント:</span></span>
<span id="cb177-219"><a href="#cb177-219" aria-hidden="true" tabindex="-1"></a><span class="co">1. 文字列の分割:</span></span>
<span id="cb177-220"><a href="#cb177-220" aria-hidden="true" tabindex="-1"></a><span class="co">   - strtok()関数による分割</span></span>
<span id="cb177-221"><a href="#cb177-221" aria-hidden="true" tabindex="-1"></a><span class="co">   - 元の文字列が変更されることに注意</span></span>
<span id="cb177-222"><a href="#cb177-222" aria-hidden="true" tabindex="-1"></a><span class="co">   - 区切り文字の指定方法</span></span>
<span id="cb177-223"><a href="#cb177-223" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb177-224"><a href="#cb177-224" aria-hidden="true" tabindex="-1"></a><span class="co">2. 文字列変換:</span></span>
<span id="cb177-225"><a href="#cb177-225" aria-hidden="true" tabindex="-1"></a><span class="co">   - toupper()/tolower()による大文字小文字変換</span></span>
<span id="cb177-226"><a href="#cb177-226" aria-hidden="true" tabindex="-1"></a><span class="co">   - ctype.hライブラリの活用</span></span>
<span id="cb177-227"><a href="#cb177-227" aria-hidden="true" tabindex="-1"></a><span class="co">   - 文字列全体の変換処理</span></span>
<span id="cb177-228"><a href="#cb177-228" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb177-229"><a href="#cb177-229" aria-hidden="true" tabindex="-1"></a><span class="co">3. 文字列ソート:</span></span>
<span id="cb177-230"><a href="#cb177-230" aria-hidden="true" tabindex="-1"></a><span class="co">   - バブルソートアルゴリズムの実装</span></span>
<span id="cb177-231"><a href="#cb177-231" aria-hidden="true" tabindex="-1"></a><span class="co">   - strcmp()による文字列比較</span></span>
<span id="cb177-232"><a href="#cb177-232" aria-hidden="true" tabindex="-1"></a><span class="co">   - 配列要素の交換処理</span></span>
<span id="cb177-233"><a href="#cb177-233" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb177-234"><a href="#cb177-234" aria-hidden="true" tabindex="-1"></a><span class="co">4. 実用的な応用:</span></span>
<span id="cb177-235"><a href="#cb177-235" aria-hidden="true" tabindex="-1"></a><span class="co">   - データベース的な処理</span></span>
<span id="cb177-236"><a href="#cb177-236" aria-hidden="true" tabindex="-1"></a><span class="co">   - 集計・分析機能</span></span>
<span id="cb177-237"><a href="#cb177-237" aria-hidden="true" tabindex="-1"></a><span class="co">   - 検索・フィルタリング</span></span>
<span id="cb177-238"><a href="#cb177-238" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb177-239"><a href="#cb177-239" aria-hidden="true" tabindex="-1"></a><span class="co">注意点:</span></span>
<span id="cb177-240"><a href="#cb177-240" aria-hidden="true" tabindex="-1"></a><span class="co">- strtok()は元の文字列を変更するため注意</span></span>
<span id="cb177-241"><a href="#cb177-241" aria-hidden="true" tabindex="-1"></a><span class="co">- 文字のキャストにはunsigned charを使用</span></span>
<span id="cb177-242"><a href="#cb177-242" aria-hidden="true" tabindex="-1"></a><span class="co">- バッファサイズの管理</span></span>
<span id="cb177-243"><a href="#cb177-243" aria-hidden="true" tabindex="-1"></a><span class="co">- NULL文字の適切な処理</span></span>
<span id="cb177-244"><a href="#cb177-244" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span></span></code></pre></div>
<blockquote>
<p>C99版は<a
href="advanced_string_processing_c99.c">こちら</a>を参照してください。</p>
</blockquote>
<h3 id="string_array_operations.c">string_array_operations.c</h3>
<div class="sourceCode" id="cb178"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb178-1"><a href="#cb178-1" aria-hidden="true" tabindex="-1"></a><span class="co">/*</span></span>
<span id="cb178-2"><a href="#cb178-2" aria-hidden="true" tabindex="-1"></a><span class="co"> * 文字列配列の実践例</span></span>
<span id="cb178-3"><a href="#cb178-3" aria-hidden="true" tabindex="-1"></a><span class="co"> * ファイル名: string_array_operations.c</span></span>
<span id="cb178-4"><a href="#cb178-4" aria-hidden="true" tabindex="-1"></a><span class="co"> * 説明: 二次元文字配列と文字列ポインタ配列の使い分けを学習</span></span>
<span id="cb178-5"><a href="#cb178-5" aria-hidden="true" tabindex="-1"></a><span class="co"> */</span></span>
<span id="cb178-6"><a href="#cb178-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb178-7"><a href="#cb178-7" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb178-8"><a href="#cb178-8" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;string.h&gt;</span></span>
<span id="cb178-9"><a href="#cb178-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb178-10"><a href="#cb178-10" aria-hidden="true" tabindex="-1"></a><span class="pp">#define MAX_STRINGS </span><span class="dv">5</span></span>
<span id="cb178-11"><a href="#cb178-11" aria-hidden="true" tabindex="-1"></a><span class="pp">#define MAX_LENGTH </span><span class="dv">20</span></span>
<span id="cb178-12"><a href="#cb178-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb178-13"><a href="#cb178-13" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb178-14"><a href="#cb178-14" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb178-15"><a href="#cb178-15" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 二次元文字配列での文字列配列 */</span></span>
<span id="cb178-16"><a href="#cb178-16" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== 二次元文字配列による文字列配列 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb178-17"><a href="#cb178-17" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> languages<span class="op">[</span>MAX_STRINGS<span class="op">][</span>MAX_LENGTH<span class="op">];</span></span>
<span id="cb178-18"><a href="#cb178-18" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> count <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb178-19"><a href="#cb178-19" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb178-20"><a href="#cb178-20" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb178-21"><a href="#cb178-21" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 文字列配列への代入 */</span></span>
<span id="cb178-22"><a href="#cb178-22" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>languages<span class="op">[</span>count<span class="op">++],</span> <span class="st">&quot;C&quot;</span><span class="op">);</span></span>
<span id="cb178-23"><a href="#cb178-23" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>languages<span class="op">[</span>count<span class="op">++],</span> <span class="st">&quot;Python&quot;</span><span class="op">);</span></span>
<span id="cb178-24"><a href="#cb178-24" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>languages<span class="op">[</span>count<span class="op">++],</span> <span class="st">&quot;Java&quot;</span><span class="op">);</span></span>
<span id="cb178-25"><a href="#cb178-25" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>languages<span class="op">[</span>count<span class="op">++],</span> <span class="st">&quot;JavaScript&quot;</span><span class="op">);</span></span>
<span id="cb178-26"><a href="#cb178-26" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>languages<span class="op">[</span>count<span class="op">++],</span> <span class="st">&quot;C++&quot;</span><span class="op">);</span></span>
<span id="cb178-27"><a href="#cb178-27" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb178-28"><a href="#cb178-28" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 表示 */</span></span>
<span id="cb178-29"><a href="#cb178-29" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;プログラミング言語一覧:</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb178-30"><a href="#cb178-30" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> count<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb178-31"><a href="#cb178-31" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st">. </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">,</span> languages<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb178-32"><a href="#cb178-32" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb178-33"><a href="#cb178-33" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb178-34"><a href="#cb178-34" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 文字列の変更 */</span></span>
<span id="cb178-35"><a href="#cb178-35" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>languages<span class="op">[</span><span class="dv">0</span><span class="op">],</span> <span class="st">&quot;C言語&quot;</span><span class="op">);</span></span>
<span id="cb178-36"><a href="#cb178-36" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">変更後の1番目: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> languages<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb178-37"><a href="#cb178-37" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb178-38"><a href="#cb178-38" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 文字列ポインタ配列での文字列配列 */</span></span>
<span id="cb178-39"><a href="#cb178-39" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">=== 文字列ポインタ配列 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb178-40"><a href="#cb178-40" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> <span class="op">*</span>fruits<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb178-41"><a href="#cb178-41" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;Apple&quot;</span><span class="op">,</span></span>
<span id="cb178-42"><a href="#cb178-42" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;Banana&quot;</span><span class="op">,</span> </span>
<span id="cb178-43"><a href="#cb178-43" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;Cherry&quot;</span><span class="op">,</span></span>
<span id="cb178-44"><a href="#cb178-44" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;Date&quot;</span><span class="op">,</span></span>
<span id="cb178-45"><a href="#cb178-45" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;Elderberry&quot;</span></span>
<span id="cb178-46"><a href="#cb178-46" aria-hidden="true" tabindex="-1"></a>    <span class="op">};</span></span>
<span id="cb178-47"><a href="#cb178-47" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> fruit_count <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>fruits<span class="op">)</span> <span class="op">/</span> <span class="kw">sizeof</span><span class="op">(</span>fruits<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb178-48"><a href="#cb178-48" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb178-49"><a href="#cb178-49" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 表示 */</span></span>
<span id="cb178-50"><a href="#cb178-50" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;果物一覧:</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb178-51"><a href="#cb178-51" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> fruit_count<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb178-52"><a href="#cb178-52" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st">. </span><span class="sc">%s</span><span class="st"> (長さ: </span><span class="sc">%lu</span><span class="st">)</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">,</span> fruits<span class="op">[</span>i<span class="op">],</span> </span>
<span id="cb178-53"><a href="#cb178-53" aria-hidden="true" tabindex="-1"></a>               <span class="op">(</span><span class="dt">unsigned</span> <span class="dt">long</span><span class="op">)</span>strlen<span class="op">(</span>fruits<span class="op">[</span>i<span class="op">]));</span></span>
<span id="cb178-54"><a href="#cb178-54" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb178-55"><a href="#cb178-55" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb178-56"><a href="#cb178-56" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* ポインタの変更（文字列リテラルの置き換え） */</span></span>
<span id="cb178-57"><a href="#cb178-57" aria-hidden="true" tabindex="-1"></a>    fruits<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="st">&quot;リンゴ&quot;</span><span class="op">;</span></span>
<span id="cb178-58"><a href="#cb178-58" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">変更後の1番目: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> fruits<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb178-59"><a href="#cb178-59" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb178-60"><a href="#cb178-60" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 文字列配列の初期化と動的変更 */</span></span>
<span id="cb178-61"><a href="#cb178-61" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">=== 動的に変更可能な文字列配列 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb178-62"><a href="#cb178-62" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> menu_items<span class="op">[</span><span class="dv">4</span><span class="op">][</span>MAX_LENGTH<span class="op">];</span></span>
<span id="cb178-63"><a href="#cb178-63" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> <span class="op">*</span>categories<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="st">&quot;前菜&quot;</span><span class="op">,</span> <span class="st">&quot;メイン&quot;</span><span class="op">,</span> <span class="st">&quot;デザート&quot;</span><span class="op">,</span> <span class="st">&quot;飲み物&quot;</span><span class="op">};</span></span>
<span id="cb178-64"><a href="#cb178-64" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> item_count <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb178-65"><a href="#cb178-65" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb178-66"><a href="#cb178-66" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* メニュー項目の追加 */</span></span>
<span id="cb178-67"><a href="#cb178-67" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>menu_items<span class="op">[</span>item_count<span class="op">++],</span> <span class="st">&quot;サラダ&quot;</span><span class="op">);</span></span>
<span id="cb178-68"><a href="#cb178-68" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>menu_items<span class="op">[</span>item_count<span class="op">++],</span> <span class="st">&quot;ステーキ&quot;</span><span class="op">);</span></span>
<span id="cb178-69"><a href="#cb178-69" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>menu_items<span class="op">[</span>item_count<span class="op">++],</span> <span class="st">&quot;アイスクリーム&quot;</span><span class="op">);</span></span>
<span id="cb178-70"><a href="#cb178-70" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>menu_items<span class="op">[</span>item_count<span class="op">++],</span> <span class="st">&quot;コーヒー&quot;</span><span class="op">);</span></span>
<span id="cb178-71"><a href="#cb178-71" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb178-72"><a href="#cb178-72" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* カテゴリ別表示 */</span></span>
<span id="cb178-73"><a href="#cb178-73" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== レストランメニュー ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb178-74"><a href="#cb178-74" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> item_count <span class="op">&amp;&amp;</span> i <span class="op">&lt;</span> <span class="dv">4</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb178-75"><a href="#cb178-75" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;[</span><span class="sc">%s</span><span class="st">] </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> categories<span class="op">[</span>i<span class="op">],</span> menu_items<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb178-76"><a href="#cb178-76" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb178-77"><a href="#cb178-77" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb178-78"><a href="#cb178-78" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 項目の変更 */</span></span>
<span id="cb178-79"><a href="#cb178-79" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>menu_items<span class="op">[</span><span class="dv">1</span><span class="op">],</span> <span class="st">&quot;ハンバーグ&quot;</span><span class="op">);</span></span>
<span id="cb178-80"><a href="#cb178-80" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">メイン料理を変更: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> menu_items<span class="op">[</span><span class="dv">1</span><span class="op">]);</span></span>
<span id="cb178-81"><a href="#cb178-81" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb178-82"><a href="#cb178-82" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* メモリ使用量の比較 */</span></span>
<span id="cb178-83"><a href="#cb178-83" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">=== メモリ使用量比較 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb178-84"><a href="#cb178-84" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> matrix_strings<span class="op">[</span><span class="dv">5</span><span class="op">][</span><span class="dv">10</span><span class="op">]</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb178-85"><a href="#cb178-85" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;Cat&quot;</span><span class="op">,</span> <span class="st">&quot;Dog&quot;</span><span class="op">,</span> <span class="st">&quot;Bird&quot;</span><span class="op">,</span> <span class="st">&quot;Fish&quot;</span><span class="op">,</span> <span class="st">&quot;Rabbit&quot;</span></span>
<span id="cb178-86"><a href="#cb178-86" aria-hidden="true" tabindex="-1"></a>    <span class="op">};</span></span>
<span id="cb178-87"><a href="#cb178-87" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb178-88"><a href="#cb178-88" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> <span class="op">*</span>pointer_strings<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb178-89"><a href="#cb178-89" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;Cat&quot;</span><span class="op">,</span> <span class="st">&quot;Dog&quot;</span><span class="op">,</span> <span class="st">&quot;Bird&quot;</span><span class="op">,</span> <span class="st">&quot;Fish&quot;</span><span class="op">,</span> <span class="st">&quot;Rabbit&quot;</span></span>
<span id="cb178-90"><a href="#cb178-90" aria-hidden="true" tabindex="-1"></a>    <span class="op">};</span></span>
<span id="cb178-91"><a href="#cb178-91" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb178-92"><a href="#cb178-92" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;二次元文字配列: </span><span class="sc">%lu</span><span class="st"> バイト</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> </span>
<span id="cb178-93"><a href="#cb178-93" aria-hidden="true" tabindex="-1"></a>           <span class="op">(</span><span class="dt">unsigned</span> <span class="dt">long</span><span class="op">)</span><span class="kw">sizeof</span><span class="op">(</span>matrix_strings<span class="op">));</span></span>
<span id="cb178-94"><a href="#cb178-94" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;文字列ポインタ配列: </span><span class="sc">%lu</span><span class="st"> バイト</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> </span>
<span id="cb178-95"><a href="#cb178-95" aria-hidden="true" tabindex="-1"></a>           <span class="op">(</span><span class="dt">unsigned</span> <span class="dt">long</span><span class="op">)</span><span class="kw">sizeof</span><span class="op">(</span>pointer_strings<span class="op">));</span></span>
<span id="cb178-96"><a href="#cb178-96" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb178-97"><a href="#cb178-97" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">=== 実際の文字列長 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb178-98"><a href="#cb178-98" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> total_chars <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb178-99"><a href="#cb178-99" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">5</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb178-100"><a href="#cb178-100" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> len <span class="op">=</span> strlen<span class="op">(</span>matrix_strings<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb178-101"><a href="#cb178-101" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%s</span><span class="st">: </span><span class="sc">%d</span><span class="st">文字</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> matrix_strings<span class="op">[</span>i<span class="op">],</span> len<span class="op">);</span></span>
<span id="cb178-102"><a href="#cb178-102" aria-hidden="true" tabindex="-1"></a>        total_chars <span class="op">+=</span> len<span class="op">;</span></span>
<span id="cb178-103"><a href="#cb178-103" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb178-104"><a href="#cb178-104" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;総文字数: </span><span class="sc">%d</span><span class="st">文字</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> total_chars<span class="op">);</span></span>
<span id="cb178-105"><a href="#cb178-105" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;未使用領域: </span><span class="sc">%lu</span><span class="st"> バイト</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> </span>
<span id="cb178-106"><a href="#cb178-106" aria-hidden="true" tabindex="-1"></a>           <span class="kw">sizeof</span><span class="op">(</span>matrix_strings<span class="op">)</span> <span class="op">-</span> total_chars <span class="op">-</span> <span class="dv">5</span><span class="op">);</span></span>
<span id="cb178-107"><a href="#cb178-107" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb178-108"><a href="#cb178-108" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb178-109"><a href="#cb178-109" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb178-110"><a href="#cb178-110" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb178-111"><a href="#cb178-111" aria-hidden="true" tabindex="-1"></a><span class="co">/*</span></span>
<span id="cb178-112"><a href="#cb178-112" aria-hidden="true" tabindex="-1"></a><span class="co">学習ポイント:</span></span>
<span id="cb178-113"><a href="#cb178-113" aria-hidden="true" tabindex="-1"></a><span class="co">1. 二次元文字配列:</span></span>
<span id="cb178-114"><a href="#cb178-114" aria-hidden="true" tabindex="-1"></a><span class="co">   - 固定サイズのメモリ確保</span></span>
<span id="cb178-115"><a href="#cb178-115" aria-hidden="true" tabindex="-1"></a><span class="co">   - 文字列の変更が可能</span></span>
<span id="cb178-116"><a href="#cb178-116" aria-hidden="true" tabindex="-1"></a><span class="co">   - メモリ使用効率は低い場合がある</span></span>
<span id="cb178-117"><a href="#cb178-117" aria-hidden="true" tabindex="-1"></a><span class="co">   </span></span>
<span id="cb178-118"><a href="#cb178-118" aria-hidden="true" tabindex="-1"></a><span class="co">2. 文字列ポインタ配列:</span></span>
<span id="cb178-119"><a href="#cb178-119" aria-hidden="true" tabindex="-1"></a><span class="co">   - ポインタのみを格納</span></span>
<span id="cb178-120"><a href="#cb178-120" aria-hidden="true" tabindex="-1"></a><span class="co">   - 文字列リテラルは変更不可</span></span>
<span id="cb178-121"><a href="#cb178-121" aria-hidden="true" tabindex="-1"></a><span class="co">   - メモリ使用効率が良い</span></span>
<span id="cb178-122"><a href="#cb178-122" aria-hidden="true" tabindex="-1"></a><span class="co">   </span></span>
<span id="cb178-123"><a href="#cb178-123" aria-hidden="true" tabindex="-1"></a><span class="co">3. 使い分けの基準:</span></span>
<span id="cb178-124"><a href="#cb178-124" aria-hidden="true" tabindex="-1"></a><span class="co">   - 文字列を変更する必要がある: 二次元配列</span></span>
<span id="cb178-125"><a href="#cb178-125" aria-hidden="true" tabindex="-1"></a><span class="co">   - 文字列が固定: ポインタ配列</span></span>
<span id="cb178-126"><a href="#cb178-126" aria-hidden="true" tabindex="-1"></a><span class="co">   - メモリ効率を重視: ポインタ配列</span></span>
<span id="cb178-127"><a href="#cb178-127" aria-hidden="true" tabindex="-1"></a><span class="co">   </span></span>
<span id="cb178-128"><a href="#cb178-128" aria-hidden="true" tabindex="-1"></a><span class="co">4. 実用的な応用:</span></span>
<span id="cb178-129"><a href="#cb178-129" aria-hidden="true" tabindex="-1"></a><span class="co">   - メニュー管理システム</span></span>
<span id="cb178-130"><a href="#cb178-130" aria-hidden="true" tabindex="-1"></a><span class="co">   - 設定項目の管理</span></span>
<span id="cb178-131"><a href="#cb178-131" aria-hidden="true" tabindex="-1"></a><span class="co">   - データの分類・整理</span></span>
<span id="cb178-132"><a href="#cb178-132" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb178-133"><a href="#cb178-133" aria-hidden="true" tabindex="-1"></a><span class="co">注意点:</span></span>
<span id="cb178-134"><a href="#cb178-134" aria-hidden="true" tabindex="-1"></a><span class="co">- 文字列リテラルの変更は未定義動作</span></span>
<span id="cb178-135"><a href="#cb178-135" aria-hidden="true" tabindex="-1"></a><span class="co">- バッファサイズの確認</span></span>
<span id="cb178-136"><a href="#cb178-136" aria-hidden="true" tabindex="-1"></a><span class="co">- 配列の境界チェック</span></span>
<span id="cb178-137"><a href="#cb178-137" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span></span></code></pre></div>
<blockquote>
<p>C99版は<a
href="string_array_operations_c99.c">こちら</a>を参照してください。</p>
</blockquote>
<h3 id="string_basic.c">string_basic.c</h3>
<div class="sourceCode" id="cb179"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb179-1"><a href="#cb179-1" aria-hidden="true" tabindex="-1"></a><span class="co">/*</span></span>
<span id="cb179-2"><a href="#cb179-2" aria-hidden="true" tabindex="-1"></a><span class="co"> * 文字列操作の基本例</span></span>
<span id="cb179-3"><a href="#cb179-3" aria-hidden="true" tabindex="-1"></a><span class="co"> * ファイル名: string_basic.c</span></span>
<span id="cb179-4"><a href="#cb179-4" aria-hidden="true" tabindex="-1"></a><span class="co"> * 説明: 標準ライブラリの文字列操作関数の使用方法を学習</span></span>
<span id="cb179-5"><a href="#cb179-5" aria-hidden="true" tabindex="-1"></a><span class="co"> */</span></span>
<span id="cb179-6"><a href="#cb179-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb179-7"><a href="#cb179-7" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb179-8"><a href="#cb179-8" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;string.h&gt;</span></span>
<span id="cb179-9"><a href="#cb179-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb179-10"><a href="#cb179-10" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb179-11"><a href="#cb179-11" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb179-12"><a href="#cb179-12" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 文字列の表現方法 */</span></span>
<span id="cb179-13"><a href="#cb179-13" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> str1<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="ch">&#39;H&#39;</span><span class="op">,</span> <span class="ch">&#39;e&#39;</span><span class="op">,</span> <span class="ch">&#39;l&#39;</span><span class="op">,</span> <span class="ch">&#39;l&#39;</span><span class="op">,</span> <span class="ch">&#39;o&#39;</span><span class="op">,</span> <span class="ch">&#39;</span><span class="sc">\0</span><span class="ch">&#39;</span><span class="op">};</span></span>
<span id="cb179-14"><a href="#cb179-14" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> str2<span class="op">[]</span> <span class="op">=</span> <span class="st">&quot;Hello&quot;</span><span class="op">;</span></span>
<span id="cb179-15"><a href="#cb179-15" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> str3<span class="op">[</span><span class="dv">10</span><span class="op">]</span> <span class="op">=</span> <span class="st">&quot;Hello&quot;</span><span class="op">;</span></span>
<span id="cb179-16"><a href="#cb179-16" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> <span class="op">*</span>str4 <span class="op">=</span> <span class="st">&quot;Hello&quot;</span><span class="op">;</span></span>
<span id="cb179-17"><a href="#cb179-17" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb179-18"><a href="#cb179-18" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== 文字列の表現方法 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb179-19"><a href="#cb179-19" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;str1: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> str1<span class="op">);</span></span>
<span id="cb179-20"><a href="#cb179-20" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;str2: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> str2<span class="op">);</span></span>
<span id="cb179-21"><a href="#cb179-21" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;str3: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> str3<span class="op">);</span></span>
<span id="cb179-22"><a href="#cb179-22" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;str4: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> str4<span class="op">);</span></span>
<span id="cb179-23"><a href="#cb179-23" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb179-24"><a href="#cb179-24" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 文字列の長さとサイズ */</span></span>
<span id="cb179-25"><a href="#cb179-25" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">=== 文字列の長さとサイズ ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb179-26"><a href="#cb179-26" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;文字列: </span><span class="sc">\&quot;%s\&quot;\n</span><span class="st">&quot;</span><span class="op">,</span> str2<span class="op">);</span></span>
<span id="cb179-27"><a href="#cb179-27" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;strlen(str2): </span><span class="sc">%lu</span><span class="st">文字</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(</span><span class="dt">unsigned</span> <span class="dt">long</span><span class="op">)</span>strlen<span class="op">(</span>str2<span class="op">));</span></span>
<span id="cb179-28"><a href="#cb179-28" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;sizeof(str2): </span><span class="sc">%lu</span><span class="st"> バイト</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(</span><span class="dt">unsigned</span> <span class="dt">long</span><span class="op">)</span><span class="kw">sizeof</span><span class="op">(</span>str2<span class="op">));</span></span>
<span id="cb179-29"><a href="#cb179-29" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb179-30"><a href="#cb179-30" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* strcpy() - 文字列のコピー */</span></span>
<span id="cb179-31"><a href="#cb179-31" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">=== 文字列のコピー ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb179-32"><a href="#cb179-32" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> source<span class="op">[]</span> <span class="op">=</span> <span class="st">&quot;Hello, World!&quot;</span><span class="op">;</span></span>
<span id="cb179-33"><a href="#cb179-33" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> destination<span class="op">[</span><span class="dv">50</span><span class="op">];</span></span>
<span id="cb179-34"><a href="#cb179-34" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb179-35"><a href="#cb179-35" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>destination<span class="op">,</span> source<span class="op">);</span></span>
<span id="cb179-36"><a href="#cb179-36" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;destination: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> destination<span class="op">);</span></span>
<span id="cb179-37"><a href="#cb179-37" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb179-38"><a href="#cb179-38" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 部分的なコピー */</span></span>
<span id="cb179-39"><a href="#cb179-39" aria-hidden="true" tabindex="-1"></a>    strncpy<span class="op">(</span>destination<span class="op">,</span> source<span class="op">,</span> <span class="dv">5</span><span class="op">);</span></span>
<span id="cb179-40"><a href="#cb179-40" aria-hidden="true" tabindex="-1"></a>    destination<span class="op">[</span><span class="dv">5</span><span class="op">]</span> <span class="op">=</span> <span class="ch">&#39;</span><span class="sc">\0</span><span class="ch">&#39;</span><span class="op">;</span>  <span class="co">/* null終端を明示的に追加 */</span></span>
<span id="cb179-41"><a href="#cb179-41" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;partial copy: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> destination<span class="op">);</span>  <span class="co">/* &quot;Hello&quot; */</span></span>
<span id="cb179-42"><a href="#cb179-42" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb179-43"><a href="#cb179-43" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* strcat() - 文字列の連結 */</span></span>
<span id="cb179-44"><a href="#cb179-44" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">=== 文字列の連結 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb179-45"><a href="#cb179-45" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> str_a<span class="op">[</span><span class="dv">50</span><span class="op">]</span> <span class="op">=</span> <span class="st">&quot;Hello&quot;</span><span class="op">;</span></span>
<span id="cb179-46"><a href="#cb179-46" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> str_b<span class="op">[]</span> <span class="op">=</span> <span class="st">&quot;, World!&quot;</span><span class="op">;</span></span>
<span id="cb179-47"><a href="#cb179-47" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> str_c<span class="op">[]</span> <span class="op">=</span> <span class="st">&quot; How are you?&quot;</span><span class="op">;</span></span>
<span id="cb179-48"><a href="#cb179-48" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb179-49"><a href="#cb179-49" aria-hidden="true" tabindex="-1"></a>    strcat<span class="op">(</span>str_a<span class="op">,</span> str_b<span class="op">);</span></span>
<span id="cb179-50"><a href="#cb179-50" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;After strcat: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> str_a<span class="op">);</span>  <span class="co">/* &quot;Hello, World!&quot; */</span></span>
<span id="cb179-51"><a href="#cb179-51" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb179-52"><a href="#cb179-52" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 部分的な連結 */</span></span>
<span id="cb179-53"><a href="#cb179-53" aria-hidden="true" tabindex="-1"></a>    strncat<span class="op">(</span>str_a<span class="op">,</span> str_c<span class="op">,</span> <span class="dv">4</span><span class="op">);</span></span>
<span id="cb179-54"><a href="#cb179-54" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;After strncat: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> str_a<span class="op">);</span> <span class="co">/* &quot;Hello, World! How&quot; */</span></span>
<span id="cb179-55"><a href="#cb179-55" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb179-56"><a href="#cb179-56" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* strcmp() - 文字列の比較 */</span></span>
<span id="cb179-57"><a href="#cb179-57" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">=== 文字列の比較 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb179-58"><a href="#cb179-58" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> apple<span class="op">[]</span> <span class="op">=</span> <span class="st">&quot;Apple&quot;</span><span class="op">;</span></span>
<span id="cb179-59"><a href="#cb179-59" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> banana<span class="op">[]</span> <span class="op">=</span> <span class="st">&quot;Banana&quot;</span><span class="op">;</span></span>
<span id="cb179-60"><a href="#cb179-60" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> apple2<span class="op">[]</span> <span class="op">=</span> <span class="st">&quot;Apple&quot;</span><span class="op">;</span></span>
<span id="cb179-61"><a href="#cb179-61" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> result<span class="op">;</span></span>
<span id="cb179-62"><a href="#cb179-62" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb179-63"><a href="#cb179-63" aria-hidden="true" tabindex="-1"></a>    result <span class="op">=</span> strcmp<span class="op">(</span>apple<span class="op">,</span> banana<span class="op">);</span></span>
<span id="cb179-64"><a href="#cb179-64" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>result <span class="op">&lt;</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb179-65"><a href="#cb179-65" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\&quot;%s\&quot;</span><span class="st"> &lt; </span><span class="sc">\&quot;%s\&quot;\n</span><span class="st">&quot;</span><span class="op">,</span> apple<span class="op">,</span> banana<span class="op">);</span></span>
<span id="cb179-66"><a href="#cb179-66" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span> <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>result <span class="op">&gt;</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb179-67"><a href="#cb179-67" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\&quot;%s\&quot;</span><span class="st"> &gt; </span><span class="sc">\&quot;%s\&quot;\n</span><span class="st">&quot;</span><span class="op">,</span> apple<span class="op">,</span> banana<span class="op">);</span></span>
<span id="cb179-68"><a href="#cb179-68" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb179-69"><a href="#cb179-69" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\&quot;%s\&quot;</span><span class="st"> == </span><span class="sc">\&quot;%s\&quot;\n</span><span class="st">&quot;</span><span class="op">,</span> apple<span class="op">,</span> banana<span class="op">);</span></span>
<span id="cb179-70"><a href="#cb179-70" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb179-71"><a href="#cb179-71" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb179-72"><a href="#cb179-72" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 等価性の確認 */</span></span>
<span id="cb179-73"><a href="#cb179-73" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>strcmp<span class="op">(</span>apple<span class="op">,</span> apple2<span class="op">)</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb179-74"><a href="#cb179-74" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\&quot;%s\&quot;</span><span class="st"> と </span><span class="sc">\&quot;%s\&quot;</span><span class="st"> は同じです</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> apple<span class="op">,</span> apple2<span class="op">);</span></span>
<span id="cb179-75"><a href="#cb179-75" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb179-76"><a href="#cb179-76" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb179-77"><a href="#cb179-77" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 部分比較 */</span></span>
<span id="cb179-78"><a href="#cb179-78" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>strncmp<span class="op">(</span>apple<span class="op">,</span> banana<span class="op">,</span> <span class="dv">1</span><span class="op">)</span> <span class="op">!=</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb179-79"><a href="#cb179-79" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;最初の文字が異なります</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb179-80"><a href="#cb179-80" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb179-81"><a href="#cb179-81" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb179-82"><a href="#cb179-82" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 文字列検索関数 */</span></span>
<span id="cb179-83"><a href="#cb179-83" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">=== 文字列検索関数 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb179-84"><a href="#cb179-84" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> text<span class="op">[]</span> <span class="op">=</span> <span class="st">&quot;Hello, World! Welcome to C programming.&quot;</span><span class="op">;</span></span>
<span id="cb179-85"><a href="#cb179-85" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> <span class="op">*</span>found<span class="op">;</span></span>
<span id="cb179-86"><a href="#cb179-86" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb179-87"><a href="#cb179-87" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 文字の検索 */</span></span>
<span id="cb179-88"><a href="#cb179-88" aria-hidden="true" tabindex="-1"></a>    found <span class="op">=</span> strchr<span class="op">(</span>text<span class="op">,</span> <span class="ch">&#39;W&#39;</span><span class="op">);</span></span>
<span id="cb179-89"><a href="#cb179-89" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>found <span class="op">!=</span> NULL<span class="op">)</span> <span class="op">{</span></span>
<span id="cb179-90"><a href="#cb179-90" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;&#39;W&#39; found at position: </span><span class="sc">%ld\n</span><span class="st">&quot;</span><span class="op">,</span> found <span class="op">-</span> text<span class="op">);</span></span>
<span id="cb179-91"><a href="#cb179-91" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb179-92"><a href="#cb179-92" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb179-93"><a href="#cb179-93" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 文字列の検索 */</span></span>
<span id="cb179-94"><a href="#cb179-94" aria-hidden="true" tabindex="-1"></a>    found <span class="op">=</span> strstr<span class="op">(</span>text<span class="op">,</span> <span class="st">&quot;World&quot;</span><span class="op">);</span></span>
<span id="cb179-95"><a href="#cb179-95" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>found <span class="op">!=</span> NULL<span class="op">)</span> <span class="op">{</span></span>
<span id="cb179-96"><a href="#cb179-96" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\&quot;</span><span class="st">World</span><span class="sc">\&quot;</span><span class="st"> found at position: </span><span class="sc">%ld\n</span><span class="st">&quot;</span><span class="op">,</span> found <span class="op">-</span> text<span class="op">);</span></span>
<span id="cb179-97"><a href="#cb179-97" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;Found: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> found<span class="op">);</span></span>
<span id="cb179-98"><a href="#cb179-98" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb179-99"><a href="#cb179-99" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb179-100"><a href="#cb179-100" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 最後の文字を検索 */</span></span>
<span id="cb179-101"><a href="#cb179-101" aria-hidden="true" tabindex="-1"></a>    found <span class="op">=</span> strrchr<span class="op">(</span>text<span class="op">,</span> <span class="ch">&#39;o&#39;</span><span class="op">);</span></span>
<span id="cb179-102"><a href="#cb179-102" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>found <span class="op">!=</span> NULL<span class="op">)</span> <span class="op">{</span></span>
<span id="cb179-103"><a href="#cb179-103" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;Last &#39;o&#39; at position: </span><span class="sc">%ld\n</span><span class="st">&quot;</span><span class="op">,</span> found <span class="op">-</span> text<span class="op">);</span></span>
<span id="cb179-104"><a href="#cb179-104" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb179-105"><a href="#cb179-105" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb179-106"><a href="#cb179-106" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb179-107"><a href="#cb179-107" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb179-108"><a href="#cb179-108" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb179-109"><a href="#cb179-109" aria-hidden="true" tabindex="-1"></a><span class="co">/*</span></span>
<span id="cb179-110"><a href="#cb179-110" aria-hidden="true" tabindex="-1"></a><span class="co">学習ポイント:</span></span>
<span id="cb179-111"><a href="#cb179-111" aria-hidden="true" tabindex="-1"></a><span class="co">1. 文字列の表現方法:</span></span>
<span id="cb179-112"><a href="#cb179-112" aria-hidden="true" tabindex="-1"></a><span class="co">   - 文字配列による初期化</span></span>
<span id="cb179-113"><a href="#cb179-113" aria-hidden="true" tabindex="-1"></a><span class="co">   - 文字列リテラルによる初期化</span></span>
<span id="cb179-114"><a href="#cb179-114" aria-hidden="true" tabindex="-1"></a><span class="co">   - ポインタによる文字列参照</span></span>
<span id="cb179-115"><a href="#cb179-115" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb179-116"><a href="#cb179-116" aria-hidden="true" tabindex="-1"></a><span class="co">2. 標準ライブラリ関数:</span></span>
<span id="cb179-117"><a href="#cb179-117" aria-hidden="true" tabindex="-1"></a><span class="co">   - strlen(): 文字列の長さを取得</span></span>
<span id="cb179-118"><a href="#cb179-118" aria-hidden="true" tabindex="-1"></a><span class="co">   - strcpy()/strncpy(): 文字列のコピー</span></span>
<span id="cb179-119"><a href="#cb179-119" aria-hidden="true" tabindex="-1"></a><span class="co">   - strcat()/strncat(): 文字列の連結</span></span>
<span id="cb179-120"><a href="#cb179-120" aria-hidden="true" tabindex="-1"></a><span class="co">   - strcmp()/strncmp(): 文字列の比較</span></span>
<span id="cb179-121"><a href="#cb179-121" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb179-122"><a href="#cb179-122" aria-hidden="true" tabindex="-1"></a><span class="co">3. 文字列検索:</span></span>
<span id="cb179-123"><a href="#cb179-123" aria-hidden="true" tabindex="-1"></a><span class="co">   - strchr(): 文字の検索</span></span>
<span id="cb179-124"><a href="#cb179-124" aria-hidden="true" tabindex="-1"></a><span class="co">   - strrchr(): 文字の後方検索</span></span>
<span id="cb179-125"><a href="#cb179-125" aria-hidden="true" tabindex="-1"></a><span class="co">   - strstr(): 部分文字列の検索</span></span>
<span id="cb179-126"><a href="#cb179-126" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb179-127"><a href="#cb179-127" aria-hidden="true" tabindex="-1"></a><span class="co">注意点:</span></span>
<span id="cb179-128"><a href="#cb179-128" aria-hidden="true" tabindex="-1"></a><span class="co">- strncpy()使用時はnull終端文字の確認が必要</span></span>
<span id="cb179-129"><a href="#cb179-129" aria-hidden="true" tabindex="-1"></a><span class="co">- バッファオーバーフローの防止</span></span>
<span id="cb179-130"><a href="#cb179-130" aria-hidden="true" tabindex="-1"></a><span class="co">- NULLポインタのチェック</span></span>
<span id="cb179-131"><a href="#cb179-131" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span></span></code></pre></div>
<blockquote>
<p>C99版は<a
href="string_basic_c99.c">こちら</a>を参照してください。</p>
</blockquote>
<hr />
<h1 id="第9章-関数">第9章: 関数</h1>
<h2 id="対応c規格-5">対応C規格</h2>
<ul>
<li><strong>主要対象:</strong> C90</li>
<li><strong>学習内容:</strong>
関数の基本、引数と戻り値、関数のスコープ、再帰関数、関数プロトタイプ</li>
</ul>
<h2 id="学習目標-5">学習目標</h2>
<p>この章を完了すると、以下のことができるようになります：</p>
<ul>
<li>関数の定義と呼び出しができる</li>
<li>引数と戻り値を適切に使える</li>
<li>関数のスコープを理解する</li>
<li>再帰関数を作成できる</li>
<li>関数プロトタイプの重要性を理解する</li>
</ul>
<h2 id="理論解説-5">理論解説</h2>
<h3 id="関数の基本概念">関数の基本概念</h3>
<p>関数は特定の処理をまとめたコードブロックで、プログラムの再利用性と保守性を向上させます。</p>
<h4 id="関数を使う理由">関数を使う理由</h4>
<ol type="1">
<li><strong>コードの再利用性</strong>:
同じ処理を何度も書く必要がない</li>
<li><strong>プログラムの構造化</strong>:
複雑な問題を小さな部分に分割</li>
<li><strong>保守性の向上</strong>: 修正が必要な箇所を特定しやすい</li>
<li><strong>可読性の向上</strong>: プログラムの意図が明確になる</li>
<li><strong>デバッグの容易さ</strong>: 問題のある部分を特定しやすい</li>
</ol>
<h4 id="関数の構成要素">関数の構成要素</h4>
<div class="sourceCode" id="cb180"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb180-1"><a href="#cb180-1" aria-hidden="true" tabindex="-1"></a>戻り値の型 関数名<span class="op">(</span>引数リスト<span class="op">)</span></span>
<span id="cb180-2"><a href="#cb180-2" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb180-3"><a href="#cb180-3" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 関数本体 */</span></span>
<span id="cb180-4"><a href="#cb180-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> 戻り値<span class="op">;</span>  <span class="co">/* 戻り値がある場合 */</span></span>
<span id="cb180-5"><a href="#cb180-5" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 id="基本的な関数の例">基本的な関数の例</h3>
<div class="sourceCode" id="cb181"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb181-1"><a href="#cb181-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb181-2"><a href="#cb181-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb181-3"><a href="#cb181-3" aria-hidden="true" tabindex="-1"></a><span class="co">/* 2つの数の合計を計算する関数 */</span></span>
<span id="cb181-4"><a href="#cb181-4" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> add<span class="op">(</span><span class="dt">int</span> a<span class="op">,</span> <span class="dt">int</span> b<span class="op">)</span></span>
<span id="cb181-5"><a href="#cb181-5" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb181-6"><a href="#cb181-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> result <span class="op">=</span> a <span class="op">+</span> b<span class="op">;</span></span>
<span id="cb181-7"><a href="#cb181-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> result<span class="op">;</span></span>
<span id="cb181-8"><a href="#cb181-8" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb181-9"><a href="#cb181-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb181-10"><a href="#cb181-10" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb181-11"><a href="#cb181-11" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb181-12"><a href="#cb181-12" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> num1 <span class="op">=</span> <span class="dv">10</span><span class="op">;</span></span>
<span id="cb181-13"><a href="#cb181-13" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> num2 <span class="op">=</span> <span class="dv">20</span><span class="op">;</span></span>
<span id="cb181-14"><a href="#cb181-14" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> sum<span class="op">;</span></span>
<span id="cb181-15"><a href="#cb181-15" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb181-16"><a href="#cb181-16" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 関数の呼び出し */</span></span>
<span id="cb181-17"><a href="#cb181-17" aria-hidden="true" tabindex="-1"></a>    sum <span class="op">=</span> add<span class="op">(</span>num1<span class="op">,</span> num2<span class="op">);</span></span>
<span id="cb181-18"><a href="#cb181-18" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb181-19"><a href="#cb181-19" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st"> + </span><span class="sc">%d</span><span class="st"> = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> num1<span class="op">,</span> num2<span class="op">,</span> sum<span class="op">);</span></span>
<span id="cb181-20"><a href="#cb181-20" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb181-21"><a href="#cb181-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb181-22"><a href="#cb181-22" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 id="関数の定義と宣言">関数の定義と宣言</h3>
<h4 id="関数プロトタイプ前方宣言">関数プロトタイプ（前方宣言）</h4>
<div class="sourceCode" id="cb182"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb182-1"><a href="#cb182-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb182-2"><a href="#cb182-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb182-3"><a href="#cb182-3" aria-hidden="true" tabindex="-1"></a><span class="co">/* 関数プロトタイプ */</span></span>
<span id="cb182-4"><a href="#cb182-4" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> multiply<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">);</span></span>
<span id="cb182-5"><a href="#cb182-5" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> print_result<span class="op">(</span><span class="dt">int</span> value<span class="op">);</span></span>
<span id="cb182-6"><a href="#cb182-6" aria-hidden="true" tabindex="-1"></a><span class="dt">double</span> calculate_average<span class="op">(</span><span class="dt">int</span> <span class="op">*</span>array<span class="op">,</span> <span class="dt">int</span> size<span class="op">);</span></span>
<span id="cb182-7"><a href="#cb182-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb182-8"><a href="#cb182-8" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb182-9"><a href="#cb182-9" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb182-10"><a href="#cb182-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> a <span class="op">=</span> <span class="dv">5</span><span class="op">,</span> b <span class="op">=</span> <span class="dv">3</span><span class="op">;</span></span>
<span id="cb182-11"><a href="#cb182-11" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> product<span class="op">;</span></span>
<span id="cb182-12"><a href="#cb182-12" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb182-13"><a href="#cb182-13" aria-hidden="true" tabindex="-1"></a>    product <span class="op">=</span> multiply<span class="op">(</span>a<span class="op">,</span> b<span class="op">);</span></span>
<span id="cb182-14"><a href="#cb182-14" aria-hidden="true" tabindex="-1"></a>    print_result<span class="op">(</span>product<span class="op">);</span></span>
<span id="cb182-15"><a href="#cb182-15" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb182-16"><a href="#cb182-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb182-17"><a href="#cb182-17" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb182-18"><a href="#cb182-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb182-19"><a href="#cb182-19" aria-hidden="true" tabindex="-1"></a><span class="co">/* 関数の実装 */</span></span>
<span id="cb182-20"><a href="#cb182-20" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> multiply<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">)</span></span>
<span id="cb182-21"><a href="#cb182-21" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb182-22"><a href="#cb182-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> x <span class="op">*</span> y<span class="op">;</span></span>
<span id="cb182-23"><a href="#cb182-23" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb182-24"><a href="#cb182-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb182-25"><a href="#cb182-25" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> print_result<span class="op">(</span><span class="dt">int</span> value<span class="op">)</span></span>
<span id="cb182-26"><a href="#cb182-26" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb182-27"><a href="#cb182-27" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;結果: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> value<span class="op">);</span></span>
<span id="cb182-28"><a href="#cb182-28" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb182-29"><a href="#cb182-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb182-30"><a href="#cb182-30" aria-hidden="true" tabindex="-1"></a><span class="dt">double</span> calculate_average<span class="op">(</span><span class="dt">int</span> <span class="op">*</span>array<span class="op">,</span> <span class="dt">int</span> size<span class="op">)</span></span>
<span id="cb182-31"><a href="#cb182-31" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb182-32"><a href="#cb182-32" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb182-33"><a href="#cb182-33" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> sum <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb182-34"><a href="#cb182-34" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb182-35"><a href="#cb182-35" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>size <span class="op">&lt;=</span> <span class="dv">0</span><span class="op">)</span></span>
<span id="cb182-36"><a href="#cb182-36" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb182-37"><a href="#cb182-37" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="fl">0.0</span><span class="op">;</span></span>
<span id="cb182-38"><a href="#cb182-38" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb182-39"><a href="#cb182-39" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb182-40"><a href="#cb182-40" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> size<span class="op">;</span> i<span class="op">++)</span></span>
<span id="cb182-41"><a href="#cb182-41" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb182-42"><a href="#cb182-42" aria-hidden="true" tabindex="-1"></a>        sum <span class="op">+=</span> array<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb182-43"><a href="#cb182-43" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb182-44"><a href="#cb182-44" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb182-45"><a href="#cb182-45" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">(</span><span class="dt">double</span><span class="op">)</span>sum <span class="op">/</span> size<span class="op">;</span></span>
<span id="cb182-46"><a href="#cb182-46" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 id="引数の渡し方">引数の渡し方</h3>
<h4 id="値渡しcall-by-value">値渡し（Call by Value）</h4>
<div class="sourceCode" id="cb183"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb183-1"><a href="#cb183-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* 値渡しの例 */</span></span>
<span id="cb183-2"><a href="#cb183-2" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> swap_wrong<span class="op">(</span><span class="dt">int</span> a<span class="op">,</span> <span class="dt">int</span> b<span class="op">)</span></span>
<span id="cb183-3"><a href="#cb183-3" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb183-4"><a href="#cb183-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> temp <span class="op">=</span> a<span class="op">;</span></span>
<span id="cb183-5"><a href="#cb183-5" aria-hidden="true" tabindex="-1"></a>    a <span class="op">=</span> b<span class="op">;</span></span>
<span id="cb183-6"><a href="#cb183-6" aria-hidden="true" tabindex="-1"></a>    b <span class="op">=</span> temp<span class="op">;</span></span>
<span id="cb183-7"><a href="#cb183-7" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 呼び出し元の変数は変更されない */</span></span>
<span id="cb183-8"><a href="#cb183-8" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb183-9"><a href="#cb183-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb183-10"><a href="#cb183-10" aria-hidden="true" tabindex="-1"></a><span class="co">/* ポインタを使った参照渡し */</span></span>
<span id="cb183-11"><a href="#cb183-11" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> swap_correct<span class="op">(</span><span class="dt">int</span> <span class="op">*</span>a<span class="op">,</span> <span class="dt">int</span> <span class="op">*</span>b<span class="op">)</span></span>
<span id="cb183-12"><a href="#cb183-12" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb183-13"><a href="#cb183-13" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> temp <span class="op">=</span> <span class="op">*</span>a<span class="op">;</span></span>
<span id="cb183-14"><a href="#cb183-14" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>a <span class="op">=</span> <span class="op">*</span>b<span class="op">;</span></span>
<span id="cb183-15"><a href="#cb183-15" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>b <span class="op">=</span> temp<span class="op">;</span></span>
<span id="cb183-16"><a href="#cb183-16" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 呼び出し元の変数が変更される */</span></span>
<span id="cb183-17"><a href="#cb183-17" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb183-18"><a href="#cb183-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb183-19"><a href="#cb183-19" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb183-20"><a href="#cb183-20" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb183-21"><a href="#cb183-21" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> x <span class="op">=</span> <span class="dv">10</span><span class="op">,</span> y <span class="op">=</span> <span class="dv">20</span><span class="op">;</span></span>
<span id="cb183-22"><a href="#cb183-22" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb183-23"><a href="#cb183-23" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;交換前: x = </span><span class="sc">%d</span><span class="st">, y = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> x<span class="op">,</span> y<span class="op">);</span></span>
<span id="cb183-24"><a href="#cb183-24" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb183-25"><a href="#cb183-25" aria-hidden="true" tabindex="-1"></a>    swap_wrong<span class="op">(</span>x<span class="op">,</span> y<span class="op">);</span></span>
<span id="cb183-26"><a href="#cb183-26" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;値渡し後: x = </span><span class="sc">%d</span><span class="st">, y = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> x<span class="op">,</span> y<span class="op">);</span></span>
<span id="cb183-27"><a href="#cb183-27" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb183-28"><a href="#cb183-28" aria-hidden="true" tabindex="-1"></a>    swap_correct<span class="op">(&amp;</span>x<span class="op">,</span> <span class="op">&amp;</span>y<span class="op">);</span></span>
<span id="cb183-29"><a href="#cb183-29" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ポインタ渡し後: x = </span><span class="sc">%d</span><span class="st">, y = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> x<span class="op">,</span> y<span class="op">);</span></span>
<span id="cb183-30"><a href="#cb183-30" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb183-31"><a href="#cb183-31" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb183-32"><a href="#cb183-32" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 id="様々な関数の種類">様々な関数の種類</h3>
<h4 id="戻り値のない関数void関数">戻り値のない関数（void関数）</h4>
<div class="sourceCode" id="cb184"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb184-1"><a href="#cb184-1" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> print_header<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb184-2"><a href="#cb184-2" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb184-3"><a href="#cb184-3" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;====================</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb184-4"><a href="#cb184-4" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot; プログラム開始</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb184-5"><a href="#cb184-5" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;====================</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb184-6"><a href="#cb184-6" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb184-7"><a href="#cb184-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb184-8"><a href="#cb184-8" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> greet_user<span class="op">(</span><span class="dt">char</span> <span class="op">*</span>name<span class="op">)</span></span>
<span id="cb184-9"><a href="#cb184-9" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb184-10"><a href="#cb184-10" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;こんにちは、</span><span class="sc">%s</span><span class="st">さん！</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> name<span class="op">);</span></span>
<span id="cb184-11"><a href="#cb184-11" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h4 id="配列を扱う関数">配列を扱う関数</h4>
<div class="sourceCode" id="cb185"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb185-1"><a href="#cb185-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* 配列の要素数を計算できないため、サイズを別途渡す必要がある */</span></span>
<span id="cb185-2"><a href="#cb185-2" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> array_sum<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> size<span class="op">)</span></span>
<span id="cb185-3"><a href="#cb185-3" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb185-4"><a href="#cb185-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">,</span> sum <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb185-5"><a href="#cb185-5" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb185-6"><a href="#cb185-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> size<span class="op">;</span> i<span class="op">++)</span></span>
<span id="cb185-7"><a href="#cb185-7" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb185-8"><a href="#cb185-8" aria-hidden="true" tabindex="-1"></a>        sum <span class="op">+=</span> arr<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb185-9"><a href="#cb185-9" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb185-10"><a href="#cb185-10" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb185-11"><a href="#cb185-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> sum<span class="op">;</span></span>
<span id="cb185-12"><a href="#cb185-12" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb185-13"><a href="#cb185-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb185-14"><a href="#cb185-14" aria-hidden="true" tabindex="-1"></a><span class="co">/* 配列を初期化する関数 */</span></span>
<span id="cb185-15"><a href="#cb185-15" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> initialize_array<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> size<span class="op">,</span> <span class="dt">int</span> value<span class="op">)</span></span>
<span id="cb185-16"><a href="#cb185-16" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb185-17"><a href="#cb185-17" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb185-18"><a href="#cb185-18" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb185-19"><a href="#cb185-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> size<span class="op">;</span> i<span class="op">++)</span></span>
<span id="cb185-20"><a href="#cb185-20" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb185-21"><a href="#cb185-21" aria-hidden="true" tabindex="-1"></a>        arr<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> value<span class="op">;</span></span>
<span id="cb185-22"><a href="#cb185-22" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb185-23"><a href="#cb185-23" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 id="再帰関数">再帰関数</h3>
<p>再帰関数は自分自身を呼び出す関数です。</p>
<div class="sourceCode" id="cb186"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb186-1"><a href="#cb186-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* 階乗を計算する再帰関数 */</span></span>
<span id="cb186-2"><a href="#cb186-2" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> factorial<span class="op">(</span><span class="dt">int</span> n<span class="op">)</span></span>
<span id="cb186-3"><a href="#cb186-3" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb186-4"><a href="#cb186-4" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 基底条件 */</span></span>
<span id="cb186-5"><a href="#cb186-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>n <span class="op">&lt;=</span> <span class="dv">1</span><span class="op">)</span></span>
<span id="cb186-6"><a href="#cb186-6" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb186-7"><a href="#cb186-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb186-8"><a href="#cb186-8" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb186-9"><a href="#cb186-9" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb186-10"><a href="#cb186-10" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 再帰呼び出し */</span></span>
<span id="cb186-11"><a href="#cb186-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> n <span class="op">*</span> factorial<span class="op">(</span>n <span class="op">-</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb186-12"><a href="#cb186-12" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb186-13"><a href="#cb186-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb186-14"><a href="#cb186-14" aria-hidden="true" tabindex="-1"></a><span class="co">/* フィボナッチ数列を計算する再帰関数 */</span></span>
<span id="cb186-15"><a href="#cb186-15" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> fibonacci<span class="op">(</span><span class="dt">int</span> n<span class="op">)</span></span>
<span id="cb186-16"><a href="#cb186-16" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb186-17"><a href="#cb186-17" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 基底条件 */</span></span>
<span id="cb186-18"><a href="#cb186-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>n <span class="op">&lt;=</span> <span class="dv">1</span><span class="op">)</span></span>
<span id="cb186-19"><a href="#cb186-19" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb186-20"><a href="#cb186-20" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> n<span class="op">;</span></span>
<span id="cb186-21"><a href="#cb186-21" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb186-22"><a href="#cb186-22" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb186-23"><a href="#cb186-23" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 再帰呼び出し */</span></span>
<span id="cb186-24"><a href="#cb186-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> fibonacci<span class="op">(</span>n <span class="op">-</span> <span class="dv">1</span><span class="op">)</span> <span class="op">+</span> fibonacci<span class="op">(</span>n <span class="op">-</span> <span class="dv">2</span><span class="op">);</span></span>
<span id="cb186-25"><a href="#cb186-25" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 id="関数のスコープと生存期間">関数のスコープと生存期間</h3>
<h4 id="ローカル変数とグローバル変数">ローカル変数とグローバル変数</h4>
<div class="sourceCode" id="cb187"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb187-1"><a href="#cb187-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb187-2"><a href="#cb187-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb187-3"><a href="#cb187-3" aria-hidden="true" tabindex="-1"></a><span class="co">/* グローバル変数 */</span></span>
<span id="cb187-4"><a href="#cb187-4" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> global_count <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb187-5"><a href="#cb187-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb187-6"><a href="#cb187-6" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> increment_global<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb187-7"><a href="#cb187-7" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb187-8"><a href="#cb187-8" aria-hidden="true" tabindex="-1"></a>    global_count<span class="op">++;</span>  <span class="co">/* グローバル変数にアクセス */</span></span>
<span id="cb187-9"><a href="#cb187-9" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb187-10"><a href="#cb187-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb187-11"><a href="#cb187-11" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> local_example<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb187-12"><a href="#cb187-12" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb187-13"><a href="#cb187-13" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> local_var <span class="op">=</span> <span class="dv">10</span><span class="op">;</span>  <span class="co">/* ローカル変数 */</span></span>
<span id="cb187-14"><a href="#cb187-14" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb187-15"><a href="#cb187-15" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ローカル変数: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> local_var<span class="op">);</span></span>
<span id="cb187-16"><a href="#cb187-16" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 関数を抜けるとlocal_varは消滅 */</span></span>
<span id="cb187-17"><a href="#cb187-17" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb187-18"><a href="#cb187-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb187-19"><a href="#cb187-19" aria-hidden="true" tabindex="-1"></a><span class="co">/* static変数の例 */</span></span>
<span id="cb187-20"><a href="#cb187-20" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> counter<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb187-21"><a href="#cb187-21" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb187-22"><a href="#cb187-22" aria-hidden="true" tabindex="-1"></a>    <span class="dt">static</span> <span class="dt">int</span> count <span class="op">=</span> <span class="dv">0</span><span class="op">;</span>  <span class="co">/* static変数は値を保持 */</span></span>
<span id="cb187-23"><a href="#cb187-23" aria-hidden="true" tabindex="-1"></a>    count<span class="op">++;</span></span>
<span id="cb187-24"><a href="#cb187-24" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;呼び出し回数: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> count<span class="op">);</span></span>
<span id="cb187-25"><a href="#cb187-25" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb187-26"><a href="#cb187-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb187-27"><a href="#cb187-27" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb187-28"><a href="#cb187-28" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb187-29"><a href="#cb187-29" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb187-30"><a href="#cb187-30" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb187-31"><a href="#cb187-31" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* staticの効果を確認 */</span></span>
<span id="cb187-32"><a href="#cb187-32" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">3</span><span class="op">;</span> i<span class="op">++)</span></span>
<span id="cb187-33"><a href="#cb187-33" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb187-34"><a href="#cb187-34" aria-hidden="true" tabindex="-1"></a>        counter<span class="op">();</span></span>
<span id="cb187-35"><a href="#cb187-35" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb187-36"><a href="#cb187-36" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb187-37"><a href="#cb187-37" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb187-38"><a href="#cb187-38" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 id="関数ポインタの基礎">関数ポインタの基礎</h3>
<p>関数へのポインタを使うことで、関数を変数のように扱えます。</p>
<div class="sourceCode" id="cb188"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb188-1"><a href="#cb188-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb188-2"><a href="#cb188-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb188-3"><a href="#cb188-3" aria-hidden="true" tabindex="-1"></a><span class="co">/* 計算用の関数 */</span></span>
<span id="cb188-4"><a href="#cb188-4" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> add<span class="op">(</span><span class="dt">int</span> a<span class="op">,</span> <span class="dt">int</span> b<span class="op">)</span> <span class="op">{</span> <span class="cf">return</span> a <span class="op">+</span> b<span class="op">;</span> <span class="op">}</span></span>
<span id="cb188-5"><a href="#cb188-5" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> subtract<span class="op">(</span><span class="dt">int</span> a<span class="op">,</span> <span class="dt">int</span> b<span class="op">)</span> <span class="op">{</span> <span class="cf">return</span> a <span class="op">-</span> b<span class="op">;</span> <span class="op">}</span></span>
<span id="cb188-6"><a href="#cb188-6" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> multiply<span class="op">(</span><span class="dt">int</span> a<span class="op">,</span> <span class="dt">int</span> b<span class="op">)</span> <span class="op">{</span> <span class="cf">return</span> a <span class="op">*</span> b<span class="op">;</span> <span class="op">}</span></span>
<span id="cb188-7"><a href="#cb188-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb188-8"><a href="#cb188-8" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb188-9"><a href="#cb188-9" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb188-10"><a href="#cb188-10" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 関数ポインタの宣言 */</span></span>
<span id="cb188-11"><a href="#cb188-11" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> <span class="op">(*</span>operation<span class="op">)(</span><span class="dt">int</span><span class="op">,</span> <span class="dt">int</span><span class="op">);</span></span>
<span id="cb188-12"><a href="#cb188-12" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> x <span class="op">=</span> <span class="dv">10</span><span class="op">,</span> y <span class="op">=</span> <span class="dv">5</span><span class="op">;</span></span>
<span id="cb188-13"><a href="#cb188-13" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb188-14"><a href="#cb188-14" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 関数ポインタに関数を代入 */</span></span>
<span id="cb188-15"><a href="#cb188-15" aria-hidden="true" tabindex="-1"></a>    operation <span class="op">=</span> add<span class="op">;</span></span>
<span id="cb188-16"><a href="#cb188-16" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st"> + </span><span class="sc">%d</span><span class="st"> = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> x<span class="op">,</span> y<span class="op">,</span> operation<span class="op">(</span>x<span class="op">,</span> y<span class="op">));</span></span>
<span id="cb188-17"><a href="#cb188-17" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb188-18"><a href="#cb188-18" aria-hidden="true" tabindex="-1"></a>    operation <span class="op">=</span> subtract<span class="op">;</span></span>
<span id="cb188-19"><a href="#cb188-19" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st"> - </span><span class="sc">%d</span><span class="st"> = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> x<span class="op">,</span> y<span class="op">,</span> operation<span class="op">(</span>x<span class="op">,</span> y<span class="op">));</span></span>
<span id="cb188-20"><a href="#cb188-20" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb188-21"><a href="#cb188-21" aria-hidden="true" tabindex="-1"></a>    operation <span class="op">=</span> multiply<span class="op">;</span></span>
<span id="cb188-22"><a href="#cb188-22" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st"> * </span><span class="sc">%d</span><span class="st"> = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> x<span class="op">,</span> y<span class="op">,</span> operation<span class="op">(</span>x<span class="op">,</span> y<span class="op">));</span></span>
<span id="cb188-23"><a href="#cb188-23" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb188-24"><a href="#cb188-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb188-25"><a href="#cb188-25" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h2 id="実例コード">実例コード</h2>
<p>完全な実装例は以下のファイルを参照してください：</p>
<h3 id="基本的な関数の使い方">基本的な関数の使い方</h3>
<ul>
<li><a href="examples/function_basics.c">function_basics.c</a> -
C90準拠版</li>
<li><a href="examples/function_basics_c99.c">function_basics_c99.c</a> -
C99準拠版</li>
</ul>
<h3 id="高度な関数の使い方">高度な関数の使い方</h3>
<ul>
<li><a href="examples/advanced_functions.c">advanced_functions.c</a> -
C90準拠版</li>
<li><a
href="examples/advanced_functions_c99.c">advanced_functions_c99.c</a> -
C99準拠版</li>
</ul>
<h2 id="コンパイルと実行-7">コンパイルと実行</h2>
<div class="sourceCode" id="cb189"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb189-1"><a href="#cb189-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 基本的な関数の例をコンパイル</span></span>
<span id="cb189-2"><a href="#cb189-2" aria-hidden="true" tabindex="-1"></a><span class="fu">gcc</span> <span class="at">-Wall</span> <span class="at">-Wextra</span> <span class="at">-pedantic</span> <span class="at">-std</span><span class="op">=</span>c90 examples/function_basics.c <span class="at">-o</span> function_basics</span>
<span id="cb189-3"><a href="#cb189-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb189-4"><a href="#cb189-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 実行</span></span>
<span id="cb189-5"><a href="#cb189-5" aria-hidden="true" tabindex="-1"></a><span class="ex">./function_basics</span></span>
<span id="cb189-6"><a href="#cb189-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb189-7"><a href="#cb189-7" aria-hidden="true" tabindex="-1"></a><span class="co"># C99版をコンパイル</span></span>
<span id="cb189-8"><a href="#cb189-8" aria-hidden="true" tabindex="-1"></a><span class="fu">gcc</span> <span class="at">-Wall</span> <span class="at">-Wextra</span> <span class="at">-pedantic</span> <span class="at">-std</span><span class="op">=</span>c99 examples/function_basics_c99.c <span class="at">-o</span> function_basics_c99</span>
<span id="cb189-9"><a href="#cb189-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb189-10"><a href="#cb189-10" aria-hidden="true" tabindex="-1"></a><span class="co"># 数学関数を使う場合は-lmを追加</span></span>
<span id="cb189-11"><a href="#cb189-11" aria-hidden="true" tabindex="-1"></a><span class="fu">gcc</span> <span class="at">-Wall</span> <span class="at">-Wextra</span> <span class="at">-pedantic</span> examples/advanced_functions.c <span class="at">-lm</span> <span class="at">-o</span> advanced_functions</span></code></pre></div>
<h2 id="演習問題">演習問題</h2>
<p>この章の演習問題は<a
href="exercises/README.md">exercises/README.md</a>にあります。</p>
<h2 id="注意事項">注意事項</h2>
<ol type="1">
<li><strong>関数プロトタイプ</strong>:
main関数より後に定義する関数は、必ずプロトタイプ宣言が必要</li>
<li><strong>配列の扱い</strong>:
配列を関数に渡すときは、サイズ情報も一緒に渡す</li>
<li><strong>再帰の深さ</strong>:
再帰関数は深くなりすぎるとスタックオーバーフローを起こす</li>
<li><strong>グローバル変数</strong>:
できるだけ使用を避け、必要な場合は慎重に使用する</li>
<li><strong>static変数</strong>:
関数内でstatic変数を使うと、値が保持される</li>
</ol>
<h2 id="次のステップ">次のステップ</h2>
<p>関数の基本を理解したら、以下のトピックに進みましょう：</p>
<ol type="1">
<li>より複雑な関数の設計パターン</li>
<li>関数ポインタと高階関数</li>
<li>可変長引数関数（stdarg.h）</li>
<li>インライン関数（C99以降）</li>
<li>ライブラリ関数の作成 ## サンプルコード</li>
</ol>
<h3 id="advanced_functions.c">advanced_functions.c</h3>
<div class="sourceCode" id="cb190"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb190-1"><a href="#cb190-1" aria-hidden="true" tabindex="-1"></a><span class="co">/*</span></span>
<span id="cb190-2"><a href="#cb190-2" aria-hidden="true" tabindex="-1"></a><span class="co"> * 高度な関数の使い方</span></span>
<span id="cb190-3"><a href="#cb190-3" aria-hidden="true" tabindex="-1"></a><span class="co"> * </span></span>
<span id="cb190-4"><a href="#cb190-4" aria-hidden="true" tabindex="-1"></a><span class="co"> * このプログラムは、再帰関数、ローカル変数とグローバル変数、</span></span>
<span id="cb190-5"><a href="#cb190-5" aria-hidden="true" tabindex="-1"></a><span class="co"> * 配列を引数に取る関数の使い方を示します。</span></span>
<span id="cb190-6"><a href="#cb190-6" aria-hidden="true" tabindex="-1"></a><span class="co"> */</span></span>
<span id="cb190-7"><a href="#cb190-7" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb190-8"><a href="#cb190-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb190-9"><a href="#cb190-9" aria-hidden="true" tabindex="-1"></a><span class="co">/* グローバル変数 */</span></span>
<span id="cb190-10"><a href="#cb190-10" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> global_counter <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb190-11"><a href="#cb190-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb190-12"><a href="#cb190-12" aria-hidden="true" tabindex="-1"></a><span class="co">/* 関数プロトタイプ */</span></span>
<span id="cb190-13"><a href="#cb190-13" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> factorial<span class="op">(</span><span class="dt">int</span> n<span class="op">);</span></span>
<span id="cb190-14"><a href="#cb190-14" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> fibonacci<span class="op">(</span><span class="dt">int</span> n<span class="op">);</span></span>
<span id="cb190-15"><a href="#cb190-15" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> display_array<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> size<span class="op">);</span></span>
<span id="cb190-16"><a href="#cb190-16" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> sum_array<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> size<span class="op">);</span></span>
<span id="cb190-17"><a href="#cb190-17" aria-hidden="true" tabindex="-1"></a><span class="dt">double</span> average_array<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> size<span class="op">);</span></span>
<span id="cb190-18"><a href="#cb190-18" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> increment_counter<span class="op">(</span><span class="dt">void</span><span class="op">);</span></span>
<span id="cb190-19"><a href="#cb190-19" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> local_vs_global_demo<span class="op">(</span><span class="dt">int</span> param<span class="op">);</span></span>
<span id="cb190-20"><a href="#cb190-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb190-21"><a href="#cb190-21" aria-hidden="true" tabindex="-1"></a><span class="co">/* 階乗を計算する再帰関数 */</span></span>
<span id="cb190-22"><a href="#cb190-22" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> factorial<span class="op">(</span><span class="dt">int</span> n<span class="op">)</span></span>
<span id="cb190-23"><a href="#cb190-23" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb190-24"><a href="#cb190-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>n <span class="op">&lt;=</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb190-25"><a href="#cb190-25" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="dv">1</span><span class="op">;</span>  <span class="co">/* 基底条件 */</span></span>
<span id="cb190-26"><a href="#cb190-26" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb190-27"><a href="#cb190-27" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> n <span class="op">*</span> factorial<span class="op">(</span>n <span class="op">-</span> <span class="dv">1</span><span class="op">);</span>  <span class="co">/* 再帰呼び出し */</span></span>
<span id="cb190-28"><a href="#cb190-28" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb190-29"><a href="#cb190-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb190-30"><a href="#cb190-30" aria-hidden="true" tabindex="-1"></a><span class="co">/* フィボナッチ数列を計算する再帰関数 */</span></span>
<span id="cb190-31"><a href="#cb190-31" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> fibonacci<span class="op">(</span><span class="dt">int</span> n<span class="op">)</span></span>
<span id="cb190-32"><a href="#cb190-32" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb190-33"><a href="#cb190-33" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>n <span class="op">&lt;=</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb190-34"><a href="#cb190-34" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb190-35"><a href="#cb190-35" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb190-36"><a href="#cb190-36" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>n <span class="op">==</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb190-37"><a href="#cb190-37" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb190-38"><a href="#cb190-38" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb190-39"><a href="#cb190-39" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> fibonacci<span class="op">(</span>n <span class="op">-</span> <span class="dv">1</span><span class="op">)</span> <span class="op">+</span> fibonacci<span class="op">(</span>n <span class="op">-</span> <span class="dv">2</span><span class="op">);</span></span>
<span id="cb190-40"><a href="#cb190-40" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb190-41"><a href="#cb190-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb190-42"><a href="#cb190-42" aria-hidden="true" tabindex="-1"></a><span class="co">/* 配列を表示する関数 */</span></span>
<span id="cb190-43"><a href="#cb190-43" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> display_array<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> size<span class="op">)</span></span>
<span id="cb190-44"><a href="#cb190-44" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb190-45"><a href="#cb190-45" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb190-46"><a href="#cb190-46" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;配列の内容: &quot;</span><span class="op">);</span></span>
<span id="cb190-47"><a href="#cb190-47" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> size<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb190-48"><a href="#cb190-48" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st"> &quot;</span><span class="op">,</span> arr<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb190-49"><a href="#cb190-49" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb190-50"><a href="#cb190-50" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb190-51"><a href="#cb190-51" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb190-52"><a href="#cb190-52" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb190-53"><a href="#cb190-53" aria-hidden="true" tabindex="-1"></a><span class="co">/* 配列の合計を計算する関数 */</span></span>
<span id="cb190-54"><a href="#cb190-54" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> sum_array<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> size<span class="op">)</span></span>
<span id="cb190-55"><a href="#cb190-55" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb190-56"><a href="#cb190-56" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> sum <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb190-57"><a href="#cb190-57" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb190-58"><a href="#cb190-58" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb190-59"><a href="#cb190-59" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> size<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb190-60"><a href="#cb190-60" aria-hidden="true" tabindex="-1"></a>        sum <span class="op">+=</span> arr<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb190-61"><a href="#cb190-61" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb190-62"><a href="#cb190-62" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> sum<span class="op">;</span></span>
<span id="cb190-63"><a href="#cb190-63" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb190-64"><a href="#cb190-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb190-65"><a href="#cb190-65" aria-hidden="true" tabindex="-1"></a><span class="co">/* 配列の平均を計算する関数 */</span></span>
<span id="cb190-66"><a href="#cb190-66" aria-hidden="true" tabindex="-1"></a><span class="dt">double</span> average_array<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> size<span class="op">)</span></span>
<span id="cb190-67"><a href="#cb190-67" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb190-68"><a href="#cb190-68" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>size <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb190-69"><a href="#cb190-69" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="fl">0.0</span><span class="op">;</span></span>
<span id="cb190-70"><a href="#cb190-70" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb190-71"><a href="#cb190-71" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">(</span><span class="dt">double</span><span class="op">)</span>sum_array<span class="op">(</span>arr<span class="op">,</span> size<span class="op">)</span> <span class="op">/</span> size<span class="op">;</span></span>
<span id="cb190-72"><a href="#cb190-72" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb190-73"><a href="#cb190-73" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb190-74"><a href="#cb190-74" aria-hidden="true" tabindex="-1"></a><span class="co">/* グローバル変数を操作する関数 */</span></span>
<span id="cb190-75"><a href="#cb190-75" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> increment_counter<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb190-76"><a href="#cb190-76" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb190-77"><a href="#cb190-77" aria-hidden="true" tabindex="-1"></a>    global_counter<span class="op">++;</span></span>
<span id="cb190-78"><a href="#cb190-78" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;グローバルカウンター: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> global_counter<span class="op">);</span></span>
<span id="cb190-79"><a href="#cb190-79" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb190-80"><a href="#cb190-80" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb190-81"><a href="#cb190-81" aria-hidden="true" tabindex="-1"></a><span class="co">/* ローカル変数とグローバル変数のデモ */</span></span>
<span id="cb190-82"><a href="#cb190-82" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> local_vs_global_demo<span class="op">(</span><span class="dt">int</span> param<span class="op">)</span></span>
<span id="cb190-83"><a href="#cb190-83" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb190-84"><a href="#cb190-84" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> local_var <span class="op">=</span> <span class="dv">10</span><span class="op">;</span>  <span class="co">/* ローカル変数 */</span></span>
<span id="cb190-85"><a href="#cb190-85" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb190-86"><a href="#cb190-86" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;  関数内 - ローカル変数: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> local_var<span class="op">);</span></span>
<span id="cb190-87"><a href="#cb190-87" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;  関数内 - グローバル変数: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> global_counter<span class="op">);</span></span>
<span id="cb190-88"><a href="#cb190-88" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;  関数内 - 引数: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> param<span class="op">);</span></span>
<span id="cb190-89"><a href="#cb190-89" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb190-90"><a href="#cb190-90" aria-hidden="true" tabindex="-1"></a>    local_var <span class="op">+=</span> param<span class="op">;</span></span>
<span id="cb190-91"><a href="#cb190-91" aria-hidden="true" tabindex="-1"></a>    global_counter <span class="op">+=</span> param<span class="op">;</span></span>
<span id="cb190-92"><a href="#cb190-92" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb190-93"><a href="#cb190-93" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> local_var<span class="op">;</span></span>
<span id="cb190-94"><a href="#cb190-94" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb190-95"><a href="#cb190-95" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb190-96"><a href="#cb190-96" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb190-97"><a href="#cb190-97" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb190-98"><a href="#cb190-98" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb190-99"><a href="#cb190-99" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb190-100"><a href="#cb190-100" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== 高度な関数の使用例 ===</span><span class="sc">\n\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb190-101"><a href="#cb190-101" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb190-102"><a href="#cb190-102" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 1. 再帰関数（階乗） */</span></span>
<span id="cb190-103"><a href="#cb190-103" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== 再帰関数: 階乗 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb190-104"><a href="#cb190-104" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;=</span> <span class="dv">7</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb190-105"><a href="#cb190-105" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st">! = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> i<span class="op">,</span> factorial<span class="op">(</span>i<span class="op">));</span></span>
<span id="cb190-106"><a href="#cb190-106" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb190-107"><a href="#cb190-107" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb190-108"><a href="#cb190-108" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb190-109"><a href="#cb190-109" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 2. 再帰関数（フィボナッチ数列） */</span></span>
<span id="cb190-110"><a href="#cb190-110" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== 再帰関数: フィボナッチ数列 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb190-111"><a href="#cb190-111" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;最初の10個のフィボナッチ数: &quot;</span><span class="op">);</span></span>
<span id="cb190-112"><a href="#cb190-112" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">10</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb190-113"><a href="#cb190-113" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st"> &quot;</span><span class="op">,</span> fibonacci<span class="op">(</span>i<span class="op">));</span></span>
<span id="cb190-114"><a href="#cb190-114" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb190-115"><a href="#cb190-115" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb190-116"><a href="#cb190-116" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb190-117"><a href="#cb190-117" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 3. 配列を引数に取る関数 */</span></span>
<span id="cb190-118"><a href="#cb190-118" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== 配列を引数に取る関数 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb190-119"><a href="#cb190-119" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> numbers<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">5</span><span class="op">,</span> <span class="dv">12</span><span class="op">,</span> <span class="dv">8</span><span class="op">,</span> <span class="dv">23</span><span class="op">,</span> <span class="dv">16</span><span class="op">,</span> <span class="dv">9</span><span class="op">,</span> <span class="dv">14</span><span class="op">,</span> <span class="dv">7</span><span class="op">};</span></span>
<span id="cb190-120"><a href="#cb190-120" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> size <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>numbers<span class="op">)</span> <span class="op">/</span> <span class="kw">sizeof</span><span class="op">(</span>numbers<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb190-121"><a href="#cb190-121" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb190-122"><a href="#cb190-122" aria-hidden="true" tabindex="-1"></a>    display_array<span class="op">(</span>numbers<span class="op">,</span> size<span class="op">);</span></span>
<span id="cb190-123"><a href="#cb190-123" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;合計: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> sum_array<span class="op">(</span>numbers<span class="op">,</span> size<span class="op">));</span></span>
<span id="cb190-124"><a href="#cb190-124" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;平均: </span><span class="sc">%.2f\n</span><span class="st">&quot;</span><span class="op">,</span> average_array<span class="op">(</span>numbers<span class="op">,</span> size<span class="op">));</span></span>
<span id="cb190-125"><a href="#cb190-125" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb190-126"><a href="#cb190-126" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb190-127"><a href="#cb190-127" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 4. ローカル変数とグローバル変数 */</span></span>
<span id="cb190-128"><a href="#cb190-128" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== ローカル変数とグローバル変数 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb190-129"><a href="#cb190-129" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;初期状態のグローバル変数: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> global_counter<span class="op">);</span></span>
<span id="cb190-130"><a href="#cb190-130" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb190-131"><a href="#cb190-131" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">1回目の関数呼び出し:</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb190-132"><a href="#cb190-132" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> result1 <span class="op">=</span> local_vs_global_demo<span class="op">(</span><span class="dv">5</span><span class="op">);</span></span>
<span id="cb190-133"><a href="#cb190-133" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;  戻り値: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> result1<span class="op">);</span></span>
<span id="cb190-134"><a href="#cb190-134" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb190-135"><a href="#cb190-135" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">2回目の関数呼び出し:</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb190-136"><a href="#cb190-136" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> result2 <span class="op">=</span> local_vs_global_demo<span class="op">(</span><span class="dv">3</span><span class="op">);</span></span>
<span id="cb190-137"><a href="#cb190-137" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;  戻り値: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> result2<span class="op">);</span></span>
<span id="cb190-138"><a href="#cb190-138" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb190-139"><a href="#cb190-139" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">最終的なグローバル変数: </span><span class="sc">%d\n\n</span><span class="st">&quot;</span><span class="op">,</span> global_counter<span class="op">);</span></span>
<span id="cb190-140"><a href="#cb190-140" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb190-141"><a href="#cb190-141" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 5. グローバル変数を操作する関数 */</span></span>
<span id="cb190-142"><a href="#cb190-142" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== グローバル変数の操作 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb190-143"><a href="#cb190-143" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">5</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb190-144"><a href="#cb190-144" aria-hidden="true" tabindex="-1"></a>        increment_counter<span class="op">();</span></span>
<span id="cb190-145"><a href="#cb190-145" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb190-146"><a href="#cb190-146" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb190-147"><a href="#cb190-147" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb190-148"><a href="#cb190-148" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 6. 関数の組み合わせ使用 */</span></span>
<span id="cb190-149"><a href="#cb190-149" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== 関数の組み合わせ使用 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb190-150"><a href="#cb190-150" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb190-151"><a href="#cb190-151" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 配列の各要素の階乗を計算 */</span></span>
<span id="cb190-152"><a href="#cb190-152" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> sumall_numbers<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">5</span><span class="op">};</span></span>
<span id="cb190-153"><a href="#cb190-153" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> sumall_size <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>sumall_numbers<span class="op">)</span> <span class="op">/</span> <span class="kw">sizeof</span><span class="op">(</span>sumall_numbers<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb190-154"><a href="#cb190-154" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb190-155"><a href="#cb190-155" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;元の配列: &quot;</span><span class="op">);</span></span>
<span id="cb190-156"><a href="#cb190-156" aria-hidden="true" tabindex="-1"></a>    display_array<span class="op">(</span>sumall_numbers<span class="op">,</span> sumall_size<span class="op">);</span></span>
<span id="cb190-157"><a href="#cb190-157" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb190-158"><a href="#cb190-158" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;各要素の階乗:</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb190-159"><a href="#cb190-159" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> sumall_size<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb190-160"><a href="#cb190-160" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st">! = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> sumall_numbers<span class="op">[</span>i<span class="op">],</span> factorial<span class="op">(</span>sumall_numbers<span class="op">[</span>i<span class="op">]));</span></span>
<span id="cb190-161"><a href="#cb190-161" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb190-162"><a href="#cb190-162" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb190-163"><a href="#cb190-163" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb190-164"><a href="#cb190-164" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 7. 再帰の深さの制限例 */</span></span>
<span id="cb190-165"><a href="#cb190-165" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== 再帰の制限例 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb190-166"><a href="#cb190-166" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;大きな数での階乗計算:</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb190-167"><a href="#cb190-167" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">10</span><span class="op">;</span> i <span class="op">&lt;=</span> <span class="dv">12</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb190-168"><a href="#cb190-168" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st">! = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> i<span class="op">,</span> factorial<span class="op">(</span>i<span class="op">));</span></span>
<span id="cb190-169"><a href="#cb190-169" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb190-170"><a href="#cb190-170" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;注意: 大きな数では整数オーバーフローが発生する可能性があります</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb190-171"><a href="#cb190-171" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb190-172"><a href="#cb190-172" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb190-173"><a href="#cb190-173" aria-hidden="true" tabindex="-1"></a><span class="op">}</span>```</span>
<span id="cb190-174"><a href="#cb190-174" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb190-175"><a href="#cb190-175" aria-hidden="true" tabindex="-1"></a><span class="op">&gt;</span> C99版は<span class="op">[</span>こちら<span class="op">](</span>advanced_functions_c99<span class="op">.</span>c<span class="op">)</span>を参照してください。</span>
<span id="cb190-176"><a href="#cb190-176" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb190-177"><a href="#cb190-177" aria-hidden="true" tabindex="-1"></a><span class="pp">#</span><span class="er">## function_basics.c</span></span>
<span id="cb190-178"><a href="#cb190-178" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb190-179"><a href="#cb190-179" aria-hidden="true" tabindex="-1"></a>```c</span>
<span id="cb190-180"><a href="#cb190-180" aria-hidden="true" tabindex="-1"></a><span class="co">/*</span></span>
<span id="cb190-181"><a href="#cb190-181" aria-hidden="true" tabindex="-1"></a><span class="co"> * 関数の基本的な使い方</span></span>
<span id="cb190-182"><a href="#cb190-182" aria-hidden="true" tabindex="-1"></a><span class="co"> * </span></span>
<span id="cb190-183"><a href="#cb190-183" aria-hidden="true" tabindex="-1"></a><span class="co"> * このプログラムは、関数の定義、呼び出し、</span></span>
<span id="cb190-184"><a href="#cb190-184" aria-hidden="true" tabindex="-1"></a><span class="co"> * 引数と戻り値の基本的な使い方を示します。</span></span>
<span id="cb190-185"><a href="#cb190-185" aria-hidden="true" tabindex="-1"></a><span class="co"> */</span></span>
<span id="cb190-186"><a href="#cb190-186" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb190-187"><a href="#cb190-187" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb190-188"><a href="#cb190-188" aria-hidden="true" tabindex="-1"></a><span class="co">/* 関数プロトタイプ宣言 */</span></span>
<span id="cb190-189"><a href="#cb190-189" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> add<span class="op">(</span><span class="dt">int</span> a<span class="op">,</span> <span class="dt">int</span> b<span class="op">);</span></span>
<span id="cb190-190"><a href="#cb190-190" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> subtract<span class="op">(</span><span class="dt">int</span> a<span class="op">,</span> <span class="dt">int</span> b<span class="op">);</span></span>
<span id="cb190-191"><a href="#cb190-191" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> multiply<span class="op">(</span><span class="dt">int</span> a<span class="op">,</span> <span class="dt">int</span> b<span class="op">);</span></span>
<span id="cb190-192"><a href="#cb190-192" aria-hidden="true" tabindex="-1"></a><span class="dt">double</span> divide<span class="op">(</span><span class="dt">int</span> a<span class="op">,</span> <span class="dt">int</span> b<span class="op">);</span></span>
<span id="cb190-193"><a href="#cb190-193" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> print_message<span class="op">(</span><span class="dt">void</span><span class="op">);</span></span>
<span id="cb190-194"><a href="#cb190-194" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> print_number<span class="op">(</span><span class="dt">int</span> num<span class="op">);</span></span>
<span id="cb190-195"><a href="#cb190-195" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> square<span class="op">(</span><span class="dt">int</span> n<span class="op">);</span></span>
<span id="cb190-196"><a href="#cb190-196" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> max<span class="op">(</span><span class="dt">int</span> a<span class="op">,</span> <span class="dt">int</span> b<span class="op">);</span></span>
<span id="cb190-197"><a href="#cb190-197" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb190-198"><a href="#cb190-198" aria-hidden="true" tabindex="-1"></a><span class="co">/* 2つの数の加算 */</span></span>
<span id="cb190-199"><a href="#cb190-199" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> add<span class="op">(</span><span class="dt">int</span> a<span class="op">,</span> <span class="dt">int</span> b<span class="op">)</span></span>
<span id="cb190-200"><a href="#cb190-200" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb190-201"><a href="#cb190-201" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> a <span class="op">+</span> b<span class="op">;</span></span>
<span id="cb190-202"><a href="#cb190-202" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb190-203"><a href="#cb190-203" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb190-204"><a href="#cb190-204" aria-hidden="true" tabindex="-1"></a><span class="co">/* 2つの数の減算 */</span></span>
<span id="cb190-205"><a href="#cb190-205" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> subtract<span class="op">(</span><span class="dt">int</span> a<span class="op">,</span> <span class="dt">int</span> b<span class="op">)</span></span>
<span id="cb190-206"><a href="#cb190-206" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb190-207"><a href="#cb190-207" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> a <span class="op">-</span> b<span class="op">;</span></span>
<span id="cb190-208"><a href="#cb190-208" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb190-209"><a href="#cb190-209" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb190-210"><a href="#cb190-210" aria-hidden="true" tabindex="-1"></a><span class="co">/* 2つの数の乗算 */</span></span>
<span id="cb190-211"><a href="#cb190-211" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> multiply<span class="op">(</span><span class="dt">int</span> a<span class="op">,</span> <span class="dt">int</span> b<span class="op">)</span></span>
<span id="cb190-212"><a href="#cb190-212" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb190-213"><a href="#cb190-213" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> a <span class="op">*</span> b<span class="op">;</span></span>
<span id="cb190-214"><a href="#cb190-214" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb190-215"><a href="#cb190-215" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb190-216"><a href="#cb190-216" aria-hidden="true" tabindex="-1"></a><span class="co">/* 2つの数の除算（浮動小数点で返す） */</span></span>
<span id="cb190-217"><a href="#cb190-217" aria-hidden="true" tabindex="-1"></a><span class="dt">double</span> divide<span class="op">(</span><span class="dt">int</span> a<span class="op">,</span> <span class="dt">int</span> b<span class="op">)</span></span>
<span id="cb190-218"><a href="#cb190-218" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb190-219"><a href="#cb190-219" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>b <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb190-220"><a href="#cb190-220" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;エラー: ゼロで割ることはできません</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb190-221"><a href="#cb190-221" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="fl">0.0</span><span class="op">;</span></span>
<span id="cb190-222"><a href="#cb190-222" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb190-223"><a href="#cb190-223" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">(</span><span class="dt">double</span><span class="op">)</span>a <span class="op">/</span> b<span class="op">;</span></span>
<span id="cb190-224"><a href="#cb190-224" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb190-225"><a href="#cb190-225" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb190-226"><a href="#cb190-226" aria-hidden="true" tabindex="-1"></a><span class="co">/* 戻り値なし、引数なしの関数 */</span></span>
<span id="cb190-227"><a href="#cb190-227" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> print_message<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb190-228"><a href="#cb190-228" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb190-229"><a href="#cb190-229" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;これは関数から出力されたメッセージです</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb190-230"><a href="#cb190-230" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb190-231"><a href="#cb190-231" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb190-232"><a href="#cb190-232" aria-hidden="true" tabindex="-1"></a><span class="co">/* 戻り値なし、引数ありの関数 */</span></span>
<span id="cb190-233"><a href="#cb190-233" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> print_number<span class="op">(</span><span class="dt">int</span> num<span class="op">)</span></span>
<span id="cb190-234"><a href="#cb190-234" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb190-235"><a href="#cb190-235" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;数値: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> num<span class="op">);</span></span>
<span id="cb190-236"><a href="#cb190-236" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb190-237"><a href="#cb190-237" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb190-238"><a href="#cb190-238" aria-hidden="true" tabindex="-1"></a><span class="co">/* 数の平方を計算 */</span></span>
<span id="cb190-239"><a href="#cb190-239" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> square<span class="op">(</span><span class="dt">int</span> n<span class="op">)</span></span>
<span id="cb190-240"><a href="#cb190-240" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb190-241"><a href="#cb190-241" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> n <span class="op">*</span> n<span class="op">;</span></span>
<span id="cb190-242"><a href="#cb190-242" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb190-243"><a href="#cb190-243" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb190-244"><a href="#cb190-244" aria-hidden="true" tabindex="-1"></a><span class="co">/* 2つの数の最大値を返す */</span></span>
<span id="cb190-245"><a href="#cb190-245" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> max<span class="op">(</span><span class="dt">int</span> a<span class="op">,</span> <span class="dt">int</span> b<span class="op">)</span></span>
<span id="cb190-246"><a href="#cb190-246" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb190-247"><a href="#cb190-247" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>a <span class="op">&gt;</span> b<span class="op">)</span> <span class="op">{</span></span>
<span id="cb190-248"><a href="#cb190-248" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> a<span class="op">;</span></span>
<span id="cb190-249"><a href="#cb190-249" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb190-250"><a href="#cb190-250" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> b<span class="op">;</span></span>
<span id="cb190-251"><a href="#cb190-251" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb190-252"><a href="#cb190-252" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb190-253"><a href="#cb190-253" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb190-254"><a href="#cb190-254" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb190-255"><a href="#cb190-255" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb190-256"><a href="#cb190-256" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> x <span class="op">=</span> <span class="dv">15</span><span class="op">;</span></span>
<span id="cb190-257"><a href="#cb190-257" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> y <span class="op">=</span> <span class="dv">7</span><span class="op">;</span></span>
<span id="cb190-258"><a href="#cb190-258" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> result<span class="op">;</span></span>
<span id="cb190-259"><a href="#cb190-259" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span> dresult<span class="op">;</span></span>
<span id="cb190-260"><a href="#cb190-260" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb190-261"><a href="#cb190-261" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== 関数の基本操作 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb190-262"><a href="#cb190-262" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;x = </span><span class="sc">%d</span><span class="st">, y = </span><span class="sc">%d\n\n</span><span class="st">&quot;</span><span class="op">,</span> x<span class="op">,</span> y<span class="op">);</span></span>
<span id="cb190-263"><a href="#cb190-263" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb190-264"><a href="#cb190-264" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 1. 基本的な算術関数 */</span></span>
<span id="cb190-265"><a href="#cb190-265" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== 基本的な算術関数 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb190-266"><a href="#cb190-266" aria-hidden="true" tabindex="-1"></a>    result <span class="op">=</span> add<span class="op">(</span>x<span class="op">,</span> y<span class="op">);</span></span>
<span id="cb190-267"><a href="#cb190-267" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st"> + </span><span class="sc">%d</span><span class="st"> = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> x<span class="op">,</span> y<span class="op">,</span> result<span class="op">);</span></span>
<span id="cb190-268"><a href="#cb190-268" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb190-269"><a href="#cb190-269" aria-hidden="true" tabindex="-1"></a>    result <span class="op">=</span> subtract<span class="op">(</span>x<span class="op">,</span> y<span class="op">);</span></span>
<span id="cb190-270"><a href="#cb190-270" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st"> - </span><span class="sc">%d</span><span class="st"> = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> x<span class="op">,</span> y<span class="op">,</span> result<span class="op">);</span></span>
<span id="cb190-271"><a href="#cb190-271" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb190-272"><a href="#cb190-272" aria-hidden="true" tabindex="-1"></a>    result <span class="op">=</span> multiply<span class="op">(</span>x<span class="op">,</span> y<span class="op">);</span></span>
<span id="cb190-273"><a href="#cb190-273" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st"> x </span><span class="sc">%d</span><span class="st"> = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> x<span class="op">,</span> y<span class="op">,</span> result<span class="op">);</span></span>
<span id="cb190-274"><a href="#cb190-274" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb190-275"><a href="#cb190-275" aria-hidden="true" tabindex="-1"></a>    dresult <span class="op">=</span> divide<span class="op">(</span>x<span class="op">,</span> y<span class="op">);</span></span>
<span id="cb190-276"><a href="#cb190-276" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st"> / </span><span class="sc">%d</span><span class="st"> = </span><span class="sc">%.2f\n</span><span class="st">&quot;</span><span class="op">,</span> x<span class="op">,</span> y<span class="op">,</span> dresult<span class="op">);</span></span>
<span id="cb190-277"><a href="#cb190-277" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb190-278"><a href="#cb190-278" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb190-279"><a href="#cb190-279" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 2. void関数の使用 */</span></span>
<span id="cb190-280"><a href="#cb190-280" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== void関数の使用 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb190-281"><a href="#cb190-281" aria-hidden="true" tabindex="-1"></a>    print_message<span class="op">();</span></span>
<span id="cb190-282"><a href="#cb190-282" aria-hidden="true" tabindex="-1"></a>    print_number<span class="op">(</span><span class="dv">42</span><span class="op">);</span></span>
<span id="cb190-283"><a href="#cb190-283" aria-hidden="true" tabindex="-1"></a>    print_number<span class="op">(</span>x <span class="op">+</span> y<span class="op">);</span></span>
<span id="cb190-284"><a href="#cb190-284" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb190-285"><a href="#cb190-285" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb190-286"><a href="#cb190-286" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 3. 関数の戻り値を直接使用 */</span></span>
<span id="cb190-287"><a href="#cb190-287" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== 関数の戻り値を直接使用 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb190-288"><a href="#cb190-288" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st"> の平方は </span><span class="sc">%d</span><span class="st"> です</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> x<span class="op">,</span> square<span class="op">(</span>x<span class="op">));</span></span>
<span id="cb190-289"><a href="#cb190-289" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st"> と </span><span class="sc">%d</span><span class="st"> の最大値は </span><span class="sc">%d</span><span class="st"> です</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> x<span class="op">,</span> y<span class="op">,</span> max<span class="op">(</span>x<span class="op">,</span> y<span class="op">));</span></span>
<span id="cb190-290"><a href="#cb190-290" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb190-291"><a href="#cb190-291" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 関数呼び出しをネスト */</span></span>
<span id="cb190-292"><a href="#cb190-292" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;(</span><span class="sc">%d</span><span class="st"> + </span><span class="sc">%d</span><span class="st">) の平方は </span><span class="sc">%d</span><span class="st"> です</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> x<span class="op">,</span> y<span class="op">,</span> square<span class="op">(</span>add<span class="op">(</span>x<span class="op">,</span> y<span class="op">)));</span></span>
<span id="cb190-293"><a href="#cb190-293" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb190-294"><a href="#cb190-294" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb190-295"><a href="#cb190-295" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 4. 関数を使った計算の例 */</span></span>
<span id="cb190-296"><a href="#cb190-296" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== 複雑な計算例 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb190-297"><a href="#cb190-297" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb190-298"><a href="#cb190-298" aria-hidden="true" tabindex="-1"></a>        <span class="co">/* 三角形の面積計算（底辺 x 高さ / 2） */</span></span>
<span id="cb190-299"><a href="#cb190-299" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> base <span class="op">=</span> <span class="dv">10</span><span class="op">;</span></span>
<span id="cb190-300"><a href="#cb190-300" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> height <span class="op">=</span> <span class="dv">8</span><span class="op">;</span></span>
<span id="cb190-301"><a href="#cb190-301" aria-hidden="true" tabindex="-1"></a>        <span class="dt">double</span> area <span class="op">=</span> divide<span class="op">(</span>multiply<span class="op">(</span>base<span class="op">,</span> height<span class="op">),</span> <span class="dv">2</span><span class="op">);</span></span>
<span id="cb190-302"><a href="#cb190-302" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;底辺</span><span class="sc">%d</span><span class="st">、高さ</span><span class="sc">%d</span><span class="st">の三角形の面積: </span><span class="sc">%.1f\n</span><span class="st">&quot;</span><span class="op">,</span> base<span class="op">,</span> height<span class="op">,</span> area<span class="op">);</span></span>
<span id="cb190-303"><a href="#cb190-303" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb190-304"><a href="#cb190-304" aria-hidden="true" tabindex="-1"></a>        <span class="co">/* 円の面積の近似計算 */</span></span>
<span id="cb190-305"><a href="#cb190-305" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> radius <span class="op">=</span> <span class="dv">5</span><span class="op">;</span></span>
<span id="cb190-306"><a href="#cb190-306" aria-hidden="true" tabindex="-1"></a>        <span class="dt">double</span> pi <span class="op">=</span> <span class="fl">3.14159</span><span class="op">;</span></span>
<span id="cb190-307"><a href="#cb190-307" aria-hidden="true" tabindex="-1"></a>        <span class="dt">double</span> circle_area <span class="op">=</span> pi <span class="op">*</span> square<span class="op">(</span>radius<span class="op">);</span></span>
<span id="cb190-308"><a href="#cb190-308" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;半径</span><span class="sc">%d</span><span class="st">の円の面積（近似）: </span><span class="sc">%.2f\n</span><span class="st">&quot;</span><span class="op">,</span> radius<span class="op">,</span> circle_area<span class="op">);</span></span>
<span id="cb190-309"><a href="#cb190-309" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb190-310"><a href="#cb190-310" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb190-311"><a href="#cb190-311" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb190-312"><a href="#cb190-312" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 5. デモ用の固定値を使った関数 */</span></span>
<span id="cb190-313"><a href="#cb190-313" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== デモ用固定値での関数使用 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb190-314"><a href="#cb190-314" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> num1 <span class="op">=</span> <span class="dv">15</span><span class="op">,</span> num2 <span class="op">=</span> <span class="dv">4</span><span class="op">;</span></span>
<span id="cb190-315"><a href="#cb190-315" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb190-316"><a href="#cb190-316" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;使用する値: </span><span class="sc">%d</span><span class="st"> と </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> num1<span class="op">,</span> num2<span class="op">);</span></span>
<span id="cb190-317"><a href="#cb190-317" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb190-318"><a href="#cb190-318" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">計算結果:</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb190-319"><a href="#cb190-319" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st"> + </span><span class="sc">%d</span><span class="st"> = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> num1<span class="op">,</span> num2<span class="op">,</span> add<span class="op">(</span>num1<span class="op">,</span> num2<span class="op">));</span></span>
<span id="cb190-320"><a href="#cb190-320" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st"> - </span><span class="sc">%d</span><span class="st"> = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> num1<span class="op">,</span> num2<span class="op">,</span> subtract<span class="op">(</span>num1<span class="op">,</span> num2<span class="op">));</span></span>
<span id="cb190-321"><a href="#cb190-321" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st"> x </span><span class="sc">%d</span><span class="st"> = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> num1<span class="op">,</span> num2<span class="op">,</span> multiply<span class="op">(</span>num1<span class="op">,</span> num2<span class="op">));</span></span>
<span id="cb190-322"><a href="#cb190-322" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb190-323"><a href="#cb190-323" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>num2 <span class="op">!=</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb190-324"><a href="#cb190-324" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st"> / </span><span class="sc">%d</span><span class="st"> = </span><span class="sc">%.2f\n</span><span class="st">&quot;</span><span class="op">,</span> num1<span class="op">,</span> num2<span class="op">,</span> divide<span class="op">(</span>num1<span class="op">,</span> num2<span class="op">));</span></span>
<span id="cb190-325"><a href="#cb190-325" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb190-326"><a href="#cb190-326" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb190-327"><a href="#cb190-327" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;最大値: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> max<span class="op">(</span>num1<span class="op">,</span> num2<span class="op">));</span></span>
<span id="cb190-328"><a href="#cb190-328" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb190-329"><a href="#cb190-329" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb190-330"><a href="#cb190-330" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<blockquote>
<p>C99版は<a
href="function_basics_c99.c">こちら</a>を参照してください。</p>
</blockquote>
<hr />
<h1 id="第10章-ポインタ">第10章: ポインタ</h1>
<h2 id="対応c規格-6">対応C規格</h2>
<ul>
<li><strong>主要対象:</strong> C90</li>
<li><strong>学習内容:</strong>
ポインタの基本概念、アドレス演算子、間接参照演算子、ポインタと配列、ポインタ演算</li>
</ul>
<h2 id="学習目標-6">学習目標</h2>
<p>この章を完了すると、以下のことができるようになります：</p>
<ul>
<li>ポインタの基本概念を理解する</li>
<li>アドレス演算子（&amp;）と間接参照演算子（*）を使える</li>
<li>ポインタと配列の関係を理解する</li>
<li>ポインタ演算ができる</li>
<li>ポインタを関数の引数として使える</li>
</ul>
<h2 id="理論解説-6">理論解説</h2>
<h3 id="ポインタの基本概念">ポインタの基本概念</h3>
<p>ポインタは他の変数のメモリアドレスを格納する変数です。これにより間接的に他の変数にアクセスできます。</p>
<h4 id="メモリとアドレス">メモリとアドレス</h4>
<div class="sourceCode" id="cb191"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb191-1"><a href="#cb191-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb191-2"><a href="#cb191-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb191-3"><a href="#cb191-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb191-4"><a href="#cb191-4" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb191-5"><a href="#cb191-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb191-6"><a href="#cb191-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> number <span class="op">=</span> <span class="dv">42</span><span class="op">;</span></span>
<span id="cb191-7"><a href="#cb191-7" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb191-8"><a href="#cb191-8" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;変数numberの値: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> number<span class="op">);</span></span>
<span id="cb191-9"><a href="#cb191-9" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;変数numberのアドレス: </span><span class="sc">%p\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(</span><span class="dt">void</span><span class="op">*)&amp;</span>number<span class="op">);</span></span>
<span id="cb191-10"><a href="#cb191-10" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;変数numberのサイズ: </span><span class="sc">%lu</span><span class="st"> バイト</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(</span><span class="dt">unsigned</span> <span class="dt">long</span><span class="op">)</span><span class="kw">sizeof</span><span class="op">(</span>number<span class="op">));</span></span>
<span id="cb191-11"><a href="#cb191-11" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb191-12"><a href="#cb191-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span></code></pre></div>
<h4 id="ポインタ変数の宣言">ポインタ変数の宣言</h4>
<div class="sourceCode" id="cb192"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb192-1"><a href="#cb192-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb192-2"><a href="#cb192-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb192-3"><a href="#cb192-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb192-4"><a href="#cb192-4" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb192-5"><a href="#cb192-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb192-6"><a href="#cb192-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> value <span class="op">=</span> <span class="dv">100</span><span class="op">;</span>        <span class="co">/* 通常の整数変数 */</span></span>
<span id="cb192-7"><a href="#cb192-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> <span class="op">*</span>ptr<span class="op">;</span>               <span class="co">/* 整数を指すポインタ変数 */</span></span>
<span id="cb192-8"><a href="#cb192-8" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb192-9"><a href="#cb192-9" aria-hidden="true" tabindex="-1"></a>    ptr <span class="op">=</span> <span class="op">&amp;</span>value<span class="op">;</span>           <span class="co">/* valueのアドレスをptrに代入 */</span></span>
<span id="cb192-10"><a href="#cb192-10" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb192-11"><a href="#cb192-11" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;value = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> value<span class="op">);</span></span>
<span id="cb192-12"><a href="#cb192-12" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;&amp;value = </span><span class="sc">%p\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(</span><span class="dt">void</span><span class="op">*)&amp;</span>value<span class="op">);</span></span>
<span id="cb192-13"><a href="#cb192-13" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ptr = </span><span class="sc">%p\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(</span><span class="dt">void</span><span class="op">*)</span>ptr<span class="op">);</span></span>
<span id="cb192-14"><a href="#cb192-14" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;*ptr = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">*</span>ptr<span class="op">);</span>        <span class="co">/* ポインタが指す値 */</span></span>
<span id="cb192-15"><a href="#cb192-15" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb192-16"><a href="#cb192-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span></code></pre></div>
<h3
id="アドレス演算子と間接参照演算子">アドレス演算子（&amp;）と間接参照演算子（*）</h3>
<h4 id="アドレス演算子">アドレス演算子（&amp;）</h4>
<div class="sourceCode" id="cb193"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb193-1"><a href="#cb193-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb193-2"><a href="#cb193-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb193-3"><a href="#cb193-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb193-4"><a href="#cb193-4" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb193-5"><a href="#cb193-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb193-6"><a href="#cb193-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> a <span class="op">=</span> <span class="dv">10</span><span class="op">;</span></span>
<span id="cb193-7"><a href="#cb193-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span> b <span class="op">=</span> <span class="fl">3.14</span><span class="op">;</span></span>
<span id="cb193-8"><a href="#cb193-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> c <span class="op">=</span> <span class="ch">&#39;A&#39;</span><span class="op">;</span></span>
<span id="cb193-9"><a href="#cb193-9" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb193-10"><a href="#cb193-10" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;変数のアドレス:</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb193-11"><a href="#cb193-11" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;&amp;a = </span><span class="sc">%p\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(</span><span class="dt">void</span><span class="op">*)&amp;</span>a<span class="op">);</span></span>
<span id="cb193-12"><a href="#cb193-12" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;&amp;b = </span><span class="sc">%p\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(</span><span class="dt">void</span><span class="op">*)&amp;</span>b<span class="op">);</span></span>
<span id="cb193-13"><a href="#cb193-13" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;&amp;c = </span><span class="sc">%p\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(</span><span class="dt">void</span><span class="op">*)&amp;</span>c<span class="op">);</span></span>
<span id="cb193-14"><a href="#cb193-14" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb193-15"><a href="#cb193-15" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* ポインタ変数の宣言と初期化 */</span></span>
<span id="cb193-16"><a href="#cb193-16" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> <span class="op">*</span>ptr_a <span class="op">=</span> <span class="op">&amp;</span>a<span class="op">;</span></span>
<span id="cb193-17"><a href="#cb193-17" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span> <span class="op">*</span>ptr_b <span class="op">=</span> <span class="op">&amp;</span>b<span class="op">;</span></span>
<span id="cb193-18"><a href="#cb193-18" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> <span class="op">*</span>ptr_c <span class="op">=</span> <span class="op">&amp;</span>c<span class="op">;</span></span>
<span id="cb193-19"><a href="#cb193-19" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb193-20"><a href="#cb193-20" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">ポインタの値（アドレス）:</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb193-21"><a href="#cb193-21" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ptr_a = </span><span class="sc">%p\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(</span><span class="dt">void</span><span class="op">*)</span>ptr_a<span class="op">);</span></span>
<span id="cb193-22"><a href="#cb193-22" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ptr_b = </span><span class="sc">%p\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(</span><span class="dt">void</span><span class="op">*)</span>ptr_b<span class="op">);</span></span>
<span id="cb193-23"><a href="#cb193-23" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ptr_c = </span><span class="sc">%p\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(</span><span class="dt">void</span><span class="op">*)</span>ptr_c<span class="op">);</span></span>
<span id="cb193-24"><a href="#cb193-24" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb193-25"><a href="#cb193-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span></code></pre></div>
<h4 id="間接参照演算子">間接参照演算子（*）</h4>
<div class="sourceCode" id="cb194"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb194-1"><a href="#cb194-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb194-2"><a href="#cb194-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb194-3"><a href="#cb194-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb194-4"><a href="#cb194-4" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb194-5"><a href="#cb194-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb194-6"><a href="#cb194-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> original <span class="op">=</span> <span class="dv">50</span><span class="op">;</span></span>
<span id="cb194-7"><a href="#cb194-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> <span class="op">*</span>pointer <span class="op">=</span> <span class="op">&amp;</span>original<span class="op">;</span></span>
<span id="cb194-8"><a href="#cb194-8" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb194-9"><a href="#cb194-9" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== 元の状態 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb194-10"><a href="#cb194-10" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;original = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> original<span class="op">);</span></span>
<span id="cb194-11"><a href="#cb194-11" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;*pointer = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">*</span>pointer<span class="op">);</span></span>
<span id="cb194-12"><a href="#cb194-12" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb194-13"><a href="#cb194-13" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* ポインタを通じて値を変更 */</span></span>
<span id="cb194-14"><a href="#cb194-14" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>pointer <span class="op">=</span> <span class="dv">75</span><span class="op">;</span></span>
<span id="cb194-15"><a href="#cb194-15" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb194-16"><a href="#cb194-16" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">=== *pointer = 75 実行後 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb194-17"><a href="#cb194-17" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;original = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> original<span class="op">);</span>      <span class="co">/* 75に変更される */</span></span>
<span id="cb194-18"><a href="#cb194-18" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;*pointer = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">*</span>pointer<span class="op">);</span>      <span class="co">/* 75 */</span></span>
<span id="cb194-19"><a href="#cb194-19" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb194-20"><a href="#cb194-20" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 元の変数を直接変更 */</span></span>
<span id="cb194-21"><a href="#cb194-21" aria-hidden="true" tabindex="-1"></a>    original <span class="op">=</span> <span class="dv">99</span><span class="op">;</span></span>
<span id="cb194-22"><a href="#cb194-22" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb194-23"><a href="#cb194-23" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">=== original = 99 実行後 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb194-24"><a href="#cb194-24" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;original = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> original<span class="op">);</span>      <span class="co">/* 99 */</span></span>
<span id="cb194-25"><a href="#cb194-25" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;*pointer = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">*</span>pointer<span class="op">);</span>      <span class="co">/* 99 */</span></span>
<span id="cb194-26"><a href="#cb194-26" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb194-27"><a href="#cb194-27" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span></code></pre></div>
<h3 id="ポインタのデータ型">ポインタのデータ型</h3>
<h4 id="さまざまなデータ型のポインタ">さまざまなデータ型のポインタ</h4>
<div class="sourceCode" id="cb195"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb195-1"><a href="#cb195-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb195-2"><a href="#cb195-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb195-3"><a href="#cb195-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb195-4"><a href="#cb195-4" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb195-5"><a href="#cb195-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb195-6"><a href="#cb195-6" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 各データ型の変数 */</span></span>
<span id="cb195-7"><a href="#cb195-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> char_var <span class="op">=</span> <span class="ch">&#39;X&#39;</span><span class="op">;</span></span>
<span id="cb195-8"><a href="#cb195-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> int_var <span class="op">=</span> <span class="dv">123</span><span class="op">;</span></span>
<span id="cb195-9"><a href="#cb195-9" aria-hidden="true" tabindex="-1"></a>    <span class="dt">float</span> float_var <span class="op">=</span> <span class="fl">3.14</span><span class="bu">f</span><span class="op">;</span></span>
<span id="cb195-10"><a href="#cb195-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span> double_var <span class="op">=</span> <span class="fl">2.718</span><span class="op">;</span></span>
<span id="cb195-11"><a href="#cb195-11" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb195-12"><a href="#cb195-12" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 各データ型のポインタ */</span></span>
<span id="cb195-13"><a href="#cb195-13" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> <span class="op">*</span>char_ptr <span class="op">=</span> <span class="op">&amp;</span>char_var<span class="op">;</span></span>
<span id="cb195-14"><a href="#cb195-14" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> <span class="op">*</span>int_ptr <span class="op">=</span> <span class="op">&amp;</span>int_var<span class="op">;</span></span>
<span id="cb195-15"><a href="#cb195-15" aria-hidden="true" tabindex="-1"></a>    <span class="dt">float</span> <span class="op">*</span>float_ptr <span class="op">=</span> <span class="op">&amp;</span>float_var<span class="op">;</span></span>
<span id="cb195-16"><a href="#cb195-16" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span> <span class="op">*</span>double_ptr <span class="op">=</span> <span class="op">&amp;</span>double_var<span class="op">;</span></span>
<span id="cb195-17"><a href="#cb195-17" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb195-18"><a href="#cb195-18" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== 値の表示 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb195-19"><a href="#cb195-19" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;char: </span><span class="sc">%c\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">*</span>char_ptr<span class="op">);</span></span>
<span id="cb195-20"><a href="#cb195-20" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;int: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">*</span>int_ptr<span class="op">);</span></span>
<span id="cb195-21"><a href="#cb195-21" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;float: </span><span class="sc">%.2f\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">*</span>float_ptr<span class="op">);</span></span>
<span id="cb195-22"><a href="#cb195-22" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;double: </span><span class="sc">%.3f\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">*</span>double_ptr<span class="op">);</span></span>
<span id="cb195-23"><a href="#cb195-23" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb195-24"><a href="#cb195-24" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">=== ポインタのサイズ ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb195-25"><a href="#cb195-25" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;char*: </span><span class="sc">%lu</span><span class="st"> バイト</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(</span><span class="dt">unsigned</span> <span class="dt">long</span><span class="op">)</span><span class="kw">sizeof</span><span class="op">(</span>char_ptr<span class="op">));</span></span>
<span id="cb195-26"><a href="#cb195-26" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;int*: </span><span class="sc">%lu</span><span class="st"> バイト</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(</span><span class="dt">unsigned</span> <span class="dt">long</span><span class="op">)</span><span class="kw">sizeof</span><span class="op">(</span>int_ptr<span class="op">));</span></span>
<span id="cb195-27"><a href="#cb195-27" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;float*: </span><span class="sc">%lu</span><span class="st"> バイト</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(</span><span class="dt">unsigned</span> <span class="dt">long</span><span class="op">)</span><span class="kw">sizeof</span><span class="op">(</span>float_ptr<span class="op">));</span></span>
<span id="cb195-28"><a href="#cb195-28" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;double*: </span><span class="sc">%lu</span><span class="st"> バイト</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(</span><span class="dt">unsigned</span> <span class="dt">long</span><span class="op">)</span><span class="kw">sizeof</span><span class="op">(</span>double_ptr<span class="op">));</span></span>
<span id="cb195-29"><a href="#cb195-29" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb195-30"><a href="#cb195-30" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span></code></pre></div>
<h4 id="voidポインタ汎用ポインタ">void*ポインタ（汎用ポインタ）</h4>
<div class="sourceCode" id="cb196"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb196-1"><a href="#cb196-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb196-2"><a href="#cb196-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb196-3"><a href="#cb196-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb196-4"><a href="#cb196-4" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb196-5"><a href="#cb196-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb196-6"><a href="#cb196-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> int_value <span class="op">=</span> <span class="dv">456</span><span class="op">;</span></span>
<span id="cb196-7"><a href="#cb196-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span> double_value <span class="op">=</span> <span class="fl">1.618</span><span class="op">;</span></span>
<span id="cb196-8"><a href="#cb196-8" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb196-9"><a href="#cb196-9" aria-hidden="true" tabindex="-1"></a>    <span class="dt">void</span> <span class="op">*</span>generic_ptr<span class="op">;</span>      <span class="co">/* 汎用ポインタ */</span></span>
<span id="cb196-10"><a href="#cb196-10" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb196-11"><a href="#cb196-11" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* intを指す */</span></span>
<span id="cb196-12"><a href="#cb196-12" aria-hidden="true" tabindex="-1"></a>    generic_ptr <span class="op">=</span> <span class="op">&amp;</span>int_value<span class="op">;</span></span>
<span id="cb196-13"><a href="#cb196-13" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;int値: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">*(</span><span class="dt">int</span><span class="op">*)</span>generic_ptr<span class="op">);</span>  <span class="co">/* キャストが必要 */</span></span>
<span id="cb196-14"><a href="#cb196-14" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb196-15"><a href="#cb196-15" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* doubleを指す */</span></span>
<span id="cb196-16"><a href="#cb196-16" aria-hidden="true" tabindex="-1"></a>    generic_ptr <span class="op">=</span> <span class="op">&amp;</span>double_value<span class="op">;</span></span>
<span id="cb196-17"><a href="#cb196-17" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;double値: </span><span class="sc">%.3f\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">*(</span><span class="dt">double</span><span class="op">*)</span>generic_ptr<span class="op">);</span>  <span class="co">/* キャストが必要 */</span></span>
<span id="cb196-18"><a href="#cb196-18" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb196-19"><a href="#cb196-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span></code></pre></div>
<h3 id="ポインタと配列の関係">ポインタと配列の関係</h3>
<h4 id="配列名はポインタ">配列名はポインタ</h4>
<div class="sourceCode" id="cb197"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb197-1"><a href="#cb197-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb197-2"><a href="#cb197-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb197-3"><a href="#cb197-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb197-4"><a href="#cb197-4" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb197-5"><a href="#cb197-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb197-6"><a href="#cb197-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> arr<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">10</span><span class="op">,</span> <span class="dv">20</span><span class="op">,</span> <span class="dv">30</span><span class="op">,</span> <span class="dv">40</span><span class="op">,</span> <span class="dv">50</span><span class="op">};</span></span>
<span id="cb197-7"><a href="#cb197-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> <span class="op">*</span>ptr <span class="op">=</span> arr<span class="op">;</span>         <span class="co">/* arr は &amp;arr[0] と同じ */</span></span>
<span id="cb197-8"><a href="#cb197-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb197-9"><a href="#cb197-9" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb197-10"><a href="#cb197-10" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== 配列とポインタの関係 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb197-11"><a href="#cb197-11" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;arr = </span><span class="sc">%p\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(</span><span class="dt">void</span><span class="op">*)</span>arr<span class="op">);</span></span>
<span id="cb197-12"><a href="#cb197-12" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;&amp;arr[0] = </span><span class="sc">%p\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(</span><span class="dt">void</span><span class="op">*)&amp;</span>arr<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb197-13"><a href="#cb197-13" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ptr = </span><span class="sc">%p\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(</span><span class="dt">void</span><span class="op">*)</span>ptr<span class="op">);</span></span>
<span id="cb197-14"><a href="#cb197-14" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb197-15"><a href="#cb197-15" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">=== 配列要素へのアクセス ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb197-16"><a href="#cb197-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">5</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb197-17"><a href="#cb197-17" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;arr[</span><span class="sc">%d</span><span class="st">] = </span><span class="sc">%d</span><span class="st">, *(arr + </span><span class="sc">%d</span><span class="st">) = </span><span class="sc">%d</span><span class="st">, *(ptr + </span><span class="sc">%d</span><span class="st">) = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span></span>
<span id="cb197-18"><a href="#cb197-18" aria-hidden="true" tabindex="-1"></a>               i<span class="op">,</span> arr<span class="op">[</span>i<span class="op">],</span> i<span class="op">,</span> <span class="op">*(</span>arr <span class="op">+</span> i<span class="op">),</span> i<span class="op">,</span> <span class="op">*(</span>ptr <span class="op">+</span> i<span class="op">));</span></span>
<span id="cb197-19"><a href="#cb197-19" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb197-20"><a href="#cb197-20" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb197-21"><a href="#cb197-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span></code></pre></div>
<h4 id="ポインタを使った配列操作">ポインタを使った配列操作</h4>
<div class="sourceCode" id="cb198"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb198-1"><a href="#cb198-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb198-2"><a href="#cb198-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb198-3"><a href="#cb198-3" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> print_array_index<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> size<span class="op">)</span></span>
<span id="cb198-4"><a href="#cb198-4" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb198-5"><a href="#cb198-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb198-6"><a href="#cb198-6" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb198-7"><a href="#cb198-7" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;インデックス記法: &quot;</span><span class="op">);</span></span>
<span id="cb198-8"><a href="#cb198-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> size<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb198-9"><a href="#cb198-9" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st"> &quot;</span><span class="op">,</span> arr<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb198-10"><a href="#cb198-10" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb198-11"><a href="#cb198-11" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb198-12"><a href="#cb198-12" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb198-13"><a href="#cb198-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb198-14"><a href="#cb198-14" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> print_array_pointer<span class="op">(</span><span class="dt">int</span> <span class="op">*</span>ptr<span class="op">,</span> <span class="dt">int</span> size<span class="op">)</span></span>
<span id="cb198-15"><a href="#cb198-15" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb198-16"><a href="#cb198-16" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb198-17"><a href="#cb198-17" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb198-18"><a href="#cb198-18" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ポインタ記法: &quot;</span><span class="op">);</span></span>
<span id="cb198-19"><a href="#cb198-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> size<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb198-20"><a href="#cb198-20" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st"> &quot;</span><span class="op">,</span> <span class="op">*(</span>ptr <span class="op">+</span> i<span class="op">));</span></span>
<span id="cb198-21"><a href="#cb198-21" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb198-22"><a href="#cb198-22" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb198-23"><a href="#cb198-23" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb198-24"><a href="#cb198-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb198-25"><a href="#cb198-25" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb198-26"><a href="#cb198-26" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb198-27"><a href="#cb198-27" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> numbers<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">11</span><span class="op">,</span> <span class="dv">22</span><span class="op">,</span> <span class="dv">33</span><span class="op">,</span> <span class="dv">44</span><span class="op">,</span> <span class="dv">55</span><span class="op">};</span></span>
<span id="cb198-28"><a href="#cb198-28" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> size <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>numbers<span class="op">)</span> <span class="op">/</span> <span class="kw">sizeof</span><span class="op">(</span>numbers<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb198-29"><a href="#cb198-29" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb198-30"><a href="#cb198-30" aria-hidden="true" tabindex="-1"></a>    print_array_index<span class="op">(</span>numbers<span class="op">,</span> size<span class="op">);</span></span>
<span id="cb198-31"><a href="#cb198-31" aria-hidden="true" tabindex="-1"></a>    print_array_pointer<span class="op">(</span>numbers<span class="op">,</span> size<span class="op">);</span></span>
<span id="cb198-32"><a href="#cb198-32" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb198-33"><a href="#cb198-33" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span></code></pre></div>
<h3 id="ポインタ演算">ポインタ演算</h3>
<h4 id="ポインタの加算減算">ポインタの加算・減算</h4>
<div class="sourceCode" id="cb199"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb199-1"><a href="#cb199-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb199-2"><a href="#cb199-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb199-3"><a href="#cb199-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb199-4"><a href="#cb199-4" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb199-5"><a href="#cb199-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb199-6"><a href="#cb199-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> arr<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">5</span><span class="op">,</span> <span class="dv">15</span><span class="op">,</span> <span class="dv">25</span><span class="op">,</span> <span class="dv">35</span><span class="op">,</span> <span class="dv">45</span><span class="op">};</span></span>
<span id="cb199-7"><a href="#cb199-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> <span class="op">*</span>ptr <span class="op">=</span> arr<span class="op">;</span></span>
<span id="cb199-8"><a href="#cb199-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb199-9"><a href="#cb199-9" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb199-10"><a href="#cb199-10" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== ポインタ演算の例 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb199-11"><a href="#cb199-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">5</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb199-12"><a href="#cb199-12" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;ptr + </span><span class="sc">%d</span><span class="st"> = </span><span class="sc">%p</span><span class="st">, *(ptr + </span><span class="sc">%d</span><span class="st">) = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span></span>
<span id="cb199-13"><a href="#cb199-13" aria-hidden="true" tabindex="-1"></a>               i<span class="op">,</span> <span class="op">(</span><span class="dt">void</span><span class="op">*)(</span>ptr <span class="op">+</span> i<span class="op">),</span> i<span class="op">,</span> <span class="op">*(</span>ptr <span class="op">+</span> i<span class="op">));</span></span>
<span id="cb199-14"><a href="#cb199-14" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb199-15"><a href="#cb199-15" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb199-16"><a href="#cb199-16" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">=== ポインタのインクリメント ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb199-17"><a href="#cb199-17" aria-hidden="true" tabindex="-1"></a>    ptr <span class="op">=</span> arr<span class="op">;</span>  <span class="co">/* 先頭に戻す */</span></span>
<span id="cb199-18"><a href="#cb199-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">5</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb199-19"><a href="#cb199-19" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;*ptr = </span><span class="sc">%d</span><span class="st"> (アドレス: </span><span class="sc">%p</span><span class="st">)</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">*</span>ptr<span class="op">,</span> <span class="op">(</span><span class="dt">void</span><span class="op">*)</span>ptr<span class="op">);</span></span>
<span id="cb199-20"><a href="#cb199-20" aria-hidden="true" tabindex="-1"></a>        ptr<span class="op">++;</span>  <span class="co">/* 次の要素に移動 */</span></span>
<span id="cb199-21"><a href="#cb199-21" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb199-22"><a href="#cb199-22" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb199-23"><a href="#cb199-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span></code></pre></div>
<h4 id="ポインタ同士の差">ポインタ同士の差</h4>
<div class="sourceCode" id="cb200"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb200-1"><a href="#cb200-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb200-2"><a href="#cb200-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb200-3"><a href="#cb200-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb200-4"><a href="#cb200-4" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb200-5"><a href="#cb200-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb200-6"><a href="#cb200-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> arr<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">0</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">5</span><span class="op">,</span> <span class="dv">6</span><span class="op">,</span> <span class="dv">7</span><span class="op">,</span> <span class="dv">8</span><span class="op">,</span> <span class="dv">9</span><span class="op">};</span></span>
<span id="cb200-7"><a href="#cb200-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> <span class="op">*</span>start <span class="op">=</span> <span class="op">&amp;</span>arr<span class="op">[</span><span class="dv">2</span><span class="op">];</span>   <span class="co">/* arr[2]を指す */</span></span>
<span id="cb200-8"><a href="#cb200-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> <span class="op">*</span>end <span class="op">=</span> <span class="op">&amp;</span>arr<span class="op">[</span><span class="dv">7</span><span class="op">];</span>     <span class="co">/* arr[7]を指す */</span></span>
<span id="cb200-9"><a href="#cb200-9" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb200-10"><a href="#cb200-10" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;start が指す値: </span><span class="sc">%d</span><span class="st"> (インデックス2)</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">*</span>start<span class="op">);</span></span>
<span id="cb200-11"><a href="#cb200-11" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;end が指す値: </span><span class="sc">%d</span><span class="st"> (インデックス7)</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">*</span>end<span class="op">);</span></span>
<span id="cb200-12"><a href="#cb200-12" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ポインタの差: </span><span class="sc">%ld\n</span><span class="st">&quot;</span><span class="op">,</span> end <span class="op">-</span> start<span class="op">);</span>  <span class="co">/* 5 */</span></span>
<span id="cb200-13"><a href="#cb200-13" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;バイト差: </span><span class="sc">%ld\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(</span><span class="dt">char</span><span class="op">*)</span>end <span class="op">-</span> <span class="op">(</span><span class="dt">char</span><span class="op">*)</span>start<span class="op">);</span></span>
<span id="cb200-14"><a href="#cb200-14" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb200-15"><a href="#cb200-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span></code></pre></div>
<h3 id="ポインタと関数">ポインタと関数</h3>
<h4 id="ポインタを引数とする関数">ポインタを引数とする関数</h4>
<div class="sourceCode" id="cb201"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb201-1"><a href="#cb201-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb201-2"><a href="#cb201-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb201-3"><a href="#cb201-3" aria-hidden="true" tabindex="-1"></a><span class="co">/* 値を交換する関数 */</span></span>
<span id="cb201-4"><a href="#cb201-4" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> swap<span class="op">(</span><span class="dt">int</span> <span class="op">*</span>a<span class="op">,</span> <span class="dt">int</span> <span class="op">*</span>b<span class="op">)</span></span>
<span id="cb201-5"><a href="#cb201-5" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb201-6"><a href="#cb201-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> temp <span class="op">=</span> <span class="op">*</span>a<span class="op">;</span></span>
<span id="cb201-7"><a href="#cb201-7" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>a <span class="op">=</span> <span class="op">*</span>b<span class="op">;</span></span>
<span id="cb201-8"><a href="#cb201-8" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>b <span class="op">=</span> temp<span class="op">;</span></span>
<span id="cb201-9"><a href="#cb201-9" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb201-10"><a href="#cb201-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb201-11"><a href="#cb201-11" aria-hidden="true" tabindex="-1"></a><span class="co">/* 値を倍にする関数 */</span></span>
<span id="cb201-12"><a href="#cb201-12" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> double_value<span class="op">(</span><span class="dt">int</span> <span class="op">*</span>value<span class="op">)</span></span>
<span id="cb201-13"><a href="#cb201-13" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb201-14"><a href="#cb201-14" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>value <span class="op">=</span> <span class="op">(*</span>value<span class="op">)</span> <span class="op">*</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb201-15"><a href="#cb201-15" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb201-16"><a href="#cb201-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb201-17"><a href="#cb201-17" aria-hidden="true" tabindex="-1"></a><span class="co">/* 配列の要素を変更する関数 */</span></span>
<span id="cb201-18"><a href="#cb201-18" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> modify_array<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> size<span class="op">)</span></span>
<span id="cb201-19"><a href="#cb201-19" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb201-20"><a href="#cb201-20" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb201-21"><a href="#cb201-21" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb201-22"><a href="#cb201-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> size<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb201-23"><a href="#cb201-23" aria-hidden="true" tabindex="-1"></a>        arr<span class="op">[</span>i<span class="op">]</span> <span class="op">*=</span> <span class="dv">3</span><span class="op">;</span>  <span class="co">/* 各要素を3倍 */</span></span>
<span id="cb201-24"><a href="#cb201-24" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb201-25"><a href="#cb201-25" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb201-26"><a href="#cb201-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb201-27"><a href="#cb201-27" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb201-28"><a href="#cb201-28" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb201-29"><a href="#cb201-29" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> x <span class="op">=</span> <span class="dv">8</span><span class="op">,</span> y <span class="op">=</span> <span class="dv">12</span><span class="op">;</span></span>
<span id="cb201-30"><a href="#cb201-30" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> numbers<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">5</span><span class="op">};</span></span>
<span id="cb201-31"><a href="#cb201-31" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> size <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>numbers<span class="op">)</span> <span class="op">/</span> <span class="kw">sizeof</span><span class="op">(</span>numbers<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb201-32"><a href="#cb201-32" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb201-33"><a href="#cb201-33" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb201-34"><a href="#cb201-34" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== swap関数のテスト ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb201-35"><a href="#cb201-35" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;交換前: x = </span><span class="sc">%d</span><span class="st">, y = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> x<span class="op">,</span> y<span class="op">);</span></span>
<span id="cb201-36"><a href="#cb201-36" aria-hidden="true" tabindex="-1"></a>    swap<span class="op">(&amp;</span>x<span class="op">,</span> <span class="op">&amp;</span>y<span class="op">);</span></span>
<span id="cb201-37"><a href="#cb201-37" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;交換後: x = </span><span class="sc">%d</span><span class="st">, y = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> x<span class="op">,</span> y<span class="op">);</span></span>
<span id="cb201-38"><a href="#cb201-38" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb201-39"><a href="#cb201-39" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">=== double_value関数のテスト ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb201-40"><a href="#cb201-40" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;2倍前: x = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> x<span class="op">);</span></span>
<span id="cb201-41"><a href="#cb201-41" aria-hidden="true" tabindex="-1"></a>    double_value<span class="op">(&amp;</span>x<span class="op">);</span></span>
<span id="cb201-42"><a href="#cb201-42" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;2倍後: x = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> x<span class="op">);</span></span>
<span id="cb201-43"><a href="#cb201-43" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb201-44"><a href="#cb201-44" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">=== modify_array関数のテスト ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb201-45"><a href="#cb201-45" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;変更前: &quot;</span><span class="op">);</span></span>
<span id="cb201-46"><a href="#cb201-46" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> size<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb201-47"><a href="#cb201-47" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st"> &quot;</span><span class="op">,</span> numbers<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb201-48"><a href="#cb201-48" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb201-49"><a href="#cb201-49" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb201-50"><a href="#cb201-50" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb201-51"><a href="#cb201-51" aria-hidden="true" tabindex="-1"></a>    modify_array<span class="op">(</span>numbers<span class="op">,</span> size<span class="op">);</span></span>
<span id="cb201-52"><a href="#cb201-52" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb201-53"><a href="#cb201-53" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;変更後: &quot;</span><span class="op">);</span></span>
<span id="cb201-54"><a href="#cb201-54" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> size<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb201-55"><a href="#cb201-55" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st"> &quot;</span><span class="op">,</span> numbers<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb201-56"><a href="#cb201-56" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb201-57"><a href="#cb201-57" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb201-58"><a href="#cb201-58" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb201-59"><a href="#cb201-59" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span></code></pre></div>
<h4 id="ポインタを戻り値とする関数">ポインタを戻り値とする関数</h4>
<div class="sourceCode" id="cb202"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb202-1"><a href="#cb202-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb202-2"><a href="#cb202-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb202-3"><a href="#cb202-3" aria-hidden="true" tabindex="-1"></a><span class="co">/* 配列から最大値のアドレスを返す */</span></span>
<span id="cb202-4"><a href="#cb202-4" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span><span class="op">*</span> find_max_ptr<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> size<span class="op">)</span></span>
<span id="cb202-5"><a href="#cb202-5" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb202-6"><a href="#cb202-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb202-7"><a href="#cb202-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> <span class="op">*</span>max_ptr <span class="op">=</span> <span class="op">&amp;</span>arr<span class="op">[];</span></span>
<span id="cb202-8"><a href="#cb202-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb202-9"><a href="#cb202-9" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb202-10"><a href="#cb202-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="op">;</span> i <span class="op">&lt;</span> size<span class="op">;</span> i<span class="op">++)</span> </span>
<span id="cb202-11"><a href="#cb202-11" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>arr<span class="op">[</span>i<span class="op">]</span> <span class="op">&gt;</span> <span class="op">*</span>max_ptr<span class="op">)</span> </span>
<span id="cb202-12"><a href="#cb202-12" aria-hidden="true" tabindex="-1"></a>            max_ptr <span class="op">=</span> <span class="op">&amp;</span>arr<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb202-13"><a href="#cb202-13" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb202-14"><a href="#cb202-14" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb202-15"><a href="#cb202-15" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb202-16"><a href="#cb202-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> max_ptr<span class="op">;</span></span>
<span id="cb202-17"><a href="#cb202-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb202-18"><a href="#cb202-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb202-19"><a href="#cb202-19" aria-hidden="true" tabindex="-1"></a><span class="co">/* 配列から指定値を検索してアドレスを返す */</span></span>
<span id="cb202-20"><a href="#cb202-20" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span><span class="op">*</span> search_vale<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> size<span class="op">,</span> <span class="dt">int</span> target<span class="op">)</span></span>
<span id="cb202-21"><a href="#cb202-21" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb202-22"><a href="#cb202-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb202-23"><a href="#cb202-23" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb202-24"><a href="#cb202-24" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb202-25"><a href="#cb202-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="op">;</span> i <span class="op">&lt;</span> size<span class="op">;</span> i<span class="op">++)</span> </span>
<span id="cb202-26"><a href="#cb202-26" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>arr<span class="op">[</span>i<span class="op">]</span> <span class="op">==</span> target<span class="op">)</span> </span>
<span id="cb202-27"><a href="#cb202-27" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> <span class="op">&amp;</span>arr<span class="op">[</span>i<span class="op">];</span>  <span class="co">/* 見2つかった要素のアドレス */</span></span>
<span id="cb202-28"><a href="#cb202-28" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb202-29"><a href="#cb202-29" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb202-30"><a href="#cb202-30" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb202-31"><a href="#cb202-31" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> NULL<span class="op">;</span>  <span class="co">/* 見2つからない場合 */</span></span>
<span id="cb202-32"><a href="#cb202-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb202-33"><a href="#cb202-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb202-34"><a href="#cb202-34" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb202-35"><a href="#cb202-35" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb202-36"><a href="#cb202-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb202-37"><a href="#cb202-37" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> data<span class="op">[]</span> <span class="op">=</span> <span class="op">,</span> <span class="op">,</span> <span class="op">,</span> <span class="dv">9</span><span class="op">,</span> <span class="op">,</span> <span class="op">,</span> <span class="op">;</span></span>
<span id="cb202-38"><a href="#cb202-38" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> size <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>data<span class="op">)</span> <span class="op">/</span> <span class="kw">sizeof</span><span class="op">(</span>data<span class="op">[]);</span></span>
<span id="cb202-39"><a href="#cb202-39" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> <span class="op">*</span>result_ptr<span class="op">;</span></span>
<span id="cb202-40"><a href="#cb202-40" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> search_target <span class="op">=</span> <span class="op">;</span></span>
<span id="cb202-41"><a href="#cb202-41" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb202-42"><a href="#cb202-42" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb202-43"><a href="#cb202-43" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 配列の表示 */</span></span>
<span id="cb202-44"><a href="#cb202-44" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;配列: &quot;</span><span class="op">);</span></span>
<span id="cb202-45"><a href="#cb202-45" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="op">;</span> i <span class="op">&lt;</span> size<span class="op">;</span> i<span class="op">++)</span> </span>
<span id="cb202-46"><a href="#cb202-46" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st"> &quot;</span><span class="op">,</span> data<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb202-47"><a href="#cb202-47" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb202-48"><a href="#cb202-48" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;n&quot;</span><span class="op">);</span></span>
<span id="cb202-49"><a href="#cb202-49" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb202-50"><a href="#cb202-50" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 最大値の検索 */</span></span>
<span id="cb202-51"><a href="#cb202-51" aria-hidden="true" tabindex="-1"></a>    result_ptr <span class="op">=</span> find_max_ptr<span class="op">(</span>data<span class="op">,</span> size<span class="op">);</span></span>
<span id="cb202-52"><a href="#cb202-52" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;最大値: </span><span class="sc">%d</span><span class="st"> (アドレス: </span><span class="sc">%p</span><span class="st">)n&quot;</span><span class="op">,</span> <span class="op">*</span>result_ptr<span class="op">,</span> <span class="op">(</span><span class="dt">void</span><span class="op">*)</span>result_ptr<span class="op">);</span></span>
<span id="cb202-53"><a href="#cb202-53" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb202-54"><a href="#cb202-54" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 特定値の検索 */</span></span>
<span id="cb202-55"><a href="#cb202-55" aria-hidden="true" tabindex="-1"></a>    result_ptr <span class="op">=</span> search_vale<span class="op">(</span>data<span class="op">,</span> size<span class="op">,</span> search_target<span class="op">);</span></span>
<span id="cb202-56"><a href="#cb202-56" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>result_ptr <span class="op">!=</span> NULL<span class="op">)</span> </span>
<span id="cb202-57"><a href="#cb202-57" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st"> が見2つかりました (アドレス: </span><span class="sc">%p</span><span class="st">)n&quot;</span><span class="op">,</span> </span>
<span id="cb202-58"><a href="#cb202-58" aria-hidden="true" tabindex="-1"></a>               <span class="op">*</span>result_ptr<span class="op">,</span> <span class="op">(</span><span class="dt">void</span><span class="op">*)</span>result_ptr<span class="op">);</span></span>
<span id="cb202-59"><a href="#cb202-59" aria-hidden="true" tabindex="-1"></a>     <span class="cf">else</span> </span>
<span id="cb202-60"><a href="#cb202-60" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st"> は見2つかりませんでしたn&quot;</span><span class="op">,</span> search_target<span class="op">);</span></span>
<span id="cb202-61"><a href="#cb202-61" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb202-62"><a href="#cb202-62" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb202-63"><a href="#cb202-63" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">;</span></span></code></pre></div>
<h3 id="文字列とポインタ">文字列とポインタ</h3>
<h4 id="文字列リテラルとポインタ">文字列リテラルとポインタ</h4>
<div class="sourceCode" id="cb203"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb203-1"><a href="#cb203-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb203-2"><a href="#cb203-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb203-3"><a href="#cb203-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb203-4"><a href="#cb203-4" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb203-5"><a href="#cb203-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb203-6"><a href="#cb203-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> <span class="op">*</span>str <span class="op">=</span> <span class="st">&quot;Hello, World!&quot;</span><span class="op">;</span>     <span class="co">/* 文字列リテラル */</span></span>
<span id="cb203-7"><a href="#cb203-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> str<span class="op">[]</span> <span class="op">=</span> <span class="st">&quot;Hello, World!&quot;</span><span class="op">;</span>    <span class="co">/* 文字配列 */</span></span>
<span id="cb203-8"><a href="#cb203-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> <span class="op">*</span>ptr <span class="op">=</span> str<span class="op">;</span></span>
<span id="cb203-9"><a href="#cb203-9" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb203-10"><a href="#cb203-10" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;str: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> str<span class="op">);</span></span>
<span id="cb203-11"><a href="#cb203-11" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;str: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> str<span class="op">);</span></span>
<span id="cb203-12"><a href="#cb203-12" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ptr: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> ptr<span class="op">);</span></span>
<span id="cb203-13"><a href="#cb203-13" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb203-14"><a href="#cb203-14" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;n=== アドレスの比較 ===n&quot;</span><span class="op">);</span></span>
<span id="cb203-15"><a href="#cb203-15" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;strのアドレス: </span><span class="sc">%p</span><span class="st">n&quot;</span><span class="op">,</span> <span class="op">(</span><span class="dt">void</span><span class="op">*)</span>str<span class="op">);</span></span>
<span id="cb203-16"><a href="#cb203-16" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;strのアドレス: </span><span class="sc">%p</span><span class="st">n&quot;</span><span class="op">,</span> <span class="op">(</span><span class="dt">void</span><span class="op">*)</span>str<span class="op">);</span></span>
<span id="cb203-17"><a href="#cb203-17" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ptrの値: </span><span class="sc">%p</span><span class="st">n&quot;</span><span class="op">,</span> <span class="op">(</span><span class="dt">void</span><span class="op">*)</span>ptr<span class="op">);</span></span>
<span id="cb203-18"><a href="#cb203-18" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb203-19"><a href="#cb203-19" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 文字配列は変更可能 */</span></span>
<span id="cb203-20"><a href="#cb203-20" aria-hidden="true" tabindex="-1"></a>    str<span class="op">[]</span> <span class="op">=</span> <span class="ch">&#39;h&#39;</span><span class="op">;</span></span>
<span id="cb203-21"><a href="#cb203-21" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;n変更後のstr: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> str<span class="op">);</span></span>
<span id="cb203-22"><a href="#cb203-22" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb203-23"><a href="#cb203-23" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 文字列リテラルは変更不可 */</span></span>
<span id="cb203-24"><a href="#cb203-24" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* str[] = &#39;h&#39;;  &lt;- 実行時エラーの可能性 */</span></span>
<span id="cb203-25"><a href="#cb203-25" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb203-26"><a href="#cb203-26" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">;</span></span></code></pre></div>
<h4 id="ポインタを使った文字列操作">ポインタを使った文字列操作</h4>
<div class="sourceCode" id="cb204"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb204-1"><a href="#cb204-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb204-2"><a href="#cb204-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb204-3"><a href="#cb204-3" aria-hidden="true" tabindex="-1"></a><span class="co">/* 文字列の長さを計算（ポインタ版） */</span></span>
<span id="cb204-4"><a href="#cb204-4" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> string_length<span class="op">(</span><span class="dt">char</span> <span class="op">*</span>str<span class="op">)</span></span>
<span id="cb204-5"><a href="#cb204-5" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb204-6"><a href="#cb204-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb204-7"><a href="#cb204-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> length <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb204-8"><a href="#cb204-8" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb204-9"><a href="#cb204-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(*</span>str <span class="op">!=</span> <span class="ch">&#39;</span><span class="sc">\0</span><span class="ch">&#39;</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb204-10"><a href="#cb204-10" aria-hidden="true" tabindex="-1"></a>        length<span class="op">++;</span></span>
<span id="cb204-11"><a href="#cb204-11" aria-hidden="true" tabindex="-1"></a>        str<span class="op">++;</span></span>
<span id="cb204-12"><a href="#cb204-12" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb204-13"><a href="#cb204-13" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb204-14"><a href="#cb204-14" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb204-15"><a href="#cb204-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> length<span class="op">;</span></span>
<span id="cb204-16"><a href="#cb204-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb204-17"><a href="#cb204-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb204-18"><a href="#cb204-18" aria-hidden="true" tabindex="-1"></a><span class="co">/* 文字列をコピー（ポインタ版） */</span></span>
<span id="cb204-19"><a href="#cb204-19" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> string_copy<span class="op">(</span><span class="dt">char</span> <span class="op">*</span>dest<span class="op">,</span> <span class="dt">char</span> <span class="op">*</span>src<span class="op">)</span></span>
<span id="cb204-20"><a href="#cb204-20" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb204-21"><a href="#cb204-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb204-22"><a href="#cb204-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(*</span>src <span class="op">!=</span> <span class="ch">&#39;</span><span class="er">&#39;</span><span class="op">)</span> </span>
<span id="cb204-23"><a href="#cb204-23" aria-hidden="true" tabindex="-1"></a>        <span class="op">*</span>dest <span class="op">=</span> <span class="op">*</span>src<span class="op">;</span></span>
<span id="cb204-24"><a href="#cb204-24" aria-hidden="true" tabindex="-1"></a>        dest<span class="op">++;</span></span>
<span id="cb204-25"><a href="#cb204-25" aria-hidden="true" tabindex="-1"></a>        src<span class="op">++;</span></span>
<span id="cb204-26"><a href="#cb204-26" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb204-27"><a href="#cb204-27" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>dest <span class="op">=</span> <span class="ch">&#39;</span><span class="er">&#39;</span><span class="op">;</span>  <span class="co">/* nll終端文字を追加 */</span></span>
<span id="cb204-28"><a href="#cb204-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb204-29"><a href="#cb204-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb204-30"><a href="#cb204-30" aria-hidden="true" tabindex="-1"></a><span class="co">/* 文字列を連結（ポインタ版） */</span></span>
<span id="cb204-31"><a href="#cb204-31" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> string_concat<span class="op">(</span><span class="dt">char</span> <span class="op">*</span>dest<span class="op">,</span> <span class="dt">char</span> <span class="op">*</span>src<span class="op">)</span></span>
<span id="cb204-32"><a href="#cb204-32" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb204-33"><a href="#cb204-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb204-34"><a href="#cb204-34" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* destの末尾を見2つける */</span></span>
<span id="cb204-35"><a href="#cb204-35" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(*</span>dest <span class="op">!=</span> <span class="ch">&#39;</span><span class="er">&#39;</span><span class="op">)</span> </span>
<span id="cb204-36"><a href="#cb204-36" aria-hidden="true" tabindex="-1"></a>        dest<span class="op">++;</span></span>
<span id="cb204-37"><a href="#cb204-37" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb204-38"><a href="#cb204-38" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb204-39"><a href="#cb204-39" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* srcをdestの末尾に追加 */</span></span>
<span id="cb204-40"><a href="#cb204-40" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(*</span>src <span class="op">!=</span> <span class="ch">&#39;</span><span class="er">&#39;</span><span class="op">)</span> </span>
<span id="cb204-41"><a href="#cb204-41" aria-hidden="true" tabindex="-1"></a>        <span class="op">*</span>dest <span class="op">=</span> <span class="op">*</span>src<span class="op">;</span></span>
<span id="cb204-42"><a href="#cb204-42" aria-hidden="true" tabindex="-1"></a>        dest<span class="op">++;</span></span>
<span id="cb204-43"><a href="#cb204-43" aria-hidden="true" tabindex="-1"></a>        src<span class="op">++;</span></span>
<span id="cb204-44"><a href="#cb204-44" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb204-45"><a href="#cb204-45" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>dest <span class="op">=</span> <span class="ch">&#39;</span><span class="er">&#39;</span><span class="op">;</span></span>
<span id="cb204-46"><a href="#cb204-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb204-47"><a href="#cb204-47" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb204-48"><a href="#cb204-48" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb204-49"><a href="#cb204-49" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb204-50"><a href="#cb204-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb204-51"><a href="#cb204-51" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> str<span class="op">[]</span> <span class="op">=</span> <span class="st">&quot;Hello&quot;</span><span class="op">;</span></span>
<span id="cb204-52"><a href="#cb204-52" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> str<span class="op">[]</span> <span class="op">=</span> <span class="st">&quot;World&quot;</span><span class="op">;</span></span>
<span id="cb204-53"><a href="#cb204-53" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> bffer<span class="op">[];</span></span>
<span id="cb204-54"><a href="#cb204-54" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> result<span class="op">[];</span></span>
<span id="cb204-55"><a href="#cb204-55" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb204-56"><a href="#cb204-56" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;元の文字列: &quot;</span><span class="op">%</span>s<span class="st">&quot;, &quot;</span><span class="op">%</span>s<span class="st">&quot;n&quot;</span><span class="op">,</span> str<span class="op">,</span> str<span class="op">);</span></span>
<span id="cb204-57"><a href="#cb204-57" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb204-58"><a href="#cb204-58" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 長さの計算 */</span></span>
<span id="cb204-59"><a href="#cb204-59" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;strの長さ: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> string_length<span class="op">(</span>str<span class="op">));</span></span>
<span id="cb204-60"><a href="#cb204-60" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;strの長さ: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> string_length<span class="op">(</span>str<span class="op">));</span></span>
<span id="cb204-61"><a href="#cb204-61" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb204-62"><a href="#cb204-62" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 文字列のコピー */</span></span>
<span id="cb204-63"><a href="#cb204-63" aria-hidden="true" tabindex="-1"></a>    string_copy<span class="op">(</span>bffer<span class="op">,</span> str<span class="op">);</span></span>
<span id="cb204-64"><a href="#cb204-64" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;コピー結果: &quot;</span><span class="op">%</span>s<span class="st">&quot;n&quot;</span><span class="op">,</span> bffer<span class="op">);</span></span>
<span id="cb204-65"><a href="#cb204-65" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb204-66"><a href="#cb204-66" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 文字列の連結 */</span></span>
<span id="cb204-67"><a href="#cb204-67" aria-hidden="true" tabindex="-1"></a>    string_copy<span class="op">(</span>result<span class="op">,</span> str<span class="op">);</span>  <span class="co">/* まずstrをコピー */</span></span>
<span id="cb204-68"><a href="#cb204-68" aria-hidden="true" tabindex="-1"></a>    string_concat<span class="op">(</span>result<span class="op">,</span> <span class="st">&quot;, &quot;</span><span class="op">);</span></span>
<span id="cb204-69"><a href="#cb204-69" aria-hidden="true" tabindex="-1"></a>    string_concat<span class="op">(</span>result<span class="op">,</span> str<span class="op">);</span></span>
<span id="cb204-70"><a href="#cb204-70" aria-hidden="true" tabindex="-1"></a>    string_concat<span class="op">(</span>result<span class="op">,</span> <span class="st">&quot;!&quot;</span><span class="op">);</span></span>
<span id="cb204-71"><a href="#cb204-71" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;連結結果: &quot;</span><span class="op">%</span>s<span class="st">&quot;n&quot;</span><span class="op">,</span> result<span class="op">);</span></span>
<span id="cb204-72"><a href="#cb204-72" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb204-73"><a href="#cb204-73" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">;</span></span></code></pre></div>
<h3 id="ポインタの配列">ポインタの配列</h3>
<h4 id="ポインタ配列の基本">ポインタ配列の基本</h4>
<div class="sourceCode" id="cb205"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb205-1"><a href="#cb205-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb205-2"><a href="#cb205-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb205-3"><a href="#cb205-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb205-4"><a href="#cb205-4" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb205-5"><a href="#cb205-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb205-6"><a href="#cb205-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> a <span class="op">=</span> <span class="op">,</span> b <span class="op">=</span> <span class="op">,</span> c <span class="op">=</span> <span class="op">,</span> d <span class="op">=</span> <span class="op">;</span></span>
<span id="cb205-7"><a href="#cb205-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> <span class="op">*</span>ptr_array<span class="op">[];</span>  <span class="co">/* ポインタの配列 */</span></span>
<span id="cb205-8"><a href="#cb205-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb205-9"><a href="#cb205-9" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb205-10"><a href="#cb205-10" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* ポインタ配列に各変数のアドレスを格納 */</span></span>
<span id="cb205-11"><a href="#cb205-11" aria-hidden="true" tabindex="-1"></a>    ptr_array<span class="op">[]</span> <span class="op">=</span> <span class="op">&amp;</span>a<span class="op">;</span></span>
<span id="cb205-12"><a href="#cb205-12" aria-hidden="true" tabindex="-1"></a>    ptr_array<span class="op">[]</span> <span class="op">=</span> <span class="op">&amp;</span>b<span class="op">;</span></span>
<span id="cb205-13"><a href="#cb205-13" aria-hidden="true" tabindex="-1"></a>    ptr_array<span class="op">[]</span> <span class="op">=</span> <span class="op">&amp;</span>c<span class="op">;</span></span>
<span id="cb205-14"><a href="#cb205-14" aria-hidden="true" tabindex="-1"></a>    ptr_array<span class="op">[]</span> <span class="op">=</span> <span class="op">&amp;</span>d<span class="op">;</span></span>
<span id="cb205-15"><a href="#cb205-15" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb205-16"><a href="#cb205-16" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== ポインタ配列の内容 ===n&quot;</span><span class="op">);</span></span>
<span id="cb205-17"><a href="#cb205-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="op">;</span> i <span class="op">&lt;</span> <span class="op">;</span> i<span class="op">++)</span> </span>
<span id="cb205-18"><a href="#cb205-18" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;ptr_array[</span><span class="sc">%d</span><span class="st">] = </span><span class="sc">%p</span><span class="st">, *ptr_array[</span><span class="sc">%d</span><span class="st">] = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span></span>
<span id="cb205-19"><a href="#cb205-19" aria-hidden="true" tabindex="-1"></a>               i<span class="op">,</span> <span class="op">(</span><span class="dt">void</span><span class="op">*)</span>ptr_array<span class="op">[</span>i<span class="op">],</span> i<span class="op">,</span> <span class="op">*</span>ptr_array<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb205-20"><a href="#cb205-20" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb205-21"><a href="#cb205-21" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb205-22"><a href="#cb205-22" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* ポインタを通じて値を変更 */</span></span>
<span id="cb205-23"><a href="#cb205-23" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>ptr_array<span class="op">[]</span> <span class="op">=</span> <span class="op">;</span></span>
<span id="cb205-24"><a href="#cb205-24" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>ptr_array<span class="op">[]</span> <span class="op">=</span> <span class="op">;</span></span>
<span id="cb205-25"><a href="#cb205-25" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb205-26"><a href="#cb205-26" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;n=== 変更後の値 ===n&quot;</span><span class="op">);</span></span>
<span id="cb205-27"><a href="#cb205-27" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;a = </span><span class="sc">%d</span><span class="st">, b = </span><span class="sc">%d</span><span class="st">, c = </span><span class="sc">%d</span><span class="st">, d = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> a<span class="op">,</span> b<span class="op">,</span> c<span class="op">,</span> d<span class="op">);</span></span>
<span id="cb205-28"><a href="#cb205-28" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb205-29"><a href="#cb205-29" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">;</span></span></code></pre></div>
<h4 id="文字列ポインタの配列">文字列ポインタの配列</h4>
<div class="sourceCode" id="cb206"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb206-1"><a href="#cb206-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb206-2"><a href="#cb206-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb206-3"><a href="#cb206-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb206-4"><a href="#cb206-4" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb206-5"><a href="#cb206-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb206-6"><a href="#cb206-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> <span class="op">*</span>frits<span class="op">[]</span> <span class="op">=</span> </span>
<span id="cb206-7"><a href="#cb206-7" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;Apple&quot;</span><span class="op">,</span></span>
<span id="cb206-8"><a href="#cb206-8" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;anana&quot;</span><span class="op">,</span></span>
<span id="cb206-9"><a href="#cb206-9" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;Cherry&quot;</span><span class="op">,</span></span>
<span id="cb206-10"><a href="#cb206-10" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;Date&quot;</span><span class="op">,</span></span>
<span id="cb206-11"><a href="#cb206-11" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;lderberry&quot;</span></span>
<span id="cb206-12"><a href="#cb206-12" aria-hidden="true" tabindex="-1"></a>    <span class="op">;</span></span>
<span id="cb206-13"><a href="#cb206-13" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> count <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>frits<span class="op">)</span> <span class="op">/</span> <span class="kw">sizeof</span><span class="op">(</span>frits<span class="op">[]);</span></span>
<span id="cb206-14"><a href="#cb206-14" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb206-15"><a href="#cb206-15" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb206-16"><a href="#cb206-16" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== 果物リスト ===n&quot;</span><span class="op">);</span></span>
<span id="cb206-17"><a href="#cb206-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="op">;</span> i <span class="op">&lt;</span> count<span class="op">;</span> i<span class="op">++)</span> </span>
<span id="cb206-18"><a href="#cb206-18" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st">. </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> i <span class="op">+</span> <span class="op">,</span> frits<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb206-19"><a href="#cb206-19" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb206-20"><a href="#cb206-20" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb206-21"><a href="#cb206-21" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* ポインタの変更 */</span></span>
<span id="cb206-22"><a href="#cb206-22" aria-hidden="true" tabindex="-1"></a>    frits<span class="op">[]</span> <span class="op">=</span> <span class="st">&quot;leberry&quot;</span><span class="op">;</span></span>
<span id="cb206-23"><a href="#cb206-23" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb206-24"><a href="#cb206-24" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;n=== 変更後 ===n&quot;</span><span class="op">);</span></span>
<span id="cb206-25"><a href="#cb206-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="op">;</span> i <span class="op">&lt;</span> count<span class="op">;</span> i<span class="op">++)</span> </span>
<span id="cb206-26"><a href="#cb206-26" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st">. </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> i <span class="op">+</span> <span class="op">,</span> frits<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb206-27"><a href="#cb206-27" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb206-28"><a href="#cb206-28" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb206-29"><a href="#cb206-29" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">;</span></span></code></pre></div>
<h3 id="実践的なポインタ活用例">実践的なポインタ活用例</h3>
<h4 id="動的配列の操作">動的配列の操作</h4>
<div class="sourceCode" id="cb207"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb207-1"><a href="#cb207-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb207-2"><a href="#cb207-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb207-3"><a href="#cb207-3" aria-hidden="true" tabindex="-1"></a><span class="co">/* 配列内の要素を逆順にする */</span></span>
<span id="cb207-4"><a href="#cb207-4" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> reverse_array<span class="op">(</span><span class="dt">int</span> <span class="op">*</span>arr<span class="op">,</span> <span class="dt">int</span> size<span class="op">)</span></span>
<span id="cb207-5"><a href="#cb207-5" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb207-6"><a href="#cb207-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb207-7"><a href="#cb207-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> <span class="op">*</span>start <span class="op">=</span> arr<span class="op">;</span></span>
<span id="cb207-8"><a href="#cb207-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> <span class="op">*</span>end <span class="op">=</span> arr <span class="op">+</span> size <span class="op">-</span> <span class="op">;</span></span>
<span id="cb207-9"><a href="#cb207-9" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> temp<span class="op">;</span></span>
<span id="cb207-10"><a href="#cb207-10" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb207-11"><a href="#cb207-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>start <span class="op">&lt;</span> end<span class="op">)</span> </span>
<span id="cb207-12"><a href="#cb207-12" aria-hidden="true" tabindex="-1"></a>        temp <span class="op">=</span> <span class="op">*</span>start<span class="op">;</span></span>
<span id="cb207-13"><a href="#cb207-13" aria-hidden="true" tabindex="-1"></a>        <span class="op">*</span>start <span class="op">=</span> <span class="op">*</span>end<span class="op">;</span></span>
<span id="cb207-14"><a href="#cb207-14" aria-hidden="true" tabindex="-1"></a>        <span class="op">*</span>end <span class="op">=</span> temp<span class="op">;</span></span>
<span id="cb207-15"><a href="#cb207-15" aria-hidden="true" tabindex="-1"></a>        start<span class="op">++;</span></span>
<span id="cb207-16"><a href="#cb207-16" aria-hidden="true" tabindex="-1"></a>        end<span class="op">--;</span></span>
<span id="cb207-17"><a href="#cb207-17" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb207-18"><a href="#cb207-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb207-19"><a href="#cb207-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb207-20"><a href="#cb207-20" aria-hidden="true" tabindex="-1"></a><span class="co">/* 配列を1回転させる（右につシフト） */</span></span>
<span id="cb207-21"><a href="#cb207-21" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> rotate_right<span class="op">(</span><span class="dt">int</span> <span class="op">*</span>arr<span class="op">,</span> <span class="dt">int</span> size<span class="op">)</span></span>
<span id="cb207-22"><a href="#cb207-22" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb207-23"><a href="#cb207-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb207-24"><a href="#cb207-24" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> last <span class="op">=</span> <span class="op">*(</span>arr <span class="op">+</span> size <span class="op">-</span> <span class="op">);</span></span>
<span id="cb207-25"><a href="#cb207-25" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb207-26"><a href="#cb207-26" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb207-27"><a href="#cb207-27" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> size <span class="op">-</span> <span class="op">;</span> i <span class="op">&gt;</span> <span class="op">;</span> i<span class="op">--)</span> </span>
<span id="cb207-28"><a href="#cb207-28" aria-hidden="true" tabindex="-1"></a>        <span class="op">*(</span>arr <span class="op">+</span> i<span class="op">)</span> <span class="op">=</span> <span class="op">*(</span>arr <span class="op">+</span> i <span class="op">-</span> <span class="op">);</span></span>
<span id="cb207-29"><a href="#cb207-29" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb207-30"><a href="#cb207-30" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>arr <span class="op">=</span> last<span class="op">;</span></span>
<span id="cb207-31"><a href="#cb207-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb207-32"><a href="#cb207-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb207-33"><a href="#cb207-33" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb207-34"><a href="#cb207-34" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb207-35"><a href="#cb207-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb207-36"><a href="#cb207-36" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> numbers<span class="op">[]</span> <span class="op">=</span> <span class="op">,</span> <span class="op">,</span> <span class="op">,</span> <span class="op">,</span> <span class="op">,</span> <span class="op">,</span> <span class="op">,</span> <span class="op">;</span></span>
<span id="cb207-37"><a href="#cb207-37" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> size <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>numbers<span class="op">)</span> <span class="op">/</span> <span class="kw">sizeof</span><span class="op">(</span>numbers<span class="op">[]);</span></span>
<span id="cb207-38"><a href="#cb207-38" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb207-39"><a href="#cb207-39" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb207-40"><a href="#cb207-40" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;元の配列: &quot;</span><span class="op">);</span></span>
<span id="cb207-41"><a href="#cb207-41" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="op">;</span> i <span class="op">&lt;</span> size<span class="op">;</span> i<span class="op">++)</span> </span>
<span id="cb207-42"><a href="#cb207-42" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st"> &quot;</span><span class="op">,</span> numbers<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb207-43"><a href="#cb207-43" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb207-44"><a href="#cb207-44" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;n&quot;</span><span class="op">);</span></span>
<span id="cb207-45"><a href="#cb207-45" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb207-46"><a href="#cb207-46" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 配列を逆順にする */</span></span>
<span id="cb207-47"><a href="#cb207-47" aria-hidden="true" tabindex="-1"></a>    reverse_array<span class="op">(</span>numbers<span class="op">,</span> size<span class="op">);</span></span>
<span id="cb207-48"><a href="#cb207-48" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;逆順後: &quot;</span><span class="op">);</span></span>
<span id="cb207-49"><a href="#cb207-49" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="op">;</span> i <span class="op">&lt;</span> size<span class="op">;</span> i<span class="op">++)</span> </span>
<span id="cb207-50"><a href="#cb207-50" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st"> &quot;</span><span class="op">,</span> numbers<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb207-51"><a href="#cb207-51" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb207-52"><a href="#cb207-52" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;n&quot;</span><span class="op">);</span></span>
<span id="cb207-53"><a href="#cb207-53" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb207-54"><a href="#cb207-54" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 配列を右に1回転 */</span></span>
<span id="cb207-55"><a href="#cb207-55" aria-hidden="true" tabindex="-1"></a>    rotate_right<span class="op">(</span>numbers<span class="op">,</span> size<span class="op">);</span></span>
<span id="cb207-56"><a href="#cb207-56" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;右1回転後: &quot;</span><span class="op">);</span></span>
<span id="cb207-57"><a href="#cb207-57" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="op">;</span> i <span class="op">&lt;</span> size<span class="op">;</span> i<span class="op">++)</span> </span>
<span id="cb207-58"><a href="#cb207-58" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st"> &quot;</span><span class="op">,</span> numbers<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb207-59"><a href="#cb207-59" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb207-60"><a href="#cb207-60" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;n&quot;</span><span class="op">);</span></span>
<span id="cb207-61"><a href="#cb207-61" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb207-62"><a href="#cb207-62" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">;</span></span></code></pre></div>
<h4 id="ポインタを使ったソート">ポインタを使ったソート</h4>
<div class="sourceCode" id="cb208"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb208-1"><a href="#cb208-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb208-2"><a href="#cb208-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb208-3"><a href="#cb208-3" aria-hidden="true" tabindex="-1"></a><span class="co">/* ポインタを使ったバブルソート */</span></span>
<span id="cb208-4"><a href="#cb208-4" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> bbble_sort_ptr<span class="op">(</span><span class="dt">int</span> <span class="op">*</span>arr<span class="op">,</span> <span class="dt">int</span> size<span class="op">)</span></span>
<span id="cb208-5"><a href="#cb208-5" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb208-6"><a href="#cb208-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb208-7"><a href="#cb208-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">,</span> j<span class="op">;</span></span>
<span id="cb208-8"><a href="#cb208-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> <span class="op">*</span>ptr<span class="op">,</span> <span class="op">*</span>ptr<span class="op">;</span></span>
<span id="cb208-9"><a href="#cb208-9" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> temp<span class="op">;</span></span>
<span id="cb208-10"><a href="#cb208-10" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb208-11"><a href="#cb208-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="op">;</span> i <span class="op">&lt;</span> size <span class="op">-</span> <span class="op">;</span> i<span class="op">++)</span> </span>
<span id="cb208-12"><a href="#cb208-12" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span>j <span class="op">=</span> <span class="op">;</span> j <span class="op">&lt;</span> size <span class="op">-</span>  <span class="op">-</span> i<span class="op">;</span> j<span class="op">++)</span> </span>
<span id="cb208-13"><a href="#cb208-13" aria-hidden="true" tabindex="-1"></a>            ptr <span class="op">=</span> arr <span class="op">+</span> j<span class="op">;</span></span>
<span id="cb208-14"><a href="#cb208-14" aria-hidden="true" tabindex="-1"></a>            ptr <span class="op">=</span> arr <span class="op">+</span> j <span class="op">+</span> <span class="op">;</span></span>
<span id="cb208-15"><a href="#cb208-15" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb208-16"><a href="#cb208-16" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(*</span>ptr <span class="op">&gt;</span> <span class="op">*</span>ptr<span class="op">)</span> </span>
<span id="cb208-17"><a href="#cb208-17" aria-hidden="true" tabindex="-1"></a>                temp <span class="op">=</span> <span class="op">*</span>ptr<span class="op">;</span></span>
<span id="cb208-18"><a href="#cb208-18" aria-hidden="true" tabindex="-1"></a>                <span class="op">*</span>ptr <span class="op">=</span> <span class="op">*</span>ptr<span class="op">;</span></span>
<span id="cb208-19"><a href="#cb208-19" aria-hidden="true" tabindex="-1"></a>                <span class="op">*</span>ptr <span class="op">=</span> temp<span class="op">;</span></span>
<span id="cb208-20"><a href="#cb208-20" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb208-21"><a href="#cb208-21" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb208-22"><a href="#cb208-22" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb208-23"><a href="#cb208-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb208-24"><a href="#cb208-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb208-25"><a href="#cb208-25" aria-hidden="true" tabindex="-1"></a><span class="co">/* 2つの配列を比較 */</span></span>
<span id="cb208-26"><a href="#cb208-26" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> compare_arrays<span class="op">(</span><span class="dt">int</span> <span class="op">*</span>arr<span class="op">,</span> <span class="dt">int</span> <span class="op">*</span>arr<span class="op">,</span> <span class="dt">int</span> size<span class="op">)</span></span>
<span id="cb208-27"><a href="#cb208-27" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb208-28"><a href="#cb208-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb208-29"><a href="#cb208-29" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb208-30"><a href="#cb208-30" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb208-31"><a href="#cb208-31" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="op">;</span> i <span class="op">&lt;</span> size<span class="op">;</span> i<span class="op">++)</span> </span>
<span id="cb208-32"><a href="#cb208-32" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(*(</span>arr <span class="op">+</span> i<span class="op">)</span> <span class="op">!=</span> <span class="op">*(</span>arr <span class="op">+</span> i<span class="op">))</span> </span>
<span id="cb208-33"><a href="#cb208-33" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> <span class="op">;</span>  <span class="co">/* 異なる */</span></span>
<span id="cb208-34"><a href="#cb208-34" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb208-35"><a href="#cb208-35" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb208-36"><a href="#cb208-36" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb208-37"><a href="#cb208-37" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">;</span>  <span class="co">/* 同じ */</span></span>
<span id="cb208-38"><a href="#cb208-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb208-39"><a href="#cb208-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb208-40"><a href="#cb208-40" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb208-41"><a href="#cb208-41" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb208-42"><a href="#cb208-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb208-43"><a href="#cb208-43" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> original<span class="op">[]</span> <span class="op">=</span> <span class="op">,</span> <span class="op">,</span> <span class="op">,</span> <span class="op">,</span> <span class="op">,</span> <span class="op">,</span> <span class="dv">9</span><span class="op">;</span></span>
<span id="cb208-44"><a href="#cb208-44" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> copy<span class="op">[]</span> <span class="op">=</span> <span class="op">,</span> <span class="op">,</span> <span class="op">,</span> <span class="op">,</span> <span class="op">,</span> <span class="op">,</span> <span class="dv">9</span><span class="op">;</span></span>
<span id="cb208-45"><a href="#cb208-45" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> size <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>original<span class="op">)</span> <span class="op">/</span> <span class="kw">sizeof</span><span class="op">(</span>original<span class="op">[]);</span></span>
<span id="cb208-46"><a href="#cb208-46" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb208-47"><a href="#cb208-47" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb208-48"><a href="#cb208-48" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ソート前: &quot;</span><span class="op">);</span></span>
<span id="cb208-49"><a href="#cb208-49" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="op">;</span> i <span class="op">&lt;</span> size<span class="op">;</span> i<span class="op">++)</span> </span>
<span id="cb208-50"><a href="#cb208-50" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st"> &quot;</span><span class="op">,</span> original<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb208-51"><a href="#cb208-51" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb208-52"><a href="#cb208-52" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;n&quot;</span><span class="op">);</span></span>
<span id="cb208-53"><a href="#cb208-53" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb208-54"><a href="#cb208-54" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* ソート実行 */</span></span>
<span id="cb208-55"><a href="#cb208-55" aria-hidden="true" tabindex="-1"></a>    bbble_sort_ptr<span class="op">(</span>original<span class="op">,</span> size<span class="op">);</span></span>
<span id="cb208-56"><a href="#cb208-56" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb208-57"><a href="#cb208-57" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ソート後: &quot;</span><span class="op">);</span></span>
<span id="cb208-58"><a href="#cb208-58" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="op">;</span> i <span class="op">&lt;</span> size<span class="op">;</span> i<span class="op">++)</span> </span>
<span id="cb208-59"><a href="#cb208-59" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st"> &quot;</span><span class="op">,</span> original<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb208-60"><a href="#cb208-60" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb208-61"><a href="#cb208-61" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;n&quot;</span><span class="op">);</span></span>
<span id="cb208-62"><a href="#cb208-62" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb208-63"><a href="#cb208-63" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 配列の比較 */</span></span>
<span id="cb208-64"><a href="#cb208-64" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>compare_arrays<span class="op">(</span>original<span class="op">,</span> copy<span class="op">,</span> size<span class="op">))</span> </span>
<span id="cb208-65"><a href="#cb208-65" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;配列は同じですn&quot;</span><span class="op">);</span></span>
<span id="cb208-66"><a href="#cb208-66" aria-hidden="true" tabindex="-1"></a>     <span class="cf">else</span> </span>
<span id="cb208-67"><a href="#cb208-67" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;配列は異なりますn&quot;</span><span class="op">);</span></span>
<span id="cb208-68"><a href="#cb208-68" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb208-69"><a href="#cb208-69" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb208-70"><a href="#cb208-70" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">;</span></span></code></pre></div>
<h2 id="サンプルコード-14">サンプルコード</h2>
<h3 id="ポインタの基本操作">ポインタの基本操作</h3>
<p>プログラムファイル: <code>examples/pointer_basic.c</code></p>
<p>ポインタの宣言、初期化、基本的な操作を学習します。</p>
<p><strong>C99版</strong>: <a
href="examples/pointer_basic_c99.c">pointer_basic_c99.c</a> -
bool型、restrict修飾子、固定幅整数型を使用</p>
<h3 id="ポインタと配列">ポインタと配列</h3>
<p>プログラムファイル: <code>examples/pointer_arrays.c</code></p>
<p>ポインタと配列の関係、ポインタ演算を学習します。</p>
<p><strong>C99版</strong>: <a
href="examples/pointer_arrays_c99.c">pointer_arrays_c99.c</a> -
可変長配列、複合リテラル、指定初期化子を使用</p>
<h3 id="ポインタと関数-1">ポインタと関数</h3>
<p>プログラムファイル: <code>examples/pointer_functions.c</code></p>
<p>関数引数、戻り値としてのポインタの使用方法を学習します。</p>
<p><strong>C99版</strong>: <a
href="examples/pointer_functions_c99.c">pointer_functions_c99.c</a> -
インライン関数、restrict修飾子、可変長配列パラメータを使用</p>
<h3 id="コンパイルと実行-8">コンパイルと実行</h3>
<div class="sourceCode" id="cb209"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb209-1"><a href="#cb209-1" aria-hidden="true" tabindex="-1"></a><span class="co"># examples ディレクトリに移動</span></span>
<span id="cb209-2"><a href="#cb209-2" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> examples</span>
<span id="cb209-3"><a href="#cb209-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb209-4"><a href="#cb209-4" aria-hidden="true" tabindex="-1"></a><span class="co"># C90準拠でコンパイル</span></span>
<span id="cb209-5"><a href="#cb209-5" aria-hidden="true" tabindex="-1"></a><span class="fu">gcc</span> <span class="at">-std</span><span class="op">=</span>c90 <span class="at">-Wall</span> <span class="at">-Wextra</span> <span class="at">-pedantic</span> pointer_basic.c <span class="at">-o</span> pointer_basic</span>
<span id="cb209-6"><a href="#cb209-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb209-7"><a href="#cb209-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 実行</span></span>
<span id="cb209-8"><a href="#cb209-8" aria-hidden="true" tabindex="-1"></a><span class="ex">./pointer_basic</span></span></code></pre></div>
<h2 id="演習課題-7">演習課題</h2>
<h3 id="基礎問題-7">基礎問題</h3>
<ol type="1">
<li><strong>ポインタの基本操作</strong>
<ul>
<li>2つの変数の値をポインタを使って交換するプログラムを作成してください</li>
<li>解答例: <a
href="solutions/ex1_pointer_swap.c">solutions/ex1_pointer_swap.c</a>
(C90版) / <a
href="solutions/ex1_pointer_swap_c99.c">solutions/ex1_pointer_swap_c99.c</a>
(C99版)</li>
</ul></li>
<li><strong>配列とポインタ</strong>
<ul>
<li>ポインタ演算を使って配列の要素を逆順に表示するプログラムを作成してください</li>
<li>解答例: <a
href="solutions/ex2_array_reverse.c">solutions/ex2_array_reverse.c</a>
(C90版) / <a
href="solutions/ex2_array_reverse_c99.c">solutions/ex2_array_reverse_c99.c</a>
(C99版)</li>
</ul></li>
<li><strong>文字列操作</strong>
<ul>
<li>ポインタを使って文字列の長さを計算し、文字列を逆順にするプログラムを作成してください</li>
</ul></li>
</ol>
<h3 id="応用問題-7">応用問題</h3>
<ol start="4" type="1">
<li><strong>配列操作関数</strong>
<ul>
<li>ポインタを使って配列の最大値、最小値、平均値を計算する関数を作成してください</li>
</ul></li>
<li><strong>文字列処理</strong>
<ul>
<li>ポインタを使って文字列の検索、置換、分割を実行する関数群を作成してください</li>
</ul></li>
<li><strong>データ変換</strong>
<ul>
<li>ポインタを使って配列のデータ型変換を実行するプログラムを作成してください</li>
</ul></li>
</ol>
<h3 id="発展問題-2">発展問題</h3>
<ol start="7" type="1">
<li><strong>メモリ操作</strong>
<ul>
<li>ポインタを使って任意のデータ型の配列をコピーする汎用関数を作成してください</li>
</ul></li>
<li><strong>アルゴリズム実装</strong>
<ul>
<li>ポインタを使って各種ソートアルゴリズムを実装してください</li>
</ul></li>
<li><strong>データ構造</strong>
<ul>
<li>ポインタを使って簡単なリンクリスト構造を実装してください</li>
</ul></li>
</ol>
<h2 id="コンパイル方法-8">コンパイル方法</h2>
<p>この章では以下のMakefileを使用してコンパイルができます：</p>
<div class="sourceCode" id="cb210"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb210-1"><a href="#cb210-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 全ての例題をコンパイル</span></span>
<span id="cb210-2"><a href="#cb210-2" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> all</span>
<span id="cb210-3"><a href="#cb210-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb210-4"><a href="#cb210-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 特定のプログラムをコンパイル</span></span>
<span id="cb210-5"><a href="#cb210-5" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> pointer_basic</span>
<span id="cb210-6"><a href="#cb210-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb210-7"><a href="#cb210-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 実行</span></span>
<span id="cb210-8"><a href="#cb210-8" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> run</span>
<span id="cb210-9"><a href="#cb210-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb210-10"><a href="#cb210-10" aria-hidden="true" tabindex="-1"></a><span class="co"># クリーンアップ</span></span>
<span id="cb210-11"><a href="#cb210-11" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> clean</span></code></pre></div>
<h2 id="規格による違い-7">規格による違い</h2>
<h3 id="c90での制限事項-6">C90での制限事項</h3>
<ul>
<li>void*からの暗黙的な型変換は制限的</li>
<li>ポインタ演算は整数型との組み合わせのみ</li>
<li>関数ポインタの表記法は限定的</li>
</ul>
<h3 id="c99以降の拡張-6">C99以降の拡張</h3>
<ul>
<li>restrict修飾子の追加</li>
<li>可変長配列とポインタの関係改善</li>
<li>より厳密なポインタ型チェック</li>
</ul>
<h2 id="よくある間違い-5">よくある間違い</h2>
<h3 id="未初期化ポインタの使用">1. 未初期化ポインタの使用</h3>
<div class="sourceCode" id="cb211"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb211-1"><a href="#cb211-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* NG: 初期化されていないポインタ */</span></span>
<span id="cb211-2"><a href="#cb211-2" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> <span class="op">*</span>ptr<span class="op">;</span></span>
<span id="cb211-3"><a href="#cb211-3" aria-hidden="true" tabindex="-1"></a><span class="op">*</span>ptr <span class="op">=</span> <span class="dv">10</span><span class="op">;</span>  <span class="co">/* 危険: 不明なメモリへの書き込み */</span></span>
<span id="cb211-4"><a href="#cb211-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb211-5"><a href="#cb211-5" aria-hidden="true" tabindex="-1"></a><span class="co">/* OK: 適切に初期化 */</span></span>
<span id="cb211-6"><a href="#cb211-6" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> value <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb211-7"><a href="#cb211-7" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> <span class="op">*</span>ptr <span class="op">=</span> <span class="op">&amp;</span>value<span class="op">;</span></span>
<span id="cb211-8"><a href="#cb211-8" aria-hidden="true" tabindex="-1"></a><span class="op">*</span>ptr <span class="op">=</span> <span class="dv">10</span><span class="op">;</span></span></code></pre></div>
<h3 id="nullポインタの参照">2. NULLポインタの参照</h3>
<div class="sourceCode" id="cb212"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb212-1"><a href="#cb212-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* NG: NULLポインタの参照 */</span></span>
<span id="cb212-2"><a href="#cb212-2" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> <span class="op">*</span>ptr <span class="op">=</span> NULL<span class="op">;</span></span>
<span id="cb212-3"><a href="#cb212-3" aria-hidden="true" tabindex="-1"></a>printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">*</span>ptr<span class="op">);</span>  <span class="co">/* セグメンテーション違反 */</span></span>
<span id="cb212-4"><a href="#cb212-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-5"><a href="#cb212-5" aria-hidden="true" tabindex="-1"></a><span class="co">/* OK: NULLチェック */</span></span>
<span id="cb212-6"><a href="#cb212-6" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="op">(</span>ptr <span class="op">!=</span> NULL<span class="op">)</span> <span class="op">{</span></span>
<span id="cb212-7"><a href="#cb212-7" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">*</span>ptr<span class="op">);</span></span>
<span id="cb212-8"><a href="#cb212-8" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 id="スコープ外変数へのポインタ">3. スコープ外変数へのポインタ</h3>
<div class="sourceCode" id="cb213"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb213-1"><a href="#cb213-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* NG: ローカル変数のアドレス返し */</span></span>
<span id="cb213-2"><a href="#cb213-2" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span><span class="op">*</span> bad_function<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb213-3"><a href="#cb213-3" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb213-4"><a href="#cb213-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> local <span class="op">=</span> <span class="dv">100</span><span class="op">;</span></span>
<span id="cb213-5"><a href="#cb213-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">&amp;</span>local<span class="op">;</span>  <span class="co">/* 危険: ローカル変数のアドレス */</span></span>
<span id="cb213-6"><a href="#cb213-6" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb213-7"><a href="#cb213-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb213-8"><a href="#cb213-8" aria-hidden="true" tabindex="-1"></a><span class="co">/* OK: 静的変数または引数で渡された変数を使用 */</span></span>
<span id="cb213-9"><a href="#cb213-9" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span><span class="op">*</span> good_function<span class="op">(</span><span class="dt">int</span> <span class="op">*</span>param<span class="op">)</span></span>
<span id="cb213-10"><a href="#cb213-10" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb213-11"><a href="#cb213-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> param<span class="op">;</span>  <span class="co">/* 引数で渡されたアドレスを返す */</span></span>
<span id="cb213-12"><a href="#cb213-12" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 id="配列境界の越えた参照">4. 配列境界の越えた参照</h3>
<div class="sourceCode" id="cb214"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb214-1"><a href="#cb214-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* NG: 配列の範囲外アクセス */</span></span>
<span id="cb214-2"><a href="#cb214-2" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> arr<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">5</span><span class="op">};</span></span>
<span id="cb214-3"><a href="#cb214-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> <span class="op">*</span>ptr <span class="op">=</span> arr<span class="op">;</span></span>
<span id="cb214-4"><a href="#cb214-4" aria-hidden="true" tabindex="-1"></a>printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">*(</span>ptr <span class="op">+</span> <span class="dv">10</span><span class="op">));</span>  <span class="co">/* 範囲外アクセス */</span></span>
<span id="cb214-5"><a href="#cb214-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb214-6"><a href="#cb214-6" aria-hidden="true" tabindex="-1"></a><span class="co">/* OK: 範囲チェック */</span></span>
<span id="cb214-7"><a href="#cb214-7" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> index <span class="op">=</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb214-8"><a href="#cb214-8" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="op">(</span>index <span class="op">&gt;=</span> <span class="dv">0</span> <span class="op">&amp;&amp;</span> index <span class="op">&lt;</span> <span class="dv">5</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb214-9"><a href="#cb214-9" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">*(</span>ptr <span class="op">+</span> index<span class="op">));</span></span>
<span id="cb214-10"><a href="#cb214-10" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h2 id="次の章へ-8">次の章へ</h2>
<p>ポインタの基礎を理解したら、「構造体とポインタ」の実装をお待ちください。現在実装中です。</p>
<h2 id="参考資料-8">参考資料</h2>
<ul>
<li><a
href="https://ja.cppreference.com/w/c/language/pointer">C言語ポインタリファレンス</a></li>
<li><a
href="https://ja.cppreference.com/w/c/language/operautor_arithmetic">ポインタ演算の詳細</a></li>
<li><a
href="https://ja.cppreference.com/w/c/language/memory_model">メモリモデルとポインタ</a></li>
</ul>
<h2 id="サンプルコード-15">サンプルコード</h2>
<h3 id="pointer_arrays.c">pointer_arrays.c</h3>
<div class="sourceCode" id="cb215"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb215-1"><a href="#cb215-1" aria-hidden="true" tabindex="-1"></a><span class="co">/*</span></span>
<span id="cb215-2"><a href="#cb215-2" aria-hidden="true" tabindex="-1"></a><span class="co"> * pointer_arrays.c</span></span>
<span id="cb215-3"><a href="#cb215-3" aria-hidden="true" tabindex="-1"></a><span class="co"> * ポインタと配列の関係、ポインタ演算を学習</span></span>
<span id="cb215-4"><a href="#cb215-4" aria-hidden="true" tabindex="-1"></a><span class="co"> * C90準拠</span></span>
<span id="cb215-5"><a href="#cb215-5" aria-hidden="true" tabindex="-1"></a><span class="co"> */</span></span>
<span id="cb215-6"><a href="#cb215-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb215-7"><a href="#cb215-7" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb215-8"><a href="#cb215-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb215-9"><a href="#cb215-9" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> print_array_with_index<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> size<span class="op">)</span></span>
<span id="cb215-10"><a href="#cb215-10" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb215-11"><a href="#cb215-11" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb215-12"><a href="#cb215-12" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;インデックス記法: &quot;</span><span class="op">);</span></span>
<span id="cb215-13"><a href="#cb215-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> size<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb215-14"><a href="#cb215-14" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st"> &quot;</span><span class="op">,</span> arr<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb215-15"><a href="#cb215-15" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb215-16"><a href="#cb215-16" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb215-17"><a href="#cb215-17" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb215-18"><a href="#cb215-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb215-19"><a href="#cb215-19" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> print_array_with_pointer<span class="op">(</span><span class="dt">int</span> <span class="op">*</span>ptr<span class="op">,</span> <span class="dt">int</span> size<span class="op">)</span></span>
<span id="cb215-20"><a href="#cb215-20" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb215-21"><a href="#cb215-21" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb215-22"><a href="#cb215-22" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ポインタ記法: &quot;</span><span class="op">);</span></span>
<span id="cb215-23"><a href="#cb215-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> size<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb215-24"><a href="#cb215-24" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st"> &quot;</span><span class="op">,</span> <span class="op">*(</span>ptr <span class="op">+</span> i<span class="op">));</span></span>
<span id="cb215-25"><a href="#cb215-25" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb215-26"><a href="#cb215-26" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb215-27"><a href="#cb215-27" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb215-28"><a href="#cb215-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb215-29"><a href="#cb215-29" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> print_array_with_increment<span class="op">(</span><span class="dt">int</span> <span class="op">*</span>ptr<span class="op">,</span> <span class="dt">int</span> size<span class="op">)</span></span>
<span id="cb215-30"><a href="#cb215-30" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb215-31"><a href="#cb215-31" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb215-32"><a href="#cb215-32" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;インクリメント: &quot;</span><span class="op">);</span></span>
<span id="cb215-33"><a href="#cb215-33" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> size<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb215-34"><a href="#cb215-34" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st"> &quot;</span><span class="op">,</span> <span class="op">*</span>ptr<span class="op">);</span></span>
<span id="cb215-35"><a href="#cb215-35" aria-hidden="true" tabindex="-1"></a>        ptr<span class="op">++;</span>  <span class="co">/* ポインタを次の要素に進める */</span></span>
<span id="cb215-36"><a href="#cb215-36" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb215-37"><a href="#cb215-37" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb215-38"><a href="#cb215-38" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb215-39"><a href="#cb215-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb215-40"><a href="#cb215-40" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb215-41"><a href="#cb215-41" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb215-42"><a href="#cb215-42" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> numbers<span class="op">[</span><span class="dv">6</span><span class="op">]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">10</span><span class="op">,</span> <span class="dv">20</span><span class="op">,</span> <span class="dv">30</span><span class="op">,</span> <span class="dv">40</span><span class="op">,</span> <span class="dv">50</span><span class="op">,</span> <span class="dv">60</span><span class="op">};</span></span>
<span id="cb215-43"><a href="#cb215-43" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> <span class="op">*</span>ptr <span class="op">=</span> numbers<span class="op">;</span>  <span class="co">/* 配列名は先頭要素のアドレス */</span></span>
<span id="cb215-44"><a href="#cb215-44" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> size <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>numbers<span class="op">)</span> <span class="op">/</span> <span class="kw">sizeof</span><span class="op">(</span>numbers<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb215-45"><a href="#cb215-45" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb215-46"><a href="#cb215-46" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> <span class="op">*</span>start<span class="op">;</span>     <span class="co">/* C90: ポインタ変数の宣言を先頭に配置 */</span></span>
<span id="cb215-47"><a href="#cb215-47" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> <span class="op">*</span>end<span class="op">;</span></span>
<span id="cb215-48"><a href="#cb215-48" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> message<span class="op">[]</span> <span class="op">=</span> <span class="st">&quot;Hello, World!&quot;</span><span class="op">;</span></span>
<span id="cb215-49"><a href="#cb215-49" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> <span class="op">*</span>str_ptr<span class="op">;</span></span>
<span id="cb215-50"><a href="#cb215-50" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> str_len <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb215-51"><a href="#cb215-51" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> matrix<span class="op">[</span><span class="dv">3</span><span class="op">][</span><span class="dv">4</span><span class="op">]</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb215-52"><a href="#cb215-52" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span><span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">4</span><span class="op">},</span></span>
<span id="cb215-53"><a href="#cb215-53" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span><span class="dv">5</span><span class="op">,</span> <span class="dv">6</span><span class="op">,</span> <span class="dv">7</span><span class="op">,</span> <span class="dv">8</span><span class="op">},</span></span>
<span id="cb215-54"><a href="#cb215-54" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span><span class="dv">9</span><span class="op">,</span> <span class="dv">10</span><span class="op">,</span> <span class="dv">11</span><span class="op">,</span> <span class="dv">12</span><span class="op">}</span></span>
<span id="cb215-55"><a href="#cb215-55" aria-hidden="true" tabindex="-1"></a>    <span class="op">};</span></span>
<span id="cb215-56"><a href="#cb215-56" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> <span class="op">*</span>matrix_ptr<span class="op">;</span></span>
<span id="cb215-57"><a href="#cb215-57" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> total_elements <span class="op">=</span> <span class="dv">3</span> <span class="op">*</span> <span class="dv">4</span><span class="op">;</span></span>
<span id="cb215-58"><a href="#cb215-58" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> a <span class="op">=</span> <span class="dv">100</span><span class="op">,</span> b <span class="op">=</span> <span class="dv">200</span><span class="op">,</span> c <span class="op">=</span> <span class="dv">300</span><span class="op">;</span></span>
<span id="cb215-59"><a href="#cb215-59" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> <span class="op">*</span>ptr_array<span class="op">[</span><span class="dv">3</span><span class="op">];</span>  <span class="co">/* ポインタの配列 */</span></span>
<span id="cb215-60"><a href="#cb215-60" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb215-61"><a href="#cb215-61" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;===== 配列とポインタの関係 =====</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb215-62"><a href="#cb215-62" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;配列名numbers: </span><span class="sc">%p\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(</span><span class="dt">void</span><span class="op">*)</span>numbers<span class="op">);</span></span>
<span id="cb215-63"><a href="#cb215-63" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;&amp;numbers[0]: </span><span class="sc">%p\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(</span><span class="dt">void</span><span class="op">*)&amp;</span>numbers<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb215-64"><a href="#cb215-64" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ポインタptr: </span><span class="sc">%p\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(</span><span class="dt">void</span><span class="op">*)</span>ptr<span class="op">);</span></span>
<span id="cb215-65"><a href="#cb215-65" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;これらはすべて同じアドレスです</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb215-66"><a href="#cb215-66" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb215-67"><a href="#cb215-67" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">===== 配列要素へのアクセス方法 =====</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb215-68"><a href="#cb215-68" aria-hidden="true" tabindex="-1"></a>    print_array_with_index<span class="op">(</span>numbers<span class="op">,</span> size<span class="op">);</span></span>
<span id="cb215-69"><a href="#cb215-69" aria-hidden="true" tabindex="-1"></a>    print_array_with_pointer<span class="op">(</span>ptr<span class="op">,</span> size<span class="op">);</span></span>
<span id="cb215-70"><a href="#cb215-70" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb215-71"><a href="#cb215-71" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* ポインタをリセット（print_array_with_incrementでptrが変更されるため） */</span></span>
<span id="cb215-72"><a href="#cb215-72" aria-hidden="true" tabindex="-1"></a>    ptr <span class="op">=</span> numbers<span class="op">;</span></span>
<span id="cb215-73"><a href="#cb215-73" aria-hidden="true" tabindex="-1"></a>    print_array_with_increment<span class="op">(</span>ptr<span class="op">,</span> size<span class="op">);</span></span>
<span id="cb215-74"><a href="#cb215-74" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb215-75"><a href="#cb215-75" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">===== ポインタ演算の詳細 =====</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb215-76"><a href="#cb215-76" aria-hidden="true" tabindex="-1"></a>    ptr <span class="op">=</span> numbers<span class="op">;</span>  <span class="co">/* 先頭に戻す */</span></span>
<span id="cb215-77"><a href="#cb215-77" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb215-78"><a href="#cb215-78" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> size<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb215-79"><a href="#cb215-79" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;ptr + </span><span class="sc">%d</span><span class="st"> = </span><span class="sc">%p</span><span class="st">, *(ptr + </span><span class="sc">%d</span><span class="st">) = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span></span>
<span id="cb215-80"><a href="#cb215-80" aria-hidden="true" tabindex="-1"></a>               i<span class="op">,</span> <span class="op">(</span><span class="dt">void</span><span class="op">*)(</span>ptr <span class="op">+</span> i<span class="op">),</span> i<span class="op">,</span> <span class="op">*(</span>ptr <span class="op">+</span> i<span class="op">));</span></span>
<span id="cb215-81"><a href="#cb215-81" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb215-82"><a href="#cb215-82" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb215-83"><a href="#cb215-83" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">===== アドレスの差による要素間隔の確認 =====</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb215-84"><a href="#cb215-84" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;numbers[0]のアドレス: </span><span class="sc">%p\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(</span><span class="dt">void</span><span class="op">*)&amp;</span>numbers<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb215-85"><a href="#cb215-85" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;numbers[1]のアドレス: </span><span class="sc">%p\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(</span><span class="dt">void</span><span class="op">*)&amp;</span>numbers<span class="op">[</span><span class="dv">1</span><span class="op">]);</span></span>
<span id="cb215-86"><a href="#cb215-86" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;アドレス差: </span><span class="sc">%ld</span><span class="st"> バイト</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> </span>
<span id="cb215-87"><a href="#cb215-87" aria-hidden="true" tabindex="-1"></a>           <span class="op">(</span><span class="dt">char</span><span class="op">*)&amp;</span>numbers<span class="op">[</span><span class="dv">1</span><span class="op">]</span> <span class="op">-</span> <span class="op">(</span><span class="dt">char</span><span class="op">*)&amp;</span>numbers<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb215-88"><a href="#cb215-88" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;int型のサイズ: </span><span class="sc">%lu</span><span class="st"> バイト</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(</span><span class="dt">unsigned</span> <span class="dt">long</span><span class="op">)</span><span class="kw">sizeof</span><span class="op">(</span><span class="dt">int</span><span class="op">));</span></span>
<span id="cb215-89"><a href="#cb215-89" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb215-90"><a href="#cb215-90" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">===== ポインタによる配列の逆順表示 =====</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb215-91"><a href="#cb215-91" aria-hidden="true" tabindex="-1"></a>    ptr <span class="op">=</span> numbers <span class="op">+</span> size <span class="op">-</span> <span class="dv">1</span><span class="op">;</span>  <span class="co">/* 最後の要素を指す */</span></span>
<span id="cb215-92"><a href="#cb215-92" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;逆順: &quot;</span><span class="op">);</span></span>
<span id="cb215-93"><a href="#cb215-93" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> size<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb215-94"><a href="#cb215-94" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st"> &quot;</span><span class="op">,</span> <span class="op">*</span>ptr<span class="op">);</span></span>
<span id="cb215-95"><a href="#cb215-95" aria-hidden="true" tabindex="-1"></a>        ptr<span class="op">--;</span>  <span class="co">/* ポインタを前の要素に戻す */</span></span>
<span id="cb215-96"><a href="#cb215-96" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb215-97"><a href="#cb215-97" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb215-98"><a href="#cb215-98" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb215-99"><a href="#cb215-99" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">===== ポインタ同士の演算 =====</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb215-100"><a href="#cb215-100" aria-hidden="true" tabindex="-1"></a>    start <span class="op">=</span> <span class="op">&amp;</span>numbers<span class="op">[</span><span class="dv">1</span><span class="op">];</span>  <span class="co">/* numbers[1]を指す */</span></span>
<span id="cb215-101"><a href="#cb215-101" aria-hidden="true" tabindex="-1"></a>    end <span class="op">=</span> <span class="op">&amp;</span>numbers<span class="op">[</span><span class="dv">4</span><span class="op">];</span>    <span class="co">/* numbers[4]を指す */</span></span>
<span id="cb215-102"><a href="#cb215-102" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb215-103"><a href="#cb215-103" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;start が指す値: </span><span class="sc">%d</span><span class="st"> (numbers[1])</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">*</span>start<span class="op">);</span></span>
<span id="cb215-104"><a href="#cb215-104" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;end が指す値: </span><span class="sc">%d</span><span class="st"> (numbers[4])</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">*</span>end<span class="op">);</span></span>
<span id="cb215-105"><a href="#cb215-105" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ポインタの差: </span><span class="sc">%ld</span><span class="st"> (要素数)</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> end <span class="op">-</span> start<span class="op">);</span></span>
<span id="cb215-106"><a href="#cb215-106" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;バイト差: </span><span class="sc">%ld</span><span class="st"> バイト</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(</span><span class="dt">char</span><span class="op">*)</span>end <span class="op">-</span> <span class="op">(</span><span class="dt">char</span><span class="op">*)</span>start<span class="op">);</span></span>
<span id="cb215-107"><a href="#cb215-107" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb215-108"><a href="#cb215-108" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">===== 文字列（文字配列）とポインタ =====</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb215-109"><a href="#cb215-109" aria-hidden="true" tabindex="-1"></a>    str_ptr <span class="op">=</span> message<span class="op">;</span></span>
<span id="cb215-110"><a href="#cb215-110" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb215-111"><a href="#cb215-111" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;文字列: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> message<span class="op">);</span></span>
<span id="cb215-112"><a href="#cb215-112" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;文字ごとの表示: &quot;</span><span class="op">);</span></span>
<span id="cb215-113"><a href="#cb215-113" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb215-114"><a href="#cb215-114" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 文字列の終端（&#39;\0&#39;）まで表示 */</span></span>
<span id="cb215-115"><a href="#cb215-115" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(*</span>str_ptr <span class="op">!=</span> <span class="ch">&#39;</span><span class="sc">\0</span><span class="ch">&#39;</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb215-116"><a href="#cb215-116" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%c</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">*</span>str_ptr<span class="op">);</span></span>
<span id="cb215-117"><a href="#cb215-117" aria-hidden="true" tabindex="-1"></a>        str_ptr<span class="op">++;</span></span>
<span id="cb215-118"><a href="#cb215-118" aria-hidden="true" tabindex="-1"></a>        str_len<span class="op">++;</span></span>
<span id="cb215-119"><a href="#cb215-119" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb215-120"><a href="#cb215-120" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb215-121"><a href="#cb215-121" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;文字列の長さ: </span><span class="sc">%d</span><span class="st">文字</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> str_len<span class="op">);</span></span>
<span id="cb215-122"><a href="#cb215-122" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb215-123"><a href="#cb215-123" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">===== 2次元配列とポインタ =====</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb215-124"><a href="#cb215-124" aria-hidden="true" tabindex="-1"></a>    matrix_ptr <span class="op">=</span> <span class="op">(</span><span class="dt">int</span><span class="op">*)</span>matrix<span class="op">;</span>  <span class="co">/* 1次元ポインタとして扱う */</span></span>
<span id="cb215-125"><a href="#cb215-125" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb215-126"><a href="#cb215-126" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;2次元配列を1次元ポインタで表示:</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb215-127"><a href="#cb215-127" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> total_elements<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb215-128"><a href="#cb215-128" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%2d</span><span class="st"> &quot;</span><span class="op">,</span> <span class="op">*(</span>matrix_ptr <span class="op">+</span> i<span class="op">));</span></span>
<span id="cb215-129"><a href="#cb215-129" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">((</span>i <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">%</span> <span class="dv">4</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb215-130"><a href="#cb215-130" aria-hidden="true" tabindex="-1"></a>            printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb215-131"><a href="#cb215-131" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb215-132"><a href="#cb215-132" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb215-133"><a href="#cb215-133" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb215-134"><a href="#cb215-134" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">===== ポインタ配列の例 =====</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb215-135"><a href="#cb215-135" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb215-136"><a href="#cb215-136" aria-hidden="true" tabindex="-1"></a>    ptr_array<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="op">&amp;</span>a<span class="op">;</span></span>
<span id="cb215-137"><a href="#cb215-137" aria-hidden="true" tabindex="-1"></a>    ptr_array<span class="op">[</span><span class="dv">1</span><span class="op">]</span> <span class="op">=</span> <span class="op">&amp;</span>b<span class="op">;</span></span>
<span id="cb215-138"><a href="#cb215-138" aria-hidden="true" tabindex="-1"></a>    ptr_array<span class="op">[</span><span class="dv">2</span><span class="op">]</span> <span class="op">=</span> <span class="op">&amp;</span>c<span class="op">;</span></span>
<span id="cb215-139"><a href="#cb215-139" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb215-140"><a href="#cb215-140" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ポインタ配列の内容:</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb215-141"><a href="#cb215-141" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">3</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb215-142"><a href="#cb215-142" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;ptr_array[</span><span class="sc">%d</span><span class="st">] = </span><span class="sc">%p</span><span class="st">, *ptr_array[</span><span class="sc">%d</span><span class="st">] = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span></span>
<span id="cb215-143"><a href="#cb215-143" aria-hidden="true" tabindex="-1"></a>               i<span class="op">,</span> <span class="op">(</span><span class="dt">void</span><span class="op">*)</span>ptr_array<span class="op">[</span>i<span class="op">],</span> i<span class="op">,</span> <span class="op">*</span>ptr_array<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb215-144"><a href="#cb215-144" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb215-145"><a href="#cb215-145" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb215-146"><a href="#cb215-146" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb215-147"><a href="#cb215-147" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb215-148"><a href="#cb215-148" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb215-149"><a href="#cb215-149" aria-hidden="true" tabindex="-1"></a><span class="co">/*</span></span>
<span id="cb215-150"><a href="#cb215-150" aria-hidden="true" tabindex="-1"></a><span class="co">学習ポイント:</span></span>
<span id="cb215-151"><a href="#cb215-151" aria-hidden="true" tabindex="-1"></a><span class="co">1. 配列名は先頭要素のポインタと同等</span></span>
<span id="cb215-152"><a href="#cb215-152" aria-hidden="true" tabindex="-1"></a><span class="co">2. ポインタ演算: ptr + n は n個後の要素を指す</span></span>
<span id="cb215-153"><a href="#cb215-153" aria-hidden="true" tabindex="-1"></a><span class="co">3. *(ptr + i) と ptr[i] は同等</span></span>
<span id="cb215-154"><a href="#cb215-154" aria-hidden="true" tabindex="-1"></a><span class="co">4. ポインタのインクリメント/デクリメント</span></span>
<span id="cb215-155"><a href="#cb215-155" aria-hidden="true" tabindex="-1"></a><span class="co">5. ポインタ同士の差は要素数を表す</span></span>
<span id="cb215-156"><a href="#cb215-156" aria-hidden="true" tabindex="-1"></a><span class="co">6. 文字列もポインタで操作可能</span></span>
<span id="cb215-157"><a href="#cb215-157" aria-hidden="true" tabindex="-1"></a><span class="co">7. 2次元配列も1次元ポインタで扱える</span></span>
<span id="cb215-158"><a href="#cb215-158" aria-hidden="true" tabindex="-1"></a><span class="co">8. ポインタの配列の活用</span></span>
<span id="cb215-159"><a href="#cb215-159" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb215-160"><a href="#cb215-160" aria-hidden="true" tabindex="-1"></a><span class="co">重要な概念:</span></span>
<span id="cb215-161"><a href="#cb215-161" aria-hidden="true" tabindex="-1"></a><span class="co">- 配列の記法とポインタ記法の等価性</span></span>
<span id="cb215-162"><a href="#cb215-162" aria-hidden="true" tabindex="-1"></a><span class="co">- ポインタ演算の自動的な型サイズ調整</span></span>
<span id="cb215-163"><a href="#cb215-163" aria-hidden="true" tabindex="-1"></a><span class="co">- メモリレイアウトの理解</span></span>
<span id="cb215-164"><a href="#cb215-164" aria-hidden="true" tabindex="-1"></a><span class="co">- 安全な境界チェックの重要性</span></span>
<span id="cb215-165"><a href="#cb215-165" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span></span></code></pre></div>
<blockquote>
<p>C99版は<a
href="pointer_arrays_c99.c">こちら</a>を参照してください。</p>
</blockquote>
<h3 id="pointer_basic.c">pointer_basic.c</h3>
<div class="sourceCode" id="cb216"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb216-1"><a href="#cb216-1" aria-hidden="true" tabindex="-1"></a><span class="co">/*</span></span>
<span id="cb216-2"><a href="#cb216-2" aria-hidden="true" tabindex="-1"></a><span class="co"> * pointer_basic.c</span></span>
<span id="cb216-3"><a href="#cb216-3" aria-hidden="true" tabindex="-1"></a><span class="co"> * ポインタの宣言、初期化、基本的な操作を学習</span></span>
<span id="cb216-4"><a href="#cb216-4" aria-hidden="true" tabindex="-1"></a><span class="co"> * C90準拠</span></span>
<span id="cb216-5"><a href="#cb216-5" aria-hidden="true" tabindex="-1"></a><span class="co"> */</span></span>
<span id="cb216-6"><a href="#cb216-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb216-7"><a href="#cb216-7" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb216-8"><a href="#cb216-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb216-9"><a href="#cb216-9" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb216-10"><a href="#cb216-10" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb216-11"><a href="#cb216-11" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> value <span class="op">=</span> <span class="dv">42</span><span class="op">;</span>         <span class="co">/* 通常の整数変数 */</span></span>
<span id="cb216-12"><a href="#cb216-12" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> <span class="op">*</span>ptr<span class="op">;</span>               <span class="co">/* 整数ポインタ変数の宣言 */</span></span>
<span id="cb216-13"><a href="#cb216-13" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> another_value <span class="op">=</span> <span class="dv">100</span><span class="op">;</span></span>
<span id="cb216-14"><a href="#cb216-14" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> char_var <span class="op">=</span> <span class="ch">&#39;A&#39;</span><span class="op">;</span>    <span class="co">/* C90: 全変数宣言を先頭に配置 */</span></span>
<span id="cb216-15"><a href="#cb216-15" aria-hidden="true" tabindex="-1"></a>    <span class="dt">float</span> float_var <span class="op">=</span> <span class="fl">3.14</span><span class="bu">f</span><span class="op">;</span></span>
<span id="cb216-16"><a href="#cb216-16" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span> double_var <span class="op">=</span> <span class="fl">2.718</span><span class="op">;</span></span>
<span id="cb216-17"><a href="#cb216-17" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> <span class="op">*</span>char_ptr<span class="op">;</span></span>
<span id="cb216-18"><a href="#cb216-18" aria-hidden="true" tabindex="-1"></a>    <span class="dt">float</span> <span class="op">*</span>float_ptr<span class="op">;</span></span>
<span id="cb216-19"><a href="#cb216-19" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span> <span class="op">*</span>double_ptr<span class="op">;</span></span>
<span id="cb216-20"><a href="#cb216-20" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> <span class="op">*</span>null_ptr<span class="op">;</span>          <span class="co">/* C90: NULLポインタ用変数 */</span></span>
<span id="cb216-21"><a href="#cb216-21" aria-hidden="true" tabindex="-1"></a>    <span class="dt">void</span> <span class="op">*</span>generic_ptr<span class="op">;</span>      <span class="co">/* C90: void*ポインタ用変数 */</span></span>
<span id="cb216-22"><a href="#cb216-22" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> int_val <span class="op">=</span> <span class="dv">123</span><span class="op">;</span></span>
<span id="cb216-23"><a href="#cb216-23" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span> double_val <span class="op">=</span> <span class="fl">45.67</span><span class="op">;</span></span>
<span id="cb216-24"><a href="#cb216-24" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb216-25"><a href="#cb216-25" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;===== ポインタの基本操作 =====</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb216-26"><a href="#cb216-26" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb216-27"><a href="#cb216-27" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* ポインタの初期化 */</span></span>
<span id="cb216-28"><a href="#cb216-28" aria-hidden="true" tabindex="-1"></a>    ptr <span class="op">=</span> <span class="op">&amp;</span>value<span class="op">;</span>           <span class="co">/* valueのアドレスをptrに代入 */</span></span>
<span id="cb216-29"><a href="#cb216-29" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb216-30"><a href="#cb216-30" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;変数valueの値: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> value<span class="op">);</span></span>
<span id="cb216-31"><a href="#cb216-31" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;変数valueのアドレス: </span><span class="sc">%p\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(</span><span class="dt">void</span><span class="op">*)&amp;</span>value<span class="op">);</span></span>
<span id="cb216-32"><a href="#cb216-32" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ポインタptrの値（アドレス）: </span><span class="sc">%p\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(</span><span class="dt">void</span><span class="op">*)</span>ptr<span class="op">);</span></span>
<span id="cb216-33"><a href="#cb216-33" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ポインタptrが指す値: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">*</span>ptr<span class="op">);</span></span>
<span id="cb216-34"><a href="#cb216-34" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb216-35"><a href="#cb216-35" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">===== 間接参照による値の変更 =====</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb216-36"><a href="#cb216-36" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;変更前: value = </span><span class="sc">%d</span><span class="st">, *ptr = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> value<span class="op">,</span> <span class="op">*</span>ptr<span class="op">);</span></span>
<span id="cb216-37"><a href="#cb216-37" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb216-38"><a href="#cb216-38" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>ptr <span class="op">=</span> <span class="dv">75</span><span class="op">;</span>              <span class="co">/* ポインタを通じて値を変更 */</span></span>
<span id="cb216-39"><a href="#cb216-39" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;*ptr = 75 実行後:</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb216-40"><a href="#cb216-40" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;変更後: value = </span><span class="sc">%d</span><span class="st">, *ptr = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> value<span class="op">,</span> <span class="op">*</span>ptr<span class="op">);</span></span>
<span id="cb216-41"><a href="#cb216-41" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb216-42"><a href="#cb216-42" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">===== ポインタの再代入 =====</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb216-43"><a href="#cb216-43" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;another_value = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> another_value<span class="op">);</span></span>
<span id="cb216-44"><a href="#cb216-44" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb216-45"><a href="#cb216-45" aria-hidden="true" tabindex="-1"></a>    ptr <span class="op">=</span> <span class="op">&amp;</span>another_value<span class="op">;</span>   <span class="co">/* ptrを別の変数に向ける */</span></span>
<span id="cb216-46"><a href="#cb216-46" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ptr = &amp;another_value 実行後:</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb216-47"><a href="#cb216-47" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ポインタptrが指す値: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">*</span>ptr<span class="op">);</span></span>
<span id="cb216-48"><a href="#cb216-48" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ポインタptrのアドレス: </span><span class="sc">%p\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(</span><span class="dt">void</span><span class="op">*)</span>ptr<span class="op">);</span></span>
<span id="cb216-49"><a href="#cb216-49" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb216-50"><a href="#cb216-50" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">===== 様々なデータ型のポインタ =====</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb216-51"><a href="#cb216-51" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb216-52"><a href="#cb216-52" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* C90: ポインタの初期化は宣言後に */</span></span>
<span id="cb216-53"><a href="#cb216-53" aria-hidden="true" tabindex="-1"></a>    char_ptr <span class="op">=</span> <span class="op">&amp;</span>char_var<span class="op">;</span></span>
<span id="cb216-54"><a href="#cb216-54" aria-hidden="true" tabindex="-1"></a>    float_ptr <span class="op">=</span> <span class="op">&amp;</span>float_var<span class="op">;</span></span>
<span id="cb216-55"><a href="#cb216-55" aria-hidden="true" tabindex="-1"></a>    double_ptr <span class="op">=</span> <span class="op">&amp;</span>double_var<span class="op">;</span></span>
<span id="cb216-56"><a href="#cb216-56" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb216-57"><a href="#cb216-57" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;char値: </span><span class="sc">%c</span><span class="st"> (アドレス: </span><span class="sc">%p</span><span class="st">)</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">*</span>char_ptr<span class="op">,</span> <span class="op">(</span><span class="dt">void</span><span class="op">*)</span>char_ptr<span class="op">);</span></span>
<span id="cb216-58"><a href="#cb216-58" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;float値: </span><span class="sc">%.2f</span><span class="st"> (アドレス: </span><span class="sc">%p</span><span class="st">)</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">*</span>float_ptr<span class="op">,</span> <span class="op">(</span><span class="dt">void</span><span class="op">*)</span>float_ptr<span class="op">);</span></span>
<span id="cb216-59"><a href="#cb216-59" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;double値: </span><span class="sc">%.3f</span><span class="st"> (アドレス: </span><span class="sc">%p</span><span class="st">)</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">*</span>double_ptr<span class="op">,</span> <span class="op">(</span><span class="dt">void</span><span class="op">*)</span>double_ptr<span class="op">);</span></span>
<span id="cb216-60"><a href="#cb216-60" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb216-61"><a href="#cb216-61" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">===== ポインタのサイズ =====</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb216-62"><a href="#cb216-62" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;int*のサイズ: </span><span class="sc">%lu</span><span class="st"> バイト</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(</span><span class="dt">unsigned</span> <span class="dt">long</span><span class="op">)</span><span class="kw">sizeof</span><span class="op">(</span><span class="dt">int</span><span class="op">*));</span></span>
<span id="cb216-63"><a href="#cb216-63" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;char*のサイズ: </span><span class="sc">%lu</span><span class="st"> バイト</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(</span><span class="dt">unsigned</span> <span class="dt">long</span><span class="op">)</span><span class="kw">sizeof</span><span class="op">(</span><span class="dt">char</span><span class="op">*));</span></span>
<span id="cb216-64"><a href="#cb216-64" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;float*のサイズ: </span><span class="sc">%lu</span><span class="st"> バイト</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(</span><span class="dt">unsigned</span> <span class="dt">long</span><span class="op">)</span><span class="kw">sizeof</span><span class="op">(</span><span class="dt">float</span><span class="op">*));</span></span>
<span id="cb216-65"><a href="#cb216-65" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;double*のサイズ: </span><span class="sc">%lu</span><span class="st"> バイト</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(</span><span class="dt">unsigned</span> <span class="dt">long</span><span class="op">)</span><span class="kw">sizeof</span><span class="op">(</span><span class="dt">double</span><span class="op">*));</span></span>
<span id="cb216-66"><a href="#cb216-66" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb216-67"><a href="#cb216-67" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">===== NULLポインタ =====</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb216-68"><a href="#cb216-68" aria-hidden="true" tabindex="-1"></a>    null_ptr <span class="op">=</span> NULL<span class="op">;</span>        <span class="co">/* C90: 初期化は宣言後に */</span></span>
<span id="cb216-69"><a href="#cb216-69" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;NULLポインタの値: </span><span class="sc">%p\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(</span><span class="dt">void</span><span class="op">*)</span>null_ptr<span class="op">);</span></span>
<span id="cb216-70"><a href="#cb216-70" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb216-71"><a href="#cb216-71" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>null_ptr <span class="op">==</span> NULL<span class="op">)</span> <span class="op">{</span></span>
<span id="cb216-72"><a href="#cb216-72" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;null_ptrはNULLです（安全チェック）</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb216-73"><a href="#cb216-73" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb216-74"><a href="#cb216-74" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb216-75"><a href="#cb216-75" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* NULLポインタの参照は危険なのでコメントアウト */</span></span>
<span id="cb216-76"><a href="#cb216-76" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* printf(&quot;NULL参照: %d\n&quot;, *null_ptr);  // 危険！ */</span></span>
<span id="cb216-77"><a href="#cb216-77" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb216-78"><a href="#cb216-78" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">===== void*ポインタ（汎用ポインタ） =====</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb216-79"><a href="#cb216-79" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb216-80"><a href="#cb216-80" aria-hidden="true" tabindex="-1"></a>    generic_ptr <span class="op">=</span> <span class="op">&amp;</span>int_val<span class="op">;</span></span>
<span id="cb216-81"><a href="#cb216-81" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;intを指すvoid*: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">*(</span><span class="dt">int</span><span class="op">*)</span>generic_ptr<span class="op">);</span></span>
<span id="cb216-82"><a href="#cb216-82" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb216-83"><a href="#cb216-83" aria-hidden="true" tabindex="-1"></a>    generic_ptr <span class="op">=</span> <span class="op">&amp;</span>double_val<span class="op">;</span></span>
<span id="cb216-84"><a href="#cb216-84" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;doubleを指すvoid*: </span><span class="sc">%.2f\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">*(</span><span class="dt">double</span><span class="op">*)</span>generic_ptr<span class="op">);</span></span>
<span id="cb216-85"><a href="#cb216-85" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb216-86"><a href="#cb216-86" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb216-87"><a href="#cb216-87" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb216-88"><a href="#cb216-88" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb216-89"><a href="#cb216-89" aria-hidden="true" tabindex="-1"></a><span class="co">/*</span></span>
<span id="cb216-90"><a href="#cb216-90" aria-hidden="true" tabindex="-1"></a><span class="co">学習ポイント:</span></span>
<span id="cb216-91"><a href="#cb216-91" aria-hidden="true" tabindex="-1"></a><span class="co">1. ポインタの宣言: int *ptr;</span></span>
<span id="cb216-92"><a href="#cb216-92" aria-hidden="true" tabindex="-1"></a><span class="co">2. アドレス演算子: &amp;variable</span></span>
<span id="cb216-93"><a href="#cb216-93" aria-hidden="true" tabindex="-1"></a><span class="co">3. 間接参照演算子: *pointer</span></span>
<span id="cb216-94"><a href="#cb216-94" aria-hidden="true" tabindex="-1"></a><span class="co">4. ポインタの初期化と再代入</span></span>
<span id="cb216-95"><a href="#cb216-95" aria-hidden="true" tabindex="-1"></a><span class="co">5. NULLポインタの安全な使用</span></span>
<span id="cb216-96"><a href="#cb216-96" aria-hidden="true" tabindex="-1"></a><span class="co">6. void*ポインタと型キャスト</span></span>
<span id="cb216-97"><a href="#cb216-97" aria-hidden="true" tabindex="-1"></a><span class="co">7. ポインタのサイズは型に関係なく一定</span></span>
<span id="cb216-98"><a href="#cb216-98" aria-hidden="true" tabindex="-1"></a><span class="co">8. 安全なプログラミングのためのNULLチェック</span></span>
<span id="cb216-99"><a href="#cb216-99" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb216-100"><a href="#cb216-100" aria-hidden="true" tabindex="-1"></a><span class="co">注意点:</span></span>
<span id="cb216-101"><a href="#cb216-101" aria-hidden="true" tabindex="-1"></a><span class="co">- 未初期化ポインタの使用は危険</span></span>
<span id="cb216-102"><a href="#cb216-102" aria-hidden="true" tabindex="-1"></a><span class="co">- NULLポインタの参照は避ける</span></span>
<span id="cb216-103"><a href="#cb216-103" aria-hidden="true" tabindex="-1"></a><span class="co">- void*ポインタは使用時に適切な型キャストが必要</span></span>
<span id="cb216-104"><a href="#cb216-104" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span></span></code></pre></div>
<blockquote>
<p>C99版は<a
href="pointer_basic_c99.c">こちら</a>を参照してください。</p>
</blockquote>
<h3 id="pointer_functions.c">pointer_functions.c</h3>
<div class="sourceCode" id="cb217"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb217-1"><a href="#cb217-1" aria-hidden="true" tabindex="-1"></a><span class="co">/*</span></span>
<span id="cb217-2"><a href="#cb217-2" aria-hidden="true" tabindex="-1"></a><span class="co"> * pointer_functions.c</span></span>
<span id="cb217-3"><a href="#cb217-3" aria-hidden="true" tabindex="-1"></a><span class="co"> * 関数引数、戻り値としてのポインタの使用方法を学習</span></span>
<span id="cb217-4"><a href="#cb217-4" aria-hidden="true" tabindex="-1"></a><span class="co"> * C90準拠</span></span>
<span id="cb217-5"><a href="#cb217-5" aria-hidden="true" tabindex="-1"></a><span class="co"> */</span></span>
<span id="cb217-6"><a href="#cb217-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-7"><a href="#cb217-7" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb217-8"><a href="#cb217-8" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;string.h&gt;</span></span>
<span id="cb217-9"><a href="#cb217-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-10"><a href="#cb217-10" aria-hidden="true" tabindex="-1"></a><span class="co">/* 2つの値を交換する関数 */</span></span>
<span id="cb217-11"><a href="#cb217-11" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> swap_values<span class="op">(</span><span class="dt">int</span> <span class="op">*</span>a<span class="op">,</span> <span class="dt">int</span> <span class="op">*</span>b<span class="op">)</span></span>
<span id="cb217-12"><a href="#cb217-12" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb217-13"><a href="#cb217-13" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> temp<span class="op">;</span></span>
<span id="cb217-14"><a href="#cb217-14" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb217-15"><a href="#cb217-15" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;  swap関数内: 交換前 *a = </span><span class="sc">%d</span><span class="st">, *b = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">*</span>a<span class="op">,</span> <span class="op">*</span>b<span class="op">);</span></span>
<span id="cb217-16"><a href="#cb217-16" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb217-17"><a href="#cb217-17" aria-hidden="true" tabindex="-1"></a>    temp <span class="op">=</span> <span class="op">*</span>a<span class="op">;</span></span>
<span id="cb217-18"><a href="#cb217-18" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>a <span class="op">=</span> <span class="op">*</span>b<span class="op">;</span></span>
<span id="cb217-19"><a href="#cb217-19" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>b <span class="op">=</span> temp<span class="op">;</span></span>
<span id="cb217-20"><a href="#cb217-20" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb217-21"><a href="#cb217-21" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;  swap関数内: 交換後 *a = </span><span class="sc">%d</span><span class="st">, *b = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">*</span>a<span class="op">,</span> <span class="op">*</span>b<span class="op">);</span></span>
<span id="cb217-22"><a href="#cb217-22" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb217-23"><a href="#cb217-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-24"><a href="#cb217-24" aria-hidden="true" tabindex="-1"></a><span class="co">/* 値を2倍にする関数 */</span></span>
<span id="cb217-25"><a href="#cb217-25" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> double_value<span class="op">(</span><span class="dt">int</span> <span class="op">*</span>value<span class="op">)</span></span>
<span id="cb217-26"><a href="#cb217-26" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb217-27"><a href="#cb217-27" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;  double_value関数内: 変更前 *value = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">*</span>value<span class="op">);</span></span>
<span id="cb217-28"><a href="#cb217-28" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>value <span class="op">=</span> <span class="op">(*</span>value<span class="op">)</span> <span class="op">*</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb217-29"><a href="#cb217-29" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;  double_value関数内: 変更後 *value = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">*</span>value<span class="op">);</span></span>
<span id="cb217-30"><a href="#cb217-30" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb217-31"><a href="#cb217-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-32"><a href="#cb217-32" aria-hidden="true" tabindex="-1"></a><span class="co">/* 配列の合計を計算する関数 */</span></span>
<span id="cb217-33"><a href="#cb217-33" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> sum_array<span class="op">(</span><span class="dt">int</span> <span class="op">*</span>arr<span class="op">,</span> <span class="dt">int</span> size<span class="op">)</span></span>
<span id="cb217-34"><a href="#cb217-34" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb217-35"><a href="#cb217-35" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> sum <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb217-36"><a href="#cb217-36" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb217-37"><a href="#cb217-37" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb217-38"><a href="#cb217-38" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> size<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb217-39"><a href="#cb217-39" aria-hidden="true" tabindex="-1"></a>        sum <span class="op">+=</span> <span class="op">*(</span>arr <span class="op">+</span> i<span class="op">);</span>  <span class="co">/* ポインタ記法 */</span></span>
<span id="cb217-40"><a href="#cb217-40" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb217-41"><a href="#cb217-41" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb217-42"><a href="#cb217-42" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> sum<span class="op">;</span></span>
<span id="cb217-43"><a href="#cb217-43" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb217-44"><a href="#cb217-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-45"><a href="#cb217-45" aria-hidden="true" tabindex="-1"></a><span class="co">/* 配列の要素を変更する関数 */</span></span>
<span id="cb217-46"><a href="#cb217-46" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> modify_array<span class="op">(</span><span class="dt">int</span> <span class="op">*</span>arr<span class="op">,</span> <span class="dt">int</span> size<span class="op">,</span> <span class="dt">int</span> multiplier<span class="op">)</span></span>
<span id="cb217-47"><a href="#cb217-47" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb217-48"><a href="#cb217-48" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb217-49"><a href="#cb217-49" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb217-50"><a href="#cb217-50" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;  modify_array関数内: 変更前</span><span class="sc">\n</span><span class="st">    &quot;</span><span class="op">);</span></span>
<span id="cb217-51"><a href="#cb217-51" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> size<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb217-52"><a href="#cb217-52" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st"> &quot;</span><span class="op">,</span> arr<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb217-53"><a href="#cb217-53" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb217-54"><a href="#cb217-54" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb217-55"><a href="#cb217-55" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb217-56"><a href="#cb217-56" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> size<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb217-57"><a href="#cb217-57" aria-hidden="true" tabindex="-1"></a>        arr<span class="op">[</span>i<span class="op">]</span> <span class="op">*=</span> multiplier<span class="op">;</span></span>
<span id="cb217-58"><a href="#cb217-58" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb217-59"><a href="#cb217-59" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb217-60"><a href="#cb217-60" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;  modify_array関数内: 変更後（</span><span class="sc">%d</span><span class="st">倍）</span><span class="sc">\n</span><span class="st">    &quot;</span><span class="op">,</span> multiplier<span class="op">);</span></span>
<span id="cb217-61"><a href="#cb217-61" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> size<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb217-62"><a href="#cb217-62" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st"> &quot;</span><span class="op">,</span> arr<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb217-63"><a href="#cb217-63" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb217-64"><a href="#cb217-64" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb217-65"><a href="#cb217-65" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb217-66"><a href="#cb217-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-67"><a href="#cb217-67" aria-hidden="true" tabindex="-1"></a><span class="co">/* 配列から最大値のポインタを返す関数 */</span></span>
<span id="cb217-68"><a href="#cb217-68" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span><span class="op">*</span> find_max_pointer<span class="op">(</span><span class="dt">int</span> <span class="op">*</span>arr<span class="op">,</span> <span class="dt">int</span> size<span class="op">)</span></span>
<span id="cb217-69"><a href="#cb217-69" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb217-70"><a href="#cb217-70" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> <span class="op">*</span>max_ptr <span class="op">=</span> arr<span class="op">;</span>  <span class="co">/* 最初の要素を最大とする */</span></span>
<span id="cb217-71"><a href="#cb217-71" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb217-72"><a href="#cb217-72" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb217-73"><a href="#cb217-73" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&lt;</span> size<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb217-74"><a href="#cb217-74" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(*(</span>arr <span class="op">+</span> i<span class="op">)</span> <span class="op">&gt;</span> <span class="op">*</span>max_ptr<span class="op">)</span> <span class="op">{</span></span>
<span id="cb217-75"><a href="#cb217-75" aria-hidden="true" tabindex="-1"></a>            max_ptr <span class="op">=</span> arr <span class="op">+</span> i<span class="op">;</span></span>
<span id="cb217-76"><a href="#cb217-76" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb217-77"><a href="#cb217-77" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb217-78"><a href="#cb217-78" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb217-79"><a href="#cb217-79" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> max_ptr<span class="op">;</span></span>
<span id="cb217-80"><a href="#cb217-80" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb217-81"><a href="#cb217-81" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-82"><a href="#cb217-82" aria-hidden="true" tabindex="-1"></a><span class="co">/* 配列から指定値を検索してポインタを返す関数 */</span></span>
<span id="cb217-83"><a href="#cb217-83" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span><span class="op">*</span> search_value<span class="op">(</span><span class="dt">int</span> <span class="op">*</span>arr<span class="op">,</span> <span class="dt">int</span> size<span class="op">,</span> <span class="dt">int</span> target<span class="op">)</span></span>
<span id="cb217-84"><a href="#cb217-84" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb217-85"><a href="#cb217-85" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb217-86"><a href="#cb217-86" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb217-87"><a href="#cb217-87" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> size<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb217-88"><a href="#cb217-88" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(*(</span>arr <span class="op">+</span> i<span class="op">)</span> <span class="op">==</span> target<span class="op">)</span> <span class="op">{</span></span>
<span id="cb217-89"><a href="#cb217-89" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> arr <span class="op">+</span> i<span class="op">;</span>  <span class="co">/* 見つかった要素のポインタを返す */</span></span>
<span id="cb217-90"><a href="#cb217-90" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb217-91"><a href="#cb217-91" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb217-92"><a href="#cb217-92" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb217-93"><a href="#cb217-93" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> NULL<span class="op">;</span>  <span class="co">/* 見つからない場合はNULLを返す */</span></span>
<span id="cb217-94"><a href="#cb217-94" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb217-95"><a href="#cb217-95" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-96"><a href="#cb217-96" aria-hidden="true" tabindex="-1"></a><span class="co">/* 文字列の長さを計算する関数（ポインタ版） */</span></span>
<span id="cb217-97"><a href="#cb217-97" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> string_length_ptr<span class="op">(</span><span class="dt">char</span> <span class="op">*</span>str<span class="op">)</span></span>
<span id="cb217-98"><a href="#cb217-98" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb217-99"><a href="#cb217-99" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> length <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb217-100"><a href="#cb217-100" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb217-101"><a href="#cb217-101" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(*</span>str <span class="op">!=</span> <span class="ch">&#39;</span><span class="sc">\0</span><span class="ch">&#39;</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb217-102"><a href="#cb217-102" aria-hidden="true" tabindex="-1"></a>        length<span class="op">++;</span></span>
<span id="cb217-103"><a href="#cb217-103" aria-hidden="true" tabindex="-1"></a>        str<span class="op">++;</span></span>
<span id="cb217-104"><a href="#cb217-104" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb217-105"><a href="#cb217-105" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb217-106"><a href="#cb217-106" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> length<span class="op">;</span></span>
<span id="cb217-107"><a href="#cb217-107" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb217-108"><a href="#cb217-108" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-109"><a href="#cb217-109" aria-hidden="true" tabindex="-1"></a><span class="co">/* 文字列をコピーする関数（ポインタ版） */</span></span>
<span id="cb217-110"><a href="#cb217-110" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> string_copy_ptr<span class="op">(</span><span class="dt">char</span> <span class="op">*</span>dest<span class="op">,</span> <span class="dt">char</span> <span class="op">*</span>src<span class="op">)</span></span>
<span id="cb217-111"><a href="#cb217-111" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb217-112"><a href="#cb217-112" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(*</span>src <span class="op">!=</span> <span class="ch">&#39;</span><span class="sc">\0</span><span class="ch">&#39;</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb217-113"><a href="#cb217-113" aria-hidden="true" tabindex="-1"></a>        <span class="op">*</span>dest <span class="op">=</span> <span class="op">*</span>src<span class="op">;</span></span>
<span id="cb217-114"><a href="#cb217-114" aria-hidden="true" tabindex="-1"></a>        dest<span class="op">++;</span></span>
<span id="cb217-115"><a href="#cb217-115" aria-hidden="true" tabindex="-1"></a>        src<span class="op">++;</span></span>
<span id="cb217-116"><a href="#cb217-116" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb217-117"><a href="#cb217-117" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>dest <span class="op">=</span> <span class="ch">&#39;</span><span class="sc">\0</span><span class="ch">&#39;</span><span class="op">;</span>  <span class="co">/* null終端文字を追加 */</span></span>
<span id="cb217-118"><a href="#cb217-118" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb217-119"><a href="#cb217-119" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-120"><a href="#cb217-120" aria-hidden="true" tabindex="-1"></a><span class="co">/* 配列を初期化する関数 */</span></span>
<span id="cb217-121"><a href="#cb217-121" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> init_array<span class="op">(</span><span class="dt">int</span> <span class="op">*</span>arr<span class="op">,</span> <span class="dt">int</span> size<span class="op">,</span> <span class="dt">int</span> init_value<span class="op">)</span></span>
<span id="cb217-122"><a href="#cb217-122" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb217-123"><a href="#cb217-123" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb217-124"><a href="#cb217-124" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb217-125"><a href="#cb217-125" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> size<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb217-126"><a href="#cb217-126" aria-hidden="true" tabindex="-1"></a>        <span class="op">*(</span>arr <span class="op">+</span> i<span class="op">)</span> <span class="op">=</span> init_value <span class="op">+</span> i<span class="op">;</span>  <span class="co">/* 初期値 + インデックス */</span></span>
<span id="cb217-127"><a href="#cb217-127" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb217-128"><a href="#cb217-128" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb217-129"><a href="#cb217-129" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-130"><a href="#cb217-130" aria-hidden="true" tabindex="-1"></a><span class="co">/* 配列を表示する関数 */</span></span>
<span id="cb217-131"><a href="#cb217-131" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> print_array<span class="op">(</span><span class="dt">char</span> <span class="op">*</span>label<span class="op">,</span> <span class="dt">int</span> <span class="op">*</span>arr<span class="op">,</span> <span class="dt">int</span> size<span class="op">)</span></span>
<span id="cb217-132"><a href="#cb217-132" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb217-133"><a href="#cb217-133" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb217-134"><a href="#cb217-134" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb217-135"><a href="#cb217-135" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%s</span><span class="st">: &quot;</span><span class="op">,</span> label<span class="op">);</span></span>
<span id="cb217-136"><a href="#cb217-136" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> size<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb217-137"><a href="#cb217-137" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st"> &quot;</span><span class="op">,</span> arr<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb217-138"><a href="#cb217-138" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb217-139"><a href="#cb217-139" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb217-140"><a href="#cb217-140" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb217-141"><a href="#cb217-141" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-142"><a href="#cb217-142" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb217-143"><a href="#cb217-143" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb217-144"><a href="#cb217-144" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* C90: 全変数宣言を先頭に配置 */</span></span>
<span id="cb217-145"><a href="#cb217-145" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> x <span class="op">=</span> <span class="dv">10</span><span class="op">,</span> y <span class="op">=</span> <span class="dv">20</span><span class="op">;</span></span>
<span id="cb217-146"><a href="#cb217-146" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> numbers<span class="op">[</span><span class="dv">6</span><span class="op">];</span></span>
<span id="cb217-147"><a href="#cb217-147" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> size<span class="op">;</span></span>
<span id="cb217-148"><a href="#cb217-148" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> total<span class="op">;</span></span>
<span id="cb217-149"><a href="#cb217-149" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> data<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">45</span><span class="op">,</span> <span class="dv">67</span><span class="op">,</span> <span class="dv">23</span><span class="op">,</span> <span class="dv">89</span><span class="op">,</span> <span class="dv">12</span><span class="op">,</span> <span class="dv">56</span><span class="op">,</span> <span class="dv">78</span><span class="op">};</span></span>
<span id="cb217-150"><a href="#cb217-150" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> data_size<span class="op">;</span></span>
<span id="cb217-151"><a href="#cb217-151" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> <span class="op">*</span>result_ptr<span class="op">;</span></span>
<span id="cb217-152"><a href="#cb217-152" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> search_target <span class="op">=</span> <span class="dv">56</span><span class="op">;</span></span>
<span id="cb217-153"><a href="#cb217-153" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> original<span class="op">[]</span> <span class="op">=</span> <span class="st">&quot;Hello, World!&quot;</span><span class="op">;</span></span>
<span id="cb217-154"><a href="#cb217-154" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> copy_buffer<span class="op">[</span><span class="dv">50</span><span class="op">];</span></span>
<span id="cb217-155"><a href="#cb217-155" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> <span class="op">*</span>fruits<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="st">&quot;Apple&quot;</span><span class="op">,</span> <span class="st">&quot;Banana&quot;</span><span class="op">,</span> <span class="st">&quot;Cherry&quot;</span><span class="op">,</span> <span class="st">&quot;Date&quot;</span><span class="op">};</span></span>
<span id="cb217-156"><a href="#cb217-156" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> fruit_count<span class="op">;</span></span>
<span id="cb217-157"><a href="#cb217-157" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb217-158"><a href="#cb217-158" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> <span class="op">*</span>arrays<span class="op">[</span><span class="dv">2</span><span class="op">];</span>         <span class="co">/* C90では可変初期化ができないため配列サイズを固定 */</span></span>
<span id="cb217-159"><a href="#cb217-159" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> sizes<span class="op">[</span><span class="dv">2</span><span class="op">];</span></span>
<span id="cb217-160"><a href="#cb217-160" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> <span class="op">*</span>labels<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="st">&quot;numbers配列&quot;</span><span class="op">,</span> <span class="st">&quot;data配列&quot;</span><span class="op">};</span></span>
<span id="cb217-161"><a href="#cb217-161" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> array_sum<span class="op">;</span></span>
<span id="cb217-162"><a href="#cb217-162" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb217-163"><a href="#cb217-163" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;===== ポインタを引数とする関数 =====</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb217-164"><a href="#cb217-164" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb217-165"><a href="#cb217-165" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 変数の初期化 */</span></span>
<span id="cb217-166"><a href="#cb217-166" aria-hidden="true" tabindex="-1"></a>    size <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>numbers<span class="op">)</span> <span class="op">/</span> <span class="kw">sizeof</span><span class="op">(</span>numbers<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb217-167"><a href="#cb217-167" aria-hidden="true" tabindex="-1"></a>    data_size <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>data<span class="op">)</span> <span class="op">/</span> <span class="kw">sizeof</span><span class="op">(</span>data<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb217-168"><a href="#cb217-168" aria-hidden="true" tabindex="-1"></a>    fruit_count <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>fruits<span class="op">)</span> <span class="op">/</span> <span class="kw">sizeof</span><span class="op">(</span>fruits<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb217-169"><a href="#cb217-169" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb217-170"><a href="#cb217-170" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* swap関数のテスト */</span></span>
<span id="cb217-171"><a href="#cb217-171" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">swap関数のテスト:</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb217-172"><a href="#cb217-172" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;交換前: x = </span><span class="sc">%d</span><span class="st">, y = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> x<span class="op">,</span> y<span class="op">);</span></span>
<span id="cb217-173"><a href="#cb217-173" aria-hidden="true" tabindex="-1"></a>    swap_values<span class="op">(&amp;</span>x<span class="op">,</span> <span class="op">&amp;</span>y<span class="op">);</span></span>
<span id="cb217-174"><a href="#cb217-174" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;交換後: x = </span><span class="sc">%d</span><span class="st">, y = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> x<span class="op">,</span> y<span class="op">);</span></span>
<span id="cb217-175"><a href="#cb217-175" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb217-176"><a href="#cb217-176" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* double_value関数のテスト */</span></span>
<span id="cb217-177"><a href="#cb217-177" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">double_value関数のテスト:</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb217-178"><a href="#cb217-178" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;2倍前: x = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> x<span class="op">);</span></span>
<span id="cb217-179"><a href="#cb217-179" aria-hidden="true" tabindex="-1"></a>    double_value<span class="op">(&amp;</span>x<span class="op">);</span></span>
<span id="cb217-180"><a href="#cb217-180" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;2倍後: x = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> x<span class="op">);</span></span>
<span id="cb217-181"><a href="#cb217-181" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb217-182"><a href="#cb217-182" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">===== 配列を操作する関数 =====</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb217-183"><a href="#cb217-183" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb217-184"><a href="#cb217-184" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 配列の初期化 */</span></span>
<span id="cb217-185"><a href="#cb217-185" aria-hidden="true" tabindex="-1"></a>    init_array<span class="op">(</span>numbers<span class="op">,</span> size<span class="op">,</span> <span class="dv">10</span><span class="op">);</span></span>
<span id="cb217-186"><a href="#cb217-186" aria-hidden="true" tabindex="-1"></a>    print_array<span class="op">(</span><span class="st">&quot;初期化後&quot;</span><span class="op">,</span> numbers<span class="op">,</span> size<span class="op">);</span></span>
<span id="cb217-187"><a href="#cb217-187" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb217-188"><a href="#cb217-188" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 配列の合計計算 */</span></span>
<span id="cb217-189"><a href="#cb217-189" aria-hidden="true" tabindex="-1"></a>    total <span class="op">=</span> sum_array<span class="op">(</span>numbers<span class="op">,</span> size<span class="op">);</span></span>
<span id="cb217-190"><a href="#cb217-190" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;配列の合計: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> total<span class="op">);</span></span>
<span id="cb217-191"><a href="#cb217-191" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb217-192"><a href="#cb217-192" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 配列の変更 */</span></span>
<span id="cb217-193"><a href="#cb217-193" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">配列変更のテスト:</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb217-194"><a href="#cb217-194" aria-hidden="true" tabindex="-1"></a>    modify_array<span class="op">(</span>numbers<span class="op">,</span> size<span class="op">,</span> <span class="dv">3</span><span class="op">);</span></span>
<span id="cb217-195"><a href="#cb217-195" aria-hidden="true" tabindex="-1"></a>    print_array<span class="op">(</span><span class="st">&quot;main関数内での変更後&quot;</span><span class="op">,</span> numbers<span class="op">,</span> size<span class="op">);</span></span>
<span id="cb217-196"><a href="#cb217-196" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb217-197"><a href="#cb217-197" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">===== ポインタを戻り値とする関数 =====</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb217-198"><a href="#cb217-198" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb217-199"><a href="#cb217-199" aria-hidden="true" tabindex="-1"></a>    print_array<span class="op">(</span><span class="st">&quot;検索対象配列&quot;</span><span class="op">,</span> data<span class="op">,</span> data_size<span class="op">);</span></span>
<span id="cb217-200"><a href="#cb217-200" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb217-201"><a href="#cb217-201" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 最大値の検索 */</span></span>
<span id="cb217-202"><a href="#cb217-202" aria-hidden="true" tabindex="-1"></a>    result_ptr <span class="op">=</span> find_max_pointer<span class="op">(</span>data<span class="op">,</span> data_size<span class="op">);</span></span>
<span id="cb217-203"><a href="#cb217-203" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>result_ptr <span class="op">!=</span> NULL<span class="op">)</span> <span class="op">{</span></span>
<span id="cb217-204"><a href="#cb217-204" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;最大値: </span><span class="sc">%d</span><span class="st"> (アドレス: </span><span class="sc">%p</span><span class="st">)</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">*</span>result_ptr<span class="op">,</span> <span class="op">(</span><span class="dt">void</span><span class="op">*)</span>result_ptr<span class="op">);</span></span>
<span id="cb217-205"><a href="#cb217-205" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;最大値のインデックス: </span><span class="sc">%ld\n</span><span class="st">&quot;</span><span class="op">,</span> result_ptr <span class="op">-</span> data<span class="op">);</span></span>
<span id="cb217-206"><a href="#cb217-206" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb217-207"><a href="#cb217-207" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb217-208"><a href="#cb217-208" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 特定値の検索 */</span></span>
<span id="cb217-209"><a href="#cb217-209" aria-hidden="true" tabindex="-1"></a>    result_ptr <span class="op">=</span> search_value<span class="op">(</span>data<span class="op">,</span> data_size<span class="op">,</span> search_target<span class="op">);</span></span>
<span id="cb217-210"><a href="#cb217-210" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>result_ptr <span class="op">!=</span> NULL<span class="op">)</span> <span class="op">{</span></span>
<span id="cb217-211"><a href="#cb217-211" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st"> が見つかりました (アドレス: </span><span class="sc">%p</span><span class="st">)</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> </span>
<span id="cb217-212"><a href="#cb217-212" aria-hidden="true" tabindex="-1"></a>               <span class="op">*</span>result_ptr<span class="op">,</span> <span class="op">(</span><span class="dt">void</span><span class="op">*)</span>result_ptr<span class="op">);</span></span>
<span id="cb217-213"><a href="#cb217-213" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;見つかった位置のインデックス: </span><span class="sc">%ld\n</span><span class="st">&quot;</span><span class="op">,</span> result_ptr <span class="op">-</span> data<span class="op">);</span></span>
<span id="cb217-214"><a href="#cb217-214" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb217-215"><a href="#cb217-215" aria-hidden="true" tabindex="-1"></a>        <span class="co">/* 見つかった値を変更 */</span></span>
<span id="cb217-216"><a href="#cb217-216" aria-hidden="true" tabindex="-1"></a>        <span class="op">*</span>result_ptr <span class="op">=</span> <span class="dv">999</span><span class="op">;</span></span>
<span id="cb217-217"><a href="#cb217-217" aria-hidden="true" tabindex="-1"></a>        print_array<span class="op">(</span><span class="st">&quot;値変更後&quot;</span><span class="op">,</span> data<span class="op">,</span> data_size<span class="op">);</span></span>
<span id="cb217-218"><a href="#cb217-218" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb217-219"><a href="#cb217-219" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st"> は見つかりませんでした</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> search_target<span class="op">);</span></span>
<span id="cb217-220"><a href="#cb217-220" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb217-221"><a href="#cb217-221" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb217-222"><a href="#cb217-222" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">===== 文字列操作関数 =====</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb217-223"><a href="#cb217-223" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb217-224"><a href="#cb217-224" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;元の文字列: </span><span class="sc">\&quot;%s\&quot;\n</span><span class="st">&quot;</span><span class="op">,</span> original<span class="op">);</span></span>
<span id="cb217-225"><a href="#cb217-225" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;文字列の長さ: </span><span class="sc">%d</span><span class="st">文字</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> string_length_ptr<span class="op">(</span>original<span class="op">));</span></span>
<span id="cb217-226"><a href="#cb217-226" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb217-227"><a href="#cb217-227" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 文字列のコピー */</span></span>
<span id="cb217-228"><a href="#cb217-228" aria-hidden="true" tabindex="-1"></a>    string_copy_ptr<span class="op">(</span>copy_buffer<span class="op">,</span> original<span class="op">);</span></span>
<span id="cb217-229"><a href="#cb217-229" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;コピーした文字列: </span><span class="sc">\&quot;%s\&quot;\n</span><span class="st">&quot;</span><span class="op">,</span> copy_buffer<span class="op">);</span></span>
<span id="cb217-230"><a href="#cb217-230" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb217-231"><a href="#cb217-231" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">===== ポインタによる高度な操作 =====</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb217-232"><a href="#cb217-232" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb217-233"><a href="#cb217-233" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* ポインタの配列を使った複数の文字列 */</span></span>
<span id="cb217-234"><a href="#cb217-234" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb217-235"><a href="#cb217-235" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;果物リスト:</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb217-236"><a href="#cb217-236" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> fruit_count<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb217-237"><a href="#cb217-237" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;  </span><span class="sc">%d</span><span class="st">. </span><span class="sc">%s</span><span class="st"> (長さ: </span><span class="sc">%d</span><span class="st">文字)</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> </span>
<span id="cb217-238"><a href="#cb217-238" aria-hidden="true" tabindex="-1"></a>               i <span class="op">+</span> <span class="dv">1</span><span class="op">,</span> fruits<span class="op">[</span>i<span class="op">],</span> string_length_ptr<span class="op">(</span>fruits<span class="op">[</span>i<span class="op">]));</span></span>
<span id="cb217-239"><a href="#cb217-239" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb217-240"><a href="#cb217-240" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb217-241"><a href="#cb217-241" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 複数の配列を処理 */</span></span>
<span id="cb217-242"><a href="#cb217-242" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* C90: 配列初期化は宣言時のみ可能なため、手動で代入 */</span></span>
<span id="cb217-243"><a href="#cb217-243" aria-hidden="true" tabindex="-1"></a>    arrays<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> numbers<span class="op">;</span></span>
<span id="cb217-244"><a href="#cb217-244" aria-hidden="true" tabindex="-1"></a>    arrays<span class="op">[</span><span class="dv">1</span><span class="op">]</span> <span class="op">=</span> data<span class="op">;</span></span>
<span id="cb217-245"><a href="#cb217-245" aria-hidden="true" tabindex="-1"></a>    sizes<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> size<span class="op">;</span></span>
<span id="cb217-246"><a href="#cb217-246" aria-hidden="true" tabindex="-1"></a>    sizes<span class="op">[</span><span class="dv">1</span><span class="op">]</span> <span class="op">=</span> data_size<span class="op">;</span></span>
<span id="cb217-247"><a href="#cb217-247" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb217-248"><a href="#cb217-248" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">複数配列の合計:</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb217-249"><a href="#cb217-249" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">2</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb217-250"><a href="#cb217-250" aria-hidden="true" tabindex="-1"></a>        array_sum <span class="op">=</span> sum_array<span class="op">(</span>arrays<span class="op">[</span>i<span class="op">],</span> sizes<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb217-251"><a href="#cb217-251" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;  </span><span class="sc">%s</span><span class="st"> の合計: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> labels<span class="op">[</span>i<span class="op">],</span> array_sum<span class="op">);</span></span>
<span id="cb217-252"><a href="#cb217-252" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb217-253"><a href="#cb217-253" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb217-254"><a href="#cb217-254" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb217-255"><a href="#cb217-255" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb217-256"><a href="#cb217-256" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-257"><a href="#cb217-257" aria-hidden="true" tabindex="-1"></a><span class="co">/*</span></span>
<span id="cb217-258"><a href="#cb217-258" aria-hidden="true" tabindex="-1"></a><span class="co">学習ポイント:</span></span>
<span id="cb217-259"><a href="#cb217-259" aria-hidden="true" tabindex="-1"></a><span class="co">1. 関数引数としてのポインタ:</span></span>
<span id="cb217-260"><a href="#cb217-260" aria-hidden="true" tabindex="-1"></a><span class="co">   - 値の変更が可能（参照渡し）</span></span>
<span id="cb217-261"><a href="#cb217-261" aria-hidden="true" tabindex="-1"></a><span class="co">   - 配列の受け渡し</span></span>
<span id="cb217-262"><a href="#cb217-262" aria-hidden="true" tabindex="-1"></a><span class="co">   - NULLチェックの重要性</span></span>
<span id="cb217-263"><a href="#cb217-263" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-264"><a href="#cb217-264" aria-hidden="true" tabindex="-1"></a><span class="co">2. 戻り値としてのポインタ:</span></span>
<span id="cb217-265"><a href="#cb217-265" aria-hidden="true" tabindex="-1"></a><span class="co">   - 配列要素のアドレス返し</span></span>
<span id="cb217-266"><a href="#cb217-266" aria-hidden="true" tabindex="-1"></a><span class="co">   - NULLによるエラー表現</span></span>
<span id="cb217-267"><a href="#cb217-267" aria-hidden="true" tabindex="-1"></a><span class="co">   - ローカル変数のアドレス返しは危険</span></span>
<span id="cb217-268"><a href="#cb217-268" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-269"><a href="#cb217-269" aria-hidden="true" tabindex="-1"></a><span class="co">3. 実用的なポインタ活用:</span></span>
<span id="cb217-270"><a href="#cb217-270" aria-hidden="true" tabindex="-1"></a><span class="co">   - 配列操作の効率化</span></span>
<span id="cb217-271"><a href="#cb217-271" aria-hidden="true" tabindex="-1"></a><span class="co">   - 文字列処理</span></span>
<span id="cb217-272"><a href="#cb217-272" aria-hidden="true" tabindex="-1"></a><span class="co">   - データ検索と変更</span></span>
<span id="cb217-273"><a href="#cb217-273" aria-hidden="true" tabindex="-1"></a><span class="co">   - 複数データの一括処理</span></span>
<span id="cb217-274"><a href="#cb217-274" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-275"><a href="#cb217-275" aria-hidden="true" tabindex="-1"></a><span class="co">4. メモリ安全性:</span></span>
<span id="cb217-276"><a href="#cb217-276" aria-hidden="true" tabindex="-1"></a><span class="co">   - 境界チェック</span></span>
<span id="cb217-277"><a href="#cb217-277" aria-hidden="true" tabindex="-1"></a><span class="co">   - NULLポインタチェック</span></span>
<span id="cb217-278"><a href="#cb217-278" aria-hidden="true" tabindex="-1"></a><span class="co">   - 適切な初期化</span></span>
<span id="cb217-279"><a href="#cb217-279" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-280"><a href="#cb217-280" aria-hidden="true" tabindex="-1"></a><span class="co">注意点:</span></span>
<span id="cb217-281"><a href="#cb217-281" aria-hidden="true" tabindex="-1"></a><span class="co">- ローカル変数のアドレスを返してはいけない</span></span>
<span id="cb217-282"><a href="#cb217-282" aria-hidden="true" tabindex="-1"></a><span class="co">- 配列の範囲外アクセスに注意</span></span>
<span id="cb217-283"><a href="#cb217-283" aria-hidden="true" tabindex="-1"></a><span class="co">- NULLポインタの参照は避ける</span></span>
<span id="cb217-284"><a href="#cb217-284" aria-hidden="true" tabindex="-1"></a><span class="co">- ポインタ演算の境界を意識する</span></span>
<span id="cb217-285"><a href="#cb217-285" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span></span></code></pre></div>
<blockquote>
<p>C99版は<a
href="pointer_functions_c99.c">こちら</a>を参照してください。</p>
</blockquote>
<hr />
<h1 id="第11章-構造体">第11章: 構造体</h1>
<h2 id="対応c規格-7">対応C規格</h2>
<ul>
<li><strong>主要対象:</strong> C90</li>
<li><strong>学習内容:</strong>
構造体の基本、構造体ポインタ、構造体配列、-&gt;演算子、メモリ管理</li>
</ul>
<h2 id="学習目標-7">学習目標</h2>
<p>この章を完了すると、以下のことができるようになります：</p>
<ul>
<li>構造体の基本概念を理解する</li>
<li>構造体ポインタを効果的に使える</li>
<li>-&gt;演算子と.演算子の使い分けができる</li>
<li>構造体配列とポインタ配列を活用できる</li>
<li>構造体を使ったデータ管理ができる</li>
</ul>
<h2 id="理論解説-7">理論解説</h2>
<h3 id="構造体の基本概念">構造体の基本概念</h3>
<p>構造体は異なるデータ型を組み合わせて新しいデータ型を作る仕組みです。</p>
<h4 id="構造体の定義と宣言">構造体の定義と宣言</h4>
<div class="sourceCode" id="cb218"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb218-1"><a href="#cb218-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb218-2"><a href="#cb218-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;string.h&gt;</span></span>
<span id="cb218-3"><a href="#cb218-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb218-4"><a href="#cb218-4" aria-hidden="true" tabindex="-1"></a><span class="co">/* 学生情報を表す構造体 */</span></span>
<span id="cb218-5"><a href="#cb218-5" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> Student <span class="op">{</span></span>
<span id="cb218-6"><a href="#cb218-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> id<span class="op">;</span></span>
<span id="cb218-7"><a href="#cb218-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> name<span class="op">[</span><span class="dv">50</span><span class="op">];</span></span>
<span id="cb218-8"><a href="#cb218-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> age<span class="op">;</span></span>
<span id="cb218-9"><a href="#cb218-9" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span> gpa<span class="op">;</span></span>
<span id="cb218-10"><a href="#cb218-10" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb218-11"><a href="#cb218-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb218-12"><a href="#cb218-12" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb218-13"><a href="#cb218-13" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb218-14"><a href="#cb218-14" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Student student<span class="op">;</span></span>
<span id="cb218-15"><a href="#cb218-15" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb218-16"><a href="#cb218-16" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* メンバーに値を代入 */</span></span>
<span id="cb218-17"><a href="#cb218-17" aria-hidden="true" tabindex="-1"></a>    student<span class="op">.</span>id <span class="op">=</span> <span class="dv">1001</span><span class="op">;</span></span>
<span id="cb218-18"><a href="#cb218-18" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>student<span class="op">.</span>name<span class="op">,</span> <span class="st">&quot;田中太郎&quot;</span><span class="op">);</span></span>
<span id="cb218-19"><a href="#cb218-19" aria-hidden="true" tabindex="-1"></a>    student<span class="op">.</span>age <span class="op">=</span> <span class="dv">20</span><span class="op">;</span></span>
<span id="cb218-20"><a href="#cb218-20" aria-hidden="true" tabindex="-1"></a>    student<span class="op">.</span>gpa <span class="op">=</span> <span class="fl">3.5</span><span class="op">;</span></span>
<span id="cb218-21"><a href="#cb218-21" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb218-22"><a href="#cb218-22" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* メンバーの値を表示 */</span></span>
<span id="cb218-23"><a href="#cb218-23" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;学生ID: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> student<span class="op">.</span>id<span class="op">);</span></span>
<span id="cb218-24"><a href="#cb218-24" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;名前: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> student<span class="op">.</span>name<span class="op">);</span></span>
<span id="cb218-25"><a href="#cb218-25" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;年齢: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> student<span class="op">.</span>age<span class="op">);</span></span>
<span id="cb218-26"><a href="#cb218-26" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;GPA: </span><span class="sc">%.1f\n</span><span class="st">&quot;</span><span class="op">,</span> student<span class="op">.</span>gpa<span class="op">);</span></span>
<span id="cb218-27"><a href="#cb218-27" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb218-28"><a href="#cb218-28" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb218-29"><a href="#cb218-29" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h4 id="構造体の初期化">構造体の初期化</h4>
<div class="sourceCode" id="cb219"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb219-1"><a href="#cb219-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb219-2"><a href="#cb219-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb219-3"><a href="#cb219-3" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> Point <span class="op">{</span></span>
<span id="cb219-4"><a href="#cb219-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> x<span class="op">;</span></span>
<span id="cb219-5"><a href="#cb219-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> y<span class="op">;</span></span>
<span id="cb219-6"><a href="#cb219-6" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb219-7"><a href="#cb219-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb219-8"><a href="#cb219-8" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> Rectangle <span class="op">{</span></span>
<span id="cb219-9"><a href="#cb219-9" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Point top_left<span class="op">;</span></span>
<span id="cb219-10"><a href="#cb219-10" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Point bottom_right<span class="op">;</span></span>
<span id="cb219-11"><a href="#cb219-11" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb219-12"><a href="#cb219-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb219-13"><a href="#cb219-13" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb219-14"><a href="#cb219-14" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb219-15"><a href="#cb219-15" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 初期化方法1: 順序指定 */</span></span>
<span id="cb219-16"><a href="#cb219-16" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Point p1 <span class="op">=</span> <span class="op">{</span><span class="dv">10</span><span class="op">,</span> <span class="dv">20</span><span class="op">};</span></span>
<span id="cb219-17"><a href="#cb219-17" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb219-18"><a href="#cb219-18" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 初期化方法2: 部分初期化 */</span></span>
<span id="cb219-19"><a href="#cb219-19" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Point p2 <span class="op">=</span> <span class="op">{</span><span class="dv">5</span><span class="op">};</span>  <span class="co">/* x=5, y=0 */</span></span>
<span id="cb219-20"><a href="#cb219-20" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb219-21"><a href="#cb219-21" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 初期化方法3: ネストした構造体 */</span></span>
<span id="cb219-22"><a href="#cb219-22" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Rectangle rect <span class="op">=</span> <span class="op">{{</span><span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">},</span> <span class="op">{</span><span class="dv">100</span><span class="op">,</span> <span class="dv">50</span><span class="op">}};</span></span>
<span id="cb219-23"><a href="#cb219-23" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb219-24"><a href="#cb219-24" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 初期化方法4: 個別代入 */</span></span>
<span id="cb219-25"><a href="#cb219-25" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Point p3<span class="op">;</span></span>
<span id="cb219-26"><a href="#cb219-26" aria-hidden="true" tabindex="-1"></a>    p3<span class="op">.</span>x <span class="op">=</span> <span class="dv">30</span><span class="op">;</span></span>
<span id="cb219-27"><a href="#cb219-27" aria-hidden="true" tabindex="-1"></a>    p3<span class="op">.</span>y <span class="op">=</span> <span class="dv">40</span><span class="op">;</span></span>
<span id="cb219-28"><a href="#cb219-28" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb219-29"><a href="#cb219-29" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;p1: (</span><span class="sc">%d</span><span class="st">, </span><span class="sc">%d</span><span class="st">)</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> p1<span class="op">.</span>x<span class="op">,</span> p1<span class="op">.</span>y<span class="op">);</span></span>
<span id="cb219-30"><a href="#cb219-30" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;p2: (</span><span class="sc">%d</span><span class="st">, </span><span class="sc">%d</span><span class="st">)</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> p2<span class="op">.</span>x<span class="op">,</span> p2<span class="op">.</span>y<span class="op">);</span></span>
<span id="cb219-31"><a href="#cb219-31" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;p3: (</span><span class="sc">%d</span><span class="st">, </span><span class="sc">%d</span><span class="st">)</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> p3<span class="op">.</span>x<span class="op">,</span> p3<span class="op">.</span>y<span class="op">);</span></span>
<span id="cb219-32"><a href="#cb219-32" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;矩形: (</span><span class="sc">%d</span><span class="st">,</span><span class="sc">%d</span><span class="st">) から (</span><span class="sc">%d</span><span class="st">,</span><span class="sc">%d</span><span class="st">)</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> </span>
<span id="cb219-33"><a href="#cb219-33" aria-hidden="true" tabindex="-1"></a>           rect<span class="op">.</span>top_left<span class="op">.</span>x<span class="op">,</span> rect<span class="op">.</span>top_left<span class="op">.</span>y<span class="op">,</span></span>
<span id="cb219-34"><a href="#cb219-34" aria-hidden="true" tabindex="-1"></a>           rect<span class="op">.</span>bottom_right<span class="op">.</span>x<span class="op">,</span> rect<span class="op">.</span>bottom_right<span class="op">.</span>y<span class="op">);</span></span>
<span id="cb219-35"><a href="#cb219-35" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb219-36"><a href="#cb219-36" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb219-37"><a href="#cb219-37" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 id="構造体ポインタの基本">構造体ポインタの基本</h3>
<p>構造体もポインタで操作できます。大きな構造体を関数に渡す際に効率的です。</p>
<h4 id="構造体ポインタの宣言と使用">構造体ポインタの宣言と使用</h4>
<div class="sourceCode" id="cb220"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb220-1"><a href="#cb220-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb220-2"><a href="#cb220-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;string.h&gt;</span></span>
<span id="cb220-3"><a href="#cb220-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb220-4"><a href="#cb220-4" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> Book <span class="op">{</span></span>
<span id="cb220-5"><a href="#cb220-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> title<span class="op">[</span><span class="dv">100</span><span class="op">];</span></span>
<span id="cb220-6"><a href="#cb220-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> author<span class="op">[</span><span class="dv">50</span><span class="op">];</span></span>
<span id="cb220-7"><a href="#cb220-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> pages<span class="op">;</span></span>
<span id="cb220-8"><a href="#cb220-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span> price<span class="op">;</span></span>
<span id="cb220-9"><a href="#cb220-9" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb220-10"><a href="#cb220-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb220-11"><a href="#cb220-11" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb220-12"><a href="#cb220-12" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb220-13"><a href="#cb220-13" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Book book<span class="op">;</span></span>
<span id="cb220-14"><a href="#cb220-14" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Book <span class="op">*</span>book_ptr<span class="op">;</span></span>
<span id="cb220-15"><a href="#cb220-15" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb220-16"><a href="#cb220-16" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 構造体ポインタを構造体のアドレスに設定 */</span></span>
<span id="cb220-17"><a href="#cb220-17" aria-hidden="true" tabindex="-1"></a>    book_ptr <span class="op">=</span> <span class="op">&amp;</span>book<span class="op">;</span></span>
<span id="cb220-18"><a href="#cb220-18" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb220-19"><a href="#cb220-19" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* ポインタを通じてメンバーにアクセス（方法1: (*ptr).member） */</span></span>
<span id="cb220-20"><a href="#cb220-20" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">((*</span>book_ptr<span class="op">).</span>title<span class="op">,</span> <span class="st">&quot;C言語入門&quot;</span><span class="op">);</span></span>
<span id="cb220-21"><a href="#cb220-21" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">((*</span>book_ptr<span class="op">).</span>author<span class="op">,</span> <span class="st">&quot;山田花子&quot;</span><span class="op">);</span></span>
<span id="cb220-22"><a href="#cb220-22" aria-hidden="true" tabindex="-1"></a>    <span class="op">(*</span>book_ptr<span class="op">).</span>pages <span class="op">=</span> <span class="dv">350</span><span class="op">;</span></span>
<span id="cb220-23"><a href="#cb220-23" aria-hidden="true" tabindex="-1"></a>    <span class="op">(*</span>book_ptr<span class="op">).</span>price <span class="op">=</span> <span class="fl">2800.0</span><span class="op">;</span></span>
<span id="cb220-24"><a href="#cb220-24" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb220-25"><a href="#cb220-25" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 直接アクセスとポインタアクセスの比較 */</span></span>
<span id="cb220-26"><a href="#cb220-26" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== 直接アクセス ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb220-27"><a href="#cb220-27" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;書名: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> book<span class="op">.</span>title<span class="op">);</span></span>
<span id="cb220-28"><a href="#cb220-28" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;著者: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> book<span class="op">.</span>author<span class="op">);</span></span>
<span id="cb220-29"><a href="#cb220-29" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ページ数: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> book<span class="op">.</span>pages<span class="op">);</span></span>
<span id="cb220-30"><a href="#cb220-30" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;価格: </span><span class="sc">%.0f</span><span class="st">円</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> book<span class="op">.</span>price<span class="op">);</span></span>
<span id="cb220-31"><a href="#cb220-31" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb220-32"><a href="#cb220-32" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">=== ポインタアクセス ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb220-33"><a href="#cb220-33" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;書名: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(*</span>book_ptr<span class="op">).</span>title<span class="op">);</span></span>
<span id="cb220-34"><a href="#cb220-34" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;著者: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(*</span>book_ptr<span class="op">).</span>author<span class="op">);</span></span>
<span id="cb220-35"><a href="#cb220-35" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ページ数: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(*</span>book_ptr<span class="op">).</span>pages<span class="op">);</span></span>
<span id="cb220-36"><a href="#cb220-36" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;価格: </span><span class="sc">%.0f</span><span class="st">円</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(*</span>book_ptr<span class="op">).</span>price<span class="op">);</span></span>
<span id="cb220-37"><a href="#cb220-37" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb220-38"><a href="#cb220-38" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb220-39"><a href="#cb220-39" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 id="アロー演算子-の使用">アロー演算子（-&gt;）の使用</h3>
<p>構造体ポインタには便利なアロー演算子（-&gt;）が用意されています。</p>
<h4 id="演算子と.演算子の比較">-&gt;演算子と.演算子の比較</h4>
<div class="sourceCode" id="cb221"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb221-1"><a href="#cb221-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb221-2"><a href="#cb221-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;string.h&gt;</span></span>
<span id="cb221-3"><a href="#cb221-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb221-4"><a href="#cb221-4" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> Employee <span class="op">{</span></span>
<span id="cb221-5"><a href="#cb221-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> id<span class="op">;</span></span>
<span id="cb221-6"><a href="#cb221-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> name<span class="op">[</span><span class="dv">50</span><span class="op">];</span></span>
<span id="cb221-7"><a href="#cb221-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> department<span class="op">[</span><span class="dv">30</span><span class="op">];</span></span>
<span id="cb221-8"><a href="#cb221-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span> salary<span class="op">;</span></span>
<span id="cb221-9"><a href="#cb221-9" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb221-10"><a href="#cb221-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb221-11"><a href="#cb221-11" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> print_employee_info<span class="op">(</span><span class="kw">struct</span> Employee <span class="op">*</span>emp<span class="op">)</span></span>
<span id="cb221-12"><a href="#cb221-12" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb221-13"><a href="#cb221-13" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== 社員情報 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb221-14"><a href="#cb221-14" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ID: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> emp<span class="op">-&gt;</span>id<span class="op">);</span>           <span class="co">/* emp-&gt;id は (*emp).id と同じ */</span></span>
<span id="cb221-15"><a href="#cb221-15" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;名前: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> emp<span class="op">-&gt;</span>name<span class="op">);</span>       <span class="co">/* emp-&gt;name は (*emp).name と同じ */</span></span>
<span id="cb221-16"><a href="#cb221-16" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;部署: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> emp<span class="op">-&gt;</span>department<span class="op">);</span> <span class="co">/* emp-&gt;department は (*emp).department と同じ */</span></span>
<span id="cb221-17"><a href="#cb221-17" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;給与: </span><span class="sc">%.0f</span><span class="st">円</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> emp<span class="op">-&gt;</span>salary<span class="op">);</span> <span class="co">/* emp-&gt;salary は (*emp).salary と同じ */</span></span>
<span id="cb221-18"><a href="#cb221-18" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb221-19"><a href="#cb221-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb221-20"><a href="#cb221-20" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb221-21"><a href="#cb221-21" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb221-22"><a href="#cb221-22" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Employee emp<span class="op">;</span></span>
<span id="cb221-23"><a href="#cb221-23" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Employee <span class="op">*</span>emp_ptr <span class="op">=</span> <span class="op">&amp;</span>emp<span class="op">;</span></span>
<span id="cb221-24"><a href="#cb221-24" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb221-25"><a href="#cb221-25" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* -&gt;演算子を使用してメンバーに値を設定 */</span></span>
<span id="cb221-26"><a href="#cb221-26" aria-hidden="true" tabindex="-1"></a>    emp_ptr<span class="op">-&gt;</span>id <span class="op">=</span> <span class="dv">2001</span><span class="op">;</span></span>
<span id="cb221-27"><a href="#cb221-27" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>emp_ptr<span class="op">-&gt;</span>name<span class="op">,</span> <span class="st">&quot;佐藤次郎&quot;</span><span class="op">);</span></span>
<span id="cb221-28"><a href="#cb221-28" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>emp_ptr<span class="op">-&gt;</span>department<span class="op">,</span> <span class="st">&quot;開発部&quot;</span><span class="op">);</span></span>
<span id="cb221-29"><a href="#cb221-29" aria-hidden="true" tabindex="-1"></a>    emp_ptr<span class="op">-&gt;</span>salary <span class="op">=</span> <span class="fl">350000.0</span><span class="op">;</span></span>
<span id="cb221-30"><a href="#cb221-30" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb221-31"><a href="#cb221-31" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 3つの方法でアクセス */</span></span>
<span id="cb221-32"><a href="#cb221-32" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== 直接アクセス（.演算子） ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb221-33"><a href="#cb221-33" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ID: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> emp<span class="op">.</span>id<span class="op">);</span></span>
<span id="cb221-34"><a href="#cb221-34" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb221-35"><a href="#cb221-35" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">=== ポインタ経由（(*ptr).member） ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb221-36"><a href="#cb221-36" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ID: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(*</span>emp_ptr<span class="op">).</span>id<span class="op">);</span></span>
<span id="cb221-37"><a href="#cb221-37" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb221-38"><a href="#cb221-38" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">=== ポインタ経由（-&gt;演算子） ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb221-39"><a href="#cb221-39" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ID: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> emp_ptr<span class="op">-&gt;</span>id<span class="op">);</span></span>
<span id="cb221-40"><a href="#cb221-40" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb221-41"><a href="#cb221-41" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb221-42"><a href="#cb221-42" aria-hidden="true" tabindex="-1"></a>    print_employee_info<span class="op">(</span>emp_ptr<span class="op">);</span></span>
<span id="cb221-43"><a href="#cb221-43" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb221-44"><a href="#cb221-44" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb221-45"><a href="#cb221-45" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h4 id="演算子の実践例">-&gt;演算子の実践例</h4>
<div class="sourceCode" id="cb222"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb222-1"><a href="#cb222-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb222-2"><a href="#cb222-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;string.h&gt;</span></span>
<span id="cb222-3"><a href="#cb222-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb222-4"><a href="#cb222-4" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> Car <span class="op">{</span></span>
<span id="cb222-5"><a href="#cb222-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> brand<span class="op">[</span><span class="dv">30</span><span class="op">];</span></span>
<span id="cb222-6"><a href="#cb222-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> model<span class="op">[</span><span class="dv">30</span><span class="op">];</span></span>
<span id="cb222-7"><a href="#cb222-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> year<span class="op">;</span></span>
<span id="cb222-8"><a href="#cb222-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span> mileage<span class="op">;</span></span>
<span id="cb222-9"><a href="#cb222-9" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> is_electric<span class="op">;</span></span>
<span id="cb222-10"><a href="#cb222-10" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb222-11"><a href="#cb222-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb222-12"><a href="#cb222-12" aria-hidden="true" tabindex="-1"></a><span class="co">/* 車の情報を更新する関数 */</span></span>
<span id="cb222-13"><a href="#cb222-13" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> update_mileage<span class="op">(</span><span class="kw">struct</span> Car <span class="op">*</span>car<span class="op">,</span> <span class="dt">double</span> new_mileage<span class="op">)</span></span>
<span id="cb222-14"><a href="#cb222-14" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb222-15"><a href="#cb222-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>car <span class="op">!=</span> NULL <span class="op">&amp;&amp;</span> new_mileage <span class="op">&gt;=</span> car<span class="op">-&gt;</span>mileage<span class="op">)</span> <span class="op">{</span></span>
<span id="cb222-16"><a href="#cb222-16" aria-hidden="true" tabindex="-1"></a>        car<span class="op">-&gt;</span>mileage <span class="op">=</span> new_mileage<span class="op">;</span></span>
<span id="cb222-17"><a href="#cb222-17" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%s</span><span class="st"> </span><span class="sc">%s</span><span class="st"> の走行距離を </span><span class="sc">%.1f</span><span class="st"> km に更新しました</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> </span>
<span id="cb222-18"><a href="#cb222-18" aria-hidden="true" tabindex="-1"></a>               car<span class="op">-&gt;</span>brand<span class="op">,</span> car<span class="op">-&gt;</span>model<span class="op">,</span> car<span class="op">-&gt;</span>mileage<span class="op">);</span></span>
<span id="cb222-19"><a href="#cb222-19" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb222-20"><a href="#cb222-20" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb222-21"><a href="#cb222-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb222-22"><a href="#cb222-22" aria-hidden="true" tabindex="-1"></a><span class="co">/* 車の詳細情報を表示する関数 */</span></span>
<span id="cb222-23"><a href="#cb222-23" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> display_car_details<span class="op">(</span><span class="kw">struct</span> Car <span class="op">*</span>car<span class="op">)</span></span>
<span id="cb222-24"><a href="#cb222-24" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb222-25"><a href="#cb222-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>car <span class="op">==</span> NULL<span class="op">)</span> <span class="op">{</span></span>
<span id="cb222-26"><a href="#cb222-26" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;無効な車両データです</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb222-27"><a href="#cb222-27" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span><span class="op">;</span></span>
<span id="cb222-28"><a href="#cb222-28" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb222-29"><a href="#cb222-29" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb222-30"><a href="#cb222-30" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== 車両情報 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb222-31"><a href="#cb222-31" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ブランド: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> car<span class="op">-&gt;</span>brand<span class="op">);</span></span>
<span id="cb222-32"><a href="#cb222-32" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;モデル: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> car<span class="op">-&gt;</span>model<span class="op">);</span></span>
<span id="cb222-33"><a href="#cb222-33" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;年式: </span><span class="sc">%d</span><span class="st">年</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> car<span class="op">-&gt;</span>year<span class="op">);</span></span>
<span id="cb222-34"><a href="#cb222-34" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;走行距離: </span><span class="sc">%.1f</span><span class="st"> km</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> car<span class="op">-&gt;</span>mileage<span class="op">);</span></span>
<span id="cb222-35"><a href="#cb222-35" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;電気自動車: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> car<span class="op">-&gt;</span>is_electric <span class="op">?</span> <span class="st">&quot;はい&quot;</span> <span class="op">:</span> <span class="st">&quot;いいえ&quot;</span><span class="op">);</span></span>
<span id="cb222-36"><a href="#cb222-36" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb222-37"><a href="#cb222-37" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb222-38"><a href="#cb222-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb222-39"><a href="#cb222-39" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb222-40"><a href="#cb222-40" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb222-41"><a href="#cb222-41" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Car my_car<span class="op">;</span></span>
<span id="cb222-42"><a href="#cb222-42" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Car <span class="op">*</span>car_ptr <span class="op">=</span> <span class="op">&amp;</span>my_car<span class="op">;</span></span>
<span id="cb222-43"><a href="#cb222-43" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb222-44"><a href="#cb222-44" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* -&gt;演算子で車の初期設定 */</span></span>
<span id="cb222-45"><a href="#cb222-45" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>car_ptr<span class="op">-&gt;</span>brand<span class="op">,</span> <span class="st">&quot;Toyota&quot;</span><span class="op">);</span></span>
<span id="cb222-46"><a href="#cb222-46" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>car_ptr<span class="op">-&gt;</span>model<span class="op">,</span> <span class="st">&quot;Prius&quot;</span><span class="op">);</span></span>
<span id="cb222-47"><a href="#cb222-47" aria-hidden="true" tabindex="-1"></a>    car_ptr<span class="op">-&gt;</span>year <span class="op">=</span> <span class="dv">2020</span><span class="op">;</span></span>
<span id="cb222-48"><a href="#cb222-48" aria-hidden="true" tabindex="-1"></a>    car_ptr<span class="op">-&gt;</span>mileage <span class="op">=</span> <span class="fl">15000.0</span><span class="op">;</span></span>
<span id="cb222-49"><a href="#cb222-49" aria-hidden="true" tabindex="-1"></a>    car_ptr<span class="op">-&gt;</span>is_electric <span class="op">=</span> <span class="dv">0</span><span class="op">;</span>  <span class="co">/* ハイブリッド車 */</span></span>
<span id="cb222-50"><a href="#cb222-50" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb222-51"><a href="#cb222-51" aria-hidden="true" tabindex="-1"></a>    display_car_details<span class="op">(</span>car_ptr<span class="op">);</span></span>
<span id="cb222-52"><a href="#cb222-52" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb222-53"><a href="#cb222-53" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 走行距離を更新 */</span></span>
<span id="cb222-54"><a href="#cb222-54" aria-hidden="true" tabindex="-1"></a>    update_mileage<span class="op">(</span>car_ptr<span class="op">,</span> <span class="fl">18500.0</span><span class="op">);</span></span>
<span id="cb222-55"><a href="#cb222-55" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb222-56"><a href="#cb222-56" aria-hidden="true" tabindex="-1"></a>    display_car_details<span class="op">(</span>car_ptr<span class="op">);</span></span>
<span id="cb222-57"><a href="#cb222-57" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb222-58"><a href="#cb222-58" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb222-59"><a href="#cb222-59" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 id="構造体配列とポインタ">構造体配列とポインタ</h3>
<p>構造体の配列とそのポインタ操作について学習します。</p>
<h4 id="構造体配列の基本操作">構造体配列の基本操作</h4>
<div class="sourceCode" id="cb223"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb223-1"><a href="#cb223-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb223-2"><a href="#cb223-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;string.h&gt;</span></span>
<span id="cb223-3"><a href="#cb223-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb223-4"><a href="#cb223-4" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> Product <span class="op">{</span></span>
<span id="cb223-5"><a href="#cb223-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> code<span class="op">;</span></span>
<span id="cb223-6"><a href="#cb223-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> name<span class="op">[</span><span class="dv">50</span><span class="op">];</span></span>
<span id="cb223-7"><a href="#cb223-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span> price<span class="op">;</span></span>
<span id="cb223-8"><a href="#cb223-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> stock<span class="op">;</span></span>
<span id="cb223-9"><a href="#cb223-9" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb223-10"><a href="#cb223-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb223-11"><a href="#cb223-11" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> print_product<span class="op">(</span><span class="kw">struct</span> Product <span class="op">*</span>prod<span class="op">)</span></span>
<span id="cb223-12"><a href="#cb223-12" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb223-13"><a href="#cb223-13" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;商品コード: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> prod<span class="op">-&gt;</span>code<span class="op">);</span></span>
<span id="cb223-14"><a href="#cb223-14" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;商品名: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> prod<span class="op">-&gt;</span>name<span class="op">);</span></span>
<span id="cb223-15"><a href="#cb223-15" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;価格: </span><span class="sc">%.0f</span><span class="st">円</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> prod<span class="op">-&gt;</span>price<span class="op">);</span></span>
<span id="cb223-16"><a href="#cb223-16" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;在庫: </span><span class="sc">%d</span><span class="st">個</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> prod<span class="op">-&gt;</span>stock<span class="op">);</span></span>
<span id="cb223-17"><a href="#cb223-17" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;---</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb223-18"><a href="#cb223-18" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb223-19"><a href="#cb223-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb223-20"><a href="#cb223-20" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> print_all_products<span class="op">(</span><span class="kw">struct</span> Product products<span class="op">[],</span> <span class="dt">int</span> count<span class="op">)</span></span>
<span id="cb223-21"><a href="#cb223-21" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb223-22"><a href="#cb223-22" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb223-23"><a href="#cb223-23" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== 全商品リスト ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb223-24"><a href="#cb223-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> count<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb223-25"><a href="#cb223-25" aria-hidden="true" tabindex="-1"></a>        print_product<span class="op">(&amp;</span>products<span class="op">[</span>i<span class="op">]);</span>  <span class="co">/* 配列要素のアドレスを渡す */</span></span>
<span id="cb223-26"><a href="#cb223-26" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb223-27"><a href="#cb223-27" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb223-28"><a href="#cb223-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb223-29"><a href="#cb223-29" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb223-30"><a href="#cb223-30" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb223-31"><a href="#cb223-31" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Product inventory<span class="op">[</span><span class="dv">3</span><span class="op">];</span></span>
<span id="cb223-32"><a href="#cb223-32" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb223-33"><a href="#cb223-33" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb223-34"><a href="#cb223-34" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 商品データの初期化 */</span></span>
<span id="cb223-35"><a href="#cb223-35" aria-hidden="true" tabindex="-1"></a>    inventory<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="op">(</span><span class="kw">struct</span> Product<span class="op">){</span><span class="dv">101</span><span class="op">,</span> <span class="st">&quot;ノートPC&quot;</span><span class="op">,</span> <span class="dv">98000</span><span class="op">,</span> <span class="dv">5</span><span class="op">};</span></span>
<span id="cb223-36"><a href="#cb223-36" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb223-37"><a href="#cb223-37" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>inventory<span class="op">[</span><span class="dv">1</span><span class="op">].</span>name<span class="op">,</span> <span class="st">&quot;マウス&quot;</span><span class="op">);</span></span>
<span id="cb223-38"><a href="#cb223-38" aria-hidden="true" tabindex="-1"></a>    inventory<span class="op">[</span><span class="dv">1</span><span class="op">].</span>code <span class="op">=</span> <span class="dv">102</span><span class="op">;</span></span>
<span id="cb223-39"><a href="#cb223-39" aria-hidden="true" tabindex="-1"></a>    inventory<span class="op">[</span><span class="dv">1</span><span class="op">].</span>price <span class="op">=</span> <span class="dv">2980</span><span class="op">;</span></span>
<span id="cb223-40"><a href="#cb223-40" aria-hidden="true" tabindex="-1"></a>    inventory<span class="op">[</span><span class="dv">1</span><span class="op">].</span>stock <span class="op">=</span> <span class="dv">20</span><span class="op">;</span></span>
<span id="cb223-41"><a href="#cb223-41" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb223-42"><a href="#cb223-42" aria-hidden="true" tabindex="-1"></a>    inventory<span class="op">[</span><span class="dv">2</span><span class="op">].</span>code <span class="op">=</span> <span class="dv">103</span><span class="op">;</span></span>
<span id="cb223-43"><a href="#cb223-43" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>inventory<span class="op">[</span><span class="dv">2</span><span class="op">].</span>name<span class="op">,</span> <span class="st">&quot;キーボード&quot;</span><span class="op">);</span></span>
<span id="cb223-44"><a href="#cb223-44" aria-hidden="true" tabindex="-1"></a>    inventory<span class="op">[</span><span class="dv">2</span><span class="op">].</span>price <span class="op">=</span> <span class="dv">4500</span><span class="op">;</span></span>
<span id="cb223-45"><a href="#cb223-45" aria-hidden="true" tabindex="-1"></a>    inventory<span class="op">[</span><span class="dv">2</span><span class="op">].</span>stock <span class="op">=</span> <span class="dv">15</span><span class="op">;</span></span>
<span id="cb223-46"><a href="#cb223-46" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb223-47"><a href="#cb223-47" aria-hidden="true" tabindex="-1"></a>    print_all_products<span class="op">(</span>inventory<span class="op">,</span> <span class="dv">3</span><span class="op">);</span></span>
<span id="cb223-48"><a href="#cb223-48" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb223-49"><a href="#cb223-49" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* ポインタを使った配列操作 */</span></span>
<span id="cb223-50"><a href="#cb223-50" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">=== ポインタを使った操作 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb223-51"><a href="#cb223-51" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Product <span class="op">*</span>ptr <span class="op">=</span> inventory<span class="op">;</span>  <span class="co">/* 配列の先頭要素を指す */</span></span>
<span id="cb223-52"><a href="#cb223-52" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb223-53"><a href="#cb223-53" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">3</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb223-54"><a href="#cb223-54" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st">番目: </span><span class="sc">%s</span><span class="st"> (</span><span class="sc">%.0f</span><span class="st">円)</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> </span>
<span id="cb223-55"><a href="#cb223-55" aria-hidden="true" tabindex="-1"></a>               i <span class="op">+</span> <span class="dv">1</span><span class="op">,</span> <span class="op">(</span>ptr <span class="op">+</span> i<span class="op">)-&gt;</span>name<span class="op">,</span> <span class="op">(</span>ptr <span class="op">+</span> i<span class="op">)-&gt;</span>price<span class="op">);</span></span>
<span id="cb223-56"><a href="#cb223-56" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb223-57"><a href="#cb223-57" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb223-58"><a href="#cb223-58" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb223-59"><a href="#cb223-59" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h4
id="ポインタ演算による構造体配列操作">ポインタ演算による構造体配列操作</h4>
<div class="sourceCode" id="cb224"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb224-1"><a href="#cb224-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb224-2"><a href="#cb224-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;string.h&gt;</span></span>
<span id="cb224-3"><a href="#cb224-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb224-4"><a href="#cb224-4" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> Score <span class="op">{</span></span>
<span id="cb224-5"><a href="#cb224-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> subject<span class="op">[</span><span class="dv">30</span><span class="op">];</span></span>
<span id="cb224-6"><a href="#cb224-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> points<span class="op">;</span></span>
<span id="cb224-7"><a href="#cb224-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> grade<span class="op">;</span></span>
<span id="cb224-8"><a href="#cb224-8" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb224-9"><a href="#cb224-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb224-10"><a href="#cb224-10" aria-hidden="true" tabindex="-1"></a><span class="co">/* 成績を計算してグレードを設定 */</span></span>
<span id="cb224-11"><a href="#cb224-11" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> calculate_grade<span class="op">(</span><span class="kw">struct</span> Score <span class="op">*</span>score<span class="op">)</span></span>
<span id="cb224-12"><a href="#cb224-12" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb224-13"><a href="#cb224-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>score<span class="op">-&gt;</span>points <span class="op">&gt;=</span> <span class="dv">90</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb224-14"><a href="#cb224-14" aria-hidden="true" tabindex="-1"></a>        score<span class="op">-&gt;</span>grade <span class="op">=</span> <span class="ch">&#39;A&#39;</span><span class="op">;</span></span>
<span id="cb224-15"><a href="#cb224-15" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span> <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>score<span class="op">-&gt;</span>points <span class="op">&gt;=</span> <span class="dv">80</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb224-16"><a href="#cb224-16" aria-hidden="true" tabindex="-1"></a>        score<span class="op">-&gt;</span>grade <span class="op">=</span> <span class="ch">&#39;B&#39;</span><span class="op">;</span></span>
<span id="cb224-17"><a href="#cb224-17" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span> <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>score<span class="op">-&gt;</span>points <span class="op">&gt;=</span> <span class="dv">70</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb224-18"><a href="#cb224-18" aria-hidden="true" tabindex="-1"></a>        score<span class="op">-&gt;</span>grade <span class="op">=</span> <span class="ch">&#39;C&#39;</span><span class="op">;</span></span>
<span id="cb224-19"><a href="#cb224-19" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span> <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>score<span class="op">-&gt;</span>points <span class="op">&gt;=</span> <span class="dv">60</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb224-20"><a href="#cb224-20" aria-hidden="true" tabindex="-1"></a>        score<span class="op">-&gt;</span>grade <span class="op">=</span> <span class="ch">&#39;D&#39;</span><span class="op">;</span></span>
<span id="cb224-21"><a href="#cb224-21" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb224-22"><a href="#cb224-22" aria-hidden="true" tabindex="-1"></a>        score<span class="op">-&gt;</span>grade <span class="op">=</span> <span class="ch">&#39;F&#39;</span><span class="op">;</span></span>
<span id="cb224-23"><a href="#cb224-23" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb224-24"><a href="#cb224-24" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb224-25"><a href="#cb224-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb224-26"><a href="#cb224-26" aria-hidden="true" tabindex="-1"></a><span class="co">/* 配列内の最高得点を見つける */</span></span>
<span id="cb224-27"><a href="#cb224-27" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> Score<span class="op">*</span> find_best_score<span class="op">(</span><span class="kw">struct</span> Score scores<span class="op">[],</span> <span class="dt">int</span> count<span class="op">)</span></span>
<span id="cb224-28"><a href="#cb224-28" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb224-29"><a href="#cb224-29" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Score <span class="op">*</span>best <span class="op">=</span> <span class="op">&amp;</span>scores<span class="op">[</span><span class="dv">0</span><span class="op">];</span></span>
<span id="cb224-30"><a href="#cb224-30" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb224-31"><a href="#cb224-31" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb224-32"><a href="#cb224-32" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&lt;</span> count<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb224-33"><a href="#cb224-33" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>scores<span class="op">[</span>i<span class="op">].</span>points <span class="op">&gt;</span> best<span class="op">-&gt;</span>points<span class="op">)</span> <span class="op">{</span></span>
<span id="cb224-34"><a href="#cb224-34" aria-hidden="true" tabindex="-1"></a>            best <span class="op">=</span> <span class="op">&amp;</span>scores<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb224-35"><a href="#cb224-35" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb224-36"><a href="#cb224-36" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb224-37"><a href="#cb224-37" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb224-38"><a href="#cb224-38" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> best<span class="op">;</span></span>
<span id="cb224-39"><a href="#cb224-39" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb224-40"><a href="#cb224-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb224-41"><a href="#cb224-41" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb224-42"><a href="#cb224-42" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb224-43"><a href="#cb224-43" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Score my_scores<span class="op">[</span><span class="dv">4</span><span class="op">];</span></span>
<span id="cb224-44"><a href="#cb224-44" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Score <span class="op">*</span>ptr<span class="op">;</span></span>
<span id="cb224-45"><a href="#cb224-45" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Score <span class="op">*</span>best<span class="op">;</span></span>
<span id="cb224-46"><a href="#cb224-46" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb224-47"><a href="#cb224-47" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb224-48"><a href="#cb224-48" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 成績データの入力 */</span></span>
<span id="cb224-49"><a href="#cb224-49" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>my_scores<span class="op">[</span><span class="dv">0</span><span class="op">].</span>subject<span class="op">,</span> <span class="st">&quot;数学&quot;</span><span class="op">);</span></span>
<span id="cb224-50"><a href="#cb224-50" aria-hidden="true" tabindex="-1"></a>    my_scores<span class="op">[</span><span class="dv">0</span><span class="op">].</span>points <span class="op">=</span> <span class="dv">85</span><span class="op">;</span></span>
<span id="cb224-51"><a href="#cb224-51" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb224-52"><a href="#cb224-52" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>my_scores<span class="op">[</span><span class="dv">1</span><span class="op">].</span>subject<span class="op">,</span> <span class="st">&quot;英語&quot;</span><span class="op">);</span></span>
<span id="cb224-53"><a href="#cb224-53" aria-hidden="true" tabindex="-1"></a>    my_scores<span class="op">[</span><span class="dv">1</span><span class="op">].</span>points <span class="op">=</span> <span class="dv">92</span><span class="op">;</span></span>
<span id="cb224-54"><a href="#cb224-54" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb224-55"><a href="#cb224-55" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>my_scores<span class="op">[</span><span class="dv">2</span><span class="op">].</span>subject<span class="op">,</span> <span class="st">&quot;理科&quot;</span><span class="op">);</span></span>
<span id="cb224-56"><a href="#cb224-56" aria-hidden="true" tabindex="-1"></a>    my_scores<span class="op">[</span><span class="dv">2</span><span class="op">].</span>points <span class="op">=</span> <span class="dv">78</span><span class="op">;</span></span>
<span id="cb224-57"><a href="#cb224-57" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb224-58"><a href="#cb224-58" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>my_scores<span class="op">[</span><span class="dv">3</span><span class="op">].</span>subject<span class="op">,</span> <span class="st">&quot;社会&quot;</span><span class="op">);</span></span>
<span id="cb224-59"><a href="#cb224-59" aria-hidden="true" tabindex="-1"></a>    my_scores<span class="op">[</span><span class="dv">3</span><span class="op">].</span>points <span class="op">=</span> <span class="dv">88</span><span class="op">;</span></span>
<span id="cb224-60"><a href="#cb224-60" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb224-61"><a href="#cb224-61" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 各科目のグレードを計算 */</span></span>
<span id="cb224-62"><a href="#cb224-62" aria-hidden="true" tabindex="-1"></a>    ptr <span class="op">=</span> my_scores<span class="op">;</span>  <span class="co">/* 配列の先頭を指すポインタ */</span></span>
<span id="cb224-63"><a href="#cb224-63" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">4</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb224-64"><a href="#cb224-64" aria-hidden="true" tabindex="-1"></a>        calculate_grade<span class="op">(</span>ptr <span class="op">+</span> i<span class="op">);</span>  <span class="co">/* ポインタ演算でi番目の要素 */</span></span>
<span id="cb224-65"><a href="#cb224-65" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb224-66"><a href="#cb224-66" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb224-67"><a href="#cb224-67" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 結果表示 */</span></span>
<span id="cb224-68"><a href="#cb224-68" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== 成績表 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb224-69"><a href="#cb224-69" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">4</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb224-70"><a href="#cb224-70" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%s</span><span class="st">: </span><span class="sc">%d</span><span class="st">点 (評価: </span><span class="sc">%c</span><span class="st">)</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> </span>
<span id="cb224-71"><a href="#cb224-71" aria-hidden="true" tabindex="-1"></a>               my_scores<span class="op">[</span>i<span class="op">].</span>subject<span class="op">,</span> </span>
<span id="cb224-72"><a href="#cb224-72" aria-hidden="true" tabindex="-1"></a>               my_scores<span class="op">[</span>i<span class="op">].</span>points<span class="op">,</span> </span>
<span id="cb224-73"><a href="#cb224-73" aria-hidden="true" tabindex="-1"></a>               my_scores<span class="op">[</span>i<span class="op">].</span>grade<span class="op">);</span></span>
<span id="cb224-74"><a href="#cb224-74" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb224-75"><a href="#cb224-75" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb224-76"><a href="#cb224-76" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 最高得点の科目を見つける */</span></span>
<span id="cb224-77"><a href="#cb224-77" aria-hidden="true" tabindex="-1"></a>    best <span class="op">=</span> find_best_score<span class="op">(</span>my_scores<span class="op">,</span> <span class="dv">4</span><span class="op">);</span></span>
<span id="cb224-78"><a href="#cb224-78" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">最高得点: </span><span class="sc">%s</span><span class="st"> (</span><span class="sc">%d</span><span class="st">点)</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> best<span class="op">-&gt;</span>subject<span class="op">,</span> best<span class="op">-&gt;</span>points<span class="op">);</span></span>
<span id="cb224-79"><a href="#cb224-79" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb224-80"><a href="#cb224-80" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb224-81"><a href="#cb224-81" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 id="構造体ポインタ配列">構造体ポインタ配列</h3>
<p>ポインタの配列で複数の構造体を効率的に管理します。</p>
<h4 id="構造体ポインタ配列の基本">構造体ポインタ配列の基本</h4>
<div class="sourceCode" id="cb225"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb225-1"><a href="#cb225-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb225-2"><a href="#cb225-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;string.h&gt;</span></span>
<span id="cb225-3"><a href="#cb225-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb225-4"><a href="#cb225-4" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> Person <span class="op">{</span></span>
<span id="cb225-5"><a href="#cb225-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> name<span class="op">[</span><span class="dv">50</span><span class="op">];</span></span>
<span id="cb225-6"><a href="#cb225-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> age<span class="op">;</span></span>
<span id="cb225-7"><a href="#cb225-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> city<span class="op">[</span><span class="dv">30</span><span class="op">];</span></span>
<span id="cb225-8"><a href="#cb225-8" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb225-9"><a href="#cb225-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb225-10"><a href="#cb225-10" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> print_person_info<span class="op">(</span><span class="kw">struct</span> Person <span class="op">*</span>person<span class="op">)</span></span>
<span id="cb225-11"><a href="#cb225-11" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb225-12"><a href="#cb225-12" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;名前: </span><span class="sc">%s</span><span class="st">, 年齢: </span><span class="sc">%d</span><span class="st">歳, 居住地: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> </span>
<span id="cb225-13"><a href="#cb225-13" aria-hidden="true" tabindex="-1"></a>           person<span class="op">-&gt;</span>name<span class="op">,</span> person<span class="op">-&gt;</span>age<span class="op">,</span> person<span class="op">-&gt;</span>city<span class="op">);</span></span>
<span id="cb225-14"><a href="#cb225-14" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb225-15"><a href="#cb225-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb225-16"><a href="#cb225-16" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb225-17"><a href="#cb225-17" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb225-18"><a href="#cb225-18" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 個別の構造体変数 */</span></span>
<span id="cb225-19"><a href="#cb225-19" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Person person1 <span class="op">=</span> <span class="op">{</span><span class="st">&quot;山田太郎&quot;</span><span class="op">,</span> <span class="dv">25</span><span class="op">,</span> <span class="st">&quot;東京&quot;</span><span class="op">};</span></span>
<span id="cb225-20"><a href="#cb225-20" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Person person2 <span class="op">=</span> <span class="op">{</span><span class="st">&quot;佐藤花子&quot;</span><span class="op">,</span> <span class="dv">30</span><span class="op">,</span> <span class="st">&quot;大阪&quot;</span><span class="op">};</span></span>
<span id="cb225-21"><a href="#cb225-21" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Person person3 <span class="op">=</span> <span class="op">{</span><span class="st">&quot;田中次郎&quot;</span><span class="op">,</span> <span class="dv">28</span><span class="op">,</span> <span class="st">&quot;名古屋&quot;</span><span class="op">};</span></span>
<span id="cb225-22"><a href="#cb225-22" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Person person4 <span class="op">=</span> <span class="op">{</span><span class="st">&quot;鈴木美咲&quot;</span><span class="op">,</span> <span class="dv">22</span><span class="op">,</span> <span class="st">&quot;福岡&quot;</span><span class="op">};</span></span>
<span id="cb225-23"><a href="#cb225-23" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb225-24"><a href="#cb225-24" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 構造体ポインタの配列 */</span></span>
<span id="cb225-25"><a href="#cb225-25" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Person <span class="op">*</span>people<span class="op">[</span><span class="dv">4</span><span class="op">];</span></span>
<span id="cb225-26"><a href="#cb225-26" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb225-27"><a href="#cb225-27" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb225-28"><a href="#cb225-28" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* ポインタ配列に各構造体のアドレスを設定 */</span></span>
<span id="cb225-29"><a href="#cb225-29" aria-hidden="true" tabindex="-1"></a>    people<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="op">&amp;</span>person1<span class="op">;</span></span>
<span id="cb225-30"><a href="#cb225-30" aria-hidden="true" tabindex="-1"></a>    people<span class="op">[</span><span class="dv">1</span><span class="op">]</span> <span class="op">=</span> <span class="op">&amp;</span>person2<span class="op">;</span></span>
<span id="cb225-31"><a href="#cb225-31" aria-hidden="true" tabindex="-1"></a>    people<span class="op">[</span><span class="dv">2</span><span class="op">]</span> <span class="op">=</span> <span class="op">&amp;</span>person3<span class="op">;</span></span>
<span id="cb225-32"><a href="#cb225-32" aria-hidden="true" tabindex="-1"></a>    people<span class="op">[</span><span class="dv">3</span><span class="op">]</span> <span class="op">=</span> <span class="op">&amp;</span>person4<span class="op">;</span></span>
<span id="cb225-33"><a href="#cb225-33" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb225-34"><a href="#cb225-34" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== 全員の情報 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb225-35"><a href="#cb225-35" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">4</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb225-36"><a href="#cb225-36" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st">. &quot;</span><span class="op">,</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb225-37"><a href="#cb225-37" aria-hidden="true" tabindex="-1"></a>        print_person_info<span class="op">(</span>people<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb225-38"><a href="#cb225-38" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb225-39"><a href="#cb225-39" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb225-40"><a href="#cb225-40" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 特定の条件で検索 */</span></span>
<span id="cb225-41"><a href="#cb225-41" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">=== 25歳未満の人 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb225-42"><a href="#cb225-42" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">4</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb225-43"><a href="#cb225-43" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>people<span class="op">[</span>i<span class="op">]-&gt;</span>age <span class="op">&lt;</span> <span class="dv">25</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb225-44"><a href="#cb225-44" aria-hidden="true" tabindex="-1"></a>            print_person_info<span class="op">(</span>people<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb225-45"><a href="#cb225-45" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb225-46"><a href="#cb225-46" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb225-47"><a href="#cb225-47" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb225-48"><a href="#cb225-48" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb225-49"><a href="#cb225-49" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h4 id="動的な構造体ポインタ配列">動的な構造体ポインタ配列</h4>
<div class="sourceCode" id="cb226"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb226-1"><a href="#cb226-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb226-2"><a href="#cb226-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;string.h&gt;</span></span>
<span id="cb226-3"><a href="#cb226-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb226-4"><a href="#cb226-4" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> Student <span class="op">{</span></span>
<span id="cb226-5"><a href="#cb226-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> id<span class="op">;</span></span>
<span id="cb226-6"><a href="#cb226-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> name<span class="op">[</span><span class="dv">50</span><span class="op">];</span></span>
<span id="cb226-7"><a href="#cb226-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span> gpa<span class="op">;</span></span>
<span id="cb226-8"><a href="#cb226-8" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb226-9"><a href="#cb226-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb226-10"><a href="#cb226-10" aria-hidden="true" tabindex="-1"></a><span class="co">/* 学生データを作成する関数 */</span></span>
<span id="cb226-11"><a href="#cb226-11" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> Student create_student<span class="op">(</span><span class="dt">int</span> id<span class="op">,</span> <span class="dt">const</span> <span class="dt">char</span><span class="op">*</span> name<span class="op">,</span> <span class="dt">double</span> gpa<span class="op">)</span></span>
<span id="cb226-12"><a href="#cb226-12" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb226-13"><a href="#cb226-13" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Student student<span class="op">;</span></span>
<span id="cb226-14"><a href="#cb226-14" aria-hidden="true" tabindex="-1"></a>    student<span class="op">.</span>id <span class="op">=</span> id<span class="op">;</span></span>
<span id="cb226-15"><a href="#cb226-15" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>student<span class="op">.</span>name<span class="op">,</span> name<span class="op">);</span></span>
<span id="cb226-16"><a href="#cb226-16" aria-hidden="true" tabindex="-1"></a>    student<span class="op">.</span>gpa <span class="op">=</span> gpa<span class="op">;</span></span>
<span id="cb226-17"><a href="#cb226-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> student<span class="op">;</span></span>
<span id="cb226-18"><a href="#cb226-18" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb226-19"><a href="#cb226-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb226-20"><a href="#cb226-20" aria-hidden="true" tabindex="-1"></a><span class="co">/* GPA順でソート（バブルソート） */</span></span>
<span id="cb226-21"><a href="#cb226-21" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> sort_students_by_gpa<span class="op">(</span><span class="kw">struct</span> Student <span class="op">*</span>students<span class="op">[],</span> <span class="dt">int</span> count<span class="op">)</span></span>
<span id="cb226-22"><a href="#cb226-22" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb226-23"><a href="#cb226-23" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">,</span> j<span class="op">;</span></span>
<span id="cb226-24"><a href="#cb226-24" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Student <span class="op">*</span>temp<span class="op">;</span></span>
<span id="cb226-25"><a href="#cb226-25" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb226-26"><a href="#cb226-26" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> count <span class="op">-</span> <span class="dv">1</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb226-27"><a href="#cb226-27" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span>j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> j <span class="op">&lt;</span> count <span class="op">-</span> <span class="dv">1</span> <span class="op">-</span> i<span class="op">;</span> j<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb226-28"><a href="#cb226-28" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>students<span class="op">[</span>j<span class="op">]-&gt;</span>gpa <span class="op">&lt;</span> students<span class="op">[</span>j <span class="op">+</span> <span class="dv">1</span><span class="op">]-&gt;</span>gpa<span class="op">)</span> <span class="op">{</span></span>
<span id="cb226-29"><a href="#cb226-29" aria-hidden="true" tabindex="-1"></a>                temp <span class="op">=</span> students<span class="op">[</span>j<span class="op">];</span></span>
<span id="cb226-30"><a href="#cb226-30" aria-hidden="true" tabindex="-1"></a>                students<span class="op">[</span>j<span class="op">]</span> <span class="op">=</span> students<span class="op">[</span>j <span class="op">+</span> <span class="dv">1</span><span class="op">];</span></span>
<span id="cb226-31"><a href="#cb226-31" aria-hidden="true" tabindex="-1"></a>                students<span class="op">[</span>j <span class="op">+</span> <span class="dv">1</span><span class="op">]</span> <span class="op">=</span> temp<span class="op">;</span></span>
<span id="cb226-32"><a href="#cb226-32" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb226-33"><a href="#cb226-33" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb226-34"><a href="#cb226-34" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb226-35"><a href="#cb226-35" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb226-36"><a href="#cb226-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb226-37"><a href="#cb226-37" aria-hidden="true" tabindex="-1"></a><span class="co">/* 学生一覧を表示 */</span></span>
<span id="cb226-38"><a href="#cb226-38" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> display_students<span class="op">(</span><span class="kw">struct</span> Student <span class="op">*</span>students<span class="op">[],</span> <span class="dt">int</span> count<span class="op">)</span></span>
<span id="cb226-39"><a href="#cb226-39" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb226-40"><a href="#cb226-40" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb226-41"><a href="#cb226-41" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ID</span><span class="sc">\t</span><span class="st">名前</span><span class="sc">\t\t</span><span class="st">GPA</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb226-42"><a href="#cb226-42" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;------------------------</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb226-43"><a href="#cb226-43" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> count<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb226-44"><a href="#cb226-44" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d\t%s\t\t%.1f\n</span><span class="st">&quot;</span><span class="op">,</span> </span>
<span id="cb226-45"><a href="#cb226-45" aria-hidden="true" tabindex="-1"></a>               students<span class="op">[</span>i<span class="op">]-&gt;</span>id<span class="op">,</span> </span>
<span id="cb226-46"><a href="#cb226-46" aria-hidden="true" tabindex="-1"></a>               students<span class="op">[</span>i<span class="op">]-&gt;</span>name<span class="op">,</span> </span>
<span id="cb226-47"><a href="#cb226-47" aria-hidden="true" tabindex="-1"></a>               students<span class="op">[</span>i<span class="op">]-&gt;</span>gpa<span class="op">);</span></span>
<span id="cb226-48"><a href="#cb226-48" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb226-49"><a href="#cb226-49" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb226-50"><a href="#cb226-50" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb226-51"><a href="#cb226-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb226-52"><a href="#cb226-52" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb226-53"><a href="#cb226-53" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb226-54"><a href="#cb226-54" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 学生データの作成 */</span></span>
<span id="cb226-55"><a href="#cb226-55" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Student student1 <span class="op">=</span> create_student<span class="op">(</span><span class="dv">1001</span><span class="op">,</span> <span class="st">&quot;田中太郎&quot;</span><span class="op">,</span> <span class="fl">3.2</span><span class="op">);</span></span>
<span id="cb226-56"><a href="#cb226-56" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Student student2 <span class="op">=</span> create_student<span class="op">(</span><span class="dv">1002</span><span class="op">,</span> <span class="st">&quot;佐藤花子&quot;</span><span class="op">,</span> <span class="fl">3.8</span><span class="op">);</span></span>
<span id="cb226-57"><a href="#cb226-57" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Student student3 <span class="op">=</span> create_student<span class="op">(</span><span class="dv">1003</span><span class="op">,</span> <span class="st">&quot;山田次郎&quot;</span><span class="op">,</span> <span class="fl">2.9</span><span class="op">);</span></span>
<span id="cb226-58"><a href="#cb226-58" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Student student4 <span class="op">=</span> create_student<span class="op">(</span><span class="dv">1004</span><span class="op">,</span> <span class="st">&quot;鈴木美咲&quot;</span><span class="op">,</span> <span class="fl">3.5</span><span class="op">);</span></span>
<span id="cb226-59"><a href="#cb226-59" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Student student5 <span class="op">=</span> create_student<span class="op">(</span><span class="dv">1005</span><span class="op">,</span> <span class="st">&quot;高橋健太&quot;</span><span class="op">,</span> <span class="fl">3.1</span><span class="op">);</span></span>
<span id="cb226-60"><a href="#cb226-60" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb226-61"><a href="#cb226-61" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 構造体ポインタ配列 */</span></span>
<span id="cb226-62"><a href="#cb226-62" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Student <span class="op">*</span>class_roster<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb226-63"><a href="#cb226-63" aria-hidden="true" tabindex="-1"></a>        <span class="op">&amp;</span>student1<span class="op">,</span> <span class="op">&amp;</span>student2<span class="op">,</span> <span class="op">&amp;</span>student3<span class="op">,</span> <span class="op">&amp;</span>student4<span class="op">,</span> <span class="op">&amp;</span>student5</span>
<span id="cb226-64"><a href="#cb226-64" aria-hidden="true" tabindex="-1"></a>    <span class="op">};</span></span>
<span id="cb226-65"><a href="#cb226-65" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb226-66"><a href="#cb226-66" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> class_size <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>class_roster<span class="op">)</span> <span class="op">/</span> <span class="kw">sizeof</span><span class="op">(</span>class_roster<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb226-67"><a href="#cb226-67" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb226-68"><a href="#cb226-68" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== 入学順（元の順序） ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb226-69"><a href="#cb226-69" aria-hidden="true" tabindex="-1"></a>    display_students<span class="op">(</span>class_roster<span class="op">,</span> class_size<span class="op">);</span></span>
<span id="cb226-70"><a href="#cb226-70" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb226-71"><a href="#cb226-71" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* GPA順でソート */</span></span>
<span id="cb226-72"><a href="#cb226-72" aria-hidden="true" tabindex="-1"></a>    sort_students_by_gpa<span class="op">(</span>class_roster<span class="op">,</span> class_size<span class="op">);</span></span>
<span id="cb226-73"><a href="#cb226-73" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb226-74"><a href="#cb226-74" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== GPA順（高い順） ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb226-75"><a href="#cb226-75" aria-hidden="true" tabindex="-1"></a>    display_students<span class="op">(</span>class_roster<span class="op">,</span> class_size<span class="op">);</span></span>
<span id="cb226-76"><a href="#cb226-76" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb226-77"><a href="#cb226-77" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 優秀な学生を見つける */</span></span>
<span id="cb226-78"><a href="#cb226-78" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== GPA 3.5以上の学生 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb226-79"><a href="#cb226-79" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb226-80"><a href="#cb226-80" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> class_size<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb226-81"><a href="#cb226-81" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>class_roster<span class="op">[</span>i<span class="op">]-&gt;</span>gpa <span class="op">&gt;=</span> <span class="fl">3.5</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb226-82"><a href="#cb226-82" aria-hidden="true" tabindex="-1"></a>            printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%s</span><span class="st"> (GPA: </span><span class="sc">%.1f</span><span class="st">)</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> </span>
<span id="cb226-83"><a href="#cb226-83" aria-hidden="true" tabindex="-1"></a>                   class_roster<span class="op">[</span>i<span class="op">]-&gt;</span>name<span class="op">,</span> </span>
<span id="cb226-84"><a href="#cb226-84" aria-hidden="true" tabindex="-1"></a>                   class_roster<span class="op">[</span>i<span class="op">]-&gt;</span>gpa<span class="op">);</span></span>
<span id="cb226-85"><a href="#cb226-85" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb226-86"><a href="#cb226-86" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb226-87"><a href="#cb226-87" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb226-88"><a href="#cb226-88" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb226-89"><a href="#cb226-89" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 id="ネストした構造体とポインタ">ネストした構造体とポインタ</h3>
<p>構造体の中に他の構造体を含む場合のポインタ操作について学習します。</p>
<h4 id="ネストした構造体の基本">ネストした構造体の基本</h4>
<div class="sourceCode" id="cb227"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb227-1"><a href="#cb227-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb227-2"><a href="#cb227-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;string.h&gt;</span></span>
<span id="cb227-3"><a href="#cb227-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb227-4"><a href="#cb227-4" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> Address <span class="op">{</span></span>
<span id="cb227-5"><a href="#cb227-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> street<span class="op">[</span><span class="dv">100</span><span class="op">];</span></span>
<span id="cb227-6"><a href="#cb227-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> city<span class="op">[</span><span class="dv">50</span><span class="op">];</span></span>
<span id="cb227-7"><a href="#cb227-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> postal_code<span class="op">[</span><span class="dv">20</span><span class="op">];</span></span>
<span id="cb227-8"><a href="#cb227-8" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb227-9"><a href="#cb227-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb227-10"><a href="#cb227-10" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> Contact <span class="op">{</span></span>
<span id="cb227-11"><a href="#cb227-11" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> phone<span class="op">[</span><span class="dv">20</span><span class="op">];</span></span>
<span id="cb227-12"><a href="#cb227-12" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> email<span class="op">[</span><span class="dv">50</span><span class="op">];</span></span>
<span id="cb227-13"><a href="#cb227-13" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb227-14"><a href="#cb227-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb227-15"><a href="#cb227-15" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> Employee <span class="op">{</span></span>
<span id="cb227-16"><a href="#cb227-16" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> id<span class="op">;</span></span>
<span id="cb227-17"><a href="#cb227-17" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> name<span class="op">[</span><span class="dv">50</span><span class="op">];</span></span>
<span id="cb227-18"><a href="#cb227-18" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Address address<span class="op">;</span>    <span class="co">/* ネストした構造体 */</span></span>
<span id="cb227-19"><a href="#cb227-19" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Contact contact<span class="op">;</span>    <span class="co">/* ネストした構造体 */</span></span>
<span id="cb227-20"><a href="#cb227-20" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span> salary<span class="op">;</span></span>
<span id="cb227-21"><a href="#cb227-21" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb227-22"><a href="#cb227-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb227-23"><a href="#cb227-23" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> print_employee_details<span class="op">(</span><span class="kw">struct</span> Employee <span class="op">*</span>emp<span class="op">)</span></span>
<span id="cb227-24"><a href="#cb227-24" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb227-25"><a href="#cb227-25" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== 社員詳細情報 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb227-26"><a href="#cb227-26" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ID: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> emp<span class="op">-&gt;</span>id<span class="op">);</span></span>
<span id="cb227-27"><a href="#cb227-27" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;名前: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> emp<span class="op">-&gt;</span>name<span class="op">);</span></span>
<span id="cb227-28"><a href="#cb227-28" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;住所: </span><span class="sc">%s</span><span class="st">, </span><span class="sc">%s</span><span class="st"> </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> </span>
<span id="cb227-29"><a href="#cb227-29" aria-hidden="true" tabindex="-1"></a>           emp<span class="op">-&gt;</span>address<span class="op">.</span>street<span class="op">,</span> </span>
<span id="cb227-30"><a href="#cb227-30" aria-hidden="true" tabindex="-1"></a>           emp<span class="op">-&gt;</span>address<span class="op">.</span>city<span class="op">,</span> </span>
<span id="cb227-31"><a href="#cb227-31" aria-hidden="true" tabindex="-1"></a>           emp<span class="op">-&gt;</span>address<span class="op">.</span>postal_code<span class="op">);</span></span>
<span id="cb227-32"><a href="#cb227-32" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;電話: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> emp<span class="op">-&gt;</span>contact<span class="op">.</span>phone<span class="op">);</span></span>
<span id="cb227-33"><a href="#cb227-33" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;メール: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> emp<span class="op">-&gt;</span>contact<span class="op">.</span>email<span class="op">);</span></span>
<span id="cb227-34"><a href="#cb227-34" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;給与: </span><span class="sc">%.0f</span><span class="st">円</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> emp<span class="op">-&gt;</span>salary<span class="op">);</span></span>
<span id="cb227-35"><a href="#cb227-35" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb227-36"><a href="#cb227-36" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb227-37"><a href="#cb227-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb227-38"><a href="#cb227-38" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> update_address<span class="op">(</span><span class="kw">struct</span> Employee <span class="op">*</span>emp<span class="op">,</span> <span class="dt">const</span> <span class="dt">char</span><span class="op">*</span> street<span class="op">,</span> </span>
<span id="cb227-39"><a href="#cb227-39" aria-hidden="true" tabindex="-1"></a>                   <span class="dt">const</span> <span class="dt">char</span><span class="op">*</span> city<span class="op">,</span> <span class="dt">const</span> <span class="dt">char</span><span class="op">*</span> postal_code<span class="op">)</span></span>
<span id="cb227-40"><a href="#cb227-40" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb227-41"><a href="#cb227-41" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>emp<span class="op">-&gt;</span>address<span class="op">.</span>street<span class="op">,</span> street<span class="op">);</span></span>
<span id="cb227-42"><a href="#cb227-42" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>emp<span class="op">-&gt;</span>address<span class="op">.</span>city<span class="op">,</span> city<span class="op">);</span></span>
<span id="cb227-43"><a href="#cb227-43" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>emp<span class="op">-&gt;</span>address<span class="op">.</span>postal_code<span class="op">,</span> postal_code<span class="op">);</span></span>
<span id="cb227-44"><a href="#cb227-44" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%s</span><span class="st"> の住所を更新しました</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> emp<span class="op">-&gt;</span>name<span class="op">);</span></span>
<span id="cb227-45"><a href="#cb227-45" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb227-46"><a href="#cb227-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb227-47"><a href="#cb227-47" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb227-48"><a href="#cb227-48" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb227-49"><a href="#cb227-49" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Employee emp<span class="op">;</span></span>
<span id="cb227-50"><a href="#cb227-50" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Employee <span class="op">*</span>emp_ptr <span class="op">=</span> <span class="op">&amp;</span>emp<span class="op">;</span></span>
<span id="cb227-51"><a href="#cb227-51" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb227-52"><a href="#cb227-52" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 基本情報の設定 */</span></span>
<span id="cb227-53"><a href="#cb227-53" aria-hidden="true" tabindex="-1"></a>    emp_ptr<span class="op">-&gt;</span>id <span class="op">=</span> <span class="dv">5001</span><span class="op">;</span></span>
<span id="cb227-54"><a href="#cb227-54" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>emp_ptr<span class="op">-&gt;</span>name<span class="op">,</span> <span class="st">&quot;田中太郎&quot;</span><span class="op">);</span></span>
<span id="cb227-55"><a href="#cb227-55" aria-hidden="true" tabindex="-1"></a>    emp_ptr<span class="op">-&gt;</span>salary <span class="op">=</span> <span class="fl">450000.0</span><span class="op">;</span></span>
<span id="cb227-56"><a href="#cb227-56" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb227-57"><a href="#cb227-57" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* ネストした構造体メンバーの設定 */</span></span>
<span id="cb227-58"><a href="#cb227-58" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>emp_ptr<span class="op">-&gt;</span>address<span class="op">.</span>street<span class="op">,</span> <span class="st">&quot;新宿区西新宿1-2-3&quot;</span><span class="op">);</span></span>
<span id="cb227-59"><a href="#cb227-59" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>emp_ptr<span class="op">-&gt;</span>address<span class="op">.</span>city<span class="op">,</span> <span class="st">&quot;東京都&quot;</span><span class="op">);</span></span>
<span id="cb227-60"><a href="#cb227-60" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>emp_ptr<span class="op">-&gt;</span>address<span class="op">.</span>postal_code<span class="op">,</span> <span class="st">&quot;160-0023&quot;</span><span class="op">);</span></span>
<span id="cb227-61"><a href="#cb227-61" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb227-62"><a href="#cb227-62" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>emp_ptr<span class="op">-&gt;</span>contact<span class="op">.</span>phone<span class="op">,</span> <span class="st">&quot;03-1234-5678&quot;</span><span class="op">);</span></span>
<span id="cb227-63"><a href="#cb227-63" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>emp_ptr<span class="op">-&gt;</span>contact<span class="op">.</span>email<span class="op">,</span> <span class="st">&quot;tanaka@company.co.jp&quot;</span><span class="op">);</span></span>
<span id="cb227-64"><a href="#cb227-64" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb227-65"><a href="#cb227-65" aria-hidden="true" tabindex="-1"></a>    print_employee_details<span class="op">(</span>emp_ptr<span class="op">);</span></span>
<span id="cb227-66"><a href="#cb227-66" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb227-67"><a href="#cb227-67" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 住所更新 */</span></span>
<span id="cb227-68"><a href="#cb227-68" aria-hidden="true" tabindex="-1"></a>    update_address<span class="op">(</span>emp_ptr<span class="op">,</span> <span class="st">&quot;渋谷区渋谷2-3-4&quot;</span><span class="op">,</span> <span class="st">&quot;東京都&quot;</span><span class="op">,</span> <span class="st">&quot;150-0002&quot;</span><span class="op">);</span></span>
<span id="cb227-69"><a href="#cb227-69" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb227-70"><a href="#cb227-70" aria-hidden="true" tabindex="-1"></a>    print_employee_details<span class="op">(</span>emp_ptr<span class="op">);</span></span>
<span id="cb227-71"><a href="#cb227-71" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb227-72"><a href="#cb227-72" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb227-73"><a href="#cb227-73" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h4 id="構造体ポインタのネスト">構造体ポインタのネスト</h4>
<div class="sourceCode" id="cb228"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb228-1"><a href="#cb228-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb228-2"><a href="#cb228-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;string.h&gt;</span></span>
<span id="cb228-3"><a href="#cb228-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb228-4"><a href="#cb228-4" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> Engine <span class="op">{</span></span>
<span id="cb228-5"><a href="#cb228-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> type<span class="op">[</span><span class="dv">50</span><span class="op">];</span></span>
<span id="cb228-6"><a href="#cb228-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span> displacement<span class="op">;</span></span>
<span id="cb228-7"><a href="#cb228-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> horsepower<span class="op">;</span></span>
<span id="cb228-8"><a href="#cb228-8" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb228-9"><a href="#cb228-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb228-10"><a href="#cb228-10" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> Car <span class="op">{</span></span>
<span id="cb228-11"><a href="#cb228-11" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> model<span class="op">[</span><span class="dv">50</span><span class="op">];</span></span>
<span id="cb228-12"><a href="#cb228-12" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> year<span class="op">;</span></span>
<span id="cb228-13"><a href="#cb228-13" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Engine <span class="op">*</span>engine<span class="op">;</span>  <span class="co">/* エンジン情報へのポインタ */</span></span>
<span id="cb228-14"><a href="#cb228-14" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span> price<span class="op">;</span></span>
<span id="cb228-15"><a href="#cb228-15" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb228-16"><a href="#cb228-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb228-17"><a href="#cb228-17" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> Dealership <span class="op">{</span></span>
<span id="cb228-18"><a href="#cb228-18" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> name<span class="op">[</span><span class="dv">50</span><span class="op">];</span></span>
<span id="cb228-19"><a href="#cb228-19" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Car <span class="op">*</span>inventory<span class="op">;</span>  <span class="co">/* 車の在庫配列へのポインタ */</span></span>
<span id="cb228-20"><a href="#cb228-20" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> car_count<span class="op">;</span></span>
<span id="cb228-21"><a href="#cb228-21" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb228-22"><a href="#cb228-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb228-23"><a href="#cb228-23" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> print_car_info<span class="op">(</span><span class="kw">struct</span> Car <span class="op">*</span>car<span class="op">)</span></span>
<span id="cb228-24"><a href="#cb228-24" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb228-25"><a href="#cb228-25" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== 車両情報 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb228-26"><a href="#cb228-26" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;モデル: </span><span class="sc">%s</span><span class="st"> (</span><span class="sc">%d</span><span class="st">年)</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> car<span class="op">-&gt;</span>model<span class="op">,</span> car<span class="op">-&gt;</span>year<span class="op">);</span></span>
<span id="cb228-27"><a href="#cb228-27" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>car<span class="op">-&gt;</span>engine <span class="op">!=</span> NULL<span class="op">)</span> <span class="op">{</span></span>
<span id="cb228-28"><a href="#cb228-28" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;エンジン: </span><span class="sc">%s</span><span class="st"> </span><span class="sc">%.1f</span><span class="st">L </span><span class="sc">%d</span><span class="st">HP</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> </span>
<span id="cb228-29"><a href="#cb228-29" aria-hidden="true" tabindex="-1"></a>               car<span class="op">-&gt;</span>engine<span class="op">-&gt;</span>type<span class="op">,</span> </span>
<span id="cb228-30"><a href="#cb228-30" aria-hidden="true" tabindex="-1"></a>               car<span class="op">-&gt;</span>engine<span class="op">-&gt;</span>displacement<span class="op">,</span> </span>
<span id="cb228-31"><a href="#cb228-31" aria-hidden="true" tabindex="-1"></a>               car<span class="op">-&gt;</span>engine<span class="op">-&gt;</span>horsepower<span class="op">);</span></span>
<span id="cb228-32"><a href="#cb228-32" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb228-33"><a href="#cb228-33" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;価格: </span><span class="sc">%.0f</span><span class="st">万円</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> car<span class="op">-&gt;</span>price<span class="op">);</span></span>
<span id="cb228-34"><a href="#cb228-34" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb228-35"><a href="#cb228-35" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb228-36"><a href="#cb228-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb228-37"><a href="#cb228-37" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> print_dealership_inventory<span class="op">(</span><span class="kw">struct</span> Dealership <span class="op">*</span>dealer<span class="op">)</span></span>
<span id="cb228-38"><a href="#cb228-38" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb228-39"><a href="#cb228-39" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb228-40"><a href="#cb228-40" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== </span><span class="sc">%s</span><span class="st"> の在庫 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> dealer<span class="op">-&gt;</span>name<span class="op">);</span></span>
<span id="cb228-41"><a href="#cb228-41" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> dealer<span class="op">-&gt;</span>car_count<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb228-42"><a href="#cb228-42" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st">. </span><span class="sc">%s</span><span class="st"> (</span><span class="sc">%.0f</span><span class="st">万円)</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> </span>
<span id="cb228-43"><a href="#cb228-43" aria-hidden="true" tabindex="-1"></a>               i <span class="op">+</span> <span class="dv">1</span><span class="op">,</span> </span>
<span id="cb228-44"><a href="#cb228-44" aria-hidden="true" tabindex="-1"></a>               <span class="op">(</span>dealer<span class="op">-&gt;</span>inventory <span class="op">+</span> i<span class="op">)-&gt;</span>model<span class="op">,</span> </span>
<span id="cb228-45"><a href="#cb228-45" aria-hidden="true" tabindex="-1"></a>               <span class="op">(</span>dealer<span class="op">-&gt;</span>inventory <span class="op">+</span> i<span class="op">)-&gt;</span>price<span class="op">);</span></span>
<span id="cb228-46"><a href="#cb228-46" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb228-47"><a href="#cb228-47" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb228-48"><a href="#cb228-48" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb228-49"><a href="#cb228-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb228-50"><a href="#cb228-50" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb228-51"><a href="#cb228-51" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb228-52"><a href="#cb228-52" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* エンジン情報 */</span></span>
<span id="cb228-53"><a href="#cb228-53" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Engine engine1 <span class="op">=</span> <span class="op">{</span><span class="st">&quot;V6ガソリン&quot;</span><span class="op">,</span> <span class="fl">3.5</span><span class="op">,</span> <span class="dv">280</span><span class="op">};</span></span>
<span id="cb228-54"><a href="#cb228-54" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Engine engine2 <span class="op">=</span> <span class="op">{</span><span class="st">&quot;直4ハイブリッド&quot;</span><span class="op">,</span> <span class="fl">1.8</span><span class="op">,</span> <span class="dv">120</span><span class="op">};</span></span>
<span id="cb228-55"><a href="#cb228-55" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Engine engine3 <span class="op">=</span> <span class="op">{</span><span class="st">&quot;V8ガソリン&quot;</span><span class="op">,</span> <span class="fl">5.0</span><span class="op">,</span> <span class="dv">450</span><span class="op">};</span></span>
<span id="cb228-56"><a href="#cb228-56" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb228-57"><a href="#cb228-57" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 車両情報 */</span></span>
<span id="cb228-58"><a href="#cb228-58" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Car cars<span class="op">[</span><span class="dv">3</span><span class="op">]</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb228-59"><a href="#cb228-59" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span><span class="st">&quot;セダンLX&quot;</span><span class="op">,</span> <span class="dv">2023</span><span class="op">,</span> <span class="op">&amp;</span>engine1<span class="op">,</span> <span class="dv">450</span><span class="op">},</span></span>
<span id="cb228-60"><a href="#cb228-60" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span><span class="st">&quot;ハイブリッドEC&quot;</span><span class="op">,</span> <span class="dv">2024</span><span class="op">,</span> <span class="op">&amp;</span>engine2<span class="op">,</span> <span class="dv">380</span><span class="op">},</span></span>
<span id="cb228-61"><a href="#cb228-61" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span><span class="st">&quot;スポーツST&quot;</span><span class="op">,</span> <span class="dv">2023</span><span class="op">,</span> <span class="op">&amp;</span>engine3<span class="op">,</span> <span class="dv">850</span><span class="op">}</span></span>
<span id="cb228-62"><a href="#cb228-62" aria-hidden="true" tabindex="-1"></a>    <span class="op">};</span></span>
<span id="cb228-63"><a href="#cb228-63" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb228-64"><a href="#cb228-64" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* ディーラー情報 */</span></span>
<span id="cb228-65"><a href="#cb228-65" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Dealership dealer <span class="op">=</span> <span class="op">{</span></span>
<span id="cb228-66"><a href="#cb228-66" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;トーキョー自動車&quot;</span><span class="op">,</span></span>
<span id="cb228-67"><a href="#cb228-67" aria-hidden="true" tabindex="-1"></a>        cars<span class="op">,</span></span>
<span id="cb228-68"><a href="#cb228-68" aria-hidden="true" tabindex="-1"></a>        <span class="dv">3</span></span>
<span id="cb228-69"><a href="#cb228-69" aria-hidden="true" tabindex="-1"></a>    <span class="op">};</span></span>
<span id="cb228-70"><a href="#cb228-70" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb228-71"><a href="#cb228-71" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* ディーラーの在庫一覧 */</span></span>
<span id="cb228-72"><a href="#cb228-72" aria-hidden="true" tabindex="-1"></a>    print_dealership_inventory<span class="op">(&amp;</span>dealer<span class="op">);</span></span>
<span id="cb228-73"><a href="#cb228-73" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb228-74"><a href="#cb228-74" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 各車両の詳細情報 */</span></span>
<span id="cb228-75"><a href="#cb228-75" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb228-76"><a href="#cb228-76" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> dealer<span class="op">.</span>car_count<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb228-77"><a href="#cb228-77" aria-hidden="true" tabindex="-1"></a>        print_car_info<span class="op">(</span>dealer<span class="op">.</span>inventory <span class="op">+</span> i<span class="op">);</span></span>
<span id="cb228-78"><a href="#cb228-78" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb228-79"><a href="#cb228-79" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb228-80"><a href="#cb228-80" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb228-81"><a href="#cb228-81" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 id="構造体とメモリ管理">構造体とメモリ管理</h3>
<p>構造体のメモリレイアウトとアライメントについて理解します。</p>
<h4
id="構造体のメモリサイズとアライメント">構造体のメモリサイズとアライメント</h4>
<div class="sourceCode" id="cb229"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb229-1"><a href="#cb229-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb229-2"><a href="#cb229-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb229-3"><a href="#cb229-3" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> Example1 <span class="op">{</span></span>
<span id="cb229-4"><a href="#cb229-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> a<span class="op">;</span>     <span class="co">/* 1バイト */</span></span>
<span id="cb229-5"><a href="#cb229-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> b<span class="op">;</span>      <span class="co">/* 4バイト */</span></span>
<span id="cb229-6"><a href="#cb229-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> c<span class="op">;</span>     <span class="co">/* 1バイト */</span></span>
<span id="cb229-7"><a href="#cb229-7" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb229-8"><a href="#cb229-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb229-9"><a href="#cb229-9" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> Example2 <span class="op">{</span></span>
<span id="cb229-10"><a href="#cb229-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> a<span class="op">;</span>     <span class="co">/* 1バイト */</span></span>
<span id="cb229-11"><a href="#cb229-11" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> c<span class="op">;</span>     <span class="co">/* 1バイト */</span></span>
<span id="cb229-12"><a href="#cb229-12" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> b<span class="op">;</span>      <span class="co">/* 4バイト */</span></span>
<span id="cb229-13"><a href="#cb229-13" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb229-14"><a href="#cb229-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb229-15"><a href="#cb229-15" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> Example3 <span class="op">{</span></span>
<span id="cb229-16"><a href="#cb229-16" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span> d<span class="op">;</span>   <span class="co">/* 8バイト */</span></span>
<span id="cb229-17"><a href="#cb229-17" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> a<span class="op">;</span>     <span class="co">/* 1バイト */</span></span>
<span id="cb229-18"><a href="#cb229-18" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> b<span class="op">;</span>      <span class="co">/* 4バイト */</span></span>
<span id="cb229-19"><a href="#cb229-19" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb229-20"><a href="#cb229-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb229-21"><a href="#cb229-21" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> analyze_struct_memory<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb229-22"><a href="#cb229-22" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb229-23"><a href="#cb229-23" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Example1 ex1<span class="op">;</span></span>
<span id="cb229-24"><a href="#cb229-24" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Example2 ex2<span class="op">;</span></span>
<span id="cb229-25"><a href="#cb229-25" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Example3 ex3<span class="op">;</span></span>
<span id="cb229-26"><a href="#cb229-26" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb229-27"><a href="#cb229-27" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== 構造体メモリ分析 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb229-28"><a href="#cb229-28" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb229-29"><a href="#cb229-29" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;Example1 (char, int, char):</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb229-30"><a href="#cb229-30" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;  sizeof: </span><span class="sc">%lu</span><span class="st"> バイト</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="kw">sizeof</span><span class="op">(</span><span class="kw">struct</span> Example1<span class="op">));</span></span>
<span id="cb229-31"><a href="#cb229-31" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;  a のオフセット: </span><span class="sc">%lu\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(</span><span class="dt">unsigned</span> <span class="dt">long</span><span class="op">)&amp;</span>ex1<span class="op">.</span>a <span class="op">-</span> <span class="op">(</span><span class="dt">unsigned</span> <span class="dt">long</span><span class="op">)&amp;</span>ex1<span class="op">);</span></span>
<span id="cb229-32"><a href="#cb229-32" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;  b のオフセット: </span><span class="sc">%lu\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(</span><span class="dt">unsigned</span> <span class="dt">long</span><span class="op">)&amp;</span>ex1<span class="op">.</span>b <span class="op">-</span> <span class="op">(</span><span class="dt">unsigned</span> <span class="dt">long</span><span class="op">)&amp;</span>ex1<span class="op">);</span></span>
<span id="cb229-33"><a href="#cb229-33" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;  c のオフセット: </span><span class="sc">%lu\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(</span><span class="dt">unsigned</span> <span class="dt">long</span><span class="op">)&amp;</span>ex1<span class="op">.</span>c <span class="op">-</span> <span class="op">(</span><span class="dt">unsigned</span> <span class="dt">long</span><span class="op">)&amp;</span>ex1<span class="op">);</span></span>
<span id="cb229-34"><a href="#cb229-34" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb229-35"><a href="#cb229-35" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb229-36"><a href="#cb229-36" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;Example2 (char, char, int):</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb229-37"><a href="#cb229-37" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;  sizeof: </span><span class="sc">%lu</span><span class="st"> バイト</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="kw">sizeof</span><span class="op">(</span><span class="kw">struct</span> Example2<span class="op">));</span></span>
<span id="cb229-38"><a href="#cb229-38" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;  a のオフセット: </span><span class="sc">%lu\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(</span><span class="dt">unsigned</span> <span class="dt">long</span><span class="op">)&amp;</span>ex2<span class="op">.</span>a <span class="op">-</span> <span class="op">(</span><span class="dt">unsigned</span> <span class="dt">long</span><span class="op">)&amp;</span>ex2<span class="op">);</span></span>
<span id="cb229-39"><a href="#cb229-39" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;  c のオフセット: </span><span class="sc">%lu\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(</span><span class="dt">unsigned</span> <span class="dt">long</span><span class="op">)&amp;</span>ex2<span class="op">.</span>c <span class="op">-</span> <span class="op">(</span><span class="dt">unsigned</span> <span class="dt">long</span><span class="op">)&amp;</span>ex2<span class="op">);</span></span>
<span id="cb229-40"><a href="#cb229-40" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;  b のオフセット: </span><span class="sc">%lu\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(</span><span class="dt">unsigned</span> <span class="dt">long</span><span class="op">)&amp;</span>ex2<span class="op">.</span>b <span class="op">-</span> <span class="op">(</span><span class="dt">unsigned</span> <span class="dt">long</span><span class="op">)&amp;</span>ex2<span class="op">);</span></span>
<span id="cb229-41"><a href="#cb229-41" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb229-42"><a href="#cb229-42" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb229-43"><a href="#cb229-43" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;Example3 (double, char, int):</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb229-44"><a href="#cb229-44" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;  sizeof: </span><span class="sc">%lu</span><span class="st"> バイト</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="kw">sizeof</span><span class="op">(</span><span class="kw">struct</span> Example3<span class="op">));</span></span>
<span id="cb229-45"><a href="#cb229-45" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;  d のオフセット: </span><span class="sc">%lu\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(</span><span class="dt">unsigned</span> <span class="dt">long</span><span class="op">)&amp;</span>ex3<span class="op">.</span>d <span class="op">-</span> <span class="op">(</span><span class="dt">unsigned</span> <span class="dt">long</span><span class="op">)&amp;</span>ex3<span class="op">);</span></span>
<span id="cb229-46"><a href="#cb229-46" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;  a のオフセット: </span><span class="sc">%lu\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(</span><span class="dt">unsigned</span> <span class="dt">long</span><span class="op">)&amp;</span>ex3<span class="op">.</span>a <span class="op">-</span> <span class="op">(</span><span class="dt">unsigned</span> <span class="dt">long</span><span class="op">)&amp;</span>ex3<span class="op">);</span></span>
<span id="cb229-47"><a href="#cb229-47" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;  b のオフセット: </span><span class="sc">%lu\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(</span><span class="dt">unsigned</span> <span class="dt">long</span><span class="op">)&amp;</span>ex3<span class="op">.</span>b <span class="op">-</span> <span class="op">(</span><span class="dt">unsigned</span> <span class="dt">long</span><span class="op">)&amp;</span>ex3<span class="op">);</span></span>
<span id="cb229-48"><a href="#cb229-48" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb229-49"><a href="#cb229-49" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb229-50"><a href="#cb229-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb229-51"><a href="#cb229-51" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb229-52"><a href="#cb229-52" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb229-53"><a href="#cb229-53" aria-hidden="true" tabindex="-1"></a>    analyze_struct_memory<span class="op">();</span></span>
<span id="cb229-54"><a href="#cb229-54" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb229-55"><a href="#cb229-55" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== 基本データ型のサイズ ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb229-56"><a href="#cb229-56" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;char: </span><span class="sc">%lu</span><span class="st"> バイト</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="kw">sizeof</span><span class="op">(</span><span class="dt">char</span><span class="op">));</span></span>
<span id="cb229-57"><a href="#cb229-57" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;int: </span><span class="sc">%lu</span><span class="st"> バイト</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="kw">sizeof</span><span class="op">(</span><span class="dt">int</span><span class="op">));</span></span>
<span id="cb229-58"><a href="#cb229-58" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;double: </span><span class="sc">%lu</span><span class="st"> バイト</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="kw">sizeof</span><span class="op">(</span><span class="dt">double</span><span class="op">));</span></span>
<span id="cb229-59"><a href="#cb229-59" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ポインタ: </span><span class="sc">%lu</span><span class="st"> バイト</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="kw">sizeof</span><span class="op">(</span><span class="dt">void</span><span class="op">*));</span></span>
<span id="cb229-60"><a href="#cb229-60" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb229-61"><a href="#cb229-61" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb229-62"><a href="#cb229-62" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h4
id="構造体の配列とポインタの効率性">構造体の配列とポインタの効率性</h4>
<div class="sourceCode" id="cb230"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb230-1"><a href="#cb230-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb230-2"><a href="#cb230-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;string.h&gt;</span></span>
<span id="cb230-3"><a href="#cb230-3" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;time.h&gt;</span></span>
<span id="cb230-4"><a href="#cb230-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb230-5"><a href="#cb230-5" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> LargeData <span class="op">{</span></span>
<span id="cb230-6"><a href="#cb230-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> description<span class="op">[</span><span class="dv">256</span><span class="op">];</span></span>
<span id="cb230-7"><a href="#cb230-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span> values<span class="op">[</span><span class="dv">100</span><span class="op">];</span></span>
<span id="cb230-8"><a href="#cb230-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> status<span class="op">;</span></span>
<span id="cb230-9"><a href="#cb230-9" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb230-10"><a href="#cb230-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb230-11"><a href="#cb230-11" aria-hidden="true" tabindex="-1"></a><span class="co">/* 値渡しで構造体を処理（非効率） */</span></span>
<span id="cb230-12"><a href="#cb230-12" aria-hidden="true" tabindex="-1"></a><span class="dt">double</span> process_by_value<span class="op">(</span><span class="kw">struct</span> LargeData data<span class="op">)</span></span>
<span id="cb230-13"><a href="#cb230-13" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb230-14"><a href="#cb230-14" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb230-15"><a href="#cb230-15" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span> sum <span class="op">=</span> <span class="fl">0.0</span><span class="op">;</span></span>
<span id="cb230-16"><a href="#cb230-16" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb230-17"><a href="#cb230-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">100</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb230-18"><a href="#cb230-18" aria-hidden="true" tabindex="-1"></a>        sum <span class="op">+=</span> data<span class="op">.</span>values<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb230-19"><a href="#cb230-19" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb230-20"><a href="#cb230-20" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb230-21"><a href="#cb230-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> sum <span class="op">/</span> <span class="fl">100.0</span><span class="op">;</span>  <span class="co">/* 平均値 */</span></span>
<span id="cb230-22"><a href="#cb230-22" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb230-23"><a href="#cb230-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb230-24"><a href="#cb230-24" aria-hidden="true" tabindex="-1"></a><span class="co">/* ポインタ渡しで構造体を処理（効率的） */</span></span>
<span id="cb230-25"><a href="#cb230-25" aria-hidden="true" tabindex="-1"></a><span class="dt">double</span> process_by_pointer<span class="op">(</span><span class="kw">struct</span> LargeData <span class="op">*</span>data<span class="op">)</span></span>
<span id="cb230-26"><a href="#cb230-26" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb230-27"><a href="#cb230-27" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb230-28"><a href="#cb230-28" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span> sum <span class="op">=</span> <span class="fl">0.0</span><span class="op">;</span></span>
<span id="cb230-29"><a href="#cb230-29" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb230-30"><a href="#cb230-30" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">100</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb230-31"><a href="#cb230-31" aria-hidden="true" tabindex="-1"></a>        sum <span class="op">+=</span> data<span class="op">-&gt;</span>values<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb230-32"><a href="#cb230-32" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb230-33"><a href="#cb230-33" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb230-34"><a href="#cb230-34" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> sum <span class="op">/</span> <span class="fl">100.0</span><span class="op">;</span>  <span class="co">/* 平均値 */</span></span>
<span id="cb230-35"><a href="#cb230-35" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb230-36"><a href="#cb230-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb230-37"><a href="#cb230-37" aria-hidden="true" tabindex="-1"></a><span class="co">/* 構造体にテストデータを設定 */</span></span>
<span id="cb230-38"><a href="#cb230-38" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> setup_test_data<span class="op">(</span><span class="kw">struct</span> LargeData <span class="op">*</span>data<span class="op">)</span></span>
<span id="cb230-39"><a href="#cb230-39" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb230-40"><a href="#cb230-40" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb230-41"><a href="#cb230-41" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>data<span class="op">-&gt;</span>description<span class="op">,</span> <span class="st">&quot;テストデータセット&quot;</span><span class="op">);</span></span>
<span id="cb230-42"><a href="#cb230-42" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb230-43"><a href="#cb230-43" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">100</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb230-44"><a href="#cb230-44" aria-hidden="true" tabindex="-1"></a>        data<span class="op">-&gt;</span>values<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> <span class="op">(</span><span class="dt">double</span><span class="op">)(</span>i <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">*</span> <span class="fl">1.5</span><span class="op">;</span></span>
<span id="cb230-45"><a href="#cb230-45" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb230-46"><a href="#cb230-46" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb230-47"><a href="#cb230-47" aria-hidden="true" tabindex="-1"></a>    data<span class="op">-&gt;</span>status <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb230-48"><a href="#cb230-48" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb230-49"><a href="#cb230-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb230-50"><a href="#cb230-50" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb230-51"><a href="#cb230-51" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb230-52"><a href="#cb230-52" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> LargeData test_data<span class="op">;</span></span>
<span id="cb230-53"><a href="#cb230-53" aria-hidden="true" tabindex="-1"></a>    clock_t start<span class="op">,</span> end<span class="op">;</span></span>
<span id="cb230-54"><a href="#cb230-54" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span> result<span class="op">;</span></span>
<span id="cb230-55"><a href="#cb230-55" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> iterations <span class="op">=</span> <span class="dv">10000</span><span class="op">;</span></span>
<span id="cb230-56"><a href="#cb230-56" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb230-57"><a href="#cb230-57" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb230-58"><a href="#cb230-58" aria-hidden="true" tabindex="-1"></a>    setup_test_data<span class="op">(&amp;</span>test_data<span class="op">);</span></span>
<span id="cb230-59"><a href="#cb230-59" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb230-60"><a href="#cb230-60" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== 構造体サイズ情報 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb230-61"><a href="#cb230-61" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;LargeData のサイズ: </span><span class="sc">%lu</span><span class="st"> バイト</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="kw">sizeof</span><span class="op">(</span><span class="kw">struct</span> LargeData<span class="op">));</span></span>
<span id="cb230-62"><a href="#cb230-62" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;テスト回数: </span><span class="sc">%d</span><span class="st"> 回</span><span class="sc">\n\n</span><span class="st">&quot;</span><span class="op">,</span> iterations<span class="op">);</span></span>
<span id="cb230-63"><a href="#cb230-63" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb230-64"><a href="#cb230-64" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 値渡しのテスト */</span></span>
<span id="cb230-65"><a href="#cb230-65" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;値渡しでのテスト開始...</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb230-66"><a href="#cb230-66" aria-hidden="true" tabindex="-1"></a>    start <span class="op">=</span> clock<span class="op">();</span></span>
<span id="cb230-67"><a href="#cb230-67" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> iterations<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb230-68"><a href="#cb230-68" aria-hidden="true" tabindex="-1"></a>        result <span class="op">=</span> process_by_value<span class="op">(</span>test_data<span class="op">);</span></span>
<span id="cb230-69"><a href="#cb230-69" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb230-70"><a href="#cb230-70" aria-hidden="true" tabindex="-1"></a>    end <span class="op">=</span> clock<span class="op">();</span></span>
<span id="cb230-71"><a href="#cb230-71" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;値渡し結果: </span><span class="sc">%.1f\n</span><span class="st">&quot;</span><span class="op">,</span> result<span class="op">);</span></span>
<span id="cb230-72"><a href="#cb230-72" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;実行時間: </span><span class="sc">%.3f</span><span class="st"> 秒</span><span class="sc">\n\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(</span><span class="dt">double</span><span class="op">)(</span>end <span class="op">-</span> start<span class="op">)</span> <span class="op">/</span> CLOCKS_PER_SEC<span class="op">);</span></span>
<span id="cb230-73"><a href="#cb230-73" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb230-74"><a href="#cb230-74" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* ポインタ渡しのテスト */</span></span>
<span id="cb230-75"><a href="#cb230-75" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ポインタ渡しでのテスト開始...</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb230-76"><a href="#cb230-76" aria-hidden="true" tabindex="-1"></a>    start <span class="op">=</span> clock<span class="op">();</span></span>
<span id="cb230-77"><a href="#cb230-77" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> iterations<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb230-78"><a href="#cb230-78" aria-hidden="true" tabindex="-1"></a>        result <span class="op">=</span> process_by_pointer<span class="op">(&amp;</span>test_data<span class="op">);</span></span>
<span id="cb230-79"><a href="#cb230-79" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb230-80"><a href="#cb230-80" aria-hidden="true" tabindex="-1"></a>    end <span class="op">=</span> clock<span class="op">();</span></span>
<span id="cb230-81"><a href="#cb230-81" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ポインタ渡し結果: </span><span class="sc">%.1f\n</span><span class="st">&quot;</span><span class="op">,</span> result<span class="op">);</span></span>
<span id="cb230-82"><a href="#cb230-82" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;実行時間: </span><span class="sc">%.3f</span><span class="st"> 秒</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(</span><span class="dt">double</span><span class="op">)(</span>end <span class="op">-</span> start<span class="op">)</span> <span class="op">/</span> CLOCKS_PER_SEC<span class="op">);</span></span>
<span id="cb230-83"><a href="#cb230-83" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb230-84"><a href="#cb230-84" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb230-85"><a href="#cb230-85" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 id="実践的な構造体活用例">実践的な構造体活用例</h3>
<h4
id="データベース風の学生管理システム">データベース風の学生管理システム</h4>
<div class="sourceCode" id="cb231"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb231-1"><a href="#cb231-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb231-2"><a href="#cb231-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;string.h&gt;</span></span>
<span id="cb231-3"><a href="#cb231-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb231-4"><a href="#cb231-4" aria-hidden="true" tabindex="-1"></a><span class="pp">#define MAX_STUDENTS </span><span class="dv">100</span></span>
<span id="cb231-5"><a href="#cb231-5" aria-hidden="true" tabindex="-1"></a><span class="pp">#define MAX_NAME_LEN </span><span class="dv">50</span></span>
<span id="cb231-6"><a href="#cb231-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb231-7"><a href="#cb231-7" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> Student <span class="op">{</span></span>
<span id="cb231-8"><a href="#cb231-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> id<span class="op">;</span></span>
<span id="cb231-9"><a href="#cb231-9" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> name<span class="op">[</span>MAX_NAME_LEN<span class="op">];</span></span>
<span id="cb231-10"><a href="#cb231-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> age<span class="op">;</span></span>
<span id="cb231-11"><a href="#cb231-11" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span> gpa<span class="op">;</span></span>
<span id="cb231-12"><a href="#cb231-12" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> major<span class="op">[</span><span class="dv">30</span><span class="op">];</span></span>
<span id="cb231-13"><a href="#cb231-13" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb231-14"><a href="#cb231-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb231-15"><a href="#cb231-15" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> StudentDatabase <span class="op">{</span></span>
<span id="cb231-16"><a href="#cb231-16" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Student <span class="op">*</span>students<span class="op">[</span>MAX_STUDENTS<span class="op">];</span></span>
<span id="cb231-17"><a href="#cb231-17" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> count<span class="op">;</span></span>
<span id="cb231-18"><a href="#cb231-18" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb231-19"><a href="#cb231-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb231-20"><a href="#cb231-20" aria-hidden="true" tabindex="-1"></a><span class="co">/* 学生データベースの初期化 */</span></span>
<span id="cb231-21"><a href="#cb231-21" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> init_database<span class="op">(</span><span class="kw">struct</span> StudentDatabase <span class="op">*</span>db<span class="op">)</span></span>
<span id="cb231-22"><a href="#cb231-22" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb231-23"><a href="#cb231-23" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb231-24"><a href="#cb231-24" aria-hidden="true" tabindex="-1"></a>    db<span class="op">-&gt;</span>count <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb231-25"><a href="#cb231-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> MAX_STUDENTS<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb231-26"><a href="#cb231-26" aria-hidden="true" tabindex="-1"></a>        db<span class="op">-&gt;</span>students<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> NULL<span class="op">;</span></span>
<span id="cb231-27"><a href="#cb231-27" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb231-28"><a href="#cb231-28" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb231-29"><a href="#cb231-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb231-30"><a href="#cb231-30" aria-hidden="true" tabindex="-1"></a><span class="co">/* 学生を追加 */</span></span>
<span id="cb231-31"><a href="#cb231-31" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> add_student<span class="op">(</span><span class="kw">struct</span> StudentDatabase <span class="op">*</span>db<span class="op">,</span> <span class="kw">struct</span> Student <span class="op">*</span>student<span class="op">)</span></span>
<span id="cb231-32"><a href="#cb231-32" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb231-33"><a href="#cb231-33" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>db<span class="op">-&gt;</span>count <span class="op">&gt;=</span> MAX_STUDENTS<span class="op">)</span> <span class="op">{</span></span>
<span id="cb231-34"><a href="#cb231-34" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;エラー: データベースが満杯です</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb231-35"><a href="#cb231-35" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb231-36"><a href="#cb231-36" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb231-37"><a href="#cb231-37" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb231-38"><a href="#cb231-38" aria-hidden="true" tabindex="-1"></a>    db<span class="op">-&gt;</span>students<span class="op">[</span>db<span class="op">-&gt;</span>count<span class="op">]</span> <span class="op">=</span> student<span class="op">;</span></span>
<span id="cb231-39"><a href="#cb231-39" aria-hidden="true" tabindex="-1"></a>    db<span class="op">-&gt;</span>count<span class="op">++;</span></span>
<span id="cb231-40"><a href="#cb231-40" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;学生 </span><span class="sc">%s</span><span class="st"> を追加しました (ID: </span><span class="sc">%d</span><span class="st">)</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> student<span class="op">-&gt;</span>name<span class="op">,</span> student<span class="op">-&gt;</span>id<span class="op">);</span></span>
<span id="cb231-41"><a href="#cb231-41" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb231-42"><a href="#cb231-42" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb231-43"><a href="#cb231-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb231-44"><a href="#cb231-44" aria-hidden="true" tabindex="-1"></a><span class="co">/* IDで学生を検索 */</span></span>
<span id="cb231-45"><a href="#cb231-45" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> Student<span class="op">*</span> find_student_by_id<span class="op">(</span><span class="kw">struct</span> StudentDatabase <span class="op">*</span>db<span class="op">,</span> <span class="dt">int</span> id<span class="op">)</span></span>
<span id="cb231-46"><a href="#cb231-46" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb231-47"><a href="#cb231-47" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb231-48"><a href="#cb231-48" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> db<span class="op">-&gt;</span>count<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb231-49"><a href="#cb231-49" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>db<span class="op">-&gt;</span>students<span class="op">[</span>i<span class="op">]-&gt;</span>id <span class="op">==</span> id<span class="op">)</span> <span class="op">{</span></span>
<span id="cb231-50"><a href="#cb231-50" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> db<span class="op">-&gt;</span>students<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb231-51"><a href="#cb231-51" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb231-52"><a href="#cb231-52" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb231-53"><a href="#cb231-53" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> NULL<span class="op">;</span></span>
<span id="cb231-54"><a href="#cb231-54" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb231-55"><a href="#cb231-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb231-56"><a href="#cb231-56" aria-hidden="true" tabindex="-1"></a><span class="co">/* 専攻で学生を検索 */</span></span>
<span id="cb231-57"><a href="#cb231-57" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> find_students_by_major<span class="op">(</span><span class="kw">struct</span> StudentDatabase <span class="op">*</span>db<span class="op">,</span> <span class="dt">const</span> <span class="dt">char</span><span class="op">*</span> major<span class="op">)</span></span>
<span id="cb231-58"><a href="#cb231-58" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb231-59"><a href="#cb231-59" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb231-60"><a href="#cb231-60" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> found <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb231-61"><a href="#cb231-61" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb231-62"><a href="#cb231-62" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== </span><span class="sc">%s</span><span class="st">専攻の学生 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> major<span class="op">);</span></span>
<span id="cb231-63"><a href="#cb231-63" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> db<span class="op">-&gt;</span>count<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb231-64"><a href="#cb231-64" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>strcmp<span class="op">(</span>db<span class="op">-&gt;</span>students<span class="op">[</span>i<span class="op">]-&gt;</span>major<span class="op">,</span> major<span class="op">)</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb231-65"><a href="#cb231-65" aria-hidden="true" tabindex="-1"></a>            printf<span class="op">(</span><span class="st">&quot;ID: </span><span class="sc">%d</span><span class="st">, 名前: </span><span class="sc">%s</span><span class="st">, GPA: </span><span class="sc">%.1f\n</span><span class="st">&quot;</span><span class="op">,</span> </span>
<span id="cb231-66"><a href="#cb231-66" aria-hidden="true" tabindex="-1"></a>                   db<span class="op">-&gt;</span>students<span class="op">[</span>i<span class="op">]-&gt;</span>id<span class="op">,</span></span>
<span id="cb231-67"><a href="#cb231-67" aria-hidden="true" tabindex="-1"></a>                   db<span class="op">-&gt;</span>students<span class="op">[</span>i<span class="op">]-&gt;</span>name<span class="op">,</span></span>
<span id="cb231-68"><a href="#cb231-68" aria-hidden="true" tabindex="-1"></a>                   db<span class="op">-&gt;</span>students<span class="op">[</span>i<span class="op">]-&gt;</span>gpa<span class="op">);</span></span>
<span id="cb231-69"><a href="#cb231-69" aria-hidden="true" tabindex="-1"></a>            found <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb231-70"><a href="#cb231-70" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb231-71"><a href="#cb231-71" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb231-72"><a href="#cb231-72" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb231-73"><a href="#cb231-73" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(!</span>found<span class="op">)</span> <span class="op">{</span></span>
<span id="cb231-74"><a href="#cb231-74" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;該当する学生が見つかりませんでした</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb231-75"><a href="#cb231-75" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb231-76"><a href="#cb231-76" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb231-77"><a href="#cb231-77" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb231-78"><a href="#cb231-78" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb231-79"><a href="#cb231-79" aria-hidden="true" tabindex="-1"></a><span class="co">/* 全学生の一覧表示 */</span></span>
<span id="cb231-80"><a href="#cb231-80" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> display_all_students<span class="op">(</span><span class="kw">struct</span> StudentDatabase <span class="op">*</span>db<span class="op">)</span></span>
<span id="cb231-81"><a href="#cb231-81" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb231-82"><a href="#cb231-82" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb231-83"><a href="#cb231-83" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb231-84"><a href="#cb231-84" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== 全学生一覧 (</span><span class="sc">%d</span><span class="st">名) ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> db<span class="op">-&gt;</span>count<span class="op">);</span></span>
<span id="cb231-85"><a href="#cb231-85" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ID</span><span class="sc">\t</span><span class="st">名前</span><span class="sc">\t\t</span><span class="st">年齢</span><span class="sc">\t</span><span class="st">GPA</span><span class="sc">\t</span><span class="st">専攻</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb231-86"><a href="#cb231-86" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;------------------------------------------------</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb231-87"><a href="#cb231-87" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb231-88"><a href="#cb231-88" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> db<span class="op">-&gt;</span>count<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb231-89"><a href="#cb231-89" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d\t%s\t\t%d\t%.1f\t%s\n</span><span class="st">&quot;</span><span class="op">,</span></span>
<span id="cb231-90"><a href="#cb231-90" aria-hidden="true" tabindex="-1"></a>               db<span class="op">-&gt;</span>students<span class="op">[</span>i<span class="op">]-&gt;</span>id<span class="op">,</span></span>
<span id="cb231-91"><a href="#cb231-91" aria-hidden="true" tabindex="-1"></a>               db<span class="op">-&gt;</span>students<span class="op">[</span>i<span class="op">]-&gt;</span>name<span class="op">,</span></span>
<span id="cb231-92"><a href="#cb231-92" aria-hidden="true" tabindex="-1"></a>               db<span class="op">-&gt;</span>students<span class="op">[</span>i<span class="op">]-&gt;</span>age<span class="op">,</span></span>
<span id="cb231-93"><a href="#cb231-93" aria-hidden="true" tabindex="-1"></a>               db<span class="op">-&gt;</span>students<span class="op">[</span>i<span class="op">]-&gt;</span>gpa<span class="op">,</span></span>
<span id="cb231-94"><a href="#cb231-94" aria-hidden="true" tabindex="-1"></a>               db<span class="op">-&gt;</span>students<span class="op">[</span>i<span class="op">]-&gt;</span>major<span class="op">);</span></span>
<span id="cb231-95"><a href="#cb231-95" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb231-96"><a href="#cb231-96" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb231-97"><a href="#cb231-97" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb231-98"><a href="#cb231-98" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb231-99"><a href="#cb231-99" aria-hidden="true" tabindex="-1"></a><span class="co">/* 平均GPAを計算 */</span></span>
<span id="cb231-100"><a href="#cb231-100" aria-hidden="true" tabindex="-1"></a><span class="dt">double</span> calculate_average_gpa<span class="op">(</span><span class="kw">struct</span> StudentDatabase <span class="op">*</span>db<span class="op">)</span></span>
<span id="cb231-101"><a href="#cb231-101" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb231-102"><a href="#cb231-102" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span> total <span class="op">=</span> <span class="fl">0.0</span><span class="op">;</span></span>
<span id="cb231-103"><a href="#cb231-103" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb231-104"><a href="#cb231-104" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb231-105"><a href="#cb231-105" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>db<span class="op">-&gt;</span>count <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="cf">return</span> <span class="fl">0.0</span><span class="op">;</span></span>
<span id="cb231-106"><a href="#cb231-106" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb231-107"><a href="#cb231-107" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> db<span class="op">-&gt;</span>count<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb231-108"><a href="#cb231-108" aria-hidden="true" tabindex="-1"></a>        total <span class="op">+=</span> db<span class="op">-&gt;</span>students<span class="op">[</span>i<span class="op">]-&gt;</span>gpa<span class="op">;</span></span>
<span id="cb231-109"><a href="#cb231-109" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb231-110"><a href="#cb231-110" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb231-111"><a href="#cb231-111" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> total <span class="op">/</span> db<span class="op">-&gt;</span>count<span class="op">;</span></span>
<span id="cb231-112"><a href="#cb231-112" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb231-113"><a href="#cb231-113" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb231-114"><a href="#cb231-114" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb231-115"><a href="#cb231-115" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb231-116"><a href="#cb231-116" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> StudentDatabase db<span class="op">;</span></span>
<span id="cb231-117"><a href="#cb231-117" aria-hidden="true" tabindex="-1"></a>    init_database<span class="op">(&amp;</span>db<span class="op">);</span></span>
<span id="cb231-118"><a href="#cb231-118" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb231-119"><a href="#cb231-119" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 学生データの作成 */</span></span>
<span id="cb231-120"><a href="#cb231-120" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Student student1 <span class="op">=</span> <span class="op">{</span><span class="dv">2001</span><span class="op">,</span> <span class="st">&quot;田中太郎&quot;</span><span class="op">,</span> <span class="dv">20</span><span class="op">,</span> <span class="fl">3.2</span><span class="op">,</span> <span class="st">&quot;コンピュータ&quot;</span><span class="op">};</span></span>
<span id="cb231-121"><a href="#cb231-121" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Student student2 <span class="op">=</span> <span class="op">{</span><span class="dv">2002</span><span class="op">,</span> <span class="st">&quot;佐藤花子&quot;</span><span class="op">,</span> <span class="dv">21</span><span class="op">,</span> <span class="fl">3.8</span><span class="op">,</span> <span class="st">&quot;数学&quot;</span><span class="op">};</span></span>
<span id="cb231-122"><a href="#cb231-122" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Student student3 <span class="op">=</span> <span class="op">{</span><span class="dv">2003</span><span class="op">,</span> <span class="st">&quot;山田次郎&quot;</span><span class="op">,</span> <span class="dv">19</span><span class="op">,</span> <span class="fl">2.9</span><span class="op">,</span> <span class="st">&quot;コンピュータ&quot;</span><span class="op">};</span></span>
<span id="cb231-123"><a href="#cb231-123" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Student student4 <span class="op">=</span> <span class="op">{</span><span class="dv">2004</span><span class="op">,</span> <span class="st">&quot;鈴木美咲&quot;</span><span class="op">,</span> <span class="dv">20</span><span class="op">,</span> <span class="fl">3.5</span><span class="op">,</span> <span class="st">&quot;物理&quot;</span><span class="op">};</span></span>
<span id="cb231-124"><a href="#cb231-124" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Student student5 <span class="op">=</span> <span class="op">{</span><span class="dv">2005</span><span class="op">,</span> <span class="st">&quot;高橋健太&quot;</span><span class="op">,</span> <span class="dv">22</span><span class="op">,</span> <span class="fl">3.1</span><span class="op">,</span> <span class="st">&quot;数学&quot;</span><span class="op">};</span></span>
<span id="cb231-125"><a href="#cb231-125" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb231-126"><a href="#cb231-126" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* データベースに学生を追加 */</span></span>
<span id="cb231-127"><a href="#cb231-127" aria-hidden="true" tabindex="-1"></a>    add_student<span class="op">(&amp;</span>db<span class="op">,</span> <span class="op">&amp;</span>student1<span class="op">);</span></span>
<span id="cb231-128"><a href="#cb231-128" aria-hidden="true" tabindex="-1"></a>    add_student<span class="op">(&amp;</span>db<span class="op">,</span> <span class="op">&amp;</span>student2<span class="op">);</span></span>
<span id="cb231-129"><a href="#cb231-129" aria-hidden="true" tabindex="-1"></a>    add_student<span class="op">(&amp;</span>db<span class="op">,</span> <span class="op">&amp;</span>student3<span class="op">);</span></span>
<span id="cb231-130"><a href="#cb231-130" aria-hidden="true" tabindex="-1"></a>    add_student<span class="op">(&amp;</span>db<span class="op">,</span> <span class="op">&amp;</span>student4<span class="op">);</span></span>
<span id="cb231-131"><a href="#cb231-131" aria-hidden="true" tabindex="-1"></a>    add_student<span class="op">(&amp;</span>db<span class="op">,</span> <span class="op">&amp;</span>student5<span class="op">);</span></span>
<span id="cb231-132"><a href="#cb231-132" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb231-133"><a href="#cb231-133" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 全学生表示 */</span></span>
<span id="cb231-134"><a href="#cb231-134" aria-hidden="true" tabindex="-1"></a>    display_all_students<span class="op">(&amp;</span>db<span class="op">);</span></span>
<span id="cb231-135"><a href="#cb231-135" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb231-136"><a href="#cb231-136" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 特定IDの学生を検索 */</span></span>
<span id="cb231-137"><a href="#cb231-137" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Student <span class="op">*</span>found <span class="op">=</span> find_student_by_id<span class="op">(&amp;</span>db<span class="op">,</span> <span class="dv">2003</span><span class="op">);</span></span>
<span id="cb231-138"><a href="#cb231-138" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>found <span class="op">!=</span> NULL<span class="op">)</span> <span class="op">{</span></span>
<span id="cb231-139"><a href="#cb231-139" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;ID 2003 の学生: </span><span class="sc">%s</span><span class="st"> (</span><span class="sc">%s</span><span class="st">専攻)</span><span class="sc">\n\n</span><span class="st">&quot;</span><span class="op">,</span> found<span class="op">-&gt;</span>name<span class="op">,</span> found<span class="op">-&gt;</span>major<span class="op">);</span></span>
<span id="cb231-140"><a href="#cb231-140" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb231-141"><a href="#cb231-141" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb231-142"><a href="#cb231-142" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 専攻別検索 */</span></span>
<span id="cb231-143"><a href="#cb231-143" aria-hidden="true" tabindex="-1"></a>    find_students_by_major<span class="op">(&amp;</span>db<span class="op">,</span> <span class="st">&quot;コンピュータ&quot;</span><span class="op">);</span></span>
<span id="cb231-144"><a href="#cb231-144" aria-hidden="true" tabindex="-1"></a>    find_students_by_major<span class="op">(&amp;</span>db<span class="op">,</span> <span class="st">&quot;数学&quot;</span><span class="op">);</span></span>
<span id="cb231-145"><a href="#cb231-145" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb231-146"><a href="#cb231-146" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 統計情報 */</span></span>
<span id="cb231-147"><a href="#cb231-147" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== 統計情報 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb231-148"><a href="#cb231-148" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;登録学生数: </span><span class="sc">%d</span><span class="st">名</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> db<span class="op">.</span>count<span class="op">);</span></span>
<span id="cb231-149"><a href="#cb231-149" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;平均GPA: </span><span class="sc">%.2f\n</span><span class="st">&quot;</span><span class="op">,</span> calculate_average_gpa<span class="op">(&amp;</span>db<span class="op">));</span></span>
<span id="cb231-150"><a href="#cb231-150" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb231-151"><a href="#cb231-151" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb231-152"><a href="#cb231-152" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h2 id="サンプルコード-16">サンプルコード</h2>
<h3 id="構造体の基本操作">構造体の基本操作</h3>
<p>プログラムファイル: <code>examples/struct_basics.c</code></p>
<p>構造体の定義、初期化、メンバーアクセスの基本を学習します。</p>
<h3 id="構造体ポインタと-演算子">構造体ポインタと-&gt;演算子</h3>
<p>プログラムファイル: <code>examples/struct_pointers.c</code></p>
<p>構造体ポインタと-&gt;演算子の使用方法を学習します。</p>
<h3 id="構造体配列の操作">構造体配列の操作</h3>
<p>プログラムファイル: <code>examples/struct_arrays.c</code></p>
<p>構造体配列とポインタを使ったデータ管理を学習します。</p>
<h3 id="コンパイルと実行-9">コンパイルと実行</h3>
<div class="sourceCode" id="cb232"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb232-1"><a href="#cb232-1" aria-hidden="true" tabindex="-1"></a><span class="co"># examples ディレクトリに移動</span></span>
<span id="cb232-2"><a href="#cb232-2" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> examples</span>
<span id="cb232-3"><a href="#cb232-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb232-4"><a href="#cb232-4" aria-hidden="true" tabindex="-1"></a><span class="co"># C90準拠でコンパイル</span></span>
<span id="cb232-5"><a href="#cb232-5" aria-hidden="true" tabindex="-1"></a><span class="fu">gcc</span> <span class="at">-std</span><span class="op">=</span>c90 <span class="at">-Wall</span> <span class="at">-Wextra</span> <span class="at">-pedantic</span> struct_basics.c <span class="at">-o</span> struct_basics</span>
<span id="cb232-6"><a href="#cb232-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb232-7"><a href="#cb232-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 実行</span></span>
<span id="cb232-8"><a href="#cb232-8" aria-hidden="true" tabindex="-1"></a><span class="ex">./struct_basics</span></span></code></pre></div>
<h2 id="演習課題-8">演習課題</h2>
<h3 id="基礎問題-8">基礎問題</h3>
<ol type="1">
<li><strong>学生情報管理</strong>
<ul>
<li>学生の情報（ID、名前、年齢、成績）を格納する構造体を定義し、ポインタを使って情報を表示・更新するプログラムを作成してください</li>
</ul></li>
<li><strong>座標計算</strong>
<ul>
<li>2D座標を表す構造体を定義し、2点間の距離を計算する関数をポインタを使って実装してください</li>
</ul></li>
<li><strong>商品管理</strong>
<ul>
<li>商品情報（コード、名前、価格、在庫）の構造体を作成し、構造体配列で複数商品を管理するプログラムを作成してください</li>
</ul></li>
</ol>
<h3 id="応用問題-8">応用問題</h3>
<ol start="4" type="1">
<li><strong>従業員データベース</strong>
<ul>
<li>従業員情報と部署情報をネストした構造体で管理し、部署別の給与統計を算出するプログラムを作成してください</li>
</ul></li>
<li><strong>図書管理システム</strong>
<ul>
<li>本の情報（タイトル、著者、出版年、貸出状況）を管理し、検索・貸出・返却機能を実装してください</li>
</ul></li>
<li><strong>成績管理システム</strong>
<ul>
<li>学生と科目の構造体を使って、学生別・科目別の成績統計を管理するプログラムを作成してください</li>
</ul></li>
</ol>
<h3 id="発展問題-3">発展問題</h3>
<ol start="7" type="1">
<li><strong>動的配列システム</strong>
<ul>
<li>構造体ポインタ配列を動的に拡張できるシステムを実装してください</li>
</ul></li>
<li><strong>データソート</strong>
<ul>
<li>構造体ポインタ配列を複数の条件（名前、年齢、成績など）でソートできるプログラムを作成してください</li>
</ul></li>
<li><strong>階層データ構造</strong>
<ul>
<li>会社組織（部署→チーム→従業員）のような階層構造を構造体とポインタで表現してください</li>
</ul></li>
</ol>
<h2 id="コンパイル方法-9">コンパイル方法</h2>
<p>この章では以下のMakefileを使用してコンパイルができます：</p>
<div class="sourceCode" id="cb233"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb233-1"><a href="#cb233-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 全ての例題をコンパイル</span></span>
<span id="cb233-2"><a href="#cb233-2" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> all</span>
<span id="cb233-3"><a href="#cb233-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb233-4"><a href="#cb233-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 特定のプログラムをコンパイル</span></span>
<span id="cb233-5"><a href="#cb233-5" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> struct_basics</span>
<span id="cb233-6"><a href="#cb233-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb233-7"><a href="#cb233-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 実行</span></span>
<span id="cb233-8"><a href="#cb233-8" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> run</span>
<span id="cb233-9"><a href="#cb233-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb233-10"><a href="#cb233-10" aria-hidden="true" tabindex="-1"></a><span class="co"># クリーンアップ</span></span>
<span id="cb233-11"><a href="#cb233-11" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> clean</span></code></pre></div>
<h2 id="規格による違い-8">規格による違い</h2>
<h3 id="c90での制限事項-7">C90での制限事項</h3>
<ul>
<li>構造体の初期化は順序通りのみ</li>
<li>可変長配列メンバーは不可</li>
<li>匿名構造体・共用体は不可</li>
</ul>
<h3 id="c99以降の拡張-7">C99以降の拡張</h3>
<ul>
<li>指定イニシャライザが使用可能</li>
<li>可変長配列メンバー（C99）</li>
<li>匿名構造体・共用体（C11）</li>
</ul>
<h2 id="よくある間違い-6">よくある間違い</h2>
<h3 id="nullポインタの参照-1">1. NULLポインタの参照</h3>
<div class="sourceCode" id="cb234"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb234-1"><a href="#cb234-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* NG: NULLポインタの参照 */</span></span>
<span id="cb234-2"><a href="#cb234-2" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> Student <span class="op">*</span>student <span class="op">=</span> NULL<span class="op">;</span></span>
<span id="cb234-3"><a href="#cb234-3" aria-hidden="true" tabindex="-1"></a>printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> student<span class="op">-&gt;</span>name<span class="op">);</span>  <span class="co">/* セグメンテーション違反 */</span></span>
<span id="cb234-4"><a href="#cb234-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb234-5"><a href="#cb234-5" aria-hidden="true" tabindex="-1"></a><span class="co">/* OK: NULLチェック */</span></span>
<span id="cb234-6"><a href="#cb234-6" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="op">(</span>student <span class="op">!=</span> NULL<span class="op">)</span> <span class="op">{</span></span>
<span id="cb234-7"><a href="#cb234-7" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> student<span class="op">-&gt;</span>name<span class="op">);</span></span>
<span id="cb234-8"><a href="#cb234-8" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 id="スタック上の構造体アドレスの返却">2.
スタック上の構造体アドレスの返却</h3>
<div class="sourceCode" id="cb235"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb235-1"><a href="#cb235-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* NG: ローカル構造体のアドレス返し */</span></span>
<span id="cb235-2"><a href="#cb235-2" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> Point<span class="op">*</span> create_point<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">)</span> <span class="op">{</span></span>
<span id="cb235-3"><a href="#cb235-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Point p <span class="op">=</span> <span class="op">{</span>x<span class="op">,</span> y<span class="op">};</span></span>
<span id="cb235-4"><a href="#cb235-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">&amp;</span>p<span class="op">;</span>  <span class="co">/* 危険: ローカル変数のアドレス */</span></span>
<span id="cb235-5"><a href="#cb235-5" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb235-6"><a href="#cb235-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb235-7"><a href="#cb235-7" aria-hidden="true" tabindex="-1"></a><span class="co">/* OK: 静的変数または呼び出し元で用意 */</span></span>
<span id="cb235-8"><a href="#cb235-8" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> create_point<span class="op">(</span><span class="kw">struct</span> Point <span class="op">*</span>p<span class="op">,</span> <span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">)</span> <span class="op">{</span></span>
<span id="cb235-9"><a href="#cb235-9" aria-hidden="true" tabindex="-1"></a>    p<span class="op">-&gt;</span>x <span class="op">=</span> x<span class="op">;</span></span>
<span id="cb235-10"><a href="#cb235-10" aria-hidden="true" tabindex="-1"></a>    p<span class="op">-&gt;</span>y <span class="op">=</span> y<span class="op">;</span></span>
<span id="cb235-11"><a href="#cb235-11" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 id="構造体の比較">3. 構造体の比較</h3>
<div class="sourceCode" id="cb236"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb236-1"><a href="#cb236-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* NG: 構造体の直接比較 */</span></span>
<span id="cb236-2"><a href="#cb236-2" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> Point p1 <span class="op">=</span> <span class="op">{</span><span class="dv">10</span><span class="op">,</span> <span class="dv">20</span><span class="op">};</span></span>
<span id="cb236-3"><a href="#cb236-3" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> Point p2 <span class="op">=</span> <span class="op">{</span><span class="dv">10</span><span class="op">,</span> <span class="dv">20</span><span class="op">};</span></span>
<span id="cb236-4"><a href="#cb236-4" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="op">(</span>p1 <span class="op">==</span> p2<span class="op">)</span> <span class="op">{</span>  <span class="co">/* コンパイルエラー */</span></span>
<span id="cb236-5"><a href="#cb236-5" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb236-6"><a href="#cb236-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb236-7"><a href="#cb236-7" aria-hidden="true" tabindex="-1"></a><span class="co">/* OK: メンバーごとの比較 */</span></span>
<span id="cb236-8"><a href="#cb236-8" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="op">(</span>p1<span class="op">.</span>x <span class="op">==</span> p2<span class="op">.</span>x <span class="op">&amp;&amp;</span> p1<span class="op">.</span>y <span class="op">==</span> p2<span class="op">.</span>y<span class="op">)</span> <span class="op">{</span></span>
<span id="cb236-9"><a href="#cb236-9" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;同じ座標です</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb236-10"><a href="#cb236-10" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h2 id="次の章へ-9">次の章へ</h2>
<p>構造体を理解したら、<a
href="../function-pointers/README.md">関数ポインタ</a>
に進んでください。</p>
<h2 id="参考資料-9">参考資料</h2>
<ul>
<li><a
href="https://ja.cppreference.com/w/c/language/struct">C言語構造体リファレンス</a></li>
<li><a
href="https://ja.cppreference.com/w/c/language/object">メモリアライメントの詳細</a></li>
<li><a
href="https://ja.cppreference.com/w/c/language/struct_initialization">構造体の初期化</a>
## サンプルコード</li>
</ul>
<h3 id="struct_arrays.c">struct_arrays.c</h3>
<div class="sourceCode" id="cb237"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb237-1"><a href="#cb237-1" aria-hidden="true" tabindex="-1"></a><span class="co">/*</span></span>
<span id="cb237-2"><a href="#cb237-2" aria-hidden="true" tabindex="-1"></a><span class="co"> * struct_arrays.c - 構造体配列の操作</span></span>
<span id="cb237-3"><a href="#cb237-3" aria-hidden="true" tabindex="-1"></a><span class="co"> * </span></span>
<span id="cb237-4"><a href="#cb237-4" aria-hidden="true" tabindex="-1"></a><span class="co"> * このプログラムでは以下を学習します：</span></span>
<span id="cb237-5"><a href="#cb237-5" aria-hidden="true" tabindex="-1"></a><span class="co"> * - 構造体配列の宣言と初期化</span></span>
<span id="cb237-6"><a href="#cb237-6" aria-hidden="true" tabindex="-1"></a><span class="co"> * - 構造体配列とポインタ演算</span></span>
<span id="cb237-7"><a href="#cb237-7" aria-hidden="true" tabindex="-1"></a><span class="co"> * - 構造体ポインタ配列</span></span>
<span id="cb237-8"><a href="#cb237-8" aria-hidden="true" tabindex="-1"></a><span class="co"> * - 実践的なデータ管理</span></span>
<span id="cb237-9"><a href="#cb237-9" aria-hidden="true" tabindex="-1"></a><span class="co"> */</span></span>
<span id="cb237-10"><a href="#cb237-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb237-11"><a href="#cb237-11" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb237-12"><a href="#cb237-12" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;string.h&gt;</span></span>
<span id="cb237-13"><a href="#cb237-13" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdlib.h&gt;</span></span>
<span id="cb237-14"><a href="#cb237-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb237-15"><a href="#cb237-15" aria-hidden="true" tabindex="-1"></a><span class="pp">#define MAX_STUDENTS </span><span class="dv">50</span></span>
<span id="cb237-16"><a href="#cb237-16" aria-hidden="true" tabindex="-1"></a><span class="pp">#define MAX_BOOKS </span><span class="dv">100</span></span>
<span id="cb237-17"><a href="#cb237-17" aria-hidden="true" tabindex="-1"></a><span class="pp">#define MAX_NAME_LEN </span><span class="dv">50</span></span>
<span id="cb237-18"><a href="#cb237-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb237-19"><a href="#cb237-19" aria-hidden="true" tabindex="-1"></a><span class="co">/* 学生情報を表す構造体 */</span></span>
<span id="cb237-20"><a href="#cb237-20" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> Student <span class="op">{</span></span>
<span id="cb237-21"><a href="#cb237-21" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> id<span class="op">;</span></span>
<span id="cb237-22"><a href="#cb237-22" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> name<span class="op">[</span>MAX_NAME_LEN<span class="op">];</span></span>
<span id="cb237-23"><a href="#cb237-23" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span> scores<span class="op">[</span><span class="dv">5</span><span class="op">];</span>  <span class="co">/* 5教科の点数 */</span></span>
<span id="cb237-24"><a href="#cb237-24" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span> average<span class="op">;</span></span>
<span id="cb237-25"><a href="#cb237-25" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> grade<span class="op">;</span></span>
<span id="cb237-26"><a href="#cb237-26" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb237-27"><a href="#cb237-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb237-28"><a href="#cb237-28" aria-hidden="true" tabindex="-1"></a><span class="co">/* 書籍情報を表す構造体 */</span></span>
<span id="cb237-29"><a href="#cb237-29" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> Book <span class="op">{</span></span>
<span id="cb237-30"><a href="#cb237-30" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> isbn<span class="op">;</span></span>
<span id="cb237-31"><a href="#cb237-31" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> title<span class="op">[</span><span class="dv">100</span><span class="op">];</span></span>
<span id="cb237-32"><a href="#cb237-32" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> author<span class="op">[</span><span class="dv">50</span><span class="op">];</span></span>
<span id="cb237-33"><a href="#cb237-33" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> year<span class="op">;</span></span>
<span id="cb237-34"><a href="#cb237-34" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> is_borrowed<span class="op">;</span></span>
<span id="cb237-35"><a href="#cb237-35" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> borrower_id<span class="op">;</span>  <span class="co">/* 借りている学生のID */</span></span>
<span id="cb237-36"><a href="#cb237-36" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb237-37"><a href="#cb237-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb237-38"><a href="#cb237-38" aria-hidden="true" tabindex="-1"></a><span class="co">/* 図書館を表す構造体 */</span></span>
<span id="cb237-39"><a href="#cb237-39" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> Library <span class="op">{</span></span>
<span id="cb237-40"><a href="#cb237-40" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Book books<span class="op">[</span>MAX_BOOKS<span class="op">];</span></span>
<span id="cb237-41"><a href="#cb237-41" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> book_count<span class="op">;</span></span>
<span id="cb237-42"><a href="#cb237-42" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Student <span class="op">*</span>students<span class="op">[</span>MAX_STUDENTS<span class="op">];</span></span>
<span id="cb237-43"><a href="#cb237-43" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> student_count<span class="op">;</span></span>
<span id="cb237-44"><a href="#cb237-44" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb237-45"><a href="#cb237-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb237-46"><a href="#cb237-46" aria-hidden="true" tabindex="-1"></a><span class="co">/* 学生の平均点を計算する関数 */</span></span>
<span id="cb237-47"><a href="#cb237-47" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> calculate_average<span class="op">(</span><span class="kw">struct</span> Student <span class="op">*</span>student<span class="op">)</span></span>
<span id="cb237-48"><a href="#cb237-48" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb237-49"><a href="#cb237-49" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb237-50"><a href="#cb237-50" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span> sum <span class="op">=</span> <span class="fl">0.0</span><span class="op">;</span></span>
<span id="cb237-51"><a href="#cb237-51" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb237-52"><a href="#cb237-52" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">5</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb237-53"><a href="#cb237-53" aria-hidden="true" tabindex="-1"></a>        sum <span class="op">+=</span> student<span class="op">-&gt;</span>scores<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb237-54"><a href="#cb237-54" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb237-55"><a href="#cb237-55" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb237-56"><a href="#cb237-56" aria-hidden="true" tabindex="-1"></a>    student<span class="op">-&gt;</span>average <span class="op">=</span> sum <span class="op">/</span> <span class="fl">5.0</span><span class="op">;</span></span>
<span id="cb237-57"><a href="#cb237-57" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb237-58"><a href="#cb237-58" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 成績評価 */</span></span>
<span id="cb237-59"><a href="#cb237-59" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>student<span class="op">-&gt;</span>average <span class="op">&gt;=</span> <span class="fl">90.0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb237-60"><a href="#cb237-60" aria-hidden="true" tabindex="-1"></a>        student<span class="op">-&gt;</span>grade <span class="op">=</span> <span class="ch">&#39;A&#39;</span><span class="op">;</span></span>
<span id="cb237-61"><a href="#cb237-61" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span> <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>student<span class="op">-&gt;</span>average <span class="op">&gt;=</span> <span class="fl">80.0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb237-62"><a href="#cb237-62" aria-hidden="true" tabindex="-1"></a>        student<span class="op">-&gt;</span>grade <span class="op">=</span> <span class="ch">&#39;B&#39;</span><span class="op">;</span></span>
<span id="cb237-63"><a href="#cb237-63" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span> <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>student<span class="op">-&gt;</span>average <span class="op">&gt;=</span> <span class="fl">70.0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb237-64"><a href="#cb237-64" aria-hidden="true" tabindex="-1"></a>        student<span class="op">-&gt;</span>grade <span class="op">=</span> <span class="ch">&#39;C&#39;</span><span class="op">;</span></span>
<span id="cb237-65"><a href="#cb237-65" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span> <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>student<span class="op">-&gt;</span>average <span class="op">&gt;=</span> <span class="fl">60.0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb237-66"><a href="#cb237-66" aria-hidden="true" tabindex="-1"></a>        student<span class="op">-&gt;</span>grade <span class="op">=</span> <span class="ch">&#39;D&#39;</span><span class="op">;</span></span>
<span id="cb237-67"><a href="#cb237-67" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb237-68"><a href="#cb237-68" aria-hidden="true" tabindex="-1"></a>        student<span class="op">-&gt;</span>grade <span class="op">=</span> <span class="ch">&#39;F&#39;</span><span class="op">;</span></span>
<span id="cb237-69"><a href="#cb237-69" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb237-70"><a href="#cb237-70" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb237-71"><a href="#cb237-71" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb237-72"><a href="#cb237-72" aria-hidden="true" tabindex="-1"></a><span class="co">/* 学生情報を表示する関数 */</span></span>
<span id="cb237-73"><a href="#cb237-73" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> print_student<span class="op">(</span><span class="dt">const</span> <span class="kw">struct</span> Student <span class="op">*</span>student<span class="op">)</span></span>
<span id="cb237-74"><a href="#cb237-74" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb237-75"><a href="#cb237-75" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb237-76"><a href="#cb237-76" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb237-77"><a href="#cb237-77" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ID: </span><span class="sc">%d</span><span class="st">, 名前: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> student<span class="op">-&gt;</span>id<span class="op">,</span> student<span class="op">-&gt;</span>name<span class="op">);</span></span>
<span id="cb237-78"><a href="#cb237-78" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;点数: &quot;</span><span class="op">);</span></span>
<span id="cb237-79"><a href="#cb237-79" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">5</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb237-80"><a href="#cb237-80" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%.0f</span><span class="st"> &quot;</span><span class="op">,</span> student<span class="op">-&gt;</span>scores<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb237-81"><a href="#cb237-81" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb237-82"><a href="#cb237-82" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">平均: </span><span class="sc">%.1f</span><span class="st">, 評価: </span><span class="sc">%c\n</span><span class="st">&quot;</span><span class="op">,</span> student<span class="op">-&gt;</span>average<span class="op">,</span> student<span class="op">-&gt;</span>grade<span class="op">);</span></span>
<span id="cb237-83"><a href="#cb237-83" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;---</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb237-84"><a href="#cb237-84" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb237-85"><a href="#cb237-85" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb237-86"><a href="#cb237-86" aria-hidden="true" tabindex="-1"></a><span class="co">/* 成績順にソート（バブルソート） */</span></span>
<span id="cb237-87"><a href="#cb237-87" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> sort_students_by_average<span class="op">(</span><span class="kw">struct</span> Student students<span class="op">[],</span> <span class="dt">int</span> count<span class="op">)</span></span>
<span id="cb237-88"><a href="#cb237-88" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb237-89"><a href="#cb237-89" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">,</span> j<span class="op">;</span></span>
<span id="cb237-90"><a href="#cb237-90" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Student temp<span class="op">;</span></span>
<span id="cb237-91"><a href="#cb237-91" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb237-92"><a href="#cb237-92" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> count <span class="op">-</span> <span class="dv">1</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb237-93"><a href="#cb237-93" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span>j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> j <span class="op">&lt;</span> count <span class="op">-</span> <span class="dv">1</span> <span class="op">-</span> i<span class="op">;</span> j<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb237-94"><a href="#cb237-94" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>students<span class="op">[</span>j<span class="op">].</span>average <span class="op">&lt;</span> students<span class="op">[</span>j <span class="op">+</span> <span class="dv">1</span><span class="op">].</span>average<span class="op">)</span> <span class="op">{</span></span>
<span id="cb237-95"><a href="#cb237-95" aria-hidden="true" tabindex="-1"></a>                temp <span class="op">=</span> students<span class="op">[</span>j<span class="op">];</span></span>
<span id="cb237-96"><a href="#cb237-96" aria-hidden="true" tabindex="-1"></a>                students<span class="op">[</span>j<span class="op">]</span> <span class="op">=</span> students<span class="op">[</span>j <span class="op">+</span> <span class="dv">1</span><span class="op">];</span></span>
<span id="cb237-97"><a href="#cb237-97" aria-hidden="true" tabindex="-1"></a>                students<span class="op">[</span>j <span class="op">+</span> <span class="dv">1</span><span class="op">]</span> <span class="op">=</span> temp<span class="op">;</span></span>
<span id="cb237-98"><a href="#cb237-98" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb237-99"><a href="#cb237-99" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb237-100"><a href="#cb237-100" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb237-101"><a href="#cb237-101" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb237-102"><a href="#cb237-102" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb237-103"><a href="#cb237-103" aria-hidden="true" tabindex="-1"></a><span class="co">/* 書籍を追加する関数 */</span></span>
<span id="cb237-104"><a href="#cb237-104" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> add_book<span class="op">(</span><span class="kw">struct</span> Library <span class="op">*</span>lib<span class="op">,</span> <span class="dt">int</span> isbn<span class="op">,</span> <span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>title<span class="op">,</span> </span>
<span id="cb237-105"><a href="#cb237-105" aria-hidden="true" tabindex="-1"></a>             <span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>author<span class="op">,</span> <span class="dt">int</span> year<span class="op">)</span></span>
<span id="cb237-106"><a href="#cb237-106" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb237-107"><a href="#cb237-107" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>lib<span class="op">-&gt;</span>book_count <span class="op">&gt;=</span> MAX_BOOKS<span class="op">)</span> <span class="op">{</span></span>
<span id="cb237-108"><a href="#cb237-108" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span>  <span class="co">/* 追加失敗 */</span></span>
<span id="cb237-109"><a href="#cb237-109" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb237-110"><a href="#cb237-110" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb237-111"><a href="#cb237-111" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Book <span class="op">*</span>book <span class="op">=</span> <span class="op">&amp;</span>lib<span class="op">-&gt;</span>books<span class="op">[</span>lib<span class="op">-&gt;</span>book_count<span class="op">];</span></span>
<span id="cb237-112"><a href="#cb237-112" aria-hidden="true" tabindex="-1"></a>    book<span class="op">-&gt;</span>isbn <span class="op">=</span> isbn<span class="op">;</span></span>
<span id="cb237-113"><a href="#cb237-113" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>book<span class="op">-&gt;</span>title<span class="op">,</span> title<span class="op">);</span></span>
<span id="cb237-114"><a href="#cb237-114" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>book<span class="op">-&gt;</span>author<span class="op">,</span> author<span class="op">);</span></span>
<span id="cb237-115"><a href="#cb237-115" aria-hidden="true" tabindex="-1"></a>    book<span class="op">-&gt;</span>year <span class="op">=</span> year<span class="op">;</span></span>
<span id="cb237-116"><a href="#cb237-116" aria-hidden="true" tabindex="-1"></a>    book<span class="op">-&gt;</span>is_borrowed <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb237-117"><a href="#cb237-117" aria-hidden="true" tabindex="-1"></a>    book<span class="op">-&gt;</span>borrower_id <span class="op">=</span> <span class="op">-</span><span class="dv">1</span><span class="op">;</span></span>
<span id="cb237-118"><a href="#cb237-118" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb237-119"><a href="#cb237-119" aria-hidden="true" tabindex="-1"></a>    lib<span class="op">-&gt;</span>book_count<span class="op">++;</span></span>
<span id="cb237-120"><a href="#cb237-120" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">1</span><span class="op">;</span>  <span class="co">/* 追加成功 */</span></span>
<span id="cb237-121"><a href="#cb237-121" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb237-122"><a href="#cb237-122" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb237-123"><a href="#cb237-123" aria-hidden="true" tabindex="-1"></a><span class="co">/* 書籍を検索する関数 */</span></span>
<span id="cb237-124"><a href="#cb237-124" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> Book<span class="op">*</span> find_book_by_isbn<span class="op">(</span><span class="kw">struct</span> Library <span class="op">*</span>lib<span class="op">,</span> <span class="dt">int</span> isbn<span class="op">)</span></span>
<span id="cb237-125"><a href="#cb237-125" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb237-126"><a href="#cb237-126" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb237-127"><a href="#cb237-127" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> lib<span class="op">-&gt;</span>book_count<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb237-128"><a href="#cb237-128" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>lib<span class="op">-&gt;</span>books<span class="op">[</span>i<span class="op">].</span>isbn <span class="op">==</span> isbn<span class="op">)</span> <span class="op">{</span></span>
<span id="cb237-129"><a href="#cb237-129" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> <span class="op">&amp;</span>lib<span class="op">-&gt;</span>books<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb237-130"><a href="#cb237-130" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb237-131"><a href="#cb237-131" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb237-132"><a href="#cb237-132" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> NULL<span class="op">;</span></span>
<span id="cb237-133"><a href="#cb237-133" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb237-134"><a href="#cb237-134" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb237-135"><a href="#cb237-135" aria-hidden="true" tabindex="-1"></a><span class="co">/* 書籍を借りる関数 */</span></span>
<span id="cb237-136"><a href="#cb237-136" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> borrow_book<span class="op">(</span><span class="kw">struct</span> Library <span class="op">*</span>lib<span class="op">,</span> <span class="dt">int</span> isbn<span class="op">,</span> <span class="dt">int</span> student_id<span class="op">)</span></span>
<span id="cb237-137"><a href="#cb237-137" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb237-138"><a href="#cb237-138" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Book <span class="op">*</span>book <span class="op">=</span> find_book_by_isbn<span class="op">(</span>lib<span class="op">,</span> isbn<span class="op">);</span></span>
<span id="cb237-139"><a href="#cb237-139" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb237-140"><a href="#cb237-140" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>book <span class="op">==</span> NULL<span class="op">)</span> <span class="op">{</span></span>
<span id="cb237-141"><a href="#cb237-141" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;ISBN </span><span class="sc">%d</span><span class="st"> の書籍が見つかりません</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> isbn<span class="op">);</span></span>
<span id="cb237-142"><a href="#cb237-142" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb237-143"><a href="#cb237-143" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb237-144"><a href="#cb237-144" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb237-145"><a href="#cb237-145" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>book<span class="op">-&gt;</span>is_borrowed<span class="op">)</span> <span class="op">{</span></span>
<span id="cb237-146"><a href="#cb237-146" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;「</span><span class="sc">%s</span><span class="st">」は既に貸出中です</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> book<span class="op">-&gt;</span>title<span class="op">);</span></span>
<span id="cb237-147"><a href="#cb237-147" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb237-148"><a href="#cb237-148" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb237-149"><a href="#cb237-149" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb237-150"><a href="#cb237-150" aria-hidden="true" tabindex="-1"></a>    book<span class="op">-&gt;</span>is_borrowed <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb237-151"><a href="#cb237-151" aria-hidden="true" tabindex="-1"></a>    book<span class="op">-&gt;</span>borrower_id <span class="op">=</span> student_id<span class="op">;</span></span>
<span id="cb237-152"><a href="#cb237-152" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ID </span><span class="sc">%d</span><span class="st"> の学生が「</span><span class="sc">%s</span><span class="st">」を借りました</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> student_id<span class="op">,</span> book<span class="op">-&gt;</span>title<span class="op">);</span></span>
<span id="cb237-153"><a href="#cb237-153" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb237-154"><a href="#cb237-154" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb237-155"><a href="#cb237-155" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb237-156"><a href="#cb237-156" aria-hidden="true" tabindex="-1"></a><span class="co">/* 学生の借りている本を表示 */</span></span>
<span id="cb237-157"><a href="#cb237-157" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> show_borrowed_books<span class="op">(</span><span class="kw">struct</span> Library <span class="op">*</span>lib<span class="op">,</span> <span class="dt">int</span> student_id<span class="op">)</span></span>
<span id="cb237-158"><a href="#cb237-158" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb237-159"><a href="#cb237-159" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb237-160"><a href="#cb237-160" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> count <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb237-161"><a href="#cb237-161" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb237-162"><a href="#cb237-162" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">ID </span><span class="sc">%d</span><span class="st"> の学生が借りている本:</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> student_id<span class="op">);</span></span>
<span id="cb237-163"><a href="#cb237-163" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> lib<span class="op">-&gt;</span>book_count<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb237-164"><a href="#cb237-164" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>lib<span class="op">-&gt;</span>books<span class="op">[</span>i<span class="op">].</span>is_borrowed <span class="op">&amp;&amp;</span> </span>
<span id="cb237-165"><a href="#cb237-165" aria-hidden="true" tabindex="-1"></a>            lib<span class="op">-&gt;</span>books<span class="op">[</span>i<span class="op">].</span>borrower_id <span class="op">==</span> student_id<span class="op">)</span> <span class="op">{</span></span>
<span id="cb237-166"><a href="#cb237-166" aria-hidden="true" tabindex="-1"></a>            printf<span class="op">(</span><span class="st">&quot;- </span><span class="sc">%s</span><span class="st"> (</span><span class="sc">%s</span><span class="st">著, </span><span class="sc">%d</span><span class="st">年)</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> </span>
<span id="cb237-167"><a href="#cb237-167" aria-hidden="true" tabindex="-1"></a>                   lib<span class="op">-&gt;</span>books<span class="op">[</span>i<span class="op">].</span>title<span class="op">,</span> </span>
<span id="cb237-168"><a href="#cb237-168" aria-hidden="true" tabindex="-1"></a>                   lib<span class="op">-&gt;</span>books<span class="op">[</span>i<span class="op">].</span>author<span class="op">,</span> </span>
<span id="cb237-169"><a href="#cb237-169" aria-hidden="true" tabindex="-1"></a>                   lib<span class="op">-&gt;</span>books<span class="op">[</span>i<span class="op">].</span>year<span class="op">);</span></span>
<span id="cb237-170"><a href="#cb237-170" aria-hidden="true" tabindex="-1"></a>            count<span class="op">++;</span></span>
<span id="cb237-171"><a href="#cb237-171" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb237-172"><a href="#cb237-172" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb237-173"><a href="#cb237-173" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb237-174"><a href="#cb237-174" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>count <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb237-175"><a href="#cb237-175" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;  借りている本はありません</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb237-176"><a href="#cb237-176" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb237-177"><a href="#cb237-177" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb237-178"><a href="#cb237-178" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb237-179"><a href="#cb237-179" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb237-180"><a href="#cb237-180" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb237-181"><a href="#cb237-181" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;===== 構造体配列の操作 =====</span><span class="sc">\n\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb237-182"><a href="#cb237-182" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb237-183"><a href="#cb237-183" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 1. 構造体配列の基本 */</span></span>
<span id="cb237-184"><a href="#cb237-184" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;1. 構造体配列の基本</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb237-185"><a href="#cb237-185" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb237-186"><a href="#cb237-186" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Student students<span class="op">[</span><span class="dv">5</span><span class="op">]</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb237-187"><a href="#cb237-187" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span><span class="dv">1001</span><span class="op">,</span> <span class="st">&quot;田中太郎&quot;</span><span class="op">,</span> <span class="op">{</span><span class="dv">85</span><span class="op">,</span> <span class="dv">90</span><span class="op">,</span> <span class="dv">78</span><span class="op">,</span> <span class="dv">92</span><span class="op">,</span> <span class="dv">88</span><span class="op">},</span> <span class="dv">0</span><span class="op">,</span> <span class="ch">&#39; &#39;</span><span class="op">},</span></span>
<span id="cb237-188"><a href="#cb237-188" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span><span class="dv">1002</span><span class="op">,</span> <span class="st">&quot;佐藤花子&quot;</span><span class="op">,</span> <span class="op">{</span><span class="dv">92</span><span class="op">,</span> <span class="dv">88</span><span class="op">,</span> <span class="dv">95</span><span class="op">,</span> <span class="dv">90</span><span class="op">,</span> <span class="dv">93</span><span class="op">},</span> <span class="dv">0</span><span class="op">,</span> <span class="ch">&#39; &#39;</span><span class="op">},</span></span>
<span id="cb237-189"><a href="#cb237-189" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span><span class="dv">1003</span><span class="op">,</span> <span class="st">&quot;山田次郎&quot;</span><span class="op">,</span> <span class="op">{</span><span class="dv">75</span><span class="op">,</span> <span class="dv">80</span><span class="op">,</span> <span class="dv">72</span><span class="op">,</span> <span class="dv">78</span><span class="op">,</span> <span class="dv">70</span><span class="op">},</span> <span class="dv">0</span><span class="op">,</span> <span class="ch">&#39; &#39;</span><span class="op">},</span></span>
<span id="cb237-190"><a href="#cb237-190" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span><span class="dv">1004</span><span class="op">,</span> <span class="st">&quot;鈴木美咲&quot;</span><span class="op">,</span> <span class="op">{</span><span class="dv">88</span><span class="op">,</span> <span class="dv">85</span><span class="op">,</span> <span class="dv">90</span><span class="op">,</span> <span class="dv">87</span><span class="op">,</span> <span class="dv">91</span><span class="op">},</span> <span class="dv">0</span><span class="op">,</span> <span class="ch">&#39; &#39;</span><span class="op">},</span></span>
<span id="cb237-191"><a href="#cb237-191" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span><span class="dv">1005</span><span class="op">,</span> <span class="st">&quot;高橋健太&quot;</span><span class="op">,</span> <span class="op">{</span><span class="dv">60</span><span class="op">,</span> <span class="dv">65</span><span class="op">,</span> <span class="dv">58</span><span class="op">,</span> <span class="dv">70</span><span class="op">,</span> <span class="dv">62</span><span class="op">},</span> <span class="dv">0</span><span class="op">,</span> <span class="ch">&#39; &#39;</span><span class="op">}</span></span>
<span id="cb237-192"><a href="#cb237-192" aria-hidden="true" tabindex="-1"></a>    <span class="op">};</span></span>
<span id="cb237-193"><a href="#cb237-193" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb237-194"><a href="#cb237-194" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> student_count <span class="op">=</span> <span class="dv">5</span><span class="op">;</span></span>
<span id="cb237-195"><a href="#cb237-195" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb237-196"><a href="#cb237-196" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb237-197"><a href="#cb237-197" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 平均点の計算 */</span></span>
<span id="cb237-198"><a href="#cb237-198" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> student_count<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb237-199"><a href="#cb237-199" aria-hidden="true" tabindex="-1"></a>        calculate_average<span class="op">(&amp;</span>students<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb237-200"><a href="#cb237-200" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb237-201"><a href="#cb237-201" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb237-202"><a href="#cb237-202" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== 全学生の成績 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb237-203"><a href="#cb237-203" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> student_count<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb237-204"><a href="#cb237-204" aria-hidden="true" tabindex="-1"></a>        print_student<span class="op">(&amp;</span>students<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb237-205"><a href="#cb237-205" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb237-206"><a href="#cb237-206" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb237-207"><a href="#cb237-207" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb237-208"><a href="#cb237-208" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 2. 構造体配列のソート */</span></span>
<span id="cb237-209"><a href="#cb237-209" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;2. 構造体配列のソート</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb237-210"><a href="#cb237-210" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb237-211"><a href="#cb237-211" aria-hidden="true" tabindex="-1"></a>    sort_students_by_average<span class="op">(</span>students<span class="op">,</span> student_count<span class="op">);</span></span>
<span id="cb237-212"><a href="#cb237-212" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb237-213"><a href="#cb237-213" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== 成績順（高い順） ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb237-214"><a href="#cb237-214" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> student_count<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb237-215"><a href="#cb237-215" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st">位: </span><span class="sc">%s</span><span class="st"> (平均: </span><span class="sc">%.1f</span><span class="st">)</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> </span>
<span id="cb237-216"><a href="#cb237-216" aria-hidden="true" tabindex="-1"></a>               i <span class="op">+</span> <span class="dv">1</span><span class="op">,</span> students<span class="op">[</span>i<span class="op">].</span>name<span class="op">,</span> students<span class="op">[</span>i<span class="op">].</span>average<span class="op">);</span></span>
<span id="cb237-217"><a href="#cb237-217" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb237-218"><a href="#cb237-218" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb237-219"><a href="#cb237-219" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb237-220"><a href="#cb237-220" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 3. 構造体ポインタ配列 */</span></span>
<span id="cb237-221"><a href="#cb237-221" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;3. 構造体ポインタ配列</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb237-222"><a href="#cb237-222" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb237-223"><a href="#cb237-223" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Student <span class="op">*</span>top_students<span class="op">[</span><span class="dv">3</span><span class="op">];</span></span>
<span id="cb237-224"><a href="#cb237-224" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> top_count <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb237-225"><a href="#cb237-225" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb237-226"><a href="#cb237-226" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 平均80点以上の学生を選抜 */</span></span>
<span id="cb237-227"><a href="#cb237-227" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> student_count<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb237-228"><a href="#cb237-228" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>students<span class="op">[</span>i<span class="op">].</span>average <span class="op">&gt;=</span> <span class="fl">80.0</span> <span class="op">&amp;&amp;</span> top_count <span class="op">&lt;</span> <span class="dv">3</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb237-229"><a href="#cb237-229" aria-hidden="true" tabindex="-1"></a>            top_students<span class="op">[</span>top_count<span class="op">++]</span> <span class="op">=</span> <span class="op">&amp;</span>students<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb237-230"><a href="#cb237-230" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb237-231"><a href="#cb237-231" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb237-232"><a href="#cb237-232" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb237-233"><a href="#cb237-233" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== 優秀学生（平均80点以上） ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb237-234"><a href="#cb237-234" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> top_count<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb237-235"><a href="#cb237-235" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%s</span><span class="st"> (平均: </span><span class="sc">%.1f</span><span class="st">, 評価: </span><span class="sc">%c</span><span class="st">)</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> </span>
<span id="cb237-236"><a href="#cb237-236" aria-hidden="true" tabindex="-1"></a>               top_students<span class="op">[</span>i<span class="op">]-&gt;</span>name<span class="op">,</span> </span>
<span id="cb237-237"><a href="#cb237-237" aria-hidden="true" tabindex="-1"></a>               top_students<span class="op">[</span>i<span class="op">]-&gt;</span>average<span class="op">,</span> </span>
<span id="cb237-238"><a href="#cb237-238" aria-hidden="true" tabindex="-1"></a>               top_students<span class="op">[</span>i<span class="op">]-&gt;</span>grade<span class="op">);</span></span>
<span id="cb237-239"><a href="#cb237-239" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb237-240"><a href="#cb237-240" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb237-241"><a href="#cb237-241" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb237-242"><a href="#cb237-242" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 4. より複雑な構造体の管理 */</span></span>
<span id="cb237-243"><a href="#cb237-243" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;4. 図書館システム</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb237-244"><a href="#cb237-244" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb237-245"><a href="#cb237-245" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Library library <span class="op">=</span> <span class="op">{.</span>book_count <span class="op">=</span> <span class="dv">0</span><span class="op">,</span> <span class="op">.</span>student_count <span class="op">=</span> <span class="dv">0</span><span class="op">};</span></span>
<span id="cb237-246"><a href="#cb237-246" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb237-247"><a href="#cb237-247" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 書籍の追加 */</span></span>
<span id="cb237-248"><a href="#cb237-248" aria-hidden="true" tabindex="-1"></a>    add_book<span class="op">(&amp;</span>library<span class="op">,</span> <span class="dv">1001</span><span class="op">,</span> <span class="st">&quot;プログラミング入門&quot;</span><span class="op">,</span> <span class="st">&quot;山田太郎&quot;</span><span class="op">,</span> <span class="dv">2020</span><span class="op">);</span></span>
<span id="cb237-249"><a href="#cb237-249" aria-hidden="true" tabindex="-1"></a>    add_book<span class="op">(&amp;</span>library<span class="op">,</span> <span class="dv">1002</span><span class="op">,</span> <span class="st">&quot;データ構造とアルゴリズム&quot;</span><span class="op">,</span> <span class="st">&quot;佐藤花子&quot;</span><span class="op">,</span> <span class="dv">2019</span><span class="op">);</span></span>
<span id="cb237-250"><a href="#cb237-250" aria-hidden="true" tabindex="-1"></a>    add_book<span class="op">(&amp;</span>library<span class="op">,</span> <span class="dv">1003</span><span class="op">,</span> <span class="st">&quot;オペレーティングシステム&quot;</span><span class="op">,</span> <span class="st">&quot;田中次郎&quot;</span><span class="op">,</span> <span class="dv">2021</span><span class="op">);</span></span>
<span id="cb237-251"><a href="#cb237-251" aria-hidden="true" tabindex="-1"></a>    add_book<span class="op">(&amp;</span>library<span class="op">,</span> <span class="dv">1004</span><span class="op">,</span> <span class="st">&quot;ネットワーク基礎&quot;</span><span class="op">,</span> <span class="st">&quot;鈴木一郎&quot;</span><span class="op">,</span> <span class="dv">2022</span><span class="op">);</span></span>
<span id="cb237-252"><a href="#cb237-252" aria-hidden="true" tabindex="-1"></a>    add_book<span class="op">(&amp;</span>library<span class="op">,</span> <span class="dv">1005</span><span class="op">,</span> <span class="st">&quot;データベース設計&quot;</span><span class="op">,</span> <span class="st">&quot;高橋美咲&quot;</span><span class="op">,</span> <span class="dv">2020</span><span class="op">);</span></span>
<span id="cb237-253"><a href="#cb237-253" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb237-254"><a href="#cb237-254" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;図書館の蔵書数: </span><span class="sc">%d</span><span class="st">冊</span><span class="sc">\n\n</span><span class="st">&quot;</span><span class="op">,</span> library<span class="op">.</span>book_count<span class="op">);</span></span>
<span id="cb237-255"><a href="#cb237-255" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb237-256"><a href="#cb237-256" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 学生を図書館に登録 */</span></span>
<span id="cb237-257"><a href="#cb237-257" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">3</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb237-258"><a href="#cb237-258" aria-hidden="true" tabindex="-1"></a>        library<span class="op">.</span>students<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> <span class="op">&amp;</span>students<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb237-259"><a href="#cb237-259" aria-hidden="true" tabindex="-1"></a>        library<span class="op">.</span>student_count<span class="op">++;</span></span>
<span id="cb237-260"><a href="#cb237-260" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb237-261"><a href="#cb237-261" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb237-262"><a href="#cb237-262" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 本の貸出 */</span></span>
<span id="cb237-263"><a href="#cb237-263" aria-hidden="true" tabindex="-1"></a>    borrow_book<span class="op">(&amp;</span>library<span class="op">,</span> <span class="dv">1001</span><span class="op">,</span> students<span class="op">[</span><span class="dv">0</span><span class="op">].</span>id<span class="op">);</span></span>
<span id="cb237-264"><a href="#cb237-264" aria-hidden="true" tabindex="-1"></a>    borrow_book<span class="op">(&amp;</span>library<span class="op">,</span> <span class="dv">1003</span><span class="op">,</span> students<span class="op">[</span><span class="dv">0</span><span class="op">].</span>id<span class="op">);</span></span>
<span id="cb237-265"><a href="#cb237-265" aria-hidden="true" tabindex="-1"></a>    borrow_book<span class="op">(&amp;</span>library<span class="op">,</span> <span class="dv">1002</span><span class="op">,</span> students<span class="op">[</span><span class="dv">1</span><span class="op">].</span>id<span class="op">);</span></span>
<span id="cb237-266"><a href="#cb237-266" aria-hidden="true" tabindex="-1"></a>    borrow_book<span class="op">(&amp;</span>library<span class="op">,</span> <span class="dv">1001</span><span class="op">,</span> students<span class="op">[</span><span class="dv">2</span><span class="op">].</span>id<span class="op">);</span>  <span class="co">/* 既に貸出中 */</span></span>
<span id="cb237-267"><a href="#cb237-267" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb237-268"><a href="#cb237-268" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 各学生の借りている本を表示 */</span></span>
<span id="cb237-269"><a href="#cb237-269" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">3</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb237-270"><a href="#cb237-270" aria-hidden="true" tabindex="-1"></a>        show_borrowed_books<span class="op">(&amp;</span>library<span class="op">,</span> students<span class="op">[</span>i<span class="op">].</span>id<span class="op">);</span></span>
<span id="cb237-271"><a href="#cb237-271" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb237-272"><a href="#cb237-272" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb237-273"><a href="#cb237-273" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb237-274"><a href="#cb237-274" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 5. ポインタ演算による配列走査 */</span></span>
<span id="cb237-275"><a href="#cb237-275" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;5. ポインタ演算による配列走査</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb237-276"><a href="#cb237-276" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb237-277"><a href="#cb237-277" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Book <span class="op">*</span>book_ptr <span class="op">=</span> library<span class="op">.</span>books<span class="op">;</span></span>
<span id="cb237-278"><a href="#cb237-278" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Book <span class="op">*</span>book_end <span class="op">=</span> library<span class="op">.</span>books <span class="op">+</span> library<span class="op">.</span>book_count<span class="op">;</span></span>
<span id="cb237-279"><a href="#cb237-279" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb237-280"><a href="#cb237-280" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== 貸出中の書籍一覧 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb237-281"><a href="#cb237-281" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>book_ptr <span class="op">&lt;</span> book_end<span class="op">)</span> <span class="op">{</span></span>
<span id="cb237-282"><a href="#cb237-282" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>book_ptr<span class="op">-&gt;</span>is_borrowed<span class="op">)</span> <span class="op">{</span></span>
<span id="cb237-283"><a href="#cb237-283" aria-hidden="true" tabindex="-1"></a>            printf<span class="op">(</span><span class="st">&quot;「</span><span class="sc">%s</span><span class="st">」 → 学生ID: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> </span>
<span id="cb237-284"><a href="#cb237-284" aria-hidden="true" tabindex="-1"></a>                   book_ptr<span class="op">-&gt;</span>title<span class="op">,</span> book_ptr<span class="op">-&gt;</span>borrower_id<span class="op">);</span></span>
<span id="cb237-285"><a href="#cb237-285" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb237-286"><a href="#cb237-286" aria-hidden="true" tabindex="-1"></a>        book_ptr<span class="op">++;</span></span>
<span id="cb237-287"><a href="#cb237-287" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb237-288"><a href="#cb237-288" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb237-289"><a href="#cb237-289" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb237-290"><a href="#cb237-290" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb237-291"><a href="#cb237-291" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb237-292"><a href="#cb237-292" aria-hidden="true" tabindex="-1"></a><span class="co">/*</span></span>
<span id="cb237-293"><a href="#cb237-293" aria-hidden="true" tabindex="-1"></a><span class="co">実行結果例:</span></span>
<span id="cb237-294"><a href="#cb237-294" aria-hidden="true" tabindex="-1"></a><span class="co">===== 構造体配列の操作 =====</span></span>
<span id="cb237-295"><a href="#cb237-295" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb237-296"><a href="#cb237-296" aria-hidden="true" tabindex="-1"></a><span class="co">1. 構造体配列の基本</span></span>
<span id="cb237-297"><a href="#cb237-297" aria-hidden="true" tabindex="-1"></a><span class="co">=== 全学生の成績 ===</span></span>
<span id="cb237-298"><a href="#cb237-298" aria-hidden="true" tabindex="-1"></a><span class="co">ID: 1001, 名前: 田中太郎</span></span>
<span id="cb237-299"><a href="#cb237-299" aria-hidden="true" tabindex="-1"></a><span class="co">点数: 85 90 78 92 88 </span></span>
<span id="cb237-300"><a href="#cb237-300" aria-hidden="true" tabindex="-1"></a><span class="co">平均: 86.6, 評価: B</span></span>
<span id="cb237-301"><a href="#cb237-301" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb237-302"><a href="#cb237-302" aria-hidden="true" tabindex="-1"></a><span class="co">ID: 1002, 名前: 佐藤花子</span></span>
<span id="cb237-303"><a href="#cb237-303" aria-hidden="true" tabindex="-1"></a><span class="co">点数: 92 88 95 90 93 </span></span>
<span id="cb237-304"><a href="#cb237-304" aria-hidden="true" tabindex="-1"></a><span class="co">平均: 91.6, 評価: A</span></span>
<span id="cb237-305"><a href="#cb237-305" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb237-306"><a href="#cb237-306" aria-hidden="true" tabindex="-1"></a><span class="co">ID: 1003, 名前: 山田次郎</span></span>
<span id="cb237-307"><a href="#cb237-307" aria-hidden="true" tabindex="-1"></a><span class="co">点数: 75 80 72 78 70 </span></span>
<span id="cb237-308"><a href="#cb237-308" aria-hidden="true" tabindex="-1"></a><span class="co">平均: 75.0, 評価: C</span></span>
<span id="cb237-309"><a href="#cb237-309" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb237-310"><a href="#cb237-310" aria-hidden="true" tabindex="-1"></a><span class="co">ID: 1004, 名前: 鈴木美咲</span></span>
<span id="cb237-311"><a href="#cb237-311" aria-hidden="true" tabindex="-1"></a><span class="co">点数: 88 85 90 87 91 </span></span>
<span id="cb237-312"><a href="#cb237-312" aria-hidden="true" tabindex="-1"></a><span class="co">平均: 88.2, 評価: B</span></span>
<span id="cb237-313"><a href="#cb237-313" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb237-314"><a href="#cb237-314" aria-hidden="true" tabindex="-1"></a><span class="co">ID: 1005, 名前: 高橋健太</span></span>
<span id="cb237-315"><a href="#cb237-315" aria-hidden="true" tabindex="-1"></a><span class="co">点数: 60 65 58 70 62 </span></span>
<span id="cb237-316"><a href="#cb237-316" aria-hidden="true" tabindex="-1"></a><span class="co">平均: 63.0, 評価: D</span></span>
<span id="cb237-317"><a href="#cb237-317" aria-hidden="true" tabindex="-1"></a><span class="co">---</span></span>
<span id="cb237-318"><a href="#cb237-318" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb237-319"><a href="#cb237-319" aria-hidden="true" tabindex="-1"></a><span class="co">2. 構造体配列のソート</span></span>
<span id="cb237-320"><a href="#cb237-320" aria-hidden="true" tabindex="-1"></a><span class="co">=== 成績順（高い順） ===</span></span>
<span id="cb237-321"><a href="#cb237-321" aria-hidden="true" tabindex="-1"></a><span class="co">1位: 佐藤花子 (平均: 91.6)</span></span>
<span id="cb237-322"><a href="#cb237-322" aria-hidden="true" tabindex="-1"></a><span class="co">2位: 鈴木美咲 (平均: 88.2)</span></span>
<span id="cb237-323"><a href="#cb237-323" aria-hidden="true" tabindex="-1"></a><span class="co">3位: 田中太郎 (平均: 86.6)</span></span>
<span id="cb237-324"><a href="#cb237-324" aria-hidden="true" tabindex="-1"></a><span class="co">4位: 山田次郎 (平均: 75.0)</span></span>
<span id="cb237-325"><a href="#cb237-325" aria-hidden="true" tabindex="-1"></a><span class="co">5位: 高橋健太 (平均: 63.0)</span></span>
<span id="cb237-326"><a href="#cb237-326" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb237-327"><a href="#cb237-327" aria-hidden="true" tabindex="-1"></a><span class="co">3. 構造体ポインタ配列</span></span>
<span id="cb237-328"><a href="#cb237-328" aria-hidden="true" tabindex="-1"></a><span class="co">=== 優秀学生（平均80点以上） ===</span></span>
<span id="cb237-329"><a href="#cb237-329" aria-hidden="true" tabindex="-1"></a><span class="co">佐藤花子 (平均: 91.6, 評価: A)</span></span>
<span id="cb237-330"><a href="#cb237-330" aria-hidden="true" tabindex="-1"></a><span class="co">鈴木美咲 (平均: 88.2, 評価: B)</span></span>
<span id="cb237-331"><a href="#cb237-331" aria-hidden="true" tabindex="-1"></a><span class="co">田中太郎 (平均: 86.6, 評価: B)</span></span>
<span id="cb237-332"><a href="#cb237-332" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb237-333"><a href="#cb237-333" aria-hidden="true" tabindex="-1"></a><span class="co">4. 図書館システム</span></span>
<span id="cb237-334"><a href="#cb237-334" aria-hidden="true" tabindex="-1"></a><span class="co">図書館の蔵書数: 5冊</span></span>
<span id="cb237-335"><a href="#cb237-335" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb237-336"><a href="#cb237-336" aria-hidden="true" tabindex="-1"></a><span class="co">ID 1001 の学生が「プログラミング入門」を借りました</span></span>
<span id="cb237-337"><a href="#cb237-337" aria-hidden="true" tabindex="-1"></a><span class="co">ID 1001 の学生が「オペレーティングシステム」を借りました</span></span>
<span id="cb237-338"><a href="#cb237-338" aria-hidden="true" tabindex="-1"></a><span class="co">ID 1002 の学生が「データ構造とアルゴリズム」を借りました</span></span>
<span id="cb237-339"><a href="#cb237-339" aria-hidden="true" tabindex="-1"></a><span class="co">「プログラミング入門」は既に貸出中です</span></span>
<span id="cb237-340"><a href="#cb237-340" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb237-341"><a href="#cb237-341" aria-hidden="true" tabindex="-1"></a><span class="co">ID 1001 の学生が借りている本:</span></span>
<span id="cb237-342"><a href="#cb237-342" aria-hidden="true" tabindex="-1"></a><span class="co">- プログラミング入門 (山田太郎著, 2020年)</span></span>
<span id="cb237-343"><a href="#cb237-343" aria-hidden="true" tabindex="-1"></a><span class="co">- オペレーティングシステム (田中次郎著, 2021年)</span></span>
<span id="cb237-344"><a href="#cb237-344" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb237-345"><a href="#cb237-345" aria-hidden="true" tabindex="-1"></a><span class="co">ID 1002 の学生が借りている本:</span></span>
<span id="cb237-346"><a href="#cb237-346" aria-hidden="true" tabindex="-1"></a><span class="co">- データ構造とアルゴリズム (佐藤花子著, 2019年)</span></span>
<span id="cb237-347"><a href="#cb237-347" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb237-348"><a href="#cb237-348" aria-hidden="true" tabindex="-1"></a><span class="co">ID 1003 の学生が借りている本:</span></span>
<span id="cb237-349"><a href="#cb237-349" aria-hidden="true" tabindex="-1"></a><span class="co">  借りている本はありません</span></span>
<span id="cb237-350"><a href="#cb237-350" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb237-351"><a href="#cb237-351" aria-hidden="true" tabindex="-1"></a><span class="co">5. ポインタ演算による配列走査</span></span>
<span id="cb237-352"><a href="#cb237-352" aria-hidden="true" tabindex="-1"></a><span class="co">=== 貸出中の書籍一覧 ===</span></span>
<span id="cb237-353"><a href="#cb237-353" aria-hidden="true" tabindex="-1"></a><span class="co">「プログラミング入門」 → 学生ID: 1001</span></span>
<span id="cb237-354"><a href="#cb237-354" aria-hidden="true" tabindex="-1"></a><span class="co">「データ構造とアルゴリズム」 → 学生ID: 1002</span></span>
<span id="cb237-355"><a href="#cb237-355" aria-hidden="true" tabindex="-1"></a><span class="co">「オペレーティングシステム」 → 学生ID: 1001</span></span>
<span id="cb237-356"><a href="#cb237-356" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span></span></code></pre></div>
<blockquote>
<p>C99版は<a
href="struct_arrays_c99.c">こちら</a>を参照してください。</p>
</blockquote>
<h3 id="struct_basics.c">struct_basics.c</h3>
<div class="sourceCode" id="cb238"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb238-1"><a href="#cb238-1" aria-hidden="true" tabindex="-1"></a><span class="co">/*</span></span>
<span id="cb238-2"><a href="#cb238-2" aria-hidden="true" tabindex="-1"></a><span class="co"> * struct_basics.c - 構造体の基本操作</span></span>
<span id="cb238-3"><a href="#cb238-3" aria-hidden="true" tabindex="-1"></a><span class="co"> * </span></span>
<span id="cb238-4"><a href="#cb238-4" aria-hidden="true" tabindex="-1"></a><span class="co"> * このプログラムでは以下を学習します：</span></span>
<span id="cb238-5"><a href="#cb238-5" aria-hidden="true" tabindex="-1"></a><span class="co"> * - 構造体の定義方法</span></span>
<span id="cb238-6"><a href="#cb238-6" aria-hidden="true" tabindex="-1"></a><span class="co"> * - 構造体変数の宣言と初期化</span></span>
<span id="cb238-7"><a href="#cb238-7" aria-hidden="true" tabindex="-1"></a><span class="co"> * - 構造体メンバーへのアクセス</span></span>
<span id="cb238-8"><a href="#cb238-8" aria-hidden="true" tabindex="-1"></a><span class="co"> * - 構造体の関数への渡し方</span></span>
<span id="cb238-9"><a href="#cb238-9" aria-hidden="true" tabindex="-1"></a><span class="co"> */</span></span>
<span id="cb238-10"><a href="#cb238-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb238-11"><a href="#cb238-11" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb238-12"><a href="#cb238-12" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;string.h&gt;</span></span>
<span id="cb238-13"><a href="#cb238-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb238-14"><a href="#cb238-14" aria-hidden="true" tabindex="-1"></a><span class="co">/* 座標を表す構造体 */</span></span>
<span id="cb238-15"><a href="#cb238-15" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> Point <span class="op">{</span></span>
<span id="cb238-16"><a href="#cb238-16" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> x<span class="op">;</span></span>
<span id="cb238-17"><a href="#cb238-17" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> y<span class="op">;</span></span>
<span id="cb238-18"><a href="#cb238-18" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb238-19"><a href="#cb238-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb238-20"><a href="#cb238-20" aria-hidden="true" tabindex="-1"></a><span class="co">/* 学生情報を表す構造体 */</span></span>
<span id="cb238-21"><a href="#cb238-21" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> Student <span class="op">{</span></span>
<span id="cb238-22"><a href="#cb238-22" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> id<span class="op">;</span></span>
<span id="cb238-23"><a href="#cb238-23" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> name<span class="op">[</span><span class="dv">50</span><span class="op">];</span></span>
<span id="cb238-24"><a href="#cb238-24" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> age<span class="op">;</span></span>
<span id="cb238-25"><a href="#cb238-25" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span> gpa<span class="op">;</span></span>
<span id="cb238-26"><a href="#cb238-26" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb238-27"><a href="#cb238-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb238-28"><a href="#cb238-28" aria-hidden="true" tabindex="-1"></a><span class="co">/* 商品情報を表す構造体 */</span></span>
<span id="cb238-29"><a href="#cb238-29" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> Product <span class="op">{</span></span>
<span id="cb238-30"><a href="#cb238-30" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> code<span class="op">;</span></span>
<span id="cb238-31"><a href="#cb238-31" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> name<span class="op">[</span><span class="dv">100</span><span class="op">];</span></span>
<span id="cb238-32"><a href="#cb238-32" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span> price<span class="op">;</span></span>
<span id="cb238-33"><a href="#cb238-33" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> stock<span class="op">;</span></span>
<span id="cb238-34"><a href="#cb238-34" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb238-35"><a href="#cb238-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb238-36"><a href="#cb238-36" aria-hidden="true" tabindex="-1"></a><span class="co">/* 構造体を値渡しで受け取る関数 */</span></span>
<span id="cb238-37"><a href="#cb238-37" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> print_point_by_value<span class="op">(</span><span class="kw">struct</span> Point p<span class="op">)</span></span>
<span id="cb238-38"><a href="#cb238-38" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb238-39"><a href="#cb238-39" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;座標: (</span><span class="sc">%d</span><span class="st">, </span><span class="sc">%d</span><span class="st">)</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> p<span class="op">.</span>x<span class="op">,</span> p<span class="op">.</span>y<span class="op">);</span></span>
<span id="cb238-40"><a href="#cb238-40" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb238-41"><a href="#cb238-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb238-42"><a href="#cb238-42" aria-hidden="true" tabindex="-1"></a><span class="co">/* 構造体をポインタ渡しで受け取る関数 */</span></span>
<span id="cb238-43"><a href="#cb238-43" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> print_point_by_pointer<span class="op">(</span><span class="kw">struct</span> Point <span class="op">*</span>p<span class="op">)</span></span>
<span id="cb238-44"><a href="#cb238-44" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb238-45"><a href="#cb238-45" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>p <span class="op">!=</span> NULL<span class="op">)</span> <span class="op">{</span></span>
<span id="cb238-46"><a href="#cb238-46" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;座標: (</span><span class="sc">%d</span><span class="st">, </span><span class="sc">%d</span><span class="st">)</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> p<span class="op">-&gt;</span>x<span class="op">,</span> p<span class="op">-&gt;</span>y<span class="op">);</span></span>
<span id="cb238-47"><a href="#cb238-47" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb238-48"><a href="#cb238-48" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb238-49"><a href="#cb238-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb238-50"><a href="#cb238-50" aria-hidden="true" tabindex="-1"></a><span class="co">/* 学生情報を表示する関数 */</span></span>
<span id="cb238-51"><a href="#cb238-51" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> display_student<span class="op">(</span><span class="kw">struct</span> Student s<span class="op">)</span></span>
<span id="cb238-52"><a href="#cb238-52" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb238-53"><a href="#cb238-53" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== 学生情報 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb238-54"><a href="#cb238-54" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ID: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> s<span class="op">.</span>id<span class="op">);</span></span>
<span id="cb238-55"><a href="#cb238-55" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;名前: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> s<span class="op">.</span>name<span class="op">);</span></span>
<span id="cb238-56"><a href="#cb238-56" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;年齢: </span><span class="sc">%d</span><span class="st">歳</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> s<span class="op">.</span>age<span class="op">);</span></span>
<span id="cb238-57"><a href="#cb238-57" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;GPA: </span><span class="sc">%.2f\n</span><span class="st">&quot;</span><span class="op">,</span> s<span class="op">.</span>gpa<span class="op">);</span></span>
<span id="cb238-58"><a href="#cb238-58" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb238-59"><a href="#cb238-59" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb238-60"><a href="#cb238-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb238-61"><a href="#cb238-61" aria-hidden="true" tabindex="-1"></a><span class="co">/* 商品情報を更新する関数（ポインタ使用） */</span></span>
<span id="cb238-62"><a href="#cb238-62" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> update_stock<span class="op">(</span><span class="kw">struct</span> Product <span class="op">*</span>p<span class="op">,</span> <span class="dt">int</span> quantity<span class="op">)</span></span>
<span id="cb238-63"><a href="#cb238-63" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb238-64"><a href="#cb238-64" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>p <span class="op">!=</span> NULL<span class="op">)</span> <span class="op">{</span></span>
<span id="cb238-65"><a href="#cb238-65" aria-hidden="true" tabindex="-1"></a>        p<span class="op">-&gt;</span>stock <span class="op">+=</span> quantity<span class="op">;</span></span>
<span id="cb238-66"><a href="#cb238-66" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>quantity <span class="op">&gt;</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb238-67"><a href="#cb238-67" aria-hidden="true" tabindex="-1"></a>            printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%s</span><span class="st"> の在庫を </span><span class="sc">%d</span><span class="st"> 個追加しました。現在の在庫: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> </span>
<span id="cb238-68"><a href="#cb238-68" aria-hidden="true" tabindex="-1"></a>                   p<span class="op">-&gt;</span>name<span class="op">,</span> quantity<span class="op">,</span> p<span class="op">-&gt;</span>stock<span class="op">);</span></span>
<span id="cb238-69"><a href="#cb238-69" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb238-70"><a href="#cb238-70" aria-hidden="true" tabindex="-1"></a>            printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%s</span><span class="st"> の在庫を </span><span class="sc">%d</span><span class="st"> 個減らしました。現在の在庫: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> </span>
<span id="cb238-71"><a href="#cb238-71" aria-hidden="true" tabindex="-1"></a>                   p<span class="op">-&gt;</span>name<span class="op">,</span> <span class="op">-</span>quantity<span class="op">,</span> p<span class="op">-&gt;</span>stock<span class="op">);</span></span>
<span id="cb238-72"><a href="#cb238-72" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb238-73"><a href="#cb238-73" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb238-74"><a href="#cb238-74" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb238-75"><a href="#cb238-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb238-76"><a href="#cb238-76" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb238-77"><a href="#cb238-77" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb238-78"><a href="#cb238-78" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;===== 構造体の基本操作 =====</span><span class="sc">\n\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb238-79"><a href="#cb238-79" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb238-80"><a href="#cb238-80" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 1. 構造体の宣言と初期化 */</span></span>
<span id="cb238-81"><a href="#cb238-81" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;1. 構造体の宣言と初期化</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb238-82"><a href="#cb238-82" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb238-83"><a href="#cb238-83" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 方法1: 宣言後に個別に代入 */</span></span>
<span id="cb238-84"><a href="#cb238-84" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Point p1<span class="op">;</span></span>
<span id="cb238-85"><a href="#cb238-85" aria-hidden="true" tabindex="-1"></a>    p1<span class="op">.</span>x <span class="op">=</span> <span class="dv">10</span><span class="op">;</span></span>
<span id="cb238-86"><a href="#cb238-86" aria-hidden="true" tabindex="-1"></a>    p1<span class="op">.</span>y <span class="op">=</span> <span class="dv">20</span><span class="op">;</span></span>
<span id="cb238-87"><a href="#cb238-87" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb238-88"><a href="#cb238-88" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 方法2: 初期化リストを使用 */</span></span>
<span id="cb238-89"><a href="#cb238-89" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Point p2 <span class="op">=</span> <span class="op">{</span><span class="dv">30</span><span class="op">,</span> <span class="dv">40</span><span class="op">};</span></span>
<span id="cb238-90"><a href="#cb238-90" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb238-91"><a href="#cb238-91" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 方法3: 部分的な初期化（残りは0） */</span></span>
<span id="cb238-92"><a href="#cb238-92" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Point p3 <span class="op">=</span> <span class="op">{</span><span class="dv">50</span><span class="op">};</span>  <span class="co">/* y は 0 になる */</span></span>
<span id="cb238-93"><a href="#cb238-93" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb238-94"><a href="#cb238-94" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;p1: (</span><span class="sc">%d</span><span class="st">, </span><span class="sc">%d</span><span class="st">)</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> p1<span class="op">.</span>x<span class="op">,</span> p1<span class="op">.</span>y<span class="op">);</span></span>
<span id="cb238-95"><a href="#cb238-95" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;p2: (</span><span class="sc">%d</span><span class="st">, </span><span class="sc">%d</span><span class="st">)</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> p2<span class="op">.</span>x<span class="op">,</span> p2<span class="op">.</span>y<span class="op">);</span></span>
<span id="cb238-96"><a href="#cb238-96" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;p3: (</span><span class="sc">%d</span><span class="st">, </span><span class="sc">%d</span><span class="st">)</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> p3<span class="op">.</span>x<span class="op">,</span> p3<span class="op">.</span>y<span class="op">);</span></span>
<span id="cb238-97"><a href="#cb238-97" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb238-98"><a href="#cb238-98" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb238-99"><a href="#cb238-99" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 2. 構造体のコピー */</span></span>
<span id="cb238-100"><a href="#cb238-100" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;2. 構造体のコピー</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb238-101"><a href="#cb238-101" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Point p4 <span class="op">=</span> p1<span class="op">;</span>  <span class="co">/* 構造体全体のコピー */</span></span>
<span id="cb238-102"><a href="#cb238-102" aria-hidden="true" tabindex="-1"></a>    p4<span class="op">.</span>x <span class="op">=</span> <span class="dv">100</span><span class="op">;</span>  <span class="co">/* p4を変更してもp1は影響を受けない */</span></span>
<span id="cb238-103"><a href="#cb238-103" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb238-104"><a href="#cb238-104" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;p1（元）: (</span><span class="sc">%d</span><span class="st">, </span><span class="sc">%d</span><span class="st">)</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> p1<span class="op">.</span>x<span class="op">,</span> p1<span class="op">.</span>y<span class="op">);</span></span>
<span id="cb238-105"><a href="#cb238-105" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;p4（コピー後変更）: (</span><span class="sc">%d</span><span class="st">, </span><span class="sc">%d</span><span class="st">)</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> p4<span class="op">.</span>x<span class="op">,</span> p4<span class="op">.</span>y<span class="op">);</span></span>
<span id="cb238-106"><a href="#cb238-106" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb238-107"><a href="#cb238-107" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb238-108"><a href="#cb238-108" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 3. 構造体と関数 */</span></span>
<span id="cb238-109"><a href="#cb238-109" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;3. 構造体と関数</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb238-110"><a href="#cb238-110" aria-hidden="true" tabindex="-1"></a>    print_point_by_value<span class="op">(</span>p1<span class="op">);</span>     <span class="co">/* 値渡し */</span></span>
<span id="cb238-111"><a href="#cb238-111" aria-hidden="true" tabindex="-1"></a>    print_point_by_pointer<span class="op">(&amp;</span>p2<span class="op">);</span>  <span class="co">/* ポインタ渡し */</span></span>
<span id="cb238-112"><a href="#cb238-112" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb238-113"><a href="#cb238-113" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb238-114"><a href="#cb238-114" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 4. 文字列を含む構造体 */</span></span>
<span id="cb238-115"><a href="#cb238-115" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;4. 文字列を含む構造体</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb238-116"><a href="#cb238-116" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Student student1<span class="op">;</span></span>
<span id="cb238-117"><a href="#cb238-117" aria-hidden="true" tabindex="-1"></a>    student1<span class="op">.</span>id <span class="op">=</span> <span class="dv">1001</span><span class="op">;</span></span>
<span id="cb238-118"><a href="#cb238-118" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>student1<span class="op">.</span>name<span class="op">,</span> <span class="st">&quot;田中太郎&quot;</span><span class="op">);</span></span>
<span id="cb238-119"><a href="#cb238-119" aria-hidden="true" tabindex="-1"></a>    student1<span class="op">.</span>age <span class="op">=</span> <span class="dv">20</span><span class="op">;</span></span>
<span id="cb238-120"><a href="#cb238-120" aria-hidden="true" tabindex="-1"></a>    student1<span class="op">.</span>gpa <span class="op">=</span> <span class="fl">3.5</span><span class="op">;</span></span>
<span id="cb238-121"><a href="#cb238-121" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb238-122"><a href="#cb238-122" aria-hidden="true" tabindex="-1"></a>    display_student<span class="op">(</span>student1<span class="op">);</span></span>
<span id="cb238-123"><a href="#cb238-123" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb238-124"><a href="#cb238-124" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 5. 構造体の配列 */</span></span>
<span id="cb238-125"><a href="#cb238-125" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;5. 構造体の配列</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb238-126"><a href="#cb238-126" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Product products<span class="op">[</span><span class="dv">3</span><span class="op">]</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb238-127"><a href="#cb238-127" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span><span class="dv">101</span><span class="op">,</span> <span class="st">&quot;ノートPC&quot;</span><span class="op">,</span> <span class="fl">98000.0</span><span class="op">,</span> <span class="dv">5</span><span class="op">},</span></span>
<span id="cb238-128"><a href="#cb238-128" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span><span class="dv">102</span><span class="op">,</span> <span class="st">&quot;マウス&quot;</span><span class="op">,</span> <span class="fl">2980.0</span><span class="op">,</span> <span class="dv">20</span><span class="op">},</span></span>
<span id="cb238-129"><a href="#cb238-129" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span><span class="dv">103</span><span class="op">,</span> <span class="st">&quot;キーボード&quot;</span><span class="op">,</span> <span class="fl">4500.0</span><span class="op">,</span> <span class="dv">15</span><span class="op">}</span></span>
<span id="cb238-130"><a href="#cb238-130" aria-hidden="true" tabindex="-1"></a>    <span class="op">};</span></span>
<span id="cb238-131"><a href="#cb238-131" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb238-132"><a href="#cb238-132" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb238-133"><a href="#cb238-133" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== 商品リスト ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb238-134"><a href="#cb238-134" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">3</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb238-135"><a href="#cb238-135" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;商品コード: </span><span class="sc">%d</span><span class="st">, 名前: </span><span class="sc">%s</span><span class="st">, 価格: </span><span class="sc">%.0f</span><span class="st">円, 在庫: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span></span>
<span id="cb238-136"><a href="#cb238-136" aria-hidden="true" tabindex="-1"></a>               products<span class="op">[</span>i<span class="op">].</span>code<span class="op">,</span> products<span class="op">[</span>i<span class="op">].</span>name<span class="op">,</span> </span>
<span id="cb238-137"><a href="#cb238-137" aria-hidden="true" tabindex="-1"></a>               products<span class="op">[</span>i<span class="op">].</span>price<span class="op">,</span> products<span class="op">[</span>i<span class="op">].</span>stock<span class="op">);</span></span>
<span id="cb238-138"><a href="#cb238-138" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb238-139"><a href="#cb238-139" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb238-140"><a href="#cb238-140" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb238-141"><a href="#cb238-141" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 6. 構造体ポインタの使用 */</span></span>
<span id="cb238-142"><a href="#cb238-142" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;6. 構造体ポインタの使用</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb238-143"><a href="#cb238-143" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Product <span class="op">*</span>prod_ptr <span class="op">=</span> <span class="op">&amp;</span>products<span class="op">[</span><span class="dv">0</span><span class="op">];</span></span>
<span id="cb238-144"><a href="#cb238-144" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb238-145"><a href="#cb238-145" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* アロー演算子でメンバーアクセス */</span></span>
<span id="cb238-146"><a href="#cb238-146" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ポインタ経由でアクセス: </span><span class="sc">%s</span><span class="st"> (</span><span class="sc">%.0f</span><span class="st">円)</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> </span>
<span id="cb238-147"><a href="#cb238-147" aria-hidden="true" tabindex="-1"></a>           prod_ptr<span class="op">-&gt;</span>name<span class="op">,</span> prod_ptr<span class="op">-&gt;</span>price<span class="op">);</span></span>
<span id="cb238-148"><a href="#cb238-148" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb238-149"><a href="#cb238-149" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 在庫の更新 */</span></span>
<span id="cb238-150"><a href="#cb238-150" aria-hidden="true" tabindex="-1"></a>    update_stock<span class="op">(</span>prod_ptr<span class="op">,</span> <span class="dv">3</span><span class="op">);</span></span>
<span id="cb238-151"><a href="#cb238-151" aria-hidden="true" tabindex="-1"></a>    update_stock<span class="op">(&amp;</span>products<span class="op">[</span><span class="dv">1</span><span class="op">],</span> <span class="op">-</span><span class="dv">5</span><span class="op">);</span></span>
<span id="cb238-152"><a href="#cb238-152" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb238-153"><a href="#cb238-153" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb238-154"><a href="#cb238-154" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 7. 構造体のサイズ */</span></span>
<span id="cb238-155"><a href="#cb238-155" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;7. 構造体のサイズ</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb238-156"><a href="#cb238-156" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;sizeof(struct Point): </span><span class="sc">%lu</span><span class="st"> バイト</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="kw">sizeof</span><span class="op">(</span><span class="kw">struct</span> Point<span class="op">));</span></span>
<span id="cb238-157"><a href="#cb238-157" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;sizeof(struct Student): </span><span class="sc">%lu</span><span class="st"> バイト</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="kw">sizeof</span><span class="op">(</span><span class="kw">struct</span> Student<span class="op">));</span></span>
<span id="cb238-158"><a href="#cb238-158" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;sizeof(struct Product): </span><span class="sc">%lu</span><span class="st"> バイト</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="kw">sizeof</span><span class="op">(</span><span class="kw">struct</span> Product<span class="op">));</span></span>
<span id="cb238-159"><a href="#cb238-159" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb238-160"><a href="#cb238-160" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb238-161"><a href="#cb238-161" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 8. ネストした構造体 */</span></span>
<span id="cb238-162"><a href="#cb238-162" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;8. ネストした構造体</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb238-163"><a href="#cb238-163" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Rectangle <span class="op">{</span></span>
<span id="cb238-164"><a href="#cb238-164" aria-hidden="true" tabindex="-1"></a>        <span class="kw">struct</span> Point top_left<span class="op">;</span></span>
<span id="cb238-165"><a href="#cb238-165" aria-hidden="true" tabindex="-1"></a>        <span class="kw">struct</span> Point bottom_right<span class="op">;</span></span>
<span id="cb238-166"><a href="#cb238-166" aria-hidden="true" tabindex="-1"></a>    <span class="op">};</span></span>
<span id="cb238-167"><a href="#cb238-167" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb238-168"><a href="#cb238-168" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Rectangle rect <span class="op">=</span> <span class="op">{{</span><span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">},</span> <span class="op">{</span><span class="dv">100</span><span class="op">,</span> <span class="dv">50</span><span class="op">}};</span></span>
<span id="cb238-169"><a href="#cb238-169" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;矩形: 左上(</span><span class="sc">%d</span><span class="st">, </span><span class="sc">%d</span><span class="st">) - 右下(</span><span class="sc">%d</span><span class="st">, </span><span class="sc">%d</span><span class="st">)</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span></span>
<span id="cb238-170"><a href="#cb238-170" aria-hidden="true" tabindex="-1"></a>           rect<span class="op">.</span>top_left<span class="op">.</span>x<span class="op">,</span> rect<span class="op">.</span>top_left<span class="op">.</span>y<span class="op">,</span></span>
<span id="cb238-171"><a href="#cb238-171" aria-hidden="true" tabindex="-1"></a>           rect<span class="op">.</span>bottom_right<span class="op">.</span>x<span class="op">,</span> rect<span class="op">.</span>bottom_right<span class="op">.</span>y<span class="op">);</span></span>
<span id="cb238-172"><a href="#cb238-172" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb238-173"><a href="#cb238-173" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 矩形の幅と高さを計算 */</span></span>
<span id="cb238-174"><a href="#cb238-174" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> width <span class="op">=</span> rect<span class="op">.</span>bottom_right<span class="op">.</span>x <span class="op">-</span> rect<span class="op">.</span>top_left<span class="op">.</span>x<span class="op">;</span></span>
<span id="cb238-175"><a href="#cb238-175" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> height <span class="op">=</span> rect<span class="op">.</span>bottom_right<span class="op">.</span>y <span class="op">-</span> rect<span class="op">.</span>top_left<span class="op">.</span>y<span class="op">;</span></span>
<span id="cb238-176"><a href="#cb238-176" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;幅: </span><span class="sc">%d</span><span class="st">, 高さ: </span><span class="sc">%d</span><span class="st">, 面積: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> width<span class="op">,</span> height<span class="op">,</span> width <span class="op">*</span> height<span class="op">);</span></span>
<span id="cb238-177"><a href="#cb238-177" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb238-178"><a href="#cb238-178" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb238-179"><a href="#cb238-179" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb238-180"><a href="#cb238-180" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb238-181"><a href="#cb238-181" aria-hidden="true" tabindex="-1"></a><span class="co">/*</span></span>
<span id="cb238-182"><a href="#cb238-182" aria-hidden="true" tabindex="-1"></a><span class="co">実行結果例:</span></span>
<span id="cb238-183"><a href="#cb238-183" aria-hidden="true" tabindex="-1"></a><span class="co">===== 構造体の基本操作 =====</span></span>
<span id="cb238-184"><a href="#cb238-184" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb238-185"><a href="#cb238-185" aria-hidden="true" tabindex="-1"></a><span class="co">1. 構造体の宣言と初期化</span></span>
<span id="cb238-186"><a href="#cb238-186" aria-hidden="true" tabindex="-1"></a><span class="co">p1: (10, 20)</span></span>
<span id="cb238-187"><a href="#cb238-187" aria-hidden="true" tabindex="-1"></a><span class="co">p2: (30, 40)</span></span>
<span id="cb238-188"><a href="#cb238-188" aria-hidden="true" tabindex="-1"></a><span class="co">p3: (50, 0)</span></span>
<span id="cb238-189"><a href="#cb238-189" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb238-190"><a href="#cb238-190" aria-hidden="true" tabindex="-1"></a><span class="co">2. 構造体のコピー</span></span>
<span id="cb238-191"><a href="#cb238-191" aria-hidden="true" tabindex="-1"></a><span class="co">p1（元）: (10, 20)</span></span>
<span id="cb238-192"><a href="#cb238-192" aria-hidden="true" tabindex="-1"></a><span class="co">p4（コピー後変更）: (100, 20)</span></span>
<span id="cb238-193"><a href="#cb238-193" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb238-194"><a href="#cb238-194" aria-hidden="true" tabindex="-1"></a><span class="co">3. 構造体と関数</span></span>
<span id="cb238-195"><a href="#cb238-195" aria-hidden="true" tabindex="-1"></a><span class="co">座標: (10, 20)</span></span>
<span id="cb238-196"><a href="#cb238-196" aria-hidden="true" tabindex="-1"></a><span class="co">座標: (30, 40)</span></span>
<span id="cb238-197"><a href="#cb238-197" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb238-198"><a href="#cb238-198" aria-hidden="true" tabindex="-1"></a><span class="co">4. 文字列を含む構造体</span></span>
<span id="cb238-199"><a href="#cb238-199" aria-hidden="true" tabindex="-1"></a><span class="co">=== 学生情報 ===</span></span>
<span id="cb238-200"><a href="#cb238-200" aria-hidden="true" tabindex="-1"></a><span class="co">ID: 1001</span></span>
<span id="cb238-201"><a href="#cb238-201" aria-hidden="true" tabindex="-1"></a><span class="co">名前: 田中太郎</span></span>
<span id="cb238-202"><a href="#cb238-202" aria-hidden="true" tabindex="-1"></a><span class="co">年齢: 20歳</span></span>
<span id="cb238-203"><a href="#cb238-203" aria-hidden="true" tabindex="-1"></a><span class="co">GPA: 3.50</span></span>
<span id="cb238-204"><a href="#cb238-204" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb238-205"><a href="#cb238-205" aria-hidden="true" tabindex="-1"></a><span class="co">5. 構造体の配列</span></span>
<span id="cb238-206"><a href="#cb238-206" aria-hidden="true" tabindex="-1"></a><span class="co">=== 商品リスト ===</span></span>
<span id="cb238-207"><a href="#cb238-207" aria-hidden="true" tabindex="-1"></a><span class="co">商品コード: 101, 名前: ノートPC, 価格: 98000円, 在庫: 5</span></span>
<span id="cb238-208"><a href="#cb238-208" aria-hidden="true" tabindex="-1"></a><span class="co">商品コード: 102, 名前: マウス, 価格: 2980円, 在庫: 20</span></span>
<span id="cb238-209"><a href="#cb238-209" aria-hidden="true" tabindex="-1"></a><span class="co">商品コード: 103, 名前: キーボード, 価格: 4500円, 在庫: 15</span></span>
<span id="cb238-210"><a href="#cb238-210" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb238-211"><a href="#cb238-211" aria-hidden="true" tabindex="-1"></a><span class="co">6. 構造体ポインタの使用</span></span>
<span id="cb238-212"><a href="#cb238-212" aria-hidden="true" tabindex="-1"></a><span class="co">ポインタ経由でアクセス: ノートPC (98000円)</span></span>
<span id="cb238-213"><a href="#cb238-213" aria-hidden="true" tabindex="-1"></a><span class="co">ノートPC の在庫を 3 個追加しました。現在の在庫: 8</span></span>
<span id="cb238-214"><a href="#cb238-214" aria-hidden="true" tabindex="-1"></a><span class="co">マウス の在庫を 5 個減らしました。現在の在庫: 15</span></span>
<span id="cb238-215"><a href="#cb238-215" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb238-216"><a href="#cb238-216" aria-hidden="true" tabindex="-1"></a><span class="co">7. 構造体のサイズ</span></span>
<span id="cb238-217"><a href="#cb238-217" aria-hidden="true" tabindex="-1"></a><span class="co">sizeof(struct Point): 8 バイト</span></span>
<span id="cb238-218"><a href="#cb238-218" aria-hidden="true" tabindex="-1"></a><span class="co">sizeof(struct Student): 72 バイト</span></span>
<span id="cb238-219"><a href="#cb238-219" aria-hidden="true" tabindex="-1"></a><span class="co">sizeof(struct Product): 120 バイト</span></span>
<span id="cb238-220"><a href="#cb238-220" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb238-221"><a href="#cb238-221" aria-hidden="true" tabindex="-1"></a><span class="co">8. ネストした構造体</span></span>
<span id="cb238-222"><a href="#cb238-222" aria-hidden="true" tabindex="-1"></a><span class="co">矩形: 左上(0, 0) - 右下(100, 50)</span></span>
<span id="cb238-223"><a href="#cb238-223" aria-hidden="true" tabindex="-1"></a><span class="co">幅: 100, 高さ: 50, 面積: 5000</span></span>
<span id="cb238-224"><a href="#cb238-224" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span></span></code></pre></div>
<blockquote>
<p>C99版は<a
href="struct_basics_c99.c">こちら</a>を参照してください。</p>
</blockquote>
<h3 id="struct_pointers.c">struct_pointers.c</h3>
<div class="sourceCode" id="cb239"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb239-1"><a href="#cb239-1" aria-hidden="true" tabindex="-1"></a><span class="co">/*</span></span>
<span id="cb239-2"><a href="#cb239-2" aria-hidden="true" tabindex="-1"></a><span class="co"> * struct_pointers.c - 構造体ポインタと-&gt;演算子</span></span>
<span id="cb239-3"><a href="#cb239-3" aria-hidden="true" tabindex="-1"></a><span class="co"> * </span></span>
<span id="cb239-4"><a href="#cb239-4" aria-hidden="true" tabindex="-1"></a><span class="co"> * このプログラムでは以下を学習します：</span></span>
<span id="cb239-5"><a href="#cb239-5" aria-hidden="true" tabindex="-1"></a><span class="co"> * - 構造体ポインタの宣言と使用</span></span>
<span id="cb239-6"><a href="#cb239-6" aria-hidden="true" tabindex="-1"></a><span class="co"> * - アロー演算子（-&gt;）の使い方</span></span>
<span id="cb239-7"><a href="#cb239-7" aria-hidden="true" tabindex="-1"></a><span class="co"> * - 構造体ポインタと関数</span></span>
<span id="cb239-8"><a href="#cb239-8" aria-hidden="true" tabindex="-1"></a><span class="co"> * - 効率的なデータ処理</span></span>
<span id="cb239-9"><a href="#cb239-9" aria-hidden="true" tabindex="-1"></a><span class="co"> */</span></span>
<span id="cb239-10"><a href="#cb239-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-11"><a href="#cb239-11" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb239-12"><a href="#cb239-12" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;string.h&gt;</span></span>
<span id="cb239-13"><a href="#cb239-13" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdlib.h&gt;</span></span>
<span id="cb239-14"><a href="#cb239-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-15"><a href="#cb239-15" aria-hidden="true" tabindex="-1"></a><span class="co">/* 従業員情報を表す構造体 */</span></span>
<span id="cb239-16"><a href="#cb239-16" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> Employee <span class="op">{</span></span>
<span id="cb239-17"><a href="#cb239-17" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> id<span class="op">;</span></span>
<span id="cb239-18"><a href="#cb239-18" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> name<span class="op">[</span><span class="dv">50</span><span class="op">];</span></span>
<span id="cb239-19"><a href="#cb239-19" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> department<span class="op">[</span><span class="dv">30</span><span class="op">];</span></span>
<span id="cb239-20"><a href="#cb239-20" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span> salary<span class="op">;</span></span>
<span id="cb239-21"><a href="#cb239-21" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> years_of_service<span class="op">;</span></span>
<span id="cb239-22"><a href="#cb239-22" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb239-23"><a href="#cb239-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-24"><a href="#cb239-24" aria-hidden="true" tabindex="-1"></a><span class="co">/* 日付を表す構造体 */</span></span>
<span id="cb239-25"><a href="#cb239-25" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> Date <span class="op">{</span></span>
<span id="cb239-26"><a href="#cb239-26" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> year<span class="op">;</span></span>
<span id="cb239-27"><a href="#cb239-27" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> month<span class="op">;</span></span>
<span id="cb239-28"><a href="#cb239-28" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> day<span class="op">;</span></span>
<span id="cb239-29"><a href="#cb239-29" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb239-30"><a href="#cb239-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-31"><a href="#cb239-31" aria-hidden="true" tabindex="-1"></a><span class="co">/* プロジェクト情報を表す構造体 */</span></span>
<span id="cb239-32"><a href="#cb239-32" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> Project <span class="op">{</span></span>
<span id="cb239-33"><a href="#cb239-33" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> id<span class="op">;</span></span>
<span id="cb239-34"><a href="#cb239-34" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> name<span class="op">[</span><span class="dv">100</span><span class="op">];</span></span>
<span id="cb239-35"><a href="#cb239-35" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Date start_date<span class="op">;</span></span>
<span id="cb239-36"><a href="#cb239-36" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Date end_date<span class="op">;</span></span>
<span id="cb239-37"><a href="#cb239-37" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Employee <span class="op">*</span>manager<span class="op">;</span>  <span class="co">/* 管理者へのポインタ */</span></span>
<span id="cb239-38"><a href="#cb239-38" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span> budget<span class="op">;</span></span>
<span id="cb239-39"><a href="#cb239-39" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb239-40"><a href="#cb239-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-41"><a href="#cb239-41" aria-hidden="true" tabindex="-1"></a><span class="co">/* 従業員情報を表示する関数 */</span></span>
<span id="cb239-42"><a href="#cb239-42" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> print_employee<span class="op">(</span><span class="kw">struct</span> Employee <span class="op">*</span>emp<span class="op">)</span></span>
<span id="cb239-43"><a href="#cb239-43" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb239-44"><a href="#cb239-44" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>emp <span class="op">==</span> NULL<span class="op">)</span> <span class="op">{</span></span>
<span id="cb239-45"><a href="#cb239-45" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;エラー: 無効な従業員データ</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb239-46"><a href="#cb239-46" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span><span class="op">;</span></span>
<span id="cb239-47"><a href="#cb239-47" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb239-48"><a href="#cb239-48" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb239-49"><a href="#cb239-49" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== 従業員情報 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb239-50"><a href="#cb239-50" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ID: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> emp<span class="op">-&gt;</span>id<span class="op">);</span></span>
<span id="cb239-51"><a href="#cb239-51" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;名前: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> emp<span class="op">-&gt;</span>name<span class="op">);</span></span>
<span id="cb239-52"><a href="#cb239-52" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;部署: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> emp<span class="op">-&gt;</span>department<span class="op">);</span></span>
<span id="cb239-53"><a href="#cb239-53" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;給与: </span><span class="sc">%.0f</span><span class="st">円</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> emp<span class="op">-&gt;</span>salary<span class="op">);</span></span>
<span id="cb239-54"><a href="#cb239-54" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;勤続年数: </span><span class="sc">%d</span><span class="st">年</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> emp<span class="op">-&gt;</span>years_of_service<span class="op">);</span></span>
<span id="cb239-55"><a href="#cb239-55" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb239-56"><a href="#cb239-56" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb239-57"><a href="#cb239-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-58"><a href="#cb239-58" aria-hidden="true" tabindex="-1"></a><span class="co">/* 給与を更新する関数 */</span></span>
<span id="cb239-59"><a href="#cb239-59" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> update_salary<span class="op">(</span><span class="kw">struct</span> Employee <span class="op">*</span>emp<span class="op">,</span> <span class="dt">double</span> percentage<span class="op">)</span></span>
<span id="cb239-60"><a href="#cb239-60" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb239-61"><a href="#cb239-61" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>emp <span class="op">==</span> NULL <span class="op">||</span> percentage <span class="op">&lt;</span> <span class="op">-</span><span class="dv">100</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb239-62"><a href="#cb239-62" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;エラー: 無効なパラメータ</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb239-63"><a href="#cb239-63" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span><span class="op">;</span></span>
<span id="cb239-64"><a href="#cb239-64" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb239-65"><a href="#cb239-65" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb239-66"><a href="#cb239-66" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span> old_salary <span class="op">=</span> emp<span class="op">-&gt;</span>salary<span class="op">;</span></span>
<span id="cb239-67"><a href="#cb239-67" aria-hidden="true" tabindex="-1"></a>    emp<span class="op">-&gt;</span>salary <span class="op">=</span> old_salary <span class="op">*</span> <span class="op">(</span><span class="dv">1</span> <span class="op">+</span> percentage <span class="op">/</span> <span class="fl">100.0</span><span class="op">);</span></span>
<span id="cb239-68"><a href="#cb239-68" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb239-69"><a href="#cb239-69" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%s</span><span class="st"> の給与を更新しました</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> emp<span class="op">-&gt;</span>name<span class="op">);</span></span>
<span id="cb239-70"><a href="#cb239-70" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;変更前: </span><span class="sc">%.0f</span><span class="st">円 → 変更後: </span><span class="sc">%.0f</span><span class="st">円 (</span><span class="sc">%.1f%%</span><span class="st">)</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> </span>
<span id="cb239-71"><a href="#cb239-71" aria-hidden="true" tabindex="-1"></a>           old_salary<span class="op">,</span> emp<span class="op">-&gt;</span>salary<span class="op">,</span> percentage<span class="op">);</span></span>
<span id="cb239-72"><a href="#cb239-72" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb239-73"><a href="#cb239-73" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-74"><a href="#cb239-74" aria-hidden="true" tabindex="-1"></a><span class="co">/* 最高給与の従業員を見つける関数 */</span></span>
<span id="cb239-75"><a href="#cb239-75" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> Employee<span class="op">*</span> find_highest_paid<span class="op">(</span><span class="kw">struct</span> Employee employees<span class="op">[],</span> <span class="dt">int</span> count<span class="op">)</span></span>
<span id="cb239-76"><a href="#cb239-76" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb239-77"><a href="#cb239-77" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>employees <span class="op">==</span> NULL <span class="op">||</span> count <span class="op">&lt;=</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb239-78"><a href="#cb239-78" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> NULL<span class="op">;</span></span>
<span id="cb239-79"><a href="#cb239-79" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb239-80"><a href="#cb239-80" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb239-81"><a href="#cb239-81" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Employee <span class="op">*</span>highest <span class="op">=</span> <span class="op">&amp;</span>employees<span class="op">[</span><span class="dv">0</span><span class="op">];</span></span>
<span id="cb239-82"><a href="#cb239-82" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb239-83"><a href="#cb239-83" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb239-84"><a href="#cb239-84" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&lt;</span> count<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb239-85"><a href="#cb239-85" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>employees<span class="op">[</span>i<span class="op">].</span>salary <span class="op">&gt;</span> highest<span class="op">-&gt;</span>salary<span class="op">)</span> <span class="op">{</span></span>
<span id="cb239-86"><a href="#cb239-86" aria-hidden="true" tabindex="-1"></a>            highest <span class="op">=</span> <span class="op">&amp;</span>employees<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb239-87"><a href="#cb239-87" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb239-88"><a href="#cb239-88" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb239-89"><a href="#cb239-89" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb239-90"><a href="#cb239-90" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> highest<span class="op">;</span></span>
<span id="cb239-91"><a href="#cb239-91" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb239-92"><a href="#cb239-92" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-93"><a href="#cb239-93" aria-hidden="true" tabindex="-1"></a><span class="co">/* プロジェクト情報を表示する関数 */</span></span>
<span id="cb239-94"><a href="#cb239-94" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> print_project<span class="op">(</span><span class="kw">struct</span> Project <span class="op">*</span>proj<span class="op">)</span></span>
<span id="cb239-95"><a href="#cb239-95" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb239-96"><a href="#cb239-96" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>proj <span class="op">==</span> NULL<span class="op">)</span> <span class="op">{</span></span>
<span id="cb239-97"><a href="#cb239-97" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;エラー: 無効なプロジェクトデータ</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb239-98"><a href="#cb239-98" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span><span class="op">;</span></span>
<span id="cb239-99"><a href="#cb239-99" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb239-100"><a href="#cb239-100" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb239-101"><a href="#cb239-101" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== プロジェクト情報 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb239-102"><a href="#cb239-102" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ID: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> proj<span class="op">-&gt;</span>id<span class="op">);</span></span>
<span id="cb239-103"><a href="#cb239-103" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;プロジェクト名: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> proj<span class="op">-&gt;</span>name<span class="op">);</span></span>
<span id="cb239-104"><a href="#cb239-104" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;開始日: </span><span class="sc">%d</span><span class="st">年</span><span class="sc">%d</span><span class="st">月</span><span class="sc">%d</span><span class="st">日</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> </span>
<span id="cb239-105"><a href="#cb239-105" aria-hidden="true" tabindex="-1"></a>           proj<span class="op">-&gt;</span>start_date<span class="op">.</span>year<span class="op">,</span> proj<span class="op">-&gt;</span>start_date<span class="op">.</span>month<span class="op">,</span> proj<span class="op">-&gt;</span>start_date<span class="op">.</span>day<span class="op">);</span></span>
<span id="cb239-106"><a href="#cb239-106" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;終了日: </span><span class="sc">%d</span><span class="st">年</span><span class="sc">%d</span><span class="st">月</span><span class="sc">%d</span><span class="st">日</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> </span>
<span id="cb239-107"><a href="#cb239-107" aria-hidden="true" tabindex="-1"></a>           proj<span class="op">-&gt;</span>end_date<span class="op">.</span>year<span class="op">,</span> proj<span class="op">-&gt;</span>end_date<span class="op">.</span>month<span class="op">,</span> proj<span class="op">-&gt;</span>end_date<span class="op">.</span>day<span class="op">);</span></span>
<span id="cb239-108"><a href="#cb239-108" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;予算: </span><span class="sc">%.0f</span><span class="st">円</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> proj<span class="op">-&gt;</span>budget<span class="op">);</span></span>
<span id="cb239-109"><a href="#cb239-109" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb239-110"><a href="#cb239-110" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>proj<span class="op">-&gt;</span>manager <span class="op">!=</span> NULL<span class="op">)</span> <span class="op">{</span></span>
<span id="cb239-111"><a href="#cb239-111" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;管理者: </span><span class="sc">%s</span><span class="st"> (</span><span class="sc">%s</span><span class="st">)</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> </span>
<span id="cb239-112"><a href="#cb239-112" aria-hidden="true" tabindex="-1"></a>               proj<span class="op">-&gt;</span>manager<span class="op">-&gt;</span>name<span class="op">,</span> proj<span class="op">-&gt;</span>manager<span class="op">-&gt;</span>department<span class="op">);</span></span>
<span id="cb239-113"><a href="#cb239-113" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb239-114"><a href="#cb239-114" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;管理者: 未定</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb239-115"><a href="#cb239-115" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb239-116"><a href="#cb239-116" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb239-117"><a href="#cb239-117" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb239-118"><a href="#cb239-118" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-119"><a href="#cb239-119" aria-hidden="true" tabindex="-1"></a><span class="co">/* 部署別の統計を計算する関数 */</span></span>
<span id="cb239-120"><a href="#cb239-120" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> calculate_department_stats<span class="op">(</span><span class="kw">struct</span> Employee employees<span class="op">[],</span> <span class="dt">int</span> count<span class="op">,</span> </span>
<span id="cb239-121"><a href="#cb239-121" aria-hidden="true" tabindex="-1"></a>                              <span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>department<span class="op">)</span></span>
<span id="cb239-122"><a href="#cb239-122" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb239-123"><a href="#cb239-123" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> dept_count <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb239-124"><a href="#cb239-124" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span> total_salary <span class="op">=</span> <span class="fl">0.0</span><span class="op">;</span></span>
<span id="cb239-125"><a href="#cb239-125" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> total_years <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb239-126"><a href="#cb239-126" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb239-127"><a href="#cb239-127" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb239-128"><a href="#cb239-128" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> count<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb239-129"><a href="#cb239-129" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>strcmp<span class="op">(</span>employees<span class="op">[</span>i<span class="op">].</span>department<span class="op">,</span> department<span class="op">)</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb239-130"><a href="#cb239-130" aria-hidden="true" tabindex="-1"></a>            dept_count<span class="op">++;</span></span>
<span id="cb239-131"><a href="#cb239-131" aria-hidden="true" tabindex="-1"></a>            total_salary <span class="op">+=</span> employees<span class="op">[</span>i<span class="op">].</span>salary<span class="op">;</span></span>
<span id="cb239-132"><a href="#cb239-132" aria-hidden="true" tabindex="-1"></a>            total_years <span class="op">+=</span> employees<span class="op">[</span>i<span class="op">].</span>years_of_service<span class="op">;</span></span>
<span id="cb239-133"><a href="#cb239-133" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb239-134"><a href="#cb239-134" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb239-135"><a href="#cb239-135" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb239-136"><a href="#cb239-136" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>dept_count <span class="op">&gt;</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb239-137"><a href="#cb239-137" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;=== </span><span class="sc">%s</span><span class="st"> の統計 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> department<span class="op">);</span></span>
<span id="cb239-138"><a href="#cb239-138" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;人数: </span><span class="sc">%d</span><span class="st">名</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> dept_count<span class="op">);</span></span>
<span id="cb239-139"><a href="#cb239-139" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;平均給与: </span><span class="sc">%.0f</span><span class="st">円</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> total_salary <span class="op">/</span> dept_count<span class="op">);</span></span>
<span id="cb239-140"><a href="#cb239-140" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;平均勤続年数: </span><span class="sc">%.1f</span><span class="st">年</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(</span><span class="dt">double</span><span class="op">)</span>total_years <span class="op">/</span> dept_count<span class="op">);</span></span>
<span id="cb239-141"><a href="#cb239-141" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb239-142"><a href="#cb239-142" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb239-143"><a href="#cb239-143" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%s</span><span class="st"> に該当する従業員はいません</span><span class="sc">\n\n</span><span class="st">&quot;</span><span class="op">,</span> department<span class="op">);</span></span>
<span id="cb239-144"><a href="#cb239-144" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb239-145"><a href="#cb239-145" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb239-146"><a href="#cb239-146" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-147"><a href="#cb239-147" aria-hidden="true" tabindex="-1"></a><span class="co">/* 構造体のスワップ（ポインタのみ交換） */</span></span>
<span id="cb239-148"><a href="#cb239-148" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> swap_employees<span class="op">(</span><span class="kw">struct</span> Employee <span class="op">**</span>emp1<span class="op">,</span> <span class="kw">struct</span> Employee <span class="op">**</span>emp2<span class="op">)</span></span>
<span id="cb239-149"><a href="#cb239-149" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb239-150"><a href="#cb239-150" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Employee <span class="op">*</span>temp <span class="op">=</span> <span class="op">*</span>emp1<span class="op">;</span></span>
<span id="cb239-151"><a href="#cb239-151" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>emp1 <span class="op">=</span> <span class="op">*</span>emp2<span class="op">;</span></span>
<span id="cb239-152"><a href="#cb239-152" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>emp2 <span class="op">=</span> temp<span class="op">;</span></span>
<span id="cb239-153"><a href="#cb239-153" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb239-154"><a href="#cb239-154" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-155"><a href="#cb239-155" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb239-156"><a href="#cb239-156" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb239-157"><a href="#cb239-157" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;===== 構造体ポインタと-&gt;演算子 =====</span><span class="sc">\n\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb239-158"><a href="#cb239-158" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb239-159"><a href="#cb239-159" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 1. 構造体ポインタの基本 */</span></span>
<span id="cb239-160"><a href="#cb239-160" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;1. 構造体ポインタの基本</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb239-161"><a href="#cb239-161" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb239-162"><a href="#cb239-162" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Employee emp1 <span class="op">=</span> <span class="op">{</span></span>
<span id="cb239-163"><a href="#cb239-163" aria-hidden="true" tabindex="-1"></a>        <span class="dv">1001</span><span class="op">,</span> <span class="st">&quot;田中太郎&quot;</span><span class="op">,</span> <span class="st">&quot;開発部&quot;</span><span class="op">,</span> <span class="fl">350000.0</span><span class="op">,</span> <span class="dv">5</span></span>
<span id="cb239-164"><a href="#cb239-164" aria-hidden="true" tabindex="-1"></a>    <span class="op">};</span></span>
<span id="cb239-165"><a href="#cb239-165" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb239-166"><a href="#cb239-166" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Employee <span class="op">*</span>emp_ptr <span class="op">=</span> <span class="op">&amp;</span>emp1<span class="op">;</span></span>
<span id="cb239-167"><a href="#cb239-167" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb239-168"><a href="#cb239-168" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* ドット演算子とアロー演算子の比較 */</span></span>
<span id="cb239-169"><a href="#cb239-169" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ドット演算子: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> emp1<span class="op">.</span>name<span class="op">);</span></span>
<span id="cb239-170"><a href="#cb239-170" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;アロー演算子: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> emp_ptr<span class="op">-&gt;</span>name<span class="op">);</span></span>
<span id="cb239-171"><a href="#cb239-171" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;間接参照とドット: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(*</span>emp_ptr<span class="op">).</span>name<span class="op">);</span></span>
<span id="cb239-172"><a href="#cb239-172" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb239-173"><a href="#cb239-173" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb239-174"><a href="#cb239-174" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 2. ポインタを使った関数呼び出し */</span></span>
<span id="cb239-175"><a href="#cb239-175" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;2. ポインタを使った関数呼び出し</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb239-176"><a href="#cb239-176" aria-hidden="true" tabindex="-1"></a>    print_employee<span class="op">(</span>emp_ptr<span class="op">);</span></span>
<span id="cb239-177"><a href="#cb239-177" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb239-178"><a href="#cb239-178" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 3. ポインタを通じた構造体の更新 */</span></span>
<span id="cb239-179"><a href="#cb239-179" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;3. ポインタを通じた構造体の更新</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb239-180"><a href="#cb239-180" aria-hidden="true" tabindex="-1"></a>    update_salary<span class="op">(</span>emp_ptr<span class="op">,</span> <span class="fl">10.0</span><span class="op">);</span>  <span class="co">/* 10%昇給 */</span></span>
<span id="cb239-181"><a href="#cb239-181" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb239-182"><a href="#cb239-182" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb239-183"><a href="#cb239-183" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 4. 構造体配列とポインタ */</span></span>
<span id="cb239-184"><a href="#cb239-184" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;4. 構造体配列とポインタ</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb239-185"><a href="#cb239-185" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb239-186"><a href="#cb239-186" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Employee employees<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb239-187"><a href="#cb239-187" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span><span class="dv">2001</span><span class="op">,</span> <span class="st">&quot;佐藤花子&quot;</span><span class="op">,</span> <span class="st">&quot;営業部&quot;</span><span class="op">,</span> <span class="fl">300000.0</span><span class="op">,</span> <span class="dv">3</span><span class="op">},</span></span>
<span id="cb239-188"><a href="#cb239-188" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span><span class="dv">2002</span><span class="op">,</span> <span class="st">&quot;山田次郎&quot;</span><span class="op">,</span> <span class="st">&quot;開発部&quot;</span><span class="op">,</span> <span class="fl">400000.0</span><span class="op">,</span> <span class="dv">7</span><span class="op">},</span></span>
<span id="cb239-189"><a href="#cb239-189" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span><span class="dv">2003</span><span class="op">,</span> <span class="st">&quot;鈴木美咲&quot;</span><span class="op">,</span> <span class="st">&quot;人事部&quot;</span><span class="op">,</span> <span class="fl">320000.0</span><span class="op">,</span> <span class="dv">4</span><span class="op">},</span></span>
<span id="cb239-190"><a href="#cb239-190" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span><span class="dv">2004</span><span class="op">,</span> <span class="st">&quot;高橋健太&quot;</span><span class="op">,</span> <span class="st">&quot;営業部&quot;</span><span class="op">,</span> <span class="fl">280000.0</span><span class="op">,</span> <span class="dv">2</span><span class="op">},</span></span>
<span id="cb239-191"><a href="#cb239-191" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span><span class="dv">2005</span><span class="op">,</span> <span class="st">&quot;伊藤良子&quot;</span><span class="op">,</span> <span class="st">&quot;開発部&quot;</span><span class="op">,</span> <span class="fl">450000.0</span><span class="op">,</span> <span class="dv">10</span><span class="op">}</span></span>
<span id="cb239-192"><a href="#cb239-192" aria-hidden="true" tabindex="-1"></a>    <span class="op">};</span></span>
<span id="cb239-193"><a href="#cb239-193" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb239-194"><a href="#cb239-194" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> emp_count <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>employees<span class="op">)</span> <span class="op">/</span> <span class="kw">sizeof</span><span class="op">(</span>employees<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb239-195"><a href="#cb239-195" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb239-196"><a href="#cb239-196" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 最高給与の従業員を検索 */</span></span>
<span id="cb239-197"><a href="#cb239-197" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Employee <span class="op">*</span>highest_paid <span class="op">=</span> find_highest_paid<span class="op">(</span>employees<span class="op">,</span> emp_count<span class="op">);</span></span>
<span id="cb239-198"><a href="#cb239-198" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>highest_paid <span class="op">!=</span> NULL<span class="op">)</span> <span class="op">{</span></span>
<span id="cb239-199"><a href="#cb239-199" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;最高給与の従業員:</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb239-200"><a href="#cb239-200" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;名前: </span><span class="sc">%s</span><span class="st">, 給与: </span><span class="sc">%.0f</span><span class="st">円</span><span class="sc">\n\n</span><span class="st">&quot;</span><span class="op">,</span> </span>
<span id="cb239-201"><a href="#cb239-201" aria-hidden="true" tabindex="-1"></a>               highest_paid<span class="op">-&gt;</span>name<span class="op">,</span> highest_paid<span class="op">-&gt;</span>salary<span class="op">);</span></span>
<span id="cb239-202"><a href="#cb239-202" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb239-203"><a href="#cb239-203" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb239-204"><a href="#cb239-204" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 5. ポインタ配列 */</span></span>
<span id="cb239-205"><a href="#cb239-205" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;5. ポインタ配列</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb239-206"><a href="#cb239-206" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb239-207"><a href="#cb239-207" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Employee <span class="op">*</span>dept_members<span class="op">[</span><span class="dv">5</span><span class="op">];</span></span>
<span id="cb239-208"><a href="#cb239-208" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> dept_count <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb239-209"><a href="#cb239-209" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb239-210"><a href="#cb239-210" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb239-211"><a href="#cb239-211" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 開発部のメンバーを抽出 */</span></span>
<span id="cb239-212"><a href="#cb239-212" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> emp_count<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb239-213"><a href="#cb239-213" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>strcmp<span class="op">(</span>employees<span class="op">[</span>i<span class="op">].</span>department<span class="op">,</span> <span class="st">&quot;開発部&quot;</span><span class="op">)</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb239-214"><a href="#cb239-214" aria-hidden="true" tabindex="-1"></a>            dept_members<span class="op">[</span>dept_count<span class="op">++]</span> <span class="op">=</span> <span class="op">&amp;</span>employees<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb239-215"><a href="#cb239-215" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb239-216"><a href="#cb239-216" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb239-217"><a href="#cb239-217" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb239-218"><a href="#cb239-218" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;開発部のメンバー:</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb239-219"><a href="#cb239-219" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> dept_count<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb239-220"><a href="#cb239-220" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;- </span><span class="sc">%s</span><span class="st"> (ID: </span><span class="sc">%d</span><span class="st">)</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> </span>
<span id="cb239-221"><a href="#cb239-221" aria-hidden="true" tabindex="-1"></a>               dept_members<span class="op">[</span>i<span class="op">]-&gt;</span>name<span class="op">,</span> dept_members<span class="op">[</span>i<span class="op">]-&gt;</span>id<span class="op">);</span></span>
<span id="cb239-222"><a href="#cb239-222" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb239-223"><a href="#cb239-223" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb239-224"><a href="#cb239-224" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb239-225"><a href="#cb239-225" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 6. ネストした構造体とポインタ */</span></span>
<span id="cb239-226"><a href="#cb239-226" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;6. ネストした構造体とポインタ</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb239-227"><a href="#cb239-227" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb239-228"><a href="#cb239-228" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Project project1 <span class="op">=</span> <span class="op">{</span></span>
<span id="cb239-229"><a href="#cb239-229" aria-hidden="true" tabindex="-1"></a>        <span class="dv">101</span><span class="op">,</span></span>
<span id="cb239-230"><a href="#cb239-230" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;新システム開発&quot;</span><span class="op">,</span></span>
<span id="cb239-231"><a href="#cb239-231" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span><span class="dv">2024</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dv">1</span><span class="op">},</span></span>
<span id="cb239-232"><a href="#cb239-232" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span><span class="dv">2024</span><span class="op">,</span> <span class="dv">12</span><span class="op">,</span> <span class="dv">31</span><span class="op">},</span></span>
<span id="cb239-233"><a href="#cb239-233" aria-hidden="true" tabindex="-1"></a>        <span class="op">&amp;</span>employees<span class="op">[</span><span class="dv">1</span><span class="op">],</span>  <span class="co">/* 山田次郎を管理者に設定 */</span></span>
<span id="cb239-234"><a href="#cb239-234" aria-hidden="true" tabindex="-1"></a>        <span class="fl">5000000.0</span></span>
<span id="cb239-235"><a href="#cb239-235" aria-hidden="true" tabindex="-1"></a>    <span class="op">};</span></span>
<span id="cb239-236"><a href="#cb239-236" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb239-237"><a href="#cb239-237" aria-hidden="true" tabindex="-1"></a>    print_project<span class="op">(&amp;</span>project1<span class="op">);</span></span>
<span id="cb239-238"><a href="#cb239-238" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb239-239"><a href="#cb239-239" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 7. 部署別統計 */</span></span>
<span id="cb239-240"><a href="#cb239-240" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;7. 部署別統計</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb239-241"><a href="#cb239-241" aria-hidden="true" tabindex="-1"></a>    calculate_department_stats<span class="op">(</span>employees<span class="op">,</span> emp_count<span class="op">,</span> <span class="st">&quot;開発部&quot;</span><span class="op">);</span></span>
<span id="cb239-242"><a href="#cb239-242" aria-hidden="true" tabindex="-1"></a>    calculate_department_stats<span class="op">(</span>employees<span class="op">,</span> emp_count<span class="op">,</span> <span class="st">&quot;営業部&quot;</span><span class="op">);</span></span>
<span id="cb239-243"><a href="#cb239-243" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb239-244"><a href="#cb239-244" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 8. ポインタのスワップ */</span></span>
<span id="cb239-245"><a href="#cb239-245" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;8. ポインタのスワップ</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb239-246"><a href="#cb239-246" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb239-247"><a href="#cb239-247" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Employee <span class="op">*</span>ptr1 <span class="op">=</span> <span class="op">&amp;</span>employees<span class="op">[</span><span class="dv">0</span><span class="op">];</span></span>
<span id="cb239-248"><a href="#cb239-248" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Employee <span class="op">*</span>ptr2 <span class="op">=</span> <span class="op">&amp;</span>employees<span class="op">[</span><span class="dv">1</span><span class="op">];</span></span>
<span id="cb239-249"><a href="#cb239-249" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb239-250"><a href="#cb239-250" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;スワップ前:</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb239-251"><a href="#cb239-251" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ptr1 → </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> ptr1<span class="op">-&gt;</span>name<span class="op">);</span></span>
<span id="cb239-252"><a href="#cb239-252" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ptr2 → </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> ptr2<span class="op">-&gt;</span>name<span class="op">);</span></span>
<span id="cb239-253"><a href="#cb239-253" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb239-254"><a href="#cb239-254" aria-hidden="true" tabindex="-1"></a>    swap_employees<span class="op">(&amp;</span>ptr1<span class="op">,</span> <span class="op">&amp;</span>ptr2<span class="op">);</span></span>
<span id="cb239-255"><a href="#cb239-255" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb239-256"><a href="#cb239-256" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">スワップ後:</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb239-257"><a href="#cb239-257" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ptr1 → </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> ptr1<span class="op">-&gt;</span>name<span class="op">);</span></span>
<span id="cb239-258"><a href="#cb239-258" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ptr2 → </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> ptr2<span class="op">-&gt;</span>name<span class="op">);</span></span>
<span id="cb239-259"><a href="#cb239-259" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb239-260"><a href="#cb239-260" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb239-261"><a href="#cb239-261" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb239-262"><a href="#cb239-262" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-263"><a href="#cb239-263" aria-hidden="true" tabindex="-1"></a><span class="co">/*</span></span>
<span id="cb239-264"><a href="#cb239-264" aria-hidden="true" tabindex="-1"></a><span class="co">実行結果例:</span></span>
<span id="cb239-265"><a href="#cb239-265" aria-hidden="true" tabindex="-1"></a><span class="co">===== 構造体ポインタと-&gt;演算子 =====</span></span>
<span id="cb239-266"><a href="#cb239-266" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-267"><a href="#cb239-267" aria-hidden="true" tabindex="-1"></a><span class="co">1. 構造体ポインタの基本</span></span>
<span id="cb239-268"><a href="#cb239-268" aria-hidden="true" tabindex="-1"></a><span class="co">ドット演算子: 田中太郎</span></span>
<span id="cb239-269"><a href="#cb239-269" aria-hidden="true" tabindex="-1"></a><span class="co">アロー演算子: 田中太郎</span></span>
<span id="cb239-270"><a href="#cb239-270" aria-hidden="true" tabindex="-1"></a><span class="co">間接参照とドット: 田中太郎</span></span>
<span id="cb239-271"><a href="#cb239-271" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-272"><a href="#cb239-272" aria-hidden="true" tabindex="-1"></a><span class="co">2. ポインタを使った関数呼び出し</span></span>
<span id="cb239-273"><a href="#cb239-273" aria-hidden="true" tabindex="-1"></a><span class="co">=== 従業員情報 ===</span></span>
<span id="cb239-274"><a href="#cb239-274" aria-hidden="true" tabindex="-1"></a><span class="co">ID: 1001</span></span>
<span id="cb239-275"><a href="#cb239-275" aria-hidden="true" tabindex="-1"></a><span class="co">名前: 田中太郎</span></span>
<span id="cb239-276"><a href="#cb239-276" aria-hidden="true" tabindex="-1"></a><span class="co">部署: 開発部</span></span>
<span id="cb239-277"><a href="#cb239-277" aria-hidden="true" tabindex="-1"></a><span class="co">給与: 350000円</span></span>
<span id="cb239-278"><a href="#cb239-278" aria-hidden="true" tabindex="-1"></a><span class="co">勤続年数: 5年</span></span>
<span id="cb239-279"><a href="#cb239-279" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-280"><a href="#cb239-280" aria-hidden="true" tabindex="-1"></a><span class="co">3. ポインタを通じた構造体の更新</span></span>
<span id="cb239-281"><a href="#cb239-281" aria-hidden="true" tabindex="-1"></a><span class="co">田中太郎 の給与を更新しました</span></span>
<span id="cb239-282"><a href="#cb239-282" aria-hidden="true" tabindex="-1"></a><span class="co">変更前: 350000円 → 変更後: 385000円 (10.0%)</span></span>
<span id="cb239-283"><a href="#cb239-283" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-284"><a href="#cb239-284" aria-hidden="true" tabindex="-1"></a><span class="co">4. 構造体配列とポインタ</span></span>
<span id="cb239-285"><a href="#cb239-285" aria-hidden="true" tabindex="-1"></a><span class="co">最高給与の従業員:</span></span>
<span id="cb239-286"><a href="#cb239-286" aria-hidden="true" tabindex="-1"></a><span class="co">名前: 伊藤良子, 給与: 450000円</span></span>
<span id="cb239-287"><a href="#cb239-287" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-288"><a href="#cb239-288" aria-hidden="true" tabindex="-1"></a><span class="co">5. ポインタ配列</span></span>
<span id="cb239-289"><a href="#cb239-289" aria-hidden="true" tabindex="-1"></a><span class="co">開発部のメンバー:</span></span>
<span id="cb239-290"><a href="#cb239-290" aria-hidden="true" tabindex="-1"></a><span class="co">- 山田次郎 (ID: 2002)</span></span>
<span id="cb239-291"><a href="#cb239-291" aria-hidden="true" tabindex="-1"></a><span class="co">- 伊藤良子 (ID: 2005)</span></span>
<span id="cb239-292"><a href="#cb239-292" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-293"><a href="#cb239-293" aria-hidden="true" tabindex="-1"></a><span class="co">6. ネストした構造体とポインタ</span></span>
<span id="cb239-294"><a href="#cb239-294" aria-hidden="true" tabindex="-1"></a><span class="co">=== プロジェクト情報 ===</span></span>
<span id="cb239-295"><a href="#cb239-295" aria-hidden="true" tabindex="-1"></a><span class="co">ID: 101</span></span>
<span id="cb239-296"><a href="#cb239-296" aria-hidden="true" tabindex="-1"></a><span class="co">プロジェクト名: 新システム開発</span></span>
<span id="cb239-297"><a href="#cb239-297" aria-hidden="true" tabindex="-1"></a><span class="co">開始日: 2024年1月1日</span></span>
<span id="cb239-298"><a href="#cb239-298" aria-hidden="true" tabindex="-1"></a><span class="co">終了日: 2024年12月31日</span></span>
<span id="cb239-299"><a href="#cb239-299" aria-hidden="true" tabindex="-1"></a><span class="co">予算: 5000000円</span></span>
<span id="cb239-300"><a href="#cb239-300" aria-hidden="true" tabindex="-1"></a><span class="co">管理者: 山田次郎 (開発部)</span></span>
<span id="cb239-301"><a href="#cb239-301" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-302"><a href="#cb239-302" aria-hidden="true" tabindex="-1"></a><span class="co">7. 部署別統計</span></span>
<span id="cb239-303"><a href="#cb239-303" aria-hidden="true" tabindex="-1"></a><span class="co">=== 開発部 の統計 ===</span></span>
<span id="cb239-304"><a href="#cb239-304" aria-hidden="true" tabindex="-1"></a><span class="co">人数: 2名</span></span>
<span id="cb239-305"><a href="#cb239-305" aria-hidden="true" tabindex="-1"></a><span class="co">平均給与: 425000円</span></span>
<span id="cb239-306"><a href="#cb239-306" aria-hidden="true" tabindex="-1"></a><span class="co">平均勤続年数: 8.5年</span></span>
<span id="cb239-307"><a href="#cb239-307" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-308"><a href="#cb239-308" aria-hidden="true" tabindex="-1"></a><span class="co">=== 営業部 の統計 ===</span></span>
<span id="cb239-309"><a href="#cb239-309" aria-hidden="true" tabindex="-1"></a><span class="co">人数: 2名</span></span>
<span id="cb239-310"><a href="#cb239-310" aria-hidden="true" tabindex="-1"></a><span class="co">平均給与: 290000円</span></span>
<span id="cb239-311"><a href="#cb239-311" aria-hidden="true" tabindex="-1"></a><span class="co">平均勤続年数: 2.5年</span></span>
<span id="cb239-312"><a href="#cb239-312" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-313"><a href="#cb239-313" aria-hidden="true" tabindex="-1"></a><span class="co">8. ポインタのスワップ</span></span>
<span id="cb239-314"><a href="#cb239-314" aria-hidden="true" tabindex="-1"></a><span class="co">スワップ前:</span></span>
<span id="cb239-315"><a href="#cb239-315" aria-hidden="true" tabindex="-1"></a><span class="co">ptr1 → 佐藤花子</span></span>
<span id="cb239-316"><a href="#cb239-316" aria-hidden="true" tabindex="-1"></a><span class="co">ptr2 → 山田次郎</span></span>
<span id="cb239-317"><a href="#cb239-317" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-318"><a href="#cb239-318" aria-hidden="true" tabindex="-1"></a><span class="co">スワップ後:</span></span>
<span id="cb239-319"><a href="#cb239-319" aria-hidden="true" tabindex="-1"></a><span class="co">ptr1 → 山田次郎</span></span>
<span id="cb239-320"><a href="#cb239-320" aria-hidden="true" tabindex="-1"></a><span class="co">ptr2 → 佐藤花子</span></span>
<span id="cb239-321"><a href="#cb239-321" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span></span></code></pre></div>
<blockquote>
<p>C99版は<a
href="struct_pointers_c99.c">こちら</a>を参照してください。</p>
</blockquote>
<hr />
<h1 id="第12章-関数ポインタ">第12章: 関数ポインタ</h1>
<h2 id="対応c規格-8">対応C規格</h2>
<ul>
<li><strong>主要対象:</strong> C90</li>
<li><strong>学習内容:</strong>
関数ポインタの基本、コールバック関数、関数ポインタ配列、動的な関数呼び出し</li>
</ul>
<h2 id="学習目標-8">学習目標</h2>
<p>この章を完了すると、以下のことができるようになります：</p>
<ul>
<li>関数ポインタの基本概念を理解する</li>
<li>関数ポインタの宣言と初期化ができる</li>
<li>コールバック関数を実装できる</li>
<li>関数ポインタ配列を活用できる</li>
<li>動的な関数選択システムを作成できる</li>
</ul>
<h2 id="理論解説-8">理論解説</h2>
<h3 id="関数ポインタの基本概念">関数ポインタの基本概念</h3>
<p>関数ポインタは関数のアドレスを格納するポインタです。これにより、実行時に呼び出す関数を動的に決定できます。</p>
<h4 id="関数ポインタの宣言">関数ポインタの宣言</h4>
<div class="sourceCode" id="cb240"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb240-1"><a href="#cb240-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb240-2"><a href="#cb240-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb240-3"><a href="#cb240-3" aria-hidden="true" tabindex="-1"></a><span class="co">/* 通常の関数 */</span></span>
<span id="cb240-4"><a href="#cb240-4" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> add<span class="op">(</span><span class="dt">int</span> a<span class="op">,</span> <span class="dt">int</span> b<span class="op">)</span></span>
<span id="cb240-5"><a href="#cb240-5" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb240-6"><a href="#cb240-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb240-7"><a href="#cb240-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> a <span class="op">+</span> b<span class="op">;</span></span>
<span id="cb240-8"><a href="#cb240-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb240-9"><a href="#cb240-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb240-10"><a href="#cb240-10" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> subtract<span class="op">(</span><span class="dt">int</span> a<span class="op">,</span> <span class="dt">int</span> b<span class="op">)</span></span>
<span id="cb240-11"><a href="#cb240-11" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb240-12"><a href="#cb240-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb240-13"><a href="#cb240-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> a <span class="op">-</span> b<span class="op">;</span></span>
<span id="cb240-14"><a href="#cb240-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb240-15"><a href="#cb240-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb240-16"><a href="#cb240-16" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb240-17"><a href="#cb240-17" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb240-18"><a href="#cb240-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb240-19"><a href="#cb240-19" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 関数ポインタの宣言 */</span></span>
<span id="cb240-20"><a href="#cb240-20" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> <span class="op">(*</span>operation<span class="op">)(</span><span class="dt">int</span><span class="op">,</span> <span class="dt">int</span><span class="op">);</span></span>
<span id="cb240-21"><a href="#cb240-21" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb240-22"><a href="#cb240-22" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 関数ポインタに関数のアドレスを代入 */</span></span>
<span id="cb240-23"><a href="#cb240-23" aria-hidden="true" tabindex="-1"></a>    operation <span class="op">=</span> add<span class="op">;</span>  <span class="co">/* または &amp;add */</span></span>
<span id="cb240-24"><a href="#cb240-24" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb240-25"><a href="#cb240-25" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 関数ポインタを通じて関数を呼び出し */</span></span>
<span id="cb240-26"><a href="#cb240-26" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;addition: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> operation<span class="op">(,</span> <span class="op">));</span></span>
<span id="cb240-27"><a href="#cb240-27" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb240-28"><a href="#cb240-28" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 別の関数を指すように変更 */</span></span>
<span id="cb240-29"><a href="#cb240-29" aria-hidden="true" tabindex="-1"></a>    operation <span class="op">=</span> subtract<span class="op">;</span></span>
<span id="cb240-30"><a href="#cb240-30" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;subtraction: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> operation<span class="op">(,</span> <span class="op">));</span></span>
<span id="cb240-31"><a href="#cb240-31" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb240-32"><a href="#cb240-32" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">;</span></span></code></pre></div>
<h4 id="関数ポインタの基本文法">関数ポインタの基本文法</h4>
<div class="sourceCode" id="cb241"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb241-1"><a href="#cb241-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb241-2"><a href="#cb241-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb241-3"><a href="#cb241-3" aria-hidden="true" tabindex="-1"></a><span class="co">/* さまざまな関数 */</span></span>
<span id="cb241-4"><a href="#cb241-4" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> greet<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb241-5"><a href="#cb241-5" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb241-6"><a href="#cb241-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb241-7"><a href="#cb241-7" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;こんにちは！n&quot;</span><span class="op">);</span></span>
<span id="cb241-8"><a href="#cb241-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb241-9"><a href="#cb241-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb241-10"><a href="#cb241-10" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> multiply<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">)</span></span>
<span id="cb241-11"><a href="#cb241-11" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb241-12"><a href="#cb241-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb241-13"><a href="#cb241-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> x <span class="op">*</span> y<span class="op">;</span></span>
<span id="cb241-14"><a href="#cb241-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb241-15"><a href="#cb241-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb241-16"><a href="#cb241-16" aria-hidden="true" tabindex="-1"></a><span class="dt">double</span> divide<span class="op">(</span><span class="dt">double</span> a<span class="op">,</span> <span class="dt">double</span> b<span class="op">)</span></span>
<span id="cb241-17"><a href="#cb241-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb241-18"><a href="#cb241-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>b <span class="op">!=</span> <span class="op">.)</span> </span>
<span id="cb241-19"><a href="#cb241-19" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> a <span class="op">/</span> b<span class="op">;</span></span>
<span id="cb241-20"><a href="#cb241-20" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb241-21"><a href="#cb241-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">.;</span></span>
<span id="cb241-22"><a href="#cb241-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb241-23"><a href="#cb241-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb241-24"><a href="#cb241-24" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb241-25"><a href="#cb241-25" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb241-26"><a href="#cb241-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb241-27"><a href="#cb241-27" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* さまざまな関数ポインタの宣言 */</span></span>
<span id="cb241-28"><a href="#cb241-28" aria-hidden="true" tabindex="-1"></a>    <span class="dt">void</span> <span class="op">(*</span>greeting_fnc<span class="op">)(</span><span class="dt">void</span><span class="op">);</span>           <span class="co">/* 引数なし、戻り値なし */</span></span>
<span id="cb241-29"><a href="#cb241-29" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> <span class="op">(*</span>math_fnc<span class="op">)(</span><span class="dt">int</span><span class="op">,</span> <span class="dt">int</span><span class="op">);</span>            <span class="co">/* int引数2つ、int戻り値 */</span></span>
<span id="cb241-30"><a href="#cb241-30" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span> <span class="op">(*</span>calc_fnc<span class="op">)(</span><span class="dt">double</span><span class="op">,</span> <span class="dt">double</span><span class="op">);</span>   <span class="co">/* double引数2つ、double戻り値 */</span></span>
<span id="cb241-31"><a href="#cb241-31" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb241-32"><a href="#cb241-32" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 関数ポインタの初期化 */</span></span>
<span id="cb241-33"><a href="#cb241-33" aria-hidden="true" tabindex="-1"></a>    greeting_fnc <span class="op">=</span> greet<span class="op">;</span></span>
<span id="cb241-34"><a href="#cb241-34" aria-hidden="true" tabindex="-1"></a>    math_fnc <span class="op">=</span> multiply<span class="op">;</span></span>
<span id="cb241-35"><a href="#cb241-35" aria-hidden="true" tabindex="-1"></a>    calc_fnc <span class="op">=</span> divide<span class="op">;</span></span>
<span id="cb241-36"><a href="#cb241-36" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb241-37"><a href="#cb241-37" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 関数ポインタを使った呼び出し */</span></span>
<span id="cb241-38"><a href="#cb241-38" aria-hidden="true" tabindex="-1"></a>    greeting_fnc<span class="op">();</span>                       <span class="co">/* greet()を呼び出し */</span></span>
<span id="cb241-39"><a href="#cb241-39" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;乗算: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> math_fnc<span class="op">(,</span> <span class="op">));</span> <span class="co">/* multiply(, )を呼び出し */</span></span>
<span id="cb241-40"><a href="#cb241-40" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;除算: %.fn&quot;</span><span class="op">,</span> calc_fnc<span class="op">(.,</span> <span class="op">.));</span> <span class="co">/* divide(., .)を呼び出し */</span></span>
<span id="cb241-41"><a href="#cb241-41" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb241-42"><a href="#cb241-42" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 2つの異なる呼び出し方法 */</span></span>
<span id="cb241-43"><a href="#cb241-43" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;直接呼び出し: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(*</span>math_fnc<span class="op">)(,</span> <span class="op">));</span>  <span class="co">/* (*ptr)(args) */</span></span>
<span id="cb241-44"><a href="#cb241-44" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;間接呼び出し: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> math_fnc<span class="op">(,</span> <span class="op">));</span>     <span class="co">/* ptr(args) */</span></span>
<span id="cb241-45"><a href="#cb241-45" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb241-46"><a href="#cb241-46" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">;</span></span></code></pre></div>
<h3 id="関数ポインタの実践的な使用">関数ポインタの実践的な使用</h3>
<h4 id="計算機システム">計算機システム</h4>
<div class="sourceCode" id="cb242"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb242-1"><a href="#cb242-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb242-2"><a href="#cb242-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb242-3"><a href="#cb242-3" aria-hidden="true" tabindex="-1"></a><span class="co">/* 演算関数群 */</span></span>
<span id="cb242-4"><a href="#cb242-4" aria-hidden="true" tabindex="-1"></a><span class="dt">double</span> add_op<span class="op">(</span><span class="dt">double</span> a<span class="op">,</span> <span class="dt">double</span> b<span class="op">)</span>  <span class="cf">return</span> a <span class="op">+</span> b<span class="op">;</span> </span>
<span id="cb242-5"><a href="#cb242-5" aria-hidden="true" tabindex="-1"></a><span class="dt">double</span> sb_op<span class="op">(</span><span class="dt">double</span> a<span class="op">,</span> <span class="dt">double</span> b<span class="op">)</span>  <span class="cf">return</span> a <span class="op">-</span> b<span class="op">;</span> </span>
<span id="cb242-6"><a href="#cb242-6" aria-hidden="true" tabindex="-1"></a><span class="dt">double</span> ml_op<span class="op">(</span><span class="dt">double</span> a<span class="op">,</span> <span class="dt">double</span> b<span class="op">)</span>  <span class="cf">return</span> a <span class="op">*</span> b<span class="op">;</span> </span>
<span id="cb242-7"><a href="#cb242-7" aria-hidden="true" tabindex="-1"></a><span class="dt">double</span> div_op<span class="op">(</span><span class="dt">double</span> a<span class="op">,</span> <span class="dt">double</span> b<span class="op">)</span> </span>
<span id="cb242-8"><a href="#cb242-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb242-9"><a href="#cb242-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>b <span class="op">!=</span> <span class="op">.)</span> <span class="cf">return</span> a <span class="op">/</span> b<span class="op">;</span></span>
<span id="cb242-10"><a href="#cb242-10" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;エラー: ゼロ除算n&quot;</span><span class="op">);</span></span>
<span id="cb242-11"><a href="#cb242-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">.;</span></span>
<span id="cb242-12"><a href="#cb242-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb242-13"><a href="#cb242-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb242-14"><a href="#cb242-14" aria-hidden="true" tabindex="-1"></a><span class="co">/* 演算を実行する関数 */</span></span>
<span id="cb242-15"><a href="#cb242-15" aria-hidden="true" tabindex="-1"></a><span class="dt">double</span> calculate<span class="op">(</span><span class="dt">double</span> a<span class="op">,</span> <span class="dt">double</span> b<span class="op">,</span> <span class="dt">double</span> <span class="op">(*</span>operation<span class="op">)(</span><span class="dt">double</span><span class="op">,</span> <span class="dt">double</span><span class="op">))</span></span>
<span id="cb242-16"><a href="#cb242-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb242-17"><a href="#cb242-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> operation<span class="op">(</span>a<span class="op">,</span> b<span class="op">);</span></span>
<span id="cb242-18"><a href="#cb242-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb242-19"><a href="#cb242-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb242-20"><a href="#cb242-20" aria-hidden="true" tabindex="-1"></a><span class="co">/* 演算子に基づいて関数を選択 */</span></span>
<span id="cb242-21"><a href="#cb242-21" aria-hidden="true" tabindex="-1"></a><span class="dt">double</span> <span class="op">(*</span>get_operation<span class="op">(</span><span class="dt">char</span> op<span class="op">))(</span><span class="dt">double</span><span class="op">,</span> <span class="dt">double</span><span class="op">)</span></span>
<span id="cb242-22"><a href="#cb242-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb242-23"><a href="#cb242-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">switch</span> <span class="op">(</span>op<span class="op">)</span> </span>
<span id="cb242-24"><a href="#cb242-24" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> <span class="ch">&#39;+&#39;</span><span class="op">:</span> <span class="cf">return</span> add_op<span class="op">;</span></span>
<span id="cb242-25"><a href="#cb242-25" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> <span class="ch">&#39;-&#39;</span><span class="op">:</span> <span class="cf">return</span> sb_op<span class="op">;</span></span>
<span id="cb242-26"><a href="#cb242-26" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> <span class="ch">&#39;*&#39;</span><span class="op">:</span> <span class="cf">return</span> ml_op<span class="op">;</span></span>
<span id="cb242-27"><a href="#cb242-27" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> <span class="ch">&#39;/&#39;</span><span class="op">:</span> <span class="cf">return</span> div_op<span class="op">;</span></span>
<span id="cb242-28"><a href="#cb242-28" aria-hidden="true" tabindex="-1"></a>        <span class="cf">default</span><span class="op">:</span>  <span class="cf">return</span> NULL<span class="op">;</span></span>
<span id="cb242-29"><a href="#cb242-29" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb242-30"><a href="#cb242-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb242-31"><a href="#cb242-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb242-32"><a href="#cb242-32" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb242-33"><a href="#cb242-33" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb242-34"><a href="#cb242-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb242-35"><a href="#cb242-35" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span> num1 <span class="op">=</span> <span class="fl">20.0</span><span class="op">,</span> num2 <span class="op">=</span> <span class="fl">5.0</span><span class="op">;</span></span>
<span id="cb242-36"><a href="#cb242-36" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> operators<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="ch">&#39;+&#39;</span><span class="op">,</span> <span class="ch">&#39;-&#39;</span><span class="op">,</span> <span class="ch">&#39;*&#39;</span><span class="op">,</span> <span class="ch">&#39;/&#39;</span><span class="op">};</span></span>
<span id="cb242-37"><a href="#cb242-37" aria-hidden="true" tabindex="-1"></a>    <span class="dt">const</span> <span class="dt">char</span><span class="op">*</span> op_names<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="st">&quot;加算&quot;</span><span class="op">,</span> <span class="st">&quot;減算&quot;</span><span class="op">,</span> <span class="st">&quot;乗算&quot;</span><span class="op">,</span> <span class="st">&quot;除算&quot;</span><span class="op">};</span></span>
<span id="cb242-38"><a href="#cb242-38" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb242-39"><a href="#cb242-39" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb242-40"><a href="#cb242-40" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;数値1: </span><span class="sc">%.1f</span><span class="st">, 数値2: </span><span class="sc">%.1f\n\n</span><span class="st">&quot;</span><span class="op">,</span> num1<span class="op">,</span> num2<span class="op">);</span></span>
<span id="cb242-41"><a href="#cb242-41" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb242-42"><a href="#cb242-42" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* すべての演算を実行 */</span></span>
<span id="cb242-43"><a href="#cb242-43" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">4</span><span class="op">;</span> i<span class="op">++)</span> </span>
<span id="cb242-44"><a href="#cb242-44" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb242-45"><a href="#cb242-45" aria-hidden="true" tabindex="-1"></a>        <span class="dt">double</span> <span class="op">(*</span>op_func<span class="op">)(</span><span class="dt">double</span><span class="op">,</span> <span class="dt">double</span><span class="op">)</span> <span class="op">=</span> get_operation<span class="op">(</span>operators<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb242-46"><a href="#cb242-46" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>op_func <span class="op">!=</span> NULL<span class="op">)</span> </span>
<span id="cb242-47"><a href="#cb242-47" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span></span>
<span id="cb242-48"><a href="#cb242-48" aria-hidden="true" tabindex="-1"></a>            <span class="dt">double</span> result <span class="op">=</span> calculate<span class="op">(</span>num1<span class="op">,</span> num2<span class="op">,</span> op_func<span class="op">);</span></span>
<span id="cb242-49"><a href="#cb242-49" aria-hidden="true" tabindex="-1"></a>            printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%s</span><span class="st"> (</span><span class="sc">%c</span><span class="st">): </span><span class="sc">%.2f\n</span><span class="st">&quot;</span><span class="op">,</span> op_names<span class="op">[</span>i<span class="op">],</span> operators<span class="op">[</span>i<span class="op">],</span> result<span class="op">);</span></span>
<span id="cb242-50"><a href="#cb242-50" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb242-51"><a href="#cb242-51" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb242-52"><a href="#cb242-52" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb242-53"><a href="#cb242-53" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span></code></pre></div>
<h4 id="動的メニューシステム">動的メニューシステム</h4>
<div class="sourceCode" id="cb243"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb243-1"><a href="#cb243-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb243-2"><a href="#cb243-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb243-3"><a href="#cb243-3" aria-hidden="true" tabindex="-1"></a><span class="co">/* メニュー項目の処理関数 */</span></span>
<span id="cb243-4"><a href="#cb243-4" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> show_profile<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb243-5"><a href="#cb243-5" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb243-6"><a href="#cb243-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb243-7"><a href="#cb243-7" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== プロフィール表示 ===n&quot;</span><span class="op">);</span></span>
<span id="cb243-8"><a href="#cb243-8" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;名前: 田中太郎n&quot;</span><span class="op">);</span></span>
<span id="cb243-9"><a href="#cb243-9" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;年齢: 歳n&quot;</span><span class="op">);</span></span>
<span id="cb243-10"><a href="#cb243-10" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;職業: エンジニアnn&quot;</span><span class="op">);</span></span>
<span id="cb243-11"><a href="#cb243-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb243-12"><a href="#cb243-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb243-13"><a href="#cb243-13" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> show_settings<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb243-14"><a href="#cb243-14" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb243-15"><a href="#cb243-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb243-16"><a href="#cb243-16" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== 設定画面 ===n&quot;</span><span class="op">);</span></span>
<span id="cb243-17"><a href="#cb243-17" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;言語: 日本語n&quot;</span><span class="op">);</span></span>
<span id="cb243-18"><a href="#cb243-18" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;テーマ: ダークn&quot;</span><span class="op">);</span></span>
<span id="cb243-19"><a href="#cb243-19" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;通知: ONnn&quot;</span><span class="op">);</span></span>
<span id="cb243-20"><a href="#cb243-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb243-21"><a href="#cb243-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb243-22"><a href="#cb243-22" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> show_help<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb243-23"><a href="#cb243-23" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb243-24"><a href="#cb243-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb243-25"><a href="#cb243-25" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== ヘルプ ===n&quot;</span><span class="op">);</span></span>
<span id="cb243-26"><a href="#cb243-26" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;このアプリケーションの使用方法:n&quot;</span><span class="op">);</span></span>
<span id="cb243-27"><a href="#cb243-27" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;. メニューから項目を選択n&quot;</span><span class="op">);</span></span>
<span id="cb243-28"><a href="#cb243-28" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;. 処理が実行されますnn&quot;</span><span class="op">);</span></span>
<span id="cb243-29"><a href="#cb243-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb243-30"><a href="#cb243-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb243-31"><a href="#cb243-31" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> exit_app<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb243-32"><a href="#cb243-32" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb243-33"><a href="#cb243-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb243-34"><a href="#cb243-34" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;アプリケーションを終了します。n&quot;</span><span class="op">);</span></span>
<span id="cb243-35"><a href="#cb243-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb243-36"><a href="#cb243-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb243-37"><a href="#cb243-37" aria-hidden="true" tabindex="-1"></a><span class="co">/* メニュー項目の構造体 */</span></span>
<span id="cb243-38"><a href="#cb243-38" aria-hidden="true" tabindex="-1"></a>strct MenuItem </span>
<span id="cb243-39"><a href="#cb243-39" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> name<span class="op">[];</span></span>
<span id="cb243-40"><a href="#cb243-40" aria-hidden="true" tabindex="-1"></a>    <span class="dt">void</span> <span class="op">(*</span>handler<span class="op">)(</span><span class="dt">void</span><span class="op">);</span>  <span class="co">/* 関数ポインタ */</span></span>
<span id="cb243-41"><a href="#cb243-41" aria-hidden="true" tabindex="-1"></a><span class="op">;</span></span>
<span id="cb243-42"><a href="#cb243-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb243-43"><a href="#cb243-43" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb243-44"><a href="#cb243-44" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb243-45"><a href="#cb243-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb243-46"><a href="#cb243-46" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* メニュー項目の定義 */</span></span>
<span id="cb243-47"><a href="#cb243-47" aria-hidden="true" tabindex="-1"></a>    strct MenuItem men<span class="op">[]</span> <span class="op">=</span> </span>
<span id="cb243-48"><a href="#cb243-48" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;プロフィール&quot;</span><span class="op">,</span> show_profile<span class="op">,</span></span>
<span id="cb243-49"><a href="#cb243-49" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;設定&quot;</span><span class="op">,</span> show_settings<span class="op">,</span></span>
<span id="cb243-50"><a href="#cb243-50" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;ヘルプ&quot;</span><span class="op">,</span> show_help<span class="op">,</span></span>
<span id="cb243-51"><a href="#cb243-51" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;終了&quot;</span><span class="op">,</span> exit_app</span>
<span id="cb243-52"><a href="#cb243-52" aria-hidden="true" tabindex="-1"></a>    <span class="op">;</span></span>
<span id="cb243-53"><a href="#cb243-53" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb243-54"><a href="#cb243-54" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> men_size <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>men<span class="op">)</span> <span class="op">/</span> <span class="kw">sizeof</span><span class="op">(</span>men<span class="op">[]);</span></span>
<span id="cb243-55"><a href="#cb243-55" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> choice<span class="op">;</span></span>
<span id="cb243-56"><a href="#cb243-56" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb243-57"><a href="#cb243-57" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb243-58"><a href="#cb243-58" aria-hidden="true" tabindex="-1"></a>    <span class="cf">do</span> </span>
<span id="cb243-59"><a href="#cb243-59" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;=== メインメニュー ===n&quot;</span><span class="op">);</span></span>
<span id="cb243-60"><a href="#cb243-60" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="op">;</span> i <span class="op">&lt;</span> men_size<span class="op">;</span> i<span class="op">++)</span> </span>
<span id="cb243-61"><a href="#cb243-61" aria-hidden="true" tabindex="-1"></a>            printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st">. </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> i <span class="op">+</span> <span class="op">,</span> men<span class="op">[</span>i<span class="op">].</span>name<span class="op">);</span></span>
<span id="cb243-62"><a href="#cb243-62" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb243-63"><a href="#cb243-63" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;選択してください (-</span><span class="sc">%d</span><span class="st">): &quot;</span><span class="op">,</span> men_size<span class="op">);</span></span>
<span id="cb243-64"><a href="#cb243-64" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb243-65"><a href="#cb243-65" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>scanf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">&amp;</span>choice<span class="op">)</span> <span class="op">==</span>  <span class="op">&amp;&amp;</span> choice <span class="op">&gt;=</span>  <span class="op">&amp;&amp;</span> choice <span class="op">&lt;=</span> men_size<span class="op">)</span> </span>
<span id="cb243-66"><a href="#cb243-66" aria-hidden="true" tabindex="-1"></a>            printf<span class="op">(</span><span class="st">&quot;n&quot;</span><span class="op">);</span></span>
<span id="cb243-67"><a href="#cb243-67" aria-hidden="true" tabindex="-1"></a>            men<span class="op">[</span>choice <span class="op">-</span> <span class="op">].</span>handler<span class="op">();</span>  <span class="co">/* 関数ポインタを使って実行 */</span></span>
<span id="cb243-68"><a href="#cb243-68" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb243-69"><a href="#cb243-69" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>choice <span class="op">==</span> men_size<span class="op">)</span>   <span class="co">/* 終了が選択された場合 */</span></span>
<span id="cb243-70"><a href="#cb243-70" aria-hidden="true" tabindex="-1"></a>                <span class="cf">break</span><span class="op">;</span></span>
<span id="cb243-71"><a href="#cb243-71" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb243-72"><a href="#cb243-72" aria-hidden="true" tabindex="-1"></a>         <span class="cf">else</span> </span>
<span id="cb243-73"><a href="#cb243-73" aria-hidden="true" tabindex="-1"></a>            printf<span class="op">(</span><span class="st">&quot;無効な選択です。nn&quot;</span><span class="op">);</span></span>
<span id="cb243-74"><a href="#cb243-74" aria-hidden="true" tabindex="-1"></a>            <span class="co">/* 入力バッファをクリア */</span></span>
<span id="cb243-75"><a href="#cb243-75" aria-hidden="true" tabindex="-1"></a>            <span class="cf">while</span> <span class="op">(</span>getchar<span class="op">()</span> <span class="op">!=</span> <span class="ch">&#39;n&#39;</span><span class="op">);</span></span>
<span id="cb243-76"><a href="#cb243-76" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb243-77"><a href="#cb243-77" aria-hidden="true" tabindex="-1"></a>     <span class="cf">while</span> <span class="op">();</span></span>
<span id="cb243-78"><a href="#cb243-78" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb243-79"><a href="#cb243-79" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">;</span></span></code></pre></div>
<h3 id="コールバック関数">コールバック関数</h3>
<p>コールバック関数は他の関数に引数として渡される関数です。</p>
<h4 id="配列処理のコールバック">配列処理のコールバック</h4>
<div class="sourceCode" id="cb244"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb244-1"><a href="#cb244-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb244-2"><a href="#cb244-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb244-3"><a href="#cb244-3" aria-hidden="true" tabindex="-1"></a><span class="co">/* 配列の各要素に適用する関数群 */</span></span>
<span id="cb244-4"><a href="#cb244-4" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> square<span class="op">(</span><span class="dt">int</span> x<span class="op">)</span>  <span class="cf">return</span> x <span class="op">*</span> x<span class="op">;</span> </span>
<span id="cb244-5"><a href="#cb244-5" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> cube<span class="op">(</span><span class="dt">int</span> x<span class="op">)</span>  <span class="cf">return</span> x <span class="op">*</span> x <span class="op">*</span> x<span class="op">;</span> </span>
<span id="cb244-6"><a href="#cb244-6" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> double_vale<span class="op">(</span><span class="dt">int</span> x<span class="op">)</span>  <span class="cf">return</span> x <span class="op">*</span> <span class="op">;</span> </span>
<span id="cb244-7"><a href="#cb244-7" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> increment<span class="op">(</span><span class="dt">int</span> x<span class="op">)</span>  <span class="cf">return</span> x <span class="op">+</span> <span class="op">;</span> </span>
<span id="cb244-8"><a href="#cb244-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb244-9"><a href="#cb244-9" aria-hidden="true" tabindex="-1"></a><span class="co">/* 配列の各要素に関数を適用 */</span></span>
<span id="cb244-10"><a href="#cb244-10" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> apply_to_array<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> size<span class="op">,</span> <span class="dt">int</span> <span class="op">(*</span>fnc<span class="op">)(</span><span class="dt">int</span><span class="op">))</span></span>
<span id="cb244-11"><a href="#cb244-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb244-12"><a href="#cb244-12" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb244-13"><a href="#cb244-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="op">;</span> i <span class="op">&lt;</span> size<span class="op">;</span> i<span class="op">++)</span> </span>
<span id="cb244-14"><a href="#cb244-14" aria-hidden="true" tabindex="-1"></a>        arr<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> fnc<span class="op">(</span>arr<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb244-15"><a href="#cb244-15" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb244-16"><a href="#cb244-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb244-17"><a href="#cb244-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb244-18"><a href="#cb244-18" aria-hidden="true" tabindex="-1"></a><span class="co">/* 配列を表示する関数 */</span></span>
<span id="cb244-19"><a href="#cb244-19" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> print_array<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> size<span class="op">,</span> <span class="dt">const</span> <span class="dt">char</span><span class="op">*</span> label<span class="op">)</span></span>
<span id="cb244-20"><a href="#cb244-20" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb244-21"><a href="#cb244-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb244-22"><a href="#cb244-22" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb244-23"><a href="#cb244-23" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%s</span><span class="st">: &quot;</span><span class="op">,</span> label<span class="op">);</span></span>
<span id="cb244-24"><a href="#cb244-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="op">;</span> i <span class="op">&lt;</span> size<span class="op">;</span> i<span class="op">++)</span> </span>
<span id="cb244-25"><a href="#cb244-25" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st"> &quot;</span><span class="op">,</span> arr<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb244-26"><a href="#cb244-26" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb244-27"><a href="#cb244-27" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;n&quot;</span><span class="op">);</span></span>
<span id="cb244-28"><a href="#cb244-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb244-29"><a href="#cb244-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb244-30"><a href="#cb244-30" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb244-31"><a href="#cb244-31" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb244-32"><a href="#cb244-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb244-33"><a href="#cb244-33" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> numbers<span class="op">[]</span> <span class="op">=</span> <span class="op">,</span> <span class="op">,</span> <span class="op">,</span> <span class="op">,</span> <span class="op">;</span></span>
<span id="cb244-34"><a href="#cb244-34" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> size <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>numbers<span class="op">)</span> <span class="op">/</span> <span class="kw">sizeof</span><span class="op">(</span>numbers<span class="op">[]);</span></span>
<span id="cb244-35"><a href="#cb244-35" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> temp<span class="op">[];</span></span>
<span id="cb244-36"><a href="#cb244-36" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb244-37"><a href="#cb244-37" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb244-38"><a href="#cb244-38" aria-hidden="true" tabindex="-1"></a>    print_array<span class="op">(</span>numbers<span class="op">,</span> size<span class="op">,</span> <span class="st">&quot;元の配列&quot;</span><span class="op">);</span></span>
<span id="cb244-39"><a href="#cb244-39" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb244-40"><a href="#cb244-40" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 乗を適用 */</span></span>
<span id="cb244-41"><a href="#cb244-41" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="op">;</span> i <span class="op">&lt;</span> size<span class="op">;</span> i<span class="op">++)</span> temp<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> numbers<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb244-42"><a href="#cb244-42" aria-hidden="true" tabindex="-1"></a>    apply_to_array<span class="op">(</span>temp<span class="op">,</span> size<span class="op">,</span> square<span class="op">);</span></span>
<span id="cb244-43"><a href="#cb244-43" aria-hidden="true" tabindex="-1"></a>    print_array<span class="op">(</span>temp<span class="op">,</span> size<span class="op">,</span> <span class="st">&quot;乗後&quot;</span><span class="op">);</span></span>
<span id="cb244-44"><a href="#cb244-44" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb244-45"><a href="#cb244-45" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 乗を適用 */</span></span>
<span id="cb244-46"><a href="#cb244-46" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="op">;</span> i <span class="op">&lt;</span> size<span class="op">;</span> i<span class="op">++)</span> temp<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> numbers<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb244-47"><a href="#cb244-47" aria-hidden="true" tabindex="-1"></a>    apply_to_array<span class="op">(</span>temp<span class="op">,</span> size<span class="op">,</span> cube<span class="op">);</span></span>
<span id="cb244-48"><a href="#cb244-48" aria-hidden="true" tabindex="-1"></a>    print_array<span class="op">(</span>temp<span class="op">,</span> size<span class="op">,</span> <span class="st">&quot;乗後&quot;</span><span class="op">);</span></span>
<span id="cb244-49"><a href="#cb244-49" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb244-50"><a href="#cb244-50" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 倍を適用 */</span></span>
<span id="cb244-51"><a href="#cb244-51" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="op">;</span> i <span class="op">&lt;</span> size<span class="op">;</span> i<span class="op">++)</span> temp<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> numbers<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb244-52"><a href="#cb244-52" aria-hidden="true" tabindex="-1"></a>    apply_to_array<span class="op">(</span>temp<span class="op">,</span> size<span class="op">,</span> double_vale<span class="op">);</span></span>
<span id="cb244-53"><a href="#cb244-53" aria-hidden="true" tabindex="-1"></a>    print_array<span class="op">(</span>temp<span class="op">,</span> size<span class="op">,</span> <span class="st">&quot;倍後&quot;</span><span class="op">);</span></span>
<span id="cb244-54"><a href="#cb244-54" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb244-55"><a href="#cb244-55" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* インクリメントを適用 */</span></span>
<span id="cb244-56"><a href="#cb244-56" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="op">;</span> i <span class="op">&lt;</span> size<span class="op">;</span> i<span class="op">++)</span> temp<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> numbers<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb244-57"><a href="#cb244-57" aria-hidden="true" tabindex="-1"></a>    apply_to_array<span class="op">(</span>temp<span class="op">,</span> size<span class="op">,</span> increment<span class="op">);</span></span>
<span id="cb244-58"><a href="#cb244-58" aria-hidden="true" tabindex="-1"></a>    print_array<span class="op">(</span>temp<span class="op">,</span> size<span class="op">,</span> <span class="st">&quot;インクリメント後&quot;</span><span class="op">);</span></span>
<span id="cb244-59"><a href="#cb244-59" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb244-60"><a href="#cb244-60" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">;</span></span></code></pre></div>
<h4
id="ソートのコールバック比較関数">ソートのコールバック（比較関数）</h4>
<div class="sourceCode" id="cb245"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb245-1"><a href="#cb245-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb245-2"><a href="#cb245-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;string.h&gt;</span></span>
<span id="cb245-3"><a href="#cb245-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb245-4"><a href="#cb245-4" aria-hidden="true" tabindex="-1"></a><span class="co">/* 比較関数の型定義 */</span></span>
<span id="cb245-5"><a href="#cb245-5" aria-hidden="true" tabindex="-1"></a><span class="kw">typedef</span> <span class="dt">int</span> <span class="op">(*</span>compare_fnc_t<span class="op">)(</span><span class="dt">const</span> <span class="dt">void</span> <span class="op">*</span>a<span class="op">,</span> <span class="dt">const</span> <span class="dt">void</span> <span class="op">*</span>b<span class="op">);</span></span>
<span id="cb245-6"><a href="#cb245-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb245-7"><a href="#cb245-7" aria-hidden="true" tabindex="-1"></a><span class="co">/* 整数の比較関数 */</span></span>
<span id="cb245-8"><a href="#cb245-8" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> compare_int_asc<span class="op">(</span><span class="dt">const</span> <span class="dt">void</span> <span class="op">*</span>a<span class="op">,</span> <span class="dt">const</span> <span class="dt">void</span> <span class="op">*</span>b<span class="op">)</span></span>
<span id="cb245-9"><a href="#cb245-9" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb245-10"><a href="#cb245-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb245-11"><a href="#cb245-11" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> ia <span class="op">=</span> <span class="op">*(</span><span class="dt">const</span> <span class="dt">int</span><span class="op">*)</span>a<span class="op">;</span></span>
<span id="cb245-12"><a href="#cb245-12" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> ib <span class="op">=</span> <span class="op">*(</span><span class="dt">const</span> <span class="dt">int</span><span class="op">*)</span>b<span class="op">;</span></span>
<span id="cb245-13"><a href="#cb245-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">(</span>ia <span class="op">&gt;</span> ib<span class="op">)</span> <span class="op">-</span> <span class="op">(</span>ia <span class="op">&lt;</span> ib<span class="op">);</span>  <span class="co">/* 昇順 */</span></span>
<span id="cb245-14"><a href="#cb245-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb245-15"><a href="#cb245-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb245-16"><a href="#cb245-16" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> compare_int_desc<span class="op">(</span><span class="dt">const</span> <span class="dt">void</span> <span class="op">*</span>a<span class="op">,</span> <span class="dt">const</span> <span class="dt">void</span> <span class="op">*</span>b<span class="op">)</span></span>
<span id="cb245-17"><a href="#cb245-17" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb245-18"><a href="#cb245-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb245-19"><a href="#cb245-19" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> ia <span class="op">=</span> <span class="op">*(</span><span class="dt">const</span> <span class="dt">int</span><span class="op">*)</span>a<span class="op">;</span></span>
<span id="cb245-20"><a href="#cb245-20" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> ib <span class="op">=</span> <span class="op">*(</span><span class="dt">const</span> <span class="dt">int</span><span class="op">*)</span>b<span class="op">;</span></span>
<span id="cb245-21"><a href="#cb245-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">(</span>ib <span class="op">&gt;</span> ia<span class="op">)</span> <span class="op">-</span> <span class="op">(</span>ib <span class="op">&lt;</span> ia<span class="op">);</span>  <span class="co">/* 降順 */</span></span>
<span id="cb245-22"><a href="#cb245-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb245-23"><a href="#cb245-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb245-24"><a href="#cb245-24" aria-hidden="true" tabindex="-1"></a><span class="co">/* 簡単なバブルソート（コールバック版） */</span></span>
<span id="cb245-25"><a href="#cb245-25" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> bbble_sort<span class="op">(</span><span class="dt">void</span> <span class="op">*</span>base<span class="op">,</span> <span class="dt">size_t</span> num<span class="op">,</span> <span class="dt">size_t</span> size<span class="op">,</span> </span>
<span id="cb245-26"><a href="#cb245-26" aria-hidden="true" tabindex="-1"></a>                 <span class="dt">int</span> <span class="op">(*</span>compare<span class="op">)(</span><span class="dt">const</span> <span class="dt">void</span> <span class="op">*,</span> <span class="dt">const</span> <span class="dt">void</span> <span class="op">*))</span></span>
<span id="cb245-27"><a href="#cb245-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb245-28"><a href="#cb245-28" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> <span class="op">*</span>arr <span class="op">=</span> <span class="op">(</span><span class="dt">char</span><span class="op">*)</span>base<span class="op">;</span></span>
<span id="cb245-29"><a href="#cb245-29" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> <span class="op">*</span>temp <span class="op">=</span> malloc<span class="op">(</span>size<span class="op">);</span></span>
<span id="cb245-30"><a href="#cb245-30" aria-hidden="true" tabindex="-1"></a>    <span class="dt">size_t</span> i<span class="op">,</span> j<span class="op">;</span></span>
<span id="cb245-31"><a href="#cb245-31" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb245-32"><a href="#cb245-32" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>temp <span class="op">==</span> NULL<span class="op">)</span> <span class="cf">return</span><span class="op">;</span></span>
<span id="cb245-33"><a href="#cb245-33" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb245-34"><a href="#cb245-34" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="op">;</span> i <span class="op">&lt;</span> num <span class="op">-</span> <span class="op">;</span> i<span class="op">++)</span> </span>
<span id="cb245-35"><a href="#cb245-35" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span>j <span class="op">=</span> <span class="op">;</span> j <span class="op">&lt;</span> num <span class="op">-</span>  <span class="op">-</span> i<span class="op">;</span> j<span class="op">++)</span> </span>
<span id="cb245-36"><a href="#cb245-36" aria-hidden="true" tabindex="-1"></a>            <span class="dt">void</span> <span class="op">*</span>elem <span class="op">=</span> arr <span class="op">+</span> j <span class="op">*</span> size<span class="op">;</span></span>
<span id="cb245-37"><a href="#cb245-37" aria-hidden="true" tabindex="-1"></a>            <span class="dt">void</span> <span class="op">*</span>elem <span class="op">=</span> arr <span class="op">+</span> <span class="op">(</span>j <span class="op">+</span> <span class="op">)</span> <span class="op">*</span> size<span class="op">;</span></span>
<span id="cb245-38"><a href="#cb245-38" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb245-39"><a href="#cb245-39" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>compare<span class="op">(</span>elem<span class="op">,</span> elem<span class="op">)</span> <span class="op">&gt;</span> <span class="op">)</span> </span>
<span id="cb245-40"><a href="#cb245-40" aria-hidden="true" tabindex="-1"></a>                <span class="co">/* 要素を交換 */</span></span>
<span id="cb245-41"><a href="#cb245-41" aria-hidden="true" tabindex="-1"></a>                memcpy<span class="op">(</span>temp<span class="op">,</span> elem<span class="op">,</span> size<span class="op">);</span></span>
<span id="cb245-42"><a href="#cb245-42" aria-hidden="true" tabindex="-1"></a>                memcpy<span class="op">(</span>elem<span class="op">,</span> elem<span class="op">,</span> size<span class="op">);</span></span>
<span id="cb245-43"><a href="#cb245-43" aria-hidden="true" tabindex="-1"></a>                memcpy<span class="op">(</span>elem<span class="op">,</span> temp<span class="op">,</span> size<span class="op">);</span></span>
<span id="cb245-44"><a href="#cb245-44" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb245-45"><a href="#cb245-45" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb245-46"><a href="#cb245-46" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb245-47"><a href="#cb245-47" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb245-48"><a href="#cb245-48" aria-hidden="true" tabindex="-1"></a>    free<span class="op">(</span>temp<span class="op">);</span></span>
<span id="cb245-49"><a href="#cb245-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb245-50"><a href="#cb245-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb245-51"><a href="#cb245-51" aria-hidden="true" tabindex="-1"></a><span class="co">/* 配列を表示 */</span></span>
<span id="cb245-52"><a href="#cb245-52" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> print_int_array<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> size<span class="op">,</span> <span class="dt">const</span> <span class="dt">char</span><span class="op">*</span> label<span class="op">)</span></span>
<span id="cb245-53"><a href="#cb245-53" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb245-54"><a href="#cb245-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb245-55"><a href="#cb245-55" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb245-56"><a href="#cb245-56" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%s</span><span class="st">: &quot;</span><span class="op">,</span> label<span class="op">);</span></span>
<span id="cb245-57"><a href="#cb245-57" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="op">;</span> i <span class="op">&lt;</span> size<span class="op">;</span> i<span class="op">++)</span> </span>
<span id="cb245-58"><a href="#cb245-58" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st"> &quot;</span><span class="op">,</span> arr<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb245-59"><a href="#cb245-59" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb245-60"><a href="#cb245-60" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;n&quot;</span><span class="op">);</span></span>
<span id="cb245-61"><a href="#cb245-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb245-62"><a href="#cb245-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb245-63"><a href="#cb245-63" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb245-64"><a href="#cb245-64" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb245-65"><a href="#cb245-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb245-66"><a href="#cb245-66" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> numbers<span class="op">[]</span> <span class="op">=</span> <span class="op">,</span> <span class="op">,</span> <span class="op">,</span> <span class="op">,</span> <span class="op">,</span> <span class="op">,</span> <span class="dv">9</span><span class="op">,</span> <span class="op">;</span></span>
<span id="cb245-67"><a href="#cb245-67" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> size <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>numbers<span class="op">)</span> <span class="op">/</span> <span class="kw">sizeof</span><span class="op">(</span>numbers<span class="op">[]);</span></span>
<span id="cb245-68"><a href="#cb245-68" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> temp<span class="op">[];</span></span>
<span id="cb245-69"><a href="#cb245-69" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb245-70"><a href="#cb245-70" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb245-71"><a href="#cb245-71" aria-hidden="true" tabindex="-1"></a>    print_int_array<span class="op">(</span>numbers<span class="op">,</span> size<span class="op">,</span> <span class="st">&quot;元の配列&quot;</span><span class="op">);</span></span>
<span id="cb245-72"><a href="#cb245-72" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb245-73"><a href="#cb245-73" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 昇順ソート */</span></span>
<span id="cb245-74"><a href="#cb245-74" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="op">;</span> i <span class="op">&lt;</span> size<span class="op">;</span> i<span class="op">++)</span> temp<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> numbers<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb245-75"><a href="#cb245-75" aria-hidden="true" tabindex="-1"></a>    bbble_sort<span class="op">(</span>temp<span class="op">,</span> size<span class="op">,</span> <span class="kw">sizeof</span><span class="op">(</span><span class="dt">int</span><span class="op">),</span> compare_int_asc<span class="op">);</span></span>
<span id="cb245-76"><a href="#cb245-76" aria-hidden="true" tabindex="-1"></a>    print_int_array<span class="op">(</span>temp<span class="op">,</span> size<span class="op">,</span> <span class="st">&quot;昇順ソート&quot;</span><span class="op">);</span></span>
<span id="cb245-77"><a href="#cb245-77" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb245-78"><a href="#cb245-78" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 降順ソート */</span></span>
<span id="cb245-79"><a href="#cb245-79" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="op">;</span> i <span class="op">&lt;</span> size<span class="op">;</span> i<span class="op">++)</span> temp<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> numbers<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb245-80"><a href="#cb245-80" aria-hidden="true" tabindex="-1"></a>    bbble_sort<span class="op">(</span>temp<span class="op">,</span> size<span class="op">,</span> <span class="kw">sizeof</span><span class="op">(</span><span class="dt">int</span><span class="op">),</span> compare_int_desc<span class="op">);</span></span>
<span id="cb245-81"><a href="#cb245-81" aria-hidden="true" tabindex="-1"></a>    print_int_array<span class="op">(</span>temp<span class="op">,</span> size<span class="op">,</span> <span class="st">&quot;降順ソート&quot;</span><span class="op">);</span></span>
<span id="cb245-82"><a href="#cb245-82" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb245-83"><a href="#cb245-83" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">;</span></span></code></pre></div>
<h3 id="関数ポインタ配列">関数ポインタ配列</h3>
<p>関数ポインタの配列を使って、複数の関数を効率的に管理できます。</p>
<h4 id="演算関数配列">演算関数配列</h4>
<div class="sourceCode" id="cb246"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb246-1"><a href="#cb246-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb246-2"><a href="#cb246-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb246-3"><a href="#cb246-3" aria-hidden="true" tabindex="-1"></a><span class="co">/* 演算関数群 */</span></span>
<span id="cb246-4"><a href="#cb246-4" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> add_func<span class="op">(</span><span class="dt">int</span> a<span class="op">,</span> <span class="dt">int</span> b<span class="op">)</span> <span class="op">{</span> <span class="cf">return</span> a <span class="op">+</span> b<span class="op">;</span> <span class="op">}</span></span>
<span id="cb246-5"><a href="#cb246-5" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> sub_func<span class="op">(</span><span class="dt">int</span> a<span class="op">,</span> <span class="dt">int</span> b<span class="op">)</span> <span class="op">{</span> <span class="cf">return</span> a <span class="op">-</span> b<span class="op">;</span> <span class="op">}</span></span>
<span id="cb246-6"><a href="#cb246-6" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> mul_func<span class="op">(</span><span class="dt">int</span> a<span class="op">,</span> <span class="dt">int</span> b<span class="op">)</span> <span class="op">{</span> <span class="cf">return</span> a <span class="op">*</span> b<span class="op">;</span> <span class="op">}</span></span>
<span id="cb246-7"><a href="#cb246-7" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> div_func<span class="op">(</span><span class="dt">int</span> a<span class="op">,</span> <span class="dt">int</span> b<span class="op">)</span> <span class="op">{</span> <span class="cf">return</span> b <span class="op">!=</span> <span class="dv">0</span> <span class="op">?</span> a <span class="op">/</span> b <span class="op">:</span> <span class="dv">0</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb246-8"><a href="#cb246-8" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> mod_func<span class="op">(</span><span class="dt">int</span> a<span class="op">,</span> <span class="dt">int</span> b<span class="op">)</span> <span class="op">{</span> <span class="cf">return</span> b <span class="op">!=</span> <span class="dv">0</span> <span class="op">?</span> a <span class="op">%</span> b <span class="op">:</span> <span class="dv">0</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb246-9"><a href="#cb246-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb246-10"><a href="#cb246-10" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb246-11"><a href="#cb246-11" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb246-12"><a href="#cb246-12" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 関数ポインタ配列の宣言と初期化 */</span></span>
<span id="cb246-13"><a href="#cb246-13" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> <span class="op">(*</span>operations<span class="op">[])(</span><span class="dt">int</span><span class="op">,</span> <span class="dt">int</span><span class="op">)</span> <span class="op">=</span> </span>
<span id="cb246-14"><a href="#cb246-14" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb246-15"><a href="#cb246-15" aria-hidden="true" tabindex="-1"></a>        add_func<span class="op">,</span>  <span class="co">/* インデックス0: 加算 */</span></span>
<span id="cb246-16"><a href="#cb246-16" aria-hidden="true" tabindex="-1"></a>        sub_func<span class="op">,</span>  <span class="co">/* インデックス1: 減算 */</span></span>
<span id="cb246-17"><a href="#cb246-17" aria-hidden="true" tabindex="-1"></a>        mul_func<span class="op">,</span>  <span class="co">/* インデックス2: 乗算 */</span></span>
<span id="cb246-18"><a href="#cb246-18" aria-hidden="true" tabindex="-1"></a>        div_func<span class="op">,</span>  <span class="co">/* インデックス3: 除算 */</span></span>
<span id="cb246-19"><a href="#cb246-19" aria-hidden="true" tabindex="-1"></a>        mod_func   <span class="co">/* インデックス4: 剰余 */</span></span>
<span id="cb246-20"><a href="#cb246-20" aria-hidden="true" tabindex="-1"></a>    <span class="op">};</span></span>
<span id="cb246-21"><a href="#cb246-21" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb246-22"><a href="#cb246-22" aria-hidden="true" tabindex="-1"></a>    <span class="dt">const</span> <span class="dt">char</span><span class="op">*</span> op_names<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="st">&quot;加算&quot;</span><span class="op">,</span> <span class="st">&quot;減算&quot;</span><span class="op">,</span> <span class="st">&quot;乗算&quot;</span><span class="op">,</span> <span class="st">&quot;除算&quot;</span><span class="op">,</span> <span class="st">&quot;剰余&quot;</span><span class="op">};</span></span>
<span id="cb246-23"><a href="#cb246-23" aria-hidden="true" tabindex="-1"></a>    <span class="dt">const</span> <span class="dt">char</span><span class="op">*</span> op_symbols<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="st">&quot;+&quot;</span><span class="op">,</span> <span class="st">&quot;-&quot;</span><span class="op">,</span> <span class="st">&quot;*&quot;</span><span class="op">,</span> <span class="st">&quot;/&quot;</span><span class="op">,</span> <span class="st">&quot;%&quot;</span><span class="op">};</span></span>
<span id="cb246-24"><a href="#cb246-24" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> num_ops <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>operations<span class="op">)</span> <span class="op">/</span> <span class="kw">sizeof</span><span class="op">(</span>operations<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb246-25"><a href="#cb246-25" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> a <span class="op">=</span> <span class="dv">20</span><span class="op">,</span> b <span class="op">=</span> <span class="dv">5</span><span class="op">;</span></span>
<span id="cb246-26"><a href="#cb246-26" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb246-27"><a href="#cb246-27" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb246-28"><a href="#cb246-28" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;数値: a = </span><span class="sc">%d</span><span class="st">, b = </span><span class="sc">%d\n\n</span><span class="st">&quot;</span><span class="op">,</span> a<span class="op">,</span> b<span class="op">);</span></span>
<span id="cb246-29"><a href="#cb246-29" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb246-30"><a href="#cb246-30" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* すべての演算を実行 */</span></span>
<span id="cb246-31"><a href="#cb246-31" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> num_ops<span class="op">;</span> i<span class="op">++)</span> </span>
<span id="cb246-32"><a href="#cb246-32" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb246-33"><a href="#cb246-33" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> result <span class="op">=</span> operations<span class="op">[</span>i<span class="op">](</span>a<span class="op">,</span> b<span class="op">);</span></span>
<span id="cb246-34"><a href="#cb246-34" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%s</span><span class="st"> (</span><span class="sc">%s</span><span class="st">): </span><span class="sc">%d</span><span class="st"> </span><span class="sc">%s</span><span class="st"> </span><span class="sc">%d</span><span class="st"> = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> </span>
<span id="cb246-35"><a href="#cb246-35" aria-hidden="true" tabindex="-1"></a>               op_names<span class="op">[</span>i<span class="op">],</span> op_symbols<span class="op">[</span>i<span class="op">],</span> a<span class="op">,</span> op_symbols<span class="op">[</span>i<span class="op">],</span> b<span class="op">,</span> result<span class="op">);</span></span>
<span id="cb246-36"><a href="#cb246-36" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb246-37"><a href="#cb246-37" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb246-38"><a href="#cb246-38" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 特定の演算だけ実行 */</span></span>
<span id="cb246-39"><a href="#cb246-39" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">特定の演算:</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb246-40"><a href="#cb246-40" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;乗算結果: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> operations<span class="op">[</span><span class="dv">2</span><span class="op">](</span>a<span class="op">,</span> b<span class="op">));</span>  <span class="co">/* mul_func */</span></span>
<span id="cb246-41"><a href="#cb246-41" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;除算結果: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> operations<span class="op">[</span><span class="dv">3</span><span class="op">](</span>a<span class="op">,</span> b<span class="op">));</span>  <span class="co">/* div_func */</span></span>
<span id="cb246-42"><a href="#cb246-42" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb246-43"><a href="#cb246-43" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb246-44"><a href="#cb246-44" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h4 id="状態機械ステートマシン">状態機械（ステートマシン）</h4>
<div class="sourceCode" id="cb247"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb247-1"><a href="#cb247-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb247-2"><a href="#cb247-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb247-3"><a href="#cb247-3" aria-hidden="true" tabindex="-1"></a><span class="co">/* 状態の定義 */</span></span>
<span id="cb247-4"><a href="#cb247-4" aria-hidden="true" tabindex="-1"></a><span class="kw">typedef</span> <span class="kw">enum</span> </span>
<span id="cb247-5"><a href="#cb247-5" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb247-6"><a href="#cb247-6" aria-hidden="true" tabindex="-1"></a>    STATE_IDLE<span class="op">,</span></span>
<span id="cb247-7"><a href="#cb247-7" aria-hidden="true" tabindex="-1"></a>    STATE_RUNNING<span class="op">,</span></span>
<span id="cb247-8"><a href="#cb247-8" aria-hidden="true" tabindex="-1"></a>    STATE_PAUSED<span class="op">,</span></span>
<span id="cb247-9"><a href="#cb247-9" aria-hidden="true" tabindex="-1"></a>    STATE_STOPPED<span class="op">,</span></span>
<span id="cb247-10"><a href="#cb247-10" aria-hidden="true" tabindex="-1"></a>    STATE_COUNT</span>
<span id="cb247-11"><a href="#cb247-11" aria-hidden="true" tabindex="-1"></a><span class="op">}</span> State<span class="op">;</span></span>
<span id="cb247-12"><a href="#cb247-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb247-13"><a href="#cb247-13" aria-hidden="true" tabindex="-1"></a><span class="co">/* 状態処理関数の宣言 */</span></span>
<span id="cb247-14"><a href="#cb247-14" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> handle_idle<span class="op">(</span><span class="dt">void</span><span class="op">);</span></span>
<span id="cb247-15"><a href="#cb247-15" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> handle_running<span class="op">(</span><span class="dt">void</span><span class="op">);</span></span>
<span id="cb247-16"><a href="#cb247-16" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> handle_paused<span class="op">(</span><span class="dt">void</span><span class="op">);</span></span>
<span id="cb247-17"><a href="#cb247-17" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> handle_stopped<span class="op">(</span><span class="dt">void</span><span class="op">);</span></span>
<span id="cb247-18"><a href="#cb247-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb247-19"><a href="#cb247-19" aria-hidden="true" tabindex="-1"></a><span class="co">/* 現在の状態 */</span></span>
<span id="cb247-20"><a href="#cb247-20" aria-hidden="true" tabindex="-1"></a><span class="dt">static</span> State current_state <span class="op">=</span> STATE_IDLE<span class="op">;</span></span>
<span id="cb247-21"><a href="#cb247-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb247-22"><a href="#cb247-22" aria-hidden="true" tabindex="-1"></a><span class="co">/* 状態処理関数配列 */</span></span>
<span id="cb247-23"><a href="#cb247-23" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> <span class="op">(*</span>state_handlers<span class="op">[])(</span><span class="dt">void</span><span class="op">)</span> <span class="op">=</span> </span>
<span id="cb247-24"><a href="#cb247-24" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb247-25"><a href="#cb247-25" aria-hidden="true" tabindex="-1"></a>    handle_idle<span class="op">,</span>     <span class="co">/* STATE_IDLE */</span></span>
<span id="cb247-26"><a href="#cb247-26" aria-hidden="true" tabindex="-1"></a>    handle_running<span class="op">,</span>  <span class="co">/* STATE_RUNNING */</span></span>
<span id="cb247-27"><a href="#cb247-27" aria-hidden="true" tabindex="-1"></a>    handle_paused<span class="op">,</span>   <span class="co">/* STATE_PAUSED */</span></span>
<span id="cb247-28"><a href="#cb247-28" aria-hidden="true" tabindex="-1"></a>    handle_stopped   <span class="co">/* STATE_STOPPED */</span></span>
<span id="cb247-29"><a href="#cb247-29" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb247-30"><a href="#cb247-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb247-31"><a href="#cb247-31" aria-hidden="true" tabindex="-1"></a><span class="dt">const</span> <span class="dt">char</span><span class="op">*</span> state_names<span class="op">[]</span> <span class="op">=</span> </span>
<span id="cb247-32"><a href="#cb247-32" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb247-33"><a href="#cb247-33" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;待機中&quot;</span><span class="op">,</span> <span class="st">&quot;実行中&quot;</span><span class="op">,</span> <span class="st">&quot;一時停止&quot;</span><span class="op">,</span> <span class="st">&quot;停止中&quot;</span></span>
<span id="cb247-34"><a href="#cb247-34" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb247-35"><a href="#cb247-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb247-36"><a href="#cb247-36" aria-hidden="true" tabindex="-1"></a><span class="co">/* 各状態の処理関数 */</span></span>
<span id="cb247-37"><a href="#cb247-37" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> handle_idle<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb247-38"><a href="#cb247-38" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb247-39"><a href="#cb247-39" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;[待機中] システムが待機状態です</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb247-40"><a href="#cb247-40" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;  利用可能なアクション: 開始(s)</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb247-41"><a href="#cb247-41" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb247-42"><a href="#cb247-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb247-43"><a href="#cb247-43" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> handle_running<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb247-44"><a href="#cb247-44" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb247-45"><a href="#cb247-45" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;[実行中] システムが動作しています</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb247-46"><a href="#cb247-46" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;  利用可能なアクション: 一時停止(p), 停止(q)</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb247-47"><a href="#cb247-47" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb247-48"><a href="#cb247-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb247-49"><a href="#cb247-49" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> handle_paused<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb247-50"><a href="#cb247-50" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb247-51"><a href="#cb247-51" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;[一時停止] システムが一時停止中です</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb247-52"><a href="#cb247-52" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;  利用可能なアクション: 再開(r), 停止(q)</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb247-53"><a href="#cb247-53" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb247-54"><a href="#cb247-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb247-55"><a href="#cb247-55" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> handle_stopped<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb247-56"><a href="#cb247-56" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb247-57"><a href="#cb247-57" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;[停止中] システムが停止しました</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb247-58"><a href="#cb247-58" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;  利用可能なアクション: リセット(reset)</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb247-59"><a href="#cb247-59" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb247-60"><a href="#cb247-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb247-61"><a href="#cb247-61" aria-hidden="true" tabindex="-1"></a><span class="co">/* 状態遷移関数 */</span></span>
<span id="cb247-62"><a href="#cb247-62" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> transition_to_state<span class="op">(</span>State new_state<span class="op">)</span></span>
<span id="cb247-63"><a href="#cb247-63" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb247-64"><a href="#cb247-64" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>new_state <span class="op">&gt;=</span> <span class="dv">0</span> <span class="op">&amp;&amp;</span> new_state <span class="op">&lt;</span> STATE_COUNT<span class="op">)</span> </span>
<span id="cb247-65"><a href="#cb247-65" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb247-66"><a href="#cb247-66" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;状態遷移: </span><span class="sc">%s</span><span class="st"> -&gt; </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> </span>
<span id="cb247-67"><a href="#cb247-67" aria-hidden="true" tabindex="-1"></a>               state_names<span class="op">[</span>current_state<span class="op">],</span> state_names<span class="op">[</span>new_state<span class="op">]);</span></span>
<span id="cb247-68"><a href="#cb247-68" aria-hidden="true" tabindex="-1"></a>        current_state <span class="op">=</span> new_state<span class="op">;</span></span>
<span id="cb247-69"><a href="#cb247-69" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb247-70"><a href="#cb247-70" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb247-71"><a href="#cb247-71" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb247-72"><a href="#cb247-72" aria-hidden="true" tabindex="-1"></a><span class="co">/* 現在の状態を処理 */</span></span>
<span id="cb247-73"><a href="#cb247-73" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> process_current_state<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb247-74"><a href="#cb247-74" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb247-75"><a href="#cb247-75" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>current_state <span class="op">&gt;=</span> <span class="dv">0</span> <span class="op">&amp;&amp;</span> current_state <span class="op">&lt;</span> STATE_COUNT<span class="op">)</span> </span>
<span id="cb247-76"><a href="#cb247-76" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb247-77"><a href="#cb247-77" aria-hidden="true" tabindex="-1"></a>        state_handlers<span class="op">[</span>current_state<span class="op">]();</span></span>
<span id="cb247-78"><a href="#cb247-78" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb247-79"><a href="#cb247-79" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb247-80"><a href="#cb247-80" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb247-81"><a href="#cb247-81" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb247-82"><a href="#cb247-82" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb247-83"><a href="#cb247-83" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> command<span class="op">[</span><span class="dv">10</span><span class="op">];</span></span>
<span id="cb247-84"><a href="#cb247-84" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb247-85"><a href="#cb247-85" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== ステートマシンデモ ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb247-86"><a href="#cb247-86" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;コマンド: s(start), p(pause), r(resume), q(quit), reset</span><span class="sc">\n\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb247-87"><a href="#cb247-87" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb247-88"><a href="#cb247-88" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span><span class="dv">1</span><span class="op">)</span> </span>
<span id="cb247-89"><a href="#cb247-89" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb247-90"><a href="#cb247-90" aria-hidden="true" tabindex="-1"></a>        process_current_state<span class="op">();</span></span>
<span id="cb247-91"><a href="#cb247-91" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">コマンドを入力してください: &quot;</span><span class="op">);</span></span>
<span id="cb247-92"><a href="#cb247-92" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb247-93"><a href="#cb247-93" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>scanf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%9s</span><span class="st">&quot;</span><span class="op">,</span> command<span class="op">)</span> <span class="op">==</span> <span class="dv">1</span><span class="op">)</span> </span>
<span id="cb247-94"><a href="#cb247-94" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span></span>
<span id="cb247-95"><a href="#cb247-95" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>strcmp<span class="op">(</span>command<span class="op">,</span> <span class="st">&quot;s&quot;</span><span class="op">)</span> <span class="op">==</span> <span class="dv">0</span> <span class="op">&amp;&amp;</span> current_state <span class="op">==</span> STATE_IDLE<span class="op">)</span> </span>
<span id="cb247-96"><a href="#cb247-96" aria-hidden="true" tabindex="-1"></a>            <span class="op">{</span></span>
<span id="cb247-97"><a href="#cb247-97" aria-hidden="true" tabindex="-1"></a>                transition_to_state<span class="op">(</span>STATE_RUNNING<span class="op">);</span></span>
<span id="cb247-98"><a href="#cb247-98" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb247-99"><a href="#cb247-99" aria-hidden="true" tabindex="-1"></a>            <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>strcmp<span class="op">(</span>command<span class="op">,</span> <span class="st">&quot;p&quot;</span><span class="op">)</span> <span class="op">==</span> <span class="dv">0</span> <span class="op">&amp;&amp;</span> current_state <span class="op">==</span> STATE_RUNNING<span class="op">)</span> </span>
<span id="cb247-100"><a href="#cb247-100" aria-hidden="true" tabindex="-1"></a>            <span class="op">{</span></span>
<span id="cb247-101"><a href="#cb247-101" aria-hidden="true" tabindex="-1"></a>                transition_to_state<span class="op">(</span>STATE_PAUSED<span class="op">);</span></span>
<span id="cb247-102"><a href="#cb247-102" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb247-103"><a href="#cb247-103" aria-hidden="true" tabindex="-1"></a>            <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>strcmp<span class="op">(</span>command<span class="op">,</span> <span class="st">&quot;r&quot;</span><span class="op">)</span> <span class="op">==</span> <span class="dv">0</span> <span class="op">&amp;&amp;</span> current_state <span class="op">==</span> STATE_PAUSED<span class="op">)</span> </span>
<span id="cb247-104"><a href="#cb247-104" aria-hidden="true" tabindex="-1"></a>            <span class="op">{</span></span>
<span id="cb247-105"><a href="#cb247-105" aria-hidden="true" tabindex="-1"></a>                transition_to_state<span class="op">(</span>STATE_RUNNING<span class="op">);</span></span>
<span id="cb247-106"><a href="#cb247-106" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb247-107"><a href="#cb247-107" aria-hidden="true" tabindex="-1"></a>            <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>strcmp<span class="op">(</span>command<span class="op">,</span> <span class="st">&quot;q&quot;</span><span class="op">)</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> </span>
<span id="cb247-108"><a href="#cb247-108" aria-hidden="true" tabindex="-1"></a>            <span class="op">{</span></span>
<span id="cb247-109"><a href="#cb247-109" aria-hidden="true" tabindex="-1"></a>                transition_to_state<span class="op">(</span>STATE_STOPPED<span class="op">);</span></span>
<span id="cb247-110"><a href="#cb247-110" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb247-111"><a href="#cb247-111" aria-hidden="true" tabindex="-1"></a>            <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>strcmp<span class="op">(</span>command<span class="op">,</span> <span class="st">&quot;reset&quot;</span><span class="op">)</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> </span>
<span id="cb247-112"><a href="#cb247-112" aria-hidden="true" tabindex="-1"></a>            <span class="op">{</span></span>
<span id="cb247-113"><a href="#cb247-113" aria-hidden="true" tabindex="-1"></a>                transition_to_state<span class="op">(</span>STATE_IDLE<span class="op">);</span></span>
<span id="cb247-114"><a href="#cb247-114" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb247-115"><a href="#cb247-115" aria-hidden="true" tabindex="-1"></a>            <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>strcmp<span class="op">(</span>command<span class="op">,</span> <span class="st">&quot;exit&quot;</span><span class="op">)</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> </span>
<span id="cb247-116"><a href="#cb247-116" aria-hidden="true" tabindex="-1"></a>            <span class="op">{</span></span>
<span id="cb247-117"><a href="#cb247-117" aria-hidden="true" tabindex="-1"></a>                printf<span class="op">(</span><span class="st">&quot;プログラムを終了します</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb247-118"><a href="#cb247-118" aria-hidden="true" tabindex="-1"></a>                <span class="cf">break</span><span class="op">;</span></span>
<span id="cb247-119"><a href="#cb247-119" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb247-120"><a href="#cb247-120" aria-hidden="true" tabindex="-1"></a>            <span class="cf">else</span> </span>
<span id="cb247-121"><a href="#cb247-121" aria-hidden="true" tabindex="-1"></a>            <span class="op">{</span></span>
<span id="cb247-122"><a href="#cb247-122" aria-hidden="true" tabindex="-1"></a>                printf<span class="op">(</span><span class="st">&quot;無効なコマンドまたは現在の状態では実行できません</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb247-123"><a href="#cb247-123" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb247-124"><a href="#cb247-124" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb247-125"><a href="#cb247-125" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb247-126"><a href="#cb247-126" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb247-127"><a href="#cb247-127" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb247-128"><a href="#cb247-128" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb247-129"><a href="#cb247-129" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 id="高度な関数ポインタ活用">高度な関数ポインタ活用</h3>
<h4 id="プラグインシステム">プラグインシステム</h4>
<div class="sourceCode" id="cb248"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb248-1"><a href="#cb248-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb248-2"><a href="#cb248-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;string.h&gt;</span></span>
<span id="cb248-3"><a href="#cb248-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb248-4"><a href="#cb248-4" aria-hidden="true" tabindex="-1"></a><span class="co">/* プラグインインターフェース */</span></span>
<span id="cb248-5"><a href="#cb248-5" aria-hidden="true" tabindex="-1"></a><span class="kw">typedef</span> <span class="kw">struct</span> </span>
<span id="cb248-6"><a href="#cb248-6" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb248-7"><a href="#cb248-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> name<span class="op">[</span><span class="dv">50</span><span class="op">];</span></span>
<span id="cb248-8"><a href="#cb248-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> version<span class="op">[</span><span class="dv">10</span><span class="op">];</span></span>
<span id="cb248-9"><a href="#cb248-9" aria-hidden="true" tabindex="-1"></a>    <span class="dt">void</span> <span class="op">(*</span>init<span class="op">)(</span><span class="dt">void</span><span class="op">);</span></span>
<span id="cb248-10"><a href="#cb248-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">void</span> <span class="op">(*</span>execute<span class="op">)(</span><span class="dt">void</span><span class="op">);</span></span>
<span id="cb248-11"><a href="#cb248-11" aria-hidden="true" tabindex="-1"></a>    <span class="dt">void</span> <span class="op">(*</span>cleanup<span class="op">)(</span><span class="dt">void</span><span class="op">);</span></span>
<span id="cb248-12"><a href="#cb248-12" aria-hidden="true" tabindex="-1"></a><span class="op">}</span> Plugin<span class="op">;</span></span>
<span id="cb248-13"><a href="#cb248-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb248-14"><a href="#cb248-14" aria-hidden="true" tabindex="-1"></a><span class="co">/* プラグイン: ログ出力 */</span></span>
<span id="cb248-15"><a href="#cb248-15" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> log_init<span class="op">(</span><span class="dt">void</span><span class="op">)</span> <span class="op">{</span> printf<span class="op">(</span><span class="st">&quot;ログプラグイン初期化</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb248-16"><a href="#cb248-16" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> log_execute<span class="op">(</span><span class="dt">void</span><span class="op">)</span> <span class="op">{</span> printf<span class="op">(</span><span class="st">&quot;ログファイルに出力中...</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb248-17"><a href="#cb248-17" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> log_cleanup<span class="op">(</span><span class="dt">void</span><span class="op">)</span> <span class="op">{</span> printf<span class="op">(</span><span class="st">&quot;ログプラグイン終了処理</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb248-18"><a href="#cb248-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb248-19"><a href="#cb248-19" aria-hidden="true" tabindex="-1"></a><span class="co">/* プラグイン: データベース接続 */</span></span>
<span id="cb248-20"><a href="#cb248-20" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> db_init<span class="op">(</span><span class="dt">void</span><span class="op">)</span> <span class="op">{</span> printf<span class="op">(</span><span class="st">&quot;データベースプラグイン初期化</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb248-21"><a href="#cb248-21" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> db_execute<span class="op">(</span><span class="dt">void</span><span class="op">)</span> <span class="op">{</span> printf<span class="op">(</span><span class="st">&quot;データベースに接続中...</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb248-22"><a href="#cb248-22" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> db_cleanup<span class="op">(</span><span class="dt">void</span><span class="op">)</span> <span class="op">{</span> printf<span class="op">(</span><span class="st">&quot;データベース接続終了</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb248-23"><a href="#cb248-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb248-24"><a href="#cb248-24" aria-hidden="true" tabindex="-1"></a><span class="co">/* プラグイン: ネットワーク通信 */</span></span>
<span id="cb248-25"><a href="#cb248-25" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> net_init<span class="op">(</span><span class="dt">void</span><span class="op">)</span> <span class="op">{</span> printf<span class="op">(</span><span class="st">&quot;ネットワークプラグイン初期化</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb248-26"><a href="#cb248-26" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> net_execute<span class="op">(</span><span class="dt">void</span><span class="op">)</span> <span class="op">{</span> printf<span class="op">(</span><span class="st">&quot;ネットワーク通信実行中...</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb248-27"><a href="#cb248-27" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> net_cleanup<span class="op">(</span><span class="dt">void</span><span class="op">)</span> <span class="op">{</span> printf<span class="op">(</span><span class="st">&quot;ネットワーク接続終了</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb248-28"><a href="#cb248-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb248-29"><a href="#cb248-29" aria-hidden="true" tabindex="-1"></a><span class="co">/* プラグインの登録 */</span></span>
<span id="cb248-30"><a href="#cb248-30" aria-hidden="true" tabindex="-1"></a>Plugin plugins<span class="op">[]</span> <span class="op">=</span> </span>
<span id="cb248-31"><a href="#cb248-31" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb248-32"><a href="#cb248-32" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span><span class="st">&quot;LogPlugin&quot;</span><span class="op">,</span> <span class="st">&quot;1.0&quot;</span><span class="op">,</span> log_init<span class="op">,</span> log_execute<span class="op">,</span> log_cleanup<span class="op">},</span></span>
<span id="cb248-33"><a href="#cb248-33" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span><span class="st">&quot;DatabasePlugin&quot;</span><span class="op">,</span> <span class="st">&quot;2.0&quot;</span><span class="op">,</span> db_init<span class="op">,</span> db_execute<span class="op">,</span> db_cleanup<span class="op">},</span></span>
<span id="cb248-34"><a href="#cb248-34" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span><span class="st">&quot;NetworkPlugin&quot;</span><span class="op">,</span> <span class="st">&quot;1.5&quot;</span><span class="op">,</span> net_init<span class="op">,</span> net_execute<span class="op">,</span> net_cleanup<span class="op">}</span></span>
<span id="cb248-35"><a href="#cb248-35" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb248-36"><a href="#cb248-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb248-37"><a href="#cb248-37" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> plugin_count <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>plugins<span class="op">)</span> <span class="op">/</span> <span class="kw">sizeof</span><span class="op">(</span>plugins<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb248-38"><a href="#cb248-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb248-39"><a href="#cb248-39" aria-hidden="true" tabindex="-1"></a><span class="co">/* プラグイン管理システム */</span></span>
<span id="cb248-40"><a href="#cb248-40" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> load_plugins<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb248-41"><a href="#cb248-41" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb248-42"><a href="#cb248-42" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb248-43"><a href="#cb248-43" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== プラグイン読み込み ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb248-44"><a href="#cb248-44" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> plugin_count<span class="op">;</span> i<span class="op">++)</span> </span>
<span id="cb248-45"><a href="#cb248-45" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb248-46"><a href="#cb248-46" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;プラグイン: </span><span class="sc">%s</span><span class="st"> (v</span><span class="sc">%s</span><span class="st">)</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> plugins<span class="op">[</span>i<span class="op">].</span>name<span class="op">,</span> plugins<span class="op">[</span>i<span class="op">].</span>version<span class="op">);</span></span>
<span id="cb248-47"><a href="#cb248-47" aria-hidden="true" tabindex="-1"></a>        plugins<span class="op">[</span>i<span class="op">].</span>init<span class="op">();</span></span>
<span id="cb248-48"><a href="#cb248-48" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb248-49"><a href="#cb248-49" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb248-50"><a href="#cb248-50" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb248-51"><a href="#cb248-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb248-52"><a href="#cb248-52" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> execute_plugins<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb248-53"><a href="#cb248-53" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb248-54"><a href="#cb248-54" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb248-55"><a href="#cb248-55" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== プラグイン実行 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb248-56"><a href="#cb248-56" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> plugin_count<span class="op">;</span> i<span class="op">++)</span> </span>
<span id="cb248-57"><a href="#cb248-57" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb248-58"><a href="#cb248-58" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;[</span><span class="sc">%s</span><span class="st">] &quot;</span><span class="op">,</span> plugins<span class="op">[</span>i<span class="op">].</span>name<span class="op">);</span></span>
<span id="cb248-59"><a href="#cb248-59" aria-hidden="true" tabindex="-1"></a>        plugins<span class="op">[</span>i<span class="op">].</span>execute<span class="op">();</span></span>
<span id="cb248-60"><a href="#cb248-60" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb248-61"><a href="#cb248-61" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb248-62"><a href="#cb248-62" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb248-63"><a href="#cb248-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb248-64"><a href="#cb248-64" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> unload_plugins<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb248-65"><a href="#cb248-65" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb248-66"><a href="#cb248-66" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb248-67"><a href="#cb248-67" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== プラグイン終了処理 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb248-68"><a href="#cb248-68" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> plugin_count<span class="op">;</span> i<span class="op">++)</span> </span>
<span id="cb248-69"><a href="#cb248-69" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb248-70"><a href="#cb248-70" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;[</span><span class="sc">%s</span><span class="st">] &quot;</span><span class="op">,</span> plugins<span class="op">[</span>i<span class="op">].</span>name<span class="op">);</span></span>
<span id="cb248-71"><a href="#cb248-71" aria-hidden="true" tabindex="-1"></a>        plugins<span class="op">[</span>i<span class="op">].</span>cleanup<span class="op">();</span></span>
<span id="cb248-72"><a href="#cb248-72" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb248-73"><a href="#cb248-73" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb248-74"><a href="#cb248-74" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb248-75"><a href="#cb248-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb248-76"><a href="#cb248-76" aria-hidden="true" tabindex="-1"></a><span class="co">/* 特定のプラグインを実行 */</span></span>
<span id="cb248-77"><a href="#cb248-77" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> execute_plugin_by_name<span class="op">(</span><span class="dt">const</span> <span class="dt">char</span><span class="op">*</span> name<span class="op">)</span></span>
<span id="cb248-78"><a href="#cb248-78" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb248-79"><a href="#cb248-79" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb248-80"><a href="#cb248-80" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> plugin_count<span class="op">;</span> i<span class="op">++)</span> </span>
<span id="cb248-81"><a href="#cb248-81" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb248-82"><a href="#cb248-82" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>strcmp<span class="op">(</span>plugins<span class="op">[</span>i<span class="op">].</span>name<span class="op">,</span> name<span class="op">)</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> </span>
<span id="cb248-83"><a href="#cb248-83" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span></span>
<span id="cb248-84"><a href="#cb248-84" aria-hidden="true" tabindex="-1"></a>            printf<span class="op">(</span><span class="st">&quot;プラグイン &#39;</span><span class="sc">%s</span><span class="st">&#39; を実行:</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> name<span class="op">);</span></span>
<span id="cb248-85"><a href="#cb248-85" aria-hidden="true" tabindex="-1"></a>            plugins<span class="op">[</span>i<span class="op">].</span>execute<span class="op">();</span></span>
<span id="cb248-86"><a href="#cb248-86" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span><span class="op">;</span></span>
<span id="cb248-87"><a href="#cb248-87" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb248-88"><a href="#cb248-88" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb248-89"><a href="#cb248-89" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;プラグイン &#39;</span><span class="sc">%s</span><span class="st">&#39; が見つかりません</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> name<span class="op">);</span></span>
<span id="cb248-90"><a href="#cb248-90" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb248-91"><a href="#cb248-91" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb248-92"><a href="#cb248-92" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb248-93"><a href="#cb248-93" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb248-94"><a href="#cb248-94" aria-hidden="true" tabindex="-1"></a>    load_plugins<span class="op">();</span></span>
<span id="cb248-95"><a href="#cb248-95" aria-hidden="true" tabindex="-1"></a>    execute_plugins<span class="op">();</span></span>
<span id="cb248-96"><a href="#cb248-96" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb248-97"><a href="#cb248-97" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 特定のプラグインのみ実行 */</span></span>
<span id="cb248-98"><a href="#cb248-98" aria-hidden="true" tabindex="-1"></a>    execute_plugin_by_name<span class="op">(</span><span class="st">&quot;DatabasePlugin&quot;</span><span class="op">);</span></span>
<span id="cb248-99"><a href="#cb248-99" aria-hidden="true" tabindex="-1"></a>    execute_plugin_by_name<span class="op">(</span><span class="st">&quot;InvalidPlugin&quot;</span><span class="op">);</span></span>
<span id="cb248-100"><a href="#cb248-100" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb248-101"><a href="#cb248-101" aria-hidden="true" tabindex="-1"></a>    unload_plugins<span class="op">();</span></span>
<span id="cb248-102"><a href="#cb248-102" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb248-103"><a href="#cb248-103" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb248-104"><a href="#cb248-104" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h4 id="イベントハンドラシステム">イベントハンドラシステム</h4>
<div class="sourceCode" id="cb249"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb249-1"><a href="#cb249-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb249-2"><a href="#cb249-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb249-3"><a href="#cb249-3" aria-hidden="true" tabindex="-1"></a><span class="co">/* イベントタイプ */</span></span>
<span id="cb249-4"><a href="#cb249-4" aria-hidden="true" tabindex="-1"></a><span class="kw">typedef</span> <span class="kw">enum</span> </span>
<span id="cb249-5"><a href="#cb249-5" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb249-6"><a href="#cb249-6" aria-hidden="true" tabindex="-1"></a>    EVENT_CLICK<span class="op">,</span></span>
<span id="cb249-7"><a href="#cb249-7" aria-hidden="true" tabindex="-1"></a>    EVENT_KEYPRESS<span class="op">,</span></span>
<span id="cb249-8"><a href="#cb249-8" aria-hidden="true" tabindex="-1"></a>    EVENT_MOUSE_MOVE<span class="op">,</span></span>
<span id="cb249-9"><a href="#cb249-9" aria-hidden="true" tabindex="-1"></a>    EVENT_WINDOW_CLOSE<span class="op">,</span></span>
<span id="cb249-10"><a href="#cb249-10" aria-hidden="true" tabindex="-1"></a>    EVENT_TYPE_COUNT</span>
<span id="cb249-11"><a href="#cb249-11" aria-hidden="true" tabindex="-1"></a><span class="op">}</span> EventType<span class="op">;</span></span>
<span id="cb249-12"><a href="#cb249-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb249-13"><a href="#cb249-13" aria-hidden="true" tabindex="-1"></a><span class="co">/* イベントデータ */</span></span>
<span id="cb249-14"><a href="#cb249-14" aria-hidden="true" tabindex="-1"></a><span class="kw">typedef</span> <span class="kw">struct</span> </span>
<span id="cb249-15"><a href="#cb249-15" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb249-16"><a href="#cb249-16" aria-hidden="true" tabindex="-1"></a>    EventType type<span class="op">;</span></span>
<span id="cb249-17"><a href="#cb249-17" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> x<span class="op">,</span> y<span class="op">;</span>      <span class="co">/* 座標 */</span></span>
<span id="cb249-18"><a href="#cb249-18" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> key_code<span class="op">;</span>  <span class="co">/* キーコード */</span></span>
<span id="cb249-19"><a href="#cb249-19" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> message<span class="op">[</span><span class="dv">100</span><span class="op">];</span></span>
<span id="cb249-20"><a href="#cb249-20" aria-hidden="true" tabindex="-1"></a><span class="op">}</span> Event<span class="op">;</span></span>
<span id="cb249-21"><a href="#cb249-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb249-22"><a href="#cb249-22" aria-hidden="true" tabindex="-1"></a><span class="co">/* イベントハンドラ関数の型 */</span></span>
<span id="cb249-23"><a href="#cb249-23" aria-hidden="true" tabindex="-1"></a><span class="kw">typedef</span> <span class="dt">void</span> <span class="op">(*</span>EventHandler<span class="op">)(</span><span class="dt">const</span> Event<span class="op">*</span> event<span class="op">);</span></span>
<span id="cb249-24"><a href="#cb249-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb249-25"><a href="#cb249-25" aria-hidden="true" tabindex="-1"></a><span class="co">/* イベントハンドラ配列 */</span></span>
<span id="cb249-26"><a href="#cb249-26" aria-hidden="true" tabindex="-1"></a>EventHandler event_handlers<span class="op">[</span>EVENT_TYPE_COUNT<span class="op">]</span> <span class="op">=</span> <span class="op">{</span>NULL<span class="op">};</span></span>
<span id="cb249-27"><a href="#cb249-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb249-28"><a href="#cb249-28" aria-hidden="true" tabindex="-1"></a><span class="co">/* 各イベントのハンドラ実装 */</span></span>
<span id="cb249-29"><a href="#cb249-29" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> handle_click<span class="op">(</span><span class="dt">const</span> Event<span class="op">*</span> event<span class="op">)</span></span>
<span id="cb249-30"><a href="#cb249-30" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb249-31"><a href="#cb249-31" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;クリックイベント: 座標(</span><span class="sc">%d</span><span class="st">, </span><span class="sc">%d</span><span class="st">) - </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> </span>
<span id="cb249-32"><a href="#cb249-32" aria-hidden="true" tabindex="-1"></a>           event<span class="op">-&gt;</span>x<span class="op">,</span> event<span class="op">-&gt;</span>y<span class="op">,</span> event<span class="op">-&gt;</span>message<span class="op">);</span></span>
<span id="cb249-33"><a href="#cb249-33" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb249-34"><a href="#cb249-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb249-35"><a href="#cb249-35" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> handle_keypress<span class="op">(</span><span class="dt">const</span> Event<span class="op">*</span> event<span class="op">)</span></span>
<span id="cb249-36"><a href="#cb249-36" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb249-37"><a href="#cb249-37" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;キー押下イベント: キーコード </span><span class="sc">%d</span><span class="st"> - </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> </span>
<span id="cb249-38"><a href="#cb249-38" aria-hidden="true" tabindex="-1"></a>           event<span class="op">-&gt;</span>key_code<span class="op">,</span> event<span class="op">-&gt;</span>message<span class="op">);</span></span>
<span id="cb249-39"><a href="#cb249-39" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb249-40"><a href="#cb249-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb249-41"><a href="#cb249-41" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> handle_mouse_move<span class="op">(</span><span class="dt">const</span> Event<span class="op">*</span> event<span class="op">)</span></span>
<span id="cb249-42"><a href="#cb249-42" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb249-43"><a href="#cb249-43" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;マウス移動イベント: 座標(</span><span class="sc">%d</span><span class="st">, </span><span class="sc">%d</span><span class="st">)</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> event<span class="op">-&gt;</span>x<span class="op">,</span> event<span class="op">-&gt;</span>y<span class="op">);</span></span>
<span id="cb249-44"><a href="#cb249-44" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb249-45"><a href="#cb249-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb249-46"><a href="#cb249-46" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> handle_window_close<span class="op">(</span><span class="dt">const</span> Event<span class="op">*</span> event<span class="op">)</span></span>
<span id="cb249-47"><a href="#cb249-47" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb249-48"><a href="#cb249-48" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ウィンドウ閉じるイベント: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> event<span class="op">-&gt;</span>message<span class="op">);</span></span>
<span id="cb249-49"><a href="#cb249-49" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb249-50"><a href="#cb249-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb249-51"><a href="#cb249-51" aria-hidden="true" tabindex="-1"></a><span class="co">/* イベントハンドラの登録 */</span></span>
<span id="cb249-52"><a href="#cb249-52" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> register_event_handler<span class="op">(</span>EventType type<span class="op">,</span> EventHandler handler<span class="op">)</span></span>
<span id="cb249-53"><a href="#cb249-53" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb249-54"><a href="#cb249-54" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>type <span class="op">&gt;=</span> <span class="dv">0</span> <span class="op">&amp;&amp;</span> type <span class="op">&lt;</span> EVENT_TYPE_COUNT<span class="op">)</span> </span>
<span id="cb249-55"><a href="#cb249-55" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb249-56"><a href="#cb249-56" aria-hidden="true" tabindex="-1"></a>        event_handlers<span class="op">[</span>type<span class="op">]</span> <span class="op">=</span> handler<span class="op">;</span></span>
<span id="cb249-57"><a href="#cb249-57" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;イベントハンドラ登録: タイプ </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> type<span class="op">);</span></span>
<span id="cb249-58"><a href="#cb249-58" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb249-59"><a href="#cb249-59" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb249-60"><a href="#cb249-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb249-61"><a href="#cb249-61" aria-hidden="true" tabindex="-1"></a><span class="co">/* イベントの処理 */</span></span>
<span id="cb249-62"><a href="#cb249-62" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> process_event<span class="op">(</span><span class="dt">const</span> Event<span class="op">*</span> event<span class="op">)</span></span>
<span id="cb249-63"><a href="#cb249-63" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb249-64"><a href="#cb249-64" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>event<span class="op">-&gt;</span>type <span class="op">&gt;=</span> <span class="dv">0</span> <span class="op">&amp;&amp;</span> event<span class="op">-&gt;</span>type <span class="op">&lt;</span> EVENT_TYPE_COUNT <span class="op">&amp;&amp;</span> </span>
<span id="cb249-65"><a href="#cb249-65" aria-hidden="true" tabindex="-1"></a>        event_handlers<span class="op">[</span>event<span class="op">-&gt;</span>type<span class="op">]</span> <span class="op">!=</span> NULL<span class="op">)</span> </span>
<span id="cb249-66"><a href="#cb249-66" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb249-67"><a href="#cb249-67" aria-hidden="true" tabindex="-1"></a>        event_handlers<span class="op">[</span>event<span class="op">-&gt;</span>type<span class="op">](</span>event<span class="op">);</span></span>
<span id="cb249-68"><a href="#cb249-68" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span> </span>
<span id="cb249-69"><a href="#cb249-69" aria-hidden="true" tabindex="-1"></a>    <span class="cf">else</span> </span>
<span id="cb249-70"><a href="#cb249-70" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb249-71"><a href="#cb249-71" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;未処理のイベント: タイプ </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> event<span class="op">-&gt;</span>type<span class="op">);</span></span>
<span id="cb249-72"><a href="#cb249-72" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb249-73"><a href="#cb249-73" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb249-74"><a href="#cb249-74" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb249-75"><a href="#cb249-75" aria-hidden="true" tabindex="-1"></a><span class="co">/* イベントの作成補助関数 */</span></span>
<span id="cb249-76"><a href="#cb249-76" aria-hidden="true" tabindex="-1"></a>Event create_click_event<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">,</span> <span class="dt">const</span> <span class="dt">char</span><span class="op">*</span> msg<span class="op">)</span></span>
<span id="cb249-77"><a href="#cb249-77" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb249-78"><a href="#cb249-78" aria-hidden="true" tabindex="-1"></a>    Event event <span class="op">=</span> <span class="op">{</span>EVENT_CLICK<span class="op">,</span> x<span class="op">,</span> y<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="st">&quot;&quot;</span><span class="op">};</span></span>
<span id="cb249-79"><a href="#cb249-79" aria-hidden="true" tabindex="-1"></a>    strncpy<span class="op">(</span>event<span class="op">.</span>message<span class="op">,</span> msg<span class="op">,</span> <span class="kw">sizeof</span><span class="op">(</span>event<span class="op">.</span>message<span class="op">)</span> <span class="op">-</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb249-80"><a href="#cb249-80" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> event<span class="op">;</span></span>
<span id="cb249-81"><a href="#cb249-81" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb249-82"><a href="#cb249-82" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb249-83"><a href="#cb249-83" aria-hidden="true" tabindex="-1"></a>Event create_keypress_event<span class="op">(</span><span class="dt">int</span> key_code<span class="op">,</span> <span class="dt">const</span> <span class="dt">char</span><span class="op">*</span> msg<span class="op">)</span></span>
<span id="cb249-84"><a href="#cb249-84" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb249-85"><a href="#cb249-85" aria-hidden="true" tabindex="-1"></a>    Event event <span class="op">=</span> <span class="op">{</span>EVENT_KEYPRESS<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> key_code<span class="op">,</span> <span class="st">&quot;&quot;</span><span class="op">};</span></span>
<span id="cb249-86"><a href="#cb249-86" aria-hidden="true" tabindex="-1"></a>    strncpy<span class="op">(</span>event<span class="op">.</span>message<span class="op">,</span> msg<span class="op">,</span> <span class="kw">sizeof</span><span class="op">(</span>event<span class="op">.</span>message<span class="op">)</span> <span class="op">-</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb249-87"><a href="#cb249-87" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> event<span class="op">;</span></span>
<span id="cb249-88"><a href="#cb249-88" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb249-89"><a href="#cb249-89" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb249-90"><a href="#cb249-90" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb249-91"><a href="#cb249-91" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb249-92"><a href="#cb249-92" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== イベントハンドラシステム ===</span><span class="sc">\n\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb249-93"><a href="#cb249-93" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb249-94"><a href="#cb249-94" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* イベントハンドラを登録 */</span></span>
<span id="cb249-95"><a href="#cb249-95" aria-hidden="true" tabindex="-1"></a>    register_event_handler<span class="op">(</span>EVENT_CLICK<span class="op">,</span> handle_click<span class="op">);</span></span>
<span id="cb249-96"><a href="#cb249-96" aria-hidden="true" tabindex="-1"></a>    register_event_handler<span class="op">(</span>EVENT_KEYPRESS<span class="op">,</span> handle_keypress<span class="op">);</span></span>
<span id="cb249-97"><a href="#cb249-97" aria-hidden="true" tabindex="-1"></a>    register_event_handler<span class="op">(</span>EVENT_MOUSE_MOVE<span class="op">,</span> handle_mouse_move<span class="op">);</span></span>
<span id="cb249-98"><a href="#cb249-98" aria-hidden="true" tabindex="-1"></a>    register_event_handler<span class="op">(</span>EVENT_WINDOW_CLOSE<span class="op">,</span> handle_window_close<span class="op">);</span></span>
<span id="cb249-99"><a href="#cb249-99" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb249-100"><a href="#cb249-100" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">=== イベント処理テスト ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb249-101"><a href="#cb249-101" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb249-102"><a href="#cb249-102" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* さまざまなイベントを生成・処理 */</span></span>
<span id="cb249-103"><a href="#cb249-103" aria-hidden="true" tabindex="-1"></a>    Event click_event <span class="op">=</span> create_click_event<span class="op">(</span><span class="dv">100</span><span class="op">,</span> <span class="dv">200</span><span class="op">,</span> <span class="st">&quot;ボタンクリック&quot;</span><span class="op">);</span></span>
<span id="cb249-104"><a href="#cb249-104" aria-hidden="true" tabindex="-1"></a>    process_event<span class="op">(&amp;</span>click_event<span class="op">);</span></span>
<span id="cb249-105"><a href="#cb249-105" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb249-106"><a href="#cb249-106" aria-hidden="true" tabindex="-1"></a>    Event key_event <span class="op">=</span> create_keypress_event<span class="op">(</span><span class="dv">65</span><span class="op">,</span> <span class="st">&quot;Aキー押下&quot;</span><span class="op">);</span></span>
<span id="cb249-107"><a href="#cb249-107" aria-hidden="true" tabindex="-1"></a>    process_event<span class="op">(&amp;</span>key_event<span class="op">);</span></span>
<span id="cb249-108"><a href="#cb249-108" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb249-109"><a href="#cb249-109" aria-hidden="true" tabindex="-1"></a>    Event mouse_event <span class="op">=</span> <span class="op">{</span>EVENT_MOUSE_MOVE<span class="op">,</span> <span class="dv">150</span><span class="op">,</span> <span class="dv">300</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="st">&quot;&quot;</span><span class="op">};</span></span>
<span id="cb249-110"><a href="#cb249-110" aria-hidden="true" tabindex="-1"></a>    process_event<span class="op">(&amp;</span>mouse_event<span class="op">);</span></span>
<span id="cb249-111"><a href="#cb249-111" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb249-112"><a href="#cb249-112" aria-hidden="true" tabindex="-1"></a>    Event close_event <span class="op">=</span> <span class="op">{</span>EVENT_WINDOW_CLOSE<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="st">&quot;アプリケーション終了&quot;</span><span class="op">};</span></span>
<span id="cb249-113"><a href="#cb249-113" aria-hidden="true" tabindex="-1"></a>    process_event<span class="op">(&amp;</span>close_event<span class="op">);</span></span>
<span id="cb249-114"><a href="#cb249-114" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb249-115"><a href="#cb249-115" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 未登録のイベントタイプ */</span></span>
<span id="cb249-116"><a href="#cb249-116" aria-hidden="true" tabindex="-1"></a>    Event unknown_event <span class="op">=</span> <span class="op">{</span><span class="dv">99</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="st">&quot;&quot;</span><span class="op">};</span></span>
<span id="cb249-117"><a href="#cb249-117" aria-hidden="true" tabindex="-1"></a>    process_event<span class="op">(&amp;</span>unknown_event<span class="op">);</span></span>
<span id="cb249-118"><a href="#cb249-118" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb249-119"><a href="#cb249-119" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb249-120"><a href="#cb249-120" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 id="関数ポインタのtypedef">関数ポインタのtypedef</h3>
<p>複雑な関数ポインタの型を簡潔に書くためにtypedefを使用します。</p>
<div class="sourceCode" id="cb250"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb250-1"><a href="#cb250-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb250-2"><a href="#cb250-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb250-3"><a href="#cb250-3" aria-hidden="true" tabindex="-1"></a><span class="co">/* 関数ポインタの型定義 */</span></span>
<span id="cb250-4"><a href="#cb250-4" aria-hidden="true" tabindex="-1"></a><span class="kw">typedef</span> <span class="dt">int</span> <span class="op">(*</span>BinaryOperation<span class="op">)(</span><span class="dt">int</span><span class="op">,</span> <span class="dt">int</span><span class="op">);</span></span>
<span id="cb250-5"><a href="#cb250-5" aria-hidden="true" tabindex="-1"></a><span class="kw">typedef</span> <span class="dt">void</span> <span class="op">(*</span>EventCallback<span class="op">)(</span><span class="dt">int</span> event_id<span class="op">,</span> <span class="dt">const</span> <span class="dt">char</span><span class="op">*</span> message<span class="op">);</span></span>
<span id="cb250-6"><a href="#cb250-6" aria-hidden="true" tabindex="-1"></a><span class="kw">typedef</span> <span class="dt">double</span> <span class="op">(*</span>MathFunction<span class="op">)(</span><span class="dt">double</span><span class="op">);</span></span>
<span id="cb250-7"><a href="#cb250-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb250-8"><a href="#cb250-8" aria-hidden="true" tabindex="-1"></a><span class="co">/* 演算関数 */</span></span>
<span id="cb250-9"><a href="#cb250-9" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> add_nums<span class="op">(</span><span class="dt">int</span> a<span class="op">,</span> <span class="dt">int</span> b<span class="op">)</span> <span class="op">{</span> <span class="cf">return</span> a <span class="op">+</span> b<span class="op">;</span> <span class="op">}</span></span>
<span id="cb250-10"><a href="#cb250-10" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> mul_nums<span class="op">(</span><span class="dt">int</span> a<span class="op">,</span> <span class="dt">int</span> b<span class="op">)</span> <span class="op">{</span> <span class="cf">return</span> a <span class="op">*</span> b<span class="op">;</span> <span class="op">}</span></span>
<span id="cb250-11"><a href="#cb250-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb250-12"><a href="#cb250-12" aria-hidden="true" tabindex="-1"></a><span class="co">/* イベントコールバック関数 */</span></span>
<span id="cb250-13"><a href="#cb250-13" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> on_start<span class="op">(</span><span class="dt">int</span> id<span class="op">,</span> <span class="dt">const</span> <span class="dt">char</span><span class="op">*</span> msg<span class="op">)</span> </span>
<span id="cb250-14"><a href="#cb250-14" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb250-15"><a href="#cb250-15" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;開始イベント[</span><span class="sc">%d</span><span class="st">]: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> id<span class="op">,</span> msg<span class="op">);</span></span>
<span id="cb250-16"><a href="#cb250-16" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb250-17"><a href="#cb250-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb250-18"><a href="#cb250-18" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> on_stop<span class="op">(</span><span class="dt">int</span> id<span class="op">,</span> <span class="dt">const</span> <span class="dt">char</span><span class="op">*</span> msg<span class="op">)</span> </span>
<span id="cb250-19"><a href="#cb250-19" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb250-20"><a href="#cb250-20" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;停止イベント[</span><span class="sc">%d</span><span class="st">]: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> id<span class="op">,</span> msg<span class="op">);</span></span>
<span id="cb250-21"><a href="#cb250-21" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb250-22"><a href="#cb250-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb250-23"><a href="#cb250-23" aria-hidden="true" tabindex="-1"></a><span class="co">/* 数学関数 */</span></span>
<span id="cb250-24"><a href="#cb250-24" aria-hidden="true" tabindex="-1"></a><span class="dt">double</span> square_root<span class="op">(</span><span class="dt">double</span> x<span class="op">)</span> <span class="op">{</span> <span class="cf">return</span> x <span class="op">*</span> x<span class="op">;</span> <span class="op">}</span>   <span class="co">/* 簡易版 */</span></span>
<span id="cb250-25"><a href="#cb250-25" aria-hidden="true" tabindex="-1"></a><span class="dt">double</span> absolute<span class="op">(</span><span class="dt">double</span> x<span class="op">)</span> <span class="op">{</span> <span class="cf">return</span> x <span class="op">&lt;</span> <span class="dv">0</span> <span class="op">?</span> <span class="op">-</span>x <span class="op">:</span> x<span class="op">;</span> <span class="op">}</span></span>
<span id="cb250-26"><a href="#cb250-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb250-27"><a href="#cb250-27" aria-hidden="true" tabindex="-1"></a><span class="co">/* 関数を実行する汎用関数 */</span></span>
<span id="cb250-28"><a href="#cb250-28" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> execute_binary_op<span class="op">(</span><span class="dt">int</span> a<span class="op">,</span> <span class="dt">int</span> b<span class="op">,</span> BinaryOperation op<span class="op">)</span></span>
<span id="cb250-29"><a href="#cb250-29" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb250-30"><a href="#cb250-30" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> op<span class="op">(</span>a<span class="op">,</span> b<span class="op">);</span></span>
<span id="cb250-31"><a href="#cb250-31" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb250-32"><a href="#cb250-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb250-33"><a href="#cb250-33" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> trigger_event<span class="op">(</span><span class="dt">int</span> id<span class="op">,</span> <span class="dt">const</span> <span class="dt">char</span><span class="op">*</span> message<span class="op">,</span> EventCallback callback<span class="op">)</span></span>
<span id="cb250-34"><a href="#cb250-34" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb250-35"><a href="#cb250-35" aria-hidden="true" tabindex="-1"></a>    callback<span class="op">(</span>id<span class="op">,</span> message<span class="op">);</span></span>
<span id="cb250-36"><a href="#cb250-36" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb250-37"><a href="#cb250-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb250-38"><a href="#cb250-38" aria-hidden="true" tabindex="-1"></a><span class="dt">double</span> apply_math_func<span class="op">(</span><span class="dt">double</span> value<span class="op">,</span> MathFunction func<span class="op">)</span></span>
<span id="cb250-39"><a href="#cb250-39" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb250-40"><a href="#cb250-40" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> func<span class="op">(</span>value<span class="op">);</span></span>
<span id="cb250-41"><a href="#cb250-41" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb250-42"><a href="#cb250-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb250-43"><a href="#cb250-43" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb250-44"><a href="#cb250-44" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb250-45"><a href="#cb250-45" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 型定義を使った関数ポインタの使用 */</span></span>
<span id="cb250-46"><a href="#cb250-46" aria-hidden="true" tabindex="-1"></a>    BinaryOperation math_op<span class="op">;</span></span>
<span id="cb250-47"><a href="#cb250-47" aria-hidden="true" tabindex="-1"></a>    EventCallback event_handler<span class="op">;</span></span>
<span id="cb250-48"><a href="#cb250-48" aria-hidden="true" tabindex="-1"></a>    MathFunction math_func<span class="op">;</span></span>
<span id="cb250-49"><a href="#cb250-49" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb250-50"><a href="#cb250-50" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== typedef を使った関数ポインタ ===</span><span class="sc">\n\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb250-51"><a href="#cb250-51" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb250-52"><a href="#cb250-52" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 数値演算 */</span></span>
<span id="cb250-53"><a href="#cb250-53" aria-hidden="true" tabindex="-1"></a>    math_op <span class="op">=</span> add_nums<span class="op">;</span></span>
<span id="cb250-54"><a href="#cb250-54" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;加算: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> execute_binary_op<span class="op">(</span><span class="dv">10</span><span class="op">,</span> <span class="dv">5</span><span class="op">,</span> math_op<span class="op">));</span></span>
<span id="cb250-55"><a href="#cb250-55" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb250-56"><a href="#cb250-56" aria-hidden="true" tabindex="-1"></a>    math_op <span class="op">=</span> mul_nums<span class="op">;</span></span>
<span id="cb250-57"><a href="#cb250-57" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;乗算: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> execute_binary_op<span class="op">(</span><span class="dv">10</span><span class="op">,</span> <span class="dv">5</span><span class="op">,</span> math_op<span class="op">));</span></span>
<span id="cb250-58"><a href="#cb250-58" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb250-59"><a href="#cb250-59" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* イベント処理 */</span></span>
<span id="cb250-60"><a href="#cb250-60" aria-hidden="true" tabindex="-1"></a>    event_handler <span class="op">=</span> on_start<span class="op">;</span></span>
<span id="cb250-61"><a href="#cb250-61" aria-hidden="true" tabindex="-1"></a>    trigger_event<span class="op">(</span><span class="dv">1</span><span class="op">,</span> <span class="st">&quot;システム開始&quot;</span><span class="op">,</span> event_handler<span class="op">);</span></span>
<span id="cb250-62"><a href="#cb250-62" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb250-63"><a href="#cb250-63" aria-hidden="true" tabindex="-1"></a>    event_handler <span class="op">=</span> on_stop<span class="op">;</span></span>
<span id="cb250-64"><a href="#cb250-64" aria-hidden="true" tabindex="-1"></a>    trigger_event<span class="op">(</span><span class="dv">2</span><span class="op">,</span> <span class="st">&quot;システム終了&quot;</span><span class="op">,</span> event_handler<span class="op">);</span></span>
<span id="cb250-65"><a href="#cb250-65" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb250-66"><a href="#cb250-66" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 数学関数 */</span></span>
<span id="cb250-67"><a href="#cb250-67" aria-hidden="true" tabindex="-1"></a>    math_func <span class="op">=</span> square_root<span class="op">;</span></span>
<span id="cb250-68"><a href="#cb250-68" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;二乗: </span><span class="sc">%.2f\n</span><span class="st">&quot;</span><span class="op">,</span> apply_math_func<span class="op">(</span><span class="fl">5.0</span><span class="op">,</span> math_func<span class="op">));</span></span>
<span id="cb250-69"><a href="#cb250-69" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb250-70"><a href="#cb250-70" aria-hidden="true" tabindex="-1"></a>    math_func <span class="op">=</span> absolute<span class="op">;</span></span>
<span id="cb250-71"><a href="#cb250-71" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;絶対値: </span><span class="sc">%.2f\n</span><span class="st">&quot;</span><span class="op">,</span> apply_math_func<span class="op">(-</span><span class="fl">7.5</span><span class="op">,</span> math_func<span class="op">));</span></span>
<span id="cb250-72"><a href="#cb250-72" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb250-73"><a href="#cb250-73" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb250-74"><a href="#cb250-74" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h2 id="サンプルコード-17">サンプルコード</h2>
<h3 id="関数ポインタの基本">関数ポインタの基本</h3>
<ul>
<li><strong>C90版</strong>: <a
href="examples/function_pointer_basic.c">examples/function_pointer_basic.c</a></li>
<li><strong>C99版</strong>: <a
href="examples/function_pointer_basic_c99.c">examples/function_pointer_basic_c99.c</a></li>
</ul>
<p>関数ポインタの宣言、初期化、基本的な使用方法を学習します。</p>
<h3 id="コールバック関数-1">コールバック関数</h3>
<ul>
<li><strong>C90版</strong>: <a
href="examples/callback_functions.c">examples/callback_functions.c</a></li>
<li><strong>C99版</strong>: <a
href="examples/callback_functions_c99.c">examples/callback_functions_c99.c</a></li>
</ul>
<p>コールバック関数を使ったイベント処理システムを学習します。</p>
<h3 id="関数ポインタ配列-1">関数ポインタ配列</h3>
<ul>
<li><strong>C90版</strong>: <a
href="examples/function_pointer_arrays.c">examples/function_pointer_arrays.c</a></li>
<li><strong>C99版</strong>: <a
href="examples/function_pointer_arrays_c99.c">examples/function_pointer_arrays_c99.c</a></li>
</ul>
<p>関数ポインタ配列を使った動的な関数選択を学習します。</p>
<h3 id="コンパイルと実行-10">コンパイルと実行</h3>
<div class="sourceCode" id="cb251"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb251-1"><a href="#cb251-1" aria-hidden="true" tabindex="-1"></a><span class="co"># examples ディレクトリに移動</span></span>
<span id="cb251-2"><a href="#cb251-2" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> examples</span>
<span id="cb251-3"><a href="#cb251-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb251-4"><a href="#cb251-4" aria-hidden="true" tabindex="-1"></a><span class="co"># C90準拠でコンパイル</span></span>
<span id="cb251-5"><a href="#cb251-5" aria-hidden="true" tabindex="-1"></a><span class="fu">gcc</span> <span class="at">-std</span><span class="op">=</span>c90 <span class="at">-Wall</span> <span class="at">-Wextra</span> <span class="at">-pedantic</span> function_pointer_basic.c <span class="at">-o</span> function_pointer_basic</span>
<span id="cb251-6"><a href="#cb251-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb251-7"><a href="#cb251-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 実行</span></span>
<span id="cb251-8"><a href="#cb251-8" aria-hidden="true" tabindex="-1"></a><span class="ex">./function_pointer_basic</span></span></code></pre></div>
<h2 id="演習課題-9">演習課題</h2>
<h3 id="基礎問題-9">基礎問題</h3>
<ol type="1">
<li><strong>計算機の実装</strong>
<ul>
<li>四則演算の関数を作成し、関数ポインタを使って動的に演算を選択できる計算機を実装してください</li>
</ul></li>
<li><strong>ソート比較関数</strong>
<ul>
<li>整数配列を昇順・降順でソートできるよう、比較関数を関数ポインタで渡すソート関数を実装してください</li>
</ul></li>
<li><strong>メニューシステム</strong>
<ul>
<li>関数ポインタ配列を使って、複数の機能を持つメニューシステムを作成してください</li>
</ul></li>
</ol>
<h3 id="応用問題-9">応用問題</h3>
<ol start="4" type="1">
<li><strong>データ変換システム</strong>
<ul>
<li>さまざまなデータ変換関数（大文字変換、小文字変換など）を関数ポインタで管理するシステムを実装してください</li>
</ul></li>
<li><strong>フィルタシステム</strong>
<ul>
<li>配列の要素をフィルタリングする関数を、条件を関数ポインタで渡して実装してください</li>
</ul></li>
<li><strong>ゲームの状態管理</strong>
<ul>
<li>ゲームの状態（メニュー、プレイ中、ポーズ、終了）を関数ポインタ配列で管理するシステムを作成してください</li>
</ul></li>
</ol>
<h3 id="発展問題-4">発展問題</h3>
<ol start="7" type="1">
<li><strong>プラグインシステム</strong>
<ul>
<li>実行時に機能を追加できるプラグインシステムを関数ポインタで実装してください</li>
</ul></li>
<li><strong>コマンドパターン</strong>
<ul>
<li>コマンドパターンを関数ポインタで実装し、undo/redo機能付きのシステムを作成してください</li>
</ul></li>
<li><strong>イベントドリブンシステム</strong>
<ul>
<li>複数のイベントタイプを処理できるイベントドリブンシステムを実装してください</li>
</ul></li>
</ol>
<h2 id="コンパイル方法-10">コンパイル方法</h2>
<p>この章では以下のMakefileを使用してコンパイルができます：</p>
<div class="sourceCode" id="cb252"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb252-1"><a href="#cb252-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 全ての例題をコンパイル</span></span>
<span id="cb252-2"><a href="#cb252-2" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> all</span>
<span id="cb252-3"><a href="#cb252-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb252-4"><a href="#cb252-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 特定のプログラムをコンパイル</span></span>
<span id="cb252-5"><a href="#cb252-5" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> function_pointer_basic</span>
<span id="cb252-6"><a href="#cb252-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb252-7"><a href="#cb252-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 実行</span></span>
<span id="cb252-8"><a href="#cb252-8" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> run</span>
<span id="cb252-9"><a href="#cb252-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb252-10"><a href="#cb252-10" aria-hidden="true" tabindex="-1"></a><span class="co"># クリーンアップ</span></span>
<span id="cb252-11"><a href="#cb252-11" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> clean</span></code></pre></div>
<h2 id="規格による違い-9">規格による違い</h2>
<h3 id="c90での制限事項-8">C90での制限事項</h3>
<ul>
<li>関数ポインタの型変換は明示的なキャストが必要</li>
<li>可変引数関数への関数ポインタは制限的</li>
</ul>
<h3 id="c99以降の拡張-8">C99以降の拡張</h3>
<ul>
<li>より柔軟な関数ポインタの初期化</li>
<li>inline関数への関数ポインタサポート改善</li>
</ul>
<h2 id="よくある間違い-7">よくある間違い</h2>
<h3 id="関数ポインタの初期化忘れ">1. 関数ポインタの初期化忘れ</h3>
<div class="sourceCode" id="cb253"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb253-1"><a href="#cb253-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* NG: 初期化されていない関数ポインタ */</span></span>
<span id="cb253-2"><a href="#cb253-2" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> <span class="op">(*</span>func_ptr<span class="op">)(</span><span class="dt">int</span><span class="op">,</span> <span class="dt">int</span><span class="op">);</span></span>
<span id="cb253-3"><a href="#cb253-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> result <span class="op">=</span> func_ptr<span class="op">(</span><span class="dv">10</span><span class="op">,</span> <span class="dv">5</span><span class="op">);</span>  <span class="co">/* 未定義動作 */</span></span>
<span id="cb253-4"><a href="#cb253-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb253-5"><a href="#cb253-5" aria-hidden="true" tabindex="-1"></a><span class="co">/* OK: 適切な初期化 */</span></span>
<span id="cb253-6"><a href="#cb253-6" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> <span class="op">(*</span>func_ptr<span class="op">)(</span><span class="dt">int</span><span class="op">,</span> <span class="dt">int</span><span class="op">)</span> <span class="op">=</span> add_function<span class="op">;</span></span>
<span id="cb253-7"><a href="#cb253-7" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> result <span class="op">=</span> func_ptr<span class="op">(</span><span class="dv">10</span><span class="op">,</span> <span class="dv">5</span><span class="op">);</span></span></code></pre></div>
<h3 id="関数ポインタのnullチェック不足">2.
関数ポインタのNULLチェック不足</h3>
<div class="sourceCode" id="cb254"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb254-1"><a href="#cb254-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* NG: NULLチェックなし */</span></span>
<span id="cb254-2"><a href="#cb254-2" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> execute_callback<span class="op">(</span><span class="dt">void</span> <span class="op">(*</span>callback<span class="op">)(</span><span class="dt">void</span><span class="op">))</span></span>
<span id="cb254-3"><a href="#cb254-3" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb254-4"><a href="#cb254-4" aria-hidden="true" tabindex="-1"></a>    callback<span class="op">();</span>  <span class="co">/* callbackがNULLの場合クラッシュ */</span></span>
<span id="cb254-5"><a href="#cb254-5" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb254-6"><a href="#cb254-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb254-7"><a href="#cb254-7" aria-hidden="true" tabindex="-1"></a><span class="co">/* OK: NULLチェック */</span></span>
<span id="cb254-8"><a href="#cb254-8" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> execute_callback<span class="op">(</span><span class="dt">void</span> <span class="op">(*</span>callback<span class="op">)(</span><span class="dt">void</span><span class="op">))</span></span>
<span id="cb254-9"><a href="#cb254-9" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb254-10"><a href="#cb254-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>callback <span class="op">!=</span> NULL<span class="op">)</span> </span>
<span id="cb254-11"><a href="#cb254-11" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb254-12"><a href="#cb254-12" aria-hidden="true" tabindex="-1"></a>        callback<span class="op">();</span></span>
<span id="cb254-13"><a href="#cb254-13" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb254-14"><a href="#cb254-14" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 id="関数の戻り値型の不一致">3. 関数の戻り値型の不一致</h3>
<div class="sourceCode" id="cb255"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb255-1"><a href="#cb255-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* NG: 戻り値型が一致しない */</span></span>
<span id="cb255-2"><a href="#cb255-2" aria-hidden="true" tabindex="-1"></a><span class="dt">double</span> divide_func<span class="op">(</span><span class="dt">int</span> a<span class="op">,</span> <span class="dt">int</span> b<span class="op">)</span> <span class="op">{</span> <span class="cf">return</span> <span class="op">(</span><span class="dt">double</span><span class="op">)</span>a <span class="op">/</span> b<span class="op">;</span> <span class="op">}</span></span>
<span id="cb255-3"><a href="#cb255-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> <span class="op">(*</span>math_op<span class="op">)(</span><span class="dt">int</span><span class="op">,</span> <span class="dt">int</span><span class="op">)</span> <span class="op">=</span> divide_func<span class="op">;</span>  <span class="co">/* 型エラー */</span></span>
<span id="cb255-4"><a href="#cb255-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb255-5"><a href="#cb255-5" aria-hidden="true" tabindex="-1"></a><span class="co">/* OK: 戻り値型を一致させる */</span></span>
<span id="cb255-6"><a href="#cb255-6" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> divide_func<span class="op">(</span><span class="dt">int</span> a<span class="op">,</span> <span class="dt">int</span> b<span class="op">)</span> <span class="op">{</span> <span class="cf">return</span> a <span class="op">/</span> b<span class="op">;</span> <span class="op">}</span></span>
<span id="cb255-7"><a href="#cb255-7" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> <span class="op">(*</span>math_op<span class="op">)(</span><span class="dt">int</span><span class="op">,</span> <span class="dt">int</span><span class="op">)</span> <span class="op">=</span> divide_func<span class="op">;</span></span></code></pre></div>
<h2 id="次の章へ-10">次の章へ</h2>
<p>関数ポインタを理解したら、<a
href="../advanced/README.md">複数ファイル・発展技術</a>
に進んでください。</p>
<h2 id="参考資料-10">参考資料</h2>
<ul>
<li><a
href="https://ja.cppreference.com/w/c/language/pointer">C言語関数ポインタリファレンス</a></li>
<li><a
href="https://en.wikipedia.org/wiki/Callback_(computer_programming)">コールバック関数の設計パターン</a></li>
<li><a
href="https://www.learn-c.org/en/Function_Pointers">関数ポインタの活用例</a></li>
</ul>
<h2 id="サンプルコード-18">サンプルコード</h2>
<h3 id="callback_functions.c">callback_functions.c</h3>
<div class="sourceCode" id="cb256"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb256-1"><a href="#cb256-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* コールバック関数の活用 */</span></span>
<span id="cb256-2"><a href="#cb256-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb256-3"><a href="#cb256-3" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdlib.h&gt;</span></span>
<span id="cb256-4"><a href="#cb256-4" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;string.h&gt;</span></span>
<span id="cb256-5"><a href="#cb256-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb256-6"><a href="#cb256-6" aria-hidden="true" tabindex="-1"></a><span class="co">/* 配列処理用のコールバック関数群 */</span></span>
<span id="cb256-7"><a href="#cb256-7" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> square<span class="op">(</span><span class="dt">int</span> x<span class="op">)</span> <span class="op">{</span> <span class="cf">return</span> x <span class="op">*</span> x<span class="op">;</span> <span class="op">}</span></span>
<span id="cb256-8"><a href="#cb256-8" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> cube<span class="op">(</span><span class="dt">int</span> x<span class="op">)</span> <span class="op">{</span> <span class="cf">return</span> x <span class="op">*</span> x <span class="op">*</span> x<span class="op">;</span> <span class="op">}</span></span>
<span id="cb256-9"><a href="#cb256-9" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> double_value<span class="op">(</span><span class="dt">int</span> x<span class="op">)</span> <span class="op">{</span> <span class="cf">return</span> x <span class="op">*</span> <span class="dv">2</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb256-10"><a href="#cb256-10" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> increment<span class="op">(</span><span class="dt">int</span> x<span class="op">)</span> <span class="op">{</span> <span class="cf">return</span> x <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb256-11"><a href="#cb256-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb256-12"><a href="#cb256-12" aria-hidden="true" tabindex="-1"></a><span class="co">/* 条件判定用のコールバック関数群 */</span></span>
<span id="cb256-13"><a href="#cb256-13" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> is_even<span class="op">(</span><span class="dt">int</span> x<span class="op">)</span> <span class="op">{</span> <span class="cf">return</span> x <span class="op">%</span> <span class="dv">2</span> <span class="op">==</span> <span class="dv">0</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb256-14"><a href="#cb256-14" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> is_odd<span class="op">(</span><span class="dt">int</span> x<span class="op">)</span> <span class="op">{</span> <span class="cf">return</span> x <span class="op">%</span> <span class="dv">2</span> <span class="op">!=</span> <span class="dv">0</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb256-15"><a href="#cb256-15" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> is_positive<span class="op">(</span><span class="dt">int</span> x<span class="op">)</span> <span class="op">{</span> <span class="cf">return</span> x <span class="op">&gt;</span> <span class="dv">0</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb256-16"><a href="#cb256-16" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> is_negative<span class="op">(</span><span class="dt">int</span> x<span class="op">)</span> <span class="op">{</span> <span class="cf">return</span> x <span class="op">&lt;</span> <span class="dv">0</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb256-17"><a href="#cb256-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb256-18"><a href="#cb256-18" aria-hidden="true" tabindex="-1"></a><span class="co">/* 配列の各要素に関数を適用 */</span></span>
<span id="cb256-19"><a href="#cb256-19" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> apply_to_array<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> size<span class="op">,</span> <span class="dt">int</span> <span class="op">(*</span>func<span class="op">)(</span><span class="dt">int</span><span class="op">))</span></span>
<span id="cb256-20"><a href="#cb256-20" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb256-21"><a href="#cb256-21" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb256-22"><a href="#cb256-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> size<span class="op">;</span> i<span class="op">++)</span></span>
<span id="cb256-23"><a href="#cb256-23" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb256-24"><a href="#cb256-24" aria-hidden="true" tabindex="-1"></a>        arr<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> func<span class="op">(</span>arr<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb256-25"><a href="#cb256-25" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb256-26"><a href="#cb256-26" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb256-27"><a href="#cb256-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb256-28"><a href="#cb256-28" aria-hidden="true" tabindex="-1"></a><span class="co">/* 配列をフィルタリング */</span></span>
<span id="cb256-29"><a href="#cb256-29" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> filter_array<span class="op">(</span><span class="dt">int</span> source<span class="op">[],</span> <span class="dt">int</span> dest<span class="op">[],</span> <span class="dt">int</span> size<span class="op">,</span> <span class="dt">int</span> <span class="op">(*</span>predicate<span class="op">)(</span><span class="dt">int</span><span class="op">))</span></span>
<span id="cb256-30"><a href="#cb256-30" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb256-31"><a href="#cb256-31" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> count <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb256-32"><a href="#cb256-32" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb256-33"><a href="#cb256-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb256-34"><a href="#cb256-34" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> size<span class="op">;</span> i<span class="op">++)</span></span>
<span id="cb256-35"><a href="#cb256-35" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb256-36"><a href="#cb256-36" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>predicate<span class="op">(</span>source<span class="op">[</span>i<span class="op">]))</span></span>
<span id="cb256-37"><a href="#cb256-37" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span></span>
<span id="cb256-38"><a href="#cb256-38" aria-hidden="true" tabindex="-1"></a>            dest<span class="op">[</span>count<span class="op">++]</span> <span class="op">=</span> source<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb256-39"><a href="#cb256-39" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb256-40"><a href="#cb256-40" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb256-41"><a href="#cb256-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb256-42"><a href="#cb256-42" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> count<span class="op">;</span></span>
<span id="cb256-43"><a href="#cb256-43" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb256-44"><a href="#cb256-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb256-45"><a href="#cb256-45" aria-hidden="true" tabindex="-1"></a><span class="co">/* 配列を表示する関数 */</span></span>
<span id="cb256-46"><a href="#cb256-46" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> print_array<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> size<span class="op">,</span> <span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>label<span class="op">)</span></span>
<span id="cb256-47"><a href="#cb256-47" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb256-48"><a href="#cb256-48" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb256-49"><a href="#cb256-49" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%s</span><span class="st">: &quot;</span><span class="op">,</span> label<span class="op">);</span></span>
<span id="cb256-50"><a href="#cb256-50" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> size<span class="op">;</span> i<span class="op">++)</span></span>
<span id="cb256-51"><a href="#cb256-51" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb256-52"><a href="#cb256-52" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st"> &quot;</span><span class="op">,</span> arr<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb256-53"><a href="#cb256-53" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb256-54"><a href="#cb256-54" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb256-55"><a href="#cb256-55" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb256-56"><a href="#cb256-56" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb256-57"><a href="#cb256-57" aria-hidden="true" tabindex="-1"></a><span class="co">/* 文字列処理用のコールバック関数群 */</span></span>
<span id="cb256-58"><a href="#cb256-58" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> to_upper_char<span class="op">(</span><span class="dt">char</span> <span class="op">*</span>c<span class="op">)</span></span>
<span id="cb256-59"><a href="#cb256-59" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb256-60"><a href="#cb256-60" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(*</span>c <span class="op">&gt;=</span> <span class="ch">&#39;a&#39;</span> <span class="op">&amp;&amp;</span> <span class="op">*</span>c <span class="op">&lt;=</span> <span class="ch">&#39;z&#39;</span><span class="op">)</span></span>
<span id="cb256-61"><a href="#cb256-61" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb256-62"><a href="#cb256-62" aria-hidden="true" tabindex="-1"></a>        <span class="op">*</span>c <span class="op">=</span> <span class="op">*</span>c <span class="op">-</span> <span class="ch">&#39;a&#39;</span> <span class="op">+</span> <span class="ch">&#39;A&#39;</span><span class="op">;</span></span>
<span id="cb256-63"><a href="#cb256-63" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb256-64"><a href="#cb256-64" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb256-65"><a href="#cb256-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb256-66"><a href="#cb256-66" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> to_lower_char<span class="op">(</span><span class="dt">char</span> <span class="op">*</span>c<span class="op">)</span></span>
<span id="cb256-67"><a href="#cb256-67" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb256-68"><a href="#cb256-68" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(*</span>c <span class="op">&gt;=</span> <span class="ch">&#39;A&#39;</span> <span class="op">&amp;&amp;</span> <span class="op">*</span>c <span class="op">&lt;=</span> <span class="ch">&#39;Z&#39;</span><span class="op">)</span></span>
<span id="cb256-69"><a href="#cb256-69" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb256-70"><a href="#cb256-70" aria-hidden="true" tabindex="-1"></a>        <span class="op">*</span>c <span class="op">=</span> <span class="op">*</span>c <span class="op">-</span> <span class="ch">&#39;A&#39;</span> <span class="op">+</span> <span class="ch">&#39;a&#39;</span><span class="op">;</span></span>
<span id="cb256-71"><a href="#cb256-71" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb256-72"><a href="#cb256-72" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb256-73"><a href="#cb256-73" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb256-74"><a href="#cb256-74" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> replace_space_with_underscore<span class="op">(</span><span class="dt">char</span> <span class="op">*</span>c<span class="op">)</span></span>
<span id="cb256-75"><a href="#cb256-75" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb256-76"><a href="#cb256-76" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(*</span>c <span class="op">==</span> <span class="ch">&#39; &#39;</span><span class="op">)</span></span>
<span id="cb256-77"><a href="#cb256-77" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb256-78"><a href="#cb256-78" aria-hidden="true" tabindex="-1"></a>        <span class="op">*</span>c <span class="op">=</span> <span class="ch">&#39;_&#39;</span><span class="op">;</span></span>
<span id="cb256-79"><a href="#cb256-79" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb256-80"><a href="#cb256-80" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb256-81"><a href="#cb256-81" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb256-82"><a href="#cb256-82" aria-hidden="true" tabindex="-1"></a><span class="co">/* 文字列の各文字にコールバック関数を適用 */</span></span>
<span id="cb256-83"><a href="#cb256-83" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> process_string<span class="op">(</span><span class="dt">char</span> str<span class="op">[],</span> <span class="dt">void</span> <span class="op">(*</span>processor<span class="op">)(</span><span class="dt">char</span> <span class="op">*))</span></span>
<span id="cb256-84"><a href="#cb256-84" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb256-85"><a href="#cb256-85" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb256-86"><a href="#cb256-86" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> str<span class="op">[</span>i<span class="op">]</span> <span class="op">!=</span> <span class="ch">&#39;</span><span class="sc">\0</span><span class="ch">&#39;</span><span class="op">;</span> i<span class="op">++)</span></span>
<span id="cb256-87"><a href="#cb256-87" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb256-88"><a href="#cb256-88" aria-hidden="true" tabindex="-1"></a>        processor<span class="op">(&amp;</span>str<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb256-89"><a href="#cb256-89" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb256-90"><a href="#cb256-90" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb256-91"><a href="#cb256-91" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb256-92"><a href="#cb256-92" aria-hidden="true" tabindex="-1"></a><span class="co">/* ソート用の比較関数 */</span></span>
<span id="cb256-93"><a href="#cb256-93" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> compare_ascending<span class="op">(</span><span class="dt">int</span> a<span class="op">,</span> <span class="dt">int</span> b<span class="op">)</span></span>
<span id="cb256-94"><a href="#cb256-94" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb256-95"><a href="#cb256-95" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> a <span class="op">-</span> b<span class="op">;</span></span>
<span id="cb256-96"><a href="#cb256-96" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb256-97"><a href="#cb256-97" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb256-98"><a href="#cb256-98" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> compare_descending<span class="op">(</span><span class="dt">int</span> a<span class="op">,</span> <span class="dt">int</span> b<span class="op">)</span></span>
<span id="cb256-99"><a href="#cb256-99" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb256-100"><a href="#cb256-100" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> b <span class="op">-</span> a<span class="op">;</span></span>
<span id="cb256-101"><a href="#cb256-101" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb256-102"><a href="#cb256-102" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb256-103"><a href="#cb256-103" aria-hidden="true" tabindex="-1"></a><span class="co">/* バブルソート（コールバック版） */</span></span>
<span id="cb256-104"><a href="#cb256-104" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> bubble_sort<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> size<span class="op">,</span> <span class="dt">int</span> <span class="op">(*</span>compare<span class="op">)(</span><span class="dt">int</span><span class="op">,</span> <span class="dt">int</span><span class="op">))</span></span>
<span id="cb256-105"><a href="#cb256-105" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb256-106"><a href="#cb256-106" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">,</span> j<span class="op">,</span> temp<span class="op">;</span></span>
<span id="cb256-107"><a href="#cb256-107" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb256-108"><a href="#cb256-108" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> size <span class="op">-</span> <span class="dv">1</span><span class="op">;</span> i<span class="op">++)</span></span>
<span id="cb256-109"><a href="#cb256-109" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb256-110"><a href="#cb256-110" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span>j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> j <span class="op">&lt;</span> size <span class="op">-</span> <span class="dv">1</span> <span class="op">-</span> i<span class="op">;</span> j<span class="op">++)</span></span>
<span id="cb256-111"><a href="#cb256-111" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span></span>
<span id="cb256-112"><a href="#cb256-112" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>compare<span class="op">(</span>arr<span class="op">[</span>j<span class="op">],</span> arr<span class="op">[</span>j <span class="op">+</span> <span class="dv">1</span><span class="op">])</span> <span class="op">&gt;</span> <span class="dv">0</span><span class="op">)</span></span>
<span id="cb256-113"><a href="#cb256-113" aria-hidden="true" tabindex="-1"></a>            <span class="op">{</span></span>
<span id="cb256-114"><a href="#cb256-114" aria-hidden="true" tabindex="-1"></a>                temp <span class="op">=</span> arr<span class="op">[</span>j<span class="op">];</span></span>
<span id="cb256-115"><a href="#cb256-115" aria-hidden="true" tabindex="-1"></a>                arr<span class="op">[</span>j<span class="op">]</span> <span class="op">=</span> arr<span class="op">[</span>j <span class="op">+</span> <span class="dv">1</span><span class="op">];</span></span>
<span id="cb256-116"><a href="#cb256-116" aria-hidden="true" tabindex="-1"></a>                arr<span class="op">[</span>j <span class="op">+</span> <span class="dv">1</span><span class="op">]</span> <span class="op">=</span> temp<span class="op">;</span></span>
<span id="cb256-117"><a href="#cb256-117" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb256-118"><a href="#cb256-118" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb256-119"><a href="#cb256-119" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb256-120"><a href="#cb256-120" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb256-121"><a href="#cb256-121" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb256-122"><a href="#cb256-122" aria-hidden="true" tabindex="-1"></a><span class="co">/* イベントハンドラシステム */</span></span>
<span id="cb256-123"><a href="#cb256-123" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> on_start_event<span class="op">(</span><span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>message<span class="op">)</span></span>
<span id="cb256-124"><a href="#cb256-124" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb256-125"><a href="#cb256-125" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;[開始イベント] </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> message<span class="op">);</span></span>
<span id="cb256-126"><a href="#cb256-126" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb256-127"><a href="#cb256-127" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb256-128"><a href="#cb256-128" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> on_stop_event<span class="op">(</span><span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>message<span class="op">)</span></span>
<span id="cb256-129"><a href="#cb256-129" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb256-130"><a href="#cb256-130" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;[停止イベント] </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> message<span class="op">);</span></span>
<span id="cb256-131"><a href="#cb256-131" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb256-132"><a href="#cb256-132" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb256-133"><a href="#cb256-133" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> on_error_event<span class="op">(</span><span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>message<span class="op">)</span></span>
<span id="cb256-134"><a href="#cb256-134" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb256-135"><a href="#cb256-135" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;[エラーイベント] </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> message<span class="op">);</span></span>
<span id="cb256-136"><a href="#cb256-136" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb256-137"><a href="#cb256-137" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb256-138"><a href="#cb256-138" aria-hidden="true" tabindex="-1"></a><span class="co">/* イベントを処理する関数 */</span></span>
<span id="cb256-139"><a href="#cb256-139" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> trigger_event<span class="op">(</span><span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>message<span class="op">,</span> <span class="dt">void</span> <span class="op">(*</span>event_handler<span class="op">)(</span><span class="dt">const</span> <span class="dt">char</span> <span class="op">*))</span></span>
<span id="cb256-140"><a href="#cb256-140" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb256-141"><a href="#cb256-141" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>event_handler <span class="op">!=</span> NULL<span class="op">)</span></span>
<span id="cb256-142"><a href="#cb256-142" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb256-143"><a href="#cb256-143" aria-hidden="true" tabindex="-1"></a>        event_handler<span class="op">(</span>message<span class="op">);</span></span>
<span id="cb256-144"><a href="#cb256-144" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb256-145"><a href="#cb256-145" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb256-146"><a href="#cb256-146" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb256-147"><a href="#cb256-147" aria-hidden="true" tabindex="-1"></a><span class="co">/* 計算処理のログ付き実行 */</span></span>
<span id="cb256-148"><a href="#cb256-148" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> execute_with_logging<span class="op">(</span><span class="dt">int</span> a<span class="op">,</span> <span class="dt">int</span> b<span class="op">,</span> <span class="dt">int</span> <span class="op">(*</span>operation<span class="op">)(</span><span class="dt">int</span><span class="op">,</span> <span class="dt">int</span><span class="op">),</span> <span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>op_name<span class="op">)</span></span>
<span id="cb256-149"><a href="#cb256-149" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb256-150"><a href="#cb256-150" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;計算開始: </span><span class="sc">%s</span><span class="st">(</span><span class="sc">%d</span><span class="st">, </span><span class="sc">%d</span><span class="st">)</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> op_name<span class="op">,</span> a<span class="op">,</span> b<span class="op">);</span></span>
<span id="cb256-151"><a href="#cb256-151" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> result <span class="op">=</span> operation<span class="op">(</span>a<span class="op">,</span> b<span class="op">);</span></span>
<span id="cb256-152"><a href="#cb256-152" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;計算完了: </span><span class="sc">%s</span><span class="st">(</span><span class="sc">%d</span><span class="st">, </span><span class="sc">%d</span><span class="st">) = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> op_name<span class="op">,</span> a<span class="op">,</span> b<span class="op">,</span> result<span class="op">);</span></span>
<span id="cb256-153"><a href="#cb256-153" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> result<span class="op">;</span></span>
<span id="cb256-154"><a href="#cb256-154" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb256-155"><a href="#cb256-155" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb256-156"><a href="#cb256-156" aria-hidden="true" tabindex="-1"></a><span class="co">/* 簡単な加算関数（ログ用） */</span></span>
<span id="cb256-157"><a href="#cb256-157" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> add_for_logging<span class="op">(</span><span class="dt">int</span> a<span class="op">,</span> <span class="dt">int</span> b<span class="op">)</span></span>
<span id="cb256-158"><a href="#cb256-158" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb256-159"><a href="#cb256-159" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> a <span class="op">+</span> b<span class="op">;</span></span>
<span id="cb256-160"><a href="#cb256-160" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb256-161"><a href="#cb256-161" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb256-162"><a href="#cb256-162" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> multiply_for_logging<span class="op">(</span><span class="dt">int</span> a<span class="op">,</span> <span class="dt">int</span> b<span class="op">)</span></span>
<span id="cb256-163"><a href="#cb256-163" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb256-164"><a href="#cb256-164" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> a <span class="op">*</span> b<span class="op">;</span></span>
<span id="cb256-165"><a href="#cb256-165" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb256-166"><a href="#cb256-166" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb256-167"><a href="#cb256-167" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb256-168"><a href="#cb256-168" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb256-169"><a href="#cb256-169" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== コールバック関数の活用 ===</span><span class="sc">\n\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb256-170"><a href="#cb256-170" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb256-171"><a href="#cb256-171" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 1. 配列処理のコールバック */</span></span>
<span id="cb256-172"><a href="#cb256-172" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== 配列処理のコールバック ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb256-173"><a href="#cb256-173" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> numbers<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">5</span><span class="op">};</span></span>
<span id="cb256-174"><a href="#cb256-174" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> size <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>numbers<span class="op">)</span> <span class="op">/</span> <span class="kw">sizeof</span><span class="op">(</span>numbers<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb256-175"><a href="#cb256-175" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> temp<span class="op">[</span><span class="dv">5</span><span class="op">];</span></span>
<span id="cb256-176"><a href="#cb256-176" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb256-177"><a href="#cb256-177" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb256-178"><a href="#cb256-178" aria-hidden="true" tabindex="-1"></a>    print_array<span class="op">(</span>numbers<span class="op">,</span> size<span class="op">,</span> <span class="st">&quot;元の配列&quot;</span><span class="op">);</span></span>
<span id="cb256-179"><a href="#cb256-179" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb256-180"><a href="#cb256-180" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 2乗を適用 */</span></span>
<span id="cb256-181"><a href="#cb256-181" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> size<span class="op">;</span> i<span class="op">++)</span></span>
<span id="cb256-182"><a href="#cb256-182" aria-hidden="true" tabindex="-1"></a>        temp<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> numbers<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb256-183"><a href="#cb256-183" aria-hidden="true" tabindex="-1"></a>    apply_to_array<span class="op">(</span>temp<span class="op">,</span> size<span class="op">,</span> square<span class="op">);</span></span>
<span id="cb256-184"><a href="#cb256-184" aria-hidden="true" tabindex="-1"></a>    print_array<span class="op">(</span>temp<span class="op">,</span> size<span class="op">,</span> <span class="st">&quot;2乗後&quot;</span><span class="op">);</span></span>
<span id="cb256-185"><a href="#cb256-185" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb256-186"><a href="#cb256-186" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 3乗を適用 */</span></span>
<span id="cb256-187"><a href="#cb256-187" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> size<span class="op">;</span> i<span class="op">++)</span></span>
<span id="cb256-188"><a href="#cb256-188" aria-hidden="true" tabindex="-1"></a>        temp<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> numbers<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb256-189"><a href="#cb256-189" aria-hidden="true" tabindex="-1"></a>    apply_to_array<span class="op">(</span>temp<span class="op">,</span> size<span class="op">,</span> cube<span class="op">);</span></span>
<span id="cb256-190"><a href="#cb256-190" aria-hidden="true" tabindex="-1"></a>    print_array<span class="op">(</span>temp<span class="op">,</span> size<span class="op">,</span> <span class="st">&quot;3乗後&quot;</span><span class="op">);</span></span>
<span id="cb256-191"><a href="#cb256-191" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb256-192"><a href="#cb256-192" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 2倍を適用 */</span></span>
<span id="cb256-193"><a href="#cb256-193" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> size<span class="op">;</span> i<span class="op">++)</span></span>
<span id="cb256-194"><a href="#cb256-194" aria-hidden="true" tabindex="-1"></a>        temp<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> numbers<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb256-195"><a href="#cb256-195" aria-hidden="true" tabindex="-1"></a>    apply_to_array<span class="op">(</span>temp<span class="op">,</span> size<span class="op">,</span> double_value<span class="op">);</span></span>
<span id="cb256-196"><a href="#cb256-196" aria-hidden="true" tabindex="-1"></a>    print_array<span class="op">(</span>temp<span class="op">,</span> size<span class="op">,</span> <span class="st">&quot;2倍後&quot;</span><span class="op">);</span></span>
<span id="cb256-197"><a href="#cb256-197" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb256-198"><a href="#cb256-198" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 2. 配列フィルタリング */</span></span>
<span id="cb256-199"><a href="#cb256-199" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">=== 配列フィルタリング ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb256-200"><a href="#cb256-200" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> test_array<span class="op">[]</span> <span class="op">=</span> <span class="op">{-</span><span class="dv">3</span><span class="op">,</span> <span class="op">-</span><span class="dv">1</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">5</span><span class="op">,</span> <span class="dv">7</span><span class="op">,</span> <span class="dv">8</span><span class="op">};</span></span>
<span id="cb256-201"><a href="#cb256-201" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> test_size <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>test_array<span class="op">)</span> <span class="op">/</span> <span class="kw">sizeof</span><span class="op">(</span>test_array<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb256-202"><a href="#cb256-202" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> filtered<span class="op">[</span><span class="dv">8</span><span class="op">];</span></span>
<span id="cb256-203"><a href="#cb256-203" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> filtered_count<span class="op">;</span></span>
<span id="cb256-204"><a href="#cb256-204" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb256-205"><a href="#cb256-205" aria-hidden="true" tabindex="-1"></a>    print_array<span class="op">(</span>test_array<span class="op">,</span> test_size<span class="op">,</span> <span class="st">&quot;元の配列&quot;</span><span class="op">);</span></span>
<span id="cb256-206"><a href="#cb256-206" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb256-207"><a href="#cb256-207" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 偶数をフィルタリング */</span></span>
<span id="cb256-208"><a href="#cb256-208" aria-hidden="true" tabindex="-1"></a>    filtered_count <span class="op">=</span> filter_array<span class="op">(</span>test_array<span class="op">,</span> filtered<span class="op">,</span> test_size<span class="op">,</span> is_even<span class="op">);</span></span>
<span id="cb256-209"><a href="#cb256-209" aria-hidden="true" tabindex="-1"></a>    print_array<span class="op">(</span>filtered<span class="op">,</span> filtered_count<span class="op">,</span> <span class="st">&quot;偶数のみ&quot;</span><span class="op">);</span></span>
<span id="cb256-210"><a href="#cb256-210" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb256-211"><a href="#cb256-211" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 奇数をフィルタリング */</span></span>
<span id="cb256-212"><a href="#cb256-212" aria-hidden="true" tabindex="-1"></a>    filtered_count <span class="op">=</span> filter_array<span class="op">(</span>test_array<span class="op">,</span> filtered<span class="op">,</span> test_size<span class="op">,</span> is_odd<span class="op">);</span></span>
<span id="cb256-213"><a href="#cb256-213" aria-hidden="true" tabindex="-1"></a>    print_array<span class="op">(</span>filtered<span class="op">,</span> filtered_count<span class="op">,</span> <span class="st">&quot;奇数のみ&quot;</span><span class="op">);</span></span>
<span id="cb256-214"><a href="#cb256-214" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb256-215"><a href="#cb256-215" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 正の数をフィルタリング */</span></span>
<span id="cb256-216"><a href="#cb256-216" aria-hidden="true" tabindex="-1"></a>    filtered_count <span class="op">=</span> filter_array<span class="op">(</span>test_array<span class="op">,</span> filtered<span class="op">,</span> test_size<span class="op">,</span> is_positive<span class="op">);</span></span>
<span id="cb256-217"><a href="#cb256-217" aria-hidden="true" tabindex="-1"></a>    print_array<span class="op">(</span>filtered<span class="op">,</span> filtered_count<span class="op">,</span> <span class="st">&quot;正の数のみ&quot;</span><span class="op">);</span></span>
<span id="cb256-218"><a href="#cb256-218" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb256-219"><a href="#cb256-219" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 3. 文字列処理のコールバック */</span></span>
<span id="cb256-220"><a href="#cb256-220" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">=== 文字列処理のコールバック ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb256-221"><a href="#cb256-221" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> text1<span class="op">[]</span> <span class="op">=</span> <span class="st">&quot;Hello World&quot;</span><span class="op">;</span></span>
<span id="cb256-222"><a href="#cb256-222" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> text2<span class="op">[]</span> <span class="op">=</span> <span class="st">&quot;Hello World&quot;</span><span class="op">;</span></span>
<span id="cb256-223"><a href="#cb256-223" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> text3<span class="op">[]</span> <span class="op">=</span> <span class="st">&quot;Hello World&quot;</span><span class="op">;</span></span>
<span id="cb256-224"><a href="#cb256-224" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb256-225"><a href="#cb256-225" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;元の文字列: &#39;</span><span class="sc">%s</span><span class="st">&#39;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> text1<span class="op">);</span></span>
<span id="cb256-226"><a href="#cb256-226" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb256-227"><a href="#cb256-227" aria-hidden="true" tabindex="-1"></a>    process_string<span class="op">(</span>text1<span class="op">,</span> to_upper_char<span class="op">);</span></span>
<span id="cb256-228"><a href="#cb256-228" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;大文字変換: &#39;</span><span class="sc">%s</span><span class="st">&#39;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> text1<span class="op">);</span></span>
<span id="cb256-229"><a href="#cb256-229" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb256-230"><a href="#cb256-230" aria-hidden="true" tabindex="-1"></a>    process_string<span class="op">(</span>text2<span class="op">,</span> to_lower_char<span class="op">);</span></span>
<span id="cb256-231"><a href="#cb256-231" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;小文字変換: &#39;</span><span class="sc">%s</span><span class="st">&#39;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> text2<span class="op">);</span></span>
<span id="cb256-232"><a href="#cb256-232" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb256-233"><a href="#cb256-233" aria-hidden="true" tabindex="-1"></a>    process_string<span class="op">(</span>text3<span class="op">,</span> replace_space_with_underscore<span class="op">);</span></span>
<span id="cb256-234"><a href="#cb256-234" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;スペース置換: &#39;</span><span class="sc">%s</span><span class="st">&#39;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> text3<span class="op">);</span></span>
<span id="cb256-235"><a href="#cb256-235" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb256-236"><a href="#cb256-236" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 4. ソートのコールバック */</span></span>
<span id="cb256-237"><a href="#cb256-237" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">=== ソートのコールバック ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb256-238"><a href="#cb256-238" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> sort_array<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">64</span><span class="op">,</span> <span class="dv">34</span><span class="op">,</span> <span class="dv">25</span><span class="op">,</span> <span class="dv">12</span><span class="op">,</span> <span class="dv">22</span><span class="op">,</span> <span class="dv">11</span><span class="op">,</span> <span class="dv">90</span><span class="op">,</span> <span class="dv">5</span><span class="op">};</span></span>
<span id="cb256-239"><a href="#cb256-239" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> sort_size <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>sort_array<span class="op">)</span> <span class="op">/</span> <span class="kw">sizeof</span><span class="op">(</span>sort_array<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb256-240"><a href="#cb256-240" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> sort_temp<span class="op">[</span><span class="dv">8</span><span class="op">];</span></span>
<span id="cb256-241"><a href="#cb256-241" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb256-242"><a href="#cb256-242" aria-hidden="true" tabindex="-1"></a>    print_array<span class="op">(</span>sort_array<span class="op">,</span> sort_size<span class="op">,</span> <span class="st">&quot;元の配列&quot;</span><span class="op">);</span></span>
<span id="cb256-243"><a href="#cb256-243" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb256-244"><a href="#cb256-244" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 昇順ソート */</span></span>
<span id="cb256-245"><a href="#cb256-245" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> sort_size<span class="op">;</span> i<span class="op">++)</span></span>
<span id="cb256-246"><a href="#cb256-246" aria-hidden="true" tabindex="-1"></a>        sort_temp<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> sort_array<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb256-247"><a href="#cb256-247" aria-hidden="true" tabindex="-1"></a>    bubble_sort<span class="op">(</span>sort_temp<span class="op">,</span> sort_size<span class="op">,</span> compare_ascending<span class="op">);</span></span>
<span id="cb256-248"><a href="#cb256-248" aria-hidden="true" tabindex="-1"></a>    print_array<span class="op">(</span>sort_temp<span class="op">,</span> sort_size<span class="op">,</span> <span class="st">&quot;昇順ソート&quot;</span><span class="op">);</span></span>
<span id="cb256-249"><a href="#cb256-249" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb256-250"><a href="#cb256-250" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 降順ソート */</span></span>
<span id="cb256-251"><a href="#cb256-251" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> sort_size<span class="op">;</span> i<span class="op">++)</span></span>
<span id="cb256-252"><a href="#cb256-252" aria-hidden="true" tabindex="-1"></a>        sort_temp<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> sort_array<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb256-253"><a href="#cb256-253" aria-hidden="true" tabindex="-1"></a>    bubble_sort<span class="op">(</span>sort_temp<span class="op">,</span> sort_size<span class="op">,</span> compare_descending<span class="op">);</span></span>
<span id="cb256-254"><a href="#cb256-254" aria-hidden="true" tabindex="-1"></a>    print_array<span class="op">(</span>sort_temp<span class="op">,</span> sort_size<span class="op">,</span> <span class="st">&quot;降順ソート&quot;</span><span class="op">);</span></span>
<span id="cb256-255"><a href="#cb256-255" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb256-256"><a href="#cb256-256" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 5. イベントハンドラシステム */</span></span>
<span id="cb256-257"><a href="#cb256-257" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">=== イベントハンドラシステム ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb256-258"><a href="#cb256-258" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb256-259"><a href="#cb256-259" aria-hidden="true" tabindex="-1"></a>    trigger_event<span class="op">(</span><span class="st">&quot;アプリケーション開始&quot;</span><span class="op">,</span> on_start_event<span class="op">);</span></span>
<span id="cb256-260"><a href="#cb256-260" aria-hidden="true" tabindex="-1"></a>    trigger_event<span class="op">(</span><span class="st">&quot;処理中にエラーが発生&quot;</span><span class="op">,</span> on_error_event<span class="op">);</span></span>
<span id="cb256-261"><a href="#cb256-261" aria-hidden="true" tabindex="-1"></a>    trigger_event<span class="op">(</span><span class="st">&quot;アプリケーション終了&quot;</span><span class="op">,</span> on_stop_event<span class="op">);</span></span>
<span id="cb256-262"><a href="#cb256-262" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb256-263"><a href="#cb256-263" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 6. ログ付き計算実行 */</span></span>
<span id="cb256-264"><a href="#cb256-264" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">=== ログ付き計算実行 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb256-265"><a href="#cb256-265" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb256-266"><a href="#cb256-266" aria-hidden="true" tabindex="-1"></a>    execute_with_logging<span class="op">(</span><span class="dv">10</span><span class="op">,</span> <span class="dv">5</span><span class="op">,</span> add_for_logging<span class="op">,</span> <span class="st">&quot;加算&quot;</span><span class="op">);</span></span>
<span id="cb256-267"><a href="#cb256-267" aria-hidden="true" tabindex="-1"></a>    execute_with_logging<span class="op">(</span><span class="dv">7</span><span class="op">,</span> <span class="dv">8</span><span class="op">,</span> multiply_for_logging<span class="op">,</span> <span class="st">&quot;乗算&quot;</span><span class="op">);</span></span>
<span id="cb256-268"><a href="#cb256-268" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb256-269"><a href="#cb256-269" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">=== コールバック関数デモ完了 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb256-270"><a href="#cb256-270" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb256-271"><a href="#cb256-271" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb256-272"><a href="#cb256-272" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<blockquote>
<p>C99版は<a
href="callback_functions_c99.c">こちら</a>を参照してください。</p>
</blockquote>
<h3 id="function_pointer_arrays.c">function_pointer_arrays.c</h3>
<div class="sourceCode" id="cb257"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb257-1"><a href="#cb257-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* 関数ポインタ配列の活用 */</span></span>
<span id="cb257-2"><a href="#cb257-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb257-3"><a href="#cb257-3" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;string.h&gt;</span></span>
<span id="cb257-4"><a href="#cb257-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb257-5"><a href="#cb257-5" aria-hidden="true" tabindex="-1"></a><span class="co">/* 計算機システム用の演算関数群 */</span></span>
<span id="cb257-6"><a href="#cb257-6" aria-hidden="true" tabindex="-1"></a><span class="dt">double</span> add_operation<span class="op">(</span><span class="dt">double</span> a<span class="op">,</span> <span class="dt">double</span> b<span class="op">)</span> <span class="op">{</span> <span class="cf">return</span> a <span class="op">+</span> b<span class="op">;</span> <span class="op">}</span></span>
<span id="cb257-7"><a href="#cb257-7" aria-hidden="true" tabindex="-1"></a><span class="dt">double</span> sub_operation<span class="op">(</span><span class="dt">double</span> a<span class="op">,</span> <span class="dt">double</span> b<span class="op">)</span> <span class="op">{</span> <span class="cf">return</span> a <span class="op">-</span> b<span class="op">;</span> <span class="op">}</span></span>
<span id="cb257-8"><a href="#cb257-8" aria-hidden="true" tabindex="-1"></a><span class="dt">double</span> mul_operation<span class="op">(</span><span class="dt">double</span> a<span class="op">,</span> <span class="dt">double</span> b<span class="op">)</span> <span class="op">{</span> <span class="cf">return</span> a <span class="op">*</span> b<span class="op">;</span> <span class="op">}</span></span>
<span id="cb257-9"><a href="#cb257-9" aria-hidden="true" tabindex="-1"></a><span class="dt">double</span> div_operation<span class="op">(</span><span class="dt">double</span> a<span class="op">,</span> <span class="dt">double</span> b<span class="op">)</span></span>
<span id="cb257-10"><a href="#cb257-10" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb257-11"><a href="#cb257-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>b <span class="op">!=</span> <span class="fl">0.0</span><span class="op">)</span></span>
<span id="cb257-12"><a href="#cb257-12" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> a <span class="op">/</span> b<span class="op">;</span></span>
<span id="cb257-13"><a href="#cb257-13" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;エラー: ゼロ除算</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb257-14"><a href="#cb257-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="fl">0.0</span><span class="op">;</span></span>
<span id="cb257-15"><a href="#cb257-15" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb257-16"><a href="#cb257-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb257-17"><a href="#cb257-17" aria-hidden="true" tabindex="-1"></a><span class="co">/* メニューシステム用の処理関数群 */</span></span>
<span id="cb257-18"><a href="#cb257-18" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> show_profile<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb257-19"><a href="#cb257-19" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb257-20"><a href="#cb257-20" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== プロフィール表示 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb257-21"><a href="#cb257-21" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;名前: 田中太郎</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb257-22"><a href="#cb257-22" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;年齢: 25歳</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb257-23"><a href="#cb257-23" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;職業: エンジニア</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb257-24"><a href="#cb257-24" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;========================</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb257-25"><a href="#cb257-25" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb257-26"><a href="#cb257-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb257-27"><a href="#cb257-27" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> show_settings<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb257-28"><a href="#cb257-28" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb257-29"><a href="#cb257-29" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== 設定画面 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb257-30"><a href="#cb257-30" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;言語: 日本語</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb257-31"><a href="#cb257-31" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;テーマ: ダーク</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb257-32"><a href="#cb257-32" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;通知: ON</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb257-33"><a href="#cb257-33" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;===============</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb257-34"><a href="#cb257-34" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb257-35"><a href="#cb257-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb257-36"><a href="#cb257-36" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> show_help<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb257-37"><a href="#cb257-37" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb257-38"><a href="#cb257-38" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== ヘルプ ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb257-39"><a href="#cb257-39" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;このアプリケーションの使用方法:</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb257-40"><a href="#cb257-40" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;1. メニューから項目を選択</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb257-41"><a href="#cb257-41" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;2. 処理が実行されます</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb257-42"><a href="#cb257-42" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;3. メインメニューに戻ります</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb257-43"><a href="#cb257-43" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=============</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb257-44"><a href="#cb257-44" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb257-45"><a href="#cb257-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb257-46"><a href="#cb257-46" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> show_about<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb257-47"><a href="#cb257-47" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb257-48"><a href="#cb257-48" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== このアプリについて ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb257-49"><a href="#cb257-49" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;関数ポインタ配列デモ v1.0</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb257-50"><a href="#cb257-50" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;C言語学習用サンプルプログラム</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb257-51"><a href="#cb257-51" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;========================</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb257-52"><a href="#cb257-52" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb257-53"><a href="#cb257-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb257-54"><a href="#cb257-54" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> exit_application<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb257-55"><a href="#cb257-55" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb257-56"><a href="#cb257-56" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;アプリケーションを終了します。</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb257-57"><a href="#cb257-57" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb257-58"><a href="#cb257-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb257-59"><a href="#cb257-59" aria-hidden="true" tabindex="-1"></a><span class="co">/* ゲーム状態管理用の関数群 */</span></span>
<span id="cb257-60"><a href="#cb257-60" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> state_menu<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb257-61"><a href="#cb257-61" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb257-62"><a href="#cb257-62" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;[メニュー状態] ゲームメニューを表示中</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb257-63"><a href="#cb257-63" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;  利用可能なアクション: 開始(s), 設定(c), 終了(q)</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb257-64"><a href="#cb257-64" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb257-65"><a href="#cb257-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb257-66"><a href="#cb257-66" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> state_playing<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb257-67"><a href="#cb257-67" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb257-68"><a href="#cb257-68" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;[プレイ中状態] ゲームをプレイ中</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb257-69"><a href="#cb257-69" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;  利用可能なアクション: 一時停止(p), メニューに戻る(m)</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb257-70"><a href="#cb257-70" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb257-71"><a href="#cb257-71" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb257-72"><a href="#cb257-72" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> state_paused<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb257-73"><a href="#cb257-73" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb257-74"><a href="#cb257-74" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;[一時停止状態] ゲームが一時停止中</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb257-75"><a href="#cb257-75" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;  利用可能なアクション: 再開(r), メニューに戻る(m)</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb257-76"><a href="#cb257-76" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb257-77"><a href="#cb257-77" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb257-78"><a href="#cb257-78" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> state_settings<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb257-79"><a href="#cb257-79" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb257-80"><a href="#cb257-80" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;[設定状態] ゲーム設定を調整中</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb257-81"><a href="#cb257-81" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;  利用可能なアクション: 保存(s), キャンセル(c)</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb257-82"><a href="#cb257-82" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb257-83"><a href="#cb257-83" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb257-84"><a href="#cb257-84" aria-hidden="true" tabindex="-1"></a><span class="co">/* データ変換関数群 */</span></span>
<span id="cb257-85"><a href="#cb257-85" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> to_upper_case<span class="op">(</span><span class="dt">int</span> c<span class="op">)</span></span>
<span id="cb257-86"><a href="#cb257-86" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb257-87"><a href="#cb257-87" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>c <span class="op">&gt;=</span> <span class="ch">&#39;a&#39;</span> <span class="op">&amp;&amp;</span> c <span class="op">&lt;=</span> <span class="ch">&#39;z&#39;</span><span class="op">)</span></span>
<span id="cb257-88"><a href="#cb257-88" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb257-89"><a href="#cb257-89" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> c <span class="op">-</span> <span class="ch">&#39;a&#39;</span> <span class="op">+</span> <span class="ch">&#39;A&#39;</span><span class="op">;</span></span>
<span id="cb257-90"><a href="#cb257-90" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb257-91"><a href="#cb257-91" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> c<span class="op">;</span></span>
<span id="cb257-92"><a href="#cb257-92" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb257-93"><a href="#cb257-93" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb257-94"><a href="#cb257-94" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> to_lower_case<span class="op">(</span><span class="dt">int</span> c<span class="op">)</span></span>
<span id="cb257-95"><a href="#cb257-95" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb257-96"><a href="#cb257-96" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>c <span class="op">&gt;=</span> <span class="ch">&#39;A&#39;</span> <span class="op">&amp;&amp;</span> c <span class="op">&lt;=</span> <span class="ch">&#39;Z&#39;</span><span class="op">)</span></span>
<span id="cb257-97"><a href="#cb257-97" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb257-98"><a href="#cb257-98" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> c <span class="op">-</span> <span class="ch">&#39;A&#39;</span> <span class="op">+</span> <span class="ch">&#39;a&#39;</span><span class="op">;</span></span>
<span id="cb257-99"><a href="#cb257-99" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb257-100"><a href="#cb257-100" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> c<span class="op">;</span></span>
<span id="cb257-101"><a href="#cb257-101" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb257-102"><a href="#cb257-102" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb257-103"><a href="#cb257-103" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> rot13_transform<span class="op">(</span><span class="dt">int</span> c<span class="op">)</span></span>
<span id="cb257-104"><a href="#cb257-104" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb257-105"><a href="#cb257-105" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>c <span class="op">&gt;=</span> <span class="ch">&#39;a&#39;</span> <span class="op">&amp;&amp;</span> c <span class="op">&lt;=</span> <span class="ch">&#39;z&#39;</span><span class="op">)</span></span>
<span id="cb257-106"><a href="#cb257-106" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb257-107"><a href="#cb257-107" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="op">(</span>c <span class="op">-</span> <span class="ch">&#39;a&#39;</span> <span class="op">+</span> <span class="dv">13</span><span class="op">)</span> <span class="op">%</span> <span class="dv">26</span> <span class="op">+</span> <span class="ch">&#39;a&#39;</span><span class="op">;</span></span>
<span id="cb257-108"><a href="#cb257-108" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb257-109"><a href="#cb257-109" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>c <span class="op">&gt;=</span> <span class="ch">&#39;A&#39;</span> <span class="op">&amp;&amp;</span> c <span class="op">&lt;=</span> <span class="ch">&#39;Z&#39;</span><span class="op">)</span></span>
<span id="cb257-110"><a href="#cb257-110" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb257-111"><a href="#cb257-111" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="op">(</span>c <span class="op">-</span> <span class="ch">&#39;A&#39;</span> <span class="op">+</span> <span class="dv">13</span><span class="op">)</span> <span class="op">%</span> <span class="dv">26</span> <span class="op">+</span> <span class="ch">&#39;A&#39;</span><span class="op">;</span></span>
<span id="cb257-112"><a href="#cb257-112" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb257-113"><a href="#cb257-113" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> c<span class="op">;</span></span>
<span id="cb257-114"><a href="#cb257-114" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb257-115"><a href="#cb257-115" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb257-116"><a href="#cb257-116" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> reverse_case<span class="op">(</span><span class="dt">int</span> c<span class="op">)</span></span>
<span id="cb257-117"><a href="#cb257-117" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb257-118"><a href="#cb257-118" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>c <span class="op">&gt;=</span> <span class="ch">&#39;a&#39;</span> <span class="op">&amp;&amp;</span> c <span class="op">&lt;=</span> <span class="ch">&#39;z&#39;</span><span class="op">)</span></span>
<span id="cb257-119"><a href="#cb257-119" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb257-120"><a href="#cb257-120" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> c <span class="op">-</span> <span class="ch">&#39;a&#39;</span> <span class="op">+</span> <span class="ch">&#39;A&#39;</span><span class="op">;</span></span>
<span id="cb257-121"><a href="#cb257-121" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb257-122"><a href="#cb257-122" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>c <span class="op">&gt;=</span> <span class="ch">&#39;A&#39;</span> <span class="op">&amp;&amp;</span> c <span class="op">&lt;=</span> <span class="ch">&#39;Z&#39;</span><span class="op">)</span></span>
<span id="cb257-123"><a href="#cb257-123" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb257-124"><a href="#cb257-124" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> c <span class="op">-</span> <span class="ch">&#39;A&#39;</span> <span class="op">+</span> <span class="ch">&#39;a&#39;</span><span class="op">;</span></span>
<span id="cb257-125"><a href="#cb257-125" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb257-126"><a href="#cb257-126" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> c<span class="op">;</span></span>
<span id="cb257-127"><a href="#cb257-127" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb257-128"><a href="#cb257-128" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb257-129"><a href="#cb257-129" aria-hidden="true" tabindex="-1"></a><span class="co">/* メニュー項目構造体 */</span></span>
<span id="cb257-130"><a href="#cb257-130" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> MenuItem</span>
<span id="cb257-131"><a href="#cb257-131" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb257-132"><a href="#cb257-132" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> name<span class="op">[</span><span class="dv">30</span><span class="op">];</span></span>
<span id="cb257-133"><a href="#cb257-133" aria-hidden="true" tabindex="-1"></a>    <span class="dt">void</span> <span class="op">(*</span>handler<span class="op">)(</span><span class="dt">void</span><span class="op">);</span></span>
<span id="cb257-134"><a href="#cb257-134" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb257-135"><a href="#cb257-135" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb257-136"><a href="#cb257-136" aria-hidden="true" tabindex="-1"></a><span class="co">/* ゲーム状態の列挙型 */</span></span>
<span id="cb257-137"><a href="#cb257-137" aria-hidden="true" tabindex="-1"></a><span class="kw">typedef</span> <span class="kw">enum</span></span>
<span id="cb257-138"><a href="#cb257-138" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb257-139"><a href="#cb257-139" aria-hidden="true" tabindex="-1"></a>    GAME_MENU <span class="op">=</span> <span class="dv">0</span><span class="op">,</span></span>
<span id="cb257-140"><a href="#cb257-140" aria-hidden="true" tabindex="-1"></a>    GAME_PLAYING <span class="op">=</span> <span class="dv">1</span><span class="op">,</span></span>
<span id="cb257-141"><a href="#cb257-141" aria-hidden="true" tabindex="-1"></a>    GAME_PAUSED <span class="op">=</span> <span class="dv">2</span><span class="op">,</span></span>
<span id="cb257-142"><a href="#cb257-142" aria-hidden="true" tabindex="-1"></a>    GAME_SETTINGS <span class="op">=</span> <span class="dv">3</span><span class="op">,</span></span>
<span id="cb257-143"><a href="#cb257-143" aria-hidden="true" tabindex="-1"></a>    GAME_STATE_COUNT <span class="op">=</span> <span class="dv">4</span></span>
<span id="cb257-144"><a href="#cb257-144" aria-hidden="true" tabindex="-1"></a><span class="op">}</span> GameState<span class="op">;</span></span>
<span id="cb257-145"><a href="#cb257-145" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb257-146"><a href="#cb257-146" aria-hidden="true" tabindex="-1"></a><span class="co">/* 文字変換関数の適用 */</span></span>
<span id="cb257-147"><a href="#cb257-147" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> apply_transform<span class="op">(</span><span class="dt">char</span> <span class="op">*</span>str<span class="op">,</span> <span class="dt">int</span> <span class="op">(*</span>transform<span class="op">)(</span><span class="dt">int</span><span class="op">))</span></span>
<span id="cb257-148"><a href="#cb257-148" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb257-149"><a href="#cb257-149" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb257-150"><a href="#cb257-150" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> str<span class="op">[</span>i<span class="op">]</span> <span class="op">!=</span> <span class="ch">&#39;</span><span class="sc">\0</span><span class="ch">&#39;</span><span class="op">;</span> i<span class="op">++)</span></span>
<span id="cb257-151"><a href="#cb257-151" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb257-152"><a href="#cb257-152" aria-hidden="true" tabindex="-1"></a>        str<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> transform<span class="op">(</span>str<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb257-153"><a href="#cb257-153" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb257-154"><a href="#cb257-154" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb257-155"><a href="#cb257-155" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb257-156"><a href="#cb257-156" aria-hidden="true" tabindex="-1"></a><span class="co">/* 配列の表示 */</span></span>
<span id="cb257-157"><a href="#cb257-157" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> print_double_array<span class="op">(</span><span class="dt">double</span> arr<span class="op">[],</span> <span class="dt">int</span> size<span class="op">,</span> <span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>label<span class="op">)</span></span>
<span id="cb257-158"><a href="#cb257-158" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb257-159"><a href="#cb257-159" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb257-160"><a href="#cb257-160" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%s</span><span class="st">: &quot;</span><span class="op">,</span> label<span class="op">);</span></span>
<span id="cb257-161"><a href="#cb257-161" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> size<span class="op">;</span> i<span class="op">++)</span></span>
<span id="cb257-162"><a href="#cb257-162" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb257-163"><a href="#cb257-163" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%.2f</span><span class="st"> &quot;</span><span class="op">,</span> arr<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb257-164"><a href="#cb257-164" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb257-165"><a href="#cb257-165" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb257-166"><a href="#cb257-166" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb257-167"><a href="#cb257-167" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb257-168"><a href="#cb257-168" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb257-169"><a href="#cb257-169" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb257-170"><a href="#cb257-170" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== 関数ポインタ配列の活用 ===</span><span class="sc">\n\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb257-171"><a href="#cb257-171" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb257-172"><a href="#cb257-172" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 1. 計算機システム */</span></span>
<span id="cb257-173"><a href="#cb257-173" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== 計算機システム ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb257-174"><a href="#cb257-174" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb257-175"><a href="#cb257-175" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 関数ポインタ配列の定義 */</span></span>
<span id="cb257-176"><a href="#cb257-176" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span> <span class="op">(*</span>operations<span class="op">[])(</span><span class="dt">double</span><span class="op">,</span> <span class="dt">double</span><span class="op">)</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb257-177"><a href="#cb257-177" aria-hidden="true" tabindex="-1"></a>        add_operation<span class="op">,</span> <span class="co">/* インデックス0: 加算 */</span></span>
<span id="cb257-178"><a href="#cb257-178" aria-hidden="true" tabindex="-1"></a>        sub_operation<span class="op">,</span> <span class="co">/* インデックス1: 減算 */</span></span>
<span id="cb257-179"><a href="#cb257-179" aria-hidden="true" tabindex="-1"></a>        mul_operation<span class="op">,</span> <span class="co">/* インデックス2: 乗算 */</span></span>
<span id="cb257-180"><a href="#cb257-180" aria-hidden="true" tabindex="-1"></a>        div_operation  <span class="co">/* インデックス3: 除算 */</span></span>
<span id="cb257-181"><a href="#cb257-181" aria-hidden="true" tabindex="-1"></a>    <span class="op">};</span></span>
<span id="cb257-182"><a href="#cb257-182" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb257-183"><a href="#cb257-183" aria-hidden="true" tabindex="-1"></a>    <span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>op_names<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="st">&quot;加算&quot;</span><span class="op">,</span> <span class="st">&quot;減算&quot;</span><span class="op">,</span> <span class="st">&quot;乗算&quot;</span><span class="op">,</span> <span class="st">&quot;除算&quot;</span><span class="op">};</span></span>
<span id="cb257-184"><a href="#cb257-184" aria-hidden="true" tabindex="-1"></a>    <span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>op_symbols<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="st">&quot;+&quot;</span><span class="op">,</span> <span class="st">&quot;-&quot;</span><span class="op">,</span> <span class="st">&quot;*&quot;</span><span class="op">,</span> <span class="st">&quot;/&quot;</span><span class="op">};</span></span>
<span id="cb257-185"><a href="#cb257-185" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> num_ops <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>operations<span class="op">)</span> <span class="op">/</span> <span class="kw">sizeof</span><span class="op">(</span>operations<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb257-186"><a href="#cb257-186" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span> a <span class="op">=</span> <span class="fl">15.0</span><span class="op">,</span> b <span class="op">=</span> <span class="fl">4.0</span><span class="op">;</span></span>
<span id="cb257-187"><a href="#cb257-187" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb257-188"><a href="#cb257-188" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb257-189"><a href="#cb257-189" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;数値: a = </span><span class="sc">%.1f</span><span class="st">, b = </span><span class="sc">%.1f\n</span><span class="st">&quot;</span><span class="op">,</span> a<span class="op">,</span> b<span class="op">);</span></span>
<span id="cb257-190"><a href="#cb257-190" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb257-191"><a href="#cb257-191" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 全ての演算を実行 */</span></span>
<span id="cb257-192"><a href="#cb257-192" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> num_ops<span class="op">;</span> i<span class="op">++)</span></span>
<span id="cb257-193"><a href="#cb257-193" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb257-194"><a href="#cb257-194" aria-hidden="true" tabindex="-1"></a>        <span class="dt">double</span> result <span class="op">=</span> operations<span class="op">[</span>i<span class="op">](</span>a<span class="op">,</span> b<span class="op">);</span></span>
<span id="cb257-195"><a href="#cb257-195" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%s</span><span class="st"> (</span><span class="sc">%s</span><span class="st">): </span><span class="sc">%.1f</span><span class="st"> </span><span class="sc">%s</span><span class="st"> </span><span class="sc">%.1f</span><span class="st"> = </span><span class="sc">%.2f\n</span><span class="st">&quot;</span><span class="op">,</span></span>
<span id="cb257-196"><a href="#cb257-196" aria-hidden="true" tabindex="-1"></a>               op_names<span class="op">[</span>i<span class="op">],</span> op_symbols<span class="op">[</span>i<span class="op">],</span> a<span class="op">,</span> op_symbols<span class="op">[</span>i<span class="op">],</span> b<span class="op">,</span> result<span class="op">);</span></span>
<span id="cb257-197"><a href="#cb257-197" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb257-198"><a href="#cb257-198" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb257-199"><a href="#cb257-199" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 特定の演算のみ実行 */</span></span>
<span id="cb257-200"><a href="#cb257-200" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">特定の演算:</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb257-201"><a href="#cb257-201" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;乗算結果: </span><span class="sc">%.2f\n</span><span class="st">&quot;</span><span class="op">,</span> operations<span class="op">[</span><span class="dv">2</span><span class="op">](</span>a<span class="op">,</span> b<span class="op">));</span> <span class="co">/* mul_operation */</span></span>
<span id="cb257-202"><a href="#cb257-202" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;除算結果: </span><span class="sc">%.2f\n</span><span class="st">&quot;</span><span class="op">,</span> operations<span class="op">[</span><span class="dv">3</span><span class="op">](</span>a<span class="op">,</span> b<span class="op">));</span> <span class="co">/* div_operation */</span></span>
<span id="cb257-203"><a href="#cb257-203" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb257-204"><a href="#cb257-204" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 2. メニューシステム */</span></span>
<span id="cb257-205"><a href="#cb257-205" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">=== メニューシステム ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb257-206"><a href="#cb257-206" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb257-207"><a href="#cb257-207" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* メニュー項目の定義 */</span></span>
<span id="cb257-208"><a href="#cb257-208" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> MenuItem menu<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb257-209"><a href="#cb257-209" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span><span class="st">&quot;プロフィール&quot;</span><span class="op">,</span> show_profile<span class="op">},</span></span>
<span id="cb257-210"><a href="#cb257-210" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span><span class="st">&quot;設定&quot;</span><span class="op">,</span> show_settings<span class="op">},</span></span>
<span id="cb257-211"><a href="#cb257-211" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span><span class="st">&quot;ヘルプ&quot;</span><span class="op">,</span> show_help<span class="op">},</span></span>
<span id="cb257-212"><a href="#cb257-212" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span><span class="st">&quot;このアプリについて&quot;</span><span class="op">,</span> show_about<span class="op">},</span></span>
<span id="cb257-213"><a href="#cb257-213" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span><span class="st">&quot;終了&quot;</span><span class="op">,</span> exit_application<span class="op">}};</span></span>
<span id="cb257-214"><a href="#cb257-214" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb257-215"><a href="#cb257-215" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> menu_size <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>menu<span class="op">)</span> <span class="op">/</span> <span class="kw">sizeof</span><span class="op">(</span>menu<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb257-216"><a href="#cb257-216" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb257-217"><a href="#cb257-217" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;利用可能なメニュー項目:</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb257-218"><a href="#cb257-218" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> menu_size<span class="op">;</span> i<span class="op">++)</span></span>
<span id="cb257-219"><a href="#cb257-219" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb257-220"><a href="#cb257-220" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st">. </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">,</span> menu<span class="op">[</span>i<span class="op">].</span>name<span class="op">);</span></span>
<span id="cb257-221"><a href="#cb257-221" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb257-222"><a href="#cb257-222" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb257-223"><a href="#cb257-223" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* メニュー項目の実行例 */</span></span>
<span id="cb257-224"><a href="#cb257-224" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">メニュー実行例:</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb257-225"><a href="#cb257-225" aria-hidden="true" tabindex="-1"></a>    menu<span class="op">[</span><span class="dv">0</span><span class="op">].</span>handler<span class="op">();</span> <span class="co">/* プロフィール表示 */</span></span>
<span id="cb257-226"><a href="#cb257-226" aria-hidden="true" tabindex="-1"></a>    menu<span class="op">[</span><span class="dv">2</span><span class="op">].</span>handler<span class="op">();</span> <span class="co">/* ヘルプ表示 */</span></span>
<span id="cb257-227"><a href="#cb257-227" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb257-228"><a href="#cb257-228" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 3. ゲーム状態管理システム */</span></span>
<span id="cb257-229"><a href="#cb257-229" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">=== ゲーム状態管理システム ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb257-230"><a href="#cb257-230" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb257-231"><a href="#cb257-231" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 状態処理関数配列 */</span></span>
<span id="cb257-232"><a href="#cb257-232" aria-hidden="true" tabindex="-1"></a>    <span class="dt">void</span> <span class="op">(*</span>state_handlers<span class="op">[])(</span><span class="dt">void</span><span class="op">)</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb257-233"><a href="#cb257-233" aria-hidden="true" tabindex="-1"></a>        state_menu<span class="op">,</span>    <span class="co">/* GAME_MENU */</span></span>
<span id="cb257-234"><a href="#cb257-234" aria-hidden="true" tabindex="-1"></a>        state_playing<span class="op">,</span> <span class="co">/* GAME_PLAYING */</span></span>
<span id="cb257-235"><a href="#cb257-235" aria-hidden="true" tabindex="-1"></a>        state_paused<span class="op">,</span>  <span class="co">/* GAME_PAUSED */</span></span>
<span id="cb257-236"><a href="#cb257-236" aria-hidden="true" tabindex="-1"></a>        state_settings <span class="co">/* GAME_SETTINGS */</span></span>
<span id="cb257-237"><a href="#cb257-237" aria-hidden="true" tabindex="-1"></a>    <span class="op">};</span></span>
<span id="cb257-238"><a href="#cb257-238" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb257-239"><a href="#cb257-239" aria-hidden="true" tabindex="-1"></a>    <span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>state_names<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb257-240"><a href="#cb257-240" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;メニュー&quot;</span><span class="op">,</span> <span class="st">&quot;プレイ中&quot;</span><span class="op">,</span> <span class="st">&quot;一時停止&quot;</span><span class="op">,</span> <span class="st">&quot;設定&quot;</span><span class="op">};</span></span>
<span id="cb257-241"><a href="#cb257-241" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb257-242"><a href="#cb257-242" aria-hidden="true" tabindex="-1"></a>    GameState current_state<span class="op">;</span></span>
<span id="cb257-243"><a href="#cb257-243" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb257-244"><a href="#cb257-244" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;各ゲーム状態の処理:</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb257-245"><a href="#cb257-245" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>current_state <span class="op">=</span> GAME_MENU<span class="op">;</span> current_state <span class="op">&lt;</span> GAME_STATE_COUNT<span class="op">;</span> current_state<span class="op">++)</span></span>
<span id="cb257-246"><a href="#cb257-246" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb257-247"><a href="#cb257-247" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">現在の状態: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> state_names<span class="op">[</span>current_state<span class="op">]);</span></span>
<span id="cb257-248"><a href="#cb257-248" aria-hidden="true" tabindex="-1"></a>        state_handlers<span class="op">[</span>current_state<span class="op">]();</span></span>
<span id="cb257-249"><a href="#cb257-249" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb257-250"><a href="#cb257-250" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb257-251"><a href="#cb257-251" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 4. 動的な状態遷移 */</span></span>
<span id="cb257-252"><a href="#cb257-252" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">=== 動的な状態遷移 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb257-253"><a href="#cb257-253" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb257-254"><a href="#cb257-254" aria-hidden="true" tabindex="-1"></a>    current_state <span class="op">=</span> GAME_MENU<span class="op">;</span></span>
<span id="cb257-255"><a href="#cb257-255" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;初期状態: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> state_names<span class="op">[</span>current_state<span class="op">]);</span></span>
<span id="cb257-256"><a href="#cb257-256" aria-hidden="true" tabindex="-1"></a>    state_handlers<span class="op">[</span>current_state<span class="op">]();</span></span>
<span id="cb257-257"><a href="#cb257-257" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb257-258"><a href="#cb257-258" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 状態遷移の例 */</span></span>
<span id="cb257-259"><a href="#cb257-259" aria-hidden="true" tabindex="-1"></a>    current_state <span class="op">=</span> GAME_PLAYING<span class="op">;</span></span>
<span id="cb257-260"><a href="#cb257-260" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">状態遷移: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> state_names<span class="op">[</span>current_state<span class="op">]);</span></span>
<span id="cb257-261"><a href="#cb257-261" aria-hidden="true" tabindex="-1"></a>    state_handlers<span class="op">[</span>current_state<span class="op">]();</span></span>
<span id="cb257-262"><a href="#cb257-262" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb257-263"><a href="#cb257-263" aria-hidden="true" tabindex="-1"></a>    current_state <span class="op">=</span> GAME_PAUSED<span class="op">;</span></span>
<span id="cb257-264"><a href="#cb257-264" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">状態遷移: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> state_names<span class="op">[</span>current_state<span class="op">]);</span></span>
<span id="cb257-265"><a href="#cb257-265" aria-hidden="true" tabindex="-1"></a>    state_handlers<span class="op">[</span>current_state<span class="op">]();</span></span>
<span id="cb257-266"><a href="#cb257-266" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb257-267"><a href="#cb257-267" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 5. 文字変換システム */</span></span>
<span id="cb257-268"><a href="#cb257-268" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">=== 文字変換システム ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb257-269"><a href="#cb257-269" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb257-270"><a href="#cb257-270" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 変換関数配列 */</span></span>
<span id="cb257-271"><a href="#cb257-271" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> <span class="op">(*</span>transforms<span class="op">[])(</span><span class="dt">int</span><span class="op">)</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb257-272"><a href="#cb257-272" aria-hidden="true" tabindex="-1"></a>        to_upper_case<span class="op">,</span></span>
<span id="cb257-273"><a href="#cb257-273" aria-hidden="true" tabindex="-1"></a>        to_lower_case<span class="op">,</span></span>
<span id="cb257-274"><a href="#cb257-274" aria-hidden="true" tabindex="-1"></a>        rot13_transform<span class="op">,</span></span>
<span id="cb257-275"><a href="#cb257-275" aria-hidden="true" tabindex="-1"></a>        reverse_case<span class="op">};</span></span>
<span id="cb257-276"><a href="#cb257-276" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb257-277"><a href="#cb257-277" aria-hidden="true" tabindex="-1"></a>    <span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>transform_names<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb257-278"><a href="#cb257-278" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;大文字変換&quot;</span><span class="op">,</span></span>
<span id="cb257-279"><a href="#cb257-279" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;小文字変換&quot;</span><span class="op">,</span></span>
<span id="cb257-280"><a href="#cb257-280" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;ROT13暗号&quot;</span><span class="op">,</span></span>
<span id="cb257-281"><a href="#cb257-281" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;大小文字反転&quot;</span><span class="op">};</span></span>
<span id="cb257-282"><a href="#cb257-282" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb257-283"><a href="#cb257-283" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> num_transforms <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>transforms<span class="op">)</span> <span class="op">/</span> <span class="kw">sizeof</span><span class="op">(</span>transforms<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb257-284"><a href="#cb257-284" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> original<span class="op">[]</span> <span class="op">=</span> <span class="st">&quot;Hello World!&quot;</span><span class="op">;</span></span>
<span id="cb257-285"><a href="#cb257-285" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> test_str<span class="op">[</span><span class="dv">50</span><span class="op">];</span></span>
<span id="cb257-286"><a href="#cb257-286" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb257-287"><a href="#cb257-287" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;元の文字列: &#39;</span><span class="sc">%s</span><span class="st">&#39;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> original<span class="op">);</span></span>
<span id="cb257-288"><a href="#cb257-288" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb257-289"><a href="#cb257-289" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 各変換を適用 */</span></span>
<span id="cb257-290"><a href="#cb257-290" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> num_transforms<span class="op">;</span> i<span class="op">++)</span></span>
<span id="cb257-291"><a href="#cb257-291" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb257-292"><a href="#cb257-292" aria-hidden="true" tabindex="-1"></a>        strcpy<span class="op">(</span>test_str<span class="op">,</span> original<span class="op">);</span></span>
<span id="cb257-293"><a href="#cb257-293" aria-hidden="true" tabindex="-1"></a>        apply_transform<span class="op">(</span>test_str<span class="op">,</span> transforms<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb257-294"><a href="#cb257-294" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%s</span><span class="st">: &#39;</span><span class="sc">%s</span><span class="st">&#39;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> transform_names<span class="op">[</span>i<span class="op">],</span> test_str<span class="op">);</span></span>
<span id="cb257-295"><a href="#cb257-295" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb257-296"><a href="#cb257-296" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb257-297"><a href="#cb257-297" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 6. 複数の数値に同じ演算を適用 */</span></span>
<span id="cb257-298"><a href="#cb257-298" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">=== 複数数値への演算適用 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb257-299"><a href="#cb257-299" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb257-300"><a href="#cb257-300" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span> numbers<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="fl">1.0</span><span class="op">,</span> <span class="fl">2.0</span><span class="op">,</span> <span class="fl">3.0</span><span class="op">,</span> <span class="fl">4.0</span><span class="op">,</span> <span class="fl">5.0</span><span class="op">};</span></span>
<span id="cb257-301"><a href="#cb257-301" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span> results<span class="op">[</span><span class="dv">5</span><span class="op">];</span></span>
<span id="cb257-302"><a href="#cb257-302" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> numbers_size <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>numbers<span class="op">)</span> <span class="op">/</span> <span class="kw">sizeof</span><span class="op">(</span>numbers<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb257-303"><a href="#cb257-303" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb257-304"><a href="#cb257-304" aria-hidden="true" tabindex="-1"></a>    print_double_array<span class="op">(</span>numbers<span class="op">,</span> numbers_size<span class="op">,</span> <span class="st">&quot;元の配列&quot;</span><span class="op">);</span></span>
<span id="cb257-305"><a href="#cb257-305" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb257-306"><a href="#cb257-306" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 各演算を全ての数値ペア (numbers[i], 2.0) に適用 */</span></span>
<span id="cb257-307"><a href="#cb257-307" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> num_ops<span class="op">;</span> i<span class="op">++)</span></span>
<span id="cb257-308"><a href="#cb257-308" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb257-309"><a href="#cb257-309" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> j<span class="op">;</span></span>
<span id="cb257-310"><a href="#cb257-310" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span>j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> j <span class="op">&lt;</span> numbers_size<span class="op">;</span> j<span class="op">++)</span></span>
<span id="cb257-311"><a href="#cb257-311" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span></span>
<span id="cb257-312"><a href="#cb257-312" aria-hidden="true" tabindex="-1"></a>            results<span class="op">[</span>j<span class="op">]</span> <span class="op">=</span> operations<span class="op">[</span>i<span class="op">](</span>numbers<span class="op">[</span>j<span class="op">],</span> <span class="fl">2.0</span><span class="op">);</span></span>
<span id="cb257-313"><a href="#cb257-313" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb257-314"><a href="#cb257-314" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%s</span><span class="st"> (x, 2.0): &quot;</span><span class="op">,</span> op_names<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb257-315"><a href="#cb257-315" aria-hidden="true" tabindex="-1"></a>        print_double_array<span class="op">(</span>results<span class="op">,</span> numbers_size<span class="op">,</span> <span class="st">&quot;結果&quot;</span><span class="op">);</span></span>
<span id="cb257-316"><a href="#cb257-316" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb257-317"><a href="#cb257-317" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb257-318"><a href="#cb257-318" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 7. 条件付き関数実行 */</span></span>
<span id="cb257-319"><a href="#cb257-319" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">=== 条件付き関数実行 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb257-320"><a href="#cb257-320" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb257-321"><a href="#cb257-321" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;演算インデックス指定実行:</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb257-322"><a href="#cb257-322" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> op_index <span class="op">=</span> <span class="dv">2</span><span class="op">;</span> <span class="co">/* 乗算 */</span></span>
<span id="cb257-323"><a href="#cb257-323" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>op_index <span class="op">&gt;=</span> <span class="dv">0</span> <span class="op">&amp;&amp;</span> op_index <span class="op">&lt;</span> num_ops<span class="op">)</span></span>
<span id="cb257-324"><a href="#cb257-324" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb257-325"><a href="#cb257-325" aria-hidden="true" tabindex="-1"></a>        <span class="dt">double</span> result <span class="op">=</span> operations<span class="op">[</span>op_index<span class="op">](</span><span class="fl">10.0</span><span class="op">,</span> <span class="fl">3.0</span><span class="op">);</span></span>
<span id="cb257-326"><a href="#cb257-326" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%s</span><span class="st">: 10.0 </span><span class="sc">%s</span><span class="st"> 3.0 = </span><span class="sc">%.2f\n</span><span class="st">&quot;</span><span class="op">,</span></span>
<span id="cb257-327"><a href="#cb257-327" aria-hidden="true" tabindex="-1"></a>               op_names<span class="op">[</span>op_index<span class="op">],</span> op_symbols<span class="op">[</span>op_index<span class="op">],</span> result<span class="op">);</span></span>
<span id="cb257-328"><a href="#cb257-328" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb257-329"><a href="#cb257-329" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb257-330"><a href="#cb257-330" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 複数のメニュー項目を一度に実行 */</span></span>
<span id="cb257-331"><a href="#cb257-331" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">複数メニュー項目の実行:</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb257-332"><a href="#cb257-332" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> menu_indices<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">1</span><span class="op">,</span> <span class="dv">3</span><span class="op">};</span> <span class="co">/* 設定, このアプリについて */</span></span>
<span id="cb257-333"><a href="#cb257-333" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> indices_count <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>menu_indices<span class="op">)</span> <span class="op">/</span> <span class="kw">sizeof</span><span class="op">(</span>menu_indices<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb257-334"><a href="#cb257-334" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb257-335"><a href="#cb257-335" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> indices_count<span class="op">;</span> i<span class="op">++)</span></span>
<span id="cb257-336"><a href="#cb257-336" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb257-337"><a href="#cb257-337" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> idx <span class="op">=</span> menu_indices<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb257-338"><a href="#cb257-338" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>idx <span class="op">&gt;=</span> <span class="dv">0</span> <span class="op">&amp;&amp;</span> idx <span class="op">&lt;</span> menu_size<span class="op">)</span></span>
<span id="cb257-339"><a href="#cb257-339" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span></span>
<span id="cb257-340"><a href="#cb257-340" aria-hidden="true" tabindex="-1"></a>            printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">[</span><span class="sc">%s</span><span class="st">] 実行:</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> menu<span class="op">[</span>idx<span class="op">].</span>name<span class="op">);</span></span>
<span id="cb257-341"><a href="#cb257-341" aria-hidden="true" tabindex="-1"></a>            menu<span class="op">[</span>idx<span class="op">].</span>handler<span class="op">();</span></span>
<span id="cb257-342"><a href="#cb257-342" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb257-343"><a href="#cb257-343" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb257-344"><a href="#cb257-344" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb257-345"><a href="#cb257-345" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">=== 関数ポインタ配列デモ完了 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb257-346"><a href="#cb257-346" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb257-347"><a href="#cb257-347" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb257-348"><a href="#cb257-348" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<blockquote>
<p>C99版は<a
href="function_pointer_arrays_c99.c">こちら</a>を参照してください。</p>
</blockquote>
<h3 id="function_pointer_basic.c">function_pointer_basic.c</h3>
<div class="sourceCode" id="cb258"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb258-1"><a href="#cb258-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* 関数ポインタの基本 */</span></span>
<span id="cb258-2"><a href="#cb258-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb258-3"><a href="#cb258-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb258-4"><a href="#cb258-4" aria-hidden="true" tabindex="-1"></a><span class="co">/* 数学演算関数群 */</span></span>
<span id="cb258-5"><a href="#cb258-5" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> add<span class="op">(</span><span class="dt">int</span> a<span class="op">,</span> <span class="dt">int</span> b<span class="op">)</span></span>
<span id="cb258-6"><a href="#cb258-6" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb258-7"><a href="#cb258-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> a <span class="op">+</span> b<span class="op">;</span></span>
<span id="cb258-8"><a href="#cb258-8" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb258-9"><a href="#cb258-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb258-10"><a href="#cb258-10" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> subtract<span class="op">(</span><span class="dt">int</span> a<span class="op">,</span> <span class="dt">int</span> b<span class="op">)</span></span>
<span id="cb258-11"><a href="#cb258-11" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb258-12"><a href="#cb258-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> a <span class="op">-</span> b<span class="op">;</span></span>
<span id="cb258-13"><a href="#cb258-13" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb258-14"><a href="#cb258-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb258-15"><a href="#cb258-15" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> multiply<span class="op">(</span><span class="dt">int</span> a<span class="op">,</span> <span class="dt">int</span> b<span class="op">)</span></span>
<span id="cb258-16"><a href="#cb258-16" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb258-17"><a href="#cb258-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> a <span class="op">*</span> b<span class="op">;</span></span>
<span id="cb258-18"><a href="#cb258-18" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb258-19"><a href="#cb258-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb258-20"><a href="#cb258-20" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> divide<span class="op">(</span><span class="dt">int</span> a<span class="op">,</span> <span class="dt">int</span> b<span class="op">)</span></span>
<span id="cb258-21"><a href="#cb258-21" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb258-22"><a href="#cb258-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>b <span class="op">!=</span> <span class="dv">0</span><span class="op">)</span></span>
<span id="cb258-23"><a href="#cb258-23" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb258-24"><a href="#cb258-24" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> a <span class="op">/</span> b<span class="op">;</span></span>
<span id="cb258-25"><a href="#cb258-25" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb258-26"><a href="#cb258-26" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;エラー: ゼロ除算</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb258-27"><a href="#cb258-27" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb258-28"><a href="#cb258-28" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb258-29"><a href="#cb258-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb258-30"><a href="#cb258-30" aria-hidden="true" tabindex="-1"></a><span class="co">/* 関数ポインタを使った計算 */</span></span>
<span id="cb258-31"><a href="#cb258-31" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> calculate<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">,</span> <span class="dt">int</span> <span class="op">(*</span>operation<span class="op">)(</span><span class="dt">int</span><span class="op">,</span> <span class="dt">int</span><span class="op">))</span></span>
<span id="cb258-32"><a href="#cb258-32" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb258-33"><a href="#cb258-33" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> operation<span class="op">(</span>x<span class="op">,</span> y<span class="op">);</span></span>
<span id="cb258-34"><a href="#cb258-34" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb258-35"><a href="#cb258-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb258-36"><a href="#cb258-36" aria-hidden="true" tabindex="-1"></a><span class="co">/* 演算子に基づいて関数を選択 */</span></span>
<span id="cb258-37"><a href="#cb258-37" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> <span class="op">(*</span>get_operation<span class="op">(</span><span class="dt">char</span> op<span class="op">))(</span><span class="dt">int</span><span class="op">,</span> <span class="dt">int</span><span class="op">)</span></span>
<span id="cb258-38"><a href="#cb258-38" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb258-39"><a href="#cb258-39" aria-hidden="true" tabindex="-1"></a>    <span class="cf">switch</span> <span class="op">(</span>op<span class="op">)</span></span>
<span id="cb258-40"><a href="#cb258-40" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb258-41"><a href="#cb258-41" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> <span class="ch">&#39;+&#39;</span><span class="op">:</span></span>
<span id="cb258-42"><a href="#cb258-42" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> add<span class="op">;</span></span>
<span id="cb258-43"><a href="#cb258-43" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> <span class="ch">&#39;-&#39;</span><span class="op">:</span></span>
<span id="cb258-44"><a href="#cb258-44" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> subtract<span class="op">;</span></span>
<span id="cb258-45"><a href="#cb258-45" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> <span class="ch">&#39;*&#39;</span><span class="op">:</span></span>
<span id="cb258-46"><a href="#cb258-46" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> multiply<span class="op">;</span></span>
<span id="cb258-47"><a href="#cb258-47" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> <span class="ch">&#39;/&#39;</span><span class="op">:</span></span>
<span id="cb258-48"><a href="#cb258-48" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> divide<span class="op">;</span></span>
<span id="cb258-49"><a href="#cb258-49" aria-hidden="true" tabindex="-1"></a>    <span class="cf">default</span><span class="op">:</span></span>
<span id="cb258-50"><a href="#cb258-50" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> NULL<span class="op">;</span></span>
<span id="cb258-51"><a href="#cb258-51" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb258-52"><a href="#cb258-52" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb258-53"><a href="#cb258-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb258-54"><a href="#cb258-54" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb258-55"><a href="#cb258-55" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb258-56"><a href="#cb258-56" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== 関数ポインタの基本 ===</span><span class="sc">\n\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb258-57"><a href="#cb258-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb258-58"><a href="#cb258-58" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 基本的な関数ポインタの使用 */</span></span>
<span id="cb258-59"><a href="#cb258-59" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> <span class="op">(*</span>math_func<span class="op">)(</span><span class="dt">int</span><span class="op">,</span> <span class="dt">int</span><span class="op">);</span></span>
<span id="cb258-60"><a href="#cb258-60" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> a <span class="op">=</span> <span class="dv">10</span><span class="op">,</span> b <span class="op">=</span> <span class="dv">5</span><span class="op">;</span></span>
<span id="cb258-61"><a href="#cb258-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb258-62"><a href="#cb258-62" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;数値: a = </span><span class="sc">%d</span><span class="st">, b = </span><span class="sc">%d\n\n</span><span class="st">&quot;</span><span class="op">,</span> a<span class="op">,</span> b<span class="op">);</span></span>
<span id="cb258-63"><a href="#cb258-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb258-64"><a href="#cb258-64" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 加算 */</span></span>
<span id="cb258-65"><a href="#cb258-65" aria-hidden="true" tabindex="-1"></a>    math_func <span class="op">=</span> add<span class="op">;</span></span>
<span id="cb258-66"><a href="#cb258-66" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;加算: </span><span class="sc">%d</span><span class="st"> + </span><span class="sc">%d</span><span class="st"> = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> a<span class="op">,</span> b<span class="op">,</span> math_func<span class="op">(</span>a<span class="op">,</span> b<span class="op">));</span></span>
<span id="cb258-67"><a href="#cb258-67" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb258-68"><a href="#cb258-68" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 減算 */</span></span>
<span id="cb258-69"><a href="#cb258-69" aria-hidden="true" tabindex="-1"></a>    math_func <span class="op">=</span> subtract<span class="op">;</span></span>
<span id="cb258-70"><a href="#cb258-70" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;減算: </span><span class="sc">%d</span><span class="st"> - </span><span class="sc">%d</span><span class="st"> = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> a<span class="op">,</span> b<span class="op">,</span> math_func<span class="op">(</span>a<span class="op">,</span> b<span class="op">));</span></span>
<span id="cb258-71"><a href="#cb258-71" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb258-72"><a href="#cb258-72" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 乗算 */</span></span>
<span id="cb258-73"><a href="#cb258-73" aria-hidden="true" tabindex="-1"></a>    math_func <span class="op">=</span> multiply<span class="op">;</span></span>
<span id="cb258-74"><a href="#cb258-74" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;乗算: </span><span class="sc">%d</span><span class="st"> * </span><span class="sc">%d</span><span class="st"> = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> a<span class="op">,</span> b<span class="op">,</span> math_func<span class="op">(</span>a<span class="op">,</span> b<span class="op">));</span></span>
<span id="cb258-75"><a href="#cb258-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb258-76"><a href="#cb258-76" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 除算 */</span></span>
<span id="cb258-77"><a href="#cb258-77" aria-hidden="true" tabindex="-1"></a>    math_func <span class="op">=</span> divide<span class="op">;</span></span>
<span id="cb258-78"><a href="#cb258-78" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;除算: </span><span class="sc">%d</span><span class="st"> / </span><span class="sc">%d</span><span class="st"> = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> a<span class="op">,</span> b<span class="op">,</span> math_func<span class="op">(</span>a<span class="op">,</span> b<span class="op">));</span></span>
<span id="cb258-79"><a href="#cb258-79" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb258-80"><a href="#cb258-80" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">=== 関数選択システム ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb258-81"><a href="#cb258-81" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb258-82"><a href="#cb258-82" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 演算子による関数選択 */</span></span>
<span id="cb258-83"><a href="#cb258-83" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> operators<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="ch">&#39;+&#39;</span><span class="op">,</span> <span class="ch">&#39;-&#39;</span><span class="op">,</span> <span class="ch">&#39;*&#39;</span><span class="op">,</span> <span class="ch">&#39;/&#39;</span><span class="op">,</span> <span class="ch">&#39;%&#39;</span><span class="op">};</span></span>
<span id="cb258-84"><a href="#cb258-84" aria-hidden="true" tabindex="-1"></a>    <span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>op_names<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="st">&quot;加算&quot;</span><span class="op">,</span> <span class="st">&quot;減算&quot;</span><span class="op">,</span> <span class="st">&quot;乗算&quot;</span><span class="op">,</span> <span class="st">&quot;除算&quot;</span><span class="op">,</span> <span class="st">&quot;不明&quot;</span><span class="op">};</span></span>
<span id="cb258-85"><a href="#cb258-85" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb258-86"><a href="#cb258-86" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb258-87"><a href="#cb258-87" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">5</span><span class="op">;</span> i<span class="op">++)</span></span>
<span id="cb258-88"><a href="#cb258-88" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb258-89"><a href="#cb258-89" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> <span class="op">(*</span>op_func<span class="op">)(</span><span class="dt">int</span><span class="op">,</span> <span class="dt">int</span><span class="op">)</span> <span class="op">=</span> get_operation<span class="op">(</span>operators<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb258-90"><a href="#cb258-90" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>op_func <span class="op">!=</span> NULL<span class="op">)</span></span>
<span id="cb258-91"><a href="#cb258-91" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span></span>
<span id="cb258-92"><a href="#cb258-92" aria-hidden="true" tabindex="-1"></a>            <span class="dt">int</span> result <span class="op">=</span> calculate<span class="op">(</span>a<span class="op">,</span> b<span class="op">,</span> op_func<span class="op">);</span></span>
<span id="cb258-93"><a href="#cb258-93" aria-hidden="true" tabindex="-1"></a>            printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%s</span><span class="st"> (</span><span class="sc">%c</span><span class="st">): </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> op_names<span class="op">[</span>i<span class="op">],</span> operators<span class="op">[</span>i<span class="op">],</span> result<span class="op">);</span></span>
<span id="cb258-94"><a href="#cb258-94" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb258-95"><a href="#cb258-95" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span></span>
<span id="cb258-96"><a href="#cb258-96" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span></span>
<span id="cb258-97"><a href="#cb258-97" aria-hidden="true" tabindex="-1"></a>            printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%s</span><span class="st"> (</span><span class="sc">%c</span><span class="st">): サポートされていません</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> op_names<span class="op">[</span>i<span class="op">],</span> operators<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb258-98"><a href="#cb258-98" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb258-99"><a href="#cb258-99" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb258-100"><a href="#cb258-100" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb258-101"><a href="#cb258-101" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">=== 動的な演算実行 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb258-102"><a href="#cb258-102" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb258-103"><a href="#cb258-103" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 対話的な演算実行 */</span></span>
<span id="cb258-104"><a href="#cb258-104" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> op<span class="op">;</span></span>
<span id="cb258-105"><a href="#cb258-105" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;演算子を入力してください (+, -, *, /): &quot;</span><span class="op">);</span></span>
<span id="cb258-106"><a href="#cb258-106" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>scanf<span class="op">(</span><span class="st">&quot; </span><span class="sc">%c</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">&amp;</span>op<span class="op">)</span> <span class="op">==</span> <span class="dv">1</span><span class="op">)</span></span>
<span id="cb258-107"><a href="#cb258-107" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb258-108"><a href="#cb258-108" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> <span class="op">(*</span>selected_op<span class="op">)(</span><span class="dt">int</span><span class="op">,</span> <span class="dt">int</span><span class="op">)</span> <span class="op">=</span> get_operation<span class="op">(</span>op<span class="op">);</span></span>
<span id="cb258-109"><a href="#cb258-109" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>selected_op <span class="op">!=</span> NULL<span class="op">)</span></span>
<span id="cb258-110"><a href="#cb258-110" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span></span>
<span id="cb258-111"><a href="#cb258-111" aria-hidden="true" tabindex="-1"></a>            <span class="dt">int</span> result <span class="op">=</span> calculate<span class="op">(</span><span class="dv">15</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> selected_op<span class="op">);</span></span>
<span id="cb258-112"><a href="#cb258-112" aria-hidden="true" tabindex="-1"></a>            printf<span class="op">(</span><span class="st">&quot;15 </span><span class="sc">%c</span><span class="st"> 3 = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> op<span class="op">,</span> result<span class="op">);</span></span>
<span id="cb258-113"><a href="#cb258-113" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb258-114"><a href="#cb258-114" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span></span>
<span id="cb258-115"><a href="#cb258-115" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span></span>
<span id="cb258-116"><a href="#cb258-116" aria-hidden="true" tabindex="-1"></a>            printf<span class="op">(</span><span class="st">&quot;無効な演算子です</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb258-117"><a href="#cb258-117" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb258-118"><a href="#cb258-118" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb258-119"><a href="#cb258-119" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb258-120"><a href="#cb258-120" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb258-121"><a href="#cb258-121" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<blockquote>
<p>C99版は<a
href="function_pointer_basic_c99.c">こちら</a>を参照してください。</p>
</blockquote>
<hr />
<h1 id="第13章-高度なトピック">第13章: 高度なトピック</h1>
<h2 id="対応c規格-9">対応C規格</h2>
<ul>
<li><strong>主要対象:</strong> C90</li>
<li><strong>学習内容:</strong>
分割コンパイル、extern宣言、プリプロセッサ、モジュール設計、ライブラリ作成</li>
</ul>
<h2 id="学習目標-9">学習目標</h2>
<p>この章を完了すると、以下のことができるようになります：</p>
<ul>
<li>複数ファイルに分割したプログラムを作成できる</li>
<li>extern宣言を正しく使用できる</li>
<li>プリプロセッサ機能を効果的に活用できる</li>
<li>再利用可能なモジュールを設計できる</li>
<li>静的ライブラリを作成・使用できる</li>
<li>大規模プロジェクトの構成を理解する</li>
</ul>
<h2 id="理論解説-9">理論解説</h2>
<h3 id="分割コンパイルの基本">分割コンパイルの基本</h3>
<p>大きなプログラムを複数のソースファイルに分割することで、保守性と再利用性が向上します。</p>
<h4 id="基本的な分割例">基本的な分割例</h4>
<p><strong>main.c（メインプログラム）</strong></p>
<div class="sourceCode" id="cb259"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb259-1"><a href="#cb259-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb259-2"><a href="#cb259-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&quot;math_tils.h&quot;</span></span>
<span id="cb259-3"><a href="#cb259-3" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&quot;string_tils.h&quot;</span></span>
<span id="cb259-4"><a href="#cb259-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb259-5"><a href="#cb259-5" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb259-6"><a href="#cb259-6" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb259-7"><a href="#cb259-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb259-8"><a href="#cb259-8" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== 数学関数テスト ===n&quot;</span><span class="op">);</span></span>
<span id="cb259-9"><a href="#cb259-9" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;add(, ) = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> add<span class="op">(,</span> <span class="op">));</span></span>
<span id="cb259-10"><a href="#cb259-10" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;multiply(, ) = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> multiply<span class="op">(,</span> <span class="op">));</span></span>
<span id="cb259-11"><a href="#cb259-11" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;power(, ) = </span><span class="sc">%ld</span><span class="st">n&quot;</span><span class="op">,</span> power<span class="op">(,</span> <span class="op">));</span></span>
<span id="cb259-12"><a href="#cb259-12" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb259-13"><a href="#cb259-13" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;n=== 文字列関数テスト ===n&quot;</span><span class="op">);</span></span>
<span id="cb259-14"><a href="#cb259-14" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> str<span class="op">[]</span> <span class="op">=</span> <span class="st">&quot;hello world&quot;</span><span class="op">;</span></span>
<span id="cb259-15"><a href="#cb259-15" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;元の文字列: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> str<span class="op">);</span></span>
<span id="cb259-16"><a href="#cb259-16" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb259-17"><a href="#cb259-17" aria-hidden="true" tabindex="-1"></a>    to_uuppercase<span class="op">(</span>str<span class="op">);</span></span>
<span id="cb259-18"><a href="#cb259-18" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;大文字変換: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> str<span class="op">);</span></span>
<span id="cb259-19"><a href="#cb259-19" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb259-20"><a href="#cb259-20" aria-hidden="true" tabindex="-1"></a>    reverse_string<span class="op">(</span>str<span class="op">);</span></span>
<span id="cb259-21"><a href="#cb259-21" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;逆順変換: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> str<span class="op">);</span></span>
<span id="cb259-22"><a href="#cb259-22" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb259-23"><a href="#cb259-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">;</span></span></code></pre></div>
<p><strong>math_tils.h（数学関数のヘッダファイル）</strong></p>
<div class="sourceCode" id="cb260"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb260-1"><a href="#cb260-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#ifndef MATH_UTILS_H</span></span>
<span id="cb260-2"><a href="#cb260-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#define MATH_UTILS_H</span></span>
<span id="cb260-3"><a href="#cb260-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb260-4"><a href="#cb260-4" aria-hidden="true" tabindex="-1"></a><span class="co">/* 関数宣言 */</span></span>
<span id="cb260-5"><a href="#cb260-5" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> add<span class="op">(</span><span class="dt">int</span> a<span class="op">,</span> <span class="dt">int</span> b<span class="op">);</span></span>
<span id="cb260-6"><a href="#cb260-6" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> multiply<span class="op">(</span><span class="dt">int</span> a<span class="op">,</span> <span class="dt">int</span> b<span class="op">);</span></span>
<span id="cb260-7"><a href="#cb260-7" aria-hidden="true" tabindex="-1"></a><span class="dt">long</span> power<span class="op">(</span><span class="dt">int</span> base<span class="op">,</span> <span class="dt">int</span> exponent<span class="op">);</span></span>
<span id="cb260-8"><a href="#cb260-8" aria-hidden="true" tabindex="-1"></a><span class="dt">double</span> average<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> size<span class="op">);</span></span>
<span id="cb260-9"><a href="#cb260-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb260-10"><a href="#cb260-10" aria-hidden="true" tabindex="-1"></a><span class="co">/* 定数定義 */</span></span>
<span id="cb260-11"><a href="#cb260-11" aria-hidden="true" tabindex="-1"></a><span class="pp">#define PI </span><span class="fl">.99</span></span>
<span id="cb260-12"><a href="#cb260-12" aria-hidden="true" tabindex="-1"></a><span class="pp">#define   .</span></span>
<span id="cb260-13"><a href="#cb260-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb260-14"><a href="#cb260-14" aria-hidden="true" tabindex="-1"></a><span class="pp">#endif </span><span class="co">/* MATH_UTILS_H */</span></span></code></pre></div>
<p><strong>math_tils.c（数学関数の実装）</strong></p>
<div class="sourceCode" id="cb261"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb261-1"><a href="#cb261-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&quot;math_tils.h&quot;</span></span>
<span id="cb261-2"><a href="#cb261-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb261-3"><a href="#cb261-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> add<span class="op">(</span><span class="dt">int</span> a<span class="op">,</span> <span class="dt">int</span> b<span class="op">)</span></span>
<span id="cb261-4"><a href="#cb261-4" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb261-5"><a href="#cb261-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb261-6"><a href="#cb261-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> a <span class="op">+</span> b<span class="op">;</span></span>
<span id="cb261-7"><a href="#cb261-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb261-8"><a href="#cb261-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb261-9"><a href="#cb261-9" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> multiply<span class="op">(</span><span class="dt">int</span> a<span class="op">,</span> <span class="dt">int</span> b<span class="op">)</span></span>
<span id="cb261-10"><a href="#cb261-10" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb261-11"><a href="#cb261-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb261-12"><a href="#cb261-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> a <span class="op">*</span> b<span class="op">;</span></span>
<span id="cb261-13"><a href="#cb261-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb261-14"><a href="#cb261-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb261-15"><a href="#cb261-15" aria-hidden="true" tabindex="-1"></a><span class="dt">long</span> power<span class="op">(</span><span class="dt">int</span> base<span class="op">,</span> <span class="dt">int</span> exponent<span class="op">)</span></span>
<span id="cb261-16"><a href="#cb261-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb261-17"><a href="#cb261-17" aria-hidden="true" tabindex="-1"></a>    <span class="dt">long</span> result <span class="op">=</span> <span class="op">;</span></span>
<span id="cb261-18"><a href="#cb261-18" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb261-19"><a href="#cb261-19" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb261-20"><a href="#cb261-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>exponent <span class="op">&lt;</span> <span class="op">)</span> <span class="cf">return</span> <span class="op">;</span>  <span class="co">/* 簡易実装 */</span></span>
<span id="cb261-21"><a href="#cb261-21" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb261-22"><a href="#cb261-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="op">;</span> i <span class="op">&lt;</span> exponent<span class="op">;</span> i<span class="op">++)</span> </span>
<span id="cb261-23"><a href="#cb261-23" aria-hidden="true" tabindex="-1"></a>        result <span class="op">*=</span> base<span class="op">;</span></span>
<span id="cb261-24"><a href="#cb261-24" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb261-25"><a href="#cb261-25" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb261-26"><a href="#cb261-26" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> result<span class="op">;</span></span>
<span id="cb261-27"><a href="#cb261-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb261-28"><a href="#cb261-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb261-29"><a href="#cb261-29" aria-hidden="true" tabindex="-1"></a><span class="dt">double</span> average<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> size<span class="op">)</span></span>
<span id="cb261-30"><a href="#cb261-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb261-31"><a href="#cb261-31" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> sum <span class="op">=</span> <span class="op">;</span></span>
<span id="cb261-32"><a href="#cb261-32" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb261-33"><a href="#cb261-33" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb261-34"><a href="#cb261-34" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>size <span class="op">&lt;=</span> <span class="op">)</span> <span class="cf">return</span> <span class="op">.;</span></span>
<span id="cb261-35"><a href="#cb261-35" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb261-36"><a href="#cb261-36" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="op">;</span> i <span class="op">&lt;</span> size<span class="op">;</span> i<span class="op">++)</span> </span>
<span id="cb261-37"><a href="#cb261-37" aria-hidden="true" tabindex="-1"></a>        sum <span class="op">+=</span> arr<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb261-38"><a href="#cb261-38" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb261-39"><a href="#cb261-39" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb261-40"><a href="#cb261-40" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">(</span><span class="dt">double</span><span class="op">)</span>sum <span class="op">/</span> size<span class="op">;</span></span></code></pre></div>
<p><strong>string_tils.h（文字列関数のヘッダファイル）</strong></p>
<div class="sourceCode" id="cb262"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb262-1"><a href="#cb262-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#ifndef STRING_UTILS_H</span></span>
<span id="cb262-2"><a href="#cb262-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#define STRING_UTILS_H</span></span>
<span id="cb262-3"><a href="#cb262-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb262-4"><a href="#cb262-4" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;string.h&gt;</span></span>
<span id="cb262-5"><a href="#cb262-5" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;ctype.h&gt;</span></span>
<span id="cb262-6"><a href="#cb262-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb262-7"><a href="#cb262-7" aria-hidden="true" tabindex="-1"></a><span class="co">/* 関数宣言 */</span></span>
<span id="cb262-8"><a href="#cb262-8" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> to_uuppercase<span class="op">(</span><span class="dt">char</span> <span class="op">*</span>str<span class="op">);</span></span>
<span id="cb262-9"><a href="#cb262-9" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> to_lowercase<span class="op">(</span><span class="dt">char</span> <span class="op">*</span>str<span class="op">);</span></span>
<span id="cb262-10"><a href="#cb262-10" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> reverse_string<span class="op">(</span><span class="dt">char</span> <span class="op">*</span>str<span class="op">);</span></span>
<span id="cb262-11"><a href="#cb262-11" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> count_words<span class="op">(</span><span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>str<span class="op">);</span></span>
<span id="cb262-12"><a href="#cb262-12" aria-hidden="true" tabindex="-1"></a><span class="dt">char</span><span class="op">*</span> trim_whitespace<span class="op">(</span><span class="dt">char</span> <span class="op">*</span>str<span class="op">);</span></span>
<span id="cb262-13"><a href="#cb262-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb262-14"><a href="#cb262-14" aria-hidden="true" tabindex="-1"></a><span class="pp">#endif </span><span class="co">/* STRING_UTILS_H */</span></span></code></pre></div>
<p><strong>string_tils.c（文字列関数の実装）</strong></p>
<div class="sourceCode" id="cb263"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb263-1"><a href="#cb263-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&quot;string_tils.h&quot;</span></span>
<span id="cb263-2"><a href="#cb263-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb263-3"><a href="#cb263-3" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> to_uuppercase<span class="op">(</span><span class="dt">char</span> <span class="op">*</span>str<span class="op">)</span></span>
<span id="cb263-4"><a href="#cb263-4" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb263-5"><a href="#cb263-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb263-6"><a href="#cb263-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>str <span class="op">==</span> NULL<span class="op">)</span> <span class="cf">return</span><span class="op">;</span></span>
<span id="cb263-7"><a href="#cb263-7" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb263-8"><a href="#cb263-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(*</span>str<span class="op">)</span> </span>
<span id="cb263-9"><a href="#cb263-9" aria-hidden="true" tabindex="-1"></a>        <span class="op">*</span>str <span class="op">=</span> topper<span class="op">((</span><span class="dt">unsigned</span> <span class="dt">char</span><span class="op">)*</span>str<span class="op">);</span></span>
<span id="cb263-10"><a href="#cb263-10" aria-hidden="true" tabindex="-1"></a>        str<span class="op">++;</span></span>
<span id="cb263-11"><a href="#cb263-11" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb263-12"><a href="#cb263-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb263-13"><a href="#cb263-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb263-14"><a href="#cb263-14" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> to_lowercase<span class="op">(</span><span class="dt">char</span> <span class="op">*</span>str<span class="op">)</span></span>
<span id="cb263-15"><a href="#cb263-15" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb263-16"><a href="#cb263-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb263-17"><a href="#cb263-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>str <span class="op">==</span> NULL<span class="op">)</span> <span class="cf">return</span><span class="op">;</span></span>
<span id="cb263-18"><a href="#cb263-18" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb263-19"><a href="#cb263-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(*</span>str<span class="op">)</span> </span>
<span id="cb263-20"><a href="#cb263-20" aria-hidden="true" tabindex="-1"></a>        <span class="op">*</span>str <span class="op">=</span> tolower<span class="op">((</span><span class="dt">unsigned</span> <span class="dt">char</span><span class="op">)*</span>str<span class="op">);</span></span>
<span id="cb263-21"><a href="#cb263-21" aria-hidden="true" tabindex="-1"></a>        str<span class="op">++;</span></span>
<span id="cb263-22"><a href="#cb263-22" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb263-23"><a href="#cb263-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb263-24"><a href="#cb263-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb263-25"><a href="#cb263-25" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> reverse_string<span class="op">(</span><span class="dt">char</span> <span class="op">*</span>str<span class="op">)</span></span>
<span id="cb263-26"><a href="#cb263-26" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb263-27"><a href="#cb263-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb263-28"><a href="#cb263-28" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> len<span class="op">,</span> i<span class="op">;</span></span>
<span id="cb263-29"><a href="#cb263-29" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> temp<span class="op">;</span></span>
<span id="cb263-30"><a href="#cb263-30" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb263-31"><a href="#cb263-31" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>str <span class="op">==</span> NULL<span class="op">)</span> <span class="cf">return</span><span class="op">;</span></span>
<span id="cb263-32"><a href="#cb263-32" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb263-33"><a href="#cb263-33" aria-hidden="true" tabindex="-1"></a>    len <span class="op">=</span> strlen<span class="op">(</span>str<span class="op">);</span></span>
<span id="cb263-34"><a href="#cb263-34" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="op">;</span> i <span class="op">&lt;</span> len <span class="op">/</span> <span class="op">;</span> i<span class="op">++)</span> </span>
<span id="cb263-35"><a href="#cb263-35" aria-hidden="true" tabindex="-1"></a>        temp <span class="op">=</span> str<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb263-36"><a href="#cb263-36" aria-hidden="true" tabindex="-1"></a>        str<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> str<span class="op">[</span>len <span class="op">-</span>  <span class="op">-</span> i<span class="op">];</span></span>
<span id="cb263-37"><a href="#cb263-37" aria-hidden="true" tabindex="-1"></a>        str<span class="op">[</span>len <span class="op">-</span>  <span class="op">-</span> i<span class="op">]</span> <span class="op">=</span> temp<span class="op">;</span></span>
<span id="cb263-38"><a href="#cb263-38" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb263-39"><a href="#cb263-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb263-40"><a href="#cb263-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb263-41"><a href="#cb263-41" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> count_words<span class="op">(</span><span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>str<span class="op">)</span></span>
<span id="cb263-42"><a href="#cb263-42" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb263-43"><a href="#cb263-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb263-44"><a href="#cb263-44" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> count <span class="op">=</span> <span class="op">;</span></span>
<span id="cb263-45"><a href="#cb263-45" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> in_word <span class="op">=</span> <span class="op">;</span></span>
<span id="cb263-46"><a href="#cb263-46" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb263-47"><a href="#cb263-47" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>str <span class="op">==</span> NULL<span class="op">)</span> <span class="cf">return</span> <span class="op">;</span></span>
<span id="cb263-48"><a href="#cb263-48" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb263-49"><a href="#cb263-49" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(*</span>str<span class="op">)</span> </span>
<span id="cb263-50"><a href="#cb263-50" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>isspace<span class="op">((</span><span class="dt">unsigned</span> <span class="dt">char</span><span class="op">)*</span>str<span class="op">))</span> </span>
<span id="cb263-51"><a href="#cb263-51" aria-hidden="true" tabindex="-1"></a>            in_word <span class="op">=</span> <span class="op">;</span></span>
<span id="cb263-52"><a href="#cb263-52" aria-hidden="true" tabindex="-1"></a>         <span class="cf">else</span> <span class="cf">if</span> <span class="op">(!</span>in_word<span class="op">)</span> </span>
<span id="cb263-53"><a href="#cb263-53" aria-hidden="true" tabindex="-1"></a>            in_word <span class="op">=</span> <span class="op">;</span></span>
<span id="cb263-54"><a href="#cb263-54" aria-hidden="true" tabindex="-1"></a>            count<span class="op">++;</span></span>
<span id="cb263-55"><a href="#cb263-55" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb263-56"><a href="#cb263-56" aria-hidden="true" tabindex="-1"></a>        str<span class="op">++;</span></span>
<span id="cb263-57"><a href="#cb263-57" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb263-58"><a href="#cb263-58" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb263-59"><a href="#cb263-59" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> count<span class="op">;</span></span>
<span id="cb263-60"><a href="#cb263-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb263-61"><a href="#cb263-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb263-62"><a href="#cb263-62" aria-hidden="true" tabindex="-1"></a><span class="dt">char</span><span class="op">*</span> trim_whitespace<span class="op">(</span><span class="dt">char</span> <span class="op">*</span>str<span class="op">)</span></span>
<span id="cb263-63"><a href="#cb263-63" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb263-64"><a href="#cb263-64" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> <span class="op">*</span>end<span class="op">;</span></span>
<span id="cb263-65"><a href="#cb263-65" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb263-66"><a href="#cb263-66" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>str <span class="op">==</span> NULL<span class="op">)</span> <span class="cf">return</span> NULL<span class="op">;</span></span>
<span id="cb263-67"><a href="#cb263-67" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb263-68"><a href="#cb263-68" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 先頭の空白をスキップ */</span></span>
<span id="cb263-69"><a href="#cb263-69" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>isspace<span class="op">((</span><span class="dt">unsigned</span> <span class="dt">char</span><span class="op">)*</span>str<span class="op">))</span> str<span class="op">++;</span></span>
<span id="cb263-70"><a href="#cb263-70" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb263-71"><a href="#cb263-71" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(*</span>str <span class="op">==</span> <span class="ch">&#39;</span><span class="er">&#39;</span><span class="op">)</span> <span class="cf">return</span> str<span class="op">;</span></span>
<span id="cb263-72"><a href="#cb263-72" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb263-73"><a href="#cb263-73" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 末尾の空白を削除 */</span></span>
<span id="cb263-74"><a href="#cb263-74" aria-hidden="true" tabindex="-1"></a>    end <span class="op">=</span> str <span class="op">+</span> strlen<span class="op">(</span>str<span class="op">)</span> <span class="op">-</span> <span class="op">;</span></span>
<span id="cb263-75"><a href="#cb263-75" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>end <span class="op">&gt;</span> str <span class="op">&amp;&amp;</span> isspace<span class="op">((</span><span class="dt">unsigned</span> <span class="dt">char</span><span class="op">)*</span>end<span class="op">))</span> end<span class="op">--;</span></span>
<span id="cb263-76"><a href="#cb263-76" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb263-77"><a href="#cb263-77" aria-hidden="true" tabindex="-1"></a>    end<span class="op">[]</span> <span class="op">=</span> <span class="ch">&#39;</span><span class="er">&#39;</span><span class="op">;</span></span>
<span id="cb263-78"><a href="#cb263-78" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb263-79"><a href="#cb263-79" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> str<span class="op">;</span></span></code></pre></div>
<h3 id="extern宣言とグローバル変数">extern宣言とグローバル変数</h3>
<p>複数ファイル間でグローバル変数を共有する方法を学習します。</p>
<h4 id="グローバル変数の管理">グローバル変数の管理</h4>
<p><strong>globals.h（グローバル変数の宣言）</strong></p>
<div class="sourceCode" id="cb264"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb264-1"><a href="#cb264-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#ifndef GLOALS_H</span></span>
<span id="cb264-2"><a href="#cb264-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#define GLOALS_H</span></span>
<span id="cb264-3"><a href="#cb264-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb264-4"><a href="#cb264-4" aria-hidden="true" tabindex="-1"></a><span class="co">/* グローバル変数の宣言（extern） */</span></span>
<span id="cb264-5"><a href="#cb264-5" aria-hidden="true" tabindex="-1"></a><span class="kw">extern</span> <span class="dt">int</span> g_debug_mode<span class="op">;</span></span>
<span id="cb264-6"><a href="#cb264-6" aria-hidden="true" tabindex="-1"></a><span class="kw">extern</span> <span class="dt">char</span> g_application_name<span class="op">[];</span></span>
<span id="cb264-7"><a href="#cb264-7" aria-hidden="true" tabindex="-1"></a><span class="kw">extern</span> <span class="dt">double</span> g_version<span class="op">;</span></span>
<span id="cb264-8"><a href="#cb264-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb264-9"><a href="#cb264-9" aria-hidden="true" tabindex="-1"></a><span class="co">/* グローバル関数の宣言 */</span></span>
<span id="cb264-10"><a href="#cb264-10" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> init_globals<span class="op">(</span><span class="dt">void</span><span class="op">);</span></span>
<span id="cb264-11"><a href="#cb264-11" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> print_globals<span class="op">(</span><span class="dt">void</span><span class="op">);</span></span>
<span id="cb264-12"><a href="#cb264-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb264-13"><a href="#cb264-13" aria-hidden="true" tabindex="-1"></a><span class="pp">#endif </span><span class="co">/* GLOALS_H */</span></span></code></pre></div>
<p><strong>globals.c（グローバル変数の定義）</strong></p>
<div class="sourceCode" id="cb265"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb265-1"><a href="#cb265-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb265-2"><a href="#cb265-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;string.h&gt;</span></span>
<span id="cb265-3"><a href="#cb265-3" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&quot;globals.h&quot;</span></span>
<span id="cb265-4"><a href="#cb265-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb265-5"><a href="#cb265-5" aria-hidden="true" tabindex="-1"></a><span class="co">/* グローバル変数の定義（実体） */</span></span>
<span id="cb265-6"><a href="#cb265-6" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> g_debug_mode <span class="op">=</span> <span class="op">;</span></span>
<span id="cb265-7"><a href="#cb265-7" aria-hidden="true" tabindex="-1"></a><span class="dt">char</span> g_application_name<span class="op">[]</span> <span class="op">=</span> <span class="st">&quot;MyApplication&quot;</span><span class="op">;</span></span>
<span id="cb265-8"><a href="#cb265-8" aria-hidden="true" tabindex="-1"></a><span class="dt">double</span> g_version <span class="op">=</span> <span class="op">.;</span></span>
<span id="cb265-9"><a href="#cb265-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb265-10"><a href="#cb265-10" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> init_globals<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb265-11"><a href="#cb265-11" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb265-12"><a href="#cb265-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb265-13"><a href="#cb265-13" aria-hidden="true" tabindex="-1"></a>    g_debug_mode <span class="op">=</span> <span class="op">;</span></span>
<span id="cb265-14"><a href="#cb265-14" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>g_application_name<span class="op">,</span> <span class="st">&quot;Advanced C Ttutorial&quot;</span><span class="op">);</span></span>
<span id="cb265-15"><a href="#cb265-15" aria-hidden="true" tabindex="-1"></a>    g_version <span class="op">=</span> <span class="op">.;</span></span>
<span id="cb265-16"><a href="#cb265-16" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb265-17"><a href="#cb265-17" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;グローバル変数を初期化しましたn&quot;</span><span class="op">);</span></span>
<span id="cb265-18"><a href="#cb265-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb265-19"><a href="#cb265-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb265-20"><a href="#cb265-20" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> print_globals<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb265-21"><a href="#cb265-21" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb265-22"><a href="#cb265-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb265-23"><a href="#cb265-23" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== グローバル変数 ===n&quot;</span><span class="op">);</span></span>
<span id="cb265-24"><a href="#cb265-24" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;アプリケーション名: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> g_application_name<span class="op">);</span></span>
<span id="cb265-25"><a href="#cb265-25" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;バージョン: %.fn&quot;</span><span class="op">,</span> g_version<span class="op">);</span></span>
<span id="cb265-26"><a href="#cb265-26" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;デバッグモード: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> g_debug_mode <span class="op">?</span> <span class="st">&quot;ON&quot;</span> <span class="op">:</span> <span class="st">&quot;O&quot;</span><span class="op">);</span></span></code></pre></div>
<p><strong>modle.c（モジュール）</strong></p>
<div class="sourceCode" id="cb266"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb266-1"><a href="#cb266-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb266-2"><a href="#cb266-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&quot;globals.h&quot;</span></span>
<span id="cb266-3"><a href="#cb266-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb266-4"><a href="#cb266-4" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> modle_function<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb266-5"><a href="#cb266-5" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb266-6"><a href="#cb266-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb266-7"><a href="#cb266-7" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;[モジュール] 実行中n&quot;</span><span class="op">);</span></span>
<span id="cb266-8"><a href="#cb266-8" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb266-9"><a href="#cb266-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>g_debug_mode<span class="op">)</span> </span>
<span id="cb266-10"><a href="#cb266-10" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;[DUG] モジュールの詳細情報n&quot;</span><span class="op">);</span></span>
<span id="cb266-11"><a href="#cb266-11" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb266-12"><a href="#cb266-12" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb266-13"><a href="#cb266-13" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;[モジュール] アプリケーション: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> g_application_name<span class="op">);</span></span></code></pre></div>
<p><strong>modle.c（モジュール）</strong></p>
<div class="sourceCode" id="cb267"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb267-1"><a href="#cb267-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb267-2"><a href="#cb267-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&quot;globals.h&quot;</span></span>
<span id="cb267-3"><a href="#cb267-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb267-4"><a href="#cb267-4" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> modle_function<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb267-5"><a href="#cb267-5" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb267-6"><a href="#cb267-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb267-7"><a href="#cb267-7" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;[モジュール] 実行中n&quot;</span><span class="op">);</span></span>
<span id="cb267-8"><a href="#cb267-8" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb267-9"><a href="#cb267-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>g_debug_mode<span class="op">)</span> </span>
<span id="cb267-10"><a href="#cb267-10" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;[DUG] モジュールの詳細情報n&quot;</span><span class="op">);</span></span>
<span id="cb267-11"><a href="#cb267-11" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb267-12"><a href="#cb267-12" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb267-13"><a href="#cb267-13" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* バージョンチェック */</span></span>
<span id="cb267-14"><a href="#cb267-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>g_version <span class="op">&gt;=</span> <span class="op">.)</span> </span>
<span id="cb267-15"><a href="#cb267-15" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;[モジュール] 新機能が利用可能ですn&quot;</span><span class="op">);</span></span>
<span id="cb267-16"><a href="#cb267-16" aria-hidden="true" tabindex="-1"></a>    </span></code></pre></div>
<h3 id="プリプロセッサ機能">プリプロセッサ機能</h3>
<p>プリプロセッサを使ってより柔軟なプログラムを作成します。</p>
<h4 id="マクロの活用">マクロの活用</h4>
<p><strong>macros.h（マクロ定義集）</strong></p>
<div class="sourceCode" id="cb268"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb268-1"><a href="#cb268-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#ifndef MACROS_H</span></span>
<span id="cb268-2"><a href="#cb268-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#define MACROS_H</span></span>
<span id="cb268-3"><a href="#cb268-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb268-4"><a href="#cb268-4" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb268-5"><a href="#cb268-5" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdlib.h&gt;</span></span>
<span id="cb268-6"><a href="#cb268-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb268-7"><a href="#cb268-7" aria-hidden="true" tabindex="-1"></a><span class="co">/* 基本的なマクロ */</span></span>
<span id="cb268-8"><a href="#cb268-8" aria-hidden="true" tabindex="-1"></a><span class="pp">#define MAX</span><span class="op">(</span><span class="pp">a</span><span class="op">,</span><span class="pp"> b</span><span class="op">)</span><span class="pp"> </span><span class="op">((</span><span class="pp">a</span><span class="op">)</span><span class="pp"> </span><span class="op">&gt;</span><span class="pp"> </span><span class="op">(</span><span class="pp">b</span><span class="op">)</span><span class="pp"> </span><span class="op">?</span><span class="pp"> </span><span class="op">(</span><span class="pp">a</span><span class="op">)</span><span class="pp"> </span><span class="op">:</span><span class="pp"> </span><span class="op">(</span><span class="pp">b</span><span class="op">))</span></span>
<span id="cb268-9"><a href="#cb268-9" aria-hidden="true" tabindex="-1"></a><span class="pp">#define MIN</span><span class="op">(</span><span class="pp">a</span><span class="op">,</span><span class="pp"> b</span><span class="op">)</span><span class="pp"> </span><span class="op">((</span><span class="pp">a</span><span class="op">)</span><span class="pp"> </span><span class="op">&lt;</span><span class="pp"> </span><span class="op">(</span><span class="pp">b</span><span class="op">)</span><span class="pp"> </span><span class="op">?</span><span class="pp"> </span><span class="op">(</span><span class="pp">a</span><span class="op">)</span><span class="pp"> </span><span class="op">:</span><span class="pp"> </span><span class="op">(</span><span class="pp">b</span><span class="op">))</span></span>
<span id="cb268-10"><a href="#cb268-10" aria-hidden="true" tabindex="-1"></a><span class="pp">#define AS</span><span class="op">(</span><span class="pp">x</span><span class="op">)</span><span class="pp"> </span><span class="op">((</span><span class="pp">x</span><span class="op">)</span><span class="pp"> </span><span class="op">&lt;</span><span class="pp">  </span><span class="op">?</span><span class="pp"> </span><span class="op">-(</span><span class="pp">x</span><span class="op">)</span><span class="pp"> </span><span class="op">:</span><span class="pp"> </span><span class="op">(</span><span class="pp">x</span><span class="op">))</span></span>
<span id="cb268-11"><a href="#cb268-11" aria-hidden="true" tabindex="-1"></a><span class="pp">#define SQUAR</span><span class="op">(</span><span class="pp">x</span><span class="op">)</span><span class="pp"> </span><span class="op">((</span><span class="pp">x</span><span class="op">)</span><span class="pp"> </span><span class="op">*</span><span class="pp"> </span><span class="op">(</span><span class="pp">x</span><span class="op">))</span></span>
<span id="cb268-12"><a href="#cb268-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb268-13"><a href="#cb268-13" aria-hidden="true" tabindex="-1"></a><span class="co">/* 配列サイズ計算 */</span></span>
<span id="cb268-14"><a href="#cb268-14" aria-hidden="true" tabindex="-1"></a><span class="pp">#define ARRAY_SIZE</span><span class="op">(</span><span class="pp">arr</span><span class="op">)</span><span class="pp"> </span><span class="op">(</span><span class="kw">sizeof</span><span class="op">(</span><span class="pp">arr</span><span class="op">)</span><span class="pp"> </span><span class="op">/</span><span class="pp"> </span><span class="kw">sizeof</span><span class="op">((</span><span class="pp">arr</span><span class="op">)[]))</span></span>
<span id="cb268-15"><a href="#cb268-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb268-16"><a href="#cb268-16" aria-hidden="true" tabindex="-1"></a><span class="co">/* メモリ関連 */</span></span>
<span id="cb268-17"><a href="#cb268-17" aria-hidden="true" tabindex="-1"></a><span class="pp">#define SA_R</span><span class="op">(</span><span class="pp">ptr</span><span class="op">)</span><span class="pp"> </span><span class="cf">do</span><span class="pp">  </span></span>
<span id="cb268-18"><a href="#cb268-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">((</span>ptr<span class="op">)</span> <span class="op">!=</span> NULL<span class="op">)</span>  </span>
<span id="cb268-19"><a href="#cb268-19" aria-hidden="true" tabindex="-1"></a>        free<span class="op">(</span>ptr<span class="op">);</span> </span>
<span id="cb268-20"><a href="#cb268-20" aria-hidden="true" tabindex="-1"></a>        <span class="op">(</span>ptr<span class="op">)</span> <span class="op">=</span> NULL<span class="op">;</span> </span>
<span id="cb268-21"><a href="#cb268-21" aria-hidden="true" tabindex="-1"></a>     </span>
<span id="cb268-22"><a href="#cb268-22" aria-hidden="true" tabindex="-1"></a> <span class="cf">while</span><span class="op">()</span></span>
<span id="cb268-23"><a href="#cb268-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb268-24"><a href="#cb268-24" aria-hidden="true" tabindex="-1"></a><span class="pp">#define MALLOC_CHCK</span><span class="op">(</span><span class="pp">ptr</span><span class="op">,</span><span class="pp"> size</span><span class="op">)</span><span class="pp"> </span><span class="cf">do</span><span class="pp">  </span></span>
<span id="cb268-25"><a href="#cb268-25" aria-hidden="true" tabindex="-1"></a>    <span class="op">(</span>ptr<span class="op">)</span> <span class="op">=</span> malloc<span class="op">(</span>size<span class="op">);</span> </span>
<span id="cb268-26"><a href="#cb268-26" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">((</span>ptr<span class="op">)</span> <span class="op">==</span> NULL<span class="op">)</span>  </span>
<span id="cb268-27"><a href="#cb268-27" aria-hidden="true" tabindex="-1"></a>        fprintf<span class="op">(</span>stderr<span class="op">,</span> <span class="st">&quot;メモリ割り当てエラー: </span><span class="sc">%s</span><span class="st">:</span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> __IL__<span class="op">,</span> __LIN__<span class="op">);</span> </span>
<span id="cb268-28"><a href="#cb268-28" aria-hidden="true" tabindex="-1"></a>        exit<span class="op">(</span>XIT_AILUR<span class="op">);</span> </span>
<span id="cb268-29"><a href="#cb268-29" aria-hidden="true" tabindex="-1"></a>     </span>
<span id="cb268-30"><a href="#cb268-30" aria-hidden="true" tabindex="-1"></a> <span class="cf">while</span><span class="op">()</span></span>
<span id="cb268-31"><a href="#cb268-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb268-32"><a href="#cb268-32" aria-hidden="true" tabindex="-1"></a><span class="co">/* デバッグ用マクロ */</span></span>
<span id="cb268-33"><a href="#cb268-33" aria-hidden="true" tabindex="-1"></a><span class="pp">#ifdef DUG</span></span>
<span id="cb268-34"><a href="#cb268-34" aria-hidden="true" tabindex="-1"></a>    <span class="pp">#define DUG_PRINT</span><span class="op">(</span><span class="pp">fmt</span><span class="op">,</span><span class="pp"> </span><span class="op">...)</span><span class="pp"> </span></span>
<span id="cb268-35"><a href="#cb268-35" aria-hidden="true" tabindex="-1"></a>        fprintf<span class="op">(</span>stderr<span class="op">,</span> <span class="st">&quot;[DUG </span><span class="sc">%s</span><span class="st">:</span><span class="sc">%d</span><span class="st">] &quot;</span> fmt <span class="st">&quot;n&quot;</span><span class="op">,</span> __IL__<span class="op">,</span> __LIN__<span class="op">,</span> ##__VA_ARGS__<span class="op">)</span></span>
<span id="cb268-36"><a href="#cb268-36" aria-hidden="true" tabindex="-1"></a><span class="pp">#else</span></span>
<span id="cb268-37"><a href="#cb268-37" aria-hidden="true" tabindex="-1"></a>    <span class="pp">#define DUG_PRINT</span><span class="op">(</span><span class="pp">fmt</span><span class="op">,</span><span class="pp"> </span><span class="op">...)</span><span class="pp"> </span><span class="cf">do</span><span class="pp">  </span><span class="cf">while</span><span class="op">()</span></span>
<span id="cb268-38"><a href="#cb268-38" aria-hidden="true" tabindex="-1"></a><span class="pp">#endif</span></span>
<span id="cb268-39"><a href="#cb268-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb268-40"><a href="#cb268-40" aria-hidden="true" tabindex="-1"></a><span class="co">/* エラーハンドリング */</span></span>
<span id="cb268-41"><a href="#cb268-41" aria-hidden="true" tabindex="-1"></a><span class="pp">#define RROR_XIT</span><span class="op">(</span><span class="pp">msg</span><span class="op">)</span><span class="pp"> </span><span class="cf">do</span><span class="pp">  </span></span>
<span id="cb268-42"><a href="#cb268-42" aria-hidden="true" tabindex="-1"></a>    fprintf<span class="op">(</span>stderr<span class="op">,</span> <span class="st">&quot;エラー: </span><span class="sc">%s</span><span class="st"> (</span><span class="sc">%s</span><span class="st">:</span><span class="sc">%d</span><span class="st">)n&quot;</span><span class="op">,</span> <span class="op">(</span>msg<span class="op">),</span> __IL__<span class="op">,</span> __LIN__<span class="op">);</span> </span>
<span id="cb268-43"><a href="#cb268-43" aria-hidden="true" tabindex="-1"></a>    exit<span class="op">(</span>XIT_AILUR<span class="op">);</span> </span>
<span id="cb268-44"><a href="#cb268-44" aria-hidden="true" tabindex="-1"></a> <span class="cf">while</span><span class="op">()</span></span>
<span id="cb268-45"><a href="#cb268-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb268-46"><a href="#cb268-46" aria-hidden="true" tabindex="-1"></a><span class="co">/* 関数の開始・終了ログ */</span></span>
<span id="cb268-47"><a href="#cb268-47" aria-hidden="true" tabindex="-1"></a><span class="pp">#ifdef TRAC</span></span>
<span id="cb268-48"><a href="#cb268-48" aria-hidden="true" tabindex="-1"></a>    <span class="pp">#define UNC_NTR</span><span class="op">()</span><span class="pp"> printf</span><span class="op">(</span><span class="st">&quot;&gt;&gt; </span><span class="sc">%s</span><span class="st"> 開始n&quot;</span><span class="op">,</span><span class="pp"> __UNCTION__</span><span class="op">)</span></span>
<span id="cb268-49"><a href="#cb268-49" aria-hidden="true" tabindex="-1"></a>    <span class="pp">#define UNC_XIT</span><span class="op">()</span><span class="pp"> printf</span><span class="op">(</span><span class="st">&quot;&lt;&lt; </span><span class="sc">%s</span><span class="st"> 終了n&quot;</span><span class="op">,</span><span class="pp"> __UNCTION__</span><span class="op">)</span></span>
<span id="cb268-50"><a href="#cb268-50" aria-hidden="true" tabindex="-1"></a><span class="pp">#else</span></span>
<span id="cb268-51"><a href="#cb268-51" aria-hidden="true" tabindex="-1"></a>    <span class="pp">#define UNC_NTR</span><span class="op">()</span><span class="pp"> </span><span class="cf">do</span><span class="pp">  </span><span class="cf">while</span><span class="op">()</span></span>
<span id="cb268-52"><a href="#cb268-52" aria-hidden="true" tabindex="-1"></a>    <span class="pp">#define UNC_XIT</span><span class="op">()</span><span class="pp"> </span><span class="cf">do</span><span class="pp">  </span><span class="cf">while</span><span class="op">()</span></span>
<span id="cb268-53"><a href="#cb268-53" aria-hidden="true" tabindex="-1"></a><span class="pp">#endif</span></span>
<span id="cb268-54"><a href="#cb268-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb268-55"><a href="#cb268-55" aria-hidden="true" tabindex="-1"></a><span class="pp">#endif </span><span class="co">/* MACROS_H */</span></span></code></pre></div>
<h4 id="条件コンパイル">条件コンパイル</h4>
<p><strong>platform.h（プラットフォーム依存処理）</strong></p>
<div class="sourceCode" id="cb269"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb269-1"><a href="#cb269-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#ifndef PLATORM_H</span></span>
<span id="cb269-2"><a href="#cb269-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#define PLATORM_H</span></span>
<span id="cb269-3"><a href="#cb269-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb269-4"><a href="#cb269-4" aria-hidden="true" tabindex="-1"></a><span class="co">/* プラットフォーム判定 */</span></span>
<span id="cb269-5"><a href="#cb269-5" aria-hidden="true" tabindex="-1"></a><span class="pp">#ifdef _WIN</span></span>
<span id="cb269-6"><a href="#cb269-6" aria-hidden="true" tabindex="-1"></a>    <span class="pp">#define OS_WINDOWS</span></span>
<span id="cb269-7"><a href="#cb269-7" aria-hidden="true" tabindex="-1"></a>    <span class="pp">#include </span><span class="im">&lt;windows.h&gt;</span></span>
<span id="cb269-8"><a href="#cb269-8" aria-hidden="true" tabindex="-1"></a>    <span class="pp">#define PATH_SPARATOR </span><span class="ch">&#39;</span><span class="er">&#39;</span></span>
<span id="cb269-9"><a href="#cb269-9" aria-hidden="true" tabindex="-1"></a>    <span class="pp">#define LIN_NDING </span><span class="st">&quot;run&quot;</span></span>
<span id="cb269-10"><a href="#cb269-10" aria-hidden="true" tabindex="-1"></a><span class="pp">#elif defined(__linx__)</span></span>
<span id="cb269-11"><a href="#cb269-11" aria-hidden="true" tabindex="-1"></a>    <span class="pp">#define OS_LINUX</span></span>
<span id="cb269-12"><a href="#cb269-12" aria-hidden="true" tabindex="-1"></a>    <span class="pp">#include </span><span class="im">&lt;nistd.h&gt;</span></span>
<span id="cb269-13"><a href="#cb269-13" aria-hidden="true" tabindex="-1"></a>    <span class="pp">#define PATH_SPARATOR </span><span class="ch">&#39;/&#39;</span></span>
<span id="cb269-14"><a href="#cb269-14" aria-hidden="true" tabindex="-1"></a>    <span class="pp">#define LIN_NDING </span><span class="st">&quot;n&quot;</span></span>
<span id="cb269-15"><a href="#cb269-15" aria-hidden="true" tabindex="-1"></a><span class="pp">#elif defined(__APPL__)</span></span>
<span id="cb269-16"><a href="#cb269-16" aria-hidden="true" tabindex="-1"></a>    <span class="pp">#define OS_MACOS</span></span>
<span id="cb269-17"><a href="#cb269-17" aria-hidden="true" tabindex="-1"></a>    <span class="pp">#include </span><span class="im">&lt;nistd.h&gt;</span></span>
<span id="cb269-18"><a href="#cb269-18" aria-hidden="true" tabindex="-1"></a>    <span class="pp">#define PATH_SPARATOR </span><span class="ch">&#39;/&#39;</span></span>
<span id="cb269-19"><a href="#cb269-19" aria-hidden="true" tabindex="-1"></a>    <span class="pp">#define LIN_NDING </span><span class="st">&quot;n&quot;</span></span>
<span id="cb269-20"><a href="#cb269-20" aria-hidden="true" tabindex="-1"></a><span class="pp">#else</span></span>
<span id="cb269-21"><a href="#cb269-21" aria-hidden="true" tabindex="-1"></a>    <span class="pp">#define OS_UNKNOWN</span></span>
<span id="cb269-22"><a href="#cb269-22" aria-hidden="true" tabindex="-1"></a>    <span class="pp">#define PATH_SPARATOR </span><span class="ch">&#39;/&#39;</span></span>
<span id="cb269-23"><a href="#cb269-23" aria-hidden="true" tabindex="-1"></a>    <span class="pp">#define LIN_NDING </span><span class="st">&quot;n&quot;</span></span>
<span id="cb269-24"><a href="#cb269-24" aria-hidden="true" tabindex="-1"></a><span class="pp">#endif</span></span>
<span id="cb269-25"><a href="#cb269-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb269-26"><a href="#cb269-26" aria-hidden="true" tabindex="-1"></a><span class="co">/* コンパイラ判定 */</span></span>
<span id="cb269-27"><a href="#cb269-27" aria-hidden="true" tabindex="-1"></a><span class="pp">#ifdef __GNUC__</span></span>
<span id="cb269-28"><a href="#cb269-28" aria-hidden="true" tabindex="-1"></a>    <span class="pp">#define COMPILR_GCC</span></span>
<span id="cb269-29"><a href="#cb269-29" aria-hidden="true" tabindex="-1"></a>    <span class="pp">#define ORC_INLIN __inline__</span></span>
<span id="cb269-30"><a href="#cb269-30" aria-hidden="true" tabindex="-1"></a><span class="pp">#elif defined(_MSC_VR)</span></span>
<span id="cb269-31"><a href="#cb269-31" aria-hidden="true" tabindex="-1"></a>    <span class="pp">#define COMPILR_MSVC</span></span>
<span id="cb269-32"><a href="#cb269-32" aria-hidden="true" tabindex="-1"></a>    <span class="pp">#define ORC_INLIN __forceinline</span></span>
<span id="cb269-33"><a href="#cb269-33" aria-hidden="true" tabindex="-1"></a><span class="pp">#else</span></span>
<span id="cb269-34"><a href="#cb269-34" aria-hidden="true" tabindex="-1"></a>    <span class="pp">#define COMPILR_UNKNOWN</span></span>
<span id="cb269-35"><a href="#cb269-35" aria-hidden="true" tabindex="-1"></a>    <span class="pp">#define ORC_INLIN </span><span class="kw">inline</span></span>
<span id="cb269-36"><a href="#cb269-36" aria-hidden="true" tabindex="-1"></a><span class="pp">#endif</span></span>
<span id="cb269-37"><a href="#cb269-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb269-38"><a href="#cb269-38" aria-hidden="true" tabindex="-1"></a><span class="co">/* バージョン管理 */</span></span>
<span id="cb269-39"><a href="#cb269-39" aria-hidden="true" tabindex="-1"></a><span class="pp">#define VRSION_MAJOR </span></span>
<span id="cb269-40"><a href="#cb269-40" aria-hidden="true" tabindex="-1"></a><span class="pp">#define VRSION_MINOR </span></span>
<span id="cb269-41"><a href="#cb269-41" aria-hidden="true" tabindex="-1"></a><span class="pp">#define VRSION_PATCH </span></span>
<span id="cb269-42"><a href="#cb269-42" aria-hidden="true" tabindex="-1"></a><span class="pp">#define VRSION_STRING </span><span class="st">&quot;..&quot;</span></span>
<span id="cb269-43"><a href="#cb269-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb269-44"><a href="#cb269-44" aria-hidden="true" tabindex="-1"></a><span class="co">/* 機能フラグ */</span></span>
<span id="cb269-45"><a href="#cb269-45" aria-hidden="true" tabindex="-1"></a><span class="pp">#define ATUR_LOGGING </span></span>
<span id="cb269-46"><a href="#cb269-46" aria-hidden="true" tabindex="-1"></a><span class="pp">#define ATUR_NCRYPTION </span></span>
<span id="cb269-47"><a href="#cb269-47" aria-hidden="true" tabindex="-1"></a><span class="pp">#define ATUR_COMPRSSION </span></span>
<span id="cb269-48"><a href="#cb269-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb269-49"><a href="#cb269-49" aria-hidden="true" tabindex="-1"></a><span class="co">/* プラットフォーム固有の関数 */</span></span>
<span id="cb269-50"><a href="#cb269-50" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> platform_init<span class="op">(</span><span class="dt">void</span><span class="op">);</span></span>
<span id="cb269-51"><a href="#cb269-51" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> platform_cleanup<span class="op">(</span><span class="dt">void</span><span class="op">);</span></span>
<span id="cb269-52"><a href="#cb269-52" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> platform_sleep<span class="op">(</span><span class="dt">int</span> milliseconds<span class="op">);</span></span>
<span id="cb269-53"><a href="#cb269-53" aria-hidden="true" tabindex="-1"></a><span class="dt">char</span><span class="op">*</span> platform_get_seruname<span class="op">(</span><span class="dt">void</span><span class="op">);</span></span>
<span id="cb269-54"><a href="#cb269-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb269-55"><a href="#cb269-55" aria-hidden="true" tabindex="-1"></a><span class="pp">#endif </span><span class="co">/* PLATORM_H */</span></span></code></pre></div>
<p><strong>platform.c（プラットフォーム実装）</strong></p>
<div class="sourceCode" id="cb270"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb270-1"><a href="#cb270-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb270-2"><a href="#cb270-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdlib.h&gt;</span></span>
<span id="cb270-3"><a href="#cb270-3" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;string.h&gt;</span></span>
<span id="cb270-4"><a href="#cb270-4" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&quot;platform.h&quot;</span></span>
<span id="cb270-5"><a href="#cb270-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb270-6"><a href="#cb270-6" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> platform_init<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb270-7"><a href="#cb270-7" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb270-8"><a href="#cb270-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb270-9"><a href="#cb270-9" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;プラットフォーム初期化中...n&quot;</span><span class="op">);</span></span>
<span id="cb270-10"><a href="#cb270-10" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb270-11"><a href="#cb270-11" aria-hidden="true" tabindex="-1"></a>    <span class="pp">#ifdef OS_WINDOWS</span></span>
<span id="cb270-12"><a href="#cb270-12" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;Windows環境を検出n&quot;</span><span class="op">);</span></span>
<span id="cb270-13"><a href="#cb270-13" aria-hidden="true" tabindex="-1"></a>    <span class="pp">#elif defined(OS_LINUX)</span></span>
<span id="cb270-14"><a href="#cb270-14" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;Linux環境を検出n&quot;</span><span class="op">);</span></span>
<span id="cb270-15"><a href="#cb270-15" aria-hidden="true" tabindex="-1"></a>    <span class="pp">#elif defined(OS_MACOS)</span></span>
<span id="cb270-16"><a href="#cb270-16" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;macOS環境を検出n&quot;</span><span class="op">);</span></span>
<span id="cb270-17"><a href="#cb270-17" aria-hidden="true" tabindex="-1"></a>    <span class="pp">#else</span></span>
<span id="cb270-18"><a href="#cb270-18" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;未知の環境n&quot;</span><span class="op">);</span></span>
<span id="cb270-19"><a href="#cb270-19" aria-hidden="true" tabindex="-1"></a>    <span class="pp">#endif</span></span>
<span id="cb270-20"><a href="#cb270-20" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb270-21"><a href="#cb270-21" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;バージョン: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> VRSION_STRING<span class="op">);</span></span>
<span id="cb270-22"><a href="#cb270-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb270-23"><a href="#cb270-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb270-24"><a href="#cb270-24" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> platform_cleanup<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb270-25"><a href="#cb270-25" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb270-26"><a href="#cb270-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb270-27"><a href="#cb270-27" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;プラットフォーム終了処理n&quot;</span><span class="op">);</span></span>
<span id="cb270-28"><a href="#cb270-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb270-29"><a href="#cb270-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb270-30"><a href="#cb270-30" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> platform_sleep<span class="op">(</span><span class="dt">int</span> milliseconds<span class="op">)</span></span>
<span id="cb270-31"><a href="#cb270-31" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb270-32"><a href="#cb270-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb270-33"><a href="#cb270-33" aria-hidden="true" tabindex="-1"></a>    <span class="pp">#ifdef OS_WINDOWS</span></span>
<span id="cb270-34"><a href="#cb270-34" aria-hidden="true" tabindex="-1"></a>        Sleep<span class="op">(</span>milliseconds<span class="op">);</span></span>
<span id="cb270-35"><a href="#cb270-35" aria-hidden="true" tabindex="-1"></a>    <span class="pp">#else</span></span>
<span id="cb270-36"><a href="#cb270-36" aria-hidden="true" tabindex="-1"></a>        sleep<span class="op">(</span>milliseconds <span class="op">*</span> <span class="op">);</span></span>
<span id="cb270-37"><a href="#cb270-37" aria-hidden="true" tabindex="-1"></a>    <span class="pp">#endif</span></span>
<span id="cb270-38"><a href="#cb270-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb270-39"><a href="#cb270-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb270-40"><a href="#cb270-40" aria-hidden="true" tabindex="-1"></a><span class="dt">char</span><span class="op">*</span> platform_get_seruname<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb270-41"><a href="#cb270-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb270-42"><a href="#cb270-42" aria-hidden="true" tabindex="-1"></a>    <span class="dt">static</span> <span class="dt">char</span> seruname<span class="op">[];</span></span>
<span id="cb270-43"><a href="#cb270-43" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> <span class="op">*</span>env_ser<span class="op">;</span></span>
<span id="cb270-44"><a href="#cb270-44" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb270-45"><a href="#cb270-45" aria-hidden="true" tabindex="-1"></a>    <span class="pp">#ifdef OS_WINDOWS</span></span>
<span id="cb270-46"><a href="#cb270-46" aria-hidden="true" tabindex="-1"></a>        env_ser <span class="op">=</span> getenv<span class="op">(</span><span class="st">&quot;USRNAM&quot;</span><span class="op">);</span></span>
<span id="cb270-47"><a href="#cb270-47" aria-hidden="true" tabindex="-1"></a>    <span class="pp">#else</span></span>
<span id="cb270-48"><a href="#cb270-48" aria-hidden="true" tabindex="-1"></a>        env_ser <span class="op">=</span> getenv<span class="op">(</span><span class="st">&quot;USR&quot;</span><span class="op">);</span></span>
<span id="cb270-49"><a href="#cb270-49" aria-hidden="true" tabindex="-1"></a>    <span class="pp">#endif</span></span>
<span id="cb270-50"><a href="#cb270-50" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb270-51"><a href="#cb270-51" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>env_ser <span class="op">!=</span> NULL<span class="op">)</span> </span>
<span id="cb270-52"><a href="#cb270-52" aria-hidden="true" tabindex="-1"></a>        struncpy<span class="op">(</span>seruname<span class="op">,</span> env_ser<span class="op">,</span> <span class="kw">sizeof</span><span class="op">(</span>seruname<span class="op">)</span> <span class="op">-</span> <span class="op">);</span></span>
<span id="cb270-53"><a href="#cb270-53" aria-hidden="true" tabindex="-1"></a>        seruname<span class="op">[</span><span class="kw">sizeof</span><span class="op">(</span>seruname<span class="op">)</span> <span class="op">-</span> <span class="op">]</span> <span class="op">=</span> <span class="ch">&#39;</span><span class="er">&#39;</span><span class="op">;</span></span>
<span id="cb270-54"><a href="#cb270-54" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> seruname<span class="op">;</span></span>
<span id="cb270-55"><a href="#cb270-55" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb270-56"><a href="#cb270-56" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb270-57"><a href="#cb270-57" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="st">&quot;uunknown&quot;</span><span class="op">;</span></span></code></pre></div>
<h3 id="モジュール設計パターン">モジュール設計パターン</h3>
<p>効果的なモジュール設計の例を学習します。</p>
<h4 id="ログシステムの実装">ログシステムの実装</h4>
<p><strong>logger.h（ログシステムのインターフェース）</strong></p>
<div class="sourceCode" id="cb271"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb271-1"><a href="#cb271-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#ifndef LOGGR_H</span></span>
<span id="cb271-2"><a href="#cb271-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#define LOGGR_H</span></span>
<span id="cb271-3"><a href="#cb271-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb271-4"><a href="#cb271-4" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb271-5"><a href="#cb271-5" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;time.h&gt;</span></span>
<span id="cb271-6"><a href="#cb271-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb271-7"><a href="#cb271-7" aria-hidden="true" tabindex="-1"></a><span class="co">/* ログレベル定義 */</span></span>
<span id="cb271-8"><a href="#cb271-8" aria-hidden="true" tabindex="-1"></a><span class="kw">typedef</span> <span class="kw">enum</span> </span>
<span id="cb271-9"><a href="#cb271-9" aria-hidden="true" tabindex="-1"></a>    LOG_DUG <span class="op">=</span> <span class="op">,</span></span>
<span id="cb271-10"><a href="#cb271-10" aria-hidden="true" tabindex="-1"></a>    LOG_INO <span class="op">=</span> <span class="op">,</span></span>
<span id="cb271-11"><a href="#cb271-11" aria-hidden="true" tabindex="-1"></a>    LOG_WARNING <span class="op">=</span> <span class="op">,</span></span>
<span id="cb271-12"><a href="#cb271-12" aria-hidden="true" tabindex="-1"></a>    LOG_RROR <span class="op">=</span> <span class="op">,</span></span>
<span id="cb271-13"><a href="#cb271-13" aria-hidden="true" tabindex="-1"></a>    LOG_CRITICAL <span class="op">=</span> </span>
<span id="cb271-14"><a href="#cb271-14" aria-hidden="true" tabindex="-1"></a> LogLevel<span class="op">;</span></span>
<span id="cb271-15"><a href="#cb271-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb271-16"><a href="#cb271-16" aria-hidden="true" tabindex="-1"></a><span class="co">/* ログ設定構造体 */</span></span>
<span id="cb271-17"><a href="#cb271-17" aria-hidden="true" tabindex="-1"></a><span class="kw">typedef</span> strct </span>
<span id="cb271-18"><a href="#cb271-18" aria-hidden="true" tabindex="-1"></a>    LogLevel min_level<span class="op">;</span></span>
<span id="cb271-19"><a href="#cb271-19" aria-hidden="true" tabindex="-1"></a>    IL <span class="op">*</span>output_file<span class="op">;</span></span>
<span id="cb271-20"><a href="#cb271-20" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> show_timestamp<span class="op">;</span></span>
<span id="cb271-21"><a href="#cb271-21" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> show_level<span class="op">;</span></span>
<span id="cb271-22"><a href="#cb271-22" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> show_filename<span class="op">;</span></span>
<span id="cb271-23"><a href="#cb271-23" aria-hidden="true" tabindex="-1"></a> LogConfig<span class="op">;</span></span>
<span id="cb271-24"><a href="#cb271-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb271-25"><a href="#cb271-25" aria-hidden="true" tabindex="-1"></a><span class="co">/* ログシステムの初期化・終了 */</span></span>
<span id="cb271-26"><a href="#cb271-26" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> logger_init<span class="op">(</span><span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>filename<span class="op">);</span></span>
<span id="cb271-27"><a href="#cb271-27" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> logger_cleanup<span class="op">(</span><span class="dt">void</span><span class="op">);</span></span>
<span id="cb271-28"><a href="#cb271-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb271-29"><a href="#cb271-29" aria-hidden="true" tabindex="-1"></a><span class="co">/* ログレベル設定 */</span></span>
<span id="cb271-30"><a href="#cb271-30" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> logger_set_level<span class="op">(</span>LogLevel level<span class="op">);</span></span>
<span id="cb271-31"><a href="#cb271-31" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> logger_set_output<span class="op">(</span>IL <span class="op">*</span>file<span class="op">);</span></span>
<span id="cb271-32"><a href="#cb271-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb271-33"><a href="#cb271-33" aria-hidden="true" tabindex="-1"></a><span class="co">/* ログ出力関数 */</span></span>
<span id="cb271-34"><a href="#cb271-34" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> log_debug<span class="op">(</span><span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>format<span class="op">,</span> <span class="op">...);</span></span>
<span id="cb271-35"><a href="#cb271-35" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> log_info<span class="op">(</span><span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>format<span class="op">,</span> <span class="op">...);</span></span>
<span id="cb271-36"><a href="#cb271-36" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> log_waruning<span class="op">(</span><span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>format<span class="op">,</span> <span class="op">...);</span></span>
<span id="cb271-37"><a href="#cb271-37" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> log_error<span class="op">(</span><span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>format<span class="op">,</span> <span class="op">...);</span></span>
<span id="cb271-38"><a href="#cb271-38" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> log_critical<span class="op">(</span><span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>format<span class="op">,</span> <span class="op">...);</span></span>
<span id="cb271-39"><a href="#cb271-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb271-40"><a href="#cb271-40" aria-hidden="true" tabindex="-1"></a><span class="co">/* 汎用ログ関数 */</span></span>
<span id="cb271-41"><a href="#cb271-41" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> logger_write<span class="op">(</span>LogLevel level<span class="op">,</span> <span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>file<span class="op">,</span> <span class="dt">int</span> line<span class="op">,</span> <span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>format<span class="op">,</span> <span class="op">...);</span></span>
<span id="cb271-42"><a href="#cb271-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb271-43"><a href="#cb271-43" aria-hidden="true" tabindex="-1"></a><span class="co">/* 便利マクロ */</span></span>
<span id="cb271-44"><a href="#cb271-44" aria-hidden="true" tabindex="-1"></a><span class="pp">#define LOG_DUG</span><span class="op">(</span><span class="pp">fmt</span><span class="op">,</span><span class="pp"> </span><span class="op">...)</span><span class="pp"> logger_write</span><span class="op">(</span>LOG_DUG<span class="op">,</span><span class="pp"> __IL__</span><span class="op">,</span><span class="pp"> __LIN__</span><span class="op">,</span><span class="pp"> fmt</span><span class="op">,</span><span class="pp"> </span><span class="op">##</span><span class="pp">__VA_ARGS__</span><span class="op">)</span></span>
<span id="cb271-45"><a href="#cb271-45" aria-hidden="true" tabindex="-1"></a><span class="pp">#define LOG_INO</span><span class="op">(</span><span class="pp">fmt</span><span class="op">,</span><span class="pp"> </span><span class="op">...)</span><span class="pp"> logger_write</span><span class="op">(</span>LOG_INO<span class="op">,</span><span class="pp"> __IL__</span><span class="op">,</span><span class="pp"> __LIN__</span><span class="op">,</span><span class="pp"> fmt</span><span class="op">,</span><span class="pp"> </span><span class="op">##</span><span class="pp">__VA_ARGS__</span><span class="op">)</span></span>
<span id="cb271-46"><a href="#cb271-46" aria-hidden="true" tabindex="-1"></a><span class="pp">#define LOG_WARNING</span><span class="op">(</span><span class="pp">fmt</span><span class="op">,</span><span class="pp"> </span><span class="op">...)</span><span class="pp"> logger_write</span><span class="op">(</span>LOG_WARNING<span class="op">,</span><span class="pp"> __IL__</span><span class="op">,</span><span class="pp"> __LIN__</span><span class="op">,</span><span class="pp"> fmt</span><span class="op">,</span><span class="pp"> </span><span class="op">##</span><span class="pp">__VA_ARGS__</span><span class="op">)</span></span>
<span id="cb271-47"><a href="#cb271-47" aria-hidden="true" tabindex="-1"></a><span class="pp">#define LOG_RROR</span><span class="op">(</span><span class="pp">fmt</span><span class="op">,</span><span class="pp"> </span><span class="op">...)</span><span class="pp"> logger_write</span><span class="op">(</span>LOG_RROR<span class="op">,</span><span class="pp"> __IL__</span><span class="op">,</span><span class="pp"> __LIN__</span><span class="op">,</span><span class="pp"> fmt</span><span class="op">,</span><span class="pp"> </span><span class="op">##</span><span class="pp">__VA_ARGS__</span><span class="op">)</span></span>
<span id="cb271-48"><a href="#cb271-48" aria-hidden="true" tabindex="-1"></a><span class="pp">#define LOG_CRITICAL</span><span class="op">(</span><span class="pp">fmt</span><span class="op">,</span><span class="pp"> </span><span class="op">...)</span><span class="pp"> logger_write</span><span class="op">(</span>LOG_CRITICAL<span class="op">,</span><span class="pp"> __IL__</span><span class="op">,</span><span class="pp"> __LIN__</span><span class="op">,</span><span class="pp"> fmt</span><span class="op">,</span><span class="pp"> </span><span class="op">##</span><span class="pp">__VA_ARGS__</span><span class="op">)</span></span>
<span id="cb271-49"><a href="#cb271-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb271-50"><a href="#cb271-50" aria-hidden="true" tabindex="-1"></a><span class="pp">#endif </span><span class="co">/* LOGGR_H */</span></span></code></pre></div>
<p><strong>logger.c（ログシステムの実装）</strong></p>
<div class="sourceCode" id="cb272"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb272-1"><a href="#cb272-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdarg.h&gt;</span></span>
<span id="cb272-2"><a href="#cb272-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;string.h&gt;</span></span>
<span id="cb272-3"><a href="#cb272-3" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdlib.h&gt;</span></span>
<span id="cb272-4"><a href="#cb272-4" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&quot;logger.h&quot;</span></span>
<span id="cb272-5"><a href="#cb272-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb272-6"><a href="#cb272-6" aria-hidden="true" tabindex="-1"></a><span class="co">/* プライベート変数 */</span></span>
<span id="cb272-7"><a href="#cb272-7" aria-hidden="true" tabindex="-1"></a><span class="dt">static</span> LogConfig g_log_config <span class="op">=</span> </span>
<span id="cb272-8"><a href="#cb272-8" aria-hidden="true" tabindex="-1"></a>    LOG_INO<span class="op">,</span>    <span class="co">/* デフォルトはINO以上 */</span></span>
<span id="cb272-9"><a href="#cb272-9" aria-hidden="true" tabindex="-1"></a>    NULL<span class="op">,</span>        <span class="co">/* stdotを使用 */</span></span>
<span id="cb272-10"><a href="#cb272-10" aria-hidden="true" tabindex="-1"></a>    <span class="op">,</span>           <span class="co">/* タイムスタンプ表示 */</span></span>
<span id="cb272-11"><a href="#cb272-11" aria-hidden="true" tabindex="-1"></a>    <span class="op">,</span>           <span class="co">/* レベル表示 */</span></span>
<span id="cb272-12"><a href="#cb272-12" aria-hidden="true" tabindex="-1"></a>                <span class="co">/* ファイル名非表示 */</span></span>
<span id="cb272-13"><a href="#cb272-13" aria-hidden="true" tabindex="-1"></a><span class="op">;</span></span>
<span id="cb272-14"><a href="#cb272-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb272-15"><a href="#cb272-15" aria-hidden="true" tabindex="-1"></a><span class="dt">static</span> IL <span class="op">*</span>g_log_file <span class="op">=</span> NULL<span class="op">;</span></span>
<span id="cb272-16"><a href="#cb272-16" aria-hidden="true" tabindex="-1"></a><span class="dt">static</span> <span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>g_level_names<span class="op">[]</span> <span class="op">=</span> </span>
<span id="cb272-17"><a href="#cb272-17" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;DUG&quot;</span><span class="op">,</span> <span class="st">&quot;INO&quot;</span><span class="op">,</span> <span class="st">&quot;WARNING&quot;</span><span class="op">,</span> <span class="st">&quot;RROR&quot;</span><span class="op">,</span> <span class="st">&quot;CRITICAL&quot;</span></span>
<span id="cb272-18"><a href="#cb272-18" aria-hidden="true" tabindex="-1"></a><span class="op">;</span></span>
<span id="cb272-19"><a href="#cb272-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb272-20"><a href="#cb272-20" aria-hidden="true" tabindex="-1"></a><span class="co">/* プライベート関数 */</span></span>
<span id="cb272-21"><a href="#cb272-21" aria-hidden="true" tabindex="-1"></a><span class="dt">static</span> <span class="dt">const</span> <span class="dt">char</span><span class="op">*</span> get_timestamp<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb272-22"><a href="#cb272-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb272-23"><a href="#cb272-23" aria-hidden="true" tabindex="-1"></a>    <span class="dt">static</span> <span class="dt">char</span> timestamp<span class="op">[];</span></span>
<span id="cb272-24"><a href="#cb272-24" aria-hidden="true" tabindex="-1"></a>    <span class="dt">time_t</span> now<span class="op">;</span></span>
<span id="cb272-25"><a href="#cb272-25" aria-hidden="true" tabindex="-1"></a>    strct tm <span class="op">*</span>local_time<span class="op">;</span></span>
<span id="cb272-26"><a href="#cb272-26" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb272-27"><a href="#cb272-27" aria-hidden="true" tabindex="-1"></a>    time<span class="op">(&amp;</span>now<span class="op">);</span></span>
<span id="cb272-28"><a href="#cb272-28" aria-hidden="true" tabindex="-1"></a>    local_time <span class="op">=</span> localtime<span class="op">(&amp;</span>now<span class="op">);</span></span>
<span id="cb272-29"><a href="#cb272-29" aria-hidden="true" tabindex="-1"></a>    strftime<span class="op">(</span>timestamp<span class="op">,</span> <span class="kw">sizeof</span><span class="op">(</span>timestamp<span class="op">),</span> <span class="st">&quot;%Y-%m-</span><span class="sc">%d</span><span class="st"> %H:%M:%S&quot;</span><span class="op">,</span> local_time<span class="op">);</span></span>
<span id="cb272-30"><a href="#cb272-30" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb272-31"><a href="#cb272-31" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> timestamp<span class="op">;</span></span>
<span id="cb272-32"><a href="#cb272-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb272-33"><a href="#cb272-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb272-34"><a href="#cb272-34" aria-hidden="true" tabindex="-1"></a><span class="dt">static</span> <span class="dt">const</span> <span class="dt">char</span><span class="op">*</span> get_filename<span class="op">(</span><span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>filepath<span class="op">)</span></span>
<span id="cb272-35"><a href="#cb272-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb272-36"><a href="#cb272-36" aria-hidden="true" tabindex="-1"></a>    <span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>filename <span class="op">=</span> strrchr<span class="op">(</span>filepath<span class="op">,</span> <span class="ch">&#39;/&#39;</span><span class="op">);</span></span>
<span id="cb272-37"><a href="#cb272-37" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>filename <span class="op">==</span> NULL<span class="op">)</span> </span>
<span id="cb272-38"><a href="#cb272-38" aria-hidden="true" tabindex="-1"></a>        filename <span class="op">=</span> strrchr<span class="op">(</span>filepath<span class="op">,</span> <span class="ch">&#39;</span><span class="er">&#39;</span><span class="op">);</span></span>
<span id="cb272-39"><a href="#cb272-39" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb272-40"><a href="#cb272-40" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> filename <span class="op">?</span> filename <span class="op">+</span>  <span class="op">:</span> filepath<span class="op">;</span></span>
<span id="cb272-41"><a href="#cb272-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb272-42"><a href="#cb272-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb272-43"><a href="#cb272-43" aria-hidden="true" tabindex="-1"></a><span class="co">/* パブリック関数の実装 */</span></span>
<span id="cb272-44"><a href="#cb272-44" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> logger_init<span class="op">(</span><span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>filename<span class="op">)</span></span>
<span id="cb272-45"><a href="#cb272-45" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb272-46"><a href="#cb272-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb272-47"><a href="#cb272-47" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>filename <span class="op">!=</span> NULL<span class="op">)</span> </span>
<span id="cb272-48"><a href="#cb272-48" aria-hidden="true" tabindex="-1"></a>        g_log_file <span class="op">=</span> fopen<span class="op">(</span>filename<span class="op">,</span> <span class="st">&quot;a&quot;</span><span class="op">);</span></span>
<span id="cb272-49"><a href="#cb272-49" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>g_log_file <span class="op">==</span> NULL<span class="op">)</span> </span>
<span id="cb272-50"><a href="#cb272-50" aria-hidden="true" tabindex="-1"></a>            fprintf<span class="op">(</span>stderr<span class="op">,</span> <span class="st">&quot;ログファイルを開けません: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> filename<span class="op">);</span></span>
<span id="cb272-51"><a href="#cb272-51" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> <span class="op">-;</span></span>
<span id="cb272-52"><a href="#cb272-52" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb272-53"><a href="#cb272-53" aria-hidden="true" tabindex="-1"></a>        g_log_config<span class="op">.</span>output_file <span class="op">=</span> g_log_file<span class="op">;</span></span>
<span id="cb272-54"><a href="#cb272-54" aria-hidden="true" tabindex="-1"></a>     <span class="cf">else</span> </span>
<span id="cb272-55"><a href="#cb272-55" aria-hidden="true" tabindex="-1"></a>        g_log_config<span class="op">.</span>output_file <span class="op">=</span> stdot<span class="op">;</span></span>
<span id="cb272-56"><a href="#cb272-56" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb272-57"><a href="#cb272-57" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb272-58"><a href="#cb272-58" aria-hidden="true" tabindex="-1"></a>    LOG_INO<span class="op">(</span><span class="st">&quot;ログシステム初期化完了&quot;</span><span class="op">);</span></span>
<span id="cb272-59"><a href="#cb272-59" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">;</span></span>
<span id="cb272-60"><a href="#cb272-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb272-61"><a href="#cb272-61" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb272-62"><a href="#cb272-62" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> logger_cleanup<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb272-63"><a href="#cb272-63" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb272-64"><a href="#cb272-64" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb272-65"><a href="#cb272-65" aria-hidden="true" tabindex="-1"></a>    LOG_INO<span class="op">(</span><span class="st">&quot;ログシステム終了&quot;</span><span class="op">);</span></span>
<span id="cb272-66"><a href="#cb272-66" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb272-67"><a href="#cb272-67" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>g_log_file <span class="op">!=</span> NULL <span class="op">&amp;&amp;</span> g_log_file <span class="op">!=</span> stdot <span class="op">&amp;&amp;</span> g_log_file <span class="op">!=</span> stderr<span class="op">)</span> </span>
<span id="cb272-68"><a href="#cb272-68" aria-hidden="true" tabindex="-1"></a>        fclose<span class="op">(</span>g_log_file<span class="op">);</span></span>
<span id="cb272-69"><a href="#cb272-69" aria-hidden="true" tabindex="-1"></a>        g_log_file <span class="op">=</span> NULL<span class="op">;</span></span>
<span id="cb272-70"><a href="#cb272-70" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb272-71"><a href="#cb272-71" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb272-72"><a href="#cb272-72" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb272-73"><a href="#cb272-73" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> logger_set_level<span class="op">(</span>LogLevel level<span class="op">)</span></span>
<span id="cb272-74"><a href="#cb272-74" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb272-75"><a href="#cb272-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb272-76"><a href="#cb272-76" aria-hidden="true" tabindex="-1"></a>    g_log_config<span class="op">.</span>min_level <span class="op">=</span> level<span class="op">;</span></span>
<span id="cb272-77"><a href="#cb272-77" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb272-78"><a href="#cb272-78" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb272-79"><a href="#cb272-79" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> logger_set_output<span class="op">(</span>IL <span class="op">*</span>file<span class="op">)</span></span>
<span id="cb272-80"><a href="#cb272-80" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb272-81"><a href="#cb272-81" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb272-82"><a href="#cb272-82" aria-hidden="true" tabindex="-1"></a>    g_log_config<span class="op">.</span>output_file <span class="op">=</span> file <span class="op">?</span> file <span class="op">:</span> stdot<span class="op">;</span></span>
<span id="cb272-83"><a href="#cb272-83" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb272-84"><a href="#cb272-84" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb272-85"><a href="#cb272-85" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> logger_write<span class="op">(</span>LogLevel level<span class="op">,</span> <span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>file<span class="op">,</span> <span class="dt">int</span> line<span class="op">,</span> <span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>format<span class="op">,</span> <span class="op">...)</span></span>
<span id="cb272-86"><a href="#cb272-86" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb272-87"><a href="#cb272-87" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb272-88"><a href="#cb272-88" aria-hidden="true" tabindex="-1"></a>    <span class="dt">va_list</span> args<span class="op">;</span></span>
<span id="cb272-89"><a href="#cb272-89" aria-hidden="true" tabindex="-1"></a>    IL <span class="op">*</span>output<span class="op">;</span></span>
<span id="cb272-90"><a href="#cb272-90" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb272-91"><a href="#cb272-91" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* レベルチェック */</span></span>
<span id="cb272-92"><a href="#cb272-92" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>level <span class="op">&lt;</span> g_log_config<span class="op">.</span>min_level<span class="op">)</span> </span>
<span id="cb272-93"><a href="#cb272-93" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span><span class="op">;</span></span>
<span id="cb272-94"><a href="#cb272-94" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb272-95"><a href="#cb272-95" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb272-96"><a href="#cb272-96" aria-hidden="true" tabindex="-1"></a>    output <span class="op">=</span> g_log_config<span class="op">.</span>output_file <span class="op">?</span> g_log_config<span class="op">.</span>output_file <span class="op">:</span> stdot<span class="op">;</span></span>
<span id="cb272-97"><a href="#cb272-97" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb272-98"><a href="#cb272-98" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* タイムスタンプ */</span></span>
<span id="cb272-99"><a href="#cb272-99" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>g_log_config<span class="op">.</span>show_timestamp<span class="op">)</span> </span>
<span id="cb272-100"><a href="#cb272-100" aria-hidden="true" tabindex="-1"></a>        fprintf<span class="op">(</span>output<span class="op">,</span> <span class="st">&quot;[</span><span class="sc">%s</span><span class="st">] &quot;</span><span class="op">,</span> get_timestamp<span class="op">());</span></span>
<span id="cb272-101"><a href="#cb272-101" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb272-102"><a href="#cb272-102" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb272-103"><a href="#cb272-103" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* ログレベル */</span></span>
<span id="cb272-104"><a href="#cb272-104" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>g_log_config<span class="op">.</span>show_level<span class="op">)</span> </span>
<span id="cb272-105"><a href="#cb272-105" aria-hidden="true" tabindex="-1"></a>        fprintf<span class="op">(</span>output<span class="op">,</span> <span class="st">&quot;[</span><span class="sc">%s</span><span class="st">] &quot;</span><span class="op">,</span> g_level_names<span class="op">[</span>level<span class="op">]);</span></span>
<span id="cb272-106"><a href="#cb272-106" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb272-107"><a href="#cb272-107" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb272-108"><a href="#cb272-108" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* ファイル名と行番号 */</span></span>
<span id="cb272-109"><a href="#cb272-109" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>g_log_config<span class="op">.</span>show_filename <span class="op">&amp;&amp;</span> file <span class="op">!=</span> NULL<span class="op">)</span> </span>
<span id="cb272-110"><a href="#cb272-110" aria-hidden="true" tabindex="-1"></a>        fprintf<span class="op">(</span>output<span class="op">,</span> <span class="st">&quot;[</span><span class="sc">%s</span><span class="st">:</span><span class="sc">%d</span><span class="st">] &quot;</span><span class="op">,</span> get_filename<span class="op">(</span>file<span class="op">),</span> line<span class="op">);</span></span>
<span id="cb272-111"><a href="#cb272-111" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb272-112"><a href="#cb272-112" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb272-113"><a href="#cb272-113" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* メッセージ */</span></span>
<span id="cb272-114"><a href="#cb272-114" aria-hidden="true" tabindex="-1"></a>    va_start<span class="op">(</span>args<span class="op">,</span> format<span class="op">);</span></span>
<span id="cb272-115"><a href="#cb272-115" aria-hidden="true" tabindex="-1"></a>    vfprintf<span class="op">(</span>output<span class="op">,</span> format<span class="op">,</span> args<span class="op">);</span></span>
<span id="cb272-116"><a href="#cb272-116" aria-hidden="true" tabindex="-1"></a>    va_end<span class="op">(</span>args<span class="op">);</span></span>
<span id="cb272-117"><a href="#cb272-117" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb272-118"><a href="#cb272-118" aria-hidden="true" tabindex="-1"></a>    fprintf<span class="op">(</span>output<span class="op">,</span> <span class="st">&quot;n&quot;</span><span class="op">);</span></span>
<span id="cb272-119"><a href="#cb272-119" aria-hidden="true" tabindex="-1"></a>    fflsh<span class="op">(</span>output<span class="op">);</span></span>
<span id="cb272-120"><a href="#cb272-120" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb272-121"><a href="#cb272-121" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb272-122"><a href="#cb272-122" aria-hidden="true" tabindex="-1"></a><span class="co">/* 便利関数 */</span></span>
<span id="cb272-123"><a href="#cb272-123" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> log_debug<span class="op">(</span><span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>format<span class="op">,</span> <span class="op">...)</span></span>
<span id="cb272-124"><a href="#cb272-124" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb272-125"><a href="#cb272-125" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb272-126"><a href="#cb272-126" aria-hidden="true" tabindex="-1"></a>    <span class="dt">va_list</span> args<span class="op">;</span></span>
<span id="cb272-127"><a href="#cb272-127" aria-hidden="true" tabindex="-1"></a>    va_start<span class="op">(</span>args<span class="op">,</span> format<span class="op">);</span></span>
<span id="cb272-128"><a href="#cb272-128" aria-hidden="true" tabindex="-1"></a>    logger_write<span class="op">(</span>LOG_DUG<span class="op">,</span> NULL<span class="op">,</span> <span class="op">,</span> format<span class="op">,</span> args<span class="op">);</span></span>
<span id="cb272-129"><a href="#cb272-129" aria-hidden="true" tabindex="-1"></a>    va_end<span class="op">(</span>args<span class="op">);</span></span>
<span id="cb272-130"><a href="#cb272-130" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb272-131"><a href="#cb272-131" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb272-132"><a href="#cb272-132" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> log_info<span class="op">(</span><span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>format<span class="op">,</span> <span class="op">...)</span></span>
<span id="cb272-133"><a href="#cb272-133" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb272-134"><a href="#cb272-134" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb272-135"><a href="#cb272-135" aria-hidden="true" tabindex="-1"></a>    <span class="dt">va_list</span> args<span class="op">;</span></span>
<span id="cb272-136"><a href="#cb272-136" aria-hidden="true" tabindex="-1"></a>    va_start<span class="op">(</span>args<span class="op">,</span> format<span class="op">);</span></span>
<span id="cb272-137"><a href="#cb272-137" aria-hidden="true" tabindex="-1"></a>    logger_write<span class="op">(</span>LOG_INO<span class="op">,</span> NULL<span class="op">,</span> <span class="op">,</span> format<span class="op">,</span> args<span class="op">);</span></span>
<span id="cb272-138"><a href="#cb272-138" aria-hidden="true" tabindex="-1"></a>    va_end<span class="op">(</span>args<span class="op">);</span></span>
<span id="cb272-139"><a href="#cb272-139" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb272-140"><a href="#cb272-140" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb272-141"><a href="#cb272-141" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> log_waruning<span class="op">(</span><span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>format<span class="op">,</span> <span class="op">...)</span></span>
<span id="cb272-142"><a href="#cb272-142" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb272-143"><a href="#cb272-143" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb272-144"><a href="#cb272-144" aria-hidden="true" tabindex="-1"></a>    <span class="dt">va_list</span> args<span class="op">;</span></span>
<span id="cb272-145"><a href="#cb272-145" aria-hidden="true" tabindex="-1"></a>    va_start<span class="op">(</span>args<span class="op">,</span> format<span class="op">);</span></span>
<span id="cb272-146"><a href="#cb272-146" aria-hidden="true" tabindex="-1"></a>    logger_write<span class="op">(</span>LOG_WARNING<span class="op">,</span> NULL<span class="op">,</span> <span class="op">,</span> format<span class="op">,</span> args<span class="op">);</span></span>
<span id="cb272-147"><a href="#cb272-147" aria-hidden="true" tabindex="-1"></a>    va_end<span class="op">(</span>args<span class="op">);</span></span>
<span id="cb272-148"><a href="#cb272-148" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb272-149"><a href="#cb272-149" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb272-150"><a href="#cb272-150" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> log_error<span class="op">(</span><span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>format<span class="op">,</span> <span class="op">...)</span></span>
<span id="cb272-151"><a href="#cb272-151" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb272-152"><a href="#cb272-152" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb272-153"><a href="#cb272-153" aria-hidden="true" tabindex="-1"></a>    <span class="dt">va_list</span> args<span class="op">;</span></span>
<span id="cb272-154"><a href="#cb272-154" aria-hidden="true" tabindex="-1"></a>    va_start<span class="op">(</span>args<span class="op">,</span> format<span class="op">);</span></span>
<span id="cb272-155"><a href="#cb272-155" aria-hidden="true" tabindex="-1"></a>    logger_write<span class="op">(</span>LOG_RROR<span class="op">,</span> NULL<span class="op">,</span> <span class="op">,</span> format<span class="op">,</span> args<span class="op">);</span></span>
<span id="cb272-156"><a href="#cb272-156" aria-hidden="true" tabindex="-1"></a>    va_end<span class="op">(</span>args<span class="op">);</span></span>
<span id="cb272-157"><a href="#cb272-157" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb272-158"><a href="#cb272-158" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb272-159"><a href="#cb272-159" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> log_critical<span class="op">(</span><span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>format<span class="op">,</span> <span class="op">...)</span></span>
<span id="cb272-160"><a href="#cb272-160" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb272-161"><a href="#cb272-161" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb272-162"><a href="#cb272-162" aria-hidden="true" tabindex="-1"></a>    <span class="dt">va_list</span> args<span class="op">;</span></span>
<span id="cb272-163"><a href="#cb272-163" aria-hidden="true" tabindex="-1"></a>    va_start<span class="op">(</span>args<span class="op">,</span> format<span class="op">);</span></span>
<span id="cb272-164"><a href="#cb272-164" aria-hidden="true" tabindex="-1"></a>    logger_write<span class="op">(</span>LOG_CRITICAL<span class="op">,</span> NULL<span class="op">,</span> <span class="op">,</span> format<span class="op">,</span> args<span class="op">);</span></span>
<span id="cb272-165"><a href="#cb272-165" aria-hidden="true" tabindex="-1"></a>    va_end<span class="op">(</span>args<span class="op">);</span></span></code></pre></div>
<h4 id="設定管理システム">設定管理システム</h4>
<p><strong>config.h（設定管理のインターフェース）</strong></p>
<div class="sourceCode" id="cb273"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb273-1"><a href="#cb273-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#ifndef CONIG_H</span></span>
<span id="cb273-2"><a href="#cb273-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#define CONIG_H</span></span>
<span id="cb273-3"><a href="#cb273-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb273-4"><a href="#cb273-4" aria-hidden="true" tabindex="-1"></a><span class="pp">#define MAX_CONIG_LIN </span></span>
<span id="cb273-5"><a href="#cb273-5" aria-hidden="true" tabindex="-1"></a><span class="pp">#define MAX_KY_LNGTH </span></span>
<span id="cb273-6"><a href="#cb273-6" aria-hidden="true" tabindex="-1"></a><span class="pp">#define MAX_VALU_LNGTH </span><span class="dv">9</span></span>
<span id="cb273-7"><a href="#cb273-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb273-8"><a href="#cb273-8" aria-hidden="true" tabindex="-1"></a><span class="co">/* 設定項目の構造体 */</span></span>
<span id="cb273-9"><a href="#cb273-9" aria-hidden="true" tabindex="-1"></a><span class="kw">typedef</span> strct ConfigItem </span>
<span id="cb273-10"><a href="#cb273-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> key<span class="op">[</span>MAX_KY_LNGTH<span class="op">];</span></span>
<span id="cb273-11"><a href="#cb273-11" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> vale<span class="op">[</span>MAX_VALU_LNGTH<span class="op">];</span></span>
<span id="cb273-12"><a href="#cb273-12" aria-hidden="true" tabindex="-1"></a>    strct ConfigItem <span class="op">*</span>next<span class="op">;</span></span>
<span id="cb273-13"><a href="#cb273-13" aria-hidden="true" tabindex="-1"></a> ConfigItem<span class="op">;</span></span>
<span id="cb273-14"><a href="#cb273-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb273-15"><a href="#cb273-15" aria-hidden="true" tabindex="-1"></a><span class="co">/* 設定管理システム */</span></span>
<span id="cb273-16"><a href="#cb273-16" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> config_load<span class="op">(</span><span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>filename<span class="op">);</span></span>
<span id="cb273-17"><a href="#cb273-17" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> config_uunload<span class="op">(</span><span class="dt">void</span><span class="op">);</span></span>
<span id="cb273-18"><a href="#cb273-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb273-19"><a href="#cb273-19" aria-hidden="true" tabindex="-1"></a><span class="co">/* 値の取得 */</span></span>
<span id="cb273-20"><a href="#cb273-20" aria-hidden="true" tabindex="-1"></a><span class="dt">const</span> <span class="dt">char</span><span class="op">*</span> config_get_string<span class="op">(</span><span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>key<span class="op">,</span> <span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>default_vale<span class="op">);</span></span>
<span id="cb273-21"><a href="#cb273-21" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> config_get_int<span class="op">(</span><span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>key<span class="op">,</span> <span class="dt">int</span> default_vale<span class="op">);</span></span>
<span id="cb273-22"><a href="#cb273-22" aria-hidden="true" tabindex="-1"></a><span class="dt">double</span> config_get_double<span class="op">(</span><span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>key<span class="op">,</span> <span class="dt">double</span> default_vale<span class="op">);</span></span>
<span id="cb273-23"><a href="#cb273-23" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> config_get__Bool<span class="op">(</span><span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>key<span class="op">,</span> <span class="dt">int</span> default_vale<span class="op">);</span></span>
<span id="cb273-24"><a href="#cb273-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb273-25"><a href="#cb273-25" aria-hidden="true" tabindex="-1"></a><span class="co">/* 値の設定 */</span></span>
<span id="cb273-26"><a href="#cb273-26" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> config_set_string<span class="op">(</span><span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>key<span class="op">,</span> <span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>vale<span class="op">);</span></span>
<span id="cb273-27"><a href="#cb273-27" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> config_set_int<span class="op">(</span><span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>key<span class="op">,</span> <span class="dt">int</span> vale<span class="op">);</span></span>
<span id="cb273-28"><a href="#cb273-28" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> config_set_double<span class="op">(</span><span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>key<span class="op">,</span> <span class="dt">double</span> vale<span class="op">);</span></span>
<span id="cb273-29"><a href="#cb273-29" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> config_set__Bool<span class="op">(</span><span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>key<span class="op">,</span> <span class="dt">int</span> vale<span class="op">);</span></span>
<span id="cb273-30"><a href="#cb273-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb273-31"><a href="#cb273-31" aria-hidden="true" tabindex="-1"></a><span class="co">/* 設定の保存 */</span></span>
<span id="cb273-32"><a href="#cb273-32" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> config_save<span class="op">(</span><span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>filename<span class="op">);</span></span>
<span id="cb273-33"><a href="#cb273-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb273-34"><a href="#cb273-34" aria-hidden="true" tabindex="-1"></a><span class="co">/* デバッグ用 */</span></span>
<span id="cb273-35"><a href="#cb273-35" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> config_print_all<span class="op">(</span><span class="dt">void</span><span class="op">);</span></span>
<span id="cb273-36"><a href="#cb273-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb273-37"><a href="#cb273-37" aria-hidden="true" tabindex="-1"></a><span class="pp">#endif </span><span class="co">/* CONIG_H */</span></span></code></pre></div>
<p><strong>config.c（設定管理の実装）</strong></p>
<div class="sourceCode" id="cb274"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb274-1"><a href="#cb274-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb274-2"><a href="#cb274-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdlib.h&gt;</span></span>
<span id="cb274-3"><a href="#cb274-3" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;string.h&gt;</span></span>
<span id="cb274-4"><a href="#cb274-4" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;ctype.h&gt;</span></span>
<span id="cb274-5"><a href="#cb274-5" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&quot;config.h&quot;</span></span>
<span id="cb274-6"><a href="#cb274-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb274-7"><a href="#cb274-7" aria-hidden="true" tabindex="-1"></a><span class="co">/* プライベート変数 */</span></span>
<span id="cb274-8"><a href="#cb274-8" aria-hidden="true" tabindex="-1"></a><span class="dt">static</span> ConfigItem <span class="op">*</span>g_config_head <span class="op">=</span> NULL<span class="op">;</span></span>
<span id="cb274-9"><a href="#cb274-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb274-10"><a href="#cb274-10" aria-hidden="true" tabindex="-1"></a><span class="co">/* プライベート関数 */</span></span>
<span id="cb274-11"><a href="#cb274-11" aria-hidden="true" tabindex="-1"></a><span class="dt">static</span> <span class="dt">char</span><span class="op">*</span> trim_whitespace<span class="op">(</span><span class="dt">char</span> <span class="op">*</span>str<span class="op">)</span></span>
<span id="cb274-12"><a href="#cb274-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb274-13"><a href="#cb274-13" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> <span class="op">*</span>end<span class="op">;</span></span>
<span id="cb274-14"><a href="#cb274-14" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb274-15"><a href="#cb274-15" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 先頭の空白をスキップ */</span></span>
<span id="cb274-16"><a href="#cb274-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>isspace<span class="op">((</span><span class="dt">unsigned</span> <span class="dt">char</span><span class="op">)*</span>str<span class="op">))</span> str<span class="op">++;</span></span>
<span id="cb274-17"><a href="#cb274-17" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb274-18"><a href="#cb274-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(*</span>str <span class="op">==</span> <span class="ch">&#39;</span><span class="er">&#39;</span><span class="op">)</span> <span class="cf">return</span> str<span class="op">;</span></span>
<span id="cb274-19"><a href="#cb274-19" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb274-20"><a href="#cb274-20" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 末尾の空白を削除 */</span></span>
<span id="cb274-21"><a href="#cb274-21" aria-hidden="true" tabindex="-1"></a>    end <span class="op">=</span> str <span class="op">+</span> strlen<span class="op">(</span>str<span class="op">)</span> <span class="op">-</span> <span class="op">;</span></span>
<span id="cb274-22"><a href="#cb274-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>end <span class="op">&gt;</span> str <span class="op">&amp;&amp;</span> isspace<span class="op">((</span><span class="dt">unsigned</span> <span class="dt">char</span><span class="op">)*</span>end<span class="op">))</span> end<span class="op">--;</span></span>
<span id="cb274-23"><a href="#cb274-23" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb274-24"><a href="#cb274-24" aria-hidden="true" tabindex="-1"></a>    end<span class="op">[]</span> <span class="op">=</span> <span class="ch">&#39;</span><span class="er">&#39;</span><span class="op">;</span></span>
<span id="cb274-25"><a href="#cb274-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> str<span class="op">;</span></span>
<span id="cb274-26"><a href="#cb274-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb274-27"><a href="#cb274-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb274-28"><a href="#cb274-28" aria-hidden="true" tabindex="-1"></a><span class="dt">static</span> ConfigItem<span class="op">*</span> find_config_item<span class="op">(</span><span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>key<span class="op">)</span></span>
<span id="cb274-29"><a href="#cb274-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb274-30"><a href="#cb274-30" aria-hidden="true" tabindex="-1"></a>    ConfigItem <span class="op">*</span>item <span class="op">=</span> g_config_head<span class="op">;</span></span>
<span id="cb274-31"><a href="#cb274-31" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb274-32"><a href="#cb274-32" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>item <span class="op">!=</span> NULL<span class="op">)</span> </span>
<span id="cb274-33"><a href="#cb274-33" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>strcmp<span class="op">(</span>item<span class="op">-&gt;</span>key<span class="op">,</span> key<span class="op">)</span> <span class="op">==</span> <span class="op">)</span> </span>
<span id="cb274-34"><a href="#cb274-34" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> item<span class="op">;</span></span>
<span id="cb274-35"><a href="#cb274-35" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb274-36"><a href="#cb274-36" aria-hidden="true" tabindex="-1"></a>        item <span class="op">=</span> item<span class="op">-&gt;</span>next<span class="op">;</span></span>
<span id="cb274-37"><a href="#cb274-37" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb274-38"><a href="#cb274-38" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb274-39"><a href="#cb274-39" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> NULL<span class="op">;</span></span>
<span id="cb274-40"><a href="#cb274-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb274-41"><a href="#cb274-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb274-42"><a href="#cb274-42" aria-hidden="true" tabindex="-1"></a><span class="dt">static</span> ConfigItem<span class="op">*</span> create_config_item<span class="op">(</span><span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>key<span class="op">,</span> <span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>vale<span class="op">)</span></span>
<span id="cb274-43"><a href="#cb274-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb274-44"><a href="#cb274-44" aria-hidden="true" tabindex="-1"></a>    ConfigItem <span class="op">*</span>item <span class="op">=</span> malloc<span class="op">(</span><span class="kw">sizeof</span><span class="op">(</span>ConfigItem<span class="op">));</span></span>
<span id="cb274-45"><a href="#cb274-45" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>item <span class="op">==</span> NULL<span class="op">)</span> <span class="cf">return</span> NULL<span class="op">;</span></span>
<span id="cb274-46"><a href="#cb274-46" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb274-47"><a href="#cb274-47" aria-hidden="true" tabindex="-1"></a>    struncpy<span class="op">(</span>item<span class="op">-&gt;</span>key<span class="op">,</span> key<span class="op">,</span> MAX_KY_LNGTH <span class="op">-</span> <span class="op">);</span></span>
<span id="cb274-48"><a href="#cb274-48" aria-hidden="true" tabindex="-1"></a>    item<span class="op">-&gt;</span>key<span class="op">[</span>MAX_KY_LNGTH <span class="op">-</span> <span class="op">]</span> <span class="op">=</span> <span class="ch">&#39;</span><span class="er">&#39;</span><span class="op">;</span></span>
<span id="cb274-49"><a href="#cb274-49" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb274-50"><a href="#cb274-50" aria-hidden="true" tabindex="-1"></a>    struncpy<span class="op">(</span>item<span class="op">-&gt;</span>vale<span class="op">,</span> vale<span class="op">,</span> MAX_VALU_LNGTH <span class="op">-</span> <span class="op">);</span></span>
<span id="cb274-51"><a href="#cb274-51" aria-hidden="true" tabindex="-1"></a>    item<span class="op">-&gt;</span>vale<span class="op">[</span>MAX_VALU_LNGTH <span class="op">-</span> <span class="op">]</span> <span class="op">=</span> <span class="ch">&#39;</span><span class="er">&#39;</span><span class="op">;</span></span>
<span id="cb274-52"><a href="#cb274-52" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb274-53"><a href="#cb274-53" aria-hidden="true" tabindex="-1"></a>    item<span class="op">-&gt;</span>next <span class="op">=</span> g_config_head<span class="op">;</span></span>
<span id="cb274-54"><a href="#cb274-54" aria-hidden="true" tabindex="-1"></a>    g_config_head <span class="op">=</span> item<span class="op">;</span></span>
<span id="cb274-55"><a href="#cb274-55" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb274-56"><a href="#cb274-56" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> item<span class="op">;</span></span>
<span id="cb274-57"><a href="#cb274-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb274-58"><a href="#cb274-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb274-59"><a href="#cb274-59" aria-hidden="true" tabindex="-1"></a><span class="co">/* パブリック関数の実装 */</span></span>
<span id="cb274-60"><a href="#cb274-60" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> config_load<span class="op">(</span><span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>filename<span class="op">)</span></span>
<span id="cb274-61"><a href="#cb274-61" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb274-62"><a href="#cb274-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb274-63"><a href="#cb274-63" aria-hidden="true" tabindex="-1"></a>    IL <span class="op">*</span>file<span class="op">;</span></span>
<span id="cb274-64"><a href="#cb274-64" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> line<span class="op">[</span>MAX_CONIG_LIN<span class="op">];</span></span>
<span id="cb274-65"><a href="#cb274-65" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> <span class="op">*</span>key<span class="op">,</span> <span class="op">*</span>vale<span class="op">,</span> <span class="op">*</span>eqals<span class="op">;</span></span>
<span id="cb274-66"><a href="#cb274-66" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> line_number <span class="op">=</span> <span class="op">;</span></span>
<span id="cb274-67"><a href="#cb274-67" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb274-68"><a href="#cb274-68" aria-hidden="true" tabindex="-1"></a>    file <span class="op">=</span> fopen<span class="op">(</span>filename<span class="op">,</span> <span class="st">&quot;r&quot;</span><span class="op">);</span></span>
<span id="cb274-69"><a href="#cb274-69" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>file <span class="op">==</span> NULL<span class="op">)</span> </span>
<span id="cb274-70"><a href="#cb274-70" aria-hidden="true" tabindex="-1"></a>        fprintf<span class="op">(</span>stderr<span class="op">,</span> <span class="st">&quot;設定ファイルを開けません: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> filename<span class="op">);</span></span>
<span id="cb274-71"><a href="#cb274-71" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="op">-;</span></span>
<span id="cb274-72"><a href="#cb274-72" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb274-73"><a href="#cb274-73" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb274-74"><a href="#cb274-74" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>fgets<span class="op">(</span>line<span class="op">,</span> <span class="kw">sizeof</span><span class="op">(</span>line<span class="op">),</span> file<span class="op">)</span> <span class="op">!=</span> NULL<span class="op">)</span> </span>
<span id="cb274-75"><a href="#cb274-75" aria-hidden="true" tabindex="-1"></a>        line_number<span class="op">++;</span></span>
<span id="cb274-76"><a href="#cb274-76" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb274-77"><a href="#cb274-77" aria-hidden="true" tabindex="-1"></a>        <span class="co">/* コメント実行と空実行をスキップ */</span></span>
<span id="cb274-78"><a href="#cb274-78" aria-hidden="true" tabindex="-1"></a>        <span class="dt">char</span> <span class="op">*</span>trimmed <span class="op">=</span> trim_whitespace<span class="op">(</span>line<span class="op">);</span></span>
<span id="cb274-79"><a href="#cb274-79" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(*</span>trimmed <span class="op">==</span> <span class="ch">&#39;</span><span class="er">&#39;</span> <span class="op">||</span> <span class="op">*</span>trimmed <span class="op">==</span> <span class="ch">&#39;#&#39;</span> <span class="op">||</span> <span class="op">*</span>trimmed <span class="op">==</span> <span class="ch">&#39;;&#39;</span><span class="op">)</span> </span>
<span id="cb274-80"><a href="#cb274-80" aria-hidden="true" tabindex="-1"></a>            <span class="cf">continue</span><span class="op">;</span></span>
<span id="cb274-81"><a href="#cb274-81" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb274-82"><a href="#cb274-82" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb274-83"><a href="#cb274-83" aria-hidden="true" tabindex="-1"></a>        <span class="co">/* キーと値を分離 */</span></span>
<span id="cb274-84"><a href="#cb274-84" aria-hidden="true" tabindex="-1"></a>        eqals <span class="op">=</span> strchr<span class="op">(</span>trimmed<span class="op">,</span> <span class="ch">&#39;=&#39;</span><span class="op">);</span></span>
<span id="cb274-85"><a href="#cb274-85" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>eqals <span class="op">==</span> NULL<span class="op">)</span> </span>
<span id="cb274-86"><a href="#cb274-86" aria-hidden="true" tabindex="-1"></a>            fprintf<span class="op">(</span>stderr<span class="op">,</span> <span class="st">&quot;設定エラー </span><span class="sc">%s</span><span class="st">:</span><span class="sc">%d</span><span class="st"> - &#39;=&#39;が見2つかりませんn&quot;</span><span class="op">,</span> filename<span class="op">,</span> line_number<span class="op">);</span></span>
<span id="cb274-87"><a href="#cb274-87" aria-hidden="true" tabindex="-1"></a>            <span class="cf">continue</span><span class="op">;</span></span>
<span id="cb274-88"><a href="#cb274-88" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb274-89"><a href="#cb274-89" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb274-90"><a href="#cb274-90" aria-hidden="true" tabindex="-1"></a>        <span class="op">*</span>eqals <span class="op">=</span> <span class="ch">&#39;</span><span class="er">&#39;</span><span class="op">;</span></span>
<span id="cb274-91"><a href="#cb274-91" aria-hidden="true" tabindex="-1"></a>        key <span class="op">=</span> trim_whitespace<span class="op">(</span>trimmed<span class="op">);</span></span>
<span id="cb274-92"><a href="#cb274-92" aria-hidden="true" tabindex="-1"></a>        vale <span class="op">=</span> trim_whitespace<span class="op">(</span>eqals <span class="op">+</span> <span class="op">);</span></span>
<span id="cb274-93"><a href="#cb274-93" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb274-94"><a href="#cb274-94" aria-hidden="true" tabindex="-1"></a>        <span class="co">/* 既存の項目を更新または新規作成 */</span></span>
<span id="cb274-95"><a href="#cb274-95" aria-hidden="true" tabindex="-1"></a>        ConfigItem <span class="op">*</span>existing <span class="op">=</span> find_config_item<span class="op">(</span>key<span class="op">);</span></span>
<span id="cb274-96"><a href="#cb274-96" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>existing <span class="op">!=</span> NULL<span class="op">)</span> </span>
<span id="cb274-97"><a href="#cb274-97" aria-hidden="true" tabindex="-1"></a>            struncpy<span class="op">(</span>existing<span class="op">-&gt;</span>vale<span class="op">,</span> vale<span class="op">,</span> MAX_VALU_LNGTH <span class="op">-</span> <span class="op">);</span></span>
<span id="cb274-98"><a href="#cb274-98" aria-hidden="true" tabindex="-1"></a>            existing<span class="op">-&gt;</span>vale<span class="op">[</span>MAX_VALU_LNGTH <span class="op">-</span> <span class="op">]</span> <span class="op">=</span> <span class="ch">&#39;</span><span class="er">&#39;</span><span class="op">;</span></span>
<span id="cb274-99"><a href="#cb274-99" aria-hidden="true" tabindex="-1"></a>         <span class="cf">else</span> </span>
<span id="cb274-100"><a href="#cb274-100" aria-hidden="true" tabindex="-1"></a>            create_config_item<span class="op">(</span>key<span class="op">,</span> vale<span class="op">);</span></span>
<span id="cb274-101"><a href="#cb274-101" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb274-102"><a href="#cb274-102" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb274-103"><a href="#cb274-103" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb274-104"><a href="#cb274-104" aria-hidden="true" tabindex="-1"></a>    fclose<span class="op">(</span>file<span class="op">);</span></span>
<span id="cb274-105"><a href="#cb274-105" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;設定ファイル読み込み完了: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> filename<span class="op">);</span></span>
<span id="cb274-106"><a href="#cb274-106" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">;</span></span>
<span id="cb274-107"><a href="#cb274-107" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb274-108"><a href="#cb274-108" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb274-109"><a href="#cb274-109" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> config_uunload<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb274-110"><a href="#cb274-110" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb274-111"><a href="#cb274-111" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb274-112"><a href="#cb274-112" aria-hidden="true" tabindex="-1"></a>    ConfigItem <span class="op">*</span>item <span class="op">=</span> g_config_head<span class="op">;</span></span>
<span id="cb274-113"><a href="#cb274-113" aria-hidden="true" tabindex="-1"></a>    ConfigItem <span class="op">*</span>next<span class="op">;</span></span>
<span id="cb274-114"><a href="#cb274-114" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb274-115"><a href="#cb274-115" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>item <span class="op">!=</span> NULL<span class="op">)</span> </span>
<span id="cb274-116"><a href="#cb274-116" aria-hidden="true" tabindex="-1"></a>        next <span class="op">=</span> item<span class="op">-&gt;</span>next<span class="op">;</span></span>
<span id="cb274-117"><a href="#cb274-117" aria-hidden="true" tabindex="-1"></a>        free<span class="op">(</span>item<span class="op">);</span></span>
<span id="cb274-118"><a href="#cb274-118" aria-hidden="true" tabindex="-1"></a>        item <span class="op">=</span> next<span class="op">;</span></span>
<span id="cb274-119"><a href="#cb274-119" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb274-120"><a href="#cb274-120" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb274-121"><a href="#cb274-121" aria-hidden="true" tabindex="-1"></a>    g_config_head <span class="op">=</span> NULL<span class="op">;</span></span>
<span id="cb274-122"><a href="#cb274-122" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb274-123"><a href="#cb274-123" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb274-124"><a href="#cb274-124" aria-hidden="true" tabindex="-1"></a><span class="dt">const</span> <span class="dt">char</span><span class="op">*</span> config_get_string<span class="op">(</span><span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>key<span class="op">,</span> <span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>default_vale<span class="op">)</span></span>
<span id="cb274-125"><a href="#cb274-125" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb274-126"><a href="#cb274-126" aria-hidden="true" tabindex="-1"></a>    ConfigItem <span class="op">*</span>item <span class="op">=</span> find_config_item<span class="op">(</span>key<span class="op">);</span></span>
<span id="cb274-127"><a href="#cb274-127" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> item <span class="op">?</span> item<span class="op">-&gt;</span>vale <span class="op">:</span> default_vale<span class="op">;</span></span>
<span id="cb274-128"><a href="#cb274-128" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb274-129"><a href="#cb274-129" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb274-130"><a href="#cb274-130" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> config_get_int<span class="op">(</span><span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>key<span class="op">,</span> <span class="dt">int</span> default_vale<span class="op">)</span></span>
<span id="cb274-131"><a href="#cb274-131" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb274-132"><a href="#cb274-132" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb274-133"><a href="#cb274-133" aria-hidden="true" tabindex="-1"></a>    <span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>vale <span class="op">=</span> config_get_string<span class="op">(</span>key<span class="op">,</span> NULL<span class="op">);</span></span>
<span id="cb274-134"><a href="#cb274-134" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>vale <span class="op">==</span> NULL<span class="op">)</span> <span class="cf">return</span> default_vale<span class="op">;</span></span>
<span id="cb274-135"><a href="#cb274-135" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb274-136"><a href="#cb274-136" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> autoi<span class="op">(</span>vale<span class="op">);</span></span>
<span id="cb274-137"><a href="#cb274-137" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb274-138"><a href="#cb274-138" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb274-139"><a href="#cb274-139" aria-hidden="true" tabindex="-1"></a><span class="dt">double</span> config_get_double<span class="op">(</span><span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>key<span class="op">,</span> <span class="dt">double</span> default_vale<span class="op">)</span></span>
<span id="cb274-140"><a href="#cb274-140" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb274-141"><a href="#cb274-141" aria-hidden="true" tabindex="-1"></a>    <span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>vale <span class="op">=</span> config_get_string<span class="op">(</span>key<span class="op">,</span> NULL<span class="op">);</span></span>
<span id="cb274-142"><a href="#cb274-142" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>vale <span class="op">==</span> NULL<span class="op">)</span> <span class="cf">return</span> default_vale<span class="op">;</span></span>
<span id="cb274-143"><a href="#cb274-143" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb274-144"><a href="#cb274-144" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> autof<span class="op">(</span>vale<span class="op">);</span></span>
<span id="cb274-145"><a href="#cb274-145" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb274-146"><a href="#cb274-146" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb274-147"><a href="#cb274-147" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> config_get__Bool<span class="op">(</span><span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>key<span class="op">,</span> <span class="dt">int</span> default_vale<span class="op">)</span></span>
<span id="cb274-148"><a href="#cb274-148" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb274-149"><a href="#cb274-149" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb274-150"><a href="#cb274-150" aria-hidden="true" tabindex="-1"></a>    <span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>vale <span class="op">=</span> config_get_string<span class="op">(</span>key<span class="op">,</span> NULL<span class="op">);</span></span>
<span id="cb274-151"><a href="#cb274-151" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>vale <span class="op">==</span> NULL<span class="op">)</span> <span class="cf">return</span> default_vale<span class="op">;</span></span>
<span id="cb274-152"><a href="#cb274-152" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb274-153"><a href="#cb274-153" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>strcmp<span class="op">(</span>vale<span class="op">,</span> <span class="st">&quot;true&quot;</span><span class="op">)</span> <span class="op">==</span>  <span class="op">||</span> strcmp<span class="op">(</span>vale<span class="op">,</span> <span class="st">&quot;&quot;</span><span class="op">)</span> <span class="op">==</span>  <span class="op">||</span> </span>
<span id="cb274-154"><a href="#cb274-154" aria-hidden="true" tabindex="-1"></a>        strcmp<span class="op">(</span>vale<span class="op">,</span> <span class="st">&quot;yes&quot;</span><span class="op">)</span> <span class="op">==</span>  <span class="op">||</span> strcmp<span class="op">(</span>vale<span class="op">,</span> <span class="st">&quot;on&quot;</span><span class="op">)</span> <span class="op">==</span> <span class="op">)</span> </span>
<span id="cb274-155"><a href="#cb274-155" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="op">;</span></span>
<span id="cb274-156"><a href="#cb274-156" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb274-157"><a href="#cb274-157" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb274-158"><a href="#cb274-158" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>strcmp<span class="op">(</span>vale<span class="op">,</span> <span class="st">&quot;false&quot;</span><span class="op">)</span> <span class="op">==</span>  <span class="op">||</span> strcmp<span class="op">(</span>vale<span class="op">,</span> <span class="st">&quot;&quot;</span><span class="op">)</span> <span class="op">==</span>  <span class="op">||</span> </span>
<span id="cb274-159"><a href="#cb274-159" aria-hidden="true" tabindex="-1"></a>        strcmp<span class="op">(</span>vale<span class="op">,</span> <span class="st">&quot;no&quot;</span><span class="op">)</span> <span class="op">==</span>  <span class="op">||</span> strcmp<span class="op">(</span>vale<span class="op">,</span> <span class="st">&quot;off&quot;</span><span class="op">)</span> <span class="op">==</span> <span class="op">)</span> </span>
<span id="cb274-160"><a href="#cb274-160" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="op">;</span></span>
<span id="cb274-161"><a href="#cb274-161" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb274-162"><a href="#cb274-162" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb274-163"><a href="#cb274-163" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> default_vale<span class="op">;</span></span>
<span id="cb274-164"><a href="#cb274-164" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb274-165"><a href="#cb274-165" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb274-166"><a href="#cb274-166" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> config_set_string<span class="op">(</span><span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>key<span class="op">,</span> <span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>vale<span class="op">)</span></span>
<span id="cb274-167"><a href="#cb274-167" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb274-168"><a href="#cb274-168" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb274-169"><a href="#cb274-169" aria-hidden="true" tabindex="-1"></a>    ConfigItem <span class="op">*</span>item <span class="op">=</span> find_config_item<span class="op">(</span>key<span class="op">);</span></span>
<span id="cb274-170"><a href="#cb274-170" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb274-171"><a href="#cb274-171" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>item <span class="op">!=</span> NULL<span class="op">)</span> </span>
<span id="cb274-172"><a href="#cb274-172" aria-hidden="true" tabindex="-1"></a>        struncpy<span class="op">(</span>item<span class="op">-&gt;</span>vale<span class="op">,</span> vale<span class="op">,</span> MAX_VALU_LNGTH <span class="op">-</span> <span class="op">);</span></span>
<span id="cb274-173"><a href="#cb274-173" aria-hidden="true" tabindex="-1"></a>        item<span class="op">-&gt;</span>vale<span class="op">[</span>MAX_VALU_LNGTH <span class="op">-</span> <span class="op">]</span> <span class="op">=</span> <span class="ch">&#39;</span><span class="er">&#39;</span><span class="op">;</span></span>
<span id="cb274-174"><a href="#cb274-174" aria-hidden="true" tabindex="-1"></a>     <span class="cf">else</span> </span>
<span id="cb274-175"><a href="#cb274-175" aria-hidden="true" tabindex="-1"></a>        create_config_item<span class="op">(</span>key<span class="op">,</span> vale<span class="op">);</span></span>
<span id="cb274-176"><a href="#cb274-176" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb274-177"><a href="#cb274-177" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb274-178"><a href="#cb274-178" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb274-179"><a href="#cb274-179" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> config_set_int<span class="op">(</span><span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>key<span class="op">,</span> <span class="dt">int</span> vale<span class="op">)</span></span>
<span id="cb274-180"><a href="#cb274-180" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb274-181"><a href="#cb274-181" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb274-182"><a href="#cb274-182" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> str_vale<span class="op">[];</span></span>
<span id="cb274-183"><a href="#cb274-183" aria-hidden="true" tabindex="-1"></a>    sprintf<span class="op">(</span>str_vale<span class="op">,</span> <span class="st">&quot;</span><span class="sc">%d</span><span class="st">&quot;</span><span class="op">,</span> vale<span class="op">);</span></span>
<span id="cb274-184"><a href="#cb274-184" aria-hidden="true" tabindex="-1"></a>    config_set_string<span class="op">(</span>key<span class="op">,</span> str_vale<span class="op">);</span></span>
<span id="cb274-185"><a href="#cb274-185" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb274-186"><a href="#cb274-186" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb274-187"><a href="#cb274-187" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> config_set_double<span class="op">(</span><span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>key<span class="op">,</span> <span class="dt">double</span> vale<span class="op">)</span></span>
<span id="cb274-188"><a href="#cb274-188" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb274-189"><a href="#cb274-189" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb274-190"><a href="#cb274-190" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> str_vale<span class="op">[];</span></span>
<span id="cb274-191"><a href="#cb274-191" aria-hidden="true" tabindex="-1"></a>    sprintf<span class="op">(</span>str_vale<span class="op">,</span> <span class="st">&quot;%.f&quot;</span><span class="op">,</span> vale<span class="op">);</span></span>
<span id="cb274-192"><a href="#cb274-192" aria-hidden="true" tabindex="-1"></a>    config_set_string<span class="op">(</span>key<span class="op">,</span> str_vale<span class="op">);</span></span>
<span id="cb274-193"><a href="#cb274-193" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb274-194"><a href="#cb274-194" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb274-195"><a href="#cb274-195" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> config_set__Bool<span class="op">(</span><span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>key<span class="op">,</span> <span class="dt">int</span> vale<span class="op">)</span></span>
<span id="cb274-196"><a href="#cb274-196" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb274-197"><a href="#cb274-197" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb274-198"><a href="#cb274-198" aria-hidden="true" tabindex="-1"></a>    config_set_string<span class="op">(</span>key<span class="op">,</span> vale <span class="op">?</span> <span class="st">&quot;true&quot;</span> <span class="op">:</span> <span class="st">&quot;false&quot;</span><span class="op">);</span></span>
<span id="cb274-199"><a href="#cb274-199" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb274-200"><a href="#cb274-200" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb274-201"><a href="#cb274-201" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> config_save<span class="op">(</span><span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>filename<span class="op">)</span></span>
<span id="cb274-202"><a href="#cb274-202" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb274-203"><a href="#cb274-203" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb274-204"><a href="#cb274-204" aria-hidden="true" tabindex="-1"></a>    IL <span class="op">*</span>file<span class="op">;</span></span>
<span id="cb274-205"><a href="#cb274-205" aria-hidden="true" tabindex="-1"></a>    ConfigItem <span class="op">*</span>item<span class="op">;</span></span>
<span id="cb274-206"><a href="#cb274-206" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb274-207"><a href="#cb274-207" aria-hidden="true" tabindex="-1"></a>    file <span class="op">=</span> fopen<span class="op">(</span>filename<span class="op">,</span> <span class="st">&quot;w&quot;</span><span class="op">);</span></span>
<span id="cb274-208"><a href="#cb274-208" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>file <span class="op">==</span> NULL<span class="op">)</span> </span>
<span id="cb274-209"><a href="#cb274-209" aria-hidden="true" tabindex="-1"></a>        fprintf<span class="op">(</span>stderr<span class="op">,</span> <span class="st">&quot;設定ファイルに書き込めません: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> filename<span class="op">);</span></span>
<span id="cb274-210"><a href="#cb274-210" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="op">-;</span></span>
<span id="cb274-211"><a href="#cb274-211" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb274-212"><a href="#cb274-212" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb274-213"><a href="#cb274-213" aria-hidden="true" tabindex="-1"></a>    fprintf<span class="op">(</span>file<span class="op">,</span> <span class="st">&quot;# 自動生成された設定ファイルnn&quot;</span><span class="op">);</span></span>
<span id="cb274-214"><a href="#cb274-214" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb274-215"><a href="#cb274-215" aria-hidden="true" tabindex="-1"></a>    item <span class="op">=</span> g_config_head<span class="op">;</span></span>
<span id="cb274-216"><a href="#cb274-216" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>item <span class="op">!=</span> NULL<span class="op">)</span> </span>
<span id="cb274-217"><a href="#cb274-217" aria-hidden="true" tabindex="-1"></a>        fprintf<span class="op">(</span>file<span class="op">,</span> <span class="st">&quot;</span><span class="sc">%s</span><span class="st"> = </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> item<span class="op">-&gt;</span>key<span class="op">,</span> item<span class="op">-&gt;</span>vale<span class="op">);</span></span>
<span id="cb274-218"><a href="#cb274-218" aria-hidden="true" tabindex="-1"></a>        item <span class="op">=</span> item<span class="op">-&gt;</span>next<span class="op">;</span></span>
<span id="cb274-219"><a href="#cb274-219" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb274-220"><a href="#cb274-220" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb274-221"><a href="#cb274-221" aria-hidden="true" tabindex="-1"></a>    fclose<span class="op">(</span>file<span class="op">);</span></span>
<span id="cb274-222"><a href="#cb274-222" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;設定ファイル保存完了: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> filename<span class="op">);</span></span>
<span id="cb274-223"><a href="#cb274-223" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">;</span></span>
<span id="cb274-224"><a href="#cb274-224" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb274-225"><a href="#cb274-225" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb274-226"><a href="#cb274-226" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> config_print_all<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb274-227"><a href="#cb274-227" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb274-228"><a href="#cb274-228" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb274-229"><a href="#cb274-229" aria-hidden="true" tabindex="-1"></a>    ConfigItem <span class="op">*</span>item <span class="op">=</span> g_config_head<span class="op">;</span></span>
<span id="cb274-230"><a href="#cb274-230" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb274-231"><a href="#cb274-231" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== 現在の設定 ===n&quot;</span><span class="op">);</span></span>
<span id="cb274-232"><a href="#cb274-232" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>item <span class="op">!=</span> NULL<span class="op">)</span> </span>
<span id="cb274-233"><a href="#cb274-233" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%s</span><span class="st"> = </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> item<span class="op">-&gt;</span>key<span class="op">,</span> item<span class="op">-&gt;</span>vale<span class="op">);</span></span>
<span id="cb274-234"><a href="#cb274-234" aria-hidden="true" tabindex="-1"></a>        item <span class="op">=</span> item<span class="op">-&gt;</span>next<span class="op">;</span></span>
<span id="cb274-235"><a href="#cb274-235" aria-hidden="true" tabindex="-1"></a>    </span></code></pre></div>
<h3 id="静的ライブラリの作成">静的ライブラリの作成</h3>
<p>再利用可能なライブラリを作成する方法を学習します。</p>
<h4 id="ライブラリ作成の手順">ライブラリ作成の手順</h4>
<p><strong>Makefile（ライブラリ作成用）</strong></p>
<div class="sourceCode" id="cb275"><pre
class="sourceCode makefile"><code class="sourceCode makefile"><span id="cb275-1"><a href="#cb275-1" aria-hidden="true" tabindex="-1"></a><span class="co"># コンパイラとフラグ</span></span>
<span id="cb275-2"><a href="#cb275-2" aria-hidden="true" tabindex="-1"></a><span class="dt">CC</span> <span class="ch">=</span><span class="st"> gcc</span></span>
<span id="cb275-3"><a href="#cb275-3" aria-hidden="true" tabindex="-1"></a><span class="dt">CLAGS</span> <span class="ch">=</span><span class="st"> -std=c90 -Wall -Wextra -pedantic -O</span></span>
<span id="cb275-4"><a href="#cb275-4" aria-hidden="true" tabindex="-1"></a><span class="dt">AR</span> <span class="ch">=</span><span class="st"> ar</span></span>
<span id="cb275-5"><a href="#cb275-5" aria-hidden="true" tabindex="-1"></a><span class="dt">ARLAGS</span> <span class="ch">=</span><span class="st"> rcs</span></span>
<span id="cb275-6"><a href="#cb275-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb275-7"><a href="#cb275-7" aria-hidden="true" tabindex="-1"></a><span class="co"># ターゲット</span></span>
<span id="cb275-8"><a href="#cb275-8" aria-hidden="true" tabindex="-1"></a><span class="dt">LI_NAM</span> <span class="ch">=</span><span class="st"> libmytils.a</span></span>
<span id="cb275-9"><a href="#cb275-9" aria-hidden="true" tabindex="-1"></a><span class="dt">HADR_DIR</span> <span class="ch">=</span><span class="st"> include</span></span>
<span id="cb275-10"><a href="#cb275-10" aria-hidden="true" tabindex="-1"></a><span class="dt">SOURC_DIR</span> <span class="ch">=</span><span class="st"> src</span></span>
<span id="cb275-11"><a href="#cb275-11" aria-hidden="true" tabindex="-1"></a><span class="dt">UILD_DIR</span> <span class="ch">=</span><span class="st"> build</span></span>
<span id="cb275-12"><a href="#cb275-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb275-13"><a href="#cb275-13" aria-hidden="true" tabindex="-1"></a><span class="co"># ソースファイル</span></span>
<span id="cb275-14"><a href="#cb275-14" aria-hidden="true" tabindex="-1"></a><span class="dt">SOURCS</span> <span class="ch">=</span><span class="st"> </span><span class="ch">$(</span><span class="dt">SOURC_DIR</span><span class="ch">)</span><span class="st">/math_tils.c </span></span>
<span id="cb275-15"><a href="#cb275-15" aria-hidden="true" tabindex="-1"></a>          <span class="ch">$(</span><span class="dt">SOURC_DIR</span><span class="ch">)</span>/string_tils.c </span>
<span id="cb275-16"><a href="#cb275-16" aria-hidden="true" tabindex="-1"></a>          <span class="ch">$(</span><span class="dt">SOURC_DIR</span><span class="ch">)</span>/logger.c </span>
<span id="cb275-17"><a href="#cb275-17" aria-hidden="true" tabindex="-1"></a>          <span class="ch">$(</span><span class="dt">SOURC_DIR</span><span class="ch">)</span>/config.c</span>
<span id="cb275-18"><a href="#cb275-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb275-19"><a href="#cb275-19" aria-hidden="true" tabindex="-1"></a><span class="co"># オブジェクトファイル</span></span>
<span id="cb275-20"><a href="#cb275-20" aria-hidden="true" tabindex="-1"></a><span class="dt">OJCTS</span> <span class="ch">=</span><span class="st"> </span><span class="ch">$(</span><span class="dt">SOURCS</span><span class="kw">:</span><span class="ch">$(</span><span class="dt">SOURC_DIR</span><span class="ch">)</span><span class="ss">/%.c</span><span class="kw">=</span><span class="ch">$(</span><span class="dt">UILD_DIR</span><span class="ch">)</span><span class="ss">/%.o</span><span class="ch">)</span></span>
<span id="cb275-21"><a href="#cb275-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb275-22"><a href="#cb275-22" aria-hidden="true" tabindex="-1"></a><span class="co"># ヘッダファイル</span></span>
<span id="cb275-23"><a href="#cb275-23" aria-hidden="true" tabindex="-1"></a><span class="dt">HADRS</span> <span class="ch">=</span><span class="st"> </span><span class="ch">$(</span><span class="dt">HADR_DIR</span><span class="ch">)</span><span class="st">/math_tils.h </span></span>
<span id="cb275-24"><a href="#cb275-24" aria-hidden="true" tabindex="-1"></a>          <span class="ch">$(</span><span class="dt">HADR_DIR</span><span class="ch">)</span>/string_tils.h </span>
<span id="cb275-25"><a href="#cb275-25" aria-hidden="true" tabindex="-1"></a>          <span class="ch">$(</span><span class="dt">HADR_DIR</span><span class="ch">)</span>/logger.h </span>
<span id="cb275-26"><a href="#cb275-26" aria-hidden="true" tabindex="-1"></a>          <span class="ch">$(</span><span class="dt">HADR_DIR</span><span class="ch">)</span>/config.h</span>
<span id="cb275-27"><a href="#cb275-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb275-28"><a href="#cb275-28" aria-hidden="true" tabindex="-1"></a><span class="co"># デフォルトターゲット</span></span>
<span id="cb275-29"><a href="#cb275-29" aria-hidden="true" tabindex="-1"></a><span class="dv">all:</span><span class="dt"> </span><span class="ch">$(</span><span class="dt">UILD_DIR</span><span class="ch">)</span><span class="dt"> </span><span class="ch">$(</span><span class="dt">LI_NAM</span><span class="ch">)</span></span>
<span id="cb275-30"><a href="#cb275-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb275-31"><a href="#cb275-31" aria-hidden="true" tabindex="-1"></a><span class="co"># ディレクトリ作成</span></span>
<span id="cb275-32"><a href="#cb275-32" aria-hidden="true" tabindex="-1"></a><span class="dv">$(UILD_DIR):</span></span>
<span id="cb275-33"><a href="#cb275-33" aria-hidden="true" tabindex="-1"></a><span class="er">    </span>mkdir -p <span class="ch">$(</span><span class="dt">UILD_DIR</span><span class="ch">)</span></span>
<span id="cb275-34"><a href="#cb275-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb275-35"><a href="#cb275-35" aria-hidden="true" tabindex="-1"></a><span class="co"># 静的ライブラリ作成</span></span>
<span id="cb275-36"><a href="#cb275-36" aria-hidden="true" tabindex="-1"></a><span class="dv">$(LI_NAM):</span><span class="dt"> </span><span class="ch">$(</span><span class="dt">OJCTS</span><span class="ch">)</span></span>
<span id="cb275-37"><a href="#cb275-37" aria-hidden="true" tabindex="-1"></a><span class="er">    </span><span class="ch">$(</span><span class="dt">AR</span><span class="ch">)</span> <span class="ch">$(</span><span class="dt">ARLAGS</span><span class="ch">)</span> <span class="ch">$@</span> <span class="ch">$^</span></span>
<span id="cb275-38"><a href="#cb275-38" aria-hidden="true" tabindex="-1"></a>    <span class="ch">@</span><span class="fu">echo </span><span class="st">&quot;ライブラリ作成完了: </span><span class="ch">$@</span><span class="st">&quot;</span></span>
<span id="cb275-39"><a href="#cb275-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb275-40"><a href="#cb275-40" aria-hidden="true" tabindex="-1"></a><span class="co"># オブジェクトファイル作成</span></span>
<span id="cb275-41"><a href="#cb275-41" aria-hidden="true" tabindex="-1"></a><span class="dv">$(UILD_DIR)/%.o:</span><span class="dt"> </span><span class="ch">$(</span><span class="dt">SOURC_DIR</span><span class="ch">)</span><span class="dt">/%.c </span><span class="ch">$(</span><span class="dt">HADRS</span><span class="ch">)</span></span>
<span id="cb275-42"><a href="#cb275-42" aria-hidden="true" tabindex="-1"></a><span class="er">    </span><span class="ch">$(</span><span class="dt">CC</span><span class="ch">)</span> <span class="ch">$(</span><span class="dt">CLAGS</span><span class="ch">)</span> -I<span class="ch">$(</span><span class="dt">HADR_DIR</span><span class="ch">)</span> -c <span class="ch">$&lt;</span> -o <span class="ch">$@</span></span>
<span id="cb275-43"><a href="#cb275-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb275-44"><a href="#cb275-44" aria-hidden="true" tabindex="-1"></a><span class="co"># テストプログラム</span></span>
<span id="cb275-45"><a href="#cb275-45" aria-hidden="true" tabindex="-1"></a><span class="dv">test:</span><span class="dt"> </span><span class="ch">$(</span><span class="dt">LI_NAM</span><span class="ch">)</span><span class="dt"> test_program.c</span></span>
<span id="cb275-46"><a href="#cb275-46" aria-hidden="true" tabindex="-1"></a><span class="er">    </span><span class="ch">$(</span><span class="dt">CC</span><span class="ch">)</span> <span class="ch">$(</span><span class="dt">CLAGS</span><span class="ch">)</span> -I<span class="ch">$(</span><span class="dt">HADR_DIR</span><span class="ch">)</span> test_program.c -L. -lmytils -o test_program</span>
<span id="cb275-47"><a href="#cb275-47" aria-hidden="true" tabindex="-1"></a>    <span class="ch">@</span><span class="fu">echo </span><span class="st">&quot;テストプログラム作成完了&quot;</span></span>
<span id="cb275-48"><a href="#cb275-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb275-49"><a href="#cb275-49" aria-hidden="true" tabindex="-1"></a><span class="co"># インストール</span></span>
<span id="cb275-50"><a href="#cb275-50" aria-hidden="true" tabindex="-1"></a><span class="dv">install:</span><span class="dt"> </span><span class="ch">$(</span><span class="dt">LI_NAM</span><span class="ch">)</span></span>
<span id="cb275-51"><a href="#cb275-51" aria-hidden="true" tabindex="-1"></a><span class="er">    </span>sudo cp <span class="ch">$(</span><span class="dt">LI_NAM</span><span class="ch">)</span> /sr/local/lib/</span>
<span id="cb275-52"><a href="#cb275-52" aria-hidden="true" tabindex="-1"></a>    sudo mkdir -p /sr/local/include/mytils</span>
<span id="cb275-53"><a href="#cb275-53" aria-hidden="true" tabindex="-1"></a>    sudo cp <span class="ch">$(</span><span class="dt">HADRS</span><span class="ch">)</span> /sr/local/include/mytils/</span>
<span id="cb275-54"><a href="#cb275-54" aria-hidden="true" tabindex="-1"></a>    <span class="ch">@</span><span class="fu">echo </span><span class="st">&quot;ライブラリインストール完了&quot;</span></span>
<span id="cb275-55"><a href="#cb275-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb275-56"><a href="#cb275-56" aria-hidden="true" tabindex="-1"></a><span class="co"># クリーンアップ</span></span>
<span id="cb275-57"><a href="#cb275-57" aria-hidden="true" tabindex="-1"></a><span class="dv">clean:</span></span>
<span id="cb275-58"><a href="#cb275-58" aria-hidden="true" tabindex="-1"></a><span class="er">    </span>rm -rf <span class="ch">$(</span><span class="dt">UILD_DIR</span><span class="ch">)</span></span>
<span id="cb275-59"><a href="#cb275-59" aria-hidden="true" tabindex="-1"></a>    rm -f <span class="ch">$(</span><span class="dt">LI_NAM</span><span class="ch">)</span></span>
<span id="cb275-60"><a href="#cb275-60" aria-hidden="true" tabindex="-1"></a>    rm -f test_program</span>
<span id="cb275-61"><a href="#cb275-61" aria-hidden="true" tabindex="-1"></a>    <span class="ch">@</span><span class="fu">echo </span><span class="st">&quot;クリーンアップ完了&quot;</span></span>
<span id="cb275-62"><a href="#cb275-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb275-63"><a href="#cb275-63" aria-hidden="true" tabindex="-1"></a><span class="co"># 依存関係</span></span>
<span id="cb275-64"><a href="#cb275-64" aria-hidden="true" tabindex="-1"></a><span class="ot">.PHONY:</span><span class="dt"> all clean test install</span></span></code></pre></div>
<p><strong>test_program.c（ライブラリテストプログラム）</strong></p>
<div class="sourceCode" id="cb276"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb276-1"><a href="#cb276-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb276-2"><a href="#cb276-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&quot;math_tils.h&quot;</span></span>
<span id="cb276-3"><a href="#cb276-3" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&quot;string_tils.h&quot;</span></span>
<span id="cb276-4"><a href="#cb276-4" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&quot;logger.h&quot;</span></span>
<span id="cb276-5"><a href="#cb276-5" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&quot;config.h&quot;</span></span>
<span id="cb276-6"><a href="#cb276-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb276-7"><a href="#cb276-7" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb276-8"><a href="#cb276-8" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb276-9"><a href="#cb276-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb276-10"><a href="#cb276-10" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== ライブラリテストプログラム ===nn&quot;</span><span class="op">);</span></span>
<span id="cb276-11"><a href="#cb276-11" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb276-12"><a href="#cb276-12" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* ログシステムテスト */</span></span>
<span id="cb276-13"><a href="#cb276-13" aria-hidden="true" tabindex="-1"></a>    logger_init<span class="op">(</span><span class="st">&quot;test.log&quot;</span><span class="op">);</span></span>
<span id="cb276-14"><a href="#cb276-14" aria-hidden="true" tabindex="-1"></a>    logger_set_level<span class="op">(</span>LOG_DUG<span class="op">);</span></span>
<span id="cb276-15"><a href="#cb276-15" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb276-16"><a href="#cb276-16" aria-hidden="true" tabindex="-1"></a>    LOG_INO<span class="op">(</span><span class="st">&quot;テストプログラム開始&quot;</span><span class="op">);</span></span>
<span id="cb276-17"><a href="#cb276-17" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb276-18"><a href="#cb276-18" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 数学関数テスト */</span></span>
<span id="cb276-19"><a href="#cb276-19" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== 数学関数テスト ===n&quot;</span><span class="op">);</span></span>
<span id="cb276-20"><a href="#cb276-20" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;add(, ) = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> add<span class="op">(,</span> <span class="op">));</span></span>
<span id="cb276-21"><a href="#cb276-21" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;power(, ) = </span><span class="sc">%ld</span><span class="st">n&quot;</span><span class="op">,</span> power<span class="op">(,</span> <span class="op">));</span></span>
<span id="cb276-22"><a href="#cb276-22" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb276-23"><a href="#cb276-23" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> numbers<span class="op">[]</span> <span class="op">=</span> <span class="op">,</span> <span class="op">,</span> <span class="op">,</span> <span class="op">,</span> <span class="op">;</span></span>
<span id="cb276-24"><a href="#cb276-24" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;average = %.fn&quot;</span><span class="op">,</span> average<span class="op">(</span>numbers<span class="op">,</span> <span class="op">));</span></span>
<span id="cb276-25"><a href="#cb276-25" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb276-26"><a href="#cb276-26" aria-hidden="true" tabindex="-1"></a>    LOG_DUG<span class="op">(</span><span class="st">&quot;数学関数テスト完了&quot;</span><span class="op">);</span></span>
<span id="cb276-27"><a href="#cb276-27" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb276-28"><a href="#cb276-28" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 文字列関数テスト */</span></span>
<span id="cb276-29"><a href="#cb276-29" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;n=== 文字列関数テスト ===n&quot;</span><span class="op">);</span></span>
<span id="cb276-30"><a href="#cb276-30" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> test_str<span class="op">[]</span> <span class="op">=</span> <span class="st">&quot;  Hello World  &quot;</span><span class="op">;</span></span>
<span id="cb276-31"><a href="#cb276-31" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;元の文字列: &#39;</span><span class="sc">%s</span><span class="st">&#39;n&quot;</span><span class="op">,</span> test_str<span class="op">);</span></span>
<span id="cb276-32"><a href="#cb276-32" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb276-33"><a href="#cb276-33" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> <span class="op">*</span>trimmed <span class="op">=</span> trim_whitespace<span class="op">(</span>test_str<span class="op">);</span></span>
<span id="cb276-34"><a href="#cb276-34" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;トリム後: &#39;</span><span class="sc">%s</span><span class="st">&#39;n&quot;</span><span class="op">,</span> trimmed<span class="op">);</span></span>
<span id="cb276-35"><a href="#cb276-35" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb276-36"><a href="#cb276-36" aria-hidden="true" tabindex="-1"></a>    to_uuppercase<span class="op">(</span>trimmed<span class="op">);</span></span>
<span id="cb276-37"><a href="#cb276-37" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;大文字変換: &#39;</span><span class="sc">%s</span><span class="st">&#39;n&quot;</span><span class="op">,</span> trimmed<span class="op">);</span></span>
<span id="cb276-38"><a href="#cb276-38" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb276-39"><a href="#cb276-39" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;単語数: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> count_words<span class="op">(</span><span class="st">&quot;Hello beatifl world&quot;</span><span class="op">));</span></span>
<span id="cb276-40"><a href="#cb276-40" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb276-41"><a href="#cb276-41" aria-hidden="true" tabindex="-1"></a>    LOG_DUG<span class="op">(</span><span class="st">&quot;文字列関数テスト完了&quot;</span><span class="op">);</span></span>
<span id="cb276-42"><a href="#cb276-42" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb276-43"><a href="#cb276-43" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 設定管理テスト */</span></span>
<span id="cb276-44"><a href="#cb276-44" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;n=== 設定管理テスト ===n&quot;</span><span class="op">);</span></span>
<span id="cb276-45"><a href="#cb276-45" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb276-46"><a href="#cb276-46" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* デフォルト設定 */</span></span>
<span id="cb276-47"><a href="#cb276-47" aria-hidden="true" tabindex="-1"></a>    config_set_string<span class="op">(</span><span class="st">&quot;app_name&quot;</span><span class="op">,</span> <span class="st">&quot;Test Application&quot;</span><span class="op">);</span></span>
<span id="cb276-48"><a href="#cb276-48" aria-hidden="true" tabindex="-1"></a>    config_set_int<span class="op">(</span><span class="st">&quot;window_width&quot;</span><span class="op">,</span> <span class="op">);</span></span>
<span id="cb276-49"><a href="#cb276-49" aria-hidden="true" tabindex="-1"></a>    config_set_int<span class="op">(</span><span class="st">&quot;window_height&quot;</span><span class="op">,</span> <span class="op">);</span></span>
<span id="cb276-50"><a href="#cb276-50" aria-hidden="true" tabindex="-1"></a>    config_set__Bool<span class="op">(</span><span class="st">&quot;fll_screen&quot;</span><span class="op">,</span> <span class="op">);</span></span>
<span id="cb276-51"><a href="#cb276-51" aria-hidden="true" tabindex="-1"></a>    config_set_double<span class="op">(</span><span class="st">&quot;volme&quot;</span><span class="op">,</span> <span class="op">.);</span></span>
<span id="cb276-52"><a href="#cb276-52" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb276-53"><a href="#cb276-53" aria-hidden="true" tabindex="-1"></a>    config_print_all<span class="op">();</span></span>
<span id="cb276-54"><a href="#cb276-54" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb276-55"><a href="#cb276-55" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 設定ファイル保存・読み込み */</span></span>
<span id="cb276-56"><a href="#cb276-56" aria-hidden="true" tabindex="-1"></a>    config_save<span class="op">(</span><span class="st">&quot;test.conf&quot;</span><span class="op">);</span></span>
<span id="cb276-57"><a href="#cb276-57" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb276-58"><a href="#cb276-58" aria-hidden="true" tabindex="-1"></a>    LOG_INO<span class="op">(</span><span class="st">&quot;テストプログラム終了&quot;</span><span class="op">);</span></span>
<span id="cb276-59"><a href="#cb276-59" aria-hidden="true" tabindex="-1"></a>    logger_cleanup<span class="op">();</span></span>
<span id="cb276-60"><a href="#cb276-60" aria-hidden="true" tabindex="-1"></a>    config_uunload<span class="op">();</span></span>
<span id="cb276-61"><a href="#cb276-61" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb276-62"><a href="#cb276-62" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">;</span></span></code></pre></div>
<h3 id="実践プロジェクト-ファイル管理システム">実践プロジェクト:
ファイル管理システム</h3>
<p>これまでの知識を統合した実践的なプロジェクトを作成します。</p>
<h4 id="プロジェクト構成">プロジェクト構成</h4>
<pre><code>file_manager/
├── include/
│   ├── file_ops.h
│   ├── men.h
│   ├── tils.h
│   └── common.h
├── src/
│   ├── main.c
│   ├── file_ops.c
│   ├── men.c
│   └── tils.c
├── config/
│   └── settings.conf
├── logs/
└── Makefile</code></pre>
<p><strong>include/common.h（共通定義）</strong></p>
<div class="sourceCode" id="cb278"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb278-1"><a href="#cb278-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#ifndef COMMON_H</span></span>
<span id="cb278-2"><a href="#cb278-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#define COMMON_H</span></span>
<span id="cb278-3"><a href="#cb278-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb278-4"><a href="#cb278-4" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb278-5"><a href="#cb278-5" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdlib.h&gt;</span></span>
<span id="cb278-6"><a href="#cb278-6" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;string.h&gt;</span></span>
<span id="cb278-7"><a href="#cb278-7" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;time.h&gt;</span></span>
<span id="cb278-8"><a href="#cb278-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb278-9"><a href="#cb278-9" aria-hidden="true" tabindex="-1"></a><span class="co">/* 定数定義 */</span></span>
<span id="cb278-10"><a href="#cb278-10" aria-hidden="true" tabindex="-1"></a><span class="pp">#define MAX_PATH_LNGTH </span></span>
<span id="cb278-11"><a href="#cb278-11" aria-hidden="true" tabindex="-1"></a><span class="pp">#define MAX_ILNAM_LNGTH </span></span>
<span id="cb278-12"><a href="#cb278-12" aria-hidden="true" tabindex="-1"></a><span class="pp">#define MAX_UR_SIZE </span><span class="dv">9</span></span>
<span id="cb278-13"><a href="#cb278-13" aria-hidden="true" tabindex="-1"></a><span class="pp">#define MAX_ILS_PR_PAG </span></span>
<span id="cb278-14"><a href="#cb278-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb278-15"><a href="#cb278-15" aria-hidden="true" tabindex="-1"></a><span class="co">/* エラーコード */</span></span>
<span id="cb278-16"><a href="#cb278-16" aria-hidden="true" tabindex="-1"></a><span class="kw">typedef</span> <span class="kw">enum</span> </span>
<span id="cb278-17"><a href="#cb278-17" aria-hidden="true" tabindex="-1"></a>    SUCCSS <span class="op">=</span> <span class="op">,</span></span>
<span id="cb278-18"><a href="#cb278-18" aria-hidden="true" tabindex="-1"></a>    RROR_IL_NOT_OUND <span class="op">=</span> <span class="op">-,</span></span>
<span id="cb278-19"><a href="#cb278-19" aria-hidden="true" tabindex="-1"></a>    RROR_PRMISSION_DNID <span class="op">=</span> <span class="op">-,</span></span>
<span id="cb278-20"><a href="#cb278-20" aria-hidden="true" tabindex="-1"></a>    RROR_INVALID_ARGUMNT <span class="op">=</span> <span class="op">-,</span></span>
<span id="cb278-21"><a href="#cb278-21" aria-hidden="true" tabindex="-1"></a>    RROR_MMORY_ALLOCATION <span class="op">=</span> <span class="op">-,</span></span>
<span id="cb278-22"><a href="#cb278-22" aria-hidden="true" tabindex="-1"></a>    RROR_UNKNOWN <span class="op">=</span> <span class="op">-</span><span class="dv">99</span></span>
<span id="cb278-23"><a href="#cb278-23" aria-hidden="true" tabindex="-1"></a> rrorCode<span class="op">;</span></span>
<span id="cb278-24"><a href="#cb278-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb278-25"><a href="#cb278-25" aria-hidden="true" tabindex="-1"></a><span class="co">/* ファイル情報構造体 */</span></span>
<span id="cb278-26"><a href="#cb278-26" aria-hidden="true" tabindex="-1"></a><span class="kw">typedef</span> strct </span>
<span id="cb278-27"><a href="#cb278-27" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> name<span class="op">[</span>MAX_ILNAM_LNGTH<span class="op">];</span></span>
<span id="cb278-28"><a href="#cb278-28" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> path<span class="op">[</span>MAX_PATH_LNGTH<span class="op">];</span></span>
<span id="cb278-29"><a href="#cb278-29" aria-hidden="true" tabindex="-1"></a>    <span class="dt">long</span> size<span class="op">;</span></span>
<span id="cb278-30"><a href="#cb278-30" aria-hidden="true" tabindex="-1"></a>    <span class="dt">time_t</span> modified_time<span class="op">;</span></span>
<span id="cb278-31"><a href="#cb278-31" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> is_directory<span class="op">;</span></span>
<span id="cb278-32"><a href="#cb278-32" aria-hidden="true" tabindex="-1"></a> ileInfo<span class="op">;</span></span>
<span id="cb278-33"><a href="#cb278-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb278-34"><a href="#cb278-34" aria-hidden="true" tabindex="-1"></a><span class="co">/* アプリケーション設定 */</span></span>
<span id="cb278-35"><a href="#cb278-35" aria-hidden="true" tabindex="-1"></a><span class="kw">typedef</span> strct </span>
<span id="cb278-36"><a href="#cb278-36" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> default_directory<span class="op">[</span>MAX_PATH_LNGTH<span class="op">];</span></span>
<span id="cb278-37"><a href="#cb278-37" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> show_hidden_files<span class="op">;</span></span>
<span id="cb278-38"><a href="#cb278-38" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> sort_by_name<span class="op">;</span></span>
<span id="cb278-39"><a href="#cb278-39" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> sort_ascending<span class="op">;</span></span>
<span id="cb278-40"><a href="#cb278-40" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> auto_save_settings<span class="op">;</span></span>
<span id="cb278-41"><a href="#cb278-41" aria-hidden="true" tabindex="-1"></a> AppConfig<span class="op">;</span></span>
<span id="cb278-42"><a href="#cb278-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb278-43"><a href="#cb278-43" aria-hidden="true" tabindex="-1"></a><span class="co">/* グローバル変数宣言 */</span></span>
<span id="cb278-44"><a href="#cb278-44" aria-hidden="true" tabindex="-1"></a><span class="kw">extern</span> AppConfig g_app_config<span class="op">;</span></span>
<span id="cb278-45"><a href="#cb278-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb278-46"><a href="#cb278-46" aria-hidden="true" tabindex="-1"></a><span class="co">/* 共通マクロ */</span></span>
<span id="cb278-47"><a href="#cb278-47" aria-hidden="true" tabindex="-1"></a><span class="pp">#define SA_R</span><span class="op">(</span><span class="pp">ptr</span><span class="op">)</span><span class="pp"> </span><span class="cf">do</span><span class="pp">  </span></span>
<span id="cb278-48"><a href="#cb278-48" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">((</span>ptr<span class="op">)</span> <span class="op">!=</span> NULL<span class="op">)</span>  </span>
<span id="cb278-49"><a href="#cb278-49" aria-hidden="true" tabindex="-1"></a>        free<span class="op">(</span>ptr<span class="op">);</span> </span>
<span id="cb278-50"><a href="#cb278-50" aria-hidden="true" tabindex="-1"></a>        <span class="op">(</span>ptr<span class="op">)</span> <span class="op">=</span> NULL<span class="op">;</span> </span>
<span id="cb278-51"><a href="#cb278-51" aria-hidden="true" tabindex="-1"></a>     </span>
<span id="cb278-52"><a href="#cb278-52" aria-hidden="true" tabindex="-1"></a> <span class="cf">while</span><span class="op">()</span></span>
<span id="cb278-53"><a href="#cb278-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb278-54"><a href="#cb278-54" aria-hidden="true" tabindex="-1"></a><span class="pp">#define CHCK_NULL</span><span class="op">(</span><span class="pp">ptr</span><span class="op">,</span><span class="pp"> action</span><span class="op">)</span><span class="pp"> </span><span class="cf">do</span><span class="pp">  </span></span>
<span id="cb278-55"><a href="#cb278-55" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">((</span>ptr<span class="op">)</span> <span class="op">==</span> NULL<span class="op">)</span>  </span>
<span id="cb278-56"><a href="#cb278-56" aria-hidden="true" tabindex="-1"></a>        action<span class="op">;</span> </span>
<span id="cb278-57"><a href="#cb278-57" aria-hidden="true" tabindex="-1"></a>     </span>
<span id="cb278-58"><a href="#cb278-58" aria-hidden="true" tabindex="-1"></a> <span class="cf">while</span><span class="op">()</span></span>
<span id="cb278-59"><a href="#cb278-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb278-60"><a href="#cb278-60" aria-hidden="true" tabindex="-1"></a><span class="pp">#endif </span><span class="co">/* COMMON_H */</span></span></code></pre></div>
<p><strong>include/file_ops.h（ファイル操作）</strong></p>
<div class="sourceCode" id="cb279"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb279-1"><a href="#cb279-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#ifndef IL_OPS_H</span></span>
<span id="cb279-2"><a href="#cb279-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#define IL_OPS_H</span></span>
<span id="cb279-3"><a href="#cb279-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb279-4"><a href="#cb279-4" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&quot;common.h&quot;</span></span>
<span id="cb279-5"><a href="#cb279-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb279-6"><a href="#cb279-6" aria-hidden="true" tabindex="-1"></a><span class="co">/* ディレクトリ操作 */</span></span>
<span id="cb279-7"><a href="#cb279-7" aria-hidden="true" tabindex="-1"></a>rrorCode list_directory<span class="op">(</span><span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>path<span class="op">,</span> ileInfo <span class="op">**</span>files<span class="op">,</span> <span class="dt">int</span> <span class="op">*</span>count<span class="op">);</span></span>
<span id="cb279-8"><a href="#cb279-8" aria-hidden="true" tabindex="-1"></a>rrorCode change_directory<span class="op">(</span><span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>path<span class="op">);</span></span>
<span id="cb279-9"><a href="#cb279-9" aria-hidden="true" tabindex="-1"></a><span class="dt">char</span><span class="op">*</span> get_current_directory<span class="op">(</span><span class="dt">void</span><span class="op">);</span></span>
<span id="cb279-10"><a href="#cb279-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb279-11"><a href="#cb279-11" aria-hidden="true" tabindex="-1"></a><span class="co">/* ファイル操作 */</span></span>
<span id="cb279-12"><a href="#cb279-12" aria-hidden="true" tabindex="-1"></a>rrorCode copy_file<span class="op">(</span><span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>sorce<span class="op">,</span> <span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>destination<span class="op">);</span></span>
<span id="cb279-13"><a href="#cb279-13" aria-hidden="true" tabindex="-1"></a>rrorCode move_file<span class="op">(</span><span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>sorce<span class="op">,</span> <span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>destination<span class="op">);</span></span>
<span id="cb279-14"><a href="#cb279-14" aria-hidden="true" tabindex="-1"></a>rrorCode delete_file<span class="op">(</span><span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>path<span class="op">);</span></span>
<span id="cb279-15"><a href="#cb279-15" aria-hidden="true" tabindex="-1"></a>rrorCode create_directory<span class="op">(</span><span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>path<span class="op">);</span></span>
<span id="cb279-16"><a href="#cb279-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb279-17"><a href="#cb279-17" aria-hidden="true" tabindex="-1"></a><span class="co">/* ファイル情報 */</span></span>
<span id="cb279-18"><a href="#cb279-18" aria-hidden="true" tabindex="-1"></a>rrorCode get_file_info<span class="op">(</span><span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>path<span class="op">,</span> ileInfo <span class="op">*</span>info<span class="op">);</span></span>
<span id="cb279-19"><a href="#cb279-19" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> print_file_info<span class="op">(</span><span class="dt">const</span> ileInfo <span class="op">*</span>info<span class="op">);</span></span>
<span id="cb279-20"><a href="#cb279-20" aria-hidden="true" tabindex="-1"></a><span class="dt">const</span> <span class="dt">char</span><span class="op">*</span> format_file_size<span class="op">(</span><span class="dt">long</span> size<span class="op">);</span></span>
<span id="cb279-21"><a href="#cb279-21" aria-hidden="true" tabindex="-1"></a><span class="dt">const</span> <span class="dt">char</span><span class="op">*</span> format_time<span class="op">(</span><span class="dt">time_t</span> time<span class="op">);</span></span>
<span id="cb279-22"><a href="#cb279-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb279-23"><a href="#cb279-23" aria-hidden="true" tabindex="-1"></a><span class="co">/* 検索機能 */</span></span>
<span id="cb279-24"><a href="#cb279-24" aria-hidden="true" tabindex="-1"></a>rrorCode search_files<span class="op">(</span><span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>directory<span class="op">,</span> <span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>patterun<span class="op">,</span> </span>
<span id="cb279-25"><a href="#cb279-25" aria-hidden="true" tabindex="-1"></a>                       ileInfo <span class="op">**</span>results<span class="op">,</span> <span class="dt">int</span> <span class="op">*</span>count<span class="op">);</span></span>
<span id="cb279-26"><a href="#cb279-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb279-27"><a href="#cb279-27" aria-hidden="true" tabindex="-1"></a><span class="co">/* ソート機能 */</span></span>
<span id="cb279-28"><a href="#cb279-28" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> sort_files<span class="op">(</span>ileInfo <span class="op">*</span>files<span class="op">,</span> <span class="dt">int</span> count<span class="op">,</span> <span class="dt">int</span> by_name<span class="op">,</span> <span class="dt">int</span> ascending<span class="op">);</span></span>
<span id="cb279-29"><a href="#cb279-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb279-30"><a href="#cb279-30" aria-hidden="true" tabindex="-1"></a><span class="pp">#endif </span><span class="co">/* IL_OPS_H */</span></span></code></pre></div>
<p><strong>src/main.c（メインプログラム）</strong></p>
<div class="sourceCode" id="cb280"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb280-1"><a href="#cb280-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&quot;common.h&quot;</span></span>
<span id="cb280-2"><a href="#cb280-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&quot;file_ops.h&quot;</span></span>
<span id="cb280-3"><a href="#cb280-3" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&quot;men.h&quot;</span></span>
<span id="cb280-4"><a href="#cb280-4" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&quot;tils.h&quot;</span></span>
<span id="cb280-5"><a href="#cb280-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb280-6"><a href="#cb280-6" aria-hidden="true" tabindex="-1"></a><span class="co">/* グローバル変数定義 */</span></span>
<span id="cb280-7"><a href="#cb280-7" aria-hidden="true" tabindex="-1"></a>AppConfig g_app_config <span class="op">=</span> </span>
<span id="cb280-8"><a href="#cb280-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;/&quot;</span><span class="op">,</span>    <span class="co">/* default_directory */</span></span>
<span id="cb280-9"><a href="#cb280-9" aria-hidden="true" tabindex="-1"></a>    <span class="op">,</span>      <span class="co">/* show_hidden_files */</span></span>
<span id="cb280-10"><a href="#cb280-10" aria-hidden="true" tabindex="-1"></a>    <span class="op">,</span>      <span class="co">/* sort_by_name */</span></span>
<span id="cb280-11"><a href="#cb280-11" aria-hidden="true" tabindex="-1"></a>    <span class="op">,</span>      <span class="co">/* sort_ascending */</span></span>
<span id="cb280-12"><a href="#cb280-12" aria-hidden="true" tabindex="-1"></a>           <span class="co">/* auto_save_settings */</span></span>
<span id="cb280-13"><a href="#cb280-13" aria-hidden="true" tabindex="-1"></a><span class="op">;</span></span>
<span id="cb280-14"><a href="#cb280-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb280-15"><a href="#cb280-15" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb280-16"><a href="#cb280-16" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb280-17"><a href="#cb280-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb280-18"><a href="#cb280-18" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== ファイル管理システム ===n&quot;</span><span class="op">);</span></span>
<span id="cb280-19"><a href="#cb280-19" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;バージョン .nn&quot;</span><span class="op">);</span></span>
<span id="cb280-20"><a href="#cb280-20" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb280-21"><a href="#cb280-21" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 初期化 */</span></span>
<span id="cb280-22"><a href="#cb280-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>init_application<span class="op">()</span> <span class="op">!=</span> SUCCSS<span class="op">)</span> </span>
<span id="cb280-23"><a href="#cb280-23" aria-hidden="true" tabindex="-1"></a>        fprintf<span class="op">(</span>stderr<span class="op">,</span> <span class="st">&quot;アプリケーションの初期化に失敗しましたn&quot;</span><span class="op">);</span></span>
<span id="cb280-24"><a href="#cb280-24" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> XIT_AILUR<span class="op">;</span></span>
<span id="cb280-25"><a href="#cb280-25" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb280-26"><a href="#cb280-26" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb280-27"><a href="#cb280-27" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* メインループ */</span></span>
<span id="cb280-28"><a href="#cb280-28" aria-hidden="true" tabindex="-1"></a>    run_main_men<span class="op">();</span></span>
<span id="cb280-29"><a href="#cb280-29" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb280-30"><a href="#cb280-30" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 終了処理 */</span></span>
<span id="cb280-31"><a href="#cb280-31" aria-hidden="true" tabindex="-1"></a>    cleanup_application<span class="op">();</span></span>
<span id="cb280-32"><a href="#cb280-32" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb280-33"><a href="#cb280-33" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ファイル管理システムを終了しましたn&quot;</span><span class="op">);</span></span>
<span id="cb280-34"><a href="#cb280-34" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> XIT_SUCCSS<span class="op">;</span></span></code></pre></div>
<p><strong>include/men.h（メニューシステム）</strong></p>
<div class="sourceCode" id="cb281"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb281-1"><a href="#cb281-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#ifndef MNU_H</span></span>
<span id="cb281-2"><a href="#cb281-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#define MNU_H</span></span>
<span id="cb281-3"><a href="#cb281-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb281-4"><a href="#cb281-4" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&quot;common.h&quot;</span></span>
<span id="cb281-5"><a href="#cb281-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb281-6"><a href="#cb281-6" aria-hidden="true" tabindex="-1"></a><span class="co">/* メニュー項目構造体 */</span></span>
<span id="cb281-7"><a href="#cb281-7" aria-hidden="true" tabindex="-1"></a><span class="kw">typedef</span> strct </span>
<span id="cb281-8"><a href="#cb281-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> title<span class="op">[];</span></span>
<span id="cb281-9"><a href="#cb281-9" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> description<span class="op">[];</span></span>
<span id="cb281-10"><a href="#cb281-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">void</span> <span class="op">(*</span>handler<span class="op">)(</span><span class="dt">void</span><span class="op">);</span></span>
<span id="cb281-11"><a href="#cb281-11" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> enabled<span class="op">;</span></span>
<span id="cb281-12"><a href="#cb281-12" aria-hidden="true" tabindex="-1"></a> MenuItem<span class="op">;</span></span>
<span id="cb281-13"><a href="#cb281-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb281-14"><a href="#cb281-14" aria-hidden="true" tabindex="-1"></a><span class="co">/* メニュー関数 */</span></span>
<span id="cb281-15"><a href="#cb281-15" aria-hidden="true" tabindex="-1"></a>rrorCode init_application<span class="op">(</span><span class="dt">void</span><span class="op">);</span></span>
<span id="cb281-16"><a href="#cb281-16" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> cleanup_application<span class="op">(</span><span class="dt">void</span><span class="op">);</span></span>
<span id="cb281-17"><a href="#cb281-17" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> run_main_men<span class="op">(</span><span class="dt">void</span><span class="op">);</span></span>
<span id="cb281-18"><a href="#cb281-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb281-19"><a href="#cb281-19" aria-hidden="true" tabindex="-1"></a><span class="co">/* メニューハンドラ */</span></span>
<span id="cb281-20"><a href="#cb281-20" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> handle_list_files<span class="op">(</span><span class="dt">void</span><span class="op">);</span></span>
<span id="cb281-21"><a href="#cb281-21" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> handle_change_directory<span class="op">(</span><span class="dt">void</span><span class="op">);</span></span>
<span id="cb281-22"><a href="#cb281-22" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> handle_copy_file<span class="op">(</span><span class="dt">void</span><span class="op">);</span></span>
<span id="cb281-23"><a href="#cb281-23" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> handle_move_file<span class="op">(</span><span class="dt">void</span><span class="op">);</span></span>
<span id="cb281-24"><a href="#cb281-24" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> handle_delete_file<span class="op">(</span><span class="dt">void</span><span class="op">);</span></span>
<span id="cb281-25"><a href="#cb281-25" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> handle_create_directory<span class="op">(</span><span class="dt">void</span><span class="op">);</span></span>
<span id="cb281-26"><a href="#cb281-26" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> handle_search_files<span class="op">(</span><span class="dt">void</span><span class="op">);</span></span>
<span id="cb281-27"><a href="#cb281-27" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> handle_show_settings<span class="op">(</span><span class="dt">void</span><span class="op">);</span></span>
<span id="cb281-28"><a href="#cb281-28" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> handle_save_settings<span class="op">(</span><span class="dt">void</span><span class="op">);</span></span>
<span id="cb281-29"><a href="#cb281-29" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> handle_help<span class="op">(</span><span class="dt">void</span><span class="op">);</span></span>
<span id="cb281-30"><a href="#cb281-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb281-31"><a href="#cb281-31" aria-hidden="true" tabindex="-1"></a><span class="co">/* ユーティリティ */</span></span>
<span id="cb281-32"><a href="#cb281-32" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> display_men<span class="op">(</span><span class="dt">const</span> MenuItem <span class="op">*</span>men<span class="op">,</span> <span class="dt">int</span> count<span class="op">);</span></span>
<span id="cb281-33"><a href="#cb281-33" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> get_men_choice<span class="op">(</span><span class="dt">int</span> max_choice<span class="op">);</span></span>
<span id="cb281-34"><a href="#cb281-34" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> wait_for_enter<span class="op">(</span><span class="dt">void</span><span class="op">);</span></span>
<span id="cb281-35"><a href="#cb281-35" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> clear_screen<span class="op">(</span><span class="dt">void</span><span class="op">);</span></span>
<span id="cb281-36"><a href="#cb281-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb281-37"><a href="#cb281-37" aria-hidden="true" tabindex="-1"></a><span class="pp">#endif </span><span class="co">/* MNU_H */</span></span></code></pre></div>
<h3 id="コンパイル最適化とデバッグ">コンパイル最適化とデバッグ</h3>
<p>効率的な開発のためのコンパイル設定を学習します。</p>
<h4 id="高度なmakefile">高度なMakefile</h4>
<p><strong>Makefile（完全版）</strong></p>
<div class="sourceCode" id="cb282"><pre
class="sourceCode makefile"><code class="sourceCode makefile"><span id="cb282-1"><a href="#cb282-1" aria-hidden="true" tabindex="-1"></a><span class="co"># プロジェクト設定</span></span>
<span id="cb282-2"><a href="#cb282-2" aria-hidden="true" tabindex="-1"></a><span class="dt">PROJCT_NAM</span> <span class="ch">=</span><span class="st"> file_manager</span></span>
<span id="cb282-3"><a href="#cb282-3" aria-hidden="true" tabindex="-1"></a><span class="dt">VRSION</span> <span class="ch">=</span><span class="st"> ..</span></span>
<span id="cb282-4"><a href="#cb282-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb282-5"><a href="#cb282-5" aria-hidden="true" tabindex="-1"></a><span class="co"># ディレクトリ構成</span></span>
<span id="cb282-6"><a href="#cb282-6" aria-hidden="true" tabindex="-1"></a><span class="dt">SRC_DIR</span> <span class="ch">=</span><span class="st"> src</span></span>
<span id="cb282-7"><a href="#cb282-7" aria-hidden="true" tabindex="-1"></a><span class="dt">INC_DIR</span> <span class="ch">=</span><span class="st"> include</span></span>
<span id="cb282-8"><a href="#cb282-8" aria-hidden="true" tabindex="-1"></a><span class="dt">UILD_DIR</span> <span class="ch">=</span><span class="st"> build</span></span>
<span id="cb282-9"><a href="#cb282-9" aria-hidden="true" tabindex="-1"></a><span class="dt">IN_DIR</span> <span class="ch">=</span><span class="st"> bin</span></span>
<span id="cb282-10"><a href="#cb282-10" aria-hidden="true" tabindex="-1"></a><span class="dt">LI_DIR</span> <span class="ch">=</span><span class="st"> lib</span></span>
<span id="cb282-11"><a href="#cb282-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb282-12"><a href="#cb282-12" aria-hidden="true" tabindex="-1"></a><span class="co"># コンパイラ設定</span></span>
<span id="cb282-13"><a href="#cb282-13" aria-hidden="true" tabindex="-1"></a><span class="dt">CC</span> <span class="ch">=</span><span class="st"> gcc</span></span>
<span id="cb282-14"><a href="#cb282-14" aria-hidden="true" tabindex="-1"></a><span class="dt">CLAGS</span> <span class="ch">=</span><span class="st"> -std=c90 -Wall -Wextra -pedantic</span></span>
<span id="cb282-15"><a href="#cb282-15" aria-hidden="true" tabindex="-1"></a><span class="dt">INCLUDS</span> <span class="ch">=</span><span class="st"> -I</span><span class="ch">$(</span><span class="dt">INC_DIR</span><span class="ch">)</span></span>
<span id="cb282-16"><a href="#cb282-16" aria-hidden="true" tabindex="-1"></a><span class="dt">LIS</span> <span class="ch">=</span><span class="st"> -lm</span></span>
<span id="cb282-17"><a href="#cb282-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb282-18"><a href="#cb282-18" aria-hidden="true" tabindex="-1"></a><span class="co"># ビルドモード別設定</span></span>
<span id="cb282-19"><a href="#cb282-19" aria-hidden="true" tabindex="-1"></a><span class="cf">ifdef</span> DUG</span>
<span id="cb282-20"><a href="#cb282-20" aria-hidden="true" tabindex="-1"></a>    <span class="dt">CLAGS</span> <span class="ch">+=</span><span class="st"> -g -DDUG -O</span></span>
<span id="cb282-21"><a href="#cb282-21" aria-hidden="true" tabindex="-1"></a>    <span class="dt">UILD_TYP</span> <span class="ch">=</span><span class="st"> debug</span></span>
<span id="cb282-22"><a href="#cb282-22" aria-hidden="true" tabindex="-1"></a><span class="cf">else</span></span>
<span id="cb282-23"><a href="#cb282-23" aria-hidden="true" tabindex="-1"></a>    <span class="dt">CLAGS</span> <span class="ch">+=</span><span class="st"> -O -DNDUG</span></span>
<span id="cb282-24"><a href="#cb282-24" aria-hidden="true" tabindex="-1"></a>    <span class="dt">UILD_TYP</span> <span class="ch">=</span><span class="st"> release</span></span>
<span id="cb282-25"><a href="#cb282-25" aria-hidden="true" tabindex="-1"></a><span class="cf">endif</span></span>
<span id="cb282-26"><a href="#cb282-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb282-27"><a href="#cb282-27" aria-hidden="true" tabindex="-1"></a><span class="cf">ifdef</span> PROIL</span>
<span id="cb282-28"><a href="#cb282-28" aria-hidden="true" tabindex="-1"></a>    <span class="dt">CLAGS</span> <span class="ch">+=</span><span class="st"> -pg</span></span>
<span id="cb282-29"><a href="#cb282-29" aria-hidden="true" tabindex="-1"></a>    <span class="dt">LIS</span> <span class="ch">+=</span><span class="st"> -pg</span></span>
<span id="cb282-30"><a href="#cb282-30" aria-hidden="true" tabindex="-1"></a><span class="cf">endif</span></span>
<span id="cb282-31"><a href="#cb282-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb282-32"><a href="#cb282-32" aria-hidden="true" tabindex="-1"></a><span class="co"># ソースファイルの自動検出</span></span>
<span id="cb282-33"><a href="#cb282-33" aria-hidden="true" tabindex="-1"></a><span class="dt">SOURCS</span> <span class="ch">=</span><span class="st"> </span><span class="ch">$(</span><span class="kw">wildcard</span><span class="st"> </span><span class="ch">$(</span><span class="dt">SRC_DIR</span><span class="ch">)</span><span class="st">/*.c</span><span class="ch">)</span></span>
<span id="cb282-34"><a href="#cb282-34" aria-hidden="true" tabindex="-1"></a><span class="dt">OJCTS</span> <span class="ch">=</span><span class="st"> </span><span class="ch">$(</span><span class="dt">SOURCS</span><span class="kw">:</span><span class="ch">$(</span><span class="dt">SRC_DIR</span><span class="ch">)</span><span class="ss">/%.c</span><span class="kw">=</span><span class="ch">$(</span><span class="dt">UILD_DIR</span><span class="ch">)</span><span class="ss">/%.o</span><span class="ch">)</span></span>
<span id="cb282-35"><a href="#cb282-35" aria-hidden="true" tabindex="-1"></a><span class="dt">DPS</span> <span class="ch">=</span><span class="st"> </span><span class="ch">$(</span><span class="dt">OJCTS</span><span class="kw">:</span><span class="ss">.o</span><span class="kw">=</span><span class="ss">.d</span><span class="ch">)</span></span>
<span id="cb282-36"><a href="#cb282-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb282-37"><a href="#cb282-37" aria-hidden="true" tabindex="-1"></a><span class="co"># ターゲット名</span></span>
<span id="cb282-38"><a href="#cb282-38" aria-hidden="true" tabindex="-1"></a><span class="dt">TARGT</span> <span class="ch">=</span><span class="st"> </span><span class="ch">$(</span><span class="dt">IN_DIR</span><span class="ch">)</span><span class="st">/</span><span class="ch">$(</span><span class="dt">PROJCT_NAM</span><span class="ch">)</span></span>
<span id="cb282-39"><a href="#cb282-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb282-40"><a href="#cb282-40" aria-hidden="true" tabindex="-1"></a><span class="co"># デフォルトターゲット</span></span>
<span id="cb282-41"><a href="#cb282-41" aria-hidden="true" tabindex="-1"></a><span class="dv">all:</span><span class="dt"> </span><span class="ch">$(</span><span class="dt">TARGT</span><span class="ch">)</span></span>
<span id="cb282-42"><a href="#cb282-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb282-43"><a href="#cb282-43" aria-hidden="true" tabindex="-1"></a><span class="co"># ディレクトリ作成</span></span>
<span id="cb282-44"><a href="#cb282-44" aria-hidden="true" tabindex="-1"></a><span class="dv">$(UILD_DIR) $(IN_DIR) $(LI_DIR):</span></span>
<span id="cb282-45"><a href="#cb282-45" aria-hidden="true" tabindex="-1"></a><span class="er">    </span>mkdir -p <span class="ch">$@</span></span>
<span id="cb282-46"><a href="#cb282-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb282-47"><a href="#cb282-47" aria-hidden="true" tabindex="-1"></a><span class="co"># 実行ファイル作成</span></span>
<span id="cb282-48"><a href="#cb282-48" aria-hidden="true" tabindex="-1"></a><span class="dv">$(TARGT):</span><span class="dt"> </span><span class="ch">$(</span><span class="dt">OJCTS</span><span class="ch">)</span><span class="dt"> | </span><span class="ch">$(</span><span class="dt">IN_DIR</span><span class="ch">)</span></span>
<span id="cb282-49"><a href="#cb282-49" aria-hidden="true" tabindex="-1"></a><span class="er">    </span><span class="ch">$(</span><span class="dt">CC</span><span class="ch">)</span> <span class="ch">$(</span><span class="dt">OJCTS</span><span class="ch">)</span> <span class="ch">$(</span><span class="dt">LIS</span><span class="ch">)</span> -o <span class="ch">$@</span></span>
<span id="cb282-50"><a href="#cb282-50" aria-hidden="true" tabindex="-1"></a>    <span class="ch">@</span><span class="fu">echo </span><span class="st">&quot;ビルド完了: </span><span class="ch">$@</span><span class="st"> (</span><span class="ch">$(</span><span class="dt">UILD_TYP</span><span class="ch">)</span><span class="st">)&quot;</span></span>
<span id="cb282-51"><a href="#cb282-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb282-52"><a href="#cb282-52" aria-hidden="true" tabindex="-1"></a><span class="co"># オブジェクトファイル作成（依存関係付き）</span></span>
<span id="cb282-53"><a href="#cb282-53" aria-hidden="true" tabindex="-1"></a><span class="dv">$(UILD_DIR)/%.o:</span><span class="dt"> </span><span class="ch">$(</span><span class="dt">SRC_DIR</span><span class="ch">)</span><span class="dt">/%.c | </span><span class="ch">$(</span><span class="dt">UILD_DIR</span><span class="ch">)</span></span>
<span id="cb282-54"><a href="#cb282-54" aria-hidden="true" tabindex="-1"></a><span class="er">    </span><span class="ch">$(</span><span class="dt">CC</span><span class="ch">)</span> <span class="ch">$(</span><span class="dt">CLAGS</span><span class="ch">)</span> <span class="ch">$(</span><span class="dt">INCLUDS</span><span class="ch">)</span> -MMD -MP -c <span class="ch">$&lt;</span> -o <span class="ch">$@</span></span>
<span id="cb282-55"><a href="#cb282-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb282-56"><a href="#cb282-56" aria-hidden="true" tabindex="-1"></a><span class="co"># 依存関係ファイルをインクルード</span></span>
<span id="cb282-57"><a href="#cb282-57" aria-hidden="true" tabindex="-1"></a><span class="kw">-include</span> <span class="ch">$(</span><span class="dt">DPS</span><span class="ch">)</span></span>
<span id="cb282-58"><a href="#cb282-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb282-59"><a href="#cb282-59" aria-hidden="true" tabindex="-1"></a><span class="co"># デバッグビルド</span></span>
<span id="cb282-60"><a href="#cb282-60" aria-hidden="true" tabindex="-1"></a><span class="dv">debug:</span></span>
<span id="cb282-61"><a href="#cb282-61" aria-hidden="true" tabindex="-1"></a><span class="er">    </span><span class="ch">$(</span><span class="dt">MAK</span><span class="ch">)</span> DUG=</span>
<span id="cb282-62"><a href="#cb282-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb282-63"><a href="#cb282-63" aria-hidden="true" tabindex="-1"></a><span class="co"># リリースビルド</span></span>
<span id="cb282-64"><a href="#cb282-64" aria-hidden="true" tabindex="-1"></a><span class="dv">release:</span></span>
<span id="cb282-65"><a href="#cb282-65" aria-hidden="true" tabindex="-1"></a><span class="er">    </span><span class="ch">$(</span><span class="dt">MAK</span><span class="ch">)</span></span>
<span id="cb282-66"><a href="#cb282-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb282-67"><a href="#cb282-67" aria-hidden="true" tabindex="-1"></a><span class="co"># プロファイルビルド</span></span>
<span id="cb282-68"><a href="#cb282-68" aria-hidden="true" tabindex="-1"></a><span class="dv">profile:</span></span>
<span id="cb282-69"><a href="#cb282-69" aria-hidden="true" tabindex="-1"></a><span class="er">    </span><span class="ch">$(</span><span class="dt">MAK</span><span class="ch">)</span> PROIL=</span>
<span id="cb282-70"><a href="#cb282-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb282-71"><a href="#cb282-71" aria-hidden="true" tabindex="-1"></a><span class="co"># テスト実行</span></span>
<span id="cb282-72"><a href="#cb282-72" aria-hidden="true" tabindex="-1"></a><span class="dv">test:</span><span class="dt"> </span><span class="ch">$(</span><span class="dt">TARGT</span><span class="ch">)</span></span>
<span id="cb282-73"><a href="#cb282-73" aria-hidden="true" tabindex="-1"></a><span class="er">    </span><span class="ch">@</span><span class="fu">echo </span><span class="st">&quot;テスト実行中...&quot;</span></span>
<span id="cb282-74"><a href="#cb282-74" aria-hidden="true" tabindex="-1"></a>    ./<span class="ch">$(</span><span class="dt">TARGT</span><span class="ch">)</span> --test</span>
<span id="cb282-75"><a href="#cb282-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb282-76"><a href="#cb282-76" aria-hidden="true" tabindex="-1"></a><span class="co"># インストール</span></span>
<span id="cb282-77"><a href="#cb282-77" aria-hidden="true" tabindex="-1"></a><span class="dv">install:</span><span class="dt"> </span><span class="ch">$(</span><span class="dt">TARGT</span><span class="ch">)</span></span>
<span id="cb282-78"><a href="#cb282-78" aria-hidden="true" tabindex="-1"></a><span class="er">    </span>sudo cp <span class="ch">$(</span><span class="dt">TARGT</span><span class="ch">)</span> /sr/local/bin/</span>
<span id="cb282-79"><a href="#cb282-79" aria-hidden="true" tabindex="-1"></a>    sudo mkdir -p /sr/local/share/<span class="ch">$(</span><span class="dt">PROJCT_NAM</span><span class="ch">)</span></span>
<span id="cb282-80"><a href="#cb282-80" aria-hidden="true" tabindex="-1"></a>    sudo cp -r config /sr/local/share/<span class="ch">$(</span><span class="dt">PROJCT_NAM</span><span class="ch">)</span>/</span>
<span id="cb282-81"><a href="#cb282-81" aria-hidden="true" tabindex="-1"></a>    <span class="ch">@</span><span class="fu">echo </span><span class="st">&quot;インストール完了&quot;</span></span>
<span id="cb282-82"><a href="#cb282-82" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb282-83"><a href="#cb282-83" aria-hidden="true" tabindex="-1"></a><span class="co"># アンインストール</span></span>
<span id="cb282-84"><a href="#cb282-84" aria-hidden="true" tabindex="-1"></a><span class="dv">ninstall:</span></span>
<span id="cb282-85"><a href="#cb282-85" aria-hidden="true" tabindex="-1"></a><span class="er">    </span>sudo rm -f /sr/local/bin/<span class="ch">$(</span><span class="dt">PROJCT_NAM</span><span class="ch">)</span></span>
<span id="cb282-86"><a href="#cb282-86" aria-hidden="true" tabindex="-1"></a>    sudo rm -rf /sr/local/share/<span class="ch">$(</span><span class="dt">PROJCT_NAM</span><span class="ch">)</span></span>
<span id="cb282-87"><a href="#cb282-87" aria-hidden="true" tabindex="-1"></a>    <span class="ch">@</span><span class="fu">echo </span><span class="st">&quot;アンインストール完了&quot;</span></span>
<span id="cb282-88"><a href="#cb282-88" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb282-89"><a href="#cb282-89" aria-hidden="true" tabindex="-1"></a><span class="co"># パッケージ作成</span></span>
<span id="cb282-90"><a href="#cb282-90" aria-hidden="true" tabindex="-1"></a><span class="dv">package:</span><span class="dt"> clean</span></span>
<span id="cb282-91"><a href="#cb282-91" aria-hidden="true" tabindex="-1"></a><span class="er">    </span>tar -czf <span class="ch">$(</span><span class="dt">PROJCT_NAM</span><span class="ch">)</span>-<span class="ch">$(</span><span class="dt">VRSION</span><span class="ch">)</span>.tar.gz </span>
<span id="cb282-92"><a href="#cb282-92" aria-hidden="true" tabindex="-1"></a>        <span class="ch">$(</span><span class="dt">SRC_DIR</span><span class="ch">)</span> <span class="ch">$(</span><span class="dt">INC_DIR</span><span class="ch">)</span> Makefile README.md</span>
<span id="cb282-93"><a href="#cb282-93" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb282-94"><a href="#cb282-94" aria-hidden="true" tabindex="-1"></a><span class="co"># クリーンアップ</span></span>
<span id="cb282-95"><a href="#cb282-95" aria-hidden="true" tabindex="-1"></a><span class="dv">clean:</span></span>
<span id="cb282-96"><a href="#cb282-96" aria-hidden="true" tabindex="-1"></a><span class="er">    </span>rm -rf <span class="ch">$(</span><span class="dt">UILD_DIR</span><span class="ch">)</span> <span class="ch">$(</span><span class="dt">IN_DIR</span><span class="ch">)</span></span>
<span id="cb282-97"><a href="#cb282-97" aria-hidden="true" tabindex="-1"></a>    <span class="ch">@</span><span class="fu">echo </span><span class="st">&quot;クリーンアップ完了&quot;</span></span>
<span id="cb282-98"><a href="#cb282-98" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb282-99"><a href="#cb282-99" aria-hidden="true" tabindex="-1"></a><span class="co"># 全削除</span></span>
<span id="cb282-100"><a href="#cb282-100" aria-hidden="true" tabindex="-1"></a><span class="dv">distclean:</span><span class="dt"> clean</span></span>
<span id="cb282-101"><a href="#cb282-101" aria-hidden="true" tabindex="-1"></a><span class="er">    </span>rm -rf <span class="ch">$(</span><span class="dt">LI_DIR</span><span class="ch">)</span></span>
<span id="cb282-102"><a href="#cb282-102" aria-hidden="true" tabindex="-1"></a>    rm -f *.tar.gz</span>
<span id="cb282-103"><a href="#cb282-103" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb282-104"><a href="#cb282-104" aria-hidden="true" tabindex="-1"></a><span class="co"># ヘルプ</span></span>
<span id="cb282-105"><a href="#cb282-105" aria-hidden="true" tabindex="-1"></a><span class="dv">help:</span></span>
<span id="cb282-106"><a href="#cb282-106" aria-hidden="true" tabindex="-1"></a><span class="er">    </span><span class="ch">@</span><span class="fu">echo </span><span class="st">&quot;利用可能なターゲット:&quot;</span></span>
<span id="cb282-107"><a href="#cb282-107" aria-hidden="true" tabindex="-1"></a>    <span class="ch">@</span><span class="fu">echo </span><span class="st">&quot;  all       - リリースビルド&quot;</span></span>
<span id="cb282-108"><a href="#cb282-108" aria-hidden="true" tabindex="-1"></a>    <span class="ch">@</span><span class="fu">echo </span><span class="st">&quot;  debug     - デバッグビルド&quot;</span></span>
<span id="cb282-109"><a href="#cb282-109" aria-hidden="true" tabindex="-1"></a>    <span class="ch">@</span><span class="fu">echo </span><span class="st">&quot;  release   - リリースビルド&quot;</span></span>
<span id="cb282-110"><a href="#cb282-110" aria-hidden="true" tabindex="-1"></a>    <span class="ch">@</span><span class="fu">echo </span><span class="st">&quot;  profile   - プロファイリングビルド&quot;</span></span>
<span id="cb282-111"><a href="#cb282-111" aria-hidden="true" tabindex="-1"></a>    <span class="ch">@</span><span class="fu">echo </span><span class="st">&quot;  test      - テスト実行&quot;</span></span>
<span id="cb282-112"><a href="#cb282-112" aria-hidden="true" tabindex="-1"></a>    <span class="ch">@</span><span class="fu">echo </span><span class="st">&quot;  install   - システムにインストール&quot;</span></span>
<span id="cb282-113"><a href="#cb282-113" aria-hidden="true" tabindex="-1"></a>    <span class="ch">@</span><span class="fu">echo </span><span class="st">&quot;  ninstall - アンインストール&quot;</span></span>
<span id="cb282-114"><a href="#cb282-114" aria-hidden="true" tabindex="-1"></a>    <span class="ch">@</span><span class="fu">echo </span><span class="st">&quot;  package   - パッケージ作成&quot;</span></span>
<span id="cb282-115"><a href="#cb282-115" aria-hidden="true" tabindex="-1"></a>    <span class="ch">@</span><span class="fu">echo </span><span class="st">&quot;  clean     - ビルドファイル削除&quot;</span></span>
<span id="cb282-116"><a href="#cb282-116" aria-hidden="true" tabindex="-1"></a>    <span class="ch">@</span><span class="fu">echo </span><span class="st">&quot;  distclean - 全ファイル削除&quot;</span></span>
<span id="cb282-117"><a href="#cb282-117" aria-hidden="true" tabindex="-1"></a>    <span class="ch">@</span><span class="fu">echo </span><span class="st">&quot;  help      - このヘルプ&quot;</span></span>
<span id="cb282-118"><a href="#cb282-118" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb282-119"><a href="#cb282-119" aria-hidden="true" tabindex="-1"></a><span class="ot">.PHONY:</span><span class="dt"> all debug release profile test install ninstall package clean distclean help</span></span></code></pre></div>
<h2 id="サンプルコード-19">サンプルコード</h2>
<h3 id="分割コンパイルの基本-1">分割コンパイルの基本</h3>
<p>プログラムファイル: <code>examples/multi_file_basic/</code></p>
<p>複数ファイルに分割した基本的なプログラムを学習します。</p>
<h3 id="ライブラリ作成">ライブラリ作成</h3>
<p>プログラムファイル: <code>examples/library_creation/</code></p>
<p>静的ライブラリの作成と使用方法を学習します。</p>
<h3 id="実践プロジェクト">実践プロジェクト</h3>
<p>プログラムファイル: <code>examples/file_manager/</code></p>
<p>統合された実践的なプロジェクトを学習します。</p>
<h3 id="コンパイルと実行-11">コンパイルと実行</h3>
<div class="sourceCode" id="cb283"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb283-1"><a href="#cb283-1" aria-hidden="true" tabindex="-1"></a><span class="co"># プロジェクトディレクトリに移動</span></span>
<span id="cb283-2"><a href="#cb283-2" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> examples/multi_file_basic</span>
<span id="cb283-3"><a href="#cb283-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb283-4"><a href="#cb283-4" aria-hidden="true" tabindex="-1"></a><span class="co"># デバッグビルド</span></span>
<span id="cb283-5"><a href="#cb283-5" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> debug</span>
<span id="cb283-6"><a href="#cb283-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb283-7"><a href="#cb283-7" aria-hidden="true" tabindex="-1"></a><span class="co"># リリースビルド</span></span>
<span id="cb283-8"><a href="#cb283-8" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> release</span>
<span id="cb283-9"><a href="#cb283-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb283-10"><a href="#cb283-10" aria-hidden="true" tabindex="-1"></a><span class="co"># 実行</span></span>
<span id="cb283-11"><a href="#cb283-11" aria-hidden="true" tabindex="-1"></a><span class="ex">./bin/program_name</span></span></code></pre></div>
<h2 id="演習課題-10">演習課題</h2>
<h3 id="基礎問題-10">基礎問題</h3>
<p>. <strong>分割コンパイル</strong> -
簡単な計算機プログラムを複数ファイルに分割し、適切なヘッダファイルを作成してください</p>
<p>. <strong>extern宣言</strong> -
グローバル変数を使ってアプリケーションの状態を管理するプログラムを作成してください</p>
<p>. <strong>マクロ活用</strong> -
デバッグ用マクロとリリース用マクロを使い分けるプログラムを実装してください</p>
<h3 id="応用問題-10">応用問題</h3>
<p>. <strong>モジュール設計</strong> -
データ構造（スタック、キューなど）を独立したモジュールとして実装してください</p>
<p>. <strong>設定システム</strong> -
設定ファイルから値を読み込み、プログラムの動作を制御するシステムを作成してください</p>
<p>. <strong>ログシステム</strong> -
レベル別ログ出力機能を持2つライブラリを作成してください</p>
<h3 id="発展問題-5">発展問題</h3>
<p>. <strong>ライブラリ作成</strong> -
汎用的な文字列処理ライブラリを作成し、テストプログラムで動作確認してください</p>
<p>. <strong>プラグインシステム</strong> -
実行時に機能を追加できるプラグイン機能を実装してください</p>
<p>. <strong>プロジェクト統合</strong> -
これまでの章で学んだ全ての技術を統合した実用的なアプリケーションを作成してください</p>
<h2 id="コンパイル方法-11">コンパイル方法</h2>
<p>この章では以下のMakefileを使用してコンパイルができます：</p>
<div class="sourceCode" id="cb284"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb284-1"><a href="#cb284-1" aria-hidden="true" tabindex="-1"></a><span class="co"># デバッグビルド</span></span>
<span id="cb284-2"><a href="#cb284-2" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> debug</span>
<span id="cb284-3"><a href="#cb284-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb284-4"><a href="#cb284-4" aria-hidden="true" tabindex="-1"></a><span class="co"># リリースビルド</span></span>
<span id="cb284-5"><a href="#cb284-5" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> release</span>
<span id="cb284-6"><a href="#cb284-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb284-7"><a href="#cb284-7" aria-hidden="true" tabindex="-1"></a><span class="co"># ライブラリ作成</span></span>
<span id="cb284-8"><a href="#cb284-8" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> library</span>
<span id="cb284-9"><a href="#cb284-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb284-10"><a href="#cb284-10" aria-hidden="true" tabindex="-1"></a><span class="co"># テスト実行</span></span>
<span id="cb284-11"><a href="#cb284-11" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> test</span>
<span id="cb284-12"><a href="#cb284-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb284-13"><a href="#cb284-13" aria-hidden="true" tabindex="-1"></a><span class="co"># インストール</span></span>
<span id="cb284-14"><a href="#cb284-14" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> install</span>
<span id="cb284-15"><a href="#cb284-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb284-16"><a href="#cb284-16" aria-hidden="true" tabindex="-1"></a><span class="co"># クリーンアップ</span></span>
<span id="cb284-17"><a href="#cb284-17" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> clean</span></code></pre></div>
<h2 id="規格による違い-10">規格による違い</h2>
<h3 id="c90での制限事項-9">C90での制限事項</h3>
<ul>
<li>関数プロトタイプ宣言が必須</li>
<li>変数宣言はブロックの先頭のみ</li>
<li>C++スタイルコメント（//）は不可</li>
</ul>
<h3 id="c99以降の拡張-9">C99以降の拡張</h3>
<ul>
<li>inline関数サポート</li>
<li>可変長配列</li>
<li>C++スタイルコメント許可</li>
<li>新しいプリプロセッサ機能</li>
</ul>
<h2 id="よくある間違い-8">よくある間違い</h2>
<h3 id="ヘッダファイルのインクルードガード忘れ">.
ヘッダファイルのインクルードガード忘れ</h3>
<div class="sourceCode" id="cb285"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb285-1"><a href="#cb285-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* NG: インクルードガードなし */</span></span>
<span id="cb285-2"><a href="#cb285-2" aria-hidden="true" tabindex="-1"></a><span class="co">/* myheader.h */</span></span>
<span id="cb285-3"><a href="#cb285-3" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> my_function<span class="op">(</span><span class="dt">void</span><span class="op">);</span></span>
<span id="cb285-4"><a href="#cb285-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb285-5"><a href="#cb285-5" aria-hidden="true" tabindex="-1"></a><span class="co">/* OK: インクルードガード付き */</span></span>
<span id="cb285-6"><a href="#cb285-6" aria-hidden="true" tabindex="-1"></a><span class="pp">#ifndef MYHADR_H</span></span>
<span id="cb285-7"><a href="#cb285-7" aria-hidden="true" tabindex="-1"></a><span class="pp">#define MYHADR_H</span></span>
<span id="cb285-8"><a href="#cb285-8" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> my_function<span class="op">(</span><span class="dt">void</span><span class="op">);</span></span>
<span id="cb285-9"><a href="#cb285-9" aria-hidden="true" tabindex="-1"></a><span class="pp">#endif </span><span class="co">/* MYHADR_H */</span></span></code></pre></div>
<h3 id="extern宣言と定義の混同">. extern宣言と定義の混同</h3>
<div class="sourceCode" id="cb286"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb286-1"><a href="#cb286-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* NG: ヘッダファイルで変数定義 */</span></span>
<span id="cb286-2"><a href="#cb286-2" aria-hidden="true" tabindex="-1"></a><span class="co">/* header.h */</span></span>
<span id="cb286-3"><a href="#cb286-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> global_var <span class="op">=</span> <span class="op">;</span>  <span class="co">/* 複数のソースファイルでエラー */</span></span>
<span id="cb286-4"><a href="#cb286-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb286-5"><a href="#cb286-5" aria-hidden="true" tabindex="-1"></a><span class="co">/* OK: 適切な分離 */</span></span>
<span id="cb286-6"><a href="#cb286-6" aria-hidden="true" tabindex="-1"></a><span class="co">/* header.h */</span></span>
<span id="cb286-7"><a href="#cb286-7" aria-hidden="true" tabindex="-1"></a><span class="kw">extern</span> <span class="dt">int</span> global_var<span class="op">;</span>  <span class="co">/* 宣言 */</span></span>
<span id="cb286-8"><a href="#cb286-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb286-9"><a href="#cb286-9" aria-hidden="true" tabindex="-1"></a><span class="co">/* sorce.c */</span></span>
<span id="cb286-10"><a href="#cb286-10" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> global_var <span class="op">=</span> <span class="op">;</span>     <span class="co">/* 定義 */</span></span></code></pre></div>
<h3 id="循環インクルード">. 循環インクルード</h3>
<div class="sourceCode" id="cb287"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb287-1"><a href="#cb287-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* NG: 循環インクルード */</span></span>
<span id="cb287-2"><a href="#cb287-2" aria-hidden="true" tabindex="-1"></a><span class="co">/* a.h */</span></span>
<span id="cb287-3"><a href="#cb287-3" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&quot;b.h&quot;</span></span>
<span id="cb287-4"><a href="#cb287-4" aria-hidden="true" tabindex="-1"></a><span class="kw">typedef</span> strct A  strct  <span class="op">*</span>b<span class="op">;</span>  A<span class="op">;</span></span>
<span id="cb287-5"><a href="#cb287-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb287-6"><a href="#cb287-6" aria-hidden="true" tabindex="-1"></a><span class="co">/* b.h */</span></span>
<span id="cb287-7"><a href="#cb287-7" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&quot;a.h&quot;</span></span>
<span id="cb287-8"><a href="#cb287-8" aria-hidden="true" tabindex="-1"></a><span class="kw">typedef</span> strct   strct A <span class="op">*</span>a<span class="op">;</span>  <span class="op">;</span></span>
<span id="cb287-9"><a href="#cb287-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb287-10"><a href="#cb287-10" aria-hidden="true" tabindex="-1"></a><span class="co">/* OK: 前方宣言使用 */</span></span>
<span id="cb287-11"><a href="#cb287-11" aria-hidden="true" tabindex="-1"></a><span class="co">/* a.h */</span></span>
<span id="cb287-12"><a href="#cb287-12" aria-hidden="true" tabindex="-1"></a>strct <span class="op">;</span>  <span class="co">/* 前方宣言 */</span></span>
<span id="cb287-13"><a href="#cb287-13" aria-hidden="true" tabindex="-1"></a><span class="kw">typedef</span> strct A  strct  <span class="op">*</span>b<span class="op">;</span>  A<span class="op">;</span></span>
<span id="cb287-14"><a href="#cb287-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb287-15"><a href="#cb287-15" aria-hidden="true" tabindex="-1"></a><span class="co">/* b.h */</span></span>
<span id="cb287-16"><a href="#cb287-16" aria-hidden="true" tabindex="-1"></a>strct A<span class="op">;</span>  <span class="co">/* 前方宣言 */</span></span>
<span id="cb287-17"><a href="#cb287-17" aria-hidden="true" tabindex="-1"></a><span class="kw">typedef</span> strct   strct A <span class="op">*</span>a<span class="op">;</span>  <span class="op">;</span></span></code></pre></div>
<h2 id="おめでとうございます">おめでとうございます！</h2>
<p>C言語学習教材の全章を完了いたしました！</p>
<p>この教材を通じて学習した内容：</p>
<h3 id="学習完了項目">学習完了項目</h3>
<p>. <strong>基礎知識</strong> - C言語の基本概念と環境構築 .
<strong>データ操作</strong> - 変数、データ型、演算子 .
<strong>制御構造</strong> - 条件分岐とループ処理 .
<strong>データ構造</strong> - 配列と文字列操作 .
<strong>関数設計</strong> - 関数の定義と活用 .
<strong>メモリ管理</strong> - ポインタの理解と活用 .
<strong>構造化</strong> - 構造体を使ったデータ管理 .
<strong>高度な技術</strong> - 関数ポインタと動的プログラミング 9.
<strong>プロジェクト構築</strong> - 複数ファイル開発と発展技術</p>
<h3 id="次のステップ-1">次のステップ</h3>
<p>これからのC言語学習では： - <strong>実践プロジェクト</strong> -
より大規模なアプリケーション開発 - <strong>アルゴリズム学習</strong> -
データ構造とアルゴリズムの実装 - <strong>システムプログラミング</strong>
- OSとの連携やネットワークプログラミング - <strong>組み込み開発</strong>
- マイコンやIoTデバイスの開発 - <strong>他言語への発展</strong> -
C++、Rst、Goなどへの拡張</p>
<h3 id="参考資料-11">参考資料</h3>
<ul>
<li><a href="https://www.iso.org/standard/.html">C言語規格書（ISO/IC
999）</a></li>
<li><a href="https://www.gnu.org/software/libc/manual/">GNU Cライブラリ
Docmentation</a></li>
<li><a
href="https://www.amazon.com/xpert-Programming-Peter-van-Linden/dp/9">xpert
C Programming</a></li>
</ul>
<p>頑張って学習を継続してください！</p>
<h2 id="サンプルコード-20">サンプルコード</h2>
<h3 id="memory_optimization.c">memory_optimization.c</h3>
<div class="sourceCode" id="cb288"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb288-1"><a href="#cb288-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* メモリ管理の最適化技法 */</span></span>
<span id="cb288-2"><a href="#cb288-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb288-3"><a href="#cb288-3" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdlib.h&gt;</span></span>
<span id="cb288-4"><a href="#cb288-4" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;string.h&gt;</span></span>
<span id="cb288-5"><a href="#cb288-5" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;assert.h&gt;</span></span>
<span id="cb288-6"><a href="#cb288-6" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;time.h&gt;</span></span>
<span id="cb288-7"><a href="#cb288-7" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stddef.h&gt;</span></span>
<span id="cb288-8"><a href="#cb288-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-9"><a href="#cb288-9" aria-hidden="true" tabindex="-1"></a><span class="co">/* Cの_Alignofが利用できない場合の代替定義 */</span></span>
<span id="cb288-10"><a href="#cb288-10" aria-hidden="true" tabindex="-1"></a><span class="pp">#ifndef _Alignof</span></span>
<span id="cb288-11"><a href="#cb288-11" aria-hidden="true" tabindex="-1"></a><span class="pp">#define _Alignof</span><span class="op">(</span><span class="pp">type</span><span class="op">)</span><span class="pp"> offsetof</span><span class="op">(</span><span class="kw">struct</span><span class="pp"> </span><span class="op">{</span><span class="pp"> </span><span class="dt">char</span><span class="pp"> c</span><span class="op">;</span><span class="pp"> type x</span><span class="op">;</span><span class="pp"> </span><span class="op">},</span><span class="pp"> x</span><span class="op">)</span></span>
<span id="cb288-12"><a href="#cb288-12" aria-hidden="true" tabindex="-1"></a><span class="pp">#endif</span></span>
<span id="cb288-13"><a href="#cb288-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-14"><a href="#cb288-14" aria-hidden="true" tabindex="-1"></a><span class="co">/* メモリプールのブロックサイズ */</span></span>
<span id="cb288-15"><a href="#cb288-15" aria-hidden="true" tabindex="-1"></a><span class="pp">#define POOL_BLOCK_SIZE </span><span class="dv">1024</span></span>
<span id="cb288-16"><a href="#cb288-16" aria-hidden="true" tabindex="-1"></a><span class="pp">#define MAX_POOL_BLOCKS </span><span class="dv">10</span></span>
<span id="cb288-17"><a href="#cb288-17" aria-hidden="true" tabindex="-1"></a><span class="pp">#define SMALL_OBJECT_SIZE </span><span class="dv">64</span></span>
<span id="cb288-18"><a href="#cb288-18" aria-hidden="true" tabindex="-1"></a><span class="pp">#define MEDIUM_OBJECT_SIZE </span><span class="dv">256</span></span>
<span id="cb288-19"><a href="#cb288-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-20"><a href="#cb288-20" aria-hidden="true" tabindex="-1"></a><span class="co">/* メモリプール構造体 */</span></span>
<span id="cb288-21"><a href="#cb288-21" aria-hidden="true" tabindex="-1"></a><span class="kw">typedef</span> <span class="kw">struct</span> MemoryBlock</span>
<span id="cb288-22"><a href="#cb288-22" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb288-23"><a href="#cb288-23" aria-hidden="true" tabindex="-1"></a>    <span class="dt">void</span> <span class="op">*</span>data<span class="op">;</span></span>
<span id="cb288-24"><a href="#cb288-24" aria-hidden="true" tabindex="-1"></a>    <span class="dt">size_t</span> size<span class="op">;</span></span>
<span id="cb288-25"><a href="#cb288-25" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> is_free<span class="op">;</span></span>
<span id="cb288-26"><a href="#cb288-26" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> MemoryBlock <span class="op">*</span>next<span class="op">;</span></span>
<span id="cb288-27"><a href="#cb288-27" aria-hidden="true" tabindex="-1"></a><span class="op">}</span> MemoryBlock<span class="op">;</span></span>
<span id="cb288-28"><a href="#cb288-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-29"><a href="#cb288-29" aria-hidden="true" tabindex="-1"></a><span class="kw">typedef</span> <span class="kw">struct</span></span>
<span id="cb288-30"><a href="#cb288-30" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb288-31"><a href="#cb288-31" aria-hidden="true" tabindex="-1"></a>    MemoryBlock <span class="op">*</span>blocks<span class="op">;</span></span>
<span id="cb288-32"><a href="#cb288-32" aria-hidden="true" tabindex="-1"></a>    <span class="dt">size_t</span> total_size<span class="op">;</span></span>
<span id="cb288-33"><a href="#cb288-33" aria-hidden="true" tabindex="-1"></a>    <span class="dt">size_t</span> used_size<span class="op">;</span></span>
<span id="cb288-34"><a href="#cb288-34" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> num_blocks<span class="op">;</span></span>
<span id="cb288-35"><a href="#cb288-35" aria-hidden="true" tabindex="-1"></a><span class="op">}</span> MemoryPool<span class="op">;</span></span>
<span id="cb288-36"><a href="#cb288-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-37"><a href="#cb288-37" aria-hidden="true" tabindex="-1"></a><span class="co">/* スタックアロケーター */</span></span>
<span id="cb288-38"><a href="#cb288-38" aria-hidden="true" tabindex="-1"></a><span class="kw">typedef</span> <span class="kw">struct</span></span>
<span id="cb288-39"><a href="#cb288-39" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb288-40"><a href="#cb288-40" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> <span class="op">*</span>memory<span class="op">;</span></span>
<span id="cb288-41"><a href="#cb288-41" aria-hidden="true" tabindex="-1"></a>    <span class="dt">size_t</span> size<span class="op">;</span></span>
<span id="cb288-42"><a href="#cb288-42" aria-hidden="true" tabindex="-1"></a>    <span class="dt">size_t</span> offset<span class="op">;</span></span>
<span id="cb288-43"><a href="#cb288-43" aria-hidden="true" tabindex="-1"></a><span class="op">}</span> StackAllocator<span class="op">;</span></span>
<span id="cb288-44"><a href="#cb288-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-45"><a href="#cb288-45" aria-hidden="true" tabindex="-1"></a><span class="co">/* オブジェクトプール */</span></span>
<span id="cb288-46"><a href="#cb288-46" aria-hidden="true" tabindex="-1"></a><span class="kw">typedef</span> <span class="kw">struct</span> ObjectNode</span>
<span id="cb288-47"><a href="#cb288-47" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb288-48"><a href="#cb288-48" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> ObjectNode <span class="op">*</span>next<span class="op">;</span></span>
<span id="cb288-49"><a href="#cb288-49" aria-hidden="true" tabindex="-1"></a><span class="op">}</span> ObjectNode<span class="op">;</span></span>
<span id="cb288-50"><a href="#cb288-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-51"><a href="#cb288-51" aria-hidden="true" tabindex="-1"></a><span class="kw">typedef</span> <span class="kw">struct</span></span>
<span id="cb288-52"><a href="#cb288-52" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb288-53"><a href="#cb288-53" aria-hidden="true" tabindex="-1"></a>    ObjectNode <span class="op">*</span>free_list<span class="op">;</span></span>
<span id="cb288-54"><a href="#cb288-54" aria-hidden="true" tabindex="-1"></a>    <span class="dt">void</span> <span class="op">*</span>memory_chunk<span class="op">;</span></span>
<span id="cb288-55"><a href="#cb288-55" aria-hidden="true" tabindex="-1"></a>    <span class="dt">size_t</span> object_size<span class="op">;</span></span>
<span id="cb288-56"><a href="#cb288-56" aria-hidden="true" tabindex="-1"></a>    <span class="dt">size_t</span> capacity<span class="op">;</span></span>
<span id="cb288-57"><a href="#cb288-57" aria-hidden="true" tabindex="-1"></a>    <span class="dt">size_t</span> count<span class="op">;</span></span>
<span id="cb288-58"><a href="#cb288-58" aria-hidden="true" tabindex="-1"></a><span class="op">}</span> ObjectPool<span class="op">;</span></span>
<span id="cb288-59"><a href="#cb288-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-60"><a href="#cb288-60" aria-hidden="true" tabindex="-1"></a><span class="co">/* グローバルメモリプール */</span></span>
<span id="cb288-61"><a href="#cb288-61" aria-hidden="true" tabindex="-1"></a><span class="dt">static</span> MemoryPool g_memory_pool <span class="op">=</span> <span class="op">{</span>NULL<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">};</span></span>
<span id="cb288-62"><a href="#cb288-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-63"><a href="#cb288-63" aria-hidden="true" tabindex="-1"></a><span class="co">/* メモリ使用統計 */</span></span>
<span id="cb288-64"><a href="#cb288-64" aria-hidden="true" tabindex="-1"></a><span class="kw">typedef</span> <span class="kw">struct</span></span>
<span id="cb288-65"><a href="#cb288-65" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb288-66"><a href="#cb288-66" aria-hidden="true" tabindex="-1"></a>    <span class="dt">size_t</span> total_allocated<span class="op">;</span></span>
<span id="cb288-67"><a href="#cb288-67" aria-hidden="true" tabindex="-1"></a>    <span class="dt">size_t</span> total_freed<span class="op">;</span></span>
<span id="cb288-68"><a href="#cb288-68" aria-hidden="true" tabindex="-1"></a>    <span class="dt">size_t</span> peak_usage<span class="op">;</span></span>
<span id="cb288-69"><a href="#cb288-69" aria-hidden="true" tabindex="-1"></a>    <span class="dt">size_t</span> current_usage<span class="op">;</span></span>
<span id="cb288-70"><a href="#cb288-70" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> allocation_count<span class="op">;</span></span>
<span id="cb288-71"><a href="#cb288-71" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> free_count<span class="op">;</span></span>
<span id="cb288-72"><a href="#cb288-72" aria-hidden="true" tabindex="-1"></a><span class="op">}</span> MemoryStats<span class="op">;</span></span>
<span id="cb288-73"><a href="#cb288-73" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-74"><a href="#cb288-74" aria-hidden="true" tabindex="-1"></a><span class="dt">static</span> MemoryStats g_memory_stats <span class="op">=</span> <span class="op">{</span><span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">};</span></span>
<span id="cb288-75"><a href="#cb288-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-76"><a href="#cb288-76" aria-hidden="true" tabindex="-1"></a><span class="co">/* メモリプールの初期化 */</span></span>
<span id="cb288-77"><a href="#cb288-77" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> init_memory_pool<span class="op">(</span>MemoryPool <span class="op">*</span>pool<span class="op">,</span> <span class="dt">size_t</span> total_size<span class="op">)</span></span>
<span id="cb288-78"><a href="#cb288-78" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb288-79"><a href="#cb288-79" aria-hidden="true" tabindex="-1"></a>    pool<span class="op">-&gt;</span>blocks <span class="op">=</span> malloc<span class="op">(</span><span class="kw">sizeof</span><span class="op">(</span>MemoryBlock<span class="op">)</span> <span class="op">*</span> MAX_POOL_BLOCKS<span class="op">);</span></span>
<span id="cb288-80"><a href="#cb288-80" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(!</span>pool<span class="op">-&gt;</span>blocks<span class="op">)</span></span>
<span id="cb288-81"><a href="#cb288-81" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb288-82"><a href="#cb288-82" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;メモリプール初期化エラー: ブロック配列の確保に失敗</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb288-83"><a href="#cb288-83" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb288-84"><a href="#cb288-84" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb288-85"><a href="#cb288-85" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-86"><a href="#cb288-86" aria-hidden="true" tabindex="-1"></a>    pool<span class="op">-&gt;</span>total_size <span class="op">=</span> total_size<span class="op">;</span></span>
<span id="cb288-87"><a href="#cb288-87" aria-hidden="true" tabindex="-1"></a>    pool<span class="op">-&gt;</span>used_size <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb288-88"><a href="#cb288-88" aria-hidden="true" tabindex="-1"></a>    pool<span class="op">-&gt;</span>num_blocks <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb288-89"><a href="#cb288-89" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-90"><a href="#cb288-90" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 最初の大きなブロックを作成 */</span></span>
<span id="cb288-91"><a href="#cb288-91" aria-hidden="true" tabindex="-1"></a>    pool<span class="op">-&gt;</span>blocks<span class="op">[</span><span class="dv">0</span><span class="op">].</span>data <span class="op">=</span> malloc<span class="op">(</span>total_size<span class="op">);</span></span>
<span id="cb288-92"><a href="#cb288-92" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(!</span>pool<span class="op">-&gt;</span>blocks<span class="op">[</span><span class="dv">0</span><span class="op">].</span>data<span class="op">)</span></span>
<span id="cb288-93"><a href="#cb288-93" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb288-94"><a href="#cb288-94" aria-hidden="true" tabindex="-1"></a>        free<span class="op">(</span>pool<span class="op">-&gt;</span>blocks<span class="op">);</span></span>
<span id="cb288-95"><a href="#cb288-95" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;メモリプール初期化エラー: メモリブロックの確保に失敗</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb288-96"><a href="#cb288-96" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb288-97"><a href="#cb288-97" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb288-98"><a href="#cb288-98" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-99"><a href="#cb288-99" aria-hidden="true" tabindex="-1"></a>    pool<span class="op">-&gt;</span>blocks<span class="op">[</span><span class="dv">0</span><span class="op">].</span>size <span class="op">=</span> total_size<span class="op">;</span></span>
<span id="cb288-100"><a href="#cb288-100" aria-hidden="true" tabindex="-1"></a>    pool<span class="op">-&gt;</span>blocks<span class="op">[</span><span class="dv">0</span><span class="op">].</span>is_free <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb288-101"><a href="#cb288-101" aria-hidden="true" tabindex="-1"></a>    pool<span class="op">-&gt;</span>blocks<span class="op">[</span><span class="dv">0</span><span class="op">].</span>next <span class="op">=</span> NULL<span class="op">;</span></span>
<span id="cb288-102"><a href="#cb288-102" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-103"><a href="#cb288-103" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;メモリプール初期化完了: </span><span class="sc">%zu</span><span class="st"> バイト</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> total_size<span class="op">);</span></span>
<span id="cb288-104"><a href="#cb288-104" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb288-105"><a href="#cb288-105" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb288-106"><a href="#cb288-106" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-107"><a href="#cb288-107" aria-hidden="true" tabindex="-1"></a><span class="co">/* メモリプールからの割り当て */</span></span>
<span id="cb288-108"><a href="#cb288-108" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> <span class="op">*</span>pool_alloc<span class="op">(</span>MemoryPool <span class="op">*</span>pool<span class="op">,</span> <span class="dt">size_t</span> size<span class="op">)</span></span>
<span id="cb288-109"><a href="#cb288-109" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb288-110"><a href="#cb288-110" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb288-111"><a href="#cb288-111" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-112"><a href="#cb288-112" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 適切なサイズの空きブロックを検索 */</span></span>
<span id="cb288-113"><a href="#cb288-113" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> pool<span class="op">-&gt;</span>num_blocks<span class="op">;</span> i<span class="op">++)</span></span>
<span id="cb288-114"><a href="#cb288-114" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb288-115"><a href="#cb288-115" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>pool<span class="op">-&gt;</span>blocks<span class="op">[</span>i<span class="op">].</span>is_free <span class="op">&amp;&amp;</span> pool<span class="op">-&gt;</span>blocks<span class="op">[</span>i<span class="op">].</span>size <span class="op">&gt;=</span> size<span class="op">)</span></span>
<span id="cb288-116"><a href="#cb288-116" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span></span>
<span id="cb288-117"><a href="#cb288-117" aria-hidden="true" tabindex="-1"></a>            <span class="co">/* ブロックが大きすぎる場合は分割 */</span></span>
<span id="cb288-118"><a href="#cb288-118" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>pool<span class="op">-&gt;</span>blocks<span class="op">[</span>i<span class="op">].</span>size <span class="op">&gt;</span> size <span class="op">+</span> <span class="kw">sizeof</span><span class="op">(</span>MemoryBlock<span class="op">))</span></span>
<span id="cb288-119"><a href="#cb288-119" aria-hidden="true" tabindex="-1"></a>            <span class="op">{</span></span>
<span id="cb288-120"><a href="#cb288-120" aria-hidden="true" tabindex="-1"></a>                <span class="cf">if</span> <span class="op">(</span>pool<span class="op">-&gt;</span>num_blocks <span class="op">&lt;</span> MAX_POOL_BLOCKS<span class="op">)</span></span>
<span id="cb288-121"><a href="#cb288-121" aria-hidden="true" tabindex="-1"></a>                <span class="op">{</span></span>
<span id="cb288-122"><a href="#cb288-122" aria-hidden="true" tabindex="-1"></a>                    <span class="co">/* 新しいブロックを作成 */</span></span>
<span id="cb288-123"><a href="#cb288-123" aria-hidden="true" tabindex="-1"></a>                    <span class="dt">int</span> new_index <span class="op">=</span> pool<span class="op">-&gt;</span>num_blocks<span class="op">++;</span></span>
<span id="cb288-124"><a href="#cb288-124" aria-hidden="true" tabindex="-1"></a>                    pool<span class="op">-&gt;</span>blocks<span class="op">[</span>new_index<span class="op">].</span>data <span class="op">=</span> <span class="op">(</span><span class="dt">char</span> <span class="op">*)</span>pool<span class="op">-&gt;</span>blocks<span class="op">[</span>i<span class="op">].</span>data <span class="op">+</span> size<span class="op">;</span></span>
<span id="cb288-125"><a href="#cb288-125" aria-hidden="true" tabindex="-1"></a>                    pool<span class="op">-&gt;</span>blocks<span class="op">[</span>new_index<span class="op">].</span>size <span class="op">=</span> pool<span class="op">-&gt;</span>blocks<span class="op">[</span>i<span class="op">].</span>size <span class="op">-</span> size<span class="op">;</span></span>
<span id="cb288-126"><a href="#cb288-126" aria-hidden="true" tabindex="-1"></a>                    pool<span class="op">-&gt;</span>blocks<span class="op">[</span>new_index<span class="op">].</span>is_free <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb288-127"><a href="#cb288-127" aria-hidden="true" tabindex="-1"></a>                    pool<span class="op">-&gt;</span>blocks<span class="op">[</span>new_index<span class="op">].</span>next <span class="op">=</span> NULL<span class="op">;</span></span>
<span id="cb288-128"><a href="#cb288-128" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-129"><a href="#cb288-129" aria-hidden="true" tabindex="-1"></a>                    <span class="co">/* 元のブロックサイズを調整 */</span></span>
<span id="cb288-130"><a href="#cb288-130" aria-hidden="true" tabindex="-1"></a>                    pool<span class="op">-&gt;</span>blocks<span class="op">[</span>i<span class="op">].</span>size <span class="op">=</span> size<span class="op">;</span></span>
<span id="cb288-131"><a href="#cb288-131" aria-hidden="true" tabindex="-1"></a>                <span class="op">}</span></span>
<span id="cb288-132"><a href="#cb288-132" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb288-133"><a href="#cb288-133" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-134"><a href="#cb288-134" aria-hidden="true" tabindex="-1"></a>            pool<span class="op">-&gt;</span>blocks<span class="op">[</span>i<span class="op">].</span>is_free <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb288-135"><a href="#cb288-135" aria-hidden="true" tabindex="-1"></a>            pool<span class="op">-&gt;</span>used_size <span class="op">+=</span> size<span class="op">;</span></span>
<span id="cb288-136"><a href="#cb288-136" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-137"><a href="#cb288-137" aria-hidden="true" tabindex="-1"></a>            <span class="co">/* 統計更新 */</span></span>
<span id="cb288-138"><a href="#cb288-138" aria-hidden="true" tabindex="-1"></a>            g_memory_stats<span class="op">.</span>total_allocated <span class="op">+=</span> size<span class="op">;</span></span>
<span id="cb288-139"><a href="#cb288-139" aria-hidden="true" tabindex="-1"></a>            g_memory_stats<span class="op">.</span>current_usage <span class="op">+=</span> size<span class="op">;</span></span>
<span id="cb288-140"><a href="#cb288-140" aria-hidden="true" tabindex="-1"></a>            g_memory_stats<span class="op">.</span>allocation_count<span class="op">++;</span></span>
<span id="cb288-141"><a href="#cb288-141" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-142"><a href="#cb288-142" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>g_memory_stats<span class="op">.</span>current_usage <span class="op">&gt;</span> g_memory_stats<span class="op">.</span>peak_usage<span class="op">)</span></span>
<span id="cb288-143"><a href="#cb288-143" aria-hidden="true" tabindex="-1"></a>            <span class="op">{</span></span>
<span id="cb288-144"><a href="#cb288-144" aria-hidden="true" tabindex="-1"></a>                g_memory_stats<span class="op">.</span>peak_usage <span class="op">=</span> g_memory_stats<span class="op">.</span>current_usage<span class="op">;</span></span>
<span id="cb288-145"><a href="#cb288-145" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb288-146"><a href="#cb288-146" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-147"><a href="#cb288-147" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> pool<span class="op">-&gt;</span>blocks<span class="op">[</span>i<span class="op">].</span>data<span class="op">;</span></span>
<span id="cb288-148"><a href="#cb288-148" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb288-149"><a href="#cb288-149" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb288-150"><a href="#cb288-150" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-151"><a href="#cb288-151" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;メモリプール割り当てエラー: </span><span class="sc">%zu</span><span class="st"> バイトの空きブロックが見つかりません</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> size<span class="op">);</span></span>
<span id="cb288-152"><a href="#cb288-152" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> NULL<span class="op">;</span></span>
<span id="cb288-153"><a href="#cb288-153" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb288-154"><a href="#cb288-154" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-155"><a href="#cb288-155" aria-hidden="true" tabindex="-1"></a><span class="co">/* メモリプールへの解放 */</span></span>
<span id="cb288-156"><a href="#cb288-156" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> pool_free<span class="op">(</span>MemoryPool <span class="op">*</span>pool<span class="op">,</span> <span class="dt">void</span> <span class="op">*</span>ptr<span class="op">)</span></span>
<span id="cb288-157"><a href="#cb288-157" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb288-158"><a href="#cb288-158" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb288-159"><a href="#cb288-159" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-160"><a href="#cb288-160" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(!</span>ptr<span class="op">)</span></span>
<span id="cb288-161"><a href="#cb288-161" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span><span class="op">;</span></span>
<span id="cb288-162"><a href="#cb288-162" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-163"><a href="#cb288-163" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> pool<span class="op">-&gt;</span>num_blocks<span class="op">;</span> i<span class="op">++)</span></span>
<span id="cb288-164"><a href="#cb288-164" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb288-165"><a href="#cb288-165" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>pool<span class="op">-&gt;</span>blocks<span class="op">[</span>i<span class="op">].</span>data <span class="op">==</span> ptr <span class="op">&amp;&amp;</span> <span class="op">!</span>pool<span class="op">-&gt;</span>blocks<span class="op">[</span>i<span class="op">].</span>is_free<span class="op">)</span></span>
<span id="cb288-166"><a href="#cb288-166" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span></span>
<span id="cb288-167"><a href="#cb288-167" aria-hidden="true" tabindex="-1"></a>            pool<span class="op">-&gt;</span>blocks<span class="op">[</span>i<span class="op">].</span>is_free <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb288-168"><a href="#cb288-168" aria-hidden="true" tabindex="-1"></a>            pool<span class="op">-&gt;</span>used_size <span class="op">-=</span> pool<span class="op">-&gt;</span>blocks<span class="op">[</span>i<span class="op">].</span>size<span class="op">;</span></span>
<span id="cb288-169"><a href="#cb288-169" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-170"><a href="#cb288-170" aria-hidden="true" tabindex="-1"></a>            <span class="co">/* 統計更新 */</span></span>
<span id="cb288-171"><a href="#cb288-171" aria-hidden="true" tabindex="-1"></a>            g_memory_stats<span class="op">.</span>total_freed <span class="op">+=</span> pool<span class="op">-&gt;</span>blocks<span class="op">[</span>i<span class="op">].</span>size<span class="op">;</span></span>
<span id="cb288-172"><a href="#cb288-172" aria-hidden="true" tabindex="-1"></a>            g_memory_stats<span class="op">.</span>current_usage <span class="op">-=</span> pool<span class="op">-&gt;</span>blocks<span class="op">[</span>i<span class="op">].</span>size<span class="op">;</span></span>
<span id="cb288-173"><a href="#cb288-173" aria-hidden="true" tabindex="-1"></a>            g_memory_stats<span class="op">.</span>free_count<span class="op">++;</span></span>
<span id="cb288-174"><a href="#cb288-174" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-175"><a href="#cb288-175" aria-hidden="true" tabindex="-1"></a>            <span class="co">/* 隣接する空きブロックとマージ */</span></span>
<span id="cb288-176"><a href="#cb288-176" aria-hidden="true" tabindex="-1"></a>            <span class="co">/* 簡単な実装のため、ここではマージを省略 */</span></span>
<span id="cb288-177"><a href="#cb288-177" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-178"><a href="#cb288-178" aria-hidden="true" tabindex="-1"></a>            printf<span class="op">(</span><span class="st">&quot;メモリ解放: </span><span class="sc">%zu</span><span class="st"> バイト</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> pool<span class="op">-&gt;</span>blocks<span class="op">[</span>i<span class="op">].</span>size<span class="op">);</span></span>
<span id="cb288-179"><a href="#cb288-179" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span><span class="op">;</span></span>
<span id="cb288-180"><a href="#cb288-180" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb288-181"><a href="#cb288-181" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb288-182"><a href="#cb288-182" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-183"><a href="#cb288-183" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;メモリ解放エラー: 無効なポインタ</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb288-184"><a href="#cb288-184" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb288-185"><a href="#cb288-185" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-186"><a href="#cb288-186" aria-hidden="true" tabindex="-1"></a><span class="co">/* メモリプールの状態表示 */</span></span>
<span id="cb288-187"><a href="#cb288-187" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> print_pool_status<span class="op">(</span>MemoryPool <span class="op">*</span>pool<span class="op">)</span></span>
<span id="cb288-188"><a href="#cb288-188" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb288-189"><a href="#cb288-189" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">=== メモリプール状態 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb288-190"><a href="#cb288-190" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;総サイズ: </span><span class="sc">%zu</span><span class="st"> バイト</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> pool<span class="op">-&gt;</span>total_size<span class="op">);</span></span>
<span id="cb288-191"><a href="#cb288-191" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;使用中: </span><span class="sc">%zu</span><span class="st"> バイト</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> pool<span class="op">-&gt;</span>used_size<span class="op">);</span></span>
<span id="cb288-192"><a href="#cb288-192" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;空き: </span><span class="sc">%zu</span><span class="st"> バイト</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> pool<span class="op">-&gt;</span>total_size <span class="op">-</span> pool<span class="op">-&gt;</span>used_size<span class="op">);</span></span>
<span id="cb288-193"><a href="#cb288-193" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ブロック数: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> pool<span class="op">-&gt;</span>num_blocks<span class="op">);</span></span>
<span id="cb288-194"><a href="#cb288-194" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-195"><a href="#cb288-195" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ブロック詳細:</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb288-196"><a href="#cb288-196" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb288-197"><a href="#cb288-197" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> pool<span class="op">-&gt;</span>num_blocks<span class="op">;</span> i<span class="op">++)</span></span>
<span id="cb288-198"><a href="#cb288-198" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb288-199"><a href="#cb288-199" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;  ブロック</span><span class="sc">%d</span><span class="st">: サイズ=</span><span class="sc">%zu</span><span class="st">, 状態=</span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span></span>
<span id="cb288-200"><a href="#cb288-200" aria-hidden="true" tabindex="-1"></a>               i<span class="op">,</span> pool<span class="op">-&gt;</span>blocks<span class="op">[</span>i<span class="op">].</span>size<span class="op">,</span></span>
<span id="cb288-201"><a href="#cb288-201" aria-hidden="true" tabindex="-1"></a>               pool<span class="op">-&gt;</span>blocks<span class="op">[</span>i<span class="op">].</span>is_free <span class="op">?</span> <span class="st">&quot;空き&quot;</span> <span class="op">:</span> <span class="st">&quot;使用中&quot;</span><span class="op">);</span></span>
<span id="cb288-202"><a href="#cb288-202" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb288-203"><a href="#cb288-203" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb288-204"><a href="#cb288-204" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-205"><a href="#cb288-205" aria-hidden="true" tabindex="-1"></a><span class="co">/* メモリプールの終了処理 */</span></span>
<span id="cb288-206"><a href="#cb288-206" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> cleanup_memory_pool<span class="op">(</span>MemoryPool <span class="op">*</span>pool<span class="op">)</span></span>
<span id="cb288-207"><a href="#cb288-207" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb288-208"><a href="#cb288-208" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>pool<span class="op">-&gt;</span>blocks<span class="op">)</span></span>
<span id="cb288-209"><a href="#cb288-209" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb288-210"><a href="#cb288-210" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>pool<span class="op">-&gt;</span>blocks<span class="op">[</span><span class="dv">0</span><span class="op">].</span>data<span class="op">)</span></span>
<span id="cb288-211"><a href="#cb288-211" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span></span>
<span id="cb288-212"><a href="#cb288-212" aria-hidden="true" tabindex="-1"></a>            free<span class="op">(</span>pool<span class="op">-&gt;</span>blocks<span class="op">[</span><span class="dv">0</span><span class="op">].</span>data<span class="op">);</span></span>
<span id="cb288-213"><a href="#cb288-213" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb288-214"><a href="#cb288-214" aria-hidden="true" tabindex="-1"></a>        free<span class="op">(</span>pool<span class="op">-&gt;</span>blocks<span class="op">);</span></span>
<span id="cb288-215"><a href="#cb288-215" aria-hidden="true" tabindex="-1"></a>        pool<span class="op">-&gt;</span>blocks <span class="op">=</span> NULL<span class="op">;</span></span>
<span id="cb288-216"><a href="#cb288-216" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb288-217"><a href="#cb288-217" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;メモリプール終了処理完了</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb288-218"><a href="#cb288-218" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb288-219"><a href="#cb288-219" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-220"><a href="#cb288-220" aria-hidden="true" tabindex="-1"></a><span class="co">/* スタックアロケーターの初期化 */</span></span>
<span id="cb288-221"><a href="#cb288-221" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> init_stack_allocator<span class="op">(</span>StackAllocator <span class="op">*</span>stack<span class="op">,</span> <span class="dt">size_t</span> size<span class="op">)</span></span>
<span id="cb288-222"><a href="#cb288-222" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb288-223"><a href="#cb288-223" aria-hidden="true" tabindex="-1"></a>    stack<span class="op">-&gt;</span>memory <span class="op">=</span> malloc<span class="op">(</span>size<span class="op">);</span></span>
<span id="cb288-224"><a href="#cb288-224" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(!</span>stack<span class="op">-&gt;</span>memory<span class="op">)</span></span>
<span id="cb288-225"><a href="#cb288-225" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb288-226"><a href="#cb288-226" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;スタックアロケーター初期化エラー</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb288-227"><a href="#cb288-227" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb288-228"><a href="#cb288-228" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb288-229"><a href="#cb288-229" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-230"><a href="#cb288-230" aria-hidden="true" tabindex="-1"></a>    stack<span class="op">-&gt;</span>size <span class="op">=</span> size<span class="op">;</span></span>
<span id="cb288-231"><a href="#cb288-231" aria-hidden="true" tabindex="-1"></a>    stack<span class="op">-&gt;</span>offset <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb288-232"><a href="#cb288-232" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-233"><a href="#cb288-233" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;スタックアロケーター初期化: </span><span class="sc">%zu</span><span class="st"> バイト</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> size<span class="op">);</span></span>
<span id="cb288-234"><a href="#cb288-234" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb288-235"><a href="#cb288-235" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb288-236"><a href="#cb288-236" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-237"><a href="#cb288-237" aria-hidden="true" tabindex="-1"></a><span class="co">/* スタックアロケーターからの割り当て */</span></span>
<span id="cb288-238"><a href="#cb288-238" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> <span class="op">*</span>stack_alloc<span class="op">(</span>StackAllocator <span class="op">*</span>stack<span class="op">,</span> <span class="dt">size_t</span> size<span class="op">)</span></span>
<span id="cb288-239"><a href="#cb288-239" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb288-240"><a href="#cb288-240" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* アライメント調整 */</span></span>
<span id="cb288-241"><a href="#cb288-241" aria-hidden="true" tabindex="-1"></a>    <span class="dt">size_t</span> aligned_size <span class="op">=</span> <span class="op">(</span>size <span class="op">+</span> <span class="dv">7</span><span class="op">)</span> <span class="op">&amp;</span> <span class="op">~</span><span class="dv">7</span><span class="op">;</span> <span class="co">/* 8バイト境界に整列 */</span></span>
<span id="cb288-242"><a href="#cb288-242" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-243"><a href="#cb288-243" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>stack<span class="op">-&gt;</span>offset <span class="op">+</span> aligned_size <span class="op">&gt;</span> stack<span class="op">-&gt;</span>size<span class="op">)</span></span>
<span id="cb288-244"><a href="#cb288-244" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb288-245"><a href="#cb288-245" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;スタックアロケーターエラー: メモリ不足</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb288-246"><a href="#cb288-246" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> NULL<span class="op">;</span></span>
<span id="cb288-247"><a href="#cb288-247" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb288-248"><a href="#cb288-248" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-249"><a href="#cb288-249" aria-hidden="true" tabindex="-1"></a>    <span class="dt">void</span> <span class="op">*</span>ptr <span class="op">=</span> stack<span class="op">-&gt;</span>memory <span class="op">+</span> stack<span class="op">-&gt;</span>offset<span class="op">;</span></span>
<span id="cb288-250"><a href="#cb288-250" aria-hidden="true" tabindex="-1"></a>    stack<span class="op">-&gt;</span>offset <span class="op">+=</span> aligned_size<span class="op">;</span></span>
<span id="cb288-251"><a href="#cb288-251" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-252"><a href="#cb288-252" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> ptr<span class="op">;</span></span>
<span id="cb288-253"><a href="#cb288-253" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb288-254"><a href="#cb288-254" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-255"><a href="#cb288-255" aria-hidden="true" tabindex="-1"></a><span class="co">/* スタックアロケーターのリセット */</span></span>
<span id="cb288-256"><a href="#cb288-256" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> stack_reset<span class="op">(</span>StackAllocator <span class="op">*</span>stack<span class="op">)</span></span>
<span id="cb288-257"><a href="#cb288-257" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb288-258"><a href="#cb288-258" aria-hidden="true" tabindex="-1"></a>    stack<span class="op">-&gt;</span>offset <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb288-259"><a href="#cb288-259" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;スタックアロケーターをリセットしました</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb288-260"><a href="#cb288-260" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb288-261"><a href="#cb288-261" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-262"><a href="#cb288-262" aria-hidden="true" tabindex="-1"></a><span class="co">/* スタックアロケーターの終了処理 */</span></span>
<span id="cb288-263"><a href="#cb288-263" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> cleanup_stack_allocator<span class="op">(</span>StackAllocator <span class="op">*</span>stack<span class="op">)</span></span>
<span id="cb288-264"><a href="#cb288-264" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb288-265"><a href="#cb288-265" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>stack<span class="op">-&gt;</span>memory<span class="op">)</span></span>
<span id="cb288-266"><a href="#cb288-266" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb288-267"><a href="#cb288-267" aria-hidden="true" tabindex="-1"></a>        free<span class="op">(</span>stack<span class="op">-&gt;</span>memory<span class="op">);</span></span>
<span id="cb288-268"><a href="#cb288-268" aria-hidden="true" tabindex="-1"></a>        stack<span class="op">-&gt;</span>memory <span class="op">=</span> NULL<span class="op">;</span></span>
<span id="cb288-269"><a href="#cb288-269" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb288-270"><a href="#cb288-270" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;スタックアロケーター終了処理完了</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb288-271"><a href="#cb288-271" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb288-272"><a href="#cb288-272" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-273"><a href="#cb288-273" aria-hidden="true" tabindex="-1"></a><span class="co">/* オブジェクトプールの初期化 */</span></span>
<span id="cb288-274"><a href="#cb288-274" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> init_object_pool<span class="op">(</span>ObjectPool <span class="op">*</span>pool<span class="op">,</span> <span class="dt">size_t</span> object_size<span class="op">,</span> <span class="dt">size_t</span> capacity<span class="op">)</span></span>
<span id="cb288-275"><a href="#cb288-275" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb288-276"><a href="#cb288-276" aria-hidden="true" tabindex="-1"></a>    <span class="dt">size_t</span> total_size <span class="op">=</span> object_size <span class="op">*</span> capacity<span class="op">;</span></span>
<span id="cb288-277"><a href="#cb288-277" aria-hidden="true" tabindex="-1"></a>    pool<span class="op">-&gt;</span>memory_chunk <span class="op">=</span> malloc<span class="op">(</span>total_size<span class="op">);</span></span>
<span id="cb288-278"><a href="#cb288-278" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-279"><a href="#cb288-279" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(!</span>pool<span class="op">-&gt;</span>memory_chunk<span class="op">)</span></span>
<span id="cb288-280"><a href="#cb288-280" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb288-281"><a href="#cb288-281" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;オブジェクトプール初期化エラー</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb288-282"><a href="#cb288-282" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb288-283"><a href="#cb288-283" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb288-284"><a href="#cb288-284" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-285"><a href="#cb288-285" aria-hidden="true" tabindex="-1"></a>    pool<span class="op">-&gt;</span>object_size <span class="op">=</span> object_size<span class="op">;</span></span>
<span id="cb288-286"><a href="#cb288-286" aria-hidden="true" tabindex="-1"></a>    pool<span class="op">-&gt;</span>capacity <span class="op">=</span> capacity<span class="op">;</span></span>
<span id="cb288-287"><a href="#cb288-287" aria-hidden="true" tabindex="-1"></a>    pool<span class="op">-&gt;</span>count <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb288-288"><a href="#cb288-288" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-289"><a href="#cb288-289" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* フリーリストの構築 */</span></span>
<span id="cb288-290"><a href="#cb288-290" aria-hidden="true" tabindex="-1"></a>    pool<span class="op">-&gt;</span>free_list <span class="op">=</span> NULL<span class="op">;</span></span>
<span id="cb288-291"><a href="#cb288-291" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> <span class="op">*</span>ptr <span class="op">=</span> <span class="op">(</span><span class="dt">char</span> <span class="op">*)</span>pool<span class="op">-&gt;</span>memory_chunk<span class="op">;</span></span>
<span id="cb288-292"><a href="#cb288-292" aria-hidden="true" tabindex="-1"></a>    <span class="dt">size_t</span> i<span class="op">;</span></span>
<span id="cb288-293"><a href="#cb288-293" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-294"><a href="#cb288-294" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> capacity<span class="op">;</span> i<span class="op">++)</span></span>
<span id="cb288-295"><a href="#cb288-295" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb288-296"><a href="#cb288-296" aria-hidden="true" tabindex="-1"></a>        ObjectNode <span class="op">*</span>node <span class="op">=</span> <span class="op">(</span>ObjectNode <span class="op">*)(</span>ptr <span class="op">+</span> i <span class="op">*</span> object_size<span class="op">);</span></span>
<span id="cb288-297"><a href="#cb288-297" aria-hidden="true" tabindex="-1"></a>        node<span class="op">-&gt;</span>next <span class="op">=</span> pool<span class="op">-&gt;</span>free_list<span class="op">;</span></span>
<span id="cb288-298"><a href="#cb288-298" aria-hidden="true" tabindex="-1"></a>        pool<span class="op">-&gt;</span>free_list <span class="op">=</span> node<span class="op">;</span></span>
<span id="cb288-299"><a href="#cb288-299" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb288-300"><a href="#cb288-300" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-301"><a href="#cb288-301" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;オブジェクトプール初期化: オブジェクトサイズ=</span><span class="sc">%zu</span><span class="st">, 容量=</span><span class="sc">%zu\n</span><span class="st">&quot;</span><span class="op">,</span></span>
<span id="cb288-302"><a href="#cb288-302" aria-hidden="true" tabindex="-1"></a>           object_size<span class="op">,</span> capacity<span class="op">);</span></span>
<span id="cb288-303"><a href="#cb288-303" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb288-304"><a href="#cb288-304" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb288-305"><a href="#cb288-305" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-306"><a href="#cb288-306" aria-hidden="true" tabindex="-1"></a><span class="co">/* オブジェクトプールからの取得 */</span></span>
<span id="cb288-307"><a href="#cb288-307" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> <span class="op">*</span>object_pool_get<span class="op">(</span>ObjectPool <span class="op">*</span>pool<span class="op">)</span></span>
<span id="cb288-308"><a href="#cb288-308" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb288-309"><a href="#cb288-309" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(!</span>pool<span class="op">-&gt;</span>free_list<span class="op">)</span></span>
<span id="cb288-310"><a href="#cb288-310" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb288-311"><a href="#cb288-311" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;オブジェクトプールエラー: 利用可能なオブジェクトがありません</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb288-312"><a href="#cb288-312" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> NULL<span class="op">;</span></span>
<span id="cb288-313"><a href="#cb288-313" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb288-314"><a href="#cb288-314" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-315"><a href="#cb288-315" aria-hidden="true" tabindex="-1"></a>    ObjectNode <span class="op">*</span>node <span class="op">=</span> pool<span class="op">-&gt;</span>free_list<span class="op">;</span></span>
<span id="cb288-316"><a href="#cb288-316" aria-hidden="true" tabindex="-1"></a>    pool<span class="op">-&gt;</span>free_list <span class="op">=</span> node<span class="op">-&gt;</span>next<span class="op">;</span></span>
<span id="cb288-317"><a href="#cb288-317" aria-hidden="true" tabindex="-1"></a>    pool<span class="op">-&gt;</span>count<span class="op">++;</span></span>
<span id="cb288-318"><a href="#cb288-318" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-319"><a href="#cb288-319" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* オブジェクトをクリア */</span></span>
<span id="cb288-320"><a href="#cb288-320" aria-hidden="true" tabindex="-1"></a>    memset<span class="op">(</span>node<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> pool<span class="op">-&gt;</span>object_size<span class="op">);</span></span>
<span id="cb288-321"><a href="#cb288-321" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-322"><a href="#cb288-322" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> node<span class="op">;</span></span>
<span id="cb288-323"><a href="#cb288-323" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb288-324"><a href="#cb288-324" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-325"><a href="#cb288-325" aria-hidden="true" tabindex="-1"></a><span class="co">/* オブジェクトプールへの返却 */</span></span>
<span id="cb288-326"><a href="#cb288-326" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> object_pool_return<span class="op">(</span>ObjectPool <span class="op">*</span>pool<span class="op">,</span> <span class="dt">void</span> <span class="op">*</span>obj<span class="op">)</span></span>
<span id="cb288-327"><a href="#cb288-327" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb288-328"><a href="#cb288-328" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(!</span>obj<span class="op">)</span></span>
<span id="cb288-329"><a href="#cb288-329" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span><span class="op">;</span></span>
<span id="cb288-330"><a href="#cb288-330" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-331"><a href="#cb288-331" aria-hidden="true" tabindex="-1"></a>    ObjectNode <span class="op">*</span>node <span class="op">=</span> <span class="op">(</span>ObjectNode <span class="op">*)</span>obj<span class="op">;</span></span>
<span id="cb288-332"><a href="#cb288-332" aria-hidden="true" tabindex="-1"></a>    node<span class="op">-&gt;</span>next <span class="op">=</span> pool<span class="op">-&gt;</span>free_list<span class="op">;</span></span>
<span id="cb288-333"><a href="#cb288-333" aria-hidden="true" tabindex="-1"></a>    pool<span class="op">-&gt;</span>free_list <span class="op">=</span> node<span class="op">;</span></span>
<span id="cb288-334"><a href="#cb288-334" aria-hidden="true" tabindex="-1"></a>    pool<span class="op">-&gt;</span>count<span class="op">--;</span></span>
<span id="cb288-335"><a href="#cb288-335" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb288-336"><a href="#cb288-336" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-337"><a href="#cb288-337" aria-hidden="true" tabindex="-1"></a><span class="co">/* オブジェクトプールの終了処理 */</span></span>
<span id="cb288-338"><a href="#cb288-338" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> cleanup_object_pool<span class="op">(</span>ObjectPool <span class="op">*</span>pool<span class="op">)</span></span>
<span id="cb288-339"><a href="#cb288-339" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb288-340"><a href="#cb288-340" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>pool<span class="op">-&gt;</span>memory_chunk<span class="op">)</span></span>
<span id="cb288-341"><a href="#cb288-341" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb288-342"><a href="#cb288-342" aria-hidden="true" tabindex="-1"></a>        free<span class="op">(</span>pool<span class="op">-&gt;</span>memory_chunk<span class="op">);</span></span>
<span id="cb288-343"><a href="#cb288-343" aria-hidden="true" tabindex="-1"></a>        pool<span class="op">-&gt;</span>memory_chunk <span class="op">=</span> NULL<span class="op">;</span></span>
<span id="cb288-344"><a href="#cb288-344" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb288-345"><a href="#cb288-345" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;オブジェクトプール終了処理完了</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb288-346"><a href="#cb288-346" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb288-347"><a href="#cb288-347" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-348"><a href="#cb288-348" aria-hidden="true" tabindex="-1"></a><span class="co">/* カスタムメモリアロケーター */</span></span>
<span id="cb288-349"><a href="#cb288-349" aria-hidden="true" tabindex="-1"></a><span class="kw">typedef</span> <span class="kw">struct</span></span>
<span id="cb288-350"><a href="#cb288-350" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb288-351"><a href="#cb288-351" aria-hidden="true" tabindex="-1"></a>    <span class="dt">void</span> <span class="op">*(*</span>alloc<span class="op">)(</span><span class="dt">size_t</span> size<span class="op">);</span></span>
<span id="cb288-352"><a href="#cb288-352" aria-hidden="true" tabindex="-1"></a>    <span class="dt">void</span> <span class="op">(*</span>free<span class="op">)(</span><span class="dt">void</span> <span class="op">*</span>ptr<span class="op">);</span></span>
<span id="cb288-353"><a href="#cb288-353" aria-hidden="true" tabindex="-1"></a>    <span class="dt">void</span> <span class="op">*(*</span>realloc<span class="op">)(</span><span class="dt">void</span> <span class="op">*</span>ptr<span class="op">,</span> <span class="dt">size_t</span> new_size<span class="op">);</span></span>
<span id="cb288-354"><a href="#cb288-354" aria-hidden="true" tabindex="-1"></a><span class="op">}</span> CustomAllocator<span class="op">;</span></span>
<span id="cb288-355"><a href="#cb288-355" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-356"><a href="#cb288-356" aria-hidden="true" tabindex="-1"></a><span class="co">/* デバッグアロケーター */</span></span>
<span id="cb288-357"><a href="#cb288-357" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> <span class="op">*</span>debug_malloc<span class="op">(</span><span class="dt">size_t</span> size<span class="op">)</span></span>
<span id="cb288-358"><a href="#cb288-358" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb288-359"><a href="#cb288-359" aria-hidden="true" tabindex="-1"></a>    <span class="dt">void</span> <span class="op">*</span>ptr <span class="op">=</span> malloc<span class="op">(</span>size <span class="op">+</span> <span class="kw">sizeof</span><span class="op">(</span><span class="dt">size_t</span><span class="op">));</span></span>
<span id="cb288-360"><a href="#cb288-360" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>ptr<span class="op">)</span></span>
<span id="cb288-361"><a href="#cb288-361" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb288-362"><a href="#cb288-362" aria-hidden="true" tabindex="-1"></a>        <span class="op">*(</span><span class="dt">size_t</span> <span class="op">*)</span>ptr <span class="op">=</span> size<span class="op">;</span></span>
<span id="cb288-363"><a href="#cb288-363" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;[DEBUG MALLOC] </span><span class="sc">%zu</span><span class="st"> バイト割り当て: </span><span class="sc">%p\n</span><span class="st">&quot;</span><span class="op">,</span> size<span class="op">,</span> <span class="op">(</span><span class="dt">char</span> <span class="op">*)</span>ptr <span class="op">+</span> <span class="kw">sizeof</span><span class="op">(</span><span class="dt">size_t</span><span class="op">));</span></span>
<span id="cb288-364"><a href="#cb288-364" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="op">(</span><span class="dt">char</span> <span class="op">*)</span>ptr <span class="op">+</span> <span class="kw">sizeof</span><span class="op">(</span><span class="dt">size_t</span><span class="op">);</span></span>
<span id="cb288-365"><a href="#cb288-365" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb288-366"><a href="#cb288-366" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> NULL<span class="op">;</span></span>
<span id="cb288-367"><a href="#cb288-367" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb288-368"><a href="#cb288-368" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-369"><a href="#cb288-369" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> debug_free<span class="op">(</span><span class="dt">void</span> <span class="op">*</span>ptr<span class="op">)</span></span>
<span id="cb288-370"><a href="#cb288-370" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb288-371"><a href="#cb288-371" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>ptr<span class="op">)</span></span>
<span id="cb288-372"><a href="#cb288-372" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb288-373"><a href="#cb288-373" aria-hidden="true" tabindex="-1"></a>        <span class="dt">void</span> <span class="op">*</span>real_ptr <span class="op">=</span> <span class="op">(</span><span class="dt">char</span> <span class="op">*)</span>ptr <span class="op">-</span> <span class="kw">sizeof</span><span class="op">(</span><span class="dt">size_t</span><span class="op">);</span></span>
<span id="cb288-374"><a href="#cb288-374" aria-hidden="true" tabindex="-1"></a>        <span class="dt">size_t</span> size <span class="op">=</span> <span class="op">*(</span><span class="dt">size_t</span> <span class="op">*)</span>real_ptr<span class="op">;</span></span>
<span id="cb288-375"><a href="#cb288-375" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;[DEBUG FREE] </span><span class="sc">%zu</span><span class="st"> バイト解放: </span><span class="sc">%p\n</span><span class="st">&quot;</span><span class="op">,</span> size<span class="op">,</span> ptr<span class="op">);</span></span>
<span id="cb288-376"><a href="#cb288-376" aria-hidden="true" tabindex="-1"></a>        free<span class="op">(</span>real_ptr<span class="op">);</span></span>
<span id="cb288-377"><a href="#cb288-377" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb288-378"><a href="#cb288-378" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb288-379"><a href="#cb288-379" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-380"><a href="#cb288-380" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> <span class="op">*</span>debug_realloc<span class="op">(</span><span class="dt">void</span> <span class="op">*</span>ptr<span class="op">,</span> <span class="dt">size_t</span> new_size<span class="op">)</span></span>
<span id="cb288-381"><a href="#cb288-381" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb288-382"><a href="#cb288-382" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(!</span>ptr<span class="op">)</span></span>
<span id="cb288-383"><a href="#cb288-383" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb288-384"><a href="#cb288-384" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> debug_malloc<span class="op">(</span>new_size<span class="op">);</span></span>
<span id="cb288-385"><a href="#cb288-385" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb288-386"><a href="#cb288-386" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-387"><a href="#cb288-387" aria-hidden="true" tabindex="-1"></a>    <span class="dt">void</span> <span class="op">*</span>real_ptr <span class="op">=</span> <span class="op">(</span><span class="dt">char</span> <span class="op">*)</span>ptr <span class="op">-</span> <span class="kw">sizeof</span><span class="op">(</span><span class="dt">size_t</span><span class="op">);</span></span>
<span id="cb288-388"><a href="#cb288-388" aria-hidden="true" tabindex="-1"></a>    <span class="dt">size_t</span> old_size <span class="op">=</span> <span class="op">*(</span><span class="dt">size_t</span> <span class="op">*)</span>real_ptr<span class="op">;</span></span>
<span id="cb288-389"><a href="#cb288-389" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-390"><a href="#cb288-390" aria-hidden="true" tabindex="-1"></a>    <span class="dt">void</span> <span class="op">*</span>new_ptr <span class="op">=</span> realloc<span class="op">(</span>real_ptr<span class="op">,</span> new_size <span class="op">+</span> <span class="kw">sizeof</span><span class="op">(</span><span class="dt">size_t</span><span class="op">));</span></span>
<span id="cb288-391"><a href="#cb288-391" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>new_ptr<span class="op">)</span></span>
<span id="cb288-392"><a href="#cb288-392" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb288-393"><a href="#cb288-393" aria-hidden="true" tabindex="-1"></a>        <span class="op">*(</span><span class="dt">size_t</span> <span class="op">*)</span>new_ptr <span class="op">=</span> new_size<span class="op">;</span></span>
<span id="cb288-394"><a href="#cb288-394" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;[DEBUG REALLOC] </span><span class="sc">%zu</span><span class="st"> バイト -&gt; </span><span class="sc">%zu</span><span class="st"> バイト: </span><span class="sc">%p</span><span class="st"> -&gt; </span><span class="sc">%p\n</span><span class="st">&quot;</span><span class="op">,</span></span>
<span id="cb288-395"><a href="#cb288-395" aria-hidden="true" tabindex="-1"></a>               old_size<span class="op">,</span> new_size<span class="op">,</span> ptr<span class="op">,</span> <span class="op">(</span><span class="dt">char</span> <span class="op">*)</span>new_ptr <span class="op">+</span> <span class="kw">sizeof</span><span class="op">(</span><span class="dt">size_t</span><span class="op">));</span></span>
<span id="cb288-396"><a href="#cb288-396" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="op">(</span><span class="dt">char</span> <span class="op">*)</span>new_ptr <span class="op">+</span> <span class="kw">sizeof</span><span class="op">(</span><span class="dt">size_t</span><span class="op">);</span></span>
<span id="cb288-397"><a href="#cb288-397" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb288-398"><a href="#cb288-398" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> NULL<span class="op">;</span></span>
<span id="cb288-399"><a href="#cb288-399" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb288-400"><a href="#cb288-400" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-401"><a href="#cb288-401" aria-hidden="true" tabindex="-1"></a><span class="co">/* メモリ使用統計の表示 */</span></span>
<span id="cb288-402"><a href="#cb288-402" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> print_memory_stats<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb288-403"><a href="#cb288-403" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb288-404"><a href="#cb288-404" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">=== メモリ使用統計 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb288-405"><a href="#cb288-405" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;総割り当て: </span><span class="sc">%zu</span><span class="st"> バイト</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> g_memory_stats<span class="op">.</span>total_allocated<span class="op">);</span></span>
<span id="cb288-406"><a href="#cb288-406" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;総解放: </span><span class="sc">%zu</span><span class="st"> バイト</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> g_memory_stats<span class="op">.</span>total_freed<span class="op">);</span></span>
<span id="cb288-407"><a href="#cb288-407" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;現在使用中: </span><span class="sc">%zu</span><span class="st"> バイト</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> g_memory_stats<span class="op">.</span>current_usage<span class="op">);</span></span>
<span id="cb288-408"><a href="#cb288-408" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ピーク使用量: </span><span class="sc">%zu</span><span class="st"> バイト</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> g_memory_stats<span class="op">.</span>peak_usage<span class="op">);</span></span>
<span id="cb288-409"><a href="#cb288-409" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;割り当て回数: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> g_memory_stats<span class="op">.</span>allocation_count<span class="op">);</span></span>
<span id="cb288-410"><a href="#cb288-410" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;解放回数: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> g_memory_stats<span class="op">.</span>free_count<span class="op">);</span></span>
<span id="cb288-411"><a href="#cb288-411" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb288-412"><a href="#cb288-412" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-413"><a href="#cb288-413" aria-hidden="true" tabindex="-1"></a><span class="co">/* メモリアライメントのテスト */</span></span>
<span id="cb288-414"><a href="#cb288-414" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> test_memory_alignment<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb288-415"><a href="#cb288-415" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb288-416"><a href="#cb288-416" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">=== メモリアライメントテスト ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb288-417"><a href="#cb288-417" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-418"><a href="#cb288-418" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> TestStruct</span>
<span id="cb288-419"><a href="#cb288-419" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb288-420"><a href="#cb288-420" aria-hidden="true" tabindex="-1"></a>        <span class="dt">char</span> c<span class="op">;</span></span>
<span id="cb288-421"><a href="#cb288-421" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb288-422"><a href="#cb288-422" aria-hidden="true" tabindex="-1"></a>        <span class="dt">double</span> d<span class="op">;</span></span>
<span id="cb288-423"><a href="#cb288-423" aria-hidden="true" tabindex="-1"></a>        <span class="dt">char</span> c2<span class="op">;</span></span>
<span id="cb288-424"><a href="#cb288-424" aria-hidden="true" tabindex="-1"></a>    <span class="op">};</span></span>
<span id="cb288-425"><a href="#cb288-425" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-426"><a href="#cb288-426" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;char サイズ: </span><span class="sc">%zu</span><span class="st">, アライメント: </span><span class="sc">%zu\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="kw">sizeof</span><span class="op">(</span><span class="dt">char</span><span class="op">),</span> <span class="kw">_Alignof</span><span class="op">(</span><span class="dt">char</span><span class="op">));</span></span>
<span id="cb288-427"><a href="#cb288-427" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;int サイズ: </span><span class="sc">%zu</span><span class="st">, アライメント: </span><span class="sc">%zu\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="kw">sizeof</span><span class="op">(</span><span class="dt">int</span><span class="op">),</span> <span class="kw">_Alignof</span><span class="op">(</span><span class="dt">int</span><span class="op">));</span></span>
<span id="cb288-428"><a href="#cb288-428" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;double サイズ: </span><span class="sc">%zu</span><span class="st">, アライメント: </span><span class="sc">%zu\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="kw">sizeof</span><span class="op">(</span><span class="dt">double</span><span class="op">),</span> <span class="kw">_Alignof</span><span class="op">(</span><span class="dt">double</span><span class="op">));</span></span>
<span id="cb288-429"><a href="#cb288-429" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;struct TestStruct サイズ: </span><span class="sc">%zu\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="kw">sizeof</span><span class="op">(</span><span class="kw">struct</span> TestStruct<span class="op">));</span></span>
<span id="cb288-430"><a href="#cb288-430" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-431"><a href="#cb288-431" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> TestStruct ts<span class="op">;</span></span>
<span id="cb288-432"><a href="#cb288-432" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;メンバーのオフセット:</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb288-433"><a href="#cb288-433" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;  c: </span><span class="sc">%zu\n</span><span class="st">&quot;</span><span class="op">,</span> offsetof<span class="op">(</span><span class="kw">struct</span> TestStruct<span class="op">,</span> c<span class="op">));</span></span>
<span id="cb288-434"><a href="#cb288-434" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;  i: </span><span class="sc">%zu\n</span><span class="st">&quot;</span><span class="op">,</span> offsetof<span class="op">(</span><span class="kw">struct</span> TestStruct<span class="op">,</span> i<span class="op">));</span></span>
<span id="cb288-435"><a href="#cb288-435" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;  d: </span><span class="sc">%zu\n</span><span class="st">&quot;</span><span class="op">,</span> offsetof<span class="op">(</span><span class="kw">struct</span> TestStruct<span class="op">,</span> d<span class="op">));</span></span>
<span id="cb288-436"><a href="#cb288-436" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;  c2: </span><span class="sc">%zu\n</span><span class="st">&quot;</span><span class="op">,</span> offsetof<span class="op">(</span><span class="kw">struct</span> TestStruct<span class="op">,</span> c2<span class="op">));</span></span>
<span id="cb288-437"><a href="#cb288-437" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb288-438"><a href="#cb288-438" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-439"><a href="#cb288-439" aria-hidden="true" tabindex="-1"></a><span class="co">/* ベンチマーク用の構造体 */</span></span>
<span id="cb288-440"><a href="#cb288-440" aria-hidden="true" tabindex="-1"></a><span class="kw">typedef</span> <span class="kw">struct</span></span>
<span id="cb288-441"><a href="#cb288-441" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb288-442"><a href="#cb288-442" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> id<span class="op">;</span></span>
<span id="cb288-443"><a href="#cb288-443" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> name<span class="op">[</span><span class="dv">32</span><span class="op">];</span></span>
<span id="cb288-444"><a href="#cb288-444" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span> value<span class="op">;</span></span>
<span id="cb288-445"><a href="#cb288-445" aria-hidden="true" tabindex="-1"></a><span class="op">}</span> TestObject<span class="op">;</span></span>
<span id="cb288-446"><a href="#cb288-446" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-447"><a href="#cb288-447" aria-hidden="true" tabindex="-1"></a><span class="co">/* 標準malloc/freeのベンチマーク */</span></span>
<span id="cb288-448"><a href="#cb288-448" aria-hidden="true" tabindex="-1"></a><span class="dt">double</span> benchmark_standard_alloc<span class="op">(</span><span class="dt">int</span> iterations<span class="op">)</span></span>
<span id="cb288-449"><a href="#cb288-449" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb288-450"><a href="#cb288-450" aria-hidden="true" tabindex="-1"></a>    clock_t start <span class="op">=</span> clock<span class="op">();</span></span>
<span id="cb288-451"><a href="#cb288-451" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb288-452"><a href="#cb288-452" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-453"><a href="#cb288-453" aria-hidden="true" tabindex="-1"></a>    TestObject <span class="op">**</span>objects <span class="op">=</span> malloc<span class="op">(</span><span class="kw">sizeof</span><span class="op">(</span>TestObject <span class="op">*)</span> <span class="op">*</span> iterations<span class="op">);</span></span>
<span id="cb288-454"><a href="#cb288-454" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-455"><a href="#cb288-455" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> iterations<span class="op">;</span> i<span class="op">++)</span></span>
<span id="cb288-456"><a href="#cb288-456" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb288-457"><a href="#cb288-457" aria-hidden="true" tabindex="-1"></a>        objects<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> malloc<span class="op">(</span><span class="kw">sizeof</span><span class="op">(</span>TestObject<span class="op">));</span></span>
<span id="cb288-458"><a href="#cb288-458" aria-hidden="true" tabindex="-1"></a>        objects<span class="op">[</span>i<span class="op">]-&gt;</span>id <span class="op">=</span> i<span class="op">;</span></span>
<span id="cb288-459"><a href="#cb288-459" aria-hidden="true" tabindex="-1"></a>        sprintf<span class="op">(</span>objects<span class="op">[</span>i<span class="op">]-&gt;</span>name<span class="op">,</span> <span class="st">&quot;Object_</span><span class="sc">%d</span><span class="st">&quot;</span><span class="op">,</span> i<span class="op">);</span></span>
<span id="cb288-460"><a href="#cb288-460" aria-hidden="true" tabindex="-1"></a>        objects<span class="op">[</span>i<span class="op">]-&gt;</span>value <span class="op">=</span> i <span class="op">*</span> <span class="fl">3.14</span><span class="op">;</span></span>
<span id="cb288-461"><a href="#cb288-461" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb288-462"><a href="#cb288-462" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-463"><a href="#cb288-463" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> iterations<span class="op">;</span> i<span class="op">++)</span></span>
<span id="cb288-464"><a href="#cb288-464" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb288-465"><a href="#cb288-465" aria-hidden="true" tabindex="-1"></a>        free<span class="op">(</span>objects<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb288-466"><a href="#cb288-466" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb288-467"><a href="#cb288-467" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-468"><a href="#cb288-468" aria-hidden="true" tabindex="-1"></a>    free<span class="op">(</span>objects<span class="op">);</span></span>
<span id="cb288-469"><a href="#cb288-469" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-470"><a href="#cb288-470" aria-hidden="true" tabindex="-1"></a>    clock_t end <span class="op">=</span> clock<span class="op">();</span></span>
<span id="cb288-471"><a href="#cb288-471" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">((</span><span class="dt">double</span><span class="op">)(</span>end <span class="op">-</span> start<span class="op">))</span> <span class="op">/</span> CLOCKS_PER_SEC<span class="op">;</span></span>
<span id="cb288-472"><a href="#cb288-472" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb288-473"><a href="#cb288-473" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-474"><a href="#cb288-474" aria-hidden="true" tabindex="-1"></a><span class="co">/* メモリプールのベンチマーク */</span></span>
<span id="cb288-475"><a href="#cb288-475" aria-hidden="true" tabindex="-1"></a><span class="dt">double</span> benchmark_pool_alloc<span class="op">(</span><span class="dt">int</span> iterations<span class="op">)</span></span>
<span id="cb288-476"><a href="#cb288-476" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb288-477"><a href="#cb288-477" aria-hidden="true" tabindex="-1"></a>    clock_t start <span class="op">=</span> clock<span class="op">();</span></span>
<span id="cb288-478"><a href="#cb288-478" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-479"><a href="#cb288-479" aria-hidden="true" tabindex="-1"></a>    MemoryPool pool<span class="op">;</span></span>
<span id="cb288-480"><a href="#cb288-480" aria-hidden="true" tabindex="-1"></a>    init_memory_pool<span class="op">(&amp;</span>pool<span class="op">,</span> <span class="kw">sizeof</span><span class="op">(</span>TestObject<span class="op">)</span> <span class="op">*</span> iterations <span class="op">*</span> <span class="dv">2</span><span class="op">);</span></span>
<span id="cb288-481"><a href="#cb288-481" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-482"><a href="#cb288-482" aria-hidden="true" tabindex="-1"></a>    TestObject <span class="op">**</span>objects <span class="op">=</span> malloc<span class="op">(</span><span class="kw">sizeof</span><span class="op">(</span>TestObject <span class="op">*)</span> <span class="op">*</span> iterations<span class="op">);</span></span>
<span id="cb288-483"><a href="#cb288-483" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb288-484"><a href="#cb288-484" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-485"><a href="#cb288-485" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> iterations<span class="op">;</span> i<span class="op">++)</span></span>
<span id="cb288-486"><a href="#cb288-486" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb288-487"><a href="#cb288-487" aria-hidden="true" tabindex="-1"></a>        objects<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> <span class="op">(</span>TestObject <span class="op">*)</span>pool_alloc<span class="op">(&amp;</span>pool<span class="op">,</span> <span class="kw">sizeof</span><span class="op">(</span>TestObject<span class="op">));</span></span>
<span id="cb288-488"><a href="#cb288-488" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>objects<span class="op">[</span>i<span class="op">])</span></span>
<span id="cb288-489"><a href="#cb288-489" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span></span>
<span id="cb288-490"><a href="#cb288-490" aria-hidden="true" tabindex="-1"></a>            objects<span class="op">[</span>i<span class="op">]-&gt;</span>id <span class="op">=</span> i<span class="op">;</span></span>
<span id="cb288-491"><a href="#cb288-491" aria-hidden="true" tabindex="-1"></a>            sprintf<span class="op">(</span>objects<span class="op">[</span>i<span class="op">]-&gt;</span>name<span class="op">,</span> <span class="st">&quot;Object_</span><span class="sc">%d</span><span class="st">&quot;</span><span class="op">,</span> i<span class="op">);</span></span>
<span id="cb288-492"><a href="#cb288-492" aria-hidden="true" tabindex="-1"></a>            objects<span class="op">[</span>i<span class="op">]-&gt;</span>value <span class="op">=</span> i <span class="op">*</span> <span class="fl">3.14</span><span class="op">;</span></span>
<span id="cb288-493"><a href="#cb288-493" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb288-494"><a href="#cb288-494" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb288-495"><a href="#cb288-495" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-496"><a href="#cb288-496" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> iterations<span class="op">;</span> i<span class="op">++)</span></span>
<span id="cb288-497"><a href="#cb288-497" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb288-498"><a href="#cb288-498" aria-hidden="true" tabindex="-1"></a>        pool_free<span class="op">(&amp;</span>pool<span class="op">,</span> objects<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb288-499"><a href="#cb288-499" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb288-500"><a href="#cb288-500" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-501"><a href="#cb288-501" aria-hidden="true" tabindex="-1"></a>    free<span class="op">(</span>objects<span class="op">);</span></span>
<span id="cb288-502"><a href="#cb288-502" aria-hidden="true" tabindex="-1"></a>    cleanup_memory_pool<span class="op">(&amp;</span>pool<span class="op">);</span></span>
<span id="cb288-503"><a href="#cb288-503" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-504"><a href="#cb288-504" aria-hidden="true" tabindex="-1"></a>    clock_t end <span class="op">=</span> clock<span class="op">();</span></span>
<span id="cb288-505"><a href="#cb288-505" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">((</span><span class="dt">double</span><span class="op">)(</span>end <span class="op">-</span> start<span class="op">))</span> <span class="op">/</span> CLOCKS_PER_SEC<span class="op">;</span></span>
<span id="cb288-506"><a href="#cb288-506" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb288-507"><a href="#cb288-507" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-508"><a href="#cb288-508" aria-hidden="true" tabindex="-1"></a><span class="co">/* オブジェクトプールのベンチマーク */</span></span>
<span id="cb288-509"><a href="#cb288-509" aria-hidden="true" tabindex="-1"></a><span class="dt">double</span> benchmark_object_pool<span class="op">(</span><span class="dt">int</span> iterations<span class="op">)</span></span>
<span id="cb288-510"><a href="#cb288-510" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb288-511"><a href="#cb288-511" aria-hidden="true" tabindex="-1"></a>    clock_t start <span class="op">=</span> clock<span class="op">();</span></span>
<span id="cb288-512"><a href="#cb288-512" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-513"><a href="#cb288-513" aria-hidden="true" tabindex="-1"></a>    ObjectPool pool<span class="op">;</span></span>
<span id="cb288-514"><a href="#cb288-514" aria-hidden="true" tabindex="-1"></a>    init_object_pool<span class="op">(&amp;</span>pool<span class="op">,</span> <span class="kw">sizeof</span><span class="op">(</span>TestObject<span class="op">),</span> iterations<span class="op">);</span></span>
<span id="cb288-515"><a href="#cb288-515" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-516"><a href="#cb288-516" aria-hidden="true" tabindex="-1"></a>    TestObject <span class="op">**</span>objects <span class="op">=</span> malloc<span class="op">(</span><span class="kw">sizeof</span><span class="op">(</span>TestObject <span class="op">*)</span> <span class="op">*</span> iterations<span class="op">);</span></span>
<span id="cb288-517"><a href="#cb288-517" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb288-518"><a href="#cb288-518" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-519"><a href="#cb288-519" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> iterations<span class="op">;</span> i<span class="op">++)</span></span>
<span id="cb288-520"><a href="#cb288-520" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb288-521"><a href="#cb288-521" aria-hidden="true" tabindex="-1"></a>        objects<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> <span class="op">(</span>TestObject <span class="op">*)</span>object_pool_get<span class="op">(&amp;</span>pool<span class="op">);</span></span>
<span id="cb288-522"><a href="#cb288-522" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>objects<span class="op">[</span>i<span class="op">])</span></span>
<span id="cb288-523"><a href="#cb288-523" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span></span>
<span id="cb288-524"><a href="#cb288-524" aria-hidden="true" tabindex="-1"></a>            objects<span class="op">[</span>i<span class="op">]-&gt;</span>id <span class="op">=</span> i<span class="op">;</span></span>
<span id="cb288-525"><a href="#cb288-525" aria-hidden="true" tabindex="-1"></a>            sprintf<span class="op">(</span>objects<span class="op">[</span>i<span class="op">]-&gt;</span>name<span class="op">,</span> <span class="st">&quot;Object_</span><span class="sc">%d</span><span class="st">&quot;</span><span class="op">,</span> i<span class="op">);</span></span>
<span id="cb288-526"><a href="#cb288-526" aria-hidden="true" tabindex="-1"></a>            objects<span class="op">[</span>i<span class="op">]-&gt;</span>value <span class="op">=</span> i <span class="op">*</span> <span class="fl">3.14</span><span class="op">;</span></span>
<span id="cb288-527"><a href="#cb288-527" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb288-528"><a href="#cb288-528" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb288-529"><a href="#cb288-529" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-530"><a href="#cb288-530" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> iterations<span class="op">;</span> i<span class="op">++)</span></span>
<span id="cb288-531"><a href="#cb288-531" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb288-532"><a href="#cb288-532" aria-hidden="true" tabindex="-1"></a>        object_pool_return<span class="op">(&amp;</span>pool<span class="op">,</span> objects<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb288-533"><a href="#cb288-533" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb288-534"><a href="#cb288-534" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-535"><a href="#cb288-535" aria-hidden="true" tabindex="-1"></a>    free<span class="op">(</span>objects<span class="op">);</span></span>
<span id="cb288-536"><a href="#cb288-536" aria-hidden="true" tabindex="-1"></a>    cleanup_object_pool<span class="op">(&amp;</span>pool<span class="op">);</span></span>
<span id="cb288-537"><a href="#cb288-537" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-538"><a href="#cb288-538" aria-hidden="true" tabindex="-1"></a>    clock_t end <span class="op">=</span> clock<span class="op">();</span></span>
<span id="cb288-539"><a href="#cb288-539" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">((</span><span class="dt">double</span><span class="op">)(</span>end <span class="op">-</span> start<span class="op">))</span> <span class="op">/</span> CLOCKS_PER_SEC<span class="op">;</span></span>
<span id="cb288-540"><a href="#cb288-540" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb288-541"><a href="#cb288-541" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-542"><a href="#cb288-542" aria-hidden="true" tabindex="-1"></a><span class="co">/* メモリリークのシミュレーション */</span></span>
<span id="cb288-543"><a href="#cb288-543" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> simulate_memory_leak<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb288-544"><a href="#cb288-544" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb288-545"><a href="#cb288-545" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">=== メモリリークシミュレーション ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb288-546"><a href="#cb288-546" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-547"><a href="#cb288-547" aria-hidden="true" tabindex="-1"></a>    CustomAllocator debug_allocator <span class="op">=</span> <span class="op">{</span></span>
<span id="cb288-548"><a href="#cb288-548" aria-hidden="true" tabindex="-1"></a>        debug_malloc<span class="op">,</span></span>
<span id="cb288-549"><a href="#cb288-549" aria-hidden="true" tabindex="-1"></a>        debug_free<span class="op">,</span></span>
<span id="cb288-550"><a href="#cb288-550" aria-hidden="true" tabindex="-1"></a>        debug_realloc<span class="op">};</span></span>
<span id="cb288-551"><a href="#cb288-551" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-552"><a href="#cb288-552" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 正常なパターン */</span></span>
<span id="cb288-553"><a href="#cb288-553" aria-hidden="true" tabindex="-1"></a>    <span class="dt">void</span> <span class="op">*</span>ptr1 <span class="op">=</span> debug_allocator<span class="op">.</span>alloc<span class="op">(</span><span class="dv">100</span><span class="op">);</span></span>
<span id="cb288-554"><a href="#cb288-554" aria-hidden="true" tabindex="-1"></a>    <span class="dt">void</span> <span class="op">*</span>ptr2 <span class="op">=</span> debug_allocator<span class="op">.</span>alloc<span class="op">(</span><span class="dv">200</span><span class="op">);</span></span>
<span id="cb288-555"><a href="#cb288-555" aria-hidden="true" tabindex="-1"></a>    debug_allocator<span class="op">.</span>free<span class="op">(</span>ptr1<span class="op">);</span></span>
<span id="cb288-556"><a href="#cb288-556" aria-hidden="true" tabindex="-1"></a>    debug_allocator<span class="op">.</span>free<span class="op">(</span>ptr2<span class="op">);</span></span>
<span id="cb288-557"><a href="#cb288-557" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-558"><a href="#cb288-558" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* リークのシミュレーション（意図的にfreeしない） */</span></span>
<span id="cb288-559"><a href="#cb288-559" aria-hidden="true" tabindex="-1"></a>    <span class="dt">void</span> <span class="op">*</span>leak_ptr <span class="op">=</span> debug_allocator<span class="op">.</span>alloc<span class="op">(</span><span class="dv">500</span><span class="op">);</span></span>
<span id="cb288-560"><a href="#cb288-560" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;リークポインタ: </span><span class="sc">%p</span><span class="st"> (解放されません)</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> leak_ptr<span class="op">);</span></span>
<span id="cb288-561"><a href="#cb288-561" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-562"><a href="#cb288-562" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* reallocのテスト */</span></span>
<span id="cb288-563"><a href="#cb288-563" aria-hidden="true" tabindex="-1"></a>    <span class="dt">void</span> <span class="op">*</span>ptr3 <span class="op">=</span> debug_allocator<span class="op">.</span>alloc<span class="op">(</span><span class="dv">50</span><span class="op">);</span></span>
<span id="cb288-564"><a href="#cb288-564" aria-hidden="true" tabindex="-1"></a>    ptr3 <span class="op">=</span> debug_allocator<span class="op">.</span>realloc<span class="op">(</span>ptr3<span class="op">,</span> <span class="dv">150</span><span class="op">);</span></span>
<span id="cb288-565"><a href="#cb288-565" aria-hidden="true" tabindex="-1"></a>    debug_allocator<span class="op">.</span>free<span class="op">(</span>ptr3<span class="op">);</span></span>
<span id="cb288-566"><a href="#cb288-566" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb288-567"><a href="#cb288-567" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-568"><a href="#cb288-568" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb288-569"><a href="#cb288-569" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb288-570"><a href="#cb288-570" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== メモリ管理の最適化技法デモ ===</span><span class="sc">\n\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb288-571"><a href="#cb288-571" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-572"><a href="#cb288-572" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* メモリアライメントの確認 */</span></span>
<span id="cb288-573"><a href="#cb288-573" aria-hidden="true" tabindex="-1"></a>    test_memory_alignment<span class="op">();</span></span>
<span id="cb288-574"><a href="#cb288-574" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-575"><a href="#cb288-575" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* メモリプールのテスト */</span></span>
<span id="cb288-576"><a href="#cb288-576" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">=== メモリプールテスト ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb288-577"><a href="#cb288-577" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>init_memory_pool<span class="op">(&amp;</span>g_memory_pool<span class="op">,</span> <span class="dv">2048</span><span class="op">))</span></span>
<span id="cb288-578"><a href="#cb288-578" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb288-579"><a href="#cb288-579" aria-hidden="true" tabindex="-1"></a>        <span class="dt">void</span> <span class="op">*</span>ptr1 <span class="op">=</span> pool_alloc<span class="op">(&amp;</span>g_memory_pool<span class="op">,</span> <span class="dv">100</span><span class="op">);</span></span>
<span id="cb288-580"><a href="#cb288-580" aria-hidden="true" tabindex="-1"></a>        <span class="dt">void</span> <span class="op">*</span>ptr2 <span class="op">=</span> pool_alloc<span class="op">(&amp;</span>g_memory_pool<span class="op">,</span> <span class="dv">200</span><span class="op">);</span></span>
<span id="cb288-581"><a href="#cb288-581" aria-hidden="true" tabindex="-1"></a>        <span class="dt">void</span> <span class="op">*</span>ptr3 <span class="op">=</span> pool_alloc<span class="op">(&amp;</span>g_memory_pool<span class="op">,</span> <span class="dv">300</span><span class="op">);</span></span>
<span id="cb288-582"><a href="#cb288-582" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-583"><a href="#cb288-583" aria-hidden="true" tabindex="-1"></a>        print_pool_status<span class="op">(&amp;</span>g_memory_pool<span class="op">);</span></span>
<span id="cb288-584"><a href="#cb288-584" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-585"><a href="#cb288-585" aria-hidden="true" tabindex="-1"></a>        pool_free<span class="op">(&amp;</span>g_memory_pool<span class="op">,</span> ptr2<span class="op">);</span></span>
<span id="cb288-586"><a href="#cb288-586" aria-hidden="true" tabindex="-1"></a>        pool_free<span class="op">(&amp;</span>g_memory_pool<span class="op">,</span> ptr1<span class="op">);</span></span>
<span id="cb288-587"><a href="#cb288-587" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-588"><a href="#cb288-588" aria-hidden="true" tabindex="-1"></a>        print_pool_status<span class="op">(&amp;</span>g_memory_pool<span class="op">);</span></span>
<span id="cb288-589"><a href="#cb288-589" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-590"><a href="#cb288-590" aria-hidden="true" tabindex="-1"></a>        <span class="dt">void</span> <span class="op">*</span>ptr4 <span class="op">=</span> pool_alloc<span class="op">(&amp;</span>g_memory_pool<span class="op">,</span> <span class="dv">150</span><span class="op">);</span></span>
<span id="cb288-591"><a href="#cb288-591" aria-hidden="true" tabindex="-1"></a>        print_pool_status<span class="op">(&amp;</span>g_memory_pool<span class="op">);</span></span>
<span id="cb288-592"><a href="#cb288-592" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-593"><a href="#cb288-593" aria-hidden="true" tabindex="-1"></a>        pool_free<span class="op">(&amp;</span>g_memory_pool<span class="op">,</span> ptr3<span class="op">);</span></span>
<span id="cb288-594"><a href="#cb288-594" aria-hidden="true" tabindex="-1"></a>        pool_free<span class="op">(&amp;</span>g_memory_pool<span class="op">,</span> ptr4<span class="op">);</span></span>
<span id="cb288-595"><a href="#cb288-595" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-596"><a href="#cb288-596" aria-hidden="true" tabindex="-1"></a>        cleanup_memory_pool<span class="op">(&amp;</span>g_memory_pool<span class="op">);</span></span>
<span id="cb288-597"><a href="#cb288-597" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb288-598"><a href="#cb288-598" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-599"><a href="#cb288-599" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* スタックアロケーターのテスト */</span></span>
<span id="cb288-600"><a href="#cb288-600" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">=== スタックアロケーターテスト ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb288-601"><a href="#cb288-601" aria-hidden="true" tabindex="-1"></a>    StackAllocator stack<span class="op">;</span></span>
<span id="cb288-602"><a href="#cb288-602" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>init_stack_allocator<span class="op">(&amp;</span>stack<span class="op">,</span> <span class="dv">1024</span><span class="op">))</span></span>
<span id="cb288-603"><a href="#cb288-603" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb288-604"><a href="#cb288-604" aria-hidden="true" tabindex="-1"></a>        <span class="dt">void</span> <span class="op">*</span>s1 <span class="op">=</span> stack_alloc<span class="op">(&amp;</span>stack<span class="op">,</span> <span class="dv">100</span><span class="op">);</span></span>
<span id="cb288-605"><a href="#cb288-605" aria-hidden="true" tabindex="-1"></a>        <span class="dt">void</span> <span class="op">*</span>s2 <span class="op">=</span> stack_alloc<span class="op">(&amp;</span>stack<span class="op">,</span> <span class="dv">200</span><span class="op">);</span></span>
<span id="cb288-606"><a href="#cb288-606" aria-hidden="true" tabindex="-1"></a>        <span class="dt">void</span> <span class="op">*</span>s3 <span class="op">=</span> stack_alloc<span class="op">(&amp;</span>stack<span class="op">,</span> <span class="dv">300</span><span class="op">);</span></span>
<span id="cb288-607"><a href="#cb288-607" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-608"><a href="#cb288-608" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;割り当て後オフセット: </span><span class="sc">%zu\n</span><span class="st">&quot;</span><span class="op">,</span> stack<span class="op">.</span>offset<span class="op">);</span></span>
<span id="cb288-609"><a href="#cb288-609" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-610"><a href="#cb288-610" aria-hidden="true" tabindex="-1"></a>        stack_reset<span class="op">(&amp;</span>stack<span class="op">);</span></span>
<span id="cb288-611"><a href="#cb288-611" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;リセット後オフセット: </span><span class="sc">%zu\n</span><span class="st">&quot;</span><span class="op">,</span> stack<span class="op">.</span>offset<span class="op">);</span></span>
<span id="cb288-612"><a href="#cb288-612" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-613"><a href="#cb288-613" aria-hidden="true" tabindex="-1"></a>        cleanup_stack_allocator<span class="op">(&amp;</span>stack<span class="op">);</span></span>
<span id="cb288-614"><a href="#cb288-614" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb288-615"><a href="#cb288-615" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-616"><a href="#cb288-616" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* オブジェクトプールのテスト */</span></span>
<span id="cb288-617"><a href="#cb288-617" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">=== オブジェクトプールテスト ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb288-618"><a href="#cb288-618" aria-hidden="true" tabindex="-1"></a>    ObjectPool obj_pool<span class="op">;</span></span>
<span id="cb288-619"><a href="#cb288-619" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>init_object_pool<span class="op">(&amp;</span>obj_pool<span class="op">,</span> <span class="kw">sizeof</span><span class="op">(</span>TestObject<span class="op">),</span> <span class="dv">5</span><span class="op">))</span></span>
<span id="cb288-620"><a href="#cb288-620" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb288-621"><a href="#cb288-621" aria-hidden="true" tabindex="-1"></a>        TestObject <span class="op">*</span>objs<span class="op">[</span><span class="dv">3</span><span class="op">];</span></span>
<span id="cb288-622"><a href="#cb288-622" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb288-623"><a href="#cb288-623" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-624"><a href="#cb288-624" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">3</span><span class="op">;</span> i<span class="op">++)</span></span>
<span id="cb288-625"><a href="#cb288-625" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span></span>
<span id="cb288-626"><a href="#cb288-626" aria-hidden="true" tabindex="-1"></a>            objs<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> <span class="op">(</span>TestObject <span class="op">*)</span>object_pool_get<span class="op">(&amp;</span>obj_pool<span class="op">);</span></span>
<span id="cb288-627"><a href="#cb288-627" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>objs<span class="op">[</span>i<span class="op">])</span></span>
<span id="cb288-628"><a href="#cb288-628" aria-hidden="true" tabindex="-1"></a>            <span class="op">{</span></span>
<span id="cb288-629"><a href="#cb288-629" aria-hidden="true" tabindex="-1"></a>                objs<span class="op">[</span>i<span class="op">]-&gt;</span>id <span class="op">=</span> i<span class="op">;</span></span>
<span id="cb288-630"><a href="#cb288-630" aria-hidden="true" tabindex="-1"></a>                sprintf<span class="op">(</span>objs<span class="op">[</span>i<span class="op">]-&gt;</span>name<span class="op">,</span> <span class="st">&quot;TestObj_</span><span class="sc">%d</span><span class="st">&quot;</span><span class="op">,</span> i<span class="op">);</span></span>
<span id="cb288-631"><a href="#cb288-631" aria-hidden="true" tabindex="-1"></a>                objs<span class="op">[</span>i<span class="op">]-&gt;</span>value <span class="op">=</span> i <span class="op">*</span> <span class="fl">2.5</span><span class="op">;</span></span>
<span id="cb288-632"><a href="#cb288-632" aria-hidden="true" tabindex="-1"></a>                printf<span class="op">(</span><span class="st">&quot;オブジェクト</span><span class="sc">%d</span><span class="st">作成: ID=</span><span class="sc">%d</span><span class="st">, Name=</span><span class="sc">%s</span><span class="st">, Value=</span><span class="sc">%.1f\n</span><span class="st">&quot;</span><span class="op">,</span></span>
<span id="cb288-633"><a href="#cb288-633" aria-hidden="true" tabindex="-1"></a>                       i<span class="op">,</span> objs<span class="op">[</span>i<span class="op">]-&gt;</span>id<span class="op">,</span> objs<span class="op">[</span>i<span class="op">]-&gt;</span>name<span class="op">,</span> objs<span class="op">[</span>i<span class="op">]-&gt;</span>value<span class="op">);</span></span>
<span id="cb288-634"><a href="#cb288-634" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb288-635"><a href="#cb288-635" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb288-636"><a href="#cb288-636" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-637"><a href="#cb288-637" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;使用中オブジェクト数: </span><span class="sc">%zu\n</span><span class="st">&quot;</span><span class="op">,</span> obj_pool<span class="op">.</span>count<span class="op">);</span></span>
<span id="cb288-638"><a href="#cb288-638" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-639"><a href="#cb288-639" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">3</span><span class="op">;</span> i<span class="op">++)</span></span>
<span id="cb288-640"><a href="#cb288-640" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span></span>
<span id="cb288-641"><a href="#cb288-641" aria-hidden="true" tabindex="-1"></a>            object_pool_return<span class="op">(&amp;</span>obj_pool<span class="op">,</span> objs<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb288-642"><a href="#cb288-642" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb288-643"><a href="#cb288-643" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-644"><a href="#cb288-644" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;返却後オブジェクト数: </span><span class="sc">%zu\n</span><span class="st">&quot;</span><span class="op">,</span> obj_pool<span class="op">.</span>count<span class="op">);</span></span>
<span id="cb288-645"><a href="#cb288-645" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-646"><a href="#cb288-646" aria-hidden="true" tabindex="-1"></a>        cleanup_object_pool<span class="op">(&amp;</span>obj_pool<span class="op">);</span></span>
<span id="cb288-647"><a href="#cb288-647" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb288-648"><a href="#cb288-648" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-649"><a href="#cb288-649" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* メモリリークのシミュレーション */</span></span>
<span id="cb288-650"><a href="#cb288-650" aria-hidden="true" tabindex="-1"></a>    simulate_memory_leak<span class="op">();</span></span>
<span id="cb288-651"><a href="#cb288-651" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-652"><a href="#cb288-652" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* ベンチマークテスト */</span></span>
<span id="cb288-653"><a href="#cb288-653" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">=== パフォーマンステスト ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb288-654"><a href="#cb288-654" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> iterations <span class="op">=</span> <span class="dv">10000</span><span class="op">;</span></span>
<span id="cb288-655"><a href="#cb288-655" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-656"><a href="#cb288-656" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;テスト回数: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> iterations<span class="op">);</span></span>
<span id="cb288-657"><a href="#cb288-657" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-658"><a href="#cb288-658" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span> std_time <span class="op">=</span> benchmark_standard_alloc<span class="op">(</span>iterations<span class="op">);</span></span>
<span id="cb288-659"><a href="#cb288-659" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;標準malloc/free: </span><span class="sc">%.6f</span><span class="st">秒</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> std_time<span class="op">);</span></span>
<span id="cb288-660"><a href="#cb288-660" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-661"><a href="#cb288-661" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span> pool_time <span class="op">=</span> benchmark_pool_alloc<span class="op">(</span>iterations<span class="op">);</span></span>
<span id="cb288-662"><a href="#cb288-662" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;メモリプール: </span><span class="sc">%.6f</span><span class="st">秒</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> pool_time<span class="op">);</span></span>
<span id="cb288-663"><a href="#cb288-663" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-664"><a href="#cb288-664" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span> obj_pool_time <span class="op">=</span> benchmark_object_pool<span class="op">(</span>iterations<span class="op">);</span></span>
<span id="cb288-665"><a href="#cb288-665" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;オブジェクトプール: </span><span class="sc">%.6f</span><span class="st">秒</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> obj_pool_time<span class="op">);</span></span>
<span id="cb288-666"><a href="#cb288-666" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-667"><a href="#cb288-667" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">パフォーマンス比較 (標準を100</span><span class="sc">%%</span><span class="st">とした場合):</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb288-668"><a href="#cb288-668" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;メモリプール: </span><span class="sc">%.1f%%\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(</span>pool_time <span class="op">/</span> std_time<span class="op">)</span> <span class="op">*</span> <span class="dv">100</span><span class="op">);</span></span>
<span id="cb288-669"><a href="#cb288-669" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;オブジェクトプール: </span><span class="sc">%.1f%%\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(</span>obj_pool_time <span class="op">/</span> std_time<span class="op">)</span> <span class="op">*</span> <span class="dv">100</span><span class="op">);</span></span>
<span id="cb288-670"><a href="#cb288-670" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-671"><a href="#cb288-671" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* メモリ使用統計 */</span></span>
<span id="cb288-672"><a href="#cb288-672" aria-hidden="true" tabindex="-1"></a>    print_memory_stats<span class="op">();</span></span>
<span id="cb288-673"><a href="#cb288-673" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-674"><a href="#cb288-674" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">=== メモリ最適化デモ完了 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb288-675"><a href="#cb288-675" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb288-676"><a href="#cb288-676" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb288-677"><a href="#cb288-677" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 id="preprocessor_advanced.c">preprocessor_advanced.c</h3>
<div class="sourceCode" id="cb289"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb289-1"><a href="#cb289-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* 高度なプリプロセッサの活用 */</span></span>
<span id="cb289-2"><a href="#cb289-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb289-3"><a href="#cb289-3" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;string.h&gt;</span></span>
<span id="cb289-4"><a href="#cb289-4" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;time.h&gt;</span></span>
<span id="cb289-5"><a href="#cb289-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb289-6"><a href="#cb289-6" aria-hidden="true" tabindex="-1"></a><span class="co">/* 基本的なマクロ定義 */</span></span>
<span id="cb289-7"><a href="#cb289-7" aria-hidden="true" tabindex="-1"></a><span class="pp">#define MAX_SIZE </span><span class="dv">100</span></span>
<span id="cb289-8"><a href="#cb289-8" aria-hidden="true" tabindex="-1"></a><span class="pp">#define PI </span><span class="fl">3.14159265359</span></span>
<span id="cb289-9"><a href="#cb289-9" aria-hidden="true" tabindex="-1"></a><span class="pp">#define SQUARE</span><span class="op">(</span><span class="pp">x</span><span class="op">)</span><span class="pp"> </span><span class="op">((</span><span class="pp">x</span><span class="op">)</span><span class="pp"> </span><span class="op">*</span><span class="pp"> </span><span class="op">(</span><span class="pp">x</span><span class="op">))</span></span>
<span id="cb289-10"><a href="#cb289-10" aria-hidden="true" tabindex="-1"></a><span class="pp">#define MAX</span><span class="op">(</span><span class="pp">a</span><span class="op">,</span><span class="pp"> b</span><span class="op">)</span><span class="pp"> </span><span class="op">((</span><span class="pp">a</span><span class="op">)</span><span class="pp"> </span><span class="op">&gt;</span><span class="pp"> </span><span class="op">(</span><span class="pp">b</span><span class="op">)</span><span class="pp"> </span><span class="op">?</span><span class="pp"> </span><span class="op">(</span><span class="pp">a</span><span class="op">)</span><span class="pp"> </span><span class="op">:</span><span class="pp"> </span><span class="op">(</span><span class="pp">b</span><span class="op">))</span></span>
<span id="cb289-11"><a href="#cb289-11" aria-hidden="true" tabindex="-1"></a><span class="pp">#define MIN</span><span class="op">(</span><span class="pp">a</span><span class="op">,</span><span class="pp"> b</span><span class="op">)</span><span class="pp"> </span><span class="op">((</span><span class="pp">a</span><span class="op">)</span><span class="pp"> </span><span class="op">&lt;</span><span class="pp"> </span><span class="op">(</span><span class="pp">b</span><span class="op">)</span><span class="pp"> </span><span class="op">?</span><span class="pp"> </span><span class="op">(</span><span class="pp">a</span><span class="op">)</span><span class="pp"> </span><span class="op">:</span><span class="pp"> </span><span class="op">(</span><span class="pp">b</span><span class="op">))</span></span>
<span id="cb289-12"><a href="#cb289-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb289-13"><a href="#cb289-13" aria-hidden="true" tabindex="-1"></a><span class="co">/* 条件付きコンパイル用フラグ */</span></span>
<span id="cb289-14"><a href="#cb289-14" aria-hidden="true" tabindex="-1"></a><span class="pp">#define DEBUG_MODE </span><span class="dv">1</span></span>
<span id="cb289-15"><a href="#cb289-15" aria-hidden="true" tabindex="-1"></a><span class="pp">#define VERBOSE_OUTPUT </span><span class="dv">1</span></span>
<span id="cb289-16"><a href="#cb289-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb289-17"><a href="#cb289-17" aria-hidden="true" tabindex="-1"></a><span class="co">/* デバッグ用マクロ */</span></span>
<span id="cb289-18"><a href="#cb289-18" aria-hidden="true" tabindex="-1"></a><span class="pp">#if DEBUG_MODE</span></span>
<span id="cb289-19"><a href="#cb289-19" aria-hidden="true" tabindex="-1"></a><span class="pp">#define DEBUG_PRINT</span><span class="op">(</span><span class="pp">fmt</span><span class="op">,</span><span class="pp"> </span><span class="op">...)</span><span class="pp"> </span><span class="op">\</span></span>
<span id="cb289-20"><a href="#cb289-20" aria-hidden="true" tabindex="-1"></a><span class="pp">    printf</span><span class="op">(</span><span class="st">&quot;[DEBUG </span><span class="sc">%s</span><span class="st">:</span><span class="sc">%d</span><span class="st">] &quot;</span><span class="pp"> fmt </span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span><span class="pp"> __FILE__</span><span class="op">,</span><span class="pp"> __LINE__</span><span class="op">,</span><span class="pp"> </span><span class="op">##</span><span class="pp">__VA_ARGS__</span><span class="op">)</span></span>
<span id="cb289-21"><a href="#cb289-21" aria-hidden="true" tabindex="-1"></a><span class="pp">#else</span></span>
<span id="cb289-22"><a href="#cb289-22" aria-hidden="true" tabindex="-1"></a><span class="pp">#define DEBUG_PRINT</span><span class="op">(</span><span class="pp">fmt</span><span class="op">,</span><span class="pp"> </span><span class="op">...)</span></span>
<span id="cb289-23"><a href="#cb289-23" aria-hidden="true" tabindex="-1"></a><span class="pp">#endif</span></span>
<span id="cb289-24"><a href="#cb289-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb289-25"><a href="#cb289-25" aria-hidden="true" tabindex="-1"></a><span class="co">/* 詳細出力用マクロ */</span></span>
<span id="cb289-26"><a href="#cb289-26" aria-hidden="true" tabindex="-1"></a><span class="pp">#if VERBOSE_OUTPUT</span></span>
<span id="cb289-27"><a href="#cb289-27" aria-hidden="true" tabindex="-1"></a><span class="pp">#define VERBOSE</span><span class="op">(</span><span class="pp">msg</span><span class="op">)</span><span class="pp"> printf</span><span class="op">(</span><span class="st">&quot;[VERBOSE] &quot;</span><span class="pp"> msg </span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">)</span></span>
<span id="cb289-28"><a href="#cb289-28" aria-hidden="true" tabindex="-1"></a><span class="pp">#else</span></span>
<span id="cb289-29"><a href="#cb289-29" aria-hidden="true" tabindex="-1"></a><span class="pp">#define VERBOSE</span><span class="op">(</span><span class="pp">msg</span><span class="op">)</span></span>
<span id="cb289-30"><a href="#cb289-30" aria-hidden="true" tabindex="-1"></a><span class="pp">#endif</span></span>
<span id="cb289-31"><a href="#cb289-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb289-32"><a href="#cb289-32" aria-hidden="true" tabindex="-1"></a><span class="co">/* 文字列化マクロ */</span></span>
<span id="cb289-33"><a href="#cb289-33" aria-hidden="true" tabindex="-1"></a><span class="pp">#define STRINGIFY</span><span class="op">(</span><span class="pp">x</span><span class="op">)</span><span class="pp"> </span><span class="op">#</span><span class="pp">x</span></span>
<span id="cb289-34"><a href="#cb289-34" aria-hidden="true" tabindex="-1"></a><span class="pp">#define TOSTRING</span><span class="op">(</span><span class="pp">x</span><span class="op">)</span><span class="pp"> STRINGIFY</span><span class="op">(</span><span class="pp">x</span><span class="op">)</span></span>
<span id="cb289-35"><a href="#cb289-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb289-36"><a href="#cb289-36" aria-hidden="true" tabindex="-1"></a><span class="co">/* 連結マクロ */</span></span>
<span id="cb289-37"><a href="#cb289-37" aria-hidden="true" tabindex="-1"></a><span class="pp">#define CONCAT</span><span class="op">(</span><span class="pp">a</span><span class="op">,</span><span class="pp"> b</span><span class="op">)</span><span class="pp"> a</span><span class="op">##</span><span class="pp">b</span></span>
<span id="cb289-38"><a href="#cb289-38" aria-hidden="true" tabindex="-1"></a><span class="pp">#define MAKE_FUNCTION_NAME</span><span class="op">(</span><span class="pp">prefix</span><span class="op">,</span><span class="pp"> suffix</span><span class="op">)</span><span class="pp"> CONCAT</span><span class="op">(</span><span class="pp">prefix</span><span class="op">,</span><span class="pp"> suffix</span><span class="op">)</span></span>
<span id="cb289-39"><a href="#cb289-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb289-40"><a href="#cb289-40" aria-hidden="true" tabindex="-1"></a><span class="co">/* 多行マクロ */</span></span>
<span id="cb289-41"><a href="#cb289-41" aria-hidden="true" tabindex="-1"></a><span class="pp">#define SAFE_DIVIDE</span><span class="op">(</span><span class="pp">a</span><span class="op">,</span><span class="pp"> b</span><span class="op">,</span><span class="pp"> result</span><span class="op">)</span><span class="pp">                         </span><span class="op">\</span></span>
<span id="cb289-42"><a href="#cb289-42" aria-hidden="true" tabindex="-1"></a><span class="pp">    </span><span class="cf">do</span><span class="pp">                                                    </span><span class="op">\</span></span>
<span id="cb289-43"><a href="#cb289-43" aria-hidden="true" tabindex="-1"></a><span class="pp">    </span><span class="op">{</span><span class="pp">                                                     </span><span class="op">\</span></span>
<span id="cb289-44"><a href="#cb289-44" aria-hidden="true" tabindex="-1"></a><span class="pp">        </span><span class="cf">if</span><span class="pp"> </span><span class="op">((</span><span class="pp">b</span><span class="op">)</span><span class="pp"> </span><span class="op">!=</span><span class="pp"> </span><span class="dv">0</span><span class="op">)</span><span class="pp">                                     </span><span class="op">\</span></span>
<span id="cb289-45"><a href="#cb289-45" aria-hidden="true" tabindex="-1"></a><span class="pp">        </span><span class="op">{</span><span class="pp">                                                 </span><span class="op">\</span></span>
<span id="cb289-46"><a href="#cb289-46" aria-hidden="true" tabindex="-1"></a><span class="pp">            </span><span class="op">*(</span><span class="pp">result</span><span class="op">)</span><span class="pp"> </span><span class="op">=</span><span class="pp"> </span><span class="op">(</span><span class="pp">a</span><span class="op">)</span><span class="pp"> </span><span class="op">/</span><span class="pp"> </span><span class="op">(</span><span class="pp">b</span><span class="op">);</span><span class="pp">                        </span><span class="op">\</span></span>
<span id="cb289-47"><a href="#cb289-47" aria-hidden="true" tabindex="-1"></a><span class="pp">        </span><span class="op">}</span><span class="pp">                                                 </span><span class="op">\</span></span>
<span id="cb289-48"><a href="#cb289-48" aria-hidden="true" tabindex="-1"></a><span class="pp">        </span><span class="cf">else</span><span class="pp">                                              </span><span class="op">\</span></span>
<span id="cb289-49"><a href="#cb289-49" aria-hidden="true" tabindex="-1"></a><span class="pp">        </span><span class="op">{</span><span class="pp">                                                 </span><span class="op">\</span></span>
<span id="cb289-50"><a href="#cb289-50" aria-hidden="true" tabindex="-1"></a><span class="pp">            printf</span><span class="op">(</span><span class="st">&quot;エラー: ゼロ除算が検出されました</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span><span class="pp"> </span><span class="op">\</span></span>
<span id="cb289-51"><a href="#cb289-51" aria-hidden="true" tabindex="-1"></a><span class="pp">            </span><span class="op">*(</span><span class="pp">result</span><span class="op">)</span><span class="pp"> </span><span class="op">=</span><span class="pp"> </span><span class="dv">0</span><span class="op">;</span><span class="pp">                                </span><span class="op">\</span></span>
<span id="cb289-52"><a href="#cb289-52" aria-hidden="true" tabindex="-1"></a><span class="pp">        </span><span class="op">}</span><span class="pp">                                                 </span><span class="op">\</span></span>
<span id="cb289-53"><a href="#cb289-53" aria-hidden="true" tabindex="-1"></a><span class="pp">    </span><span class="op">}</span><span class="pp"> </span><span class="cf">while</span><span class="pp"> </span><span class="op">(</span><span class="dv">0</span><span class="op">)</span></span>
<span id="cb289-54"><a href="#cb289-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb289-55"><a href="#cb289-55" aria-hidden="true" tabindex="-1"></a><span class="co">/* 配列のサイズを取得するマクロ */</span></span>
<span id="cb289-56"><a href="#cb289-56" aria-hidden="true" tabindex="-1"></a><span class="pp">#define ARRAY_SIZE</span><span class="op">(</span><span class="pp">arr</span><span class="op">)</span><span class="pp"> </span><span class="op">(</span><span class="kw">sizeof</span><span class="op">(</span><span class="pp">arr</span><span class="op">)</span><span class="pp"> </span><span class="op">/</span><span class="pp"> </span><span class="kw">sizeof</span><span class="op">((</span><span class="pp">arr</span><span class="op">)[</span><span class="dv">0</span><span class="op">]))</span></span>
<span id="cb289-57"><a href="#cb289-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb289-58"><a href="#cb289-58" aria-hidden="true" tabindex="-1"></a><span class="co">/* メモリ安全な操作マクロ */</span></span>
<span id="cb289-59"><a href="#cb289-59" aria-hidden="true" tabindex="-1"></a><span class="pp">#define SAFE_STRCPY</span><span class="op">(</span><span class="pp">dest</span><span class="op">,</span><span class="pp"> src</span><span class="op">,</span><span class="pp"> size</span><span class="op">)</span><span class="pp">  </span><span class="op">\</span></span>
<span id="cb289-60"><a href="#cb289-60" aria-hidden="true" tabindex="-1"></a><span class="pp">    </span><span class="cf">do</span><span class="pp">                                </span><span class="op">\</span></span>
<span id="cb289-61"><a href="#cb289-61" aria-hidden="true" tabindex="-1"></a><span class="pp">    </span><span class="op">{</span><span class="pp">                                 </span><span class="op">\</span></span>
<span id="cb289-62"><a href="#cb289-62" aria-hidden="true" tabindex="-1"></a><span class="pp">        strncpy</span><span class="op">(</span><span class="pp">dest</span><span class="op">,</span><span class="pp"> src</span><span class="op">,</span><span class="pp"> size </span><span class="op">-</span><span class="pp"> </span><span class="dv">1</span><span class="op">);</span><span class="pp"> </span><span class="op">\</span></span>
<span id="cb289-63"><a href="#cb289-63" aria-hidden="true" tabindex="-1"></a><span class="pp">        </span><span class="op">(</span><span class="pp">dest</span><span class="op">)[(</span><span class="pp">size</span><span class="op">)</span><span class="pp"> </span><span class="op">-</span><span class="pp"> </span><span class="dv">1</span><span class="op">]</span><span class="pp"> </span><span class="op">=</span><span class="pp"> </span><span class="ch">&#39;</span><span class="sc">\0</span><span class="ch">&#39;</span><span class="op">;</span><span class="pp">    </span><span class="op">\</span></span>
<span id="cb289-64"><a href="#cb289-64" aria-hidden="true" tabindex="-1"></a><span class="pp">    </span><span class="op">}</span><span class="pp"> </span><span class="cf">while</span><span class="pp"> </span><span class="op">(</span><span class="dv">0</span><span class="op">)</span></span>
<span id="cb289-65"><a href="#cb289-65" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb289-66"><a href="#cb289-66" aria-hidden="true" tabindex="-1"></a><span class="co">/* 範囲チェック付きアクセスマクロ */</span></span>
<span id="cb289-67"><a href="#cb289-67" aria-hidden="true" tabindex="-1"></a><span class="pp">#define SAFE_ARRAY_ACCESS</span><span class="op">(</span><span class="pp">arr</span><span class="op">,</span><span class="pp"> index</span><span class="op">,</span><span class="pp"> size</span><span class="op">)</span><span class="pp"> </span><span class="op">\</span></span>
<span id="cb289-68"><a href="#cb289-68" aria-hidden="true" tabindex="-1"></a><span class="pp">    </span><span class="op">((</span><span class="pp">index</span><span class="op">)</span><span class="pp"> </span><span class="op">&gt;=</span><span class="pp"> </span><span class="dv">0</span><span class="pp"> </span><span class="op">&amp;&amp;</span><span class="pp"> </span><span class="op">(</span><span class="pp">index</span><span class="op">)</span><span class="pp"> </span><span class="op">&lt;</span><span class="pp"> </span><span class="op">(</span><span class="pp">size</span><span class="op">)</span><span class="pp"> </span><span class="op">?</span><span class="pp"> </span><span class="op">(</span><span class="pp">arr</span><span class="op">)[</span><span class="pp">index</span><span class="op">]</span><span class="pp"> </span><span class="op">:</span><span class="pp"> </span><span class="dv">0</span><span class="op">)</span></span>
<span id="cb289-69"><a href="#cb289-69" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb289-70"><a href="#cb289-70" aria-hidden="true" tabindex="-1"></a><span class="co">/* ビット操作マクロ */</span></span>
<span id="cb289-71"><a href="#cb289-71" aria-hidden="true" tabindex="-1"></a><span class="pp">#define SET_BIT</span><span class="op">(</span><span class="pp">value</span><span class="op">,</span><span class="pp"> bit</span><span class="op">)</span><span class="pp"> </span><span class="op">((</span><span class="pp">value</span><span class="op">)</span><span class="pp"> </span><span class="op">|=</span><span class="pp"> </span><span class="op">(</span><span class="dv">1</span><span class="pp"> </span><span class="op">&lt;&lt;</span><span class="pp"> </span><span class="op">(</span><span class="pp">bit</span><span class="op">)))</span></span>
<span id="cb289-72"><a href="#cb289-72" aria-hidden="true" tabindex="-1"></a><span class="pp">#define CLEAR_BIT</span><span class="op">(</span><span class="pp">value</span><span class="op">,</span><span class="pp"> bit</span><span class="op">)</span><span class="pp"> </span><span class="op">((</span><span class="pp">value</span><span class="op">)</span><span class="pp"> </span><span class="op">&amp;=</span><span class="pp"> </span><span class="op">~(</span><span class="dv">1</span><span class="pp"> </span><span class="op">&lt;&lt;</span><span class="pp"> </span><span class="op">(</span><span class="pp">bit</span><span class="op">)))</span></span>
<span id="cb289-73"><a href="#cb289-73" aria-hidden="true" tabindex="-1"></a><span class="pp">#define TOGGLE_BIT</span><span class="op">(</span><span class="pp">value</span><span class="op">,</span><span class="pp"> bit</span><span class="op">)</span><span class="pp"> </span><span class="op">((</span><span class="pp">value</span><span class="op">)</span><span class="pp"> </span><span class="op">^=</span><span class="pp"> </span><span class="op">(</span><span class="dv">1</span><span class="pp"> </span><span class="op">&lt;&lt;</span><span class="pp"> </span><span class="op">(</span><span class="pp">bit</span><span class="op">)))</span></span>
<span id="cb289-74"><a href="#cb289-74" aria-hidden="true" tabindex="-1"></a><span class="pp">#define CHECK_BIT</span><span class="op">(</span><span class="pp">value</span><span class="op">,</span><span class="pp"> bit</span><span class="op">)</span><span class="pp"> </span><span class="op">(((</span><span class="pp">value</span><span class="op">)</span><span class="pp"> </span><span class="op">&gt;&gt;</span><span class="pp"> </span><span class="op">(</span><span class="pp">bit</span><span class="op">))</span><span class="pp"> </span><span class="op">&amp;</span><span class="pp"> </span><span class="dv">1</span><span class="op">)</span></span>
<span id="cb289-75"><a href="#cb289-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb289-76"><a href="#cb289-76" aria-hidden="true" tabindex="-1"></a><span class="co">/* 条件付きマクロ定義 */</span></span>
<span id="cb289-77"><a href="#cb289-77" aria-hidden="true" tabindex="-1"></a><span class="pp">#ifdef _WIN32</span></span>
<span id="cb289-78"><a href="#cb289-78" aria-hidden="true" tabindex="-1"></a><span class="pp">#define PLATFORM </span><span class="st">&quot;Windows&quot;</span></span>
<span id="cb289-79"><a href="#cb289-79" aria-hidden="true" tabindex="-1"></a><span class="pp">#define PATH_SEPARATOR </span><span class="st">&quot;</span><span class="sc">\\</span><span class="st">&quot;</span></span>
<span id="cb289-80"><a href="#cb289-80" aria-hidden="true" tabindex="-1"></a><span class="pp">#elif defined(__linux__)</span></span>
<span id="cb289-81"><a href="#cb289-81" aria-hidden="true" tabindex="-1"></a><span class="pp">#define PLATFORM </span><span class="st">&quot;Linux&quot;</span></span>
<span id="cb289-82"><a href="#cb289-82" aria-hidden="true" tabindex="-1"></a><span class="pp">#define PATH_SEPARATOR </span><span class="st">&quot;/&quot;</span></span>
<span id="cb289-83"><a href="#cb289-83" aria-hidden="true" tabindex="-1"></a><span class="pp">#elif defined(__APPLE__)</span></span>
<span id="cb289-84"><a href="#cb289-84" aria-hidden="true" tabindex="-1"></a><span class="pp">#define PLATFORM </span><span class="st">&quot;macOS&quot;</span></span>
<span id="cb289-85"><a href="#cb289-85" aria-hidden="true" tabindex="-1"></a><span class="pp">#define PATH_SEPARATOR </span><span class="st">&quot;/&quot;</span></span>
<span id="cb289-86"><a href="#cb289-86" aria-hidden="true" tabindex="-1"></a><span class="pp">#else</span></span>
<span id="cb289-87"><a href="#cb289-87" aria-hidden="true" tabindex="-1"></a><span class="pp">#define PLATFORM </span><span class="st">&quot;Unknown&quot;</span></span>
<span id="cb289-88"><a href="#cb289-88" aria-hidden="true" tabindex="-1"></a><span class="pp">#define PATH_SEPARATOR </span><span class="st">&quot;/&quot;</span></span>
<span id="cb289-89"><a href="#cb289-89" aria-hidden="true" tabindex="-1"></a><span class="pp">#endif</span></span>
<span id="cb289-90"><a href="#cb289-90" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb289-91"><a href="#cb289-91" aria-hidden="true" tabindex="-1"></a><span class="co">/* コンパイル情報マクロ */</span></span>
<span id="cb289-92"><a href="#cb289-92" aria-hidden="true" tabindex="-1"></a><span class="pp">#define COMPILE_INFO</span><span class="op">()</span><span class="pp">                            </span><span class="op">\</span></span>
<span id="cb289-93"><a href="#cb289-93" aria-hidden="true" tabindex="-1"></a><span class="pp">    printf</span><span class="op">(</span><span class="st">&quot;コンパイル情報:</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span><span class="pp">                  </span><span class="op">\</span></span>
<span id="cb289-94"><a href="#cb289-94" aria-hidden="true" tabindex="-1"></a><span class="pp">    printf</span><span class="op">(</span><span class="st">&quot;  ファイル: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span><span class="pp"> __FILE__</span><span class="op">);</span><span class="pp">         </span><span class="op">\</span></span>
<span id="cb289-95"><a href="#cb289-95" aria-hidden="true" tabindex="-1"></a><span class="pp">    printf</span><span class="op">(</span><span class="st">&quot;  日付: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span><span class="pp"> __DATE__</span><span class="op">);</span><span class="pp">             </span><span class="op">\</span></span>
<span id="cb289-96"><a href="#cb289-96" aria-hidden="true" tabindex="-1"></a><span class="pp">    printf</span><span class="op">(</span><span class="st">&quot;  時刻: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span><span class="pp"> __TIME__</span><span class="op">);</span><span class="pp">             </span><span class="op">\</span></span>
<span id="cb289-97"><a href="#cb289-97" aria-hidden="true" tabindex="-1"></a><span class="pp">    printf</span><span class="op">(</span><span class="st">&quot;  プラットフォーム: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span><span class="pp"> PLATFORM</span><span class="op">);</span><span class="pp"> </span><span class="op">\</span></span>
<span id="cb289-98"><a href="#cb289-98" aria-hidden="true" tabindex="-1"></a><span class="pp">    printf</span><span class="op">(</span><span class="st">&quot;  C標準: &quot;</span><span class="pp"> TOSTRING</span><span class="op">(</span><span class="pp">__STDC_VERSION__</span><span class="op">)</span><span class="pp"> </span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">)</span></span>
<span id="cb289-99"><a href="#cb289-99" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb289-100"><a href="#cb289-100" aria-hidden="true" tabindex="-1"></a><span class="co">/* 動的に生成される関数群 */</span></span>
<span id="cb289-101"><a href="#cb289-101" aria-hidden="true" tabindex="-1"></a><span class="pp">#define DECLARE_OPERATION_FUNCTION</span><span class="op">(</span><span class="pp">type</span><span class="op">,</span><span class="pp"> name</span><span class="op">,</span><span class="pp"> op</span><span class="op">)</span><span class="pp">            </span><span class="op">\</span></span>
<span id="cb289-102"><a href="#cb289-102" aria-hidden="true" tabindex="-1"></a><span class="pp">    type MAKE_FUNCTION_NAME</span><span class="op">(</span><span class="pp">name</span><span class="op">,</span><span class="pp"> _operation</span><span class="op">)(</span><span class="pp">type a</span><span class="op">,</span><span class="pp"> type b</span><span class="op">)</span><span class="pp"> </span><span class="op">\</span></span>
<span id="cb289-103"><a href="#cb289-103" aria-hidden="true" tabindex="-1"></a><span class="pp">    </span><span class="op">{</span><span class="pp">                                                         </span><span class="op">\</span></span>
<span id="cb289-104"><a href="#cb289-104" aria-hidden="true" tabindex="-1"></a><span class="pp">        DEBUG_PRINT</span><span class="op">(</span><span class="st">&quot;演算実行: </span><span class="sc">%s</span><span class="st">&quot;</span><span class="op">,</span><span class="pp"> STRINGIFY</span><span class="op">(</span><span class="pp">name</span><span class="op">));</span><span class="pp">         </span><span class="op">\</span></span>
<span id="cb289-105"><a href="#cb289-105" aria-hidden="true" tabindex="-1"></a><span class="pp">        </span><span class="cf">return</span><span class="pp"> a op b</span><span class="op">;</span><span class="pp">                                        </span><span class="op">\</span></span>
<span id="cb289-106"><a href="#cb289-106" aria-hidden="true" tabindex="-1"></a><span class="pp">    </span><span class="op">}</span></span>
<span id="cb289-107"><a href="#cb289-107" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb289-108"><a href="#cb289-108" aria-hidden="true" tabindex="-1"></a><span class="co">/* 各種データ型用の演算関数を生成 */</span></span>
<span id="cb289-109"><a href="#cb289-109" aria-hidden="true" tabindex="-1"></a>DECLARE_OPERATION_FUNCTION<span class="op">(</span><span class="dt">int</span><span class="op">,</span> add_int<span class="op">,</span> <span class="op">+)</span></span>
<span id="cb289-110"><a href="#cb289-110" aria-hidden="true" tabindex="-1"></a>DECLARE_OPERATION_FUNCTION<span class="op">(</span><span class="dt">int</span><span class="op">,</span> sub_int<span class="op">,</span> <span class="op">-)</span></span>
<span id="cb289-111"><a href="#cb289-111" aria-hidden="true" tabindex="-1"></a>DECLARE_OPERATION_FUNCTION<span class="op">(</span><span class="dt">int</span><span class="op">,</span> mul_int<span class="op">,</span> <span class="op">*)</span></span>
<span id="cb289-112"><a href="#cb289-112" aria-hidden="true" tabindex="-1"></a>DECLARE_OPERATION_FUNCTION<span class="op">(</span><span class="dt">double</span><span class="op">,</span> add_double<span class="op">,</span> <span class="op">+)</span></span>
<span id="cb289-113"><a href="#cb289-113" aria-hidden="true" tabindex="-1"></a>DECLARE_OPERATION_FUNCTION<span class="op">(</span><span class="dt">double</span><span class="op">,</span> sub_double<span class="op">,</span> <span class="op">-)</span></span>
<span id="cb289-114"><a href="#cb289-114" aria-hidden="true" tabindex="-1"></a>DECLARE_OPERATION_FUNCTION<span class="op">(</span><span class="dt">double</span><span class="op">,</span> mul_double<span class="op">,</span> <span class="op">*)</span></span>
<span id="cb289-115"><a href="#cb289-115" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb289-116"><a href="#cb289-116" aria-hidden="true" tabindex="-1"></a><span class="co">/* 型判定マクロ（GCC拡張機能） - 教育目的でコメントアウト */</span></span>
<span id="cb289-117"><a href="#cb289-117" aria-hidden="true" tabindex="-1"></a><span class="co">/* #define IS_SAME_TYPE(a, b) __builtin_types_compatible_p(typeof(a), typeof(b)) */</span></span>
<span id="cb289-118"><a href="#cb289-118" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb289-119"><a href="#cb289-119" aria-hidden="true" tabindex="-1"></a><span class="co">/* 汎用スワップマクロ（型固有版を使用） */</span></span>
<span id="cb289-120"><a href="#cb289-120" aria-hidden="true" tabindex="-1"></a><span class="pp">#define SWAP_INT</span><span class="op">(</span><span class="pp">a</span><span class="op">,</span><span class="pp"> b</span><span class="op">)</span><span class="pp">        </span><span class="op">\</span></span>
<span id="cb289-121"><a href="#cb289-121" aria-hidden="true" tabindex="-1"></a><span class="pp">    </span><span class="cf">do</span><span class="pp">                        </span><span class="op">\</span></span>
<span id="cb289-122"><a href="#cb289-122" aria-hidden="true" tabindex="-1"></a><span class="pp">    </span><span class="op">{</span><span class="pp">                         </span><span class="op">\</span></span>
<span id="cb289-123"><a href="#cb289-123" aria-hidden="true" tabindex="-1"></a><span class="pp">        </span><span class="dt">int</span><span class="pp"> temp </span><span class="op">=</span><span class="pp"> </span><span class="op">(</span><span class="pp">a</span><span class="op">);</span><span class="pp">       </span><span class="op">\</span></span>
<span id="cb289-124"><a href="#cb289-124" aria-hidden="true" tabindex="-1"></a><span class="pp">        </span><span class="op">(</span><span class="pp">a</span><span class="op">)</span><span class="pp"> </span><span class="op">=</span><span class="pp"> </span><span class="op">(</span><span class="pp">b</span><span class="op">);</span><span class="pp">            </span><span class="op">\</span></span>
<span id="cb289-125"><a href="#cb289-125" aria-hidden="true" tabindex="-1"></a><span class="pp">        </span><span class="op">(</span><span class="pp">b</span><span class="op">)</span><span class="pp"> </span><span class="op">=</span><span class="pp"> temp</span><span class="op">;</span><span class="pp">           </span><span class="op">\</span></span>
<span id="cb289-126"><a href="#cb289-126" aria-hidden="true" tabindex="-1"></a><span class="pp">    </span><span class="op">}</span><span class="pp"> </span><span class="cf">while</span><span class="pp"> </span><span class="op">(</span><span class="dv">0</span><span class="op">)</span></span>
<span id="cb289-127"><a href="#cb289-127" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb289-128"><a href="#cb289-128" aria-hidden="true" tabindex="-1"></a><span class="pp">#define SWAP_DOUBLE</span><span class="op">(</span><span class="pp">a</span><span class="op">,</span><span class="pp"> b</span><span class="op">)</span><span class="pp">     </span><span class="op">\</span></span>
<span id="cb289-129"><a href="#cb289-129" aria-hidden="true" tabindex="-1"></a><span class="pp">    </span><span class="cf">do</span><span class="pp">                        </span><span class="op">\</span></span>
<span id="cb289-130"><a href="#cb289-130" aria-hidden="true" tabindex="-1"></a><span class="pp">    </span><span class="op">{</span><span class="pp">                         </span><span class="op">\</span></span>
<span id="cb289-131"><a href="#cb289-131" aria-hidden="true" tabindex="-1"></a><span class="pp">        </span><span class="dt">double</span><span class="pp"> temp </span><span class="op">=</span><span class="pp"> </span><span class="op">(</span><span class="pp">a</span><span class="op">);</span><span class="pp">    </span><span class="op">\</span></span>
<span id="cb289-132"><a href="#cb289-132" aria-hidden="true" tabindex="-1"></a><span class="pp">        </span><span class="op">(</span><span class="pp">a</span><span class="op">)</span><span class="pp"> </span><span class="op">=</span><span class="pp"> </span><span class="op">(</span><span class="pp">b</span><span class="op">);</span><span class="pp">            </span><span class="op">\</span></span>
<span id="cb289-133"><a href="#cb289-133" aria-hidden="true" tabindex="-1"></a><span class="pp">        </span><span class="op">(</span><span class="pp">b</span><span class="op">)</span><span class="pp"> </span><span class="op">=</span><span class="pp"> temp</span><span class="op">;</span><span class="pp">           </span><span class="op">\</span></span>
<span id="cb289-134"><a href="#cb289-134" aria-hidden="true" tabindex="-1"></a><span class="pp">    </span><span class="op">}</span><span class="pp"> </span><span class="cf">while</span><span class="pp"> </span><span class="op">(</span><span class="dv">0</span><span class="op">)</span></span>
<span id="cb289-135"><a href="#cb289-135" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb289-136"><a href="#cb289-136" aria-hidden="true" tabindex="-1"></a><span class="co">/* エラーチェック付きマクロ */</span></span>
<span id="cb289-137"><a href="#cb289-137" aria-hidden="true" tabindex="-1"></a><span class="pp">#define CHECK_NULL</span><span class="op">(</span><span class="pp">ptr</span><span class="op">,</span><span class="pp"> action</span><span class="op">)</span><span class="pp">                                                           </span><span class="op">\</span></span>
<span id="cb289-138"><a href="#cb289-138" aria-hidden="true" tabindex="-1"></a><span class="pp">    </span><span class="cf">do</span><span class="pp">                                                                                    </span><span class="op">\</span></span>
<span id="cb289-139"><a href="#cb289-139" aria-hidden="true" tabindex="-1"></a><span class="pp">    </span><span class="op">{</span><span class="pp">                                                                                     </span><span class="op">\</span></span>
<span id="cb289-140"><a href="#cb289-140" aria-hidden="true" tabindex="-1"></a><span class="pp">        </span><span class="cf">if</span><span class="pp"> </span><span class="op">((</span><span class="pp">ptr</span><span class="op">)</span><span class="pp"> </span><span class="op">==</span><span class="pp"> NULL</span><span class="op">)</span><span class="pp">                                                                </span><span class="op">\</span></span>
<span id="cb289-141"><a href="#cb289-141" aria-hidden="true" tabindex="-1"></a><span class="pp">        </span><span class="op">{</span><span class="pp">                                                                                 </span><span class="op">\</span></span>
<span id="cb289-142"><a href="#cb289-142" aria-hidden="true" tabindex="-1"></a><span class="pp">            printf</span><span class="op">(</span><span class="st">&quot;エラー: NULLポインタが検出されました (</span><span class="sc">%s</span><span class="st">:</span><span class="sc">%d</span><span class="st">)</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span><span class="pp"> __FILE__</span><span class="op">,</span><span class="pp"> __LINE__</span><span class="op">);</span><span class="pp"> </span><span class="op">\</span></span>
<span id="cb289-143"><a href="#cb289-143" aria-hidden="true" tabindex="-1"></a><span class="pp">            action</span><span class="op">;</span><span class="pp">                                                                       </span><span class="op">\</span></span>
<span id="cb289-144"><a href="#cb289-144" aria-hidden="true" tabindex="-1"></a><span class="pp">        </span><span class="op">}</span><span class="pp">                                                                                 </span><span class="op">\</span></span>
<span id="cb289-145"><a href="#cb289-145" aria-hidden="true" tabindex="-1"></a><span class="pp">    </span><span class="op">}</span><span class="pp"> </span><span class="cf">while</span><span class="pp"> </span><span class="op">(</span><span class="dv">0</span><span class="op">)</span></span>
<span id="cb289-146"><a href="#cb289-146" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb289-147"><a href="#cb289-147" aria-hidden="true" tabindex="-1"></a><span class="co">/* ベンチマーク用マクロ */</span></span>
<span id="cb289-148"><a href="#cb289-148" aria-hidden="true" tabindex="-1"></a><span class="pp">#define BENCHMARK_START</span><span class="op">()</span><span class="pp"> </span><span class="op">\</span></span>
<span id="cb289-149"><a href="#cb289-149" aria-hidden="true" tabindex="-1"></a><span class="pp">    clock_t start_time </span><span class="op">=</span><span class="pp"> clock</span><span class="op">()</span></span>
<span id="cb289-150"><a href="#cb289-150" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb289-151"><a href="#cb289-151" aria-hidden="true" tabindex="-1"></a><span class="pp">#define BENCHMARK_END</span><span class="op">(</span><span class="pp">operation_name</span><span class="op">)</span><span class="pp">                                        </span><span class="op">\</span></span>
<span id="cb289-152"><a href="#cb289-152" aria-hidden="true" tabindex="-1"></a><span class="pp">    </span><span class="cf">do</span><span class="pp">                                                                       </span><span class="op">\</span></span>
<span id="cb289-153"><a href="#cb289-153" aria-hidden="true" tabindex="-1"></a><span class="pp">    </span><span class="op">{</span><span class="pp">                                                                        </span><span class="op">\</span></span>
<span id="cb289-154"><a href="#cb289-154" aria-hidden="true" tabindex="-1"></a><span class="pp">        clock_t end_time </span><span class="op">=</span><span class="pp"> clock</span><span class="op">();</span><span class="pp">                                          </span><span class="op">\</span></span>
<span id="cb289-155"><a href="#cb289-155" aria-hidden="true" tabindex="-1"></a><span class="pp">        </span><span class="dt">double</span><span class="pp"> elapsed </span><span class="op">=</span><span class="pp"> </span><span class="op">((</span><span class="dt">double</span><span class="op">)(</span><span class="pp">end_time </span><span class="op">-</span><span class="pp"> start_time</span><span class="op">))</span><span class="pp"> </span><span class="op">/</span><span class="pp"> CLOCKS_PER_SEC</span><span class="op">;</span><span class="pp"> </span><span class="op">\</span></span>
<span id="cb289-156"><a href="#cb289-156" aria-hidden="true" tabindex="-1"></a><span class="pp">        printf</span><span class="op">(</span><span class="st">&quot;ベンチマーク [</span><span class="sc">%s</span><span class="st">]: </span><span class="sc">%.6f</span><span class="st">秒</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span><span class="pp"> operation_name</span><span class="op">,</span><span class="pp"> elapsed</span><span class="op">);</span><span class="pp">      </span><span class="op">\</span></span>
<span id="cb289-157"><a href="#cb289-157" aria-hidden="true" tabindex="-1"></a><span class="pp">    </span><span class="op">}</span><span class="pp"> </span><span class="cf">while</span><span class="pp"> </span><span class="op">(</span><span class="dv">0</span><span class="op">)</span></span>
<span id="cb289-158"><a href="#cb289-158" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb289-159"><a href="#cb289-159" aria-hidden="true" tabindex="-1"></a><span class="co">/* アサーションマクロ */</span></span>
<span id="cb289-160"><a href="#cb289-160" aria-hidden="true" tabindex="-1"></a><span class="pp">#define ASSERT</span><span class="op">(</span><span class="pp">condition</span><span class="op">,</span><span class="pp"> message</span><span class="op">)</span><span class="pp">                                                 </span><span class="op">\</span></span>
<span id="cb289-161"><a href="#cb289-161" aria-hidden="true" tabindex="-1"></a><span class="pp">    </span><span class="cf">do</span><span class="pp">                                                                             </span><span class="op">\</span></span>
<span id="cb289-162"><a href="#cb289-162" aria-hidden="true" tabindex="-1"></a><span class="pp">    </span><span class="op">{</span><span class="pp">                                                                              </span><span class="op">\</span></span>
<span id="cb289-163"><a href="#cb289-163" aria-hidden="true" tabindex="-1"></a><span class="pp">        </span><span class="cf">if</span><span class="pp"> </span><span class="op">(!(</span><span class="pp">condition</span><span class="op">))</span><span class="pp">                                                          </span><span class="op">\</span></span>
<span id="cb289-164"><a href="#cb289-164" aria-hidden="true" tabindex="-1"></a><span class="pp">        </span><span class="op">{</span><span class="pp">                                                                          </span><span class="op">\</span></span>
<span id="cb289-165"><a href="#cb289-165" aria-hidden="true" tabindex="-1"></a><span class="pp">            printf</span><span class="op">(</span><span class="st">&quot;アサーション失敗: </span><span class="sc">%s</span><span class="st"> (</span><span class="sc">%s</span><span class="st">:</span><span class="sc">%d</span><span class="st">)</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span><span class="pp"> message</span><span class="op">,</span><span class="pp"> __FILE__</span><span class="op">,</span><span class="pp"> __LINE__</span><span class="op">);</span><span class="pp"> </span><span class="op">\</span></span>
<span id="cb289-166"><a href="#cb289-166" aria-hidden="true" tabindex="-1"></a><span class="pp">            printf</span><span class="op">(</span><span class="st">&quot;条件: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span><span class="pp"> STRINGIFY</span><span class="op">(</span><span class="pp">condition</span><span class="op">));</span><span class="pp">                            </span><span class="op">\</span></span>
<span id="cb289-167"><a href="#cb289-167" aria-hidden="true" tabindex="-1"></a><span class="pp">        </span><span class="op">}</span><span class="pp">                                                                          </span><span class="op">\</span></span>
<span id="cb289-168"><a href="#cb289-168" aria-hidden="true" tabindex="-1"></a><span class="pp">    </span><span class="op">}</span><span class="pp"> </span><span class="cf">while</span><span class="pp"> </span><span class="op">(</span><span class="dv">0</span><span class="op">)</span></span>
<span id="cb289-169"><a href="#cb289-169" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb289-170"><a href="#cb289-170" aria-hidden="true" tabindex="-1"></a><span class="co">/* テスト用関数 */</span></span>
<span id="cb289-171"><a href="#cb289-171" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> test_basic_macros<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb289-172"><a href="#cb289-172" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb289-173"><a href="#cb289-173" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== 基本的なマクロテスト ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb289-174"><a href="#cb289-174" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb289-175"><a href="#cb289-175" aria-hidden="true" tabindex="-1"></a>    VERBOSE<span class="op">(</span><span class="st">&quot;基本マクロのテストを開始します&quot;</span><span class="op">);</span></span>
<span id="cb289-176"><a href="#cb289-176" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb289-177"><a href="#cb289-177" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> a <span class="op">=</span> <span class="dv">5</span><span class="op">,</span> b <span class="op">=</span> <span class="dv">3</span><span class="op">;</span></span>
<span id="cb289-178"><a href="#cb289-178" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb289-179"><a href="#cb289-179" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;SQUARE(</span><span class="sc">%d</span><span class="st">) = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> a<span class="op">,</span> SQUARE<span class="op">(</span>a<span class="op">));</span></span>
<span id="cb289-180"><a href="#cb289-180" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;MAX(</span><span class="sc">%d</span><span class="st">, </span><span class="sc">%d</span><span class="st">) = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> a<span class="op">,</span> b<span class="op">,</span> MAX<span class="op">(</span>a<span class="op">,</span> b<span class="op">));</span></span>
<span id="cb289-181"><a href="#cb289-181" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;MIN(</span><span class="sc">%d</span><span class="st">, </span><span class="sc">%d</span><span class="st">) = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> a<span class="op">,</span> b<span class="op">,</span> MIN<span class="op">(</span>a<span class="op">,</span> b<span class="op">));</span></span>
<span id="cb289-182"><a href="#cb289-182" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb289-183"><a href="#cb289-183" aria-hidden="true" tabindex="-1"></a>    DEBUG_PRINT<span class="op">(</span><span class="st">&quot;変数値: a=</span><span class="sc">%d</span><span class="st">, b=</span><span class="sc">%d</span><span class="st">&quot;</span><span class="op">,</span> a<span class="op">,</span> b<span class="op">);</span></span>
<span id="cb289-184"><a href="#cb289-184" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb289-185"><a href="#cb289-185" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;PI = </span><span class="sc">%f\n</span><span class="st">&quot;</span><span class="op">,</span> PI<span class="op">);</span></span>
<span id="cb289-186"><a href="#cb289-186" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;MAX_SIZE = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> MAX_SIZE<span class="op">);</span></span>
<span id="cb289-187"><a href="#cb289-187" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb289-188"><a href="#cb289-188" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb289-189"><a href="#cb289-189" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> test_string_macros<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb289-190"><a href="#cb289-190" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb289-191"><a href="#cb289-191" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">=== 文字列操作マクロテスト ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb289-192"><a href="#cb289-192" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb289-193"><a href="#cb289-193" aria-hidden="true" tabindex="-1"></a>    VERBOSE<span class="op">(</span><span class="st">&quot;文字列マクロのテストを開始します&quot;</span><span class="op">);</span></span>
<span id="cb289-194"><a href="#cb289-194" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb289-195"><a href="#cb289-195" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> value <span class="op">=</span> <span class="dv">42</span><span class="op">;</span></span>
<span id="cb289-196"><a href="#cb289-196" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;STRINGIFY(value) = </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> STRINGIFY<span class="op">(</span>value<span class="op">));</span></span>
<span id="cb289-197"><a href="#cb289-197" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;TOSTRING(MAX_SIZE) = </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> TOSTRING<span class="op">(</span>MAX_SIZE<span class="op">));</span></span>
<span id="cb289-198"><a href="#cb289-198" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb289-199"><a href="#cb289-199" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> buffer<span class="op">[</span><span class="dv">50</span><span class="op">];</span></span>
<span id="cb289-200"><a href="#cb289-200" aria-hidden="true" tabindex="-1"></a>    <span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>source <span class="op">=</span> <span class="st">&quot;Hello, World!&quot;</span><span class="op">;</span></span>
<span id="cb289-201"><a href="#cb289-201" aria-hidden="true" tabindex="-1"></a>    SAFE_STRCPY<span class="op">(</span>buffer<span class="op">,</span> source<span class="op">,</span> <span class="kw">sizeof</span><span class="op">(</span>buffer<span class="op">));</span></span>
<span id="cb289-202"><a href="#cb289-202" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;SAFE_STRCPY結果: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> buffer<span class="op">);</span></span>
<span id="cb289-203"><a href="#cb289-203" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb289-204"><a href="#cb289-204" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 長すぎる文字列のテスト */</span></span>
<span id="cb289-205"><a href="#cb289-205" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> sumall_buffer<span class="op">[</span><span class="dv">10</span><span class="op">];</span></span>
<span id="cb289-206"><a href="#cb289-206" aria-hidden="true" tabindex="-1"></a>    <span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>long_source <span class="op">=</span> <span class="st">&quot;This is a very long string that exceeds buffer size&quot;</span><span class="op">;</span></span>
<span id="cb289-207"><a href="#cb289-207" aria-hidden="true" tabindex="-1"></a>    SAFE_STRCPY<span class="op">(</span>sumall_buffer<span class="op">,</span> long_source<span class="op">,</span> <span class="kw">sizeof</span><span class="op">(</span>sumall_buffer<span class="op">));</span></span>
<span id="cb289-208"><a href="#cb289-208" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;切り詰められた文字列: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> sumall_buffer<span class="op">);</span></span>
<span id="cb289-209"><a href="#cb289-209" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb289-210"><a href="#cb289-210" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb289-211"><a href="#cb289-211" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> test_safe_operations<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb289-212"><a href="#cb289-212" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb289-213"><a href="#cb289-213" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">=== 安全操作マクロテスト ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb289-214"><a href="#cb289-214" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb289-215"><a href="#cb289-215" aria-hidden="true" tabindex="-1"></a>    VERBOSE<span class="op">(</span><span class="st">&quot;安全操作マクロのテストを開始します&quot;</span><span class="op">);</span></span>
<span id="cb289-216"><a href="#cb289-216" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb289-217"><a href="#cb289-217" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span> result<span class="op">;</span></span>
<span id="cb289-218"><a href="#cb289-218" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb289-219"><a href="#cb289-219" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 正常な除算 */</span></span>
<span id="cb289-220"><a href="#cb289-220" aria-hidden="true" tabindex="-1"></a>    SAFE_DIVIDE<span class="op">(</span><span class="fl">10.0</span><span class="op">,</span> <span class="fl">2.0</span><span class="op">,</span> <span class="op">&amp;</span>result<span class="op">);</span></span>
<span id="cb289-221"><a href="#cb289-221" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;10.0 / 2.0 = </span><span class="sc">%f\n</span><span class="st">&quot;</span><span class="op">,</span> result<span class="op">);</span></span>
<span id="cb289-222"><a href="#cb289-222" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb289-223"><a href="#cb289-223" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* ゼロ除算 */</span></span>
<span id="cb289-224"><a href="#cb289-224" aria-hidden="true" tabindex="-1"></a>    SAFE_DIVIDE<span class="op">(</span><span class="fl">10.0</span><span class="op">,</span> <span class="fl">0.0</span><span class="op">,</span> <span class="op">&amp;</span>result<span class="op">);</span></span>
<span id="cb289-225"><a href="#cb289-225" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;10.0 / 0.0 = </span><span class="sc">%f</span><span class="st"> (エラー処理後)</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> result<span class="op">);</span></span>
<span id="cb289-226"><a href="#cb289-226" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb289-227"><a href="#cb289-227" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 配列アクセステスト */</span></span>
<span id="cb289-228"><a href="#cb289-228" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> array<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">10</span><span class="op">,</span> <span class="dv">20</span><span class="op">,</span> <span class="dv">30</span><span class="op">,</span> <span class="dv">40</span><span class="op">,</span> <span class="dv">50</span><span class="op">};</span></span>
<span id="cb289-229"><a href="#cb289-229" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> size <span class="op">=</span> ARRAY_SIZE<span class="op">(</span>array<span class="op">);</span></span>
<span id="cb289-230"><a href="#cb289-230" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb289-231"><a href="#cb289-231" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;配列サイズ: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> size<span class="op">);</span></span>
<span id="cb289-232"><a href="#cb289-232" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb289-233"><a href="#cb289-233" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 安全な配列アクセス */</span></span>
<span id="cb289-234"><a href="#cb289-234" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;array[2] = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> SAFE_ARRAY_ACCESS<span class="op">(</span>array<span class="op">,</span> <span class="dv">2</span><span class="op">,</span> size<span class="op">));</span></span>
<span id="cb289-235"><a href="#cb289-235" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;array[10] = </span><span class="sc">%d</span><span class="st"> (範囲外アクセス)</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> SAFE_ARRAY_ACCESS<span class="op">(</span>array<span class="op">,</span> <span class="dv">10</span><span class="op">,</span> size<span class="op">));</span></span>
<span id="cb289-236"><a href="#cb289-236" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;array[-1] = </span><span class="sc">%d</span><span class="st"> (負のインデックス)</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> SAFE_ARRAY_ACCESS<span class="op">(</span>array<span class="op">,</span> <span class="op">-</span><span class="dv">1</span><span class="op">,</span> size<span class="op">));</span></span>
<span id="cb289-237"><a href="#cb289-237" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb289-238"><a href="#cb289-238" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb289-239"><a href="#cb289-239" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> test_bit_operations<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb289-240"><a href="#cb289-240" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb289-241"><a href="#cb289-241" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">=== ビット操作マクロテスト ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb289-242"><a href="#cb289-242" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb289-243"><a href="#cb289-243" aria-hidden="true" tabindex="-1"></a>    VERBOSE<span class="op">(</span><span class="st">&quot;ビット操作マクロのテストを開始します&quot;</span><span class="op">);</span></span>
<span id="cb289-244"><a href="#cb289-244" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb289-245"><a href="#cb289-245" aria-hidden="true" tabindex="-1"></a>    <span class="dt">unsigned</span> <span class="dt">int</span> flags <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb289-246"><a href="#cb289-246" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb289-247"><a href="#cb289-247" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;初期値: 0x</span><span class="sc">%02X\n</span><span class="st">&quot;</span><span class="op">,</span> flags<span class="op">);</span></span>
<span id="cb289-248"><a href="#cb289-248" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb289-249"><a href="#cb289-249" aria-hidden="true" tabindex="-1"></a>    SET_BIT<span class="op">(</span>flags<span class="op">,</span> <span class="dv">0</span><span class="op">);</span></span>
<span id="cb289-250"><a href="#cb289-250" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ビット0セット後: 0x</span><span class="sc">%02X\n</span><span class="st">&quot;</span><span class="op">,</span> flags<span class="op">);</span></span>
<span id="cb289-251"><a href="#cb289-251" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb289-252"><a href="#cb289-252" aria-hidden="true" tabindex="-1"></a>    SET_BIT<span class="op">(</span>flags<span class="op">,</span> <span class="dv">3</span><span class="op">);</span></span>
<span id="cb289-253"><a href="#cb289-253" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ビット3セット後: 0x</span><span class="sc">%02X\n</span><span class="st">&quot;</span><span class="op">,</span> flags<span class="op">);</span></span>
<span id="cb289-254"><a href="#cb289-254" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb289-255"><a href="#cb289-255" aria-hidden="true" tabindex="-1"></a>    TOGGLE_BIT<span class="op">(</span>flags<span class="op">,</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb289-256"><a href="#cb289-256" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ビット1トグル後: 0x</span><span class="sc">%02X\n</span><span class="st">&quot;</span><span class="op">,</span> flags<span class="op">);</span></span>
<span id="cb289-257"><a href="#cb289-257" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb289-258"><a href="#cb289-258" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ビット0チェック: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> CHECK_BIT<span class="op">(</span>flags<span class="op">,</span> <span class="dv">0</span><span class="op">));</span></span>
<span id="cb289-259"><a href="#cb289-259" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ビット2チェック: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> CHECK_BIT<span class="op">(</span>flags<span class="op">,</span> <span class="dv">2</span><span class="op">));</span></span>
<span id="cb289-260"><a href="#cb289-260" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb289-261"><a href="#cb289-261" aria-hidden="true" tabindex="-1"></a>    CLEAR_BIT<span class="op">(</span>flags<span class="op">,</span> <span class="dv">0</span><span class="op">);</span></span>
<span id="cb289-262"><a href="#cb289-262" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ビット0クリア後: 0x</span><span class="sc">%02X\n</span><span class="st">&quot;</span><span class="op">,</span> flags<span class="op">);</span></span>
<span id="cb289-263"><a href="#cb289-263" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb289-264"><a href="#cb289-264" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb289-265"><a href="#cb289-265" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> test_dynamic_functions<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb289-266"><a href="#cb289-266" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb289-267"><a href="#cb289-267" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">=== 動的生成関数テスト ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb289-268"><a href="#cb289-268" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb289-269"><a href="#cb289-269" aria-hidden="true" tabindex="-1"></a>    VERBOSE<span class="op">(</span><span class="st">&quot;動的生成関数のテストを開始します&quot;</span><span class="op">);</span></span>
<span id="cb289-270"><a href="#cb289-270" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb289-271"><a href="#cb289-271" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> int_a <span class="op">=</span> <span class="dv">15</span><span class="op">,</span> int_b <span class="op">=</span> <span class="dv">7</span><span class="op">;</span></span>
<span id="cb289-272"><a href="#cb289-272" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span> double_a <span class="op">=</span> <span class="fl">3.14</span><span class="op">,</span> double_b <span class="op">=</span> <span class="fl">2.71</span><span class="op">;</span></span>
<span id="cb289-273"><a href="#cb289-273" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb289-274"><a href="#cb289-274" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;整数演算:</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb289-275"><a href="#cb289-275" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;  </span><span class="sc">%d</span><span class="st"> + </span><span class="sc">%d</span><span class="st"> = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> int_a<span class="op">,</span> int_b<span class="op">,</span> add_int_operation<span class="op">(</span>int_a<span class="op">,</span> int_b<span class="op">));</span></span>
<span id="cb289-276"><a href="#cb289-276" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;  </span><span class="sc">%d</span><span class="st"> - </span><span class="sc">%d</span><span class="st"> = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> int_a<span class="op">,</span> int_b<span class="op">,</span> sub_int_operation<span class="op">(</span>int_a<span class="op">,</span> int_b<span class="op">));</span></span>
<span id="cb289-277"><a href="#cb289-277" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;  </span><span class="sc">%d</span><span class="st"> * </span><span class="sc">%d</span><span class="st"> = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> int_a<span class="op">,</span> int_b<span class="op">,</span> mul_int_operation<span class="op">(</span>int_a<span class="op">,</span> int_b<span class="op">));</span></span>
<span id="cb289-278"><a href="#cb289-278" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb289-279"><a href="#cb289-279" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;浮動小数点演算:</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb289-280"><a href="#cb289-280" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;  </span><span class="sc">%.2f</span><span class="st"> + </span><span class="sc">%.2f</span><span class="st"> = </span><span class="sc">%.2f\n</span><span class="st">&quot;</span><span class="op">,</span> double_a<span class="op">,</span> double_b<span class="op">,</span> add_double_operation<span class="op">(</span>double_a<span class="op">,</span> double_b<span class="op">));</span></span>
<span id="cb289-281"><a href="#cb289-281" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;  </span><span class="sc">%.2f</span><span class="st"> - </span><span class="sc">%.2f</span><span class="st"> = </span><span class="sc">%.2f\n</span><span class="st">&quot;</span><span class="op">,</span> double_a<span class="op">,</span> double_b<span class="op">,</span> sub_double_operation<span class="op">(</span>double_a<span class="op">,</span> double_b<span class="op">));</span></span>
<span id="cb289-282"><a href="#cb289-282" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;  </span><span class="sc">%.2f</span><span class="st"> * </span><span class="sc">%.2f</span><span class="st"> = </span><span class="sc">%.2f\n</span><span class="st">&quot;</span><span class="op">,</span> double_a<span class="op">,</span> double_b<span class="op">,</span> mul_double_operation<span class="op">(</span>double_a<span class="op">,</span> double_b<span class="op">));</span></span>
<span id="cb289-283"><a href="#cb289-283" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb289-284"><a href="#cb289-284" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb289-285"><a href="#cb289-285" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> test_generic_macros<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb289-286"><a href="#cb289-286" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb289-287"><a href="#cb289-287" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">=== 汎用マクロテスト ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb289-288"><a href="#cb289-288" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb289-289"><a href="#cb289-289" aria-hidden="true" tabindex="-1"></a>    VERBOSE<span class="op">(</span><span class="st">&quot;汎用マクロのテストを開始します&quot;</span><span class="op">);</span></span>
<span id="cb289-290"><a href="#cb289-290" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb289-291"><a href="#cb289-291" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> x <span class="op">=</span> <span class="dv">10</span><span class="op">,</span> y <span class="op">=</span> <span class="dv">20</span><span class="op">;</span></span>
<span id="cb289-292"><a href="#cb289-292" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span> dx <span class="op">=</span> <span class="fl">1.5</span><span class="op">,</span> dy <span class="op">=</span> <span class="fl">2.5</span><span class="op">;</span></span>
<span id="cb289-293"><a href="#cb289-293" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb289-294"><a href="#cb289-294" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;スワップ前: x=</span><span class="sc">%d</span><span class="st">, y=</span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> x<span class="op">,</span> y<span class="op">);</span></span>
<span id="cb289-295"><a href="#cb289-295" aria-hidden="true" tabindex="-1"></a>    SWAP_INT<span class="op">(</span>x<span class="op">,</span> y<span class="op">);</span></span>
<span id="cb289-296"><a href="#cb289-296" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;スワップ後: x=</span><span class="sc">%d</span><span class="st">, y=</span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> x<span class="op">,</span> y<span class="op">);</span></span>
<span id="cb289-297"><a href="#cb289-297" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb289-298"><a href="#cb289-298" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;スワップ前: dx=</span><span class="sc">%.1f</span><span class="st">, dy=</span><span class="sc">%.1f\n</span><span class="st">&quot;</span><span class="op">,</span> dx<span class="op">,</span> dy<span class="op">);</span></span>
<span id="cb289-299"><a href="#cb289-299" aria-hidden="true" tabindex="-1"></a>    SWAP_DOUBLE<span class="op">(</span>dx<span class="op">,</span> dy<span class="op">);</span></span>
<span id="cb289-300"><a href="#cb289-300" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;スワップ後: dx=</span><span class="sc">%.1f</span><span class="st">, dy=</span><span class="sc">%.1f\n</span><span class="st">&quot;</span><span class="op">,</span> dx<span class="op">,</span> dy<span class="op">);</span></span>
<span id="cb289-301"><a href="#cb289-301" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb289-302"><a href="#cb289-302" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb289-303"><a href="#cb289-303" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> test_benchmarks<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb289-304"><a href="#cb289-304" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb289-305"><a href="#cb289-305" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">=== ベンチマークテスト ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb289-306"><a href="#cb289-306" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb289-307"><a href="#cb289-307" aria-hidden="true" tabindex="-1"></a>    VERBOSE<span class="op">(</span><span class="st">&quot;ベンチマークテストを開始します&quot;</span><span class="op">);</span></span>
<span id="cb289-308"><a href="#cb289-308" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb289-309"><a href="#cb289-309" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 計算集約的な処理のベンチマーク */</span></span>
<span id="cb289-310"><a href="#cb289-310" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb289-311"><a href="#cb289-311" aria-hidden="true" tabindex="-1"></a>        BENCHMARK_START<span class="op">();</span></span>
<span id="cb289-312"><a href="#cb289-312" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb289-313"><a href="#cb289-313" aria-hidden="true" tabindex="-1"></a>        <span class="dt">volatile</span> <span class="dt">long</span> sum <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb289-314"><a href="#cb289-314" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb289-315"><a href="#cb289-315" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">1000000</span><span class="op">;</span> i<span class="op">++)</span></span>
<span id="cb289-316"><a href="#cb289-316" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span></span>
<span id="cb289-317"><a href="#cb289-317" aria-hidden="true" tabindex="-1"></a>            sum <span class="op">+=</span> i <span class="op">*</span> i<span class="op">;</span></span>
<span id="cb289-318"><a href="#cb289-318" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb289-319"><a href="#cb289-319" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb289-320"><a href="#cb289-320" aria-hidden="true" tabindex="-1"></a>        BENCHMARK_END<span class="op">(</span><span class="st">&quot;100万回の平方計算&quot;</span><span class="op">);</span></span>
<span id="cb289-321"><a href="#cb289-321" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb289-322"><a href="#cb289-322" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb289-323"><a href="#cb289-323" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 文字列処理のベンチマーク */</span></span>
<span id="cb289-324"><a href="#cb289-324" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb289-325"><a href="#cb289-325" aria-hidden="true" tabindex="-1"></a>        BENCHMARK_START<span class="op">();</span></span>
<span id="cb289-326"><a href="#cb289-326" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb289-327"><a href="#cb289-327" aria-hidden="true" tabindex="-1"></a>        <span class="dt">char</span> buffer<span class="op">[</span><span class="dv">1000</span><span class="op">];</span></span>
<span id="cb289-328"><a href="#cb289-328" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb289-329"><a href="#cb289-329" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">10000</span><span class="op">;</span> i<span class="op">++)</span></span>
<span id="cb289-330"><a href="#cb289-330" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span></span>
<span id="cb289-331"><a href="#cb289-331" aria-hidden="true" tabindex="-1"></a>            sprintf<span class="op">(</span>buffer<span class="op">,</span> <span class="st">&quot;Test string </span><span class="sc">%d</span><span class="st">&quot;</span><span class="op">,</span> i<span class="op">);</span></span>
<span id="cb289-332"><a href="#cb289-332" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb289-333"><a href="#cb289-333" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb289-334"><a href="#cb289-334" aria-hidden="true" tabindex="-1"></a>        BENCHMARK_END<span class="op">(</span><span class="st">&quot;1万回の文字列生成&quot;</span><span class="op">);</span></span>
<span id="cb289-335"><a href="#cb289-335" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb289-336"><a href="#cb289-336" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb289-337"><a href="#cb289-337" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb289-338"><a href="#cb289-338" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> test_assertions<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb289-339"><a href="#cb289-339" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb289-340"><a href="#cb289-340" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">=== アサーションテスト ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb289-341"><a href="#cb289-341" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb289-342"><a href="#cb289-342" aria-hidden="true" tabindex="-1"></a>    VERBOSE<span class="op">(</span><span class="st">&quot;アサーションテストを開始します&quot;</span><span class="op">);</span></span>
<span id="cb289-343"><a href="#cb289-343" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb289-344"><a href="#cb289-344" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> value <span class="op">=</span> <span class="dv">42</span><span class="op">;</span></span>
<span id="cb289-345"><a href="#cb289-345" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb289-346"><a href="#cb289-346" aria-hidden="true" tabindex="-1"></a>    ASSERT<span class="op">(</span>value <span class="op">&gt;</span> <span class="dv">0</span><span class="op">,</span> <span class="st">&quot;値は正の数であるべきです&quot;</span><span class="op">);</span></span>
<span id="cb289-347"><a href="#cb289-347" aria-hidden="true" tabindex="-1"></a>    ASSERT<span class="op">(</span>value <span class="op">==</span> <span class="dv">42</span><span class="op">,</span> <span class="st">&quot;値は42であるべきです&quot;</span><span class="op">);</span></span>
<span id="cb289-348"><a href="#cb289-348" aria-hidden="true" tabindex="-1"></a>    ASSERT<span class="op">(</span>value <span class="op">&lt;</span> <span class="dv">100</span><span class="op">,</span> <span class="st">&quot;値は100未満であるべきです&quot;</span><span class="op">);</span></span>
<span id="cb289-349"><a href="#cb289-349" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb289-350"><a href="#cb289-350" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 失敗するアサーション */</span></span>
<span id="cb289-351"><a href="#cb289-351" aria-hidden="true" tabindex="-1"></a>    ASSERT<span class="op">(</span>value <span class="op">&gt;</span> <span class="dv">100</span><span class="op">,</span> <span class="st">&quot;値は100より大きいべきです（これは失敗します）&quot;</span><span class="op">);</span></span>
<span id="cb289-352"><a href="#cb289-352" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb289-353"><a href="#cb289-353" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb289-354"><a href="#cb289-354" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb289-355"><a href="#cb289-355" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb289-356"><a href="#cb289-356" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== 高度なプリプロセッサの活用デモ ===</span><span class="sc">\n\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb289-357"><a href="#cb289-357" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb289-358"><a href="#cb289-358" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* コンパイル情報の表示 */</span></span>
<span id="cb289-359"><a href="#cb289-359" aria-hidden="true" tabindex="-1"></a>    COMPILE_INFO<span class="op">();</span></span>
<span id="cb289-360"><a href="#cb289-360" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb289-361"><a href="#cb289-361" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb289-362"><a href="#cb289-362" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 各種テストの実行 */</span></span>
<span id="cb289-363"><a href="#cb289-363" aria-hidden="true" tabindex="-1"></a>    test_basic_macros<span class="op">();</span></span>
<span id="cb289-364"><a href="#cb289-364" aria-hidden="true" tabindex="-1"></a>    test_string_macros<span class="op">();</span></span>
<span id="cb289-365"><a href="#cb289-365" aria-hidden="true" tabindex="-1"></a>    test_safe_operations<span class="op">();</span></span>
<span id="cb289-366"><a href="#cb289-366" aria-hidden="true" tabindex="-1"></a>    test_bit_operations<span class="op">();</span></span>
<span id="cb289-367"><a href="#cb289-367" aria-hidden="true" tabindex="-1"></a>    test_dynamic_functions<span class="op">();</span></span>
<span id="cb289-368"><a href="#cb289-368" aria-hidden="true" tabindex="-1"></a>    test_generic_macros<span class="op">();</span></span>
<span id="cb289-369"><a href="#cb289-369" aria-hidden="true" tabindex="-1"></a>    test_benchmarks<span class="op">();</span></span>
<span id="cb289-370"><a href="#cb289-370" aria-hidden="true" tabindex="-1"></a>    test_assertions<span class="op">();</span></span>
<span id="cb289-371"><a href="#cb289-371" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb289-372"><a href="#cb289-372" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 条件付きコンパイル情報 */</span></span>
<span id="cb289-373"><a href="#cb289-373" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">=== 条件付きコンパイル情報 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb289-374"><a href="#cb289-374" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;プラットフォーム: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> PLATFORM<span class="op">);</span></span>
<span id="cb289-375"><a href="#cb289-375" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;パス区切り文字: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> PATH_SEPARATOR<span class="op">);</span></span>
<span id="cb289-376"><a href="#cb289-376" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb289-377"><a href="#cb289-377" aria-hidden="true" tabindex="-1"></a><span class="pp">#if DEBUG_MODE</span></span>
<span id="cb289-378"><a href="#cb289-378" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;デバッグモード: 有効</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb289-379"><a href="#cb289-379" aria-hidden="true" tabindex="-1"></a><span class="pp">#else</span></span>
<span id="cb289-380"><a href="#cb289-380" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;デバッグモード: 無効</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb289-381"><a href="#cb289-381" aria-hidden="true" tabindex="-1"></a><span class="pp">#endif</span></span>
<span id="cb289-382"><a href="#cb289-382" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb289-383"><a href="#cb289-383" aria-hidden="true" tabindex="-1"></a><span class="pp">#if VERBOSE_OUTPUT</span></span>
<span id="cb289-384"><a href="#cb289-384" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;詳細出力: 有効</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb289-385"><a href="#cb289-385" aria-hidden="true" tabindex="-1"></a><span class="pp">#else</span></span>
<span id="cb289-386"><a href="#cb289-386" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;詳細出力: 無効</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb289-387"><a href="#cb289-387" aria-hidden="true" tabindex="-1"></a><span class="pp">#endif</span></span>
<span id="cb289-388"><a href="#cb289-388" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb289-389"><a href="#cb289-389" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">=== デモ完了 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb289-390"><a href="#cb289-390" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb289-391"><a href="#cb289-391" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb289-392"><a href="#cb289-392" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<hr />
</body>
</html>
