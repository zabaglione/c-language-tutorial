<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="ja" xml:lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="generator" content="pandoc" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes" />
  <meta name="author" content="" />
  <title>C言語学習教材</title>
  <style>
    code{white-space: pre-wrap;}
    span.smallcaps{font-variant: small-caps;}
    div.columns{display: flex; gap: min(4vw, 1.5em);}
    div.column{flex: auto; overflow-x: auto;}
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
    /* The extra [class] is a hack that increases specificity enough to
       override a similar rule in reveal.js */
    ul.task-list[class]{list-style: none;}
    ul.task-list li input[type="checkbox"] {
      font-size: inherit;
      width: 0.8em;
      margin: 0 0.8em 0.2em -1.6em;
      vertical-align: middle;
    }
    .display.math{display: block; text-align: center; margin: 0.5rem auto;}
    /* CSS for syntax highlighting */
    html { -webkit-text-size-adjust: 100%; }
    pre > code.sourceCode { white-space: pre; position: relative; }
    pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
    pre > code.sourceCode > span:empty { height: 1.2em; }
    .sourceCode { overflow: visible; }
    code.sourceCode > span { color: inherit; text-decoration: inherit; }
    div.sourceCode { margin: 1em 0; }
    pre.sourceCode { margin: 0; }
    @media screen {
    div.sourceCode { overflow: auto; }
    }
    @media print {
    pre > code.sourceCode { white-space: pre-wrap; }
    pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
    }
    pre.numberSource code
      { counter-reset: source-line 0; }
    pre.numberSource code > span
      { position: relative; left: -4em; counter-increment: source-line; }
    pre.numberSource code > span > a:first-child::before
      { content: counter(source-line);
        position: relative; left: -1em; text-align: right; vertical-align: baseline;
        border: none; display: inline-block;
        -webkit-touch-callout: none; -webkit-user-select: none;
        -khtml-user-select: none; -moz-user-select: none;
        -ms-user-select: none; user-select: none;
        padding: 0 4px; width: 4em;
        color: #aaaaaa;
      }
    pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
    div.sourceCode
      {   }
    @media screen {
    pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
    }
    code span.al { color: #ff0000; font-weight: bold; } /* Alert */
    code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
    code span.at { color: #7d9029; } /* Attribute */
    code span.bn { color: #40a070; } /* BaseN */
    code span.bu { color: #008000; } /* BuiltIn */
    code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
    code span.ch { color: #4070a0; } /* Char */
    code span.cn { color: #880000; } /* Constant */
    code span.co { color: #60a0b0; font-style: italic; } /* Comment */
    code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
    code span.do { color: #ba2121; font-style: italic; } /* Documentation */
    code span.dt { color: #902000; } /* DataType */
    code span.dv { color: #40a070; } /* DecVal */
    code span.er { color: #ff0000; font-weight: bold; } /* Error */
    code span.ex { } /* Extension */
    code span.fl { color: #40a070; } /* Float */
    code span.fu { color: #06287e; } /* Function */
    code span.im { color: #008000; font-weight: bold; } /* Import */
    code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
    code span.kw { color: #007020; font-weight: bold; } /* Keyword */
    code span.op { color: #666666; } /* Operator */
    code span.ot { color: #007020; } /* Other */
    code span.pp { color: #bc7a00; } /* Preprocessor */
    code span.sc { color: #4070a0; } /* SpecialChar */
    code span.ss { color: #bb6688; } /* SpecialString */
    code span.st { color: #4070a0; } /* String */
    code span.va { color: #19177c; } /* Variable */
    code span.vs { color: #4070a0; } /* VerbatimString */
    code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
  </style>
  <link rel="stylesheet" href="pdf_style.css" />
</head>
<body>
<header id="title-block-header">
<h1 class="title">C言語学習教材</h1>
<p class="subtitle">基礎から応用まで体系的に学ぶ</p>
<p class="author"></p>
<p class="date">2024年6月28日</p>
</header>
<nav id="TOC" role="doc-toc">
<ul>
<li><a href="#はじめに" id="toc-はじめに"><span
class="toc-section-number">1</span> はじめに</a>
<ul>
<li><a href="#対応c規格" id="toc-対応c規格"><span
class="toc-section-number">1.1</span> 対応C規格</a></li>
<li><a href="#学習目標" id="toc-学習目標"><span
class="toc-section-number">1.2</span> 学習目標</a>
<ul>
<li><a href="#初心者レベル完了時" id="toc-初心者レベル完了時"><span
class="toc-section-number">1.2.1</span> 初心者レベル完了時</a></li>
<li><a href="#中級レベル完了時" id="toc-中級レベル完了時"><span
class="toc-section-number">1.2.2</span> 中級レベル完了時</a></li>
<li><a href="#発展レベル完了時" id="toc-発展レベル完了時"><span
class="toc-section-number">1.2.3</span> 発展レベル完了時</a></li>
</ul></li>
<li><a href="#学習方法" id="toc-学習方法"><span
class="toc-section-number">1.3</span> 学習方法</a></li>
</ul></li>
<li><a href="#導入環境構築" id="toc-導入環境構築"><span
class="toc-section-number">2</span> 導入・環境構築</a>
<ul>
<li><a href="#対応c規格-1" id="toc-対応c規格-1"><span
class="toc-section-number">2.1</span> 対応C規格</a></li>
<li><a href="#学習目標-1" id="toc-学習目標-1"><span
class="toc-section-number">2.2</span> 学習目標</a></li>
<li><a href="#理論解説" id="toc-理論解説"><span
class="toc-section-number">2.3</span> 理論解説</a>
<ul>
<li><a href="#c言語とは" id="toc-c言語とは"><span
class="toc-section-number">2.3.1</span> C言語とは 🔍</a></li>
<li><a href="#c言語の規格" id="toc-c言語の規格"><span
class="toc-section-number">2.3.2</span> C言語の規格 📋</a></li>
<li><a href="#開発環境" id="toc-開発環境"><span
class="toc-section-number">2.3.3</span> 開発環境 🛠️</a></li>
<li><a href="#コンパイル手順" id="toc-コンパイル手順"><span
class="toc-section-number">2.3.4</span> コンパイル手順 ⚙️</a></li>
</ul></li>
<li><a href="#サンプルコード" id="toc-サンプルコード"><span
class="toc-section-number">2.4</span> サンプルコード</a>
<ul>
<li><a href="#環境確認プログラム" id="toc-環境確認プログラム"><span
class="toc-section-number">2.4.1</span> 環境確認プログラム</a></li>
<li><a href="#コンパイルと実行" id="toc-コンパイルと実行"><span
class="toc-section-number">2.4.2</span> コンパイルと実行</a></li>
</ul></li>
<li><a href="#演習課題" id="toc-演習課題"><span
class="toc-section-number">2.5</span> 演習課題</a>
<ul>
<li><a href="#基礎問題" id="toc-基礎問題"><span
class="toc-section-number">2.5.1</span> 基礎問題</a></li>
<li><a href="#応用問題" id="toc-応用問題"><span
class="toc-section-number">2.5.2</span> 応用問題</a></li>
</ul></li>
<li><a href="#コンパイル方法" id="toc-コンパイル方法"><span
class="toc-section-number">2.6</span> コンパイル方法</a></li>
<li><a href="#規格による違い" id="toc-規格による違い"><span
class="toc-section-number">2.7</span> 規格による違い</a></li>
<li><a href="#次の章へ" id="toc-次の章へ"><span
class="toc-section-number">2.8</span> 次の章へ</a></li>
<li><a href="#参考資料" id="toc-参考資料"><span
class="toc-section-number">2.9</span> 参考資料</a></li>
</ul></li>
<li><a href="#基本文法hello-world" id="toc-基本文法hello-world"><span
class="toc-section-number">3</span> 基本文法・Hello World</a>
<ul>
<li><a href="#対応c規格-2" id="toc-対応c規格-2"><span
class="toc-section-number">3.1</span> 対応C規格</a></li>
<li><a href="#学習目標-2" id="toc-学習目標-2"><span
class="toc-section-number">3.2</span> 学習目標</a></li>
<li><a href="#理論解説-1" id="toc-理論解説-1"><span
class="toc-section-number">3.3</span> 理論解説</a>
<ul>
<li><a href="#プログラムの基本構造" id="toc-プログラムの基本構造"><span
class="toc-section-number">3.3.1</span> プログラムの基本構造 🏗️</a></li>
<li><a href="#main関数の詳細" id="toc-main関数の詳細"><span
class="toc-section-number">3.3.2</span> main関数の詳細 🚀</a></li>
<li><a href="#printf関数" id="toc-printf関数"><span
class="toc-section-number">3.3.3</span> printf関数 🖨️</a></li>
<li><a href="#コメント" id="toc-コメント"><span
class="toc-section-number">3.3.4</span> コメント 💭</a></li>
<li><a href="#基本的なプログラム例" id="toc-基本的なプログラム例"><span
class="toc-section-number">3.3.5</span> 基本的なプログラム例 📝</a></li>
</ul></li>
<li><a href="#サンプルコード-1" id="toc-サンプルコード-1"><span
class="toc-section-number">3.4</span> サンプルコード</a>
<ul>
<li><a href="#hello-worldプログラム"
id="toc-hello-worldプログラム"><span
class="toc-section-number">3.4.1</span> Hello Worldプログラム</a></li>
<li><a href="#フォーマット出力プログラム"
id="toc-フォーマット出力プログラム"><span
class="toc-section-number">3.4.2</span>
フォーマット出力プログラム</a></li>
<li><a href="#コンパイルと実行-1" id="toc-コンパイルと実行-1"><span
class="toc-section-number">3.4.3</span> コンパイルと実行</a></li>
</ul></li>
<li><a href="#演習課題-1" id="toc-演習課題-1"><span
class="toc-section-number">3.5</span> 演習課題</a>
<ul>
<li><a href="#基礎問題-1" id="toc-基礎問題-1"><span
class="toc-section-number">3.5.1</span> 基礎問題</a></li>
<li><a href="#応用問題-1" id="toc-応用問題-1"><span
class="toc-section-number">3.5.2</span> 応用問題</a></li>
</ul></li>
<li><a href="#コンパイル方法-1" id="toc-コンパイル方法-1"><span
class="toc-section-number">3.6</span> コンパイル方法</a></li>
<li><a href="#規格による違い-1" id="toc-規格による違い-1"><span
class="toc-section-number">3.7</span> 規格による違い</a>
<ul>
<li><a href="#c90での制限事項" id="toc-c90での制限事項"><span
class="toc-section-number">3.7.1</span> C90での制限事項</a></li>
<li><a href="#c99以降の拡張" id="toc-c99以降の拡張"><span
class="toc-section-number">3.7.2</span> C99以降の拡張</a></li>
</ul></li>
<li><a href="#次の章へ-1" id="toc-次の章へ-1"><span
class="toc-section-number">3.8</span> 次の章へ</a></li>
<li><a href="#参考資料-1" id="toc-参考資料-1"><span
class="toc-section-number">3.9</span> 参考資料</a></li>
</ul></li>
<li><a href="#データ型変数スコープ" id="toc-データ型変数スコープ"><span
class="toc-section-number">4</span> データ型・変数・スコープ</a>
<ul>
<li><a href="#対応c規格-3" id="toc-対応c規格-3"><span
class="toc-section-number">4.1</span> 対応C規格</a></li>
<li><a href="#学習目標-3" id="toc-学習目標-3"><span
class="toc-section-number">4.2</span> 学習目標</a></li>
<li><a href="#理論解説-2" id="toc-理論解説-2"><span
class="toc-section-number">4.3</span> 理論解説</a>
<ul>
<li><a href="#c言語の基本データ型" id="toc-c言語の基本データ型"><span
class="toc-section-number">4.3.1</span> C言語の基本データ型 🔢</a></li>
<li><a href="#変数の宣言と初期化" id="toc-変数の宣言と初期化"><span
class="toc-section-number">4.3.2</span> 変数の宣言と初期化 📝</a></li>
<li><a href="#変数の代入と演算" id="toc-変数の代入と演算"><span
class="toc-section-number">4.3.3</span> 変数の代入と演算 🔄</a></li>
<li><a href="#型変換キャスト" id="toc-型変換キャスト"><span
class="toc-section-number">4.3.4</span> 型変換（キャスト） 🔄</a></li>
<li><a href="#変数のスコープ有効範囲"
id="toc-変数のスコープ有効範囲"><span
class="toc-section-number">4.3.5</span> 変数のスコープ（有効範囲）
🌐</a></li>
<li><a href="#変数の生存期間storage-duration"
id="toc-変数の生存期間storage-duration"><span
class="toc-section-number">4.3.6</span> 変数の生存期間（Storage
Duration） ⏰</a></li>
<li><a href="#ストレージクラス指定子まとめ"
id="toc-ストレージクラス指定子まとめ"><span
class="toc-section-number">4.3.7</span> ストレージクラス指定子まとめ
📋</a></li>
<li><a href="#変数の初期化規則" id="toc-変数の初期化規則"><span
class="toc-section-number">4.3.8</span> 変数の初期化規則 🔰</a></li>
<li><a href="#実践的なスコープ活用例"
id="toc-実践的なスコープ活用例"><span
class="toc-section-number">4.3.9</span> 実践的なスコープ活用例
💡</a></li>
<li><a href="#定数の定義" id="toc-定数の定義"><span
class="toc-section-number">4.3.10</span> 定数の定義 🔒</a></li>
<li><a href="#データ型のサイズ確認" id="toc-データ型のサイズ確認"><span
class="toc-section-number">4.3.11</span> データ型のサイズ確認
📏</a></li>
</ul></li>
<li><a href="#サンプルコード-2" id="toc-サンプルコード-2"><span
class="toc-section-number">4.4</span> サンプルコード</a>
<ul>
<li><a href="#基本データ型の使用例" id="toc-基本データ型の使用例"><span
class="toc-section-number">4.4.1</span> 基本データ型の使用例</a></li>
<li><a href="#変数スコープの確認" id="toc-変数スコープの確認"><span
class="toc-section-number">4.4.2</span> 変数スコープの確認</a></li>
<li><a href="#型変換の実例" id="toc-型変換の実例"><span
class="toc-section-number">4.4.3</span> 型変換の実例</a></li>
<li><a href="#コンパイルと実行-2" id="toc-コンパイルと実行-2"><span
class="toc-section-number">4.4.4</span> コンパイルと実行</a></li>
</ul></li>
<li><a href="#演習課題-2" id="toc-演習課題-2"><span
class="toc-section-number">4.5</span> 演習課題</a>
<ul>
<li><a href="#基礎問題-2" id="toc-基礎問題-2"><span
class="toc-section-number">4.5.1</span> 基礎問題</a></li>
<li><a href="#応用問題-2" id="toc-応用問題-2"><span
class="toc-section-number">4.5.2</span> 応用問題</a></li>
</ul></li>
<li><a href="#コンパイル方法-2" id="toc-コンパイル方法-2"><span
class="toc-section-number">4.6</span> コンパイル方法</a></li>
<li><a href="#規格による違い-2" id="toc-規格による違い-2"><span
class="toc-section-number">4.7</span> 規格による違い</a>
<ul>
<li><a href="#c90での制限事項-1" id="toc-c90での制限事項-1"><span
class="toc-section-number">4.7.1</span> C90での制限事項</a></li>
<li><a href="#c99以降の拡張-1" id="toc-c99以降の拡張-1"><span
class="toc-section-number">4.7.2</span> C99以降の拡張</a></li>
<li><a href="#型サイズの注意点" id="toc-型サイズの注意点"><span
class="toc-section-number">4.7.3</span> 型サイズの注意点</a></li>
</ul></li>
<li><a href="#よくある間違い" id="toc-よくある間違い"><span
class="toc-section-number">4.8</span> 🚨 よくある間違い</a>
<ul>
<li><a href="#初期化忘れ" id="toc-初期化忘れ"><span
class="toc-section-number">4.8.1</span> 1. 初期化忘れ</a></li>
<li><a href="#整数除算の結果" id="toc-整数除算の結果"><span
class="toc-section-number">4.8.2</span> 2. 整数除算の結果</a></li>
<li><a href="#型の範囲超過" id="toc-型の範囲超過"><span
class="toc-section-number">4.8.3</span> 3. 型の範囲超過</a></li>
</ul></li>
<li><a href="#次の章へ-2" id="toc-次の章へ-2"><span
class="toc-section-number">4.9</span> 次の章へ</a></li>
<li><a href="#参考資料-2" id="toc-参考資料-2"><span
class="toc-section-number">4.10</span> 参考資料</a></li>
</ul></li>
<li><a href="#演算子と式" id="toc-演算子と式"><span
class="toc-section-number">5</span> 演算子と式</a>
<ul>
<li><a href="#対応c規格-4" id="toc-対応c規格-4"><span
class="toc-section-number">5.1</span> 対応C規格</a></li>
<li><a href="#学習目標-4" id="toc-学習目標-4"><span
class="toc-section-number">5.2</span> 学習目標</a></li>
<li><a href="#理論解説-3" id="toc-理論解説-3"><span
class="toc-section-number">5.3</span> 理論解説</a>
<ul>
<li><a href="#算術演算子" id="toc-算術演算子"><span
class="toc-section-number">5.3.1</span> 算術演算子 🔢</a></li>
<li><a href="#代入演算子-1" id="toc-代入演算子-1"><span
class="toc-section-number">5.3.2</span> 代入演算子 📝</a></li>
<li><a href="#インクリメントデクリメント演算子"
id="toc-インクリメントデクリメント演算子"><span
class="toc-section-number">5.3.3</span>
インクリメント・デクリメント演算子 ⬆️⬇️</a></li>
<li><a href="#関係演算子" id="toc-関係演算子"><span
class="toc-section-number">5.3.4</span> 関係演算子 🔍</a></li>
<li><a href="#論理演算子" id="toc-論理演算子"><span
class="toc-section-number">5.3.5</span> 論理演算子 🧠</a></li>
<li><a href="#ビット演算子" id="toc-ビット演算子"><span
class="toc-section-number">5.3.6</span> ビット演算子 🔧</a></li>
<li><a href="#条件演算子三項演算子" id="toc-条件演算子三項演算子"><span
class="toc-section-number">5.3.7</span> 条件演算子（三項演算子）
❓</a></li>
<li><a href="#sizeof演算子" id="toc-sizeof演算子"><span
class="toc-section-number">5.3.8</span> sizeof演算子 📏</a></li>
<li><a href="#演算子の優先順位" id="toc-演算子の優先順位"><span
class="toc-section-number">5.3.9</span> 演算子の優先順位 📊</a></li>
</ul></li>
<li><a href="#サンプルコード-3" id="toc-サンプルコード-3"><span
class="toc-section-number">5.4</span> サンプルコード</a>
<ul>
<li><a href="#演算子の基本使用例" id="toc-演算子の基本使用例"><span
class="toc-section-number">5.4.1</span> 演算子の基本使用例</a></li>
<li><a href="#ビット演算の実例" id="toc-ビット演算の実例"><span
class="toc-section-number">5.4.2</span> ビット演算の実例</a></li>
<li><a href="#演算子優先順位の確認" id="toc-演算子優先順位の確認"><span
class="toc-section-number">5.4.3</span> 演算子優先順位の確認</a></li>
<li><a href="#コンパイルと実行-3" id="toc-コンパイルと実行-3"><span
class="toc-section-number">5.4.4</span> コンパイルと実行</a></li>
</ul></li>
<li><a href="#演習課題-3" id="toc-演習課題-3"><span
class="toc-section-number">5.5</span> 演習課題</a>
<ul>
<li><a href="#基礎問題-3" id="toc-基礎問題-3"><span
class="toc-section-number">5.5.1</span> 基礎問題</a></li>
<li><a href="#応用問題-3" id="toc-応用問題-3"><span
class="toc-section-number">5.5.2</span> 応用問題</a></li>
</ul></li>
<li><a href="#コンパイル方法-3" id="toc-コンパイル方法-3"><span
class="toc-section-number">5.6</span> コンパイル方法</a></li>
<li><a href="#規格による違い-3" id="toc-規格による違い-3"><span
class="toc-section-number">5.7</span> 規格による違い</a>
<ul>
<li><a href="#c90での制限事項-2" id="toc-c90での制限事項-2"><span
class="toc-section-number">5.7.1</span> C90での制限事項</a></li>
<li><a href="#c99以降の拡張-2" id="toc-c99以降の拡張-2"><span
class="toc-section-number">5.7.2</span> C99以降の拡張</a></li>
</ul></li>
<li><a href="#よくある間違い-1" id="toc-よくある間違い-1"><span
class="toc-section-number">5.8</span> 🚨 よくある間違い</a>
<ul>
<li><a href="#代入と比較の混同" id="toc-代入と比較の混同"><span
class="toc-section-number">5.8.1</span> 1. 代入と比較の混同</a></li>
<li><a href="#整数除算の結果-1" id="toc-整数除算の結果-1"><span
class="toc-section-number">5.8.2</span> 2. 整数除算の結果</a></li>
<li><a href="#演算子の優先順位-1" id="toc-演算子の優先順位-1"><span
class="toc-section-number">5.8.3</span> 3. 演算子の優先順位</a></li>
</ul></li>
<li><a href="#次の章へ-3" id="toc-次の章へ-3"><span
class="toc-section-number">5.9</span> 次の章へ</a></li>
<li><a href="#参考資料-3" id="toc-参考資料-3"><span
class="toc-section-number">5.10</span> 参考資料</a></li>
</ul></li>
<li><a href="#制御構造条件分岐" id="toc-制御構造条件分岐"><span
class="toc-section-number">6</span> 制御構造（条件分岐）</a>
<ul>
<li><a href="#対応c規格-5" id="toc-対応c規格-5"><span
class="toc-section-number">6.1</span> 対応C規格</a></li>
<li><a href="#学習目標-5" id="toc-学習目標-5"><span
class="toc-section-number">6.2</span> 学習目標</a></li>
<li><a href="#理論解説-4" id="toc-理論解説-4"><span
class="toc-section-number">6.3</span> 理論解説</a>
<ul>
<li><a href="#if文の基本" id="toc-if文の基本"><span
class="toc-section-number">6.3.1</span> if文の基本 🤔</a></li>
<li><a href="#if-else文" id="toc-if-else文"><span
class="toc-section-number">6.3.2</span> if-else文 ⚖️</a></li>
<li><a href="#if-else-if文" id="toc-if-else-if文"><span
class="toc-section-number">6.3.3</span> if-else if文 🔄</a></li>
<li><a href="#ネストしたif文" id="toc-ネストしたif文"><span
class="toc-section-number">6.3.4</span> ネストしたif文 🏗️</a></li>
<li><a href="#条件式の詳細" id="toc-条件式の詳細"><span
class="toc-section-number">6.3.5</span> 条件式の詳細 🔍</a></li>
<li><a href="#switch文" id="toc-switch文"><span
class="toc-section-number">6.3.6</span> switch文 🔀</a></li>
<li><a href="#条件演算子三項演算子の復習"
id="toc-条件演算子三項演算子の復習"><span
class="toc-section-number">6.3.7</span> 条件演算子（三項演算子）の復習
❓</a></li>
<li><a href="#条件式での注意点" id="toc-条件式での注意点"><span
class="toc-section-number">6.3.8</span> 条件式での注意点 ⚠️</a></li>
</ul></li>
<li><a href="#サンプルコード-4" id="toc-サンプルコード-4"><span
class="toc-section-number">6.4</span> サンプルコード</a>
<ul>
<li><a href="#if文の基本使用例" id="toc-if文の基本使用例"><span
class="toc-section-number">6.4.1</span> if文の基本使用例</a></li>
<li><a href="#複雑な条件分岐" id="toc-複雑な条件分岐"><span
class="toc-section-number">6.4.2</span> 複雑な条件分岐</a></li>
<li><a href="#switch文の実例" id="toc-switch文の実例"><span
class="toc-section-number">6.4.3</span> switch文の実例</a></li>
<li><a href="#コンパイルと実行-4" id="toc-コンパイルと実行-4"><span
class="toc-section-number">6.4.4</span> コンパイルと実行</a></li>
</ul></li>
<li><a href="#演習課題-4" id="toc-演習課題-4"><span
class="toc-section-number">6.5</span> 演習課題</a>
<ul>
<li><a href="#基礎問題-4" id="toc-基礎問題-4"><span
class="toc-section-number">6.5.1</span> 基礎問題</a></li>
<li><a href="#応用問題-4" id="toc-応用問題-4"><span
class="toc-section-number">6.5.2</span> 応用問題</a></li>
</ul></li>
<li><a href="#コンパイル方法-4" id="toc-コンパイル方法-4"><span
class="toc-section-number">6.6</span> コンパイル方法</a></li>
<li><a href="#規格による違い-4" id="toc-規格による違い-4"><span
class="toc-section-number">6.7</span> 規格による違い</a>
<ul>
<li><a href="#c90での制限事項-3" id="toc-c90での制限事項-3"><span
class="toc-section-number">6.7.1</span> C90での制限事項</a></li>
<li><a href="#c99以降の拡張-3" id="toc-c99以降の拡張-3"><span
class="toc-section-number">6.7.2</span> C99以降の拡張</a></li>
</ul></li>
<li><a href="#よくある間違い-2" id="toc-よくある間違い-2"><span
class="toc-section-number">6.8</span> 🚨 よくある間違い</a>
<ul>
<li><a href="#セミコロンの位置" id="toc-セミコロンの位置"><span
class="toc-section-number">6.8.1</span> 1. セミコロンの位置</a></li>
<li><a href="#switch文でのbreak忘れ"
id="toc-switch文でのbreak忘れ"><span
class="toc-section-number">6.8.2</span> 2.
switch文でのbreak忘れ</a></li>
<li><a href="#複雑な条件式での括弧不足"
id="toc-複雑な条件式での括弧不足"><span
class="toc-section-number">6.8.3</span> 3.
複雑な条件式での括弧不足</a></li>
</ul></li>
<li><a href="#次の章へ-4" id="toc-次の章へ-4"><span
class="toc-section-number">6.9</span> 次の章へ</a></li>
<li><a href="#参考資料-4" id="toc-参考資料-4"><span
class="toc-section-number">6.10</span> 参考資料</a></li>
</ul></li>
<li><a href="#制御構造ループ" id="toc-制御構造ループ"><span
class="toc-section-number">7</span> 制御構造（ループ）</a>
<ul>
<li><a href="#対応c規格-6" id="toc-対応c規格-6"><span
class="toc-section-number">7.1</span> 対応C規格</a></li>
<li><a href="#学習目標-6" id="toc-学習目標-6"><span
class="toc-section-number">7.2</span> 学習目標</a></li>
<li><a href="#理論解説-5" id="toc-理論解説-5"><span
class="toc-section-number">7.3</span> 理論解説</a>
<ul>
<li><a href="#for文" id="toc-for文"><span
class="toc-section-number">7.3.1</span> for文 🔄</a></li>
<li><a href="#while文" id="toc-while文"><span
class="toc-section-number">7.3.2</span> while文 🌀</a></li>
<li><a href="#do-while文" id="toc-do-while文"><span
class="toc-section-number">7.3.3</span> do-while文 🔁</a></li>
<li><a href="#break文とcontinue文" id="toc-break文とcontinue文"><span
class="toc-section-number">7.3.4</span> break文とcontinue文
⏹️⏭️</a></li>
<li><a href="#ネストしたループ" id="toc-ネストしたループ"><span
class="toc-section-number">7.3.5</span> ネストしたループ 🏗️</a></li>
<li><a href="#ループでのbreakcontinueの応用"
id="toc-ループでのbreakcontinueの応用"><span
class="toc-section-number">7.3.6</span> ループでのbreak・continueの応用
🎯</a></li>
<li><a href="#無限ループ" id="toc-無限ループ"><span
class="toc-section-number">7.3.7</span> 無限ループ ♾️</a></li>
<li><a href="#ループの最適化とベストプラクティス"
id="toc-ループの最適化とベストプラクティス"><span
class="toc-section-number">7.3.8</span>
ループの最適化とベストプラクティス 💡</a></li>
</ul></li>
<li><a href="#サンプルコード-5" id="toc-サンプルコード-5"><span
class="toc-section-number">7.4</span> サンプルコード</a>
<ul>
<li><a href="#基本的なループ例" id="toc-基本的なループ例"><span
class="toc-section-number">7.4.1</span> 基本的なループ例</a></li>
<li><a href="#ネストしたループ-1" id="toc-ネストしたループ-1"><span
class="toc-section-number">7.4.2</span> ネストしたループ</a></li>
<li><a href="#breakcontinue文" id="toc-breakcontinue文"><span
class="toc-section-number">7.4.3</span> break・continue文</a></li>
<li><a href="#コンパイルと実行-5" id="toc-コンパイルと実行-5"><span
class="toc-section-number">7.4.4</span> コンパイルと実行</a></li>
</ul></li>
<li><a href="#演習課題-5" id="toc-演習課題-5"><span
class="toc-section-number">7.5</span> 演習課題</a>
<ul>
<li><a href="#基礎問題-5" id="toc-基礎問題-5"><span
class="toc-section-number">7.5.1</span> 基礎問題</a></li>
<li><a href="#応用問題-5" id="toc-応用問題-5"><span
class="toc-section-number">7.5.2</span> 応用問題</a></li>
<li><a href="#発展問題" id="toc-発展問題"><span
class="toc-section-number">7.5.3</span> 発展問題</a></li>
</ul></li>
<li><a href="#コンパイル方法-5" id="toc-コンパイル方法-5"><span
class="toc-section-number">7.6</span> コンパイル方法</a></li>
<li><a href="#規格による違い-5" id="toc-規格による違い-5"><span
class="toc-section-number">7.7</span> 規格による違い</a>
<ul>
<li><a href="#c90での制限事項-4" id="toc-c90での制限事項-4"><span
class="toc-section-number">7.7.1</span> C90での制限事項</a></li>
<li><a href="#c99以降の拡張-4" id="toc-c99以降の拡張-4"><span
class="toc-section-number">7.7.2</span> C99以降の拡張</a></li>
</ul></li>
<li><a href="#よくある間違い-3" id="toc-よくある間違い-3"><span
class="toc-section-number">7.8</span> 🚨 よくある間違い</a>
<ul>
<li><a href="#無限ループの作成" id="toc-無限ループの作成"><span
class="toc-section-number">7.8.1</span> 1. 無限ループの作成</a></li>
<li><a href="#セミコロンの位置-1" id="toc-セミコロンの位置-1"><span
class="toc-section-number">7.8.2</span> 2. セミコロンの位置</a></li>
<li><a href="#ループ変数の範囲外アクセス"
id="toc-ループ変数の範囲外アクセス"><span
class="toc-section-number">7.8.3</span> 3.
ループ変数の範囲外アクセス</a></li>
</ul></li>
<li><a href="#次の章へ-5" id="toc-次の章へ-5"><span
class="toc-section-number">7.9</span> 次の章へ</a></li>
<li><a href="#参考資料-5" id="toc-参考資料-5"><span
class="toc-section-number">7.10</span> 参考資料</a></li>
</ul></li>
<li><a href="#配列と文字列配列" id="toc-配列と文字列配列"><span
class="toc-section-number">8</span> 配列と文字列配列</a>
<ul>
<li><a href="#対応c規格-7" id="toc-対応c規格-7"><span
class="toc-section-number">8.1</span> 対応C規格</a></li>
<li><a href="#学習目標-7" id="toc-学習目標-7"><span
class="toc-section-number">8.2</span> 学習目標</a></li>
<li><a href="#理論解説-6" id="toc-理論解説-6"><span
class="toc-section-number">8.3</span> 理論解説</a>
<ul>
<li><a href="#配列の基本概念" id="toc-配列の基本概念"><span
class="toc-section-number">8.3.1</span> 配列の基本概念 📊</a></li>
<li><a href="#配列の初期化" id="toc-配列の初期化"><span
class="toc-section-number">8.3.2</span> 配列の初期化 🔰</a></li>
<li><a href="#配列の操作" id="toc-配列の操作"><span
class="toc-section-number">8.3.3</span> 配列の操作 🔧</a></li>
<li><a href="#文字配列文字列" id="toc-文字配列文字列"><span
class="toc-section-number">8.3.4</span> 文字配列（文字列） 📝</a></li>
<li><a href="#文字列配列の扱い" id="toc-文字列配列の扱い"><span
class="toc-section-number">8.3.5</span> 文字列配列の扱い 📚</a></li>
<li><a href="#char配列-vs-char配列の違い"
id="toc-char配列-vs-char配列の違い"><span
class="toc-section-number">8.3.6</span> char配列 vs char*配列の違い
🔍</a></li>
<li><a href="#多次元配列" id="toc-多次元配列"><span
class="toc-section-number">8.3.7</span> 多次元配列 🏢</a></li>
<li><a href="#配列の実践的応用" id="toc-配列の実践的応用"><span
class="toc-section-number">8.3.8</span> 配列の実践的応用 💡</a></li>
<li><a href="#配列とポインタの関係" id="toc-配列とポインタの関係"><span
class="toc-section-number">8.3.9</span> 配列とポインタの関係 🔗</a></li>
</ul></li>
<li><a href="#サンプルコード-6" id="toc-サンプルコード-6"><span
class="toc-section-number">8.4</span> サンプルコード</a>
<ul>
<li><a href="#基本的な配列操作" id="toc-基本的な配列操作"><span
class="toc-section-number">8.4.1</span> 基本的な配列操作</a></li>
<li><a href="#文字列配列の実例" id="toc-文字列配列の実例"><span
class="toc-section-number">8.4.2</span> 文字列配列の実例</a></li>
<li><a href="#多次元配列の活用" id="toc-多次元配列の活用"><span
class="toc-section-number">8.4.3</span> 多次元配列の活用</a></li>
<li><a href="#コンパイルと実行-6" id="toc-コンパイルと実行-6"><span
class="toc-section-number">8.4.4</span> コンパイルと実行</a></li>
</ul></li>
<li><a href="#演習課題-6" id="toc-演習課題-6"><span
class="toc-section-number">8.5</span> 演習課題</a>
<ul>
<li><a href="#基礎問題-6" id="toc-基礎問題-6"><span
class="toc-section-number">8.5.1</span> 基礎問題</a></li>
<li><a href="#応用問題-6" id="toc-応用問題-6"><span
class="toc-section-number">8.5.2</span> 応用問題</a></li>
<li><a href="#発展問題-1" id="toc-発展問題-1"><span
class="toc-section-number">8.5.3</span> 発展問題</a></li>
</ul></li>
<li><a href="#コンパイル方法-6" id="toc-コンパイル方法-6"><span
class="toc-section-number">8.6</span> コンパイル方法</a></li>
<li><a href="#規格による違い-6" id="toc-規格による違い-6"><span
class="toc-section-number">8.7</span> 規格による違い</a>
<ul>
<li><a href="#c90での制限事項-5" id="toc-c90での制限事項-5"><span
class="toc-section-number">8.7.1</span> C90での制限事項</a></li>
<li><a href="#c99以降の拡張-5" id="toc-c99以降の拡張-5"><span
class="toc-section-number">8.7.2</span> C99以降の拡張</a></li>
</ul></li>
<li><a href="#よくある間違い-4" id="toc-よくある間違い-4"><span
class="toc-section-number">8.8</span> 🚨 よくある間違い</a>
<ul>
<li><a href="#配列の境界外アクセス" id="toc-配列の境界外アクセス"><span
class="toc-section-number">8.8.1</span> 1. 配列の境界外アクセス</a></li>
<li><a href="#文字列配列の初期化忘れ"
id="toc-文字列配列の初期化忘れ"><span
class="toc-section-number">8.8.2</span> 2.
文字列配列の初期化忘れ</a></li>
<li><a href="#配列代入の間違い" id="toc-配列代入の間違い"><span
class="toc-section-number">8.8.3</span> 3. 配列代入の間違い</a></li>
</ul></li>
<li><a href="#次の章へ-6" id="toc-次の章へ-6"><span
class="toc-section-number">8.9</span> 次の章へ</a></li>
<li><a href="#参考資料-6" id="toc-参考資料-6"><span
class="toc-section-number">8.10</span> 参考資料</a></li>
</ul></li>
<li><a href="#文字列処理と文字列配列"
id="toc-文字列処理と文字列配列"><span
class="toc-section-number">9</span> 📚 文字列処理と文字列配列</a>
<ul>
<li><a href="#対応c規格-8" id="toc-対応c規格-8"><span
class="toc-section-number">9.1</span> 対応C規格</a></li>
<li><a href="#学習目標-8" id="toc-学習目標-8"><span
class="toc-section-number">9.2</span> 学習目標</a></li>
<li><a href="#理論解説-7" id="toc-理論解説-7"><span
class="toc-section-number">9.3</span> 理論解説</a>
<ul>
<li><a href="#文字列の基本概念" id="toc-文字列の基本概念"><span
class="toc-section-number">9.3.1</span> 文字列の基本概念 📝</a></li>
<li><a href="#標準文字列操作関数" id="toc-標準文字列操作関数"><span
class="toc-section-number">9.3.2</span> 標準文字列操作関数 🔧</a></li>
<li><a href="#文字列配列の詳細操作" id="toc-文字列配列の詳細操作"><span
class="toc-section-number">9.3.3</span> 文字列配列の詳細操作 📚</a></li>
<li><a href="#文字列配列の比較と使い分け"
id="toc-文字列配列の比較と使い分け"><span
class="toc-section-number">9.3.4</span> 文字列配列の比較と使い分け
🔍</a></li>
<li><a href="#文字列配列のソートと検索"
id="toc-文字列配列のソートと検索"><span
class="toc-section-number">9.3.5</span> 文字列配列のソートと検索
🔍</a></li>
<li><a href="#実践的な文字列処理" id="toc-実践的な文字列処理"><span
class="toc-section-number">9.3.6</span> 実践的な文字列処理 💡</a></li>
</ul></li>
<li><a href="#サンプルコード-7" id="toc-サンプルコード-7"><span
class="toc-section-number">9.4</span> サンプルコード</a>
<ul>
<li><a href="#基本的な文字列操作" id="toc-基本的な文字列操作"><span
class="toc-section-number">9.4.1</span> 基本的な文字列操作</a></li>
<li><a href="#文字列配列の実践例" id="toc-文字列配列の実践例"><span
class="toc-section-number">9.4.2</span> 文字列配列の実践例</a></li>
<li><a href="#文字列処理の応用" id="toc-文字列処理の応用"><span
class="toc-section-number">9.4.3</span> 文字列処理の応用</a></li>
<li><a href="#コンパイルと実行-7" id="toc-コンパイルと実行-7"><span
class="toc-section-number">9.4.4</span> コンパイルと実行</a></li>
</ul></li>
<li><a href="#演習課題-7" id="toc-演習課題-7"><span
class="toc-section-number">9.5</span> 演習課題</a>
<ul>
<li><a href="#基礎問題-7" id="toc-基礎問題-7"><span
class="toc-section-number">9.5.1</span> 基礎問題</a></li>
<li><a href="#応用問題-7" id="toc-応用問題-7"><span
class="toc-section-number">9.5.2</span> 応用問題</a></li>
<li><a href="#発展問題-2" id="toc-発展問題-2"><span
class="toc-section-number">9.5.3</span> 発展問題</a></li>
</ul></li>
<li><a href="#コンパイル方法-7" id="toc-コンパイル方法-7"><span
class="toc-section-number">9.6</span> コンパイル方法</a></li>
<li><a href="#規格による違い-7" id="toc-規格による違い-7"><span
class="toc-section-number">9.7</span> 規格による違い</a>
<ul>
<li><a href="#c90での制限事項-6" id="toc-c90での制限事項-6"><span
class="toc-section-number">9.7.1</span> C90での制限事項</a></li>
<li><a href="#c99以降の拡張-6" id="toc-c99以降の拡張-6"><span
class="toc-section-number">9.7.2</span> C99以降の拡張</a></li>
</ul></li>
<li><a href="#よくある間違い-5" id="toc-よくある間違い-5"><span
class="toc-section-number">9.8</span> 🚨 よくある間違い</a>
<ul>
<li><a href="#null終端の忘れ" id="toc-null終端の忘れ"><span
class="toc-section-number">9.8.1</span> 1. null終端の忘れ</a></li>
<li><a href="#バッファオーバーフロー"
id="toc-バッファオーバーフロー"><span
class="toc-section-number">9.8.2</span> 2.
バッファオーバーフロー</a></li>
<li><a href="#文字列比較の間違い" id="toc-文字列比較の間違い"><span
class="toc-section-number">9.8.3</span> 3. 文字列比較の間違い</a></li>
</ul></li>
<li><a href="#次の章へ-7" id="toc-次の章へ-7"><span
class="toc-section-number">9.9</span> 次の章へ</a></li>
<li><a href="#参考資料-7" id="toc-参考資料-7"><span
class="toc-section-number">9.10</span> 参考資料</a></li>
</ul></li>
<li><a href="#関数" id="toc-関数"><span
class="toc-section-number">10</span> 関数</a>
<ul>
<li><a href="#対応c規格-9" id="toc-対応c規格-9"><span
class="toc-section-number">10.1</span> 対応C規格</a></li>
<li><a href="#学習目標-9" id="toc-学習目標-9"><span
class="toc-section-number">10.2</span> 学習目標</a></li>
<li><a href="#理論解説-8" id="toc-理論解説-8"><span
class="toc-section-number">10.3</span> 理論解説</a>
<ul>
<li><a href="#関数の基本概念" id="toc-関数の基本概念"><span
class="toc-section-number">10.3.1</span> 関数の基本概念 🔧</a></li>
<li><a href="#関数の定義と宣言" id="toc-関数の定義と宣言"><span
class="toc-section-number">10.3.2</span> 関数の定義と宣言 📝</a></li>
<li><a href="#引数の渡し方" id="toc-引数の渡し方"><span
class="toc-section-number">10.3.3</span> 引数の渡し方 📤</a></li>
<li><a href="#配列を引数とする関数" id="toc-配列を引数とする関数"><span
class="toc-section-number">10.3.4</span> 配列を引数とする関数
📊</a></li>
<li><a href="#文字列を引数とする関数"
id="toc-文字列を引数とする関数"><span
class="toc-section-number">10.3.5</span> 文字列を引数とする関数
📝</a></li>
<li><a href="#戻り値のある関数とない関数"
id="toc-戻り値のある関数とない関数"><span
class="toc-section-number">10.3.6</span> 戻り値のある関数とない関数
↩︎️</a></li>
<li><a href="#関数のスコープ" id="toc-関数のスコープ"><span
class="toc-section-number">10.3.7</span> 関数のスコープ 🌐</a></li>
<li><a href="#再帰関数" id="toc-再帰関数"><span
class="toc-section-number">10.3.8</span> 再帰関数 🔄</a></li>
<li><a href="#実践的な関数の例" id="toc-実践的な関数の例"><span
class="toc-section-number">10.3.9</span> 実践的な関数の例 💡</a></li>
<li><a href="#関数設計のベストプラクティス"
id="toc-関数設計のベストプラクティス"><span
class="toc-section-number">10.3.10</span> 関数設計のベストプラクティス
📋</a></li>
</ul></li>
<li><a href="#サンプルコード-8" id="toc-サンプルコード-8"><span
class="toc-section-number">10.4</span> サンプルコード</a>
<ul>
<li><a href="#基本的な関数操作" id="toc-基本的な関数操作"><span
class="toc-section-number">10.4.1</span> 基本的な関数操作</a></li>
<li><a href="#配列操作関数" id="toc-配列操作関数"><span
class="toc-section-number">10.4.2</span> 配列操作関数</a></li>
<li><a href="#再帰関数の実例" id="toc-再帰関数の実例"><span
class="toc-section-number">10.4.3</span> 再帰関数の実例</a></li>
<li><a href="#コンパイルと実行-8" id="toc-コンパイルと実行-8"><span
class="toc-section-number">10.4.4</span> コンパイルと実行</a></li>
</ul></li>
<li><a href="#演習課題-8" id="toc-演習課題-8"><span
class="toc-section-number">10.5</span> 演習課題</a>
<ul>
<li><a href="#基礎問題-8" id="toc-基礎問題-8"><span
class="toc-section-number">10.5.1</span> 基礎問題</a></li>
<li><a href="#応用問題-8" id="toc-応用問題-8"><span
class="toc-section-number">10.5.2</span> 応用問題</a></li>
<li><a href="#発展問題-3" id="toc-発展問題-3"><span
class="toc-section-number">10.5.3</span> 発展問題</a></li>
</ul></li>
<li><a href="#コンパイル方法-8" id="toc-コンパイル方法-8"><span
class="toc-section-number">10.6</span> コンパイル方法</a></li>
<li><a href="#規格による違い-8" id="toc-規格による違い-8"><span
class="toc-section-number">10.7</span> 規格による違い</a>
<ul>
<li><a href="#c90での制限事項-7" id="toc-c90での制限事項-7"><span
class="toc-section-number">10.7.1</span> C90での制限事項</a></li>
<li><a href="#c99以降の拡張-7" id="toc-c99以降の拡張-7"><span
class="toc-section-number">10.7.2</span> C99以降の拡張</a></li>
</ul></li>
<li><a href="#よくある間違い-6" id="toc-よくある間違い-6"><span
class="toc-section-number">10.8</span> 🚨 よくある間違い</a>
<ul>
<li><a href="#関数プロトタイプの忘れ"
id="toc-関数プロトタイプの忘れ"><span
class="toc-section-number">10.8.1</span> 1.
関数プロトタイプの忘れ</a></li>
<li><a href="#配列サイズの情報不足" id="toc-配列サイズの情報不足"><span
class="toc-section-number">10.8.2</span> 2.
配列サイズの情報不足</a></li>
<li><a href="#ローカル変数のアドレス返し"
id="toc-ローカル変数のアドレス返し"><span
class="toc-section-number">10.8.3</span> 3.
ローカル変数のアドレス返し</a></li>
</ul></li>
<li><a href="#次の章へ-8" id="toc-次の章へ-8"><span
class="toc-section-number">10.9</span> 次の章へ</a></li>
<li><a href="#参考資料-8" id="toc-参考資料-8"><span
class="toc-section-number">10.10</span> 参考資料</a></li>
</ul></li>
<li><a href="#ポインタ基礎" id="toc-ポインタ基礎"><span
class="toc-section-number">11</span> ポインタ基礎</a>
<ul>
<li><a href="#対応c規格-10" id="toc-対応c規格-10"><span
class="toc-section-number">11.1</span> 対応C規格</a></li>
<li><a href="#学習目標-10" id="toc-学習目標-10"><span
class="toc-section-number">11.2</span> 学習目標</a></li>
<li><a href="#理論解説-9" id="toc-理論解説-9"><span
class="toc-section-number">11.3</span> 理論解説</a>
<ul>
<li><a href="#ポインタの基本概念" id="toc-ポインタの基本概念"><span
class="toc-section-number">11.3.1</span> ポインタの基本概念 🎯</a></li>
<li><a href="#アドレス演算子と間接参照演算子"
id="toc-アドレス演算子と間接参照演算子"><span
class="toc-section-number">11.3.2</span>
アドレス演算子（&amp;）と間接参照演算子（*） 🔗</a></li>
<li><a href="#ポインタのデータ型" id="toc-ポインタのデータ型"><span
class="toc-section-number">11.3.3</span> ポインタのデータ型 📊</a></li>
<li><a href="#ポインタと配列の関係" id="toc-ポインタと配列の関係"><span
class="toc-section-number">11.3.4</span> ポインタと配列の関係
📊</a></li>
<li><a href="#ポインタ演算" id="toc-ポインタ演算"><span
class="toc-section-number">11.3.5</span> ポインタ演算 🧮</a></li>
<li><a href="#ポインタと関数" id="toc-ポインタと関数"><span
class="toc-section-number">11.3.6</span> ポインタと関数 🔧</a></li>
<li><a href="#文字列とポインタ" id="toc-文字列とポインタ"><span
class="toc-section-number">11.3.7</span> 文字列とポインタ 📝</a></li>
<li><a href="#ポインタの配列" id="toc-ポインタの配列"><span
class="toc-section-number">11.3.8</span> ポインタの配列 📚</a></li>
<li><a href="#実践的なポインタ活用例"
id="toc-実践的なポインタ活用例"><span
class="toc-section-number">11.3.9</span> 実践的なポインタ活用例
💡</a></li>
</ul></li>
<li><a href="#サンプルコード-9" id="toc-サンプルコード-9"><span
class="toc-section-number">11.4</span> サンプルコード</a>
<ul>
<li><a href="#ポインタの基本操作" id="toc-ポインタの基本操作"><span
class="toc-section-number">11.4.1</span> ポインタの基本操作</a></li>
<li><a href="#ポインタと配列" id="toc-ポインタと配列"><span
class="toc-section-number">11.4.2</span> ポインタと配列</a></li>
<li><a href="#ポインタと関数-1" id="toc-ポインタと関数-1"><span
class="toc-section-number">11.4.3</span> ポインタと関数</a></li>
<li><a href="#コンパイルと実行-9" id="toc-コンパイルと実行-9"><span
class="toc-section-number">11.4.4</span> コンパイルと実行</a></li>
</ul></li>
<li><a href="#演習課題-9" id="toc-演習課題-9"><span
class="toc-section-number">11.5</span> 演習課題</a>
<ul>
<li><a href="#基礎問題-9" id="toc-基礎問題-9"><span
class="toc-section-number">11.5.1</span> 基礎問題</a></li>
<li><a href="#応用問題-9" id="toc-応用問題-9"><span
class="toc-section-number">11.5.2</span> 応用問題</a></li>
<li><a href="#発展問題-4" id="toc-発展問題-4"><span
class="toc-section-number">11.5.3</span> 発展問題</a></li>
</ul></li>
<li><a href="#コンパイル方法-9" id="toc-コンパイル方法-9"><span
class="toc-section-number">11.6</span> コンパイル方法</a></li>
<li><a href="#規格による違い-9" id="toc-規格による違い-9"><span
class="toc-section-number">11.7</span> 規格による違い</a>
<ul>
<li><a href="#c90での制限事項-8" id="toc-c90での制限事項-8"><span
class="toc-section-number">11.7.1</span> C90での制限事項</a></li>
<li><a href="#c99以降の拡張-8" id="toc-c99以降の拡張-8"><span
class="toc-section-number">11.7.2</span> C99以降の拡張</a></li>
</ul></li>
<li><a href="#よくある間違い-7" id="toc-よくある間違い-7"><span
class="toc-section-number">11.8</span> 🚨 よくある間違い</a>
<ul>
<li><a href="#未初期化ポインタの使用"
id="toc-未初期化ポインタの使用"><span
class="toc-section-number">11.8.1</span> 1.
未初期化ポインタの使用</a></li>
<li><a href="#nullポインタの参照" id="toc-nullポインタの参照"><span
class="toc-section-number">11.8.2</span> 2. NULLポインタの参照</a></li>
<li><a href="#スコープ外変数へのポインタ"
id="toc-スコープ外変数へのポインタ"><span
class="toc-section-number">11.8.3</span> 3.
スコープ外変数へのポインタ</a></li>
<li><a href="#配列境界の越えた参照" id="toc-配列境界の越えた参照"><span
class="toc-section-number">11.8.4</span> 4.
配列境界の越えた参照</a></li>
</ul></li>
<li><a href="#次の章へ-9" id="toc-次の章へ-9"><span
class="toc-section-number">11.9</span> 次の章へ</a></li>
<li><a href="#参考資料-9" id="toc-参考資料-9"><span
class="toc-section-number">11.10</span> 参考資料</a></li>
</ul></li>
<li><a href="#構造体とポインタ" id="toc-構造体とポインタ"><span
class="toc-section-number">12</span> 構造体とポインタ</a>
<ul>
<li><a href="#対応c規格-11" id="toc-対応c規格-11"><span
class="toc-section-number">12.1</span> 対応C規格</a></li>
<li><a href="#学習目標-11" id="toc-学習目標-11"><span
class="toc-section-number">12.2</span> 学習目標</a></li>
<li><a href="#理論解説-10" id="toc-理論解説-10"><span
class="toc-section-number">12.3</span> 理論解説</a>
<ul>
<li><a href="#構造体の基本概念" id="toc-構造体の基本概念"><span
class="toc-section-number">12.3.1</span> 構造体の基本概念 🏗️</a></li>
<li><a href="#構造体ポインタの基本" id="toc-構造体ポインタの基本"><span
class="toc-section-number">12.3.2</span> 構造体ポインタの基本
🎯</a></li>
<li><a href="#アロー演算子-の使用" id="toc-アロー演算子-の使用"><span
class="toc-section-number">12.3.3</span> アロー演算子（-&gt;）の使用
➡️</a></li>
<li><a href="#構造体配列とポインタ" id="toc-構造体配列とポインタ"><span
class="toc-section-number">12.3.4</span> 構造体配列とポインタ
📊</a></li>
<li><a href="#構造体ポインタ配列" id="toc-構造体ポインタ配列"><span
class="toc-section-number">12.3.5</span> 構造体ポインタ配列 🗂️</a></li>
<li><a href="#ネストした構造体とポインタ"
id="toc-ネストした構造体とポインタ"><span
class="toc-section-number">12.3.6</span> ネストした構造体とポインタ
🏗️</a></li>
<li><a href="#構造体とメモリ管理" id="toc-構造体とメモリ管理"><span
class="toc-section-number">12.3.7</span> 構造体とメモリ管理 💾</a></li>
<li><a href="#実践的な構造体活用例" id="toc-実践的な構造体活用例"><span
class="toc-section-number">12.3.8</span> 実践的な構造体活用例
💡</a></li>
</ul></li>
<li><a href="#サンプルコード-10" id="toc-サンプルコード-10"><span
class="toc-section-number">12.4</span> サンプルコード</a>
<ul>
<li><a href="#構造体の基本操作" id="toc-構造体の基本操作"><span
class="toc-section-number">12.4.1</span> 構造体の基本操作</a></li>
<li><a href="#構造体ポインタと-演算子"
id="toc-構造体ポインタと-演算子"><span
class="toc-section-number">12.4.2</span>
構造体ポインタと-&gt;演算子</a></li>
<li><a href="#構造体ポインタ配列-1" id="toc-構造体ポインタ配列-1"><span
class="toc-section-number">12.4.3</span> 構造体ポインタ配列</a></li>
<li><a href="#コンパイルと実行-10" id="toc-コンパイルと実行-10"><span
class="toc-section-number">12.4.4</span> コンパイルと実行</a></li>
</ul></li>
<li><a href="#演習課題-10" id="toc-演習課題-10"><span
class="toc-section-number">12.5</span> 演習課題</a>
<ul>
<li><a href="#基礎問題-10" id="toc-基礎問題-10"><span
class="toc-section-number">12.5.1</span> 基礎問題</a></li>
<li><a href="#応用問題-10" id="toc-応用問題-10"><span
class="toc-section-number">12.5.2</span> 応用問題</a></li>
<li><a href="#発展問題-5" id="toc-発展問題-5"><span
class="toc-section-number">12.5.3</span> 発展問題</a></li>
</ul></li>
<li><a href="#コンパイル方法-10" id="toc-コンパイル方法-10"><span
class="toc-section-number">12.6</span> コンパイル方法</a></li>
<li><a href="#規格による違い-10" id="toc-規格による違い-10"><span
class="toc-section-number">12.7</span> 規格による違い</a>
<ul>
<li><a href="#c90での制限事項-9" id="toc-c90での制限事項-9"><span
class="toc-section-number">12.7.1</span> C90での制限事項</a></li>
<li><a href="#c99以降の拡張-9" id="toc-c99以降の拡張-9"><span
class="toc-section-number">12.7.2</span> C99以降の拡張</a></li>
</ul></li>
<li><a href="#よくある間違い-8" id="toc-よくある間違い-8"><span
class="toc-section-number">12.8</span> 🚨 よくある間違い</a>
<ul>
<li><a href="#nullポインタの参照-1" id="toc-nullポインタの参照-1"><span
class="toc-section-number">12.8.1</span> 1. NULLポインタの参照</a></li>
<li><a href="#スタック上の構造体アドレスの返却"
id="toc-スタック上の構造体アドレスの返却"><span
class="toc-section-number">12.8.2</span> 2.
スタック上の構造体アドレスの返却</a></li>
<li><a href="#構造体の比較" id="toc-構造体の比較"><span
class="toc-section-number">12.8.3</span> 3. 構造体の比較</a></li>
</ul></li>
<li><a href="#次の章へ-10" id="toc-次の章へ-10"><span
class="toc-section-number">12.9</span> 次の章へ</a></li>
<li><a href="#参考資料-10" id="toc-参考資料-10"><span
class="toc-section-number">12.10</span> 参考資料</a></li>
</ul></li>
<li><a href="#関数ポインタ" id="toc-関数ポインタ"><span
class="toc-section-number">13</span> 関数ポインタ</a>
<ul>
<li><a href="#対応c規格-12" id="toc-対応c規格-12"><span
class="toc-section-number">13.1</span> 対応C規格</a></li>
<li><a href="#学習目標-12" id="toc-学習目標-12"><span
class="toc-section-number">13.2</span> 学習目標</a></li>
<li><a href="#理論解説-11" id="toc-理論解説-11"><span
class="toc-section-number">13.3</span> 理論解説</a>
<ul>
<li><a href="#関数ポインタの基本概念"
id="toc-関数ポインタの基本概念"><span
class="toc-section-number">13.3.1</span> 関数ポインタの基本概念
🎯</a></li>
<li><a href="#関数ポインタの実践的な使用"
id="toc-関数ポインタの実践的な使用"><span
class="toc-section-number">13.3.2</span> 関数ポインタの実践的な使用
💡</a></li>
<li><a href="#コールバック関数" id="toc-コールバック関数"><span
class="toc-section-number">13.3.3</span> コールバック関数 🔄</a></li>
<li><a href="#関数ポインタ配列" id="toc-関数ポインタ配列"><span
class="toc-section-number">13.3.4</span> 関数ポインタ配列 📚</a></li>
<li><a href="#高度な関数ポインタ活用"
id="toc-高度な関数ポインタ活用"><span
class="toc-section-number">13.3.5</span> 高度な関数ポインタ活用
🚀</a></li>
<li><a href="#関数ポインタのtypedef"
id="toc-関数ポインタのtypedef"><span
class="toc-section-number">13.3.6</span> 関数ポインタのtypedef
📝</a></li>
</ul></li>
<li><a href="#サンプルコード-11" id="toc-サンプルコード-11"><span
class="toc-section-number">13.4</span> サンプルコード</a>
<ul>
<li><a href="#関数ポインタの基本" id="toc-関数ポインタの基本"><span
class="toc-section-number">13.4.1</span> 関数ポインタの基本</a></li>
<li><a href="#コールバック関数-1" id="toc-コールバック関数-1"><span
class="toc-section-number">13.4.2</span> コールバック関数</a></li>
<li><a href="#関数ポインタ配列-1" id="toc-関数ポインタ配列-1"><span
class="toc-section-number">13.4.3</span> 関数ポインタ配列</a></li>
<li><a href="#コンパイルと実行-11" id="toc-コンパイルと実行-11"><span
class="toc-section-number">13.4.4</span> コンパイルと実行</a></li>
</ul></li>
<li><a href="#演習課題-11" id="toc-演習課題-11"><span
class="toc-section-number">13.5</span> 演習課題</a>
<ul>
<li><a href="#基礎問題-11" id="toc-基礎問題-11"><span
class="toc-section-number">13.5.1</span> 基礎問題</a></li>
<li><a href="#応用問題-11" id="toc-応用問題-11"><span
class="toc-section-number">13.5.2</span> 応用問題</a></li>
<li><a href="#発展問題-6" id="toc-発展問題-6"><span
class="toc-section-number">13.5.3</span> 発展問題</a></li>
</ul></li>
<li><a href="#コンパイル方法-11" id="toc-コンパイル方法-11"><span
class="toc-section-number">13.6</span> コンパイル方法</a></li>
<li><a href="#規格による違い-11" id="toc-規格による違い-11"><span
class="toc-section-number">13.7</span> 規格による違い</a>
<ul>
<li><a href="#c90での制限事項-10" id="toc-c90での制限事項-10"><span
class="toc-section-number">13.7.1</span> C90での制限事項</a></li>
<li><a href="#c99以降の拡張-10" id="toc-c99以降の拡張-10"><span
class="toc-section-number">13.7.2</span> C99以降の拡張</a></li>
</ul></li>
<li><a href="#よくある間違い-9" id="toc-よくある間違い-9"><span
class="toc-section-number">13.8</span> 🚨 よくある間違い</a>
<ul>
<li><a href="#関数ポインタの初期化忘れ"
id="toc-関数ポインタの初期化忘れ"><span
class="toc-section-number">13.8.1</span> 1.
関数ポインタの初期化忘れ</a></li>
<li><a href="#関数ポインタのnullチェック不足"
id="toc-関数ポインタのnullチェック不足"><span
class="toc-section-number">13.8.2</span> 2.
関数ポインタのNULLチェック不足</a></li>
<li><a href="#関数の戻り値型の不一致"
id="toc-関数の戻り値型の不一致"><span
class="toc-section-number">13.8.3</span> 3.
関数の戻り値型の不一致</a></li>
</ul></li>
<li><a href="#次の章へ-11" id="toc-次の章へ-11"><span
class="toc-section-number">13.9</span> 次の章へ</a></li>
<li><a href="#参考資料-11" id="toc-参考資料-11"><span
class="toc-section-number">13.10</span> 参考資料</a></li>
</ul></li>
<li><a href="#複数ファイル発展技術" id="toc-複数ファイル発展技術"><span
class="toc-section-number">14</span> 複数ファイル・発展技術</a>
<ul>
<li><a href="#対応c規格-13" id="toc-対応c規格-13"><span
class="toc-section-number">14.1</span> 対応C規格</a></li>
<li><a href="#学習目標-13" id="toc-学習目標-13"><span
class="toc-section-number">14.2</span> 学習目標</a></li>
<li><a href="#理論解説-12" id="toc-理論解説-12"><span
class="toc-section-number">14.3</span> 理論解説</a>
<ul>
<li><a href="#分割コンパイルの基本" id="toc-分割コンパイルの基本"><span
class="toc-section-number">14.3.1</span> 分割コンパイルの基本
📁</a></li>
<li><a href="#extern宣言とグローバル変数"
id="toc-extern宣言とグローバル変数"><span
class="toc-section-number">14.3.2</span> extern宣言とグローバル変数
🌐</a></li>
<li><a href="#プリプロセッサ機能" id="toc-プリプロセッサ機能"><span
class="toc-section-number">14.3.3</span> プリプロセッサ機能 🔧</a></li>
<li><a href="#モジュール設計パターン"
id="toc-モジュール設計パターン"><span
class="toc-section-number">14.3.4</span> モジュール設計パターン
🏗️</a></li>
<li><a href="#静的ライブラリの作成" id="toc-静的ライブラリの作成"><span
class="toc-section-number">14.3.5</span> 静的ライブラリの作成
📚</a></li>
<li><a href="#実践プロジェクト-ファイル管理システム"
id="toc-実践プロジェクト-ファイル管理システム"><span
class="toc-section-number">14.3.6</span> 実践プロジェクト:
ファイル管理システム 📁</a></li>
<li><a href="#コンパイル最適化とデバッグ"
id="toc-コンパイル最適化とデバッグ"><span
class="toc-section-number">14.3.7</span> コンパイル最適化とデバッグ
🔧</a></li>
</ul></li>
<li><a href="#サンプルコード-12" id="toc-サンプルコード-12"><span
class="toc-section-number">14.4</span> サンプルコード</a>
<ul>
<li><a href="#分割コンパイルの基本-1"
id="toc-分割コンパイルの基本-1"><span
class="toc-section-number">14.4.1</span> 分割コンパイルの基本</a></li>
<li><a href="#ライブラリ作成" id="toc-ライブラリ作成"><span
class="toc-section-number">14.4.2</span> ライブラリ作成</a></li>
<li><a href="#実践プロジェクト" id="toc-実践プロジェクト"><span
class="toc-section-number">14.4.3</span> 実践プロジェクト</a></li>
<li><a href="#コンパイルと実行-12" id="toc-コンパイルと実行-12"><span
class="toc-section-number">14.4.4</span> コンパイルと実行</a></li>
</ul></li>
<li><a href="#演習課題-12" id="toc-演習課題-12"><span
class="toc-section-number">14.5</span> 演習課題</a>
<ul>
<li><a href="#基礎問題-12" id="toc-基礎問題-12"><span
class="toc-section-number">14.5.1</span> 基礎問題</a></li>
<li><a href="#応用問題-12" id="toc-応用問題-12"><span
class="toc-section-number">14.5.2</span> 応用問題</a></li>
<li><a href="#発展問題-7" id="toc-発展問題-7"><span
class="toc-section-number">14.5.3</span> 発展問題</a></li>
</ul></li>
<li><a href="#コンパイル方法-12" id="toc-コンパイル方法-12"><span
class="toc-section-number">14.6</span> コンパイル方法</a></li>
<li><a href="#規格による違い-12" id="toc-規格による違い-12"><span
class="toc-section-number">14.7</span> 規格による違い</a>
<ul>
<li><a href="#c90での制限事項-11" id="toc-c90での制限事項-11"><span
class="toc-section-number">14.7.1</span> C90での制限事項</a></li>
<li><a href="#c99以降の拡張-11" id="toc-c99以降の拡張-11"><span
class="toc-section-number">14.7.2</span> C99以降の拡張</a></li>
</ul></li>
<li><a href="#よくある間違い-10" id="toc-よくある間違い-10"><span
class="toc-section-number">14.8</span> 🚨 よくある間違い</a>
<ul>
<li><a href="#ヘッダファイルのインクルードガード忘れ"
id="toc-ヘッダファイルのインクルードガード忘れ"><span
class="toc-section-number">14.8.1</span> 1.
ヘッダファイルのインクルードガード忘れ</a></li>
<li><a href="#extern宣言と定義の混同"
id="toc-extern宣言と定義の混同"><span
class="toc-section-number">14.8.2</span> 2.
extern宣言と定義の混同</a></li>
<li><a href="#循環インクルード" id="toc-循環インクルード"><span
class="toc-section-number">14.8.3</span> 3. 循環インクルード</a></li>
</ul></li>
<li><a href="#おめでとうございます" id="toc-おめでとうございます"><span
class="toc-section-number">14.9</span> 🎉 おめでとうございます！</a>
<ul>
<li><a href="#学習完了項目" id="toc-学習完了項目"><span
class="toc-section-number">14.9.1</span> 🏁 学習完了項目</a></li>
<li><a href="#次のステップ" id="toc-次のステップ"><span
class="toc-section-number">14.9.2</span> 🚀 次のステップ</a></li>
<li><a href="#参考資料-12" id="toc-参考資料-12"><span
class="toc-section-number">14.9.3</span> 参考資料</a></li>
</ul></li>
</ul></li>
</ul>
</nav>
<h1 data-number="1" id="はじめに"><span
class="header-section-number">1</span> はじめに</h1>
<p>本書は、C言語の基礎から応用まで、体系的に学習できる教材です。マイコン開発を見据えたビット操作も含め、実践的なプログラミングスキルを身につけることができます。</p>
<h2 data-number="1.1" id="対応c規格"><span
class="header-section-number">1.1</span> 対応C規格</h2>
<p>本教材は以下のC言語規格に対応しています：</p>
<ul>
<li><strong>C90</strong> (ANSI C): 基本的な文法とライブラリ</li>
<li><strong>C99</strong>: bool型、可変長配列、forループ内宣言など</li>
<li><strong>C11</strong>:
匿名構造体、_Generic選択、_Static_assertなど<br />
</li>
<li><strong>C17</strong>: C11のマイナーアップデート版</li>
</ul>
<h2 data-number="1.2" id="学習目標"><span
class="header-section-number">1.2</span> 学習目標</h2>
<h3 data-number="1.2.1" id="初心者レベル完了時"><span
class="header-section-number">1.2.1</span> 初心者レベル完了時</h3>
<ul>
<li>C言語の基本文法を理解</li>
<li>簡単なプログラムを作成可能</li>
<li>配列と関数を使った処理が書ける</li>
</ul>
<h3 data-number="1.2.2" id="中級レベル完了時"><span
class="header-section-number">1.2.2</span> 中級レベル完了時</h3>
<ul>
<li>ポインターを理解し活用可能</li>
<li>構造体を使ったデータ管理ができる</li>
<li>ビット操作でハードウェア制御が理解できる</li>
</ul>
<h3 data-number="1.2.3" id="発展レベル完了時"><span
class="header-section-number">1.2.3</span> 発展レベル完了時</h3>
<ul>
<li>メモリ管理を理解</li>
<li>大規模なプログラム開発の基礎を習得</li>
<li>C言語の高度な機能を活用可能</li>
</ul>
<h2 data-number="1.3" id="学習方法"><span
class="header-section-number">1.3</span> 学習方法</h2>
<ol type="1">
<li><strong>README.md</strong> で理論を学習</li>
<li><strong>examples/</strong> でサンプルコードを確認・実行</li>
<li><strong>exercises/</strong> で演習課題に挑戦</li>
<li><strong>solutions/</strong> で解答例を確認</li>
</ol>
<h1 data-number="2" id="導入環境構築"><span
class="header-section-number">2</span> 導入・環境構築</h1>
<h2 data-number="2.1" id="対応c規格-1"><span
class="header-section-number">2.1</span> 対応C規格</h2>
<ul>
<li><strong>主要対象:</strong> 全規格共通</li>
<li><strong>学習内容:</strong>
C言語の基礎知識、開発環境構築、規格解説</li>
</ul>
<h2 data-number="2.2" id="学習目標-1"><span
class="header-section-number">2.2</span> 学習目標</h2>
<p>この章を完了すると、以下のことができるようになります：</p>
<ul>
<li>C言語の特徴と歴史を理解する</li>
<li>開発環境を構築し、基本的なコンパイル手順を覚える</li>
<li>C言語の規格（C90, C99, C11, C17）の違いを理解する</li>
<li>簡単なプログラムをコンパイル・実行できる</li>
</ul>
<h2 data-number="2.3" id="理論解説"><span
class="header-section-number">2.3</span> 理論解説</h2>
<h3 data-number="2.3.1" id="c言語とは"><span
class="header-section-number">2.3.1</span> C言語とは 🔍</h3>
<p>C言語は1972年にデニス・リッチーがベル研究所で開発したプログラミング言語です。以下の特徴があります：</p>
<h4 data-number="2.3.1.1" id="主な特徴"><span
class="header-section-number">2.3.1.1</span> 主な特徴</h4>
<ul>
<li><strong>システムプログラミング向け</strong>:
OS開発やハードウェア制御に適している</li>
<li><strong>高い移植性</strong>:
異なるプラットフォーム間でのコード再利用が容易</li>
<li><strong>効率性</strong>: メモリとCPUの使用効率が良い</li>
<li><strong>シンプルな文法</strong>:
基本的な機能に絞られた明確な仕様</li>
</ul>
<h4 data-number="2.3.1.2" id="使用分野"><span
class="header-section-number">2.3.1.2</span> 使用分野</h4>
<ul>
<li>オペレーティングシステム（Linux、Windows等）</li>
<li>組込みシステム（マイコン、IoTデバイス）</li>
<li>データベースシステム</li>
<li>ゲームエンジン</li>
<li>科学技術計算</li>
</ul>
<h3 data-number="2.3.2" id="c言語の規格"><span
class="header-section-number">2.3.2</span> C言語の規格 📋</h3>
<p>C言語は時代とともに進化し、複数の規格が策定されています：</p>
<table>
<colgroup>
<col style="width: 22%" />
<col style="width: 22%" />
<col style="width: 27%" />
<col style="width: 27%" />
</colgroup>
<thead>
<tr>
<th>規格名</th>
<th>発表年</th>
<th>正式名称</th>
<th>主な特徴</th>
</tr>
</thead>
<tbody>
<tr>
<td><strong>C90</strong></td>
<td>1990年</td>
<td>ISO/IEC 9899:1990</td>
<td>初の国際標準、ANSI C</td>
</tr>
<tr>
<td><strong>C99</strong></td>
<td>1999年</td>
<td>ISO/IEC 9899:1999</td>
<td>bool型、可変長配列、inline関数</td>
</tr>
<tr>
<td><strong>C11</strong></td>
<td>2011年</td>
<td>ISO/IEC 9899:2011</td>
<td>匿名構造体、_Generic、マルチスレッド</td>
</tr>
<tr>
<td><strong>C17</strong></td>
<td>2018年</td>
<td>ISO/IEC 9899:2018</td>
<td>C11のバグ修正版</td>
</tr>
</tbody>
</table>
<h4 data-number="2.3.2.1" id="規格選択の指針"><span
class="header-section-number">2.3.2.1</span> 規格選択の指針</h4>
<ul>
<li><strong>学習目的</strong>: C90から始めて段階的に新機能を学習</li>
<li><strong>業務開発</strong>: C99以降を推奨（実用的な機能が多い）</li>
<li><strong>組込み</strong>:
C90またはC99（コンパイラ対応状況による）</li>
</ul>
<h3 data-number="2.3.3" id="開発環境"><span
class="header-section-number">2.3.3</span> 開発環境 🛠️</h3>
<p>C言語プログラムの開発には以下のツールが必要です：</p>
<h4 data-number="2.3.3.1" id="必須ツール"><span
class="header-section-number">2.3.3.1</span> 必須ツール</h4>
<ol type="1">
<li><strong>テキストエディター</strong>: コードを記述するツール</li>
<li><strong>コンパイラ</strong>: ソースコードを実行ファイルに変換</li>
<li><strong>リンカー</strong>: 複数のオブジェクトファイルを結合</li>
<li><strong>デバッガー</strong>: プログラムの動作を詳細に調査</li>
</ol>
<h4 data-number="2.3.3.2" id="推奨開発環境"><span
class="header-section-number">2.3.3.2</span> 推奨開発環境</h4>
<p><strong>Windows:</strong></p>
<div class="sourceCode" id="cb1"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb1-1"><a href="#cb1-1" aria-hidden="true" tabindex="-1"></a><span class="co"># MinGW-w64のインストール（推奨）</span></span>
<span id="cb1-2"><a href="#cb1-2" aria-hidden="true" tabindex="-1"></a><span class="co"># または Microsoft Visual Studio Community</span></span></code></pre></div>
<p><strong>macOS:</strong></p>
<div class="sourceCode" id="cb2"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb2-1"><a href="#cb2-1" aria-hidden="true" tabindex="-1"></a><span class="co"># Xcode Command Line Toolsのインストール</span></span>
<span id="cb2-2"><a href="#cb2-2" aria-hidden="true" tabindex="-1"></a><span class="ex">xcode-select</span> <span class="at">--install</span></span></code></pre></div>
<p><strong>Linux（Ubuntu/Debian）:</strong></p>
<div class="sourceCode" id="cb3"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb3-1"><a href="#cb3-1" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt update</span>
<span id="cb3-2"><a href="#cb3-2" aria-hidden="true" tabindex="-1"></a><span class="fu">sudo</span> apt install build-essential</span></code></pre></div>
<h3 data-number="2.3.4" id="コンパイル手順"><span
class="header-section-number">2.3.4</span> コンパイル手順 ⚙️</h3>
<p>C言語プログラムの実行までの流れ：</p>
<ol type="1">
<li><strong>ソースコード作成</strong>（.cファイル）</li>
<li><strong>プリプロセッサ処理</strong>（#includeの展開等）</li>
<li><strong>コンパイル</strong>（アセンブリコードに変換）</li>
<li><strong>アセンブル</strong>（オブジェクトファイルに変換）</li>
<li><strong>リンク</strong>（実行ファイルの生成）</li>
<li><strong>実行</strong></li>
</ol>
<h4 data-number="2.3.4.1" id="基本的なコンパイルコマンド"><span
class="header-section-number">2.3.4.1</span>
基本的なコンパイルコマンド</h4>
<div class="sourceCode" id="cb4"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb4-1"><a href="#cb4-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 一段階でコンパイル</span></span>
<span id="cb4-2"><a href="#cb4-2" aria-hidden="true" tabindex="-1"></a><span class="fu">gcc</span> program.c <span class="at">-o</span> program</span>
<span id="cb4-3"><a href="#cb4-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb4-4"><a href="#cb4-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 段階的なコンパイル</span></span>
<span id="cb4-5"><a href="#cb4-5" aria-hidden="true" tabindex="-1"></a><span class="fu">gcc</span> <span class="at">-c</span> program.c          <span class="co"># オブジェクトファイル作成</span></span>
<span id="cb4-6"><a href="#cb4-6" aria-hidden="true" tabindex="-1"></a><span class="fu">gcc</span> program.o <span class="at">-o</span> program  <span class="co"># 実行ファイル作成</span></span></code></pre></div>
<h2 data-number="2.4" id="サンプルコード"><span
class="header-section-number">2.4</span> サンプルコード</h2>
<h3 data-number="2.4.1" id="環境確認プログラム"><span
class="header-section-number">2.4.1</span> 環境確認プログラム</h3>
<p>プログラムファイル: <code>examples/environment_check.c</code></p>
<p>このプログラムは開発環境が正しく設定されているかを確認します。</p>
<h3 data-number="2.4.2" id="コンパイルと実行"><span
class="header-section-number">2.4.2</span> コンパイルと実行</h3>
<div class="sourceCode" id="cb5"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb5-1"><a href="#cb5-1" aria-hidden="true" tabindex="-1"></a><span class="co"># examples ディレクトリに移動</span></span>
<span id="cb5-2"><a href="#cb5-2" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> examples</span>
<span id="cb5-3"><a href="#cb5-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-4"><a href="#cb5-4" aria-hidden="true" tabindex="-1"></a><span class="co"># C90準拠でコンパイル</span></span>
<span id="cb5-5"><a href="#cb5-5" aria-hidden="true" tabindex="-1"></a><span class="fu">gcc</span> <span class="at">-std</span><span class="op">=</span>c90 <span class="at">-Wall</span> <span class="at">-Wextra</span> <span class="at">-pedantic</span> environment_check.c <span class="at">-o</span> env_check_c90</span>
<span id="cb5-6"><a href="#cb5-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-7"><a href="#cb5-7" aria-hidden="true" tabindex="-1"></a><span class="co"># C99準拠でコンパイル</span></span>
<span id="cb5-8"><a href="#cb5-8" aria-hidden="true" tabindex="-1"></a><span class="fu">gcc</span> <span class="at">-std</span><span class="op">=</span>c99 <span class="at">-Wall</span> <span class="at">-Wextra</span> <span class="at">-pedantic</span> environment_check.c <span class="at">-o</span> env_check_c99</span>
<span id="cb5-9"><a href="#cb5-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb5-10"><a href="#cb5-10" aria-hidden="true" tabindex="-1"></a><span class="co"># 実行</span></span>
<span id="cb5-11"><a href="#cb5-11" aria-hidden="true" tabindex="-1"></a><span class="ex">./env_check_c90</span></span></code></pre></div>
<h2 data-number="2.5" id="演習課題"><span
class="header-section-number">2.5</span> 演習課題</h2>
<h3 data-number="2.5.1" id="基礎問題"><span
class="header-section-number">2.5.1</span> 基礎問題</h3>
<ol type="1">
<li><strong>環境構築確認</strong>
<ul>
<li>サンプルプログラムを正常にコンパイル・実行できることを確認してください</li>
<li>C90、C99、C11の各規格でコンパイルを試してください</li>
</ul></li>
<li><strong>コンパイラ情報の確認</strong>
<ul>
<li>使用しているコンパイラの名前とバージョンを調べてください</li>
<li>対応している規格を確認してください</li>
</ul></li>
</ol>
<h3 data-number="2.5.2" id="応用問題"><span
class="header-section-number">2.5.2</span> 応用問題</h3>
<ol type="1">
<li><strong>規格比較</strong>
<ul>
<li>C90とC99の主な違いを3つ以上挙げてください</li>
<li>組込み開発でC90が今でも使われる理由を考えてください</li>
</ul></li>
<li><strong>コンパイル手順の理解</strong>
<ul>
<li>プリプロセッサ、コンパイラ、リンカーの役割を説明してください</li>
<li><code>-E</code>, <code>-S</code>, <code>-c</code>
オプションの効果を確認してください</li>
</ul></li>
</ol>
<h2 data-number="2.6" id="コンパイル方法"><span
class="header-section-number">2.6</span> コンパイル方法</h2>
<p>この章では以下のMakefileを使用してコンパイルができます：</p>
<div class="sourceCode" id="cb6"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb6-1"><a href="#cb6-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 全ての例題をコンパイル</span></span>
<span id="cb6-2"><a href="#cb6-2" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> all</span>
<span id="cb6-3"><a href="#cb6-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-4"><a href="#cb6-4" aria-hidden="true" tabindex="-1"></a><span class="co"># C90準拠でコンパイル</span></span>
<span id="cb6-5"><a href="#cb6-5" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> STANDARD=c90</span>
<span id="cb6-6"><a href="#cb6-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-7"><a href="#cb6-7" aria-hidden="true" tabindex="-1"></a><span class="co"># C99準拠でコンパイル  </span></span>
<span id="cb6-8"><a href="#cb6-8" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> STANDARD=c99</span>
<span id="cb6-9"><a href="#cb6-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-10"><a href="#cb6-10" aria-hidden="true" tabindex="-1"></a><span class="co"># C11準拠でコンパイル</span></span>
<span id="cb6-11"><a href="#cb6-11" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> STANDARD=c11</span>
<span id="cb6-12"><a href="#cb6-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb6-13"><a href="#cb6-13" aria-hidden="true" tabindex="-1"></a><span class="co"># クリーンアップ</span></span>
<span id="cb6-14"><a href="#cb6-14" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> clean</span></code></pre></div>
<h2 data-number="2.7" id="規格による違い"><span
class="header-section-number">2.7</span> 規格による違い</h2>
<p>この章では基本的な環境確認のため、規格による大きな違いはありません。ただし、コンパイラの警告やエラーメッセージに違いが出る場合があります。</p>
<h2 data-number="2.8" id="次の章へ"><span
class="header-section-number">2.8</span> 次の章へ</h2>
<h2 data-number="2.9" id="参考資料"><span
class="header-section-number">2.9</span> 参考資料</h2>
<ul>
<li><a
href="https://gcc.gnu.org/documentation.html">GCC公式ドキュメント</a></li>
<li><a href="https://www.iso.org/standard/74528.html">C言語規格書
(ISO/IEC 9899:2018)</a></li>
<li><a href="https://www.gnu.org/software/make/manual/">GNU Make
マニュアル</a></li>
</ul>
<h1 data-number="3" id="基本文法hello-world"><span
class="header-section-number">3</span> 基本文法・Hello World</h1>
<h2 data-number="3.1" id="対応c規格-2"><span
class="header-section-number">3.1</span> 対応C規格</h2>
<ul>
<li><strong>主要対象:</strong> C90</li>
<li><strong>学習内容:</strong>
プログラムの基本構造、main関数、printf関数</li>
</ul>
<h2 data-number="3.2" id="学習目標-2"><span
class="header-section-number">3.2</span> 学習目標</h2>
<p>この章を完了すると、以下のことができるようになります：</p>
<ul>
<li>C言語プログラムの基本構造を理解する</li>
<li>main関数の役割を理解する</li>
<li>printf関数を使った文字列出力ができる</li>
<li>コメントの書き方を覚える</li>
<li>基本的なエスケープシーケンスを使える</li>
</ul>
<h2 data-number="3.3" id="理論解説-1"><span
class="header-section-number">3.3</span> 理論解説</h2>
<h3 data-number="3.3.1" id="プログラムの基本構造"><span
class="header-section-number">3.3.1</span> プログラムの基本構造 🏗️</h3>
<p>C言語のプログラムは以下の基本構造を持ちます：</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb7-1"><a href="#cb7-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span><span class="pp">    </span><span class="co">/* ヘッダーファイルのインクルード */</span></span>
<span id="cb7-2"><a href="#cb7-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb7-3"><a href="#cb7-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span>        <span class="co">/* メイン関数の定義 */</span></span>
<span id="cb7-4"><a href="#cb7-4" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb7-5"><a href="#cb7-5" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;Hello, World!</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span>  <span class="co">/* 処理文 */</span></span>
<span id="cb7-6"><a href="#cb7-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span>         <span class="co">/* 戻り値 */</span></span>
<span id="cb7-7"><a href="#cb7-7" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h4 data-number="3.3.1.1" id="各部分の説明"><span
class="header-section-number">3.3.1.1</span> 各部分の説明</h4>
<ol type="1">
<li><strong>プリプロセッサ指令</strong> (<code>#include</code>)
<ul>
<li>ヘッダーファイルを取り込む指令</li>
<li><code>stdio.h</code>は標準入出力関数の宣言を含む</li>
</ul></li>
<li><strong>main関数</strong>
<ul>
<li>プログラムの実行開始点</li>
<li>すべてのC言語プログラムに必須</li>
</ul></li>
<li><strong>関数本体</strong>（<code>{</code> と <code>}</code>
で囲まれた部分）
<ul>
<li>実際の処理を記述する場所</li>
</ul></li>
<li><strong>return文</strong>
<ul>
<li>関数の終了と戻り値の指定</li>
</ul></li>
</ol>
<h3 data-number="3.3.2" id="main関数の詳細"><span
class="header-section-number">3.3.2</span> main関数の詳細 🚀</h3>
<p>main関数はプログラムの<strong>エントリーポイント</strong>（実行開始点）です。</p>
<h4 data-number="3.3.2.1" id="main関数の形式"><span
class="header-section-number">3.3.2.1</span> main関数の形式</h4>
<p><strong>標準的な形式:</strong></p>
<div class="sourceCode" id="cb8"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb8-1"><a href="#cb8-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb8-2"><a href="#cb8-2" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb8-3"><a href="#cb8-3" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* プログラムの処理 */</span></span>
<span id="cb8-4"><a href="#cb8-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb8-5"><a href="#cb8-5" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p><strong>コマンドライン引数を受け取る形式:</strong></p>
<div class="sourceCode" id="cb9"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb9-1"><a href="#cb9-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">int</span> argc<span class="op">,</span> <span class="dt">char</span> <span class="op">*</span>argv<span class="op">[])</span></span>
<span id="cb9-2"><a href="#cb9-2" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb9-3"><a href="#cb9-3" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* プログラムの処理 */</span></span>
<span id="cb9-4"><a href="#cb9-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb9-5"><a href="#cb9-5" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h4 data-number="3.3.2.2" id="戻り値の意味"><span
class="header-section-number">3.3.2.2</span> 戻り値の意味</h4>
<ul>
<li><strong>0</strong>: プログラムが正常終了</li>
<li><strong>0以外</strong>: エラーで終了（エラーコード）</li>
</ul>
<h3 data-number="3.3.3" id="printf関数"><span
class="header-section-number">3.3.3</span> printf関数 🖨️</h3>
<p>printf関数は<strong>フォーマット付き出力</strong>を行う標準ライブラリ関数です。</p>
<h4 data-number="3.3.3.1" id="基本的な使い方"><span
class="header-section-number">3.3.3.1</span> 基本的な使い方</h4>
<div class="sourceCode" id="cb10"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb10-1"><a href="#cb10-1" aria-hidden="true" tabindex="-1"></a>printf<span class="op">(</span><span class="st">&quot;Hello, World!</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span></code></pre></div>
<h4 data-number="3.3.3.2" id="フォーマット指定子"><span
class="header-section-number">3.3.3.2</span> フォーマット指定子</h4>
<table>
<thead>
<tr>
<th>指定子</th>
<th>データ型</th>
<th>説明</th>
<th>例</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>%d</code></td>
<td>int</td>
<td>10進整数</td>
<td><code>printf("%d", 123);</code></td>
</tr>
<tr>
<td><code>%c</code></td>
<td>char</td>
<td>文字</td>
<td><code>printf("%c", 'A');</code></td>
</tr>
<tr>
<td><code>%s</code></td>
<td>char*</td>
<td>文字列</td>
<td><code>printf("%s", "Hello");</code></td>
</tr>
<tr>
<td><code>%f</code></td>
<td>double</td>
<td>浮動小数点数</td>
<td><code>printf("%f", 3.14);</code></td>
</tr>
</tbody>
</table>
<h4 data-number="3.3.3.3" id="エスケープシーケンス"><span
class="header-section-number">3.3.3.3</span> エスケープシーケンス</h4>
<p>特殊文字を表現するための記号です：</p>
<table>
<thead>
<tr>
<th>シーケンス</th>
<th>意味</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>\n</code></td>
<td>改行</td>
<td>次の行に移る</td>
</tr>
<tr>
<td><code>\t</code></td>
<td>タブ</td>
<td>タブ文字を挿入</td>
</tr>
<tr>
<td><code>\"</code></td>
<td>ダブルクォート</td>
<td>文字列内で<code>"</code>を表示</td>
</tr>
<tr>
<td><code>\\</code></td>
<td>バックスラッシュ</td>
<td><code>\</code>文字を表示</td>
</tr>
</tbody>
</table>
<h3 data-number="3.3.4" id="コメント"><span
class="header-section-number">3.3.4</span> コメント 💭</h3>
<p>プログラムに説明を追加するためのコメント記法：</p>
<h4 data-number="3.3.4.1" id="c90スタイル"><span
class="header-section-number">3.3.4.1</span> C90スタイル</h4>
<div class="sourceCode" id="cb11"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb11-1"><a href="#cb11-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* これは複数行にわたる</span></span>
<span id="cb11-2"><a href="#cb11-2" aria-hidden="true" tabindex="-1"></a><span class="co">   コメントです */</span></span>
<span id="cb11-3"><a href="#cb11-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb11-4"><a href="#cb11-4" aria-hidden="true" tabindex="-1"></a><span class="co">/* 1行コメント */</span></span></code></pre></div>
<h4 data-number="3.3.4.2" id="c99以降のスタイル"><span
class="header-section-number">3.3.4.2</span> C99以降のスタイル</h4>
<div class="sourceCode" id="cb12"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb12-1"><a href="#cb12-1" aria-hidden="true" tabindex="-1"></a><span class="co">// これは1行コメントです（C99以降）</span></span></code></pre></div>
<p><strong>重要:</strong> この章ではC90準拠のため、<code>/* */</code>
スタイルを使用します。</p>
<h3 data-number="3.3.5" id="基本的なプログラム例"><span
class="header-section-number">3.3.5</span> 基本的なプログラム例 📝</h3>
<h4 data-number="3.3.5.1" id="例1-単純な文字列出力"><span
class="header-section-number">3.3.5.1</span> 例1: 単純な文字列出力</h4>
<div class="sourceCode" id="cb13"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb13-1"><a href="#cb13-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb13-2"><a href="#cb13-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb13-3"><a href="#cb13-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb13-4"><a href="#cb13-4" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb13-5"><a href="#cb13-5" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;Hello, World!</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb13-6"><a href="#cb13-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb13-7"><a href="#cb13-7" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h4 data-number="3.3.5.2" id="例2-複数行の出力"><span
class="header-section-number">3.3.5.2</span> 例2: 複数行の出力</h4>
<div class="sourceCode" id="cb14"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb14-1"><a href="#cb14-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb14-2"><a href="#cb14-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb14-3"><a href="#cb14-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb14-4"><a href="#cb14-4" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb14-5"><a href="#cb14-5" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;C言語学習教材</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb14-6"><a href="#cb14-6" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;第1章: 基本文法・Hello World</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb14-7"><a href="#cb14-7" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;プログラムが正常に動作しています！</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb14-8"><a href="#cb14-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb14-9"><a href="#cb14-9" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h4 data-number="3.3.5.3" id="例3-エスケープシーケンスの使用"><span
class="header-section-number">3.3.5.3</span> 例3:
エスケープシーケンスの使用</h4>
<div class="sourceCode" id="cb15"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb15-1"><a href="#cb15-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb15-2"><a href="#cb15-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb15-3"><a href="#cb15-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb15-4"><a href="#cb15-4" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb15-5"><a href="#cb15-5" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;タブ区切り:</span><span class="sc">\t</span><span class="st">アイテム1</span><span class="sc">\t</span><span class="st">アイテム2</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb15-6"><a href="#cb15-6" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;引用符の表示: </span><span class="sc">\&quot;</span><span class="st">Hello, World!</span><span class="sc">\&quot;\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb15-7"><a href="#cb15-7" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;パス表示: C:</span><span class="sc">\\</span><span class="st">Program Files</span><span class="sc">\\</span><span class="st">MyApp</span><span class="sc">\\\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb15-8"><a href="#cb15-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb15-9"><a href="#cb15-9" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h2 data-number="3.4" id="サンプルコード-1"><span
class="header-section-number">3.4</span> サンプルコード</h2>
<h3 data-number="3.4.1" id="hello-worldプログラム"><span
class="header-section-number">3.4.1</span> Hello Worldプログラム</h3>
<p>プログラムファイル: <code>examples/hello_world.c</code></p>
<p>もっとも基本的なC言語プログラムです。</p>
<h3 data-number="3.4.2" id="フォーマット出力プログラム"><span
class="header-section-number">3.4.2</span>
フォーマット出力プログラム</h3>
<p>プログラムファイル: <code>examples/formatted_output.c</code></p>
<p>printf関数のさまざまな使い方を学習します。</p>
<h3 data-number="3.4.3" id="コンパイルと実行-1"><span
class="header-section-number">3.4.3</span> コンパイルと実行</h3>
<div class="sourceCode" id="cb16"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb16-1"><a href="#cb16-1" aria-hidden="true" tabindex="-1"></a><span class="co"># examples ディレクトリに移動</span></span>
<span id="cb16-2"><a href="#cb16-2" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> examples</span>
<span id="cb16-3"><a href="#cb16-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-4"><a href="#cb16-4" aria-hidden="true" tabindex="-1"></a><span class="co"># C90準拠でコンパイル</span></span>
<span id="cb16-5"><a href="#cb16-5" aria-hidden="true" tabindex="-1"></a><span class="fu">gcc</span> <span class="at">-std</span><span class="op">=</span>c90 <span class="at">-Wall</span> <span class="at">-Wextra</span> <span class="at">-pedantic</span> hello_world.c <span class="at">-o</span> hello_world</span>
<span id="cb16-6"><a href="#cb16-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb16-7"><a href="#cb16-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 実行</span></span>
<span id="cb16-8"><a href="#cb16-8" aria-hidden="true" tabindex="-1"></a><span class="ex">./hello_world</span></span></code></pre></div>
<h2 data-number="3.5" id="演習課題-1"><span
class="header-section-number">3.5</span> 演習課題</h2>
<h3 data-number="3.5.1" id="基礎問題-1"><span
class="header-section-number">3.5.1</span> 基礎問題</h3>
<ol type="1">
<li><strong>Hello World</strong>
<ul>
<li>自分の名前を表示するプログラムを作成してください</li>
</ul></li>
<li><strong>複数行出力</strong>
<ul>
<li>好きな詩や歌詞を3行以上で表示するプログラムを作成してください</li>
</ul></li>
<li><strong>エスケープシーケンス</strong>
<ul>
<li>タブとダブルクォートを使った表示プログラムを作成してください</li>
</ul></li>
</ol>
<h3 data-number="3.5.2" id="応用問題-1"><span
class="header-section-number">3.5.2</span> 応用問題</h3>
<ol type="1">
<li><strong>フォーマット文字列</strong>
<ul>
<li>printf関数のさまざまなフォーマット指定子を試してください</li>
</ul></li>
<li><strong>プログラム構造の理解</strong>
<ul>
<li>main関数の戻り値を変更して動作を確認してください</li>
</ul></li>
</ol>
<h2 data-number="3.6" id="コンパイル方法-1"><span
class="header-section-number">3.6</span> コンパイル方法</h2>
<p>この章では以下のMakefileを使用してコンパイルができます：</p>
<div class="sourceCode" id="cb17"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb17-1"><a href="#cb17-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 全ての例題をコンパイル</span></span>
<span id="cb17-2"><a href="#cb17-2" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> all</span>
<span id="cb17-3"><a href="#cb17-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-4"><a href="#cb17-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 特定のプログラムをコンパイル</span></span>
<span id="cb17-5"><a href="#cb17-5" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> hello_world</span>
<span id="cb17-6"><a href="#cb17-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-7"><a href="#cb17-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 実行</span></span>
<span id="cb17-8"><a href="#cb17-8" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> run</span>
<span id="cb17-9"><a href="#cb17-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb17-10"><a href="#cb17-10" aria-hidden="true" tabindex="-1"></a><span class="co"># クリーンアップ</span></span>
<span id="cb17-11"><a href="#cb17-11" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> clean</span></code></pre></div>
<h2 data-number="3.7" id="規格による違い-1"><span
class="header-section-number">3.7</span> 規格による違い</h2>
<h3 data-number="3.7.1" id="c90での制限事項"><span
class="header-section-number">3.7.1</span> C90での制限事項</h3>
<ul>
<li>コメントは <code>/* */</code> 形式のみ</li>
<li>変数宣言は関数やブロックの先頭で行う</li>
<li>forループ内での変数宣言は不可</li>
</ul>
<h3 data-number="3.7.2" id="c99以降の拡張"><span
class="header-section-number">3.7.2</span> C99以降の拡張</h3>
<ul>
<li><code>//</code> 形式のコメント追加</li>
<li>forループ内での変数宣言が可能</li>
<li>複合リテラル等の新機能</li>
</ul>
<h2 data-number="3.8" id="次の章へ-1"><span
class="header-section-number">3.8</span> 次の章へ</h2>
<h2 data-number="3.9" id="参考資料-1"><span
class="header-section-number">3.9</span> 参考資料</h2>
<ul>
<li><a
href="https://ja.cppreference.com/w/c/io/fprintf">printf関数リファレンス</a></li>
<li><a
href="https://ja.cppreference.com/w/c/language/escape">エスケープシーケンス一覧</a></li>
<li><a
href="https://www.iso.org/standard/17782.html">C90規格仕様</a></li>
</ul>
<h1 data-number="4" id="データ型変数スコープ"><span
class="header-section-number">4</span> データ型・変数・スコープ</h1>
<h2 data-number="4.1" id="対応c規格-3"><span
class="header-section-number">4.1</span> 対応C規格</h2>
<ul>
<li><strong>主要対象:</strong> C90</li>
<li><strong>学習内容:</strong>
基本データ型、変数宣言、初期化、スコープ、変数の生存期間</li>
</ul>
<h2 data-number="4.2" id="学習目標-3"><span
class="header-section-number">4.2</span> 学習目標</h2>
<p>この章を完了すると、以下のことができるようになります：</p>
<ul>
<li>C言語の基本データ型を理解する</li>
<li>変数の宣言と初期化ができる</li>
<li>変数のスコープ（有効範囲）を理解する</li>
<li>データ型のサイズと範囲を把握する</li>
<li>適切な型を選択してプログラムを作成できる</li>
</ul>
<h2 data-number="4.3" id="理論解説-2"><span
class="header-section-number">4.3</span> 理論解説</h2>
<h3 data-number="4.3.1" id="c言語の基本データ型"><span
class="header-section-number">4.3.1</span> C言語の基本データ型 🔢</h3>
<p>C言語では、さまざまなデータ型が用意されています。</p>
<h4 data-number="4.3.1.1" id="整数型"><span
class="header-section-number">4.3.1.1</span> 整数型</h4>
<table>
<thead>
<tr>
<th>型名</th>
<th>サイズ</th>
<th>範囲</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>char</code></td>
<td>1バイト</td>
<td>-128 〜 127</td>
<td>文字、小さな整数</td>
</tr>
<tr>
<td><code>unsigned char</code></td>
<td>1バイト</td>
<td>0 〜 255</td>
<td>符号なし文字</td>
</tr>
<tr>
<td><code>short</code></td>
<td>2バイト</td>
<td>-32,768 〜 32,767</td>
<td>短整数</td>
</tr>
<tr>
<td><code>unsigned short</code></td>
<td>2バイト</td>
<td>0 〜 65,535</td>
<td>符号なし短整数</td>
</tr>
<tr>
<td><code>int</code></td>
<td>4バイト</td>
<td>-2,147,483,648 〜 2,147,483,647</td>
<td>整数</td>
</tr>
<tr>
<td><code>unsigned int</code></td>
<td>4バイト</td>
<td>0 〜 4,294,967,295</td>
<td>符号なし整数</td>
</tr>
<tr>
<td><code>long</code></td>
<td>4/8バイト</td>
<td>システム依存</td>
<td>長整数</td>
</tr>
<tr>
<td><code>unsigned long</code></td>
<td>4/8バイト</td>
<td>システム依存</td>
<td>符号なし長整数</td>
</tr>
</tbody>
</table>
<h4 data-number="4.3.1.2" id="浮動小数点数型"><span
class="header-section-number">4.3.1.2</span> 浮動小数点数型</h4>
<table>
<thead>
<tr>
<th>型名</th>
<th>サイズ</th>
<th>精度</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>float</code></td>
<td>4バイト</td>
<td>約7桁</td>
<td>単精度浮動小数点</td>
</tr>
<tr>
<td><code>double</code></td>
<td>8バイト</td>
<td>約15桁</td>
<td>倍精度浮動小数点</td>
</tr>
<tr>
<td><code>long double</code></td>
<td>8/16バイト</td>
<td>システム依存</td>
<td>拡張精度浮動小数点</td>
</tr>
</tbody>
</table>
<h4 data-number="4.3.1.3" id="その他の型"><span
class="header-section-number">4.3.1.3</span> その他の型</h4>
<table>
<thead>
<tr>
<th>型名</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>void</code></td>
<td>「型なし」を表す（関数の戻り値等で使用）</td>
</tr>
</tbody>
</table>
<h3 data-number="4.3.2" id="変数の宣言と初期化"><span
class="header-section-number">4.3.2</span> 変数の宣言と初期化 📝</h3>
<h4 data-number="4.3.2.1" id="基本的な変数宣言"><span
class="header-section-number">4.3.2.1</span> 基本的な変数宣言</h4>
<div class="sourceCode" id="cb18"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb18-1"><a href="#cb18-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> age<span class="op">;</span>        <span class="co">/* 整数型変数の宣言 */</span></span>
<span id="cb18-2"><a href="#cb18-2" aria-hidden="true" tabindex="-1"></a><span class="dt">double</span> height<span class="op">;</span>  <span class="co">/* 倍精度浮動小数点型変数の宣言 */</span></span>
<span id="cb18-3"><a href="#cb18-3" aria-hidden="true" tabindex="-1"></a><span class="dt">char</span> grade<span class="op">;</span>     <span class="co">/* 文字型変数の宣言 */</span></span></code></pre></div>
<h4 data-number="4.3.2.2" id="初期化付き宣言"><span
class="header-section-number">4.3.2.2</span> 初期化付き宣言</h4>
<div class="sourceCode" id="cb19"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb19-1"><a href="#cb19-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> count <span class="op">=</span> <span class="dv">0</span><span class="op">;</span>           <span class="co">/* 宣言と同時に初期化 */</span></span>
<span id="cb19-2"><a href="#cb19-2" aria-hidden="true" tabindex="-1"></a><span class="dt">double</span> pi <span class="op">=</span> <span class="fl">3.14159</span><span class="op">;</span>     <span class="co">/* 浮動小数点数の初期化 */</span></span>
<span id="cb19-3"><a href="#cb19-3" aria-hidden="true" tabindex="-1"></a><span class="dt">char</span> letter <span class="op">=</span> <span class="ch">&#39;A&#39;</span><span class="op">;</span>       <span class="co">/* 文字の初期化 */</span></span></code></pre></div>
<h4 data-number="4.3.2.3" id="複数変数の同時宣言"><span
class="header-section-number">4.3.2.3</span> 複数変数の同時宣言</h4>
<div class="sourceCode" id="cb20"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb20-1"><a href="#cb20-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> x<span class="op">,</span> y<span class="op">,</span> z<span class="op">;</span>                    <span class="co">/* 同じ型の複数変数 */</span></span>
<span id="cb20-2"><a href="#cb20-2" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> a <span class="op">=</span> <span class="dv">10</span><span class="op">,</span> b <span class="op">=</span> <span class="dv">20</span><span class="op">,</span> c<span class="op">;</span>          <span class="co">/* 一部だけ初期化 */</span></span></code></pre></div>
<h3 data-number="4.3.3" id="変数の代入と演算"><span
class="header-section-number">4.3.3</span> 変数の代入と演算 🔄</h3>
<h4 data-number="4.3.3.1" id="代入演算子"><span
class="header-section-number">4.3.3.1</span> 代入演算子</h4>
<div class="sourceCode" id="cb21"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb21-1"><a href="#cb21-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> number<span class="op">;</span></span>
<span id="cb21-2"><a href="#cb21-2" aria-hidden="true" tabindex="-1"></a>number <span class="op">=</span> <span class="dv">42</span><span class="op">;</span>        <span class="co">/* 代入 */</span></span>
<span id="cb21-3"><a href="#cb21-3" aria-hidden="true" tabindex="-1"></a>number <span class="op">+=</span> <span class="dv">5</span><span class="op">;</span>        <span class="co">/* number = number + 5 と同じ */</span></span>
<span id="cb21-4"><a href="#cb21-4" aria-hidden="true" tabindex="-1"></a>number <span class="op">-=</span> <span class="dv">3</span><span class="op">;</span>        <span class="co">/* number = number - 3 と同じ */</span></span>
<span id="cb21-5"><a href="#cb21-5" aria-hidden="true" tabindex="-1"></a>number <span class="op">*=</span> <span class="dv">2</span><span class="op">;</span>        <span class="co">/* number = number * 2 と同じ */</span></span>
<span id="cb21-6"><a href="#cb21-6" aria-hidden="true" tabindex="-1"></a>number <span class="op">/=</span> <span class="dv">4</span><span class="op">;</span>        <span class="co">/* number = number / 4 と同じ */</span></span></code></pre></div>
<h4 data-number="4.3.3.2" id="基本演算子"><span
class="header-section-number">4.3.3.2</span> 基本演算子</h4>
<div class="sourceCode" id="cb22"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb22-1"><a href="#cb22-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> a <span class="op">=</span> <span class="dv">10</span><span class="op">,</span> b <span class="op">=</span> <span class="dv">3</span><span class="op">;</span></span>
<span id="cb22-2"><a href="#cb22-2" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> sum <span class="op">=</span> a <span class="op">+</span> b<span class="op">;</span>        <span class="co">/* 加算: 13 */</span></span>
<span id="cb22-3"><a href="#cb22-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> diff <span class="op">=</span> a <span class="op">-</span> b<span class="op">;</span>       <span class="co">/* 減算: 7 */</span></span>
<span id="cb22-4"><a href="#cb22-4" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> product <span class="op">=</span> a <span class="op">*</span> b<span class="op">;</span>    <span class="co">/* 乗算: 30 */</span></span>
<span id="cb22-5"><a href="#cb22-5" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> quotient <span class="op">=</span> a <span class="op">/</span> b<span class="op">;</span>   <span class="co">/* 除算: 3 (整数除算) */</span></span>
<span id="cb22-6"><a href="#cb22-6" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> remainder <span class="op">=</span> a <span class="op">%</span> b<span class="op">;</span>  <span class="co">/* 剰余: 1 */</span></span></code></pre></div>
<h3 data-number="4.3.4" id="型変換キャスト"><span
class="header-section-number">4.3.4</span> 型変換（キャスト） 🔄</h3>
<h4 data-number="4.3.4.1" id="暗黙の型変換"><span
class="header-section-number">4.3.4.1</span> 暗黙の型変換</h4>
<div class="sourceCode" id="cb23"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb23-1"><a href="#cb23-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> i <span class="op">=</span> <span class="dv">10</span><span class="op">;</span></span>
<span id="cb23-2"><a href="#cb23-2" aria-hidden="true" tabindex="-1"></a><span class="dt">double</span> d<span class="op">;</span></span>
<span id="cb23-3"><a href="#cb23-3" aria-hidden="true" tabindex="-1"></a>d <span class="op">=</span> i<span class="op">;</span>          <span class="co">/* int から double への自動変換 */</span></span></code></pre></div>
<h4 data-number="4.3.4.2" id="明示的な型変換"><span
class="header-section-number">4.3.4.2</span> 明示的な型変換</h4>
<div class="sourceCode" id="cb24"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb24-1"><a href="#cb24-1" aria-hidden="true" tabindex="-1"></a><span class="dt">double</span> pi <span class="op">=</span> <span class="fl">3.14159</span><span class="op">;</span></span>
<span id="cb24-2"><a href="#cb24-2" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> rounded<span class="op">;</span></span>
<span id="cb24-3"><a href="#cb24-3" aria-hidden="true" tabindex="-1"></a>rounded <span class="op">=</span> <span class="op">(</span><span class="dt">int</span><span class="op">)</span>pi<span class="op">;</span>      <span class="co">/* 明示的にintに変換（3になる） */</span></span></code></pre></div>
<h4 data-number="4.3.4.3" id="型変換の注意点"><span
class="header-section-number">4.3.4.3</span> 型変換の注意点</h4>
<div class="sourceCode" id="cb25"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb25-1"><a href="#cb25-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> a <span class="op">=</span> <span class="dv">5</span><span class="op">,</span> b <span class="op">=</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb25-2"><a href="#cb25-2" aria-hidden="true" tabindex="-1"></a><span class="dt">double</span> result<span class="op">;</span></span>
<span id="cb25-3"><a href="#cb25-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb25-4"><a href="#cb25-4" aria-hidden="true" tabindex="-1"></a>result <span class="op">=</span> a <span class="op">/</span> b<span class="op">;</span>         <span class="co">/* 結果: 2.0 (整数除算後に変換) */</span></span>
<span id="cb25-5"><a href="#cb25-5" aria-hidden="true" tabindex="-1"></a>result <span class="op">=</span> <span class="op">(</span><span class="dt">double</span><span class="op">)</span>a <span class="op">/</span> b<span class="op">;</span> <span class="co">/* 結果: 2.5 (実数除算) */</span></span></code></pre></div>
<h3 data-number="4.3.5" id="変数のスコープ有効範囲"><span
class="header-section-number">4.3.5</span> 変数のスコープ（有効範囲）
🌐</h3>
<p>スコープとは、変数がプログラム中のどの部分でアクセス可能かを示す概念です。</p>
<h4 data-number="4.3.5.1" id="ファイルスコープグローバルスコープ"><span
class="header-section-number">4.3.5.1</span> 1.
ファイルスコープ（グローバルスコープ）</h4>
<p>ファイル全体でアクセス可能な変数です。</p>
<div class="sourceCode" id="cb26"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb26-1"><a href="#cb26-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb26-2"><a href="#cb26-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-3"><a href="#cb26-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> global_count <span class="op">=</span> <span class="dv">0</span><span class="op">;</span>   <span class="co">/* ファイルスコープ変数 */</span></span>
<span id="cb26-4"><a href="#cb26-4" aria-hidden="true" tabindex="-1"></a><span class="dt">double</span> global_rate<span class="op">;</span>     <span class="co">/* 初期化されていない場合は0になる */</span></span>
<span id="cb26-5"><a href="#cb26-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-6"><a href="#cb26-6" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> function1<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb26-7"><a href="#cb26-7" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb26-8"><a href="#cb26-8" aria-hidden="true" tabindex="-1"></a>    global_count <span class="op">=</span> <span class="dv">100</span><span class="op">;</span> <span class="co">/* 関数内からアクセス可能 */</span></span>
<span id="cb26-9"><a href="#cb26-9" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb26-10"><a href="#cb26-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb26-11"><a href="#cb26-11" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb26-12"><a href="#cb26-12" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb26-13"><a href="#cb26-13" aria-hidden="true" tabindex="-1"></a>    global_count <span class="op">=</span> <span class="dv">10</span><span class="op">;</span>  <span class="co">/* main関数からもアクセス可能 */</span></span>
<span id="cb26-14"><a href="#cb26-14" aria-hidden="true" tabindex="-1"></a>    function1<span class="op">();</span></span>
<span id="cb26-15"><a href="#cb26-15" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;global_count = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> global_count<span class="op">);</span> <span class="co">/* 100が出力 */</span></span>
<span id="cb26-16"><a href="#cb26-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb26-17"><a href="#cb26-17" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h4 data-number="4.3.5.2" id="関数スコープ"><span
class="header-section-number">4.3.5.2</span> 2. 関数スコープ</h4>
<p>関数内で宣言された変数は、その関数内でのみアクセス可能です。</p>
<div class="sourceCode" id="cb27"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb27-1"><a href="#cb27-1" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> function_a<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb27-2"><a href="#cb27-2" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb27-3"><a href="#cb27-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> local_a <span class="op">=</span> <span class="dv">10</span><span class="op">;</span>   <span class="co">/* function_a内でのみ有効 */</span></span>
<span id="cb27-4"><a href="#cb27-4" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;local_a = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> local_a<span class="op">);</span></span>
<span id="cb27-5"><a href="#cb27-5" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb27-6"><a href="#cb27-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb27-7"><a href="#cb27-7" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> function_b<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb27-8"><a href="#cb27-8" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb27-9"><a href="#cb27-9" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> local_a <span class="op">=</span> <span class="dv">20</span><span class="op">;</span>   <span class="co">/* 異なる関数なので同じ名前でも別変数 */</span></span>
<span id="cb27-10"><a href="#cb27-10" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;local_a = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> local_a<span class="op">);</span></span>
<span id="cb27-11"><a href="#cb27-11" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* function_aのlocal_aにはアクセス不可 */</span></span>
<span id="cb27-12"><a href="#cb27-12" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h4 data-number="4.3.5.3" id="ブロックスコープ"><span
class="header-section-number">4.3.5.3</span> 3. ブロックスコープ</h4>
<p><code>{</code> と <code>}</code>
で囲まれたブロック内でのみアクセス可能な変数です。</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb28-1"><a href="#cb28-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb28-2"><a href="#cb28-2" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb28-3"><a href="#cb28-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> main_var <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb28-4"><a href="#cb28-4" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb28-5"><a href="#cb28-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>main_var <span class="op">&gt;</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb28-6"><a href="#cb28-6" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> block_var <span class="op">=</span> <span class="dv">2</span><span class="op">;</span>      <span class="co">/* このifブロック内でのみ有効 */</span></span>
<span id="cb28-7"><a href="#cb28-7" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;block_var = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> block_var<span class="op">);</span></span>
<span id="cb28-8"><a href="#cb28-8" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb28-9"><a href="#cb28-9" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span></span>
<span id="cb28-10"><a href="#cb28-10" aria-hidden="true" tabindex="-1"></a>            <span class="dt">int</span> nested_var <span class="op">=</span> <span class="dv">3</span><span class="op">;</span> <span class="co">/* さらに内側のブロック */</span></span>
<span id="cb28-11"><a href="#cb28-11" aria-hidden="true" tabindex="-1"></a>            printf<span class="op">(</span><span class="st">&quot;nested_var = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> nested_var<span class="op">);</span></span>
<span id="cb28-12"><a href="#cb28-12" aria-hidden="true" tabindex="-1"></a>            <span class="co">/* block_varとmain_varにもアクセス可能 */</span></span>
<span id="cb28-13"><a href="#cb28-13" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb28-14"><a href="#cb28-14" aria-hidden="true" tabindex="-1"></a>        <span class="co">/* nested_varはここではアクセス不可 */</span></span>
<span id="cb28-15"><a href="#cb28-15" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb28-16"><a href="#cb28-16" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* block_varはここではアクセス不可 */</span></span>
<span id="cb28-17"><a href="#cb28-17" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb28-18"><a href="#cb28-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb28-19"><a href="#cb28-19" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h4 data-number="4.3.5.4" id="スコープの隠蔽シャドウイング"><span
class="header-section-number">4.3.5.4</span> 4.
スコープの隠蔽（シャドウイング）</h4>
<p>内側のスコープで同じ名前の変数を宣言すると、外側の変数が隠蔽されます。</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb29-1"><a href="#cb29-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> x <span class="op">=</span> <span class="dv">10</span><span class="op">;</span>     <span class="co">/* グローバル変数 */</span></span>
<span id="cb29-2"><a href="#cb29-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb29-3"><a href="#cb29-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb29-4"><a href="#cb29-4" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb29-5"><a href="#cb29-5" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;グローバルx = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> x<span class="op">);</span>    <span class="co">/* 10が出力 */</span></span>
<span id="cb29-6"><a href="#cb29-6" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb29-7"><a href="#cb29-7" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span></span>
<span id="cb29-8"><a href="#cb29-8" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> x <span class="op">=</span> <span class="dv">20</span><span class="op">;</span> <span class="co">/* ローカル変数がグローバル変数を隠蔽 */</span></span>
<span id="cb29-9"><a href="#cb29-9" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;ローカルx = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> x<span class="op">);</span>   <span class="co">/* 20が出力 */</span></span>
<span id="cb29-10"><a href="#cb29-10" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb29-11"><a href="#cb29-11" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span></span>
<span id="cb29-12"><a href="#cb29-12" aria-hidden="true" tabindex="-1"></a>            <span class="dt">int</span> x <span class="op">=</span> <span class="dv">30</span><span class="op">;</span> <span class="co">/* さらに内側で隠蔽 */</span></span>
<span id="cb29-13"><a href="#cb29-13" aria-hidden="true" tabindex="-1"></a>            printf<span class="op">(</span><span class="st">&quot;内側x = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> x<span class="op">);</span>   <span class="co">/* 30が出力 */</span></span>
<span id="cb29-14"><a href="#cb29-14" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb29-15"><a href="#cb29-15" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb29-16"><a href="#cb29-16" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;ローカルx = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> x<span class="op">);</span>   <span class="co">/* 20が出力（復活） */</span></span>
<span id="cb29-17"><a href="#cb29-17" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb29-18"><a href="#cb29-18" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb29-19"><a href="#cb29-19" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;グローバルx = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> x<span class="op">);</span>    <span class="co">/* 10が出力（復活） */</span></span>
<span id="cb29-20"><a href="#cb29-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb29-21"><a href="#cb29-21" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 data-number="4.3.6" id="変数の生存期間storage-duration"><span
class="header-section-number">4.3.6</span> 変数の生存期間（Storage
Duration） ⏰</h3>
<p>変数がメモリ上に存在する期間を生存期間といいます。</p>
<h4 data-number="4.3.6.1" id="自動変数automatic-variables"><span
class="header-section-number">4.3.6.1</span> 1. 自動変数（Automatic
Variables）</h4>
<p>関数やブロックに入るときに作成され、出るときに破棄される変数です。</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb30-1"><a href="#cb30-1" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> demo_function<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb30-2"><a href="#cb30-2" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb30-3"><a href="#cb30-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> auto_var <span class="op">=</span> <span class="dv">10</span><span class="op">;</span>      <span class="co">/* 自動変数（autoは省略可能） */</span></span>
<span id="cb30-4"><a href="#cb30-4" aria-hidden="true" tabindex="-1"></a>    <span class="kw">auto</span> <span class="dt">int</span> explicit_auto <span class="op">=</span> <span class="dv">20</span><span class="op">;</span> <span class="co">/* 明示的にauto指定 */</span></span>
<span id="cb30-5"><a href="#cb30-5" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb30-6"><a href="#cb30-6" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;auto_var = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> auto_var<span class="op">);</span></span>
<span id="cb30-7"><a href="#cb30-7" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 関数終了時にauto_varは破棄される */</span></span>
<span id="cb30-8"><a href="#cb30-8" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb30-9"><a href="#cb30-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb30-10"><a href="#cb30-10" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb30-11"><a href="#cb30-11" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb30-12"><a href="#cb30-12" aria-hidden="true" tabindex="-1"></a>    demo_function<span class="op">();</span></span>
<span id="cb30-13"><a href="#cb30-13" aria-hidden="true" tabindex="-1"></a>    demo_function<span class="op">();</span>    <span class="co">/* 毎回新しくauto_varが作成される */</span></span>
<span id="cb30-14"><a href="#cb30-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb30-15"><a href="#cb30-15" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h4 data-number="4.3.6.2" id="静的変数static-variables"><span
class="header-section-number">4.3.6.2</span> 2. 静的変数（Static
Variables）</h4>
<p>プログラム開始時に作成され、プログラム終了まで存在し続ける変数です。</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb31-1"><a href="#cb31-1" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> counter_function<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb31-2"><a href="#cb31-2" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb31-3"><a href="#cb31-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">static</span> <span class="dt">int</span> count <span class="op">=</span> <span class="dv">0</span><span class="op">;</span>   <span class="co">/* 静的ローカル変数、初期化は1回のみ */</span></span>
<span id="cb31-4"><a href="#cb31-4" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb31-5"><a href="#cb31-5" aria-hidden="true" tabindex="-1"></a>    count<span class="op">++;</span></span>
<span id="cb31-6"><a href="#cb31-6" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;関数呼出回数: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> count<span class="op">);</span></span>
<span id="cb31-7"><a href="#cb31-7" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb31-8"><a href="#cb31-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb31-9"><a href="#cb31-9" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb31-10"><a href="#cb31-10" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb31-11"><a href="#cb31-11" aria-hidden="true" tabindex="-1"></a>    counter_function<span class="op">();</span>     <span class="co">/* 1が出力 */</span></span>
<span id="cb31-12"><a href="#cb31-12" aria-hidden="true" tabindex="-1"></a>    counter_function<span class="op">();</span>     <span class="co">/* 2が出力 */</span></span>
<span id="cb31-13"><a href="#cb31-13" aria-hidden="true" tabindex="-1"></a>    counter_function<span class="op">();</span>     <span class="co">/* 3が出力 */</span></span>
<span id="cb31-14"><a href="#cb31-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb31-15"><a href="#cb31-15" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h4 data-number="4.3.6.3" id="静的グローバル変数"><span
class="header-section-number">4.3.6.3</span> 3. 静的グローバル変数</h4>
<p>ファイル内でのみアクセス可能なグローバル変数です。</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb32-1"><a href="#cb32-1" aria-hidden="true" tabindex="-1"></a><span class="dt">static</span> <span class="dt">int</span> file_private <span class="op">=</span> <span class="dv">100</span><span class="op">;</span>  <span class="co">/* このファイル内でのみアクセス可能 */</span></span>
<span id="cb32-2"><a href="#cb32-2" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> file_public <span class="op">=</span> <span class="dv">200</span><span class="op">;</span>          <span class="co">/* 他のファイルからもアクセス可能 */</span></span>
<span id="cb32-3"><a href="#cb32-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-4"><a href="#cb32-4" aria-hidden="true" tabindex="-1"></a><span class="dt">static</span> <span class="dt">void</span> private_function<span class="op">(</span><span class="dt">void</span><span class="op">)</span>  <span class="co">/* このファイル内でのみ呼出可能 */</span></span>
<span id="cb32-5"><a href="#cb32-5" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb32-6"><a href="#cb32-6" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;file_private = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> file_private<span class="op">);</span></span>
<span id="cb32-7"><a href="#cb32-7" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb32-8"><a href="#cb32-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb32-9"><a href="#cb32-9" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb32-10"><a href="#cb32-10" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb32-11"><a href="#cb32-11" aria-hidden="true" tabindex="-1"></a>    private_function<span class="op">();</span></span>
<span id="cb32-12"><a href="#cb32-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb32-13"><a href="#cb32-13" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h4 data-number="4.3.6.4" id="レジスタ変数register-variables"><span
class="header-section-number">4.3.6.4</span> 4. レジスタ変数（Register
Variables）</h4>
<p>可能であればレジスタに格納される変数です（C90では推奨のみ）。</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb33-1"><a href="#cb33-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb33-2"><a href="#cb33-2" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb33-3"><a href="#cb33-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">register</span> <span class="dt">int</span> fast_var <span class="op">=</span> <span class="dv">10</span><span class="op">;</span> <span class="co">/* レジスタ格納を要求 */</span></span>
<span id="cb33-4"><a href="#cb33-4" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb33-5"><a href="#cb33-5" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* レジスタ変数のアドレスは取得できない */</span></span>
<span id="cb33-6"><a href="#cb33-6" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* int *ptr = &amp;fast_var;  &lt;- エラー */</span></span>
<span id="cb33-7"><a href="#cb33-7" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb33-8"><a href="#cb33-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb33-9"><a href="#cb33-9" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 data-number="4.3.7" id="ストレージクラス指定子まとめ"><span
class="header-section-number">4.3.7</span> ストレージクラス指定子まとめ
📋</h3>
<table>
<thead>
<tr>
<th>指定子</th>
<th>スコープ</th>
<th>生存期間</th>
<th>初期化</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>auto</code></td>
<td>ブロック</td>
<td>自動</td>
<td>未定義値</td>
<td>デフォルト（省略可能）</td>
</tr>
<tr>
<td><code>static</code>（ローカル）</td>
<td>ブロック</td>
<td>静的</td>
<td>0</td>
<td>関数呼出間で値保持</td>
</tr>
<tr>
<td><code>static</code>（グローバル）</td>
<td>ファイル</td>
<td>静的</td>
<td>0</td>
<td>ファイル内限定</td>
</tr>
<tr>
<td><code>extern</code></td>
<td>グローバル</td>
<td>静的</td>
<td>他で定義</td>
<td>他ファイルの変数参照</td>
</tr>
<tr>
<td><code>register</code></td>
<td>ブロック</td>
<td>自動</td>
<td>未定義値</td>
<td>レジスタ格納要求</td>
</tr>
</tbody>
</table>
<h3 data-number="4.3.8" id="変数の初期化規則"><span
class="header-section-number">4.3.8</span> 変数の初期化規則 🔰</h3>
<h4 data-number="4.3.8.1" id="自動変数の初期化"><span
class="header-section-number">4.3.8.1</span> 自動変数の初期化</h4>
<div class="sourceCode" id="cb34"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb34-1"><a href="#cb34-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb34-2"><a href="#cb34-2" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb34-3"><a href="#cb34-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> uninitialized<span class="op">;</span>          <span class="co">/* 未定義値（危険） */</span></span>
<span id="cb34-4"><a href="#cb34-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> initialized <span class="op">=</span> <span class="dv">42</span><span class="op">;</span>       <span class="co">/* 明示的初期化（推奨） */</span></span>
<span id="cb34-5"><a href="#cb34-5" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb34-6"><a href="#cb34-6" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;uninitialized = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> uninitialized<span class="op">);</span> <span class="co">/* 予測不能 */</span></span>
<span id="cb34-7"><a href="#cb34-7" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;initialized = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> initialized<span class="op">);</span>     <span class="co">/* 42 */</span></span>
<span id="cb34-8"><a href="#cb34-8" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb34-9"><a href="#cb34-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb34-10"><a href="#cb34-10" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h4 data-number="4.3.8.2" id="静的変数の初期化"><span
class="header-section-number">4.3.8.2</span> 静的変数の初期化</h4>
<div class="sourceCode" id="cb35"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb35-1"><a href="#cb35-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> global_int<span class="op">;</span>          <span class="co">/* 自動的に0で初期化 */</span></span>
<span id="cb35-2"><a href="#cb35-2" aria-hidden="true" tabindex="-1"></a><span class="dt">static</span> <span class="dt">int</span> static_int<span class="op">;</span>   <span class="co">/* 自動的に0で初期化 */</span></span>
<span id="cb35-3"><a href="#cb35-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb35-4"><a href="#cb35-4" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb35-5"><a href="#cb35-5" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb35-6"><a href="#cb35-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">static</span> <span class="dt">int</span> local_static<span class="op">;</span>    <span class="co">/* 自動的に0で初期化 */</span></span>
<span id="cb35-7"><a href="#cb35-7" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb35-8"><a href="#cb35-8" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;global_int = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> global_int<span class="op">);</span>       <span class="co">/* 0 */</span></span>
<span id="cb35-9"><a href="#cb35-9" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;static_int = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> static_int<span class="op">);</span>       <span class="co">/* 0 */</span></span>
<span id="cb35-10"><a href="#cb35-10" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;local_static = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> local_static<span class="op">);</span>   <span class="co">/* 0 */</span></span>
<span id="cb35-11"><a href="#cb35-11" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb35-12"><a href="#cb35-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb35-13"><a href="#cb35-13" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 data-number="4.3.9" id="実践的なスコープ活用例"><span
class="header-section-number">4.3.9</span> 実践的なスコープ活用例
💡</h3>
<h4 data-number="4.3.9.1" id="カウンター関数の実装"><span
class="header-section-number">4.3.9.1</span> カウンター関数の実装</h4>
<div class="sourceCode" id="cb36"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb36-1"><a href="#cb36-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> get_next_id<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb36-2"><a href="#cb36-2" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb36-3"><a href="#cb36-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">static</span> <span class="dt">int</span> id_counter <span class="op">=</span> <span class="dv">1000</span><span class="op">;</span>   <span class="co">/* 初期値1000 */</span></span>
<span id="cb36-4"><a href="#cb36-4" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb36-5"><a href="#cb36-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> id_counter<span class="op">++;</span>    <span class="co">/* 現在値を返してからインクリメント */</span></span>
<span id="cb36-6"><a href="#cb36-6" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb36-7"><a href="#cb36-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb36-8"><a href="#cb36-8" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb36-9"><a href="#cb36-9" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb36-10"><a href="#cb36-10" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ID1: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> get_next_id<span class="op">());</span>    <span class="co">/* 1000 */</span></span>
<span id="cb36-11"><a href="#cb36-11" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ID2: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> get_next_id<span class="op">());</span>    <span class="co">/* 1001 */</span></span>
<span id="cb36-12"><a href="#cb36-12" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ID3: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> get_next_id<span class="op">());</span>    <span class="co">/* 1002 */</span></span>
<span id="cb36-13"><a href="#cb36-13" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb36-14"><a href="#cb36-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb36-15"><a href="#cb36-15" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h4 data-number="4.3.9.2" id="モジュール内状態管理"><span
class="header-section-number">4.3.9.2</span> モジュール内状態管理</h4>
<div class="sourceCode" id="cb37"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb37-1"><a href="#cb37-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* 設定管理モジュールの例 */</span></span>
<span id="cb37-2"><a href="#cb37-2" aria-hidden="true" tabindex="-1"></a><span class="dt">static</span> <span class="dt">int</span> debug_mode <span class="op">=</span> <span class="dv">0</span><span class="op">;</span>      <span class="co">/* モジュール内部状態 */</span></span>
<span id="cb37-3"><a href="#cb37-3" aria-hidden="true" tabindex="-1"></a><span class="dt">static</span> <span class="dt">int</span> max_connections <span class="op">=</span> <span class="dv">10</span><span class="op">;</span></span>
<span id="cb37-4"><a href="#cb37-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-5"><a href="#cb37-5" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> set_debug_mode<span class="op">(</span><span class="dt">int</span> mode<span class="op">)</span></span>
<span id="cb37-6"><a href="#cb37-6" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb37-7"><a href="#cb37-7" aria-hidden="true" tabindex="-1"></a>    debug_mode <span class="op">=</span> mode<span class="op">;</span></span>
<span id="cb37-8"><a href="#cb37-8" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb37-9"><a href="#cb37-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-10"><a href="#cb37-10" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> is_debug_enabled<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb37-11"><a href="#cb37-11" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb37-12"><a href="#cb37-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> debug_mode<span class="op">;</span></span>
<span id="cb37-13"><a href="#cb37-13" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb37-14"><a href="#cb37-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-15"><a href="#cb37-15" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> set_max_connections<span class="op">(</span><span class="dt">int</span> max<span class="op">)</span></span>
<span id="cb37-16"><a href="#cb37-16" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb37-17"><a href="#cb37-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>max <span class="op">&gt;</span> <span class="dv">0</span> <span class="op">&amp;&amp;</span> max <span class="op">&lt;=</span> <span class="dv">100</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb37-18"><a href="#cb37-18" aria-hidden="true" tabindex="-1"></a>        max_connections <span class="op">=</span> max<span class="op">;</span></span>
<span id="cb37-19"><a href="#cb37-19" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb37-20"><a href="#cb37-20" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb37-21"><a href="#cb37-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb37-22"><a href="#cb37-22" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> get_max_connections<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb37-23"><a href="#cb37-23" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb37-24"><a href="#cb37-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> max_connections<span class="op">;</span></span>
<span id="cb37-25"><a href="#cb37-25" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 data-number="4.3.10" id="定数の定義"><span
class="header-section-number">4.3.10</span> 定数の定義 🔒</h3>
<h4 data-number="4.3.10.1" id="constキーワード"><span
class="header-section-number">4.3.10.1</span>
<code>const</code>キーワード</h4>
<div class="sourceCode" id="cb38"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb38-1"><a href="#cb38-1" aria-hidden="true" tabindex="-1"></a><span class="dt">const</span> <span class="dt">int</span> MAX_SIZE <span class="op">=</span> <span class="dv">100</span><span class="op">;</span>       <span class="co">/* 定数の定義 */</span></span>
<span id="cb38-2"><a href="#cb38-2" aria-hidden="true" tabindex="-1"></a><span class="dt">const</span> <span class="dt">double</span> PI <span class="op">=</span> <span class="fl">3.14159</span><span class="op">;</span>      <span class="co">/* 浮動小数点定数 */</span></span></code></pre></div>
<h4 data-number="4.3.10.2" id="defineプリプロセッサ"><span
class="header-section-number">4.3.10.2</span>
<code>#define</code>プリプロセッサ</h4>
<div class="sourceCode" id="cb39"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb39-1"><a href="#cb39-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#define MAX_STUDENTS </span><span class="dv">50</span><span class="pp">         </span><span class="co">/* マクロ定数 */</span></span>
<span id="cb39-2"><a href="#cb39-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#define TITLE </span><span class="st">&quot;C Language Tutorial&quot;</span></span></code></pre></div>
<h3 data-number="4.3.11" id="データ型のサイズ確認"><span
class="header-section-number">4.3.11</span> データ型のサイズ確認 📏</h3>
<p><code>sizeof</code>演算子を使ってデータ型のサイズを確認できます：</p>
<div class="sourceCode" id="cb40"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb40-1"><a href="#cb40-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb40-2"><a href="#cb40-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb40-3"><a href="#cb40-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb40-4"><a href="#cb40-4" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb40-5"><a href="#cb40-5" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;char: </span><span class="sc">%lu</span><span class="st"> バイト</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="kw">sizeof</span><span class="op">(</span><span class="dt">char</span><span class="op">));</span></span>
<span id="cb40-6"><a href="#cb40-6" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;int: </span><span class="sc">%lu</span><span class="st"> バイト</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="kw">sizeof</span><span class="op">(</span><span class="dt">int</span><span class="op">));</span></span>
<span id="cb40-7"><a href="#cb40-7" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;double: </span><span class="sc">%lu</span><span class="st"> バイト</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="kw">sizeof</span><span class="op">(</span><span class="dt">double</span><span class="op">));</span></span>
<span id="cb40-8"><a href="#cb40-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb40-9"><a href="#cb40-9" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h2 data-number="4.4" id="サンプルコード-2"><span
class="header-section-number">4.4</span> サンプルコード</h2>
<h3 data-number="4.4.1" id="基本データ型の使用例"><span
class="header-section-number">4.4.1</span> 基本データ型の使用例</h3>
<p>プログラムファイル: <code>examples/data_types_demo.c</code></p>
<p>各データ型の宣言、初期化、出力を学習します。</p>
<h3 data-number="4.4.2" id="変数スコープの確認"><span
class="header-section-number">4.4.2</span> 変数スコープの確認</h3>
<p>プログラムファイル: <code>examples/scope_demo.c</code></p>
<p>グローバル変数とローカル変数の違いを確認します。</p>
<h3 data-number="4.4.3" id="型変換の実例"><span
class="header-section-number">4.4.3</span> 型変換の実例</h3>
<p>プログラムファイル: <code>examples/type_conversion.c</code></p>
<p>暗黙的・明示的型変換の動作を学習します。</p>
<h3 data-number="4.4.4" id="コンパイルと実行-2"><span
class="header-section-number">4.4.4</span> コンパイルと実行</h3>
<div class="sourceCode" id="cb41"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb41-1"><a href="#cb41-1" aria-hidden="true" tabindex="-1"></a><span class="co"># examples ディレクトリに移動</span></span>
<span id="cb41-2"><a href="#cb41-2" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> examples</span>
<span id="cb41-3"><a href="#cb41-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-4"><a href="#cb41-4" aria-hidden="true" tabindex="-1"></a><span class="co"># C90準拠でコンパイル</span></span>
<span id="cb41-5"><a href="#cb41-5" aria-hidden="true" tabindex="-1"></a><span class="fu">gcc</span> <span class="at">-std</span><span class="op">=</span>c90 <span class="at">-Wall</span> <span class="at">-Wextra</span> <span class="at">-pedantic</span> data_types_demo.c <span class="at">-o</span> data_types_demo</span>
<span id="cb41-6"><a href="#cb41-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb41-7"><a href="#cb41-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 実行</span></span>
<span id="cb41-8"><a href="#cb41-8" aria-hidden="true" tabindex="-1"></a><span class="ex">./data_types_demo</span></span></code></pre></div>
<h2 data-number="4.5" id="演習課題-2"><span
class="header-section-number">4.5</span> 演習課題</h2>
<h3 data-number="4.5.1" id="基礎問題-2"><span
class="header-section-number">4.5.1</span> 基礎問題</h3>
<ol type="1">
<li><strong>変数宣言と初期化</strong>
<ul>
<li>さまざまなデータ型の変数を宣言し、初期化してください</li>
<li>各変数の値をprintf関数で出力してください</li>
</ul></li>
<li><strong>四則演算計算機</strong>
<ul>
<li>2つの数値を変数に格納し、四則演算の結果を表示するプログラムを作成してください</li>
</ul></li>
<li><strong>データ型サイズの確認</strong>
<ul>
<li>sizeof演算子を使って、各データ型のサイズを表示するプログラムを作成してください</li>
</ul></li>
</ol>
<h3 data-number="4.5.2" id="応用問題-2"><span
class="header-section-number">4.5.2</span> 応用問題</h3>
<ol type="1">
<li><strong>型変換の理解</strong>
<ul>
<li>整数除算と実数除算の違いを確認するプログラムを作成してください</li>
</ul></li>
<li><strong>スコープの実験</strong>
<ul>
<li>グローバル変数とローカル変数を使い分けるプログラムを作成してください</li>
</ul></li>
<li><strong>定数の活用</strong>
<ul>
<li>constと#defineを使って定数を定義し、計算に使用してください</li>
</ul></li>
</ol>
<h2 data-number="4.6" id="コンパイル方法-2"><span
class="header-section-number">4.6</span> コンパイル方法</h2>
<p>この章では以下のMakefileを使用してコンパイルができます：</p>
<div class="sourceCode" id="cb42"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb42-1"><a href="#cb42-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 全ての例題をコンパイル</span></span>
<span id="cb42-2"><a href="#cb42-2" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> all</span>
<span id="cb42-3"><a href="#cb42-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-4"><a href="#cb42-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 特定のプログラムをコンパイル</span></span>
<span id="cb42-5"><a href="#cb42-5" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> data_types_demo</span>
<span id="cb42-6"><a href="#cb42-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-7"><a href="#cb42-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 実行</span></span>
<span id="cb42-8"><a href="#cb42-8" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> run</span>
<span id="cb42-9"><a href="#cb42-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb42-10"><a href="#cb42-10" aria-hidden="true" tabindex="-1"></a><span class="co"># クリーンアップ</span></span>
<span id="cb42-11"><a href="#cb42-11" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> clean</span></code></pre></div>
<h2 data-number="4.7" id="規格による違い-2"><span
class="header-section-number">4.7</span> 規格による違い</h2>
<h3 data-number="4.7.1" id="c90での制限事項-1"><span
class="header-section-number">4.7.1</span> C90での制限事項</h3>
<ul>
<li>変数宣言は関数やブロックの先頭で行う必要がある</li>
<li><code>long long</code>型は使用できない</li>
<li><code>_Bool</code>型は使用できない</li>
</ul>
<h3 data-number="4.7.2" id="c99以降の拡張-1"><span
class="header-section-number">4.7.2</span> C99以降の拡張</h3>
<ul>
<li><code>long long</code>型の追加（64ビット整数）</li>
<li><code>_Bool</code>型の追加（論理型）</li>
<li>複素数型（<code>_Complex</code>）の追加</li>
<li>変数宣言位置の制限緩和</li>
</ul>
<h3 data-number="4.7.3" id="型サイズの注意点"><span
class="header-section-number">4.7.3</span> 型サイズの注意点</h3>
<p>データ型のサイズはシステムに依存するため、portable（移植可能）なプログラムを書く際は注意が必要です：</p>
<div class="sourceCode" id="cb43"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb43-1"><a href="#cb43-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* 推奨: 具体的なサイズが必要な場合 */</span></span>
<span id="cb43-2"><a href="#cb43-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdint.h&gt;</span></span>
<span id="cb43-3"><a href="#cb43-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int32_t</span> exact_32bit<span class="op">;</span>    <span class="co">/* C99以降 */</span></span></code></pre></div>
<h2 data-number="4.8" id="よくある間違い"><span
class="header-section-number">4.8</span> 🚨 よくある間違い</h2>
<h3 data-number="4.8.1" id="初期化忘れ"><span
class="header-section-number">4.8.1</span> 1. 初期化忘れ</h3>
<div class="sourceCode" id="cb44"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb44-1"><a href="#cb44-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* NG: 初期化せずに使用 */</span></span>
<span id="cb44-2"><a href="#cb44-2" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> count<span class="op">;</span></span>
<span id="cb44-3"><a href="#cb44-3" aria-hidden="true" tabindex="-1"></a>printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> count<span class="op">);</span>  <span class="co">/* 未定義値が出力される */</span></span>
<span id="cb44-4"><a href="#cb44-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb44-5"><a href="#cb44-5" aria-hidden="true" tabindex="-1"></a><span class="co">/* OK: 初期化してから使用 */</span></span>
<span id="cb44-6"><a href="#cb44-6" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> count <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb44-7"><a href="#cb44-7" aria-hidden="true" tabindex="-1"></a>printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> count<span class="op">);</span></span></code></pre></div>
<h3 data-number="4.8.2" id="整数除算の結果"><span
class="header-section-number">4.8.2</span> 2. 整数除算の結果</h3>
<div class="sourceCode" id="cb45"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb45-1"><a href="#cb45-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* NG: 期待した結果にならない */</span></span>
<span id="cb45-2"><a href="#cb45-2" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> result <span class="op">=</span> <span class="dv">5</span> <span class="op">/</span> <span class="dv">2</span><span class="op">;</span>     <span class="co">/* 結果: 2 */</span></span>
<span id="cb45-3"><a href="#cb45-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb45-4"><a href="#cb45-4" aria-hidden="true" tabindex="-1"></a><span class="co">/* OK: 実数除算を使用 */</span></span>
<span id="cb45-5"><a href="#cb45-5" aria-hidden="true" tabindex="-1"></a><span class="dt">double</span> result <span class="op">=</span> <span class="fl">5.0</span> <span class="op">/</span> <span class="fl">2.0</span><span class="op">;</span>  <span class="co">/* 結果: 2.5 */</span></span></code></pre></div>
<h3 data-number="4.8.3" id="型の範囲超過"><span
class="header-section-number">4.8.3</span> 3. 型の範囲超過</h3>
<div class="sourceCode" id="cb46"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb46-1"><a href="#cb46-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* NG: charの範囲を超える */</span></span>
<span id="cb46-2"><a href="#cb46-2" aria-hidden="true" tabindex="-1"></a><span class="dt">char</span> big_num <span class="op">=</span> <span class="dv">300</span><span class="op">;</span>     <span class="co">/* オーバーフロー */</span></span>
<span id="cb46-3"><a href="#cb46-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb46-4"><a href="#cb46-4" aria-hidden="true" tabindex="-1"></a><span class="co">/* OK: 適切な型を使用 */</span></span>
<span id="cb46-5"><a href="#cb46-5" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> big_num <span class="op">=</span> <span class="dv">300</span><span class="op">;</span></span></code></pre></div>
<h2 data-number="4.9" id="次の章へ-2"><span
class="header-section-number">4.9</span> 次の章へ</h2>
<h2 data-number="4.10" id="参考資料-2"><span
class="header-section-number">4.10</span> 参考資料</h2>
<ul>
<li><a
href="https://ja.cppreference.com/w/c/language/type">C言語データ型リファレンス</a></li>
<li><a
href="https://ja.cppreference.com/w/c/language/sizeof">sizeof演算子</a></li>
<li><a
href="https://ja.cppreference.com/w/c/language/conversion">型変換</a></li>
</ul>
<h1 data-number="5" id="演算子と式"><span
class="header-section-number">5</span> 演算子と式</h1>
<h2 data-number="5.1" id="対応c規格-4"><span
class="header-section-number">5.1</span> 対応C規格</h2>
<ul>
<li><strong>主要対象:</strong> C90</li>
<li><strong>学習内容:</strong>
算術演算子、関係演算子、論理演算子、ビット演算子、演算子の優先順位</li>
</ul>
<h2 data-number="5.2" id="学習目標-4"><span
class="header-section-number">5.2</span> 学習目標</h2>
<p>この章を完了すると、以下のことができるようになります：</p>
<ul>
<li>さまざまな演算子の種類と使い方を理解する</li>
<li>演算子の優先順位と結合規則を把握する</li>
<li>複雑な式を正しく記述できる</li>
<li>インクリメント・デクリメント演算子を適切に使える</li>
<li>ビット演算の基本を理解する</li>
</ul>
<h2 data-number="5.3" id="理論解説-3"><span
class="header-section-number">5.3</span> 理論解説</h2>
<h3 data-number="5.3.1" id="算術演算子"><span
class="header-section-number">5.3.1</span> 算術演算子 🔢</h3>
<p>基本的な数値計算を行う演算子です。</p>
<table>
<thead>
<tr>
<th>演算子</th>
<th>意味</th>
<th>例</th>
<th>結果</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>+</code></td>
<td>加算</td>
<td><code>5 + 3</code></td>
<td><code>8</code></td>
</tr>
<tr>
<td><code>-</code></td>
<td>減算</td>
<td><code>5 - 3</code></td>
<td><code>2</code></td>
</tr>
<tr>
<td><code>*</code></td>
<td>乗算</td>
<td><code>5 * 3</code></td>
<td><code>15</code></td>
</tr>
<tr>
<td><code>/</code></td>
<td>除算</td>
<td><code>5 / 3</code></td>
<td><code>1</code> (整数除算)</td>
</tr>
<tr>
<td><code>%</code></td>
<td>剰余</td>
<td><code>5 % 3</code></td>
<td><code>2</code></td>
</tr>
</tbody>
</table>
<h4 data-number="5.3.1.1" id="除算の注意点"><span
class="header-section-number">5.3.1.1</span> 除算の注意点</h4>
<div class="sourceCode" id="cb47"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb47-1"><a href="#cb47-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> a <span class="op">=</span> <span class="dv">5</span><span class="op">,</span> b <span class="op">=</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb47-2"><a href="#cb47-2" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> result1 <span class="op">=</span> a <span class="op">/</span> b<span class="op">;</span>        <span class="co">/* 結果: 2 (整数除算) */</span></span>
<span id="cb47-3"><a href="#cb47-3" aria-hidden="true" tabindex="-1"></a><span class="dt">double</span> result2 <span class="op">=</span> a <span class="op">/</span> b<span class="op">;</span>     <span class="co">/* 結果: 2.0 (整数除算後に型変換) */</span></span>
<span id="cb47-4"><a href="#cb47-4" aria-hidden="true" tabindex="-1"></a><span class="dt">double</span> result3 <span class="op">=</span> <span class="op">(</span><span class="dt">double</span><span class="op">)</span>a <span class="op">/</span> b<span class="op">;</span> <span class="co">/* 結果: 2.5 (実数除算) */</span></span></code></pre></div>
<h3 data-number="5.3.2" id="代入演算子-1"><span
class="header-section-number">5.3.2</span> 代入演算子 📝</h3>
<p>値を変数に代入する演算子です。</p>
<table>
<thead>
<tr>
<th>演算子</th>
<th>意味</th>
<th>例</th>
<th>等価な記述</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>=</code></td>
<td>代入</td>
<td><code>a = 5</code></td>
<td>-</td>
</tr>
<tr>
<td><code>+=</code></td>
<td>加算代入</td>
<td><code>a += 3</code></td>
<td><code>a = a + 3</code></td>
</tr>
<tr>
<td><code>-=</code></td>
<td>減算代入</td>
<td><code>a -= 3</code></td>
<td><code>a = a - 3</code></td>
</tr>
<tr>
<td><code>*=</code></td>
<td>乗算代入</td>
<td><code>a *= 3</code></td>
<td><code>a = a * 3</code></td>
</tr>
<tr>
<td><code>/=</code></td>
<td>除算代入</td>
<td><code>a /= 3</code></td>
<td><code>a = a / 3</code></td>
</tr>
<tr>
<td><code>%=</code></td>
<td>剰余代入</td>
<td><code>a %= 3</code></td>
<td><code>a = a % 3</code></td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb48"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb48-1"><a href="#cb48-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> count <span class="op">=</span> <span class="dv">10</span><span class="op">;</span></span>
<span id="cb48-2"><a href="#cb48-2" aria-hidden="true" tabindex="-1"></a>count <span class="op">+=</span> <span class="dv">5</span><span class="op">;</span>     <span class="co">/* count は 15 になる */</span></span>
<span id="cb48-3"><a href="#cb48-3" aria-hidden="true" tabindex="-1"></a>count <span class="op">*=</span> <span class="dv">2</span><span class="op">;</span>     <span class="co">/* count は 30 になる */</span></span></code></pre></div>
<h3 data-number="5.3.3" id="インクリメントデクリメント演算子"><span
class="header-section-number">5.3.3</span>
インクリメント・デクリメント演算子 ⬆️⬇️</h3>
<p>変数の値を1増減させる演算子です。</p>
<table>
<thead>
<tr>
<th>演算子</th>
<th>意味</th>
<th>前置</th>
<th>後置</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>++</code></td>
<td>インクリメント</td>
<td><code>++a</code></td>
<td><code>a++</code></td>
</tr>
<tr>
<td><code>--</code></td>
<td>デクリメント</td>
<td><code>--a</code></td>
<td><code>a--</code></td>
</tr>
</tbody>
</table>
<h4 data-number="5.3.3.1" id="前置と後置の違い"><span
class="header-section-number">5.3.3.1</span> 前置と後置の違い</h4>
<div class="sourceCode" id="cb49"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb49-1"><a href="#cb49-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> a <span class="op">=</span> <span class="dv">5</span><span class="op">,</span> b <span class="op">=</span> <span class="dv">5</span><span class="op">;</span></span>
<span id="cb49-2"><a href="#cb49-2" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> x<span class="op">,</span> y<span class="op">;</span></span>
<span id="cb49-3"><a href="#cb49-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb49-4"><a href="#cb49-4" aria-hidden="true" tabindex="-1"></a>x <span class="op">=</span> <span class="op">++</span>a<span class="op">;</span>    <span class="co">/* a を先にインクリメント, x = 6, a = 6 */</span></span>
<span id="cb49-5"><a href="#cb49-5" aria-hidden="true" tabindex="-1"></a>y <span class="op">=</span> b<span class="op">++;</span>    <span class="co">/* b の値を先に使用, y = 5, b = 6 */</span></span></code></pre></div>
<h3 data-number="5.3.4" id="関係演算子"><span
class="header-section-number">5.3.4</span> 関係演算子 🔍</h3>
<p>2つの値を比較する演算子です。結果は真（非0）または偽（0）になります。</p>
<table>
<thead>
<tr>
<th>演算子</th>
<th>意味</th>
<th>例</th>
<th>結果</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>==</code></td>
<td>等しい</td>
<td><code>5 == 3</code></td>
<td><code>0</code> (偽)</td>
</tr>
<tr>
<td><code>!=</code></td>
<td>等しくない</td>
<td><code>5 != 3</code></td>
<td><code>1</code> (真)</td>
</tr>
<tr>
<td><code>&lt;</code></td>
<td>より小さい</td>
<td><code>5 &lt; 3</code></td>
<td><code>0</code> (偽)</td>
</tr>
<tr>
<td><code>&lt;=</code></td>
<td>以下</td>
<td><code>5 &lt;= 3</code></td>
<td><code>0</code> (偽)</td>
</tr>
<tr>
<td><code>&gt;</code></td>
<td>より大きい</td>
<td><code>5 &gt; 3</code></td>
<td><code>1</code> (真)</td>
</tr>
<tr>
<td><code>&gt;=</code></td>
<td>以上</td>
<td><code>5 &gt;= 3</code></td>
<td><code>1</code> (真)</td>
</tr>
</tbody>
</table>
<h3 data-number="5.3.5" id="論理演算子"><span
class="header-section-number">5.3.5</span> 論理演算子 🧠</h3>
<p>論理値（真偽）を操作する演算子です。</p>
<table>
<thead>
<tr>
<th>演算子</th>
<th>意味</th>
<th>例</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>&amp;&amp;</code></td>
<td>論理積（AND）</td>
<td><code>a &amp;&amp; b</code></td>
<td>a も b も真の場合のみ真</td>
</tr>
<tr>
<td><code>\|\|</code></td>
<td>論理和（OR）</td>
<td><code>a \|\| b</code></td>
<td>a または b が真なら真</td>
</tr>
<tr>
<td><code>!</code></td>
<td>論理否定（NOT）</td>
<td><code>!a</code></td>
<td>a が偽なら真、真なら偽</td>
</tr>
</tbody>
</table>
<h4 data-number="5.3.5.1" id="短絡評価"><span
class="header-section-number">5.3.5.1</span> 短絡評価</h4>
<div class="sourceCode" id="cb50"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb50-1"><a href="#cb50-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> a <span class="op">=</span> <span class="dv">0</span><span class="op">,</span> b <span class="op">=</span> <span class="dv">5</span><span class="op">;</span></span>
<span id="cb50-2"><a href="#cb50-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb50-3"><a href="#cb50-3" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="op">(</span>a <span class="op">!=</span> <span class="dv">0</span> <span class="op">&amp;&amp;</span> b <span class="op">/</span> a <span class="op">&gt;</span> <span class="dv">2</span><span class="op">)</span> <span class="op">{</span>  <span class="co">/* a が 0 なので、b / a は評価されない */</span></span>
<span id="cb50-4"><a href="#cb50-4" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 実行されない */</span></span>
<span id="cb50-5"><a href="#cb50-5" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 data-number="5.3.6" id="ビット演算子"><span
class="header-section-number">5.3.6</span> ビット演算子 🔧</h3>
<p>ビットレベルで値を操作する演算子です。</p>
<table>
<thead>
<tr>
<th>演算子</th>
<th>意味</th>
<th>例</th>
<th>説明</th>
</tr>
</thead>
<tbody>
<tr>
<td><code>&amp;</code></td>
<td>ビットAND</td>
<td><code>a &amp; b</code></td>
<td>対応するビットが両方1の場合1</td>
</tr>
<tr>
<td><code>\|</code></td>
<td>ビットOR</td>
<td><code>a \| b</code></td>
<td>対応するビットのいずれかが1の場合1</td>
</tr>
<tr>
<td><code>^</code></td>
<td>ビットXOR</td>
<td><code>a ^ b</code></td>
<td>対応するビットが異なる場合1</td>
</tr>
<tr>
<td><code>~</code></td>
<td>ビット反転</td>
<td><code>~a</code></td>
<td>各ビットを反転</td>
</tr>
<tr>
<td><code>&lt;&lt;</code></td>
<td>左シフト</td>
<td><code>a &lt;&lt; 2</code></td>
<td>ビットを左に2つシフト</td>
</tr>
<tr>
<td><code>&gt;&gt;</code></td>
<td>右シフト</td>
<td><code>a &gt;&gt; 2</code></td>
<td>ビットを右に2つシフト</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb51"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb51-1"><a href="#cb51-1" aria-hidden="true" tabindex="-1"></a><span class="dt">unsigned</span> <span class="dt">char</span> a <span class="op">=</span> <span class="dv">5</span><span class="op">;</span>    <span class="co">/* 00000101 */</span></span>
<span id="cb51-2"><a href="#cb51-2" aria-hidden="true" tabindex="-1"></a><span class="dt">unsigned</span> <span class="dt">char</span> b <span class="op">=</span> <span class="dv">3</span><span class="op">;</span>    <span class="co">/* 00000011 */</span></span>
<span id="cb51-3"><a href="#cb51-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb51-4"><a href="#cb51-4" aria-hidden="true" tabindex="-1"></a>printf<span class="op">(</span><span class="st">&quot;a &amp; b = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> a <span class="op">&amp;</span> b<span class="op">);</span>  <span class="co">/* 1 (00000001) */</span></span>
<span id="cb51-5"><a href="#cb51-5" aria-hidden="true" tabindex="-1"></a>printf<span class="op">(</span><span class="st">&quot;a | b = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> a <span class="op">|</span> b<span class="op">);</span>  <span class="co">/* 7 (00000111) */</span></span>
<span id="cb51-6"><a href="#cb51-6" aria-hidden="true" tabindex="-1"></a>printf<span class="op">(</span><span class="st">&quot;a ^ b = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> a <span class="op">^</span> b<span class="op">);</span>  <span class="co">/* 6 (00000110) */</span></span>
<span id="cb51-7"><a href="#cb51-7" aria-hidden="true" tabindex="-1"></a>printf<span class="op">(</span><span class="st">&quot;~a = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">~</span>a<span class="op">);</span>        <span class="co">/* 250 (11111010) */</span></span></code></pre></div>
<h3 data-number="5.3.7" id="条件演算子三項演算子"><span
class="header-section-number">5.3.7</span> 条件演算子（三項演算子）
❓</h3>
<p>条件に基づいて値を選択する演算子です。</p>
<div class="sourceCode" id="cb52"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb52-1"><a href="#cb52-1" aria-hidden="true" tabindex="-1"></a>条件 <span class="op">?</span> 真の場合の値 <span class="op">:</span> 偽の場合の値</span></code></pre></div>
<div class="sourceCode" id="cb53"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb53-1"><a href="#cb53-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> a <span class="op">=</span> <span class="dv">10</span><span class="op">,</span> b <span class="op">=</span> <span class="dv">20</span><span class="op">;</span></span>
<span id="cb53-2"><a href="#cb53-2" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> max <span class="op">=</span> <span class="op">(</span>a <span class="op">&gt;</span> b<span class="op">)</span> <span class="op">?</span> a <span class="op">:</span> b<span class="op">;</span>  <span class="co">/* b が大きいので max = 20 */</span></span>
<span id="cb53-3"><a href="#cb53-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb53-4"><a href="#cb53-4" aria-hidden="true" tabindex="-1"></a>printf<span class="op">(</span><span class="st">&quot;大きい方: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> max<span class="op">);</span></span></code></pre></div>
<h3 data-number="5.3.8" id="sizeof演算子"><span
class="header-section-number">5.3.8</span> sizeof演算子 📏</h3>
<p>データ型や変数のサイズを取得する演算子です。</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb54-1"><a href="#cb54-1" aria-hidden="true" tabindex="-1"></a>printf<span class="op">(</span><span class="st">&quot;int のサイズ: </span><span class="sc">%lu</span><span class="st"> バイト</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="kw">sizeof</span><span class="op">(</span><span class="dt">int</span><span class="op">));</span></span>
<span id="cb54-2"><a href="#cb54-2" aria-hidden="true" tabindex="-1"></a>printf<span class="op">(</span><span class="st">&quot;double のサイズ: </span><span class="sc">%lu</span><span class="st"> バイト</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="kw">sizeof</span><span class="op">(</span><span class="dt">double</span><span class="op">));</span></span>
<span id="cb54-3"><a href="#cb54-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb54-4"><a href="#cb54-4" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> arr<span class="op">[</span><span class="dv">10</span><span class="op">];</span></span>
<span id="cb54-5"><a href="#cb54-5" aria-hidden="true" tabindex="-1"></a>printf<span class="op">(</span><span class="st">&quot;配列のサイズ: </span><span class="sc">%lu</span><span class="st"> バイト</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">));</span></span></code></pre></div>
<h3 data-number="5.3.9" id="演算子の優先順位"><span
class="header-section-number">5.3.9</span> 演算子の優先順位 📊</h3>
<p>演算子には優先順位があり、計算の順序に影響します。</p>
<table>
<colgroup>
<col style="width: 35%" />
<col style="width: 28%" />
<col style="width: 35%" />
</colgroup>
<thead>
<tr>
<th>優先順位</th>
<th>演算子</th>
<th>結合規則</th>
</tr>
</thead>
<tbody>
<tr>
<td>1</td>
<td><code>()</code> <code>[]</code> <code>-&gt;</code>
<code>.</code></td>
<td>左から右</td>
</tr>
<tr>
<td>2</td>
<td><code>!</code> <code>~</code> <code>++</code> <code>--</code>
<code>+</code> <code>-</code> <code>*</code> <code>&amp;</code>
<code>sizeof</code> <code>(型)</code></td>
<td>右から左</td>
</tr>
<tr>
<td>3</td>
<td><code>*</code> <code>/</code> <code>%</code></td>
<td>左から右</td>
</tr>
<tr>
<td>4</td>
<td><code>+</code> <code>-</code></td>
<td>左から右</td>
</tr>
<tr>
<td>5</td>
<td><code>&lt;&lt;</code> <code>&gt;&gt;</code></td>
<td>左から右</td>
</tr>
<tr>
<td>6</td>
<td><code>&lt;</code> <code>&lt;=</code> <code>&gt;</code>
<code>&gt;=</code></td>
<td>左から右</td>
</tr>
<tr>
<td>7</td>
<td><code>==</code> <code>!=</code></td>
<td>左から右</td>
</tr>
<tr>
<td>8</td>
<td><code>&amp;</code></td>
<td>左から右</td>
</tr>
<tr>
<td>9</td>
<td><code>^</code></td>
<td>左から右</td>
</tr>
<tr>
<td>10</td>
<td><code>\|</code></td>
<td>左から右</td>
</tr>
<tr>
<td>11</td>
<td><code>&amp;&amp;</code></td>
<td>左から右</td>
</tr>
<tr>
<td>12</td>
<td><code>\|\|</code></td>
<td>左から右</td>
</tr>
<tr>
<td>13</td>
<td><code>?:</code></td>
<td>右から左</td>
</tr>
<tr>
<td>14</td>
<td><code>=</code> <code>+=</code> <code>-=</code> <code>*=</code>
<code>/=</code> <code>%=</code> <code>&amp;=</code> <code>^=</code>
<code>\|=</code> <code>&lt;&lt;=</code> <code>&gt;&gt;=</code></td>
<td>右から左</td>
</tr>
<tr>
<td>15</td>
<td><code>,</code></td>
<td>左から右</td>
</tr>
</tbody>
</table>
<h4 data-number="5.3.9.1" id="優先順位の例"><span
class="header-section-number">5.3.9.1</span> 優先順位の例</h4>
<div class="sourceCode" id="cb55"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb55-1"><a href="#cb55-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> result <span class="op">=</span> <span class="dv">2</span> <span class="op">+</span> <span class="dv">3</span> <span class="op">*</span> <span class="dv">4</span><span class="op">;</span>     <span class="co">/* 結果: 14 (乗算が先) */</span></span>
<span id="cb55-2"><a href="#cb55-2" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> result2 <span class="op">=</span> <span class="op">(</span><span class="dv">2</span> <span class="op">+</span> <span class="dv">3</span><span class="op">)</span> <span class="op">*</span> <span class="dv">4</span><span class="op">;</span>  <span class="co">/* 結果: 20 (括弧が先) */</span></span></code></pre></div>
<h2 data-number="5.4" id="サンプルコード-3"><span
class="header-section-number">5.4</span> サンプルコード</h2>
<h3 data-number="5.4.1" id="演算子の基本使用例"><span
class="header-section-number">5.4.1</span> 演算子の基本使用例</h3>
<p>プログラムファイル: <code>examples/operators_demo.c</code></p>
<p>さまざまな演算子の使用方法を学習します。</p>
<h3 data-number="5.4.2" id="ビット演算の実例"><span
class="header-section-number">5.4.2</span> ビット演算の実例</h3>
<p>プログラムファイル: <code>examples/bitwise_demo.c</code></p>
<p>ビット演算の動作を可視化して確認します。</p>
<h3 data-number="5.4.3" id="演算子優先順位の確認"><span
class="header-section-number">5.4.3</span> 演算子優先順位の確認</h3>
<p>プログラムファイル: <code>examples/precedence_demo.c</code></p>
<p>演算子の優先順位による計算結果の違いを確認します。</p>
<h3 data-number="5.4.4" id="コンパイルと実行-3"><span
class="header-section-number">5.4.4</span> コンパイルと実行</h3>
<div class="sourceCode" id="cb56"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb56-1"><a href="#cb56-1" aria-hidden="true" tabindex="-1"></a><span class="co"># examples ディレクトリに移動</span></span>
<span id="cb56-2"><a href="#cb56-2" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> examples</span>
<span id="cb56-3"><a href="#cb56-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-4"><a href="#cb56-4" aria-hidden="true" tabindex="-1"></a><span class="co"># C90準拠でコンパイル</span></span>
<span id="cb56-5"><a href="#cb56-5" aria-hidden="true" tabindex="-1"></a><span class="fu">gcc</span> <span class="at">-std</span><span class="op">=</span>c90 <span class="at">-Wall</span> <span class="at">-Wextra</span> <span class="at">-pedantic</span> operators_demo.c <span class="at">-o</span> operators_demo</span>
<span id="cb56-6"><a href="#cb56-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb56-7"><a href="#cb56-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 実行</span></span>
<span id="cb56-8"><a href="#cb56-8" aria-hidden="true" tabindex="-1"></a><span class="ex">./operators_demo</span></span></code></pre></div>
<h2 data-number="5.5" id="演習課題-3"><span
class="header-section-number">5.5</span> 演習課題</h2>
<h3 data-number="5.5.1" id="基礎問題-3"><span
class="header-section-number">5.5.1</span> 基礎問題</h3>
<ol type="1">
<li><strong>四則演算計算機</strong>
<ul>
<li>2つの数値に対してすべての算術演算を行うプログラムを作成してください</li>
</ul></li>
<li><strong>比較と論理演算</strong>
<ul>
<li>3つの数値の中から最大値を求めるプログラムを作成してください</li>
</ul></li>
<li><strong>インクリメント・デクリメント</strong>
<ul>
<li>前置と後置の違いを確認するプログラムを作成してください</li>
</ul></li>
</ol>
<h3 data-number="5.5.2" id="応用問題-3"><span
class="header-section-number">5.5.2</span> 応用問題</h3>
<ol type="1">
<li><strong>ビット操作</strong>
<ul>
<li>整数の各ビットを表示するプログラムを作成してください</li>
</ul></li>
<li><strong>条件演算子の活用</strong>
<ul>
<li>3つの数値を三項演算子を使って並び替えるプログラムを作成してください</li>
</ul></li>
<li><strong>演算子優先順位</strong>
<ul>
<li>複雑な式の計算順序を確認するプログラムを作成してください</li>
</ul></li>
</ol>
<h2 data-number="5.6" id="コンパイル方法-3"><span
class="header-section-number">5.6</span> コンパイル方法</h2>
<p>この章では以下のMakefileを使用してコンパイルができます：</p>
<div class="sourceCode" id="cb57"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb57-1"><a href="#cb57-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 全ての例題をコンパイル</span></span>
<span id="cb57-2"><a href="#cb57-2" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> all</span>
<span id="cb57-3"><a href="#cb57-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-4"><a href="#cb57-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 特定のプログラムをコンパイル</span></span>
<span id="cb57-5"><a href="#cb57-5" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> operators_demo</span>
<span id="cb57-6"><a href="#cb57-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-7"><a href="#cb57-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 実行</span></span>
<span id="cb57-8"><a href="#cb57-8" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> run</span>
<span id="cb57-9"><a href="#cb57-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb57-10"><a href="#cb57-10" aria-hidden="true" tabindex="-1"></a><span class="co"># クリーンアップ</span></span>
<span id="cb57-11"><a href="#cb57-11" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> clean</span></code></pre></div>
<h2 data-number="5.7" id="規格による違い-3"><span
class="header-section-number">5.7</span> 規格による違い</h2>
<h3 data-number="5.7.1" id="c90での制限事項-2"><span
class="header-section-number">5.7.1</span> C90での制限事項</h3>
<ul>
<li>ビット演算子は整数型に対してのみ使用可能</li>
<li>論理演算子の結果は0または1</li>
</ul>
<h3 data-number="5.7.2" id="c99以降の拡張-2"><span
class="header-section-number">5.7.2</span> C99以降の拡張</h3>
<ul>
<li><code>_Bool</code>型の追加により、論理値の取り扱いが明確化</li>
<li>複素数型に対する演算子の追加</li>
</ul>
<h2 data-number="5.8" id="よくある間違い-1"><span
class="header-section-number">5.8</span> 🚨 よくある間違い</h2>
<h3 data-number="5.8.1" id="代入と比較の混同"><span
class="header-section-number">5.8.1</span> 1. 代入と比較の混同</h3>
<div class="sourceCode" id="cb58"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb58-1"><a href="#cb58-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* NG: 代入を条件文で使用 */</span></span>
<span id="cb58-2"><a href="#cb58-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="op">(</span>a <span class="op">=</span> <span class="dv">5</span><span class="op">)</span> <span class="op">{</span>    <span class="co">/* 常に真になる */</span></span>
<span id="cb58-3"><a href="#cb58-3" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* ... */</span></span>
<span id="cb58-4"><a href="#cb58-4" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb58-5"><a href="#cb58-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb58-6"><a href="#cb58-6" aria-hidden="true" tabindex="-1"></a><span class="co">/* OK: 比較演算子を使用 */</span></span>
<span id="cb58-7"><a href="#cb58-7" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="op">(</span>a <span class="op">==</span> <span class="dv">5</span><span class="op">)</span> <span class="op">{</span>   <span class="co">/* a が 5 と等しいかチェック */</span></span>
<span id="cb58-8"><a href="#cb58-8" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* ... */</span></span>
<span id="cb58-9"><a href="#cb58-9" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 data-number="5.8.2" id="整数除算の結果-1"><span
class="header-section-number">5.8.2</span> 2. 整数除算の結果</h3>
<div class="sourceCode" id="cb59"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb59-1"><a href="#cb59-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* NG: 期待した結果にならない */</span></span>
<span id="cb59-2"><a href="#cb59-2" aria-hidden="true" tabindex="-1"></a><span class="dt">double</span> result <span class="op">=</span> <span class="dv">5</span> <span class="op">/</span> <span class="dv">2</span><span class="op">;</span>      <span class="co">/* 結果: 2.0 */</span></span>
<span id="cb59-3"><a href="#cb59-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb59-4"><a href="#cb59-4" aria-hidden="true" tabindex="-1"></a><span class="co">/* OK: 実数除算を使用 */</span></span>
<span id="cb59-5"><a href="#cb59-5" aria-hidden="true" tabindex="-1"></a><span class="dt">double</span> result <span class="op">=</span> <span class="fl">5.0</span> <span class="op">/</span> <span class="fl">2.0</span><span class="op">;</span>  <span class="co">/* 結果: 2.5 */</span></span></code></pre></div>
<h3 data-number="5.8.3" id="演算子の優先順位-1"><span
class="header-section-number">5.8.3</span> 3. 演算子の優先順位</h3>
<div class="sourceCode" id="cb60"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb60-1"><a href="#cb60-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* NG: 意図しない計算順序 */</span></span>
<span id="cb60-2"><a href="#cb60-2" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> result <span class="op">=</span> a <span class="op">+</span> b <span class="op">*</span> c <span class="op">+</span> d<span class="op">;</span> <span class="co">/* b * c が先に計算される */</span></span>
<span id="cb60-3"><a href="#cb60-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb60-4"><a href="#cb60-4" aria-hidden="true" tabindex="-1"></a><span class="co">/* OK: 括弧で明示 */</span></span>
<span id="cb60-5"><a href="#cb60-5" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> result <span class="op">=</span> <span class="op">(</span>a <span class="op">+</span> b<span class="op">)</span> <span class="op">*</span> <span class="op">(</span>c <span class="op">+</span> d<span class="op">);</span></span></code></pre></div>
<h2 data-number="5.9" id="次の章へ-3"><span
class="header-section-number">5.9</span> 次の章へ</h2>
<h2 data-number="5.10" id="参考資料-3"><span
class="header-section-number">5.10</span> 参考資料</h2>
<ul>
<li><a
href="https://ja.cppreference.com/w/c/language/operator_precedence">C言語演算子リファレンス</a></li>
<li><a
href="https://ja.cppreference.com/w/c/language/operator_arithmetic">ビット演算詳細</a></li>
<li><a
href="https://ja.cppreference.com/w/c/language/operator_precedence">演算子優先順位表</a></li>
</ul>
<h1 data-number="6" id="制御構造条件分岐"><span
class="header-section-number">6</span> 制御構造（条件分岐）</h1>
<h2 data-number="6.1" id="対応c規格-5"><span
class="header-section-number">6.1</span> 対応C規格</h2>
<ul>
<li><strong>主要対象:</strong> C90</li>
<li><strong>学習内容:</strong>
if文、else文、switch文、条件演算子による分岐処理</li>
</ul>
<h2 data-number="6.2" id="学習目標-5"><span
class="header-section-number">6.2</span> 学習目標</h2>
<p>この章を完了すると、以下のことができるようになります：</p>
<ul>
<li>if文を使った条件分岐ができる</li>
<li>else if文で複数条件を処理できる</li>
<li>switch文による多分岐処理ができる</li>
<li>条件演算子を適切に使える</li>
<li>ネストした条件分岐を理解する</li>
</ul>
<h2 data-number="6.3" id="理論解説-4"><span
class="header-section-number">6.3</span> 理論解説</h2>
<h3 data-number="6.3.1" id="if文の基本"><span
class="header-section-number">6.3.1</span> if文の基本 🤔</h3>
<p>if文は条件に基づいてプログラムの実行を分岐させます。</p>
<h4 data-number="6.3.1.1" id="基本構文"><span
class="header-section-number">6.3.1.1</span> 基本構文</h4>
<div class="sourceCode" id="cb61"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb61-1"><a href="#cb61-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="op">(</span>条件式<span class="op">)</span> <span class="op">{</span></span>
<span id="cb61-2"><a href="#cb61-2" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 条件が真の場合に実行される文 */</span></span>
<span id="cb61-3"><a href="#cb61-3" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h4 data-number="6.3.1.2" id="単純なif文の例"><span
class="header-section-number">6.3.1.2</span> 単純なif文の例</h4>
<div class="sourceCode" id="cb62"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb62-1"><a href="#cb62-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb62-2"><a href="#cb62-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb62-3"><a href="#cb62-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb62-4"><a href="#cb62-4" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb62-5"><a href="#cb62-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> score <span class="op">=</span> <span class="dv">85</span><span class="op">;</span></span>
<span id="cb62-6"><a href="#cb62-6" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb62-7"><a href="#cb62-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>score <span class="op">&gt;=</span> <span class="dv">80</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb62-8"><a href="#cb62-8" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;優秀です！</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb62-9"><a href="#cb62-9" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb62-10"><a href="#cb62-10" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb62-11"><a href="#cb62-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb62-12"><a href="#cb62-12" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 data-number="6.3.2" id="if-else文"><span
class="header-section-number">6.3.2</span> if-else文 ⚖️</h3>
<p>条件が偽の場合の処理も指定できます。</p>
<h4 data-number="6.3.2.1" id="基本構文-1"><span
class="header-section-number">6.3.2.1</span> 基本構文</h4>
<div class="sourceCode" id="cb63"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb63-1"><a href="#cb63-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="op">(</span>条件式<span class="op">)</span> <span class="op">{</span></span>
<span id="cb63-2"><a href="#cb63-2" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 条件が真の場合の処理 */</span></span>
<span id="cb63-3"><a href="#cb63-3" aria-hidden="true" tabindex="-1"></a><span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb63-4"><a href="#cb63-4" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 条件が偽の場合の処理 */</span></span>
<span id="cb63-5"><a href="#cb63-5" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h4 data-number="6.3.2.2" id="if-else文の例"><span
class="header-section-number">6.3.2.2</span> if-else文の例</h4>
<div class="sourceCode" id="cb64"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb64-1"><a href="#cb64-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> age <span class="op">=</span> <span class="dv">18</span><span class="op">;</span></span>
<span id="cb64-2"><a href="#cb64-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb64-3"><a href="#cb64-3" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="op">(</span>age <span class="op">&gt;=</span> <span class="dv">20</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb64-4"><a href="#cb64-4" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;成人です</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb64-5"><a href="#cb64-5" aria-hidden="true" tabindex="-1"></a><span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb64-6"><a href="#cb64-6" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;未成年です</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb64-7"><a href="#cb64-7" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 data-number="6.3.3" id="if-else-if文"><span
class="header-section-number">6.3.3</span> if-else if文 🔄</h3>
<p>複数の条件を順次チェックできます。</p>
<h4 data-number="6.3.3.1" id="基本構文-2"><span
class="header-section-number">6.3.3.1</span> 基本構文</h4>
<div class="sourceCode" id="cb65"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb65-1"><a href="#cb65-1" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="op">(</span>条件<span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb65-2"><a href="#cb65-2" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 条件1が真の場合 */</span></span>
<span id="cb65-3"><a href="#cb65-3" aria-hidden="true" tabindex="-1"></a><span class="op">}</span> <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>条件<span class="dv">2</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb65-4"><a href="#cb65-4" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 条件2が真の場合 */</span></span>
<span id="cb65-5"><a href="#cb65-5" aria-hidden="true" tabindex="-1"></a><span class="op">}</span> <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>条件<span class="dv">3</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb65-6"><a href="#cb65-6" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 条件3が真の場合 */</span></span>
<span id="cb65-7"><a href="#cb65-7" aria-hidden="true" tabindex="-1"></a><span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb65-8"><a href="#cb65-8" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* すべての条件が偽の場合 */</span></span>
<span id="cb65-9"><a href="#cb65-9" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h4 data-number="6.3.3.2" id="成績判定の例"><span
class="header-section-number">6.3.3.2</span> 成績判定の例</h4>
<div class="sourceCode" id="cb66"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb66-1"><a href="#cb66-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> score <span class="op">=</span> <span class="dv">85</span><span class="op">;</span></span>
<span id="cb66-2"><a href="#cb66-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb66-3"><a href="#cb66-3" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="op">(</span>score <span class="op">&gt;=</span> <span class="dv">90</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb66-4"><a href="#cb66-4" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;成績: A</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb66-5"><a href="#cb66-5" aria-hidden="true" tabindex="-1"></a><span class="op">}</span> <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>score <span class="op">&gt;=</span> <span class="dv">80</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb66-6"><a href="#cb66-6" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;成績: B</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb66-7"><a href="#cb66-7" aria-hidden="true" tabindex="-1"></a><span class="op">}</span> <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>score <span class="op">&gt;=</span> <span class="dv">70</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb66-8"><a href="#cb66-8" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;成績: C</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb66-9"><a href="#cb66-9" aria-hidden="true" tabindex="-1"></a><span class="op">}</span> <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>score <span class="op">&gt;=</span> <span class="dv">60</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb66-10"><a href="#cb66-10" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;成績: D</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb66-11"><a href="#cb66-11" aria-hidden="true" tabindex="-1"></a><span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb66-12"><a href="#cb66-12" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;成績: F</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb66-13"><a href="#cb66-13" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 data-number="6.3.4" id="ネストしたif文"><span
class="header-section-number">6.3.4</span> ネストしたif文 🏗️</h3>
<p>if文の中にさらにif文を書くことができます。</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb67-1"><a href="#cb67-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> temperature <span class="op">=</span> <span class="dv">25</span><span class="op">;</span></span>
<span id="cb67-2"><a href="#cb67-2" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> humidity <span class="op">=</span> <span class="dv">60</span><span class="op">;</span></span>
<span id="cb67-3"><a href="#cb67-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb67-4"><a href="#cb67-4" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="op">(</span>temperature <span class="op">&gt;=</span> <span class="dv">20</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb67-5"><a href="#cb67-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>humidity <span class="op">&lt;=</span> <span class="dv">50</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb67-6"><a href="#cb67-6" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;快適な天気です</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb67-7"><a href="#cb67-7" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb67-8"><a href="#cb67-8" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;暖かいですが湿度が高いです</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb67-9"><a href="#cb67-9" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb67-10"><a href="#cb67-10" aria-hidden="true" tabindex="-1"></a><span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb67-11"><a href="#cb67-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>humidity <span class="op">&lt;=</span> <span class="dv">50</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb67-12"><a href="#cb67-12" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;涼しく乾燥しています</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb67-13"><a href="#cb67-13" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb67-14"><a href="#cb67-14" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;寒くて湿気があります</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb67-15"><a href="#cb67-15" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb67-16"><a href="#cb67-16" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 data-number="6.3.5" id="条件式の詳細"><span
class="header-section-number">6.3.5</span> 条件式の詳細 🔍</h3>
<h4 data-number="6.3.5.1" id="比較演算子"><span
class="header-section-number">6.3.5.1</span> 比較演算子</h4>
<div class="sourceCode" id="cb68"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb68-1"><a href="#cb68-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> a <span class="op">=</span> <span class="dv">10</span><span class="op">,</span> b <span class="op">=</span> <span class="dv">20</span><span class="op">;</span></span>
<span id="cb68-2"><a href="#cb68-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb68-3"><a href="#cb68-3" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="op">(</span>a <span class="op">==</span> b<span class="op">)</span>  <span class="op">{</span> printf<span class="op">(</span><span class="st">&quot;等しい</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb68-4"><a href="#cb68-4" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="op">(</span>a <span class="op">!=</span> b<span class="op">)</span>  <span class="op">{</span> printf<span class="op">(</span><span class="st">&quot;等しくない</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb68-5"><a href="#cb68-5" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="op">(</span>a <span class="op">&lt;</span> b<span class="op">)</span>   <span class="op">{</span> printf<span class="op">(</span><span class="st">&quot;a は b より小さい</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb68-6"><a href="#cb68-6" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="op">(</span>a <span class="op">&lt;=</span> b<span class="op">)</span>  <span class="op">{</span> printf<span class="op">(</span><span class="st">&quot;a は b 以下</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb68-7"><a href="#cb68-7" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="op">(</span>a <span class="op">&gt;</span> b<span class="op">)</span>   <span class="op">{</span> printf<span class="op">(</span><span class="st">&quot;a は b より大きい</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb68-8"><a href="#cb68-8" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="op">(</span>a <span class="op">&gt;=</span> b<span class="op">)</span>  <span class="op">{</span> printf<span class="op">(</span><span class="st">&quot;a は b 以上</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span> <span class="op">}</span></span></code></pre></div>
<h4 data-number="6.3.5.2" id="論理演算子の組み合わせ"><span
class="header-section-number">6.3.5.2</span> 論理演算子の組み合わせ</h4>
<div class="sourceCode" id="cb69"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb69-1"><a href="#cb69-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> age <span class="op">=</span> <span class="dv">25</span><span class="op">;</span></span>
<span id="cb69-2"><a href="#cb69-2" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> income <span class="op">=</span> <span class="dv">300000</span><span class="op">;</span></span>
<span id="cb69-3"><a href="#cb69-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-4"><a href="#cb69-4" aria-hidden="true" tabindex="-1"></a><span class="co">/* AND演算子 */</span></span>
<span id="cb69-5"><a href="#cb69-5" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="op">(</span>age <span class="op">&gt;=</span> <span class="dv">20</span> <span class="op">&amp;&amp;</span> income <span class="op">&gt;=</span> <span class="dv">200000</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb69-6"><a href="#cb69-6" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ローン審査に通りました</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb69-7"><a href="#cb69-7" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb69-8"><a href="#cb69-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-9"><a href="#cb69-9" aria-hidden="true" tabindex="-1"></a><span class="co">/* OR演算子 */</span></span>
<span id="cb69-10"><a href="#cb69-10" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="op">(</span>age <span class="op">&lt;</span> <span class="dv">18</span> <span class="op">||</span> age <span class="op">&gt;</span> <span class="dv">65</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb69-11"><a href="#cb69-11" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;特別料金が適用されます</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb69-12"><a href="#cb69-12" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb69-13"><a href="#cb69-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb69-14"><a href="#cb69-14" aria-hidden="true" tabindex="-1"></a><span class="co">/* NOT演算子 */</span></span>
<span id="cb69-15"><a href="#cb69-15" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="op">(!(</span>age <span class="op">&gt;=</span> <span class="dv">20</span><span class="op">))</span> <span class="op">{</span></span>
<span id="cb69-16"><a href="#cb69-16" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;20歳未満です</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb69-17"><a href="#cb69-17" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 data-number="6.3.6" id="switch文"><span
class="header-section-number">6.3.6</span> switch文 🔀</h3>
<p>複数の値に対する分岐処理を効率的に記述できます。</p>
<h4 data-number="6.3.6.1" id="基本構文-3"><span
class="header-section-number">6.3.6.1</span> 基本構文</h4>
<div class="sourceCode" id="cb70"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb70-1"><a href="#cb70-1" aria-hidden="true" tabindex="-1"></a><span class="cf">switch</span> <span class="op">(</span>変数または式<span class="op">)</span> <span class="op">{</span></span>
<span id="cb70-2"><a href="#cb70-2" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> 値<span class="dv">1</span><span class="op">:</span></span>
<span id="cb70-3"><a href="#cb70-3" aria-hidden="true" tabindex="-1"></a>        <span class="co">/* 値1の場合の処理 */</span></span>
<span id="cb70-4"><a href="#cb70-4" aria-hidden="true" tabindex="-1"></a>        <span class="cf">break</span><span class="op">;</span></span>
<span id="cb70-5"><a href="#cb70-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> 値<span class="dv">2</span><span class="op">:</span></span>
<span id="cb70-6"><a href="#cb70-6" aria-hidden="true" tabindex="-1"></a>        <span class="co">/* 値2の場合の処理 */</span></span>
<span id="cb70-7"><a href="#cb70-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">break</span><span class="op">;</span></span>
<span id="cb70-8"><a href="#cb70-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> 値<span class="dv">3</span><span class="op">:</span></span>
<span id="cb70-9"><a href="#cb70-9" aria-hidden="true" tabindex="-1"></a>        <span class="co">/* 値3の場合の処理 */</span></span>
<span id="cb70-10"><a href="#cb70-10" aria-hidden="true" tabindex="-1"></a>        <span class="cf">break</span><span class="op">;</span></span>
<span id="cb70-11"><a href="#cb70-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">default</span><span class="op">:</span></span>
<span id="cb70-12"><a href="#cb70-12" aria-hidden="true" tabindex="-1"></a>        <span class="co">/* どの値にも一致しない場合の処理 */</span></span>
<span id="cb70-13"><a href="#cb70-13" aria-hidden="true" tabindex="-1"></a>        <span class="cf">break</span><span class="op">;</span></span>
<span id="cb70-14"><a href="#cb70-14" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h4 data-number="6.3.6.2" id="曜日判定の例"><span
class="header-section-number">6.3.6.2</span> 曜日判定の例</h4>
<div class="sourceCode" id="cb71"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb71-1"><a href="#cb71-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> day <span class="op">=</span> <span class="dv">3</span><span class="op">;</span></span>
<span id="cb71-2"><a href="#cb71-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb71-3"><a href="#cb71-3" aria-hidden="true" tabindex="-1"></a><span class="cf">switch</span> <span class="op">(</span>day<span class="op">)</span> <span class="op">{</span></span>
<span id="cb71-4"><a href="#cb71-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> <span class="dv">1</span><span class="op">:</span></span>
<span id="cb71-5"><a href="#cb71-5" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;月曜日</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb71-6"><a href="#cb71-6" aria-hidden="true" tabindex="-1"></a>        <span class="cf">break</span><span class="op">;</span></span>
<span id="cb71-7"><a href="#cb71-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> <span class="dv">2</span><span class="op">:</span></span>
<span id="cb71-8"><a href="#cb71-8" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;火曜日</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb71-9"><a href="#cb71-9" aria-hidden="true" tabindex="-1"></a>        <span class="cf">break</span><span class="op">;</span></span>
<span id="cb71-10"><a href="#cb71-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> <span class="dv">3</span><span class="op">:</span></span>
<span id="cb71-11"><a href="#cb71-11" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;水曜日</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb71-12"><a href="#cb71-12" aria-hidden="true" tabindex="-1"></a>        <span class="cf">break</span><span class="op">;</span></span>
<span id="cb71-13"><a href="#cb71-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> <span class="dv">4</span><span class="op">:</span></span>
<span id="cb71-14"><a href="#cb71-14" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;木曜日</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb71-15"><a href="#cb71-15" aria-hidden="true" tabindex="-1"></a>        <span class="cf">break</span><span class="op">;</span></span>
<span id="cb71-16"><a href="#cb71-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> <span class="dv">5</span><span class="op">:</span></span>
<span id="cb71-17"><a href="#cb71-17" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;金曜日</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb71-18"><a href="#cb71-18" aria-hidden="true" tabindex="-1"></a>        <span class="cf">break</span><span class="op">;</span></span>
<span id="cb71-19"><a href="#cb71-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> <span class="dv">6</span><span class="op">:</span></span>
<span id="cb71-20"><a href="#cb71-20" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;土曜日</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb71-21"><a href="#cb71-21" aria-hidden="true" tabindex="-1"></a>        <span class="cf">break</span><span class="op">;</span></span>
<span id="cb71-22"><a href="#cb71-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> <span class="dv">7</span><span class="op">:</span></span>
<span id="cb71-23"><a href="#cb71-23" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;日曜日</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb71-24"><a href="#cb71-24" aria-hidden="true" tabindex="-1"></a>        <span class="cf">break</span><span class="op">;</span></span>
<span id="cb71-25"><a href="#cb71-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">default</span><span class="op">:</span></span>
<span id="cb71-26"><a href="#cb71-26" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;無効な曜日です</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb71-27"><a href="#cb71-27" aria-hidden="true" tabindex="-1"></a>        <span class="cf">break</span><span class="op">;</span></span>
<span id="cb71-28"><a href="#cb71-28" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h4 data-number="6.3.6.3" id="break文の重要性"><span
class="header-section-number">6.3.6.3</span> break文の重要性</h4>
<p>break文を忘れると、次のcaseも実行されます（フォールスルー）：</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb72-1"><a href="#cb72-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> grade <span class="op">=</span> <span class="ch">&#39;B&#39;</span><span class="op">;</span></span>
<span id="cb72-2"><a href="#cb72-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb72-3"><a href="#cb72-3" aria-hidden="true" tabindex="-1"></a><span class="cf">switch</span> <span class="op">(</span>grade<span class="op">)</span> <span class="op">{</span></span>
<span id="cb72-4"><a href="#cb72-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> <span class="ch">&#39;A&#39;</span><span class="op">:</span></span>
<span id="cb72-5"><a href="#cb72-5" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;優秀</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb72-6"><a href="#cb72-6" aria-hidden="true" tabindex="-1"></a>        <span class="co">/* break がないので次のcaseも実行される */</span></span>
<span id="cb72-7"><a href="#cb72-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> <span class="ch">&#39;B&#39;</span><span class="op">:</span></span>
<span id="cb72-8"><a href="#cb72-8" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;良好</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb72-9"><a href="#cb72-9" aria-hidden="true" tabindex="-1"></a>        <span class="co">/* break がないので次のcaseも実行される */</span></span>
<span id="cb72-10"><a href="#cb72-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> <span class="ch">&#39;C&#39;</span><span class="op">:</span></span>
<span id="cb72-11"><a href="#cb72-11" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;普通</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb72-12"><a href="#cb72-12" aria-hidden="true" tabindex="-1"></a>        <span class="cf">break</span><span class="op">;</span></span>
<span id="cb72-13"><a href="#cb72-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">default</span><span class="op">:</span></span>
<span id="cb72-14"><a href="#cb72-14" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;要努力</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb72-15"><a href="#cb72-15" aria-hidden="true" tabindex="-1"></a>        <span class="cf">break</span><span class="op">;</span></span>
<span id="cb72-16"><a href="#cb72-16" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb72-17"><a href="#cb72-17" aria-hidden="true" tabindex="-1"></a><span class="co">/* grade が &#39;B&#39; の場合、&quot;良好&quot; と &quot;普通&quot; の両方が出力される */</span></span></code></pre></div>
<h4 data-number="6.3.6.4" id="意図的なフォールスルー"><span
class="header-section-number">6.3.6.4</span> 意図的なフォールスルー</h4>
<p>時には意図的にbreakを省略することもあります：</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb73-1"><a href="#cb73-1" aria-hidden="true" tabindex="-1"></a><span class="dt">char</span> ch <span class="op">=</span> <span class="ch">&#39;a&#39;</span><span class="op">;</span></span>
<span id="cb73-2"><a href="#cb73-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb73-3"><a href="#cb73-3" aria-hidden="true" tabindex="-1"></a><span class="cf">switch</span> <span class="op">(</span>ch<span class="op">)</span> <span class="op">{</span></span>
<span id="cb73-4"><a href="#cb73-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> <span class="ch">&#39;a&#39;</span><span class="op">:</span></span>
<span id="cb73-5"><a href="#cb73-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> <span class="ch">&#39;e&#39;</span><span class="op">:</span></span>
<span id="cb73-6"><a href="#cb73-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> <span class="ch">&#39;i&#39;</span><span class="op">:</span></span>
<span id="cb73-7"><a href="#cb73-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> <span class="ch">&#39;o&#39;</span><span class="op">:</span></span>
<span id="cb73-8"><a href="#cb73-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> <span class="ch">&#39;u&#39;</span><span class="op">:</span></span>
<span id="cb73-9"><a href="#cb73-9" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;母音です</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb73-10"><a href="#cb73-10" aria-hidden="true" tabindex="-1"></a>        <span class="cf">break</span><span class="op">;</span></span>
<span id="cb73-11"><a href="#cb73-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">default</span><span class="op">:</span></span>
<span id="cb73-12"><a href="#cb73-12" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;子音です</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb73-13"><a href="#cb73-13" aria-hidden="true" tabindex="-1"></a>        <span class="cf">break</span><span class="op">;</span></span>
<span id="cb73-14"><a href="#cb73-14" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 data-number="6.3.7" id="条件演算子三項演算子の復習"><span
class="header-section-number">6.3.7</span>
条件演算子（三項演算子）の復習 ❓</h3>
<p>条件分岐の簡潔な書き方として条件演算子があります。</p>
<div class="sourceCode" id="cb74"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb74-1"><a href="#cb74-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> a <span class="op">=</span> <span class="dv">10</span><span class="op">,</span> b <span class="op">=</span> <span class="dv">20</span><span class="op">;</span></span>
<span id="cb74-2"><a href="#cb74-2" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> max<span class="op">;</span></span>
<span id="cb74-3"><a href="#cb74-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-4"><a href="#cb74-4" aria-hidden="true" tabindex="-1"></a><span class="co">/* if-else文での記述 */</span></span>
<span id="cb74-5"><a href="#cb74-5" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="op">(</span>a <span class="op">&gt;</span> b<span class="op">)</span> <span class="op">{</span></span>
<span id="cb74-6"><a href="#cb74-6" aria-hidden="true" tabindex="-1"></a>    max <span class="op">=</span> a<span class="op">;</span></span>
<span id="cb74-7"><a href="#cb74-7" aria-hidden="true" tabindex="-1"></a><span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb74-8"><a href="#cb74-8" aria-hidden="true" tabindex="-1"></a>    max <span class="op">=</span> b<span class="op">;</span></span>
<span id="cb74-9"><a href="#cb74-9" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb74-10"><a href="#cb74-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-11"><a href="#cb74-11" aria-hidden="true" tabindex="-1"></a><span class="co">/* 条件演算子での記述 */</span></span>
<span id="cb74-12"><a href="#cb74-12" aria-hidden="true" tabindex="-1"></a>max <span class="op">=</span> <span class="op">(</span>a <span class="op">&gt;</span> b<span class="op">)</span> <span class="op">?</span> a <span class="op">:</span> b<span class="op">;</span></span>
<span id="cb74-13"><a href="#cb74-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb74-14"><a href="#cb74-14" aria-hidden="true" tabindex="-1"></a>printf<span class="op">(</span><span class="st">&quot;最大値: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> max<span class="op">);</span></span></code></pre></div>
<h3 data-number="6.3.8" id="条件式での注意点"><span
class="header-section-number">6.3.8</span> 条件式での注意点 ⚠️</h3>
<h4 data-number="6.3.8.1" id="代入と比較の混同-1"><span
class="header-section-number">6.3.8.1</span> 代入と比較の混同</h4>
<div class="sourceCode" id="cb75"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb75-1"><a href="#cb75-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> x <span class="op">=</span> <span class="dv">5</span><span class="op">;</span></span>
<span id="cb75-2"><a href="#cb75-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-3"><a href="#cb75-3" aria-hidden="true" tabindex="-1"></a><span class="co">/* NG: 代入になってしまう */</span></span>
<span id="cb75-4"><a href="#cb75-4" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="op">(</span>x <span class="op">=</span> <span class="dv">10</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb75-5"><a href="#cb75-5" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;常に実行される</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span>  <span class="co">/* x に 10 が代入され、常に真 */</span></span>
<span id="cb75-6"><a href="#cb75-6" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb75-7"><a href="#cb75-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb75-8"><a href="#cb75-8" aria-hidden="true" tabindex="-1"></a><span class="co">/* OK: 比較演算子を使用 */</span></span>
<span id="cb75-9"><a href="#cb75-9" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="op">(</span>x <span class="op">==</span> <span class="dv">10</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb75-10"><a href="#cb75-10" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;x が 10 の場合のみ実行</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb75-11"><a href="#cb75-11" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h4 data-number="6.3.8.2" id="浮動小数点数の比較"><span
class="header-section-number">6.3.8.2</span> 浮動小数点数の比較</h4>
<div class="sourceCode" id="cb76"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb76-1"><a href="#cb76-1" aria-hidden="true" tabindex="-1"></a><span class="dt">double</span> d <span class="op">=</span> <span class="fl">0.1</span> <span class="op">+</span> <span class="fl">0.2</span><span class="op">;</span></span>
<span id="cb76-2"><a href="#cb76-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb76-3"><a href="#cb76-3" aria-hidden="true" tabindex="-1"></a><span class="co">/* NG: 浮動小数点の誤差で期待通りにならない可能性 */</span></span>
<span id="cb76-4"><a href="#cb76-4" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="op">(</span>d <span class="op">==</span> <span class="fl">0.3</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb76-5"><a href="#cb76-5" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;等しい</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb76-6"><a href="#cb76-6" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb76-7"><a href="#cb76-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb76-8"><a href="#cb76-8" aria-hidden="true" tabindex="-1"></a><span class="co">/* OK: 誤差を考慮した比較 */</span></span>
<span id="cb76-9"><a href="#cb76-9" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="op">(</span>d <span class="op">&gt;=</span> <span class="fl">0.299999</span> <span class="op">&amp;&amp;</span> d <span class="op">&lt;=</span> <span class="fl">0.300001</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb76-10"><a href="#cb76-10" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ほぼ等しい</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb76-11"><a href="#cb76-11" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h2 data-number="6.4" id="サンプルコード-4"><span
class="header-section-number">6.4</span> サンプルコード</h2>
<h3 data-number="6.4.1" id="if文の基本使用例"><span
class="header-section-number">6.4.1</span> if文の基本使用例</h3>
<p>プログラムファイル: <code>examples/if_basic.c</code></p>
<p>基本的なif文、if-else文の使用方法を学習します。</p>
<h3 data-number="6.4.2" id="複雑な条件分岐"><span
class="header-section-number">6.4.2</span> 複雑な条件分岐</h3>
<p>プログラムファイル: <code>examples/complex_conditions.c</code></p>
<p>複数条件を組み合わせた分岐処理を学習します。</p>
<h3 data-number="6.4.3" id="switch文の実例"><span
class="header-section-number">6.4.3</span> switch文の実例</h3>
<p>プログラムファイル: <code>examples/switch_demo.c</code></p>
<p>switch文を使った多分岐処理を学習します。</p>
<h3 data-number="6.4.4" id="コンパイルと実行-4"><span
class="header-section-number">6.4.4</span> コンパイルと実行</h3>
<div class="sourceCode" id="cb77"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb77-1"><a href="#cb77-1" aria-hidden="true" tabindex="-1"></a><span class="co"># examples ディレクトリに移動</span></span>
<span id="cb77-2"><a href="#cb77-2" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> examples</span>
<span id="cb77-3"><a href="#cb77-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-4"><a href="#cb77-4" aria-hidden="true" tabindex="-1"></a><span class="co"># C90準拠でコンパイル</span></span>
<span id="cb77-5"><a href="#cb77-5" aria-hidden="true" tabindex="-1"></a><span class="fu">gcc</span> <span class="at">-std</span><span class="op">=</span>c90 <span class="at">-Wall</span> <span class="at">-Wextra</span> <span class="at">-pedantic</span> if_basic.c <span class="at">-o</span> if_basic</span>
<span id="cb77-6"><a href="#cb77-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb77-7"><a href="#cb77-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 実行</span></span>
<span id="cb77-8"><a href="#cb77-8" aria-hidden="true" tabindex="-1"></a><span class="ex">./if_basic</span></span></code></pre></div>
<h2 data-number="6.5" id="演習課題-4"><span
class="header-section-number">6.5</span> 演習課題</h2>
<h3 data-number="6.5.1" id="基礎問題-4"><span
class="header-section-number">6.5.1</span> 基礎問題</h3>
<ol type="1">
<li><strong>年齢判定プログラム</strong>
<ul>
<li>年齢を入力して、幼児・児童・学生・成人・高齢者に分類するプログラムを作成してください</li>
</ul></li>
<li><strong>電卓プログラム</strong>
<ul>
<li>2つの数値と演算子（+, -, *,
/）を入力して計算結果を表示するプログラムをswitch文で作成してください</li>
</ul></li>
<li><strong>成績判定システム</strong>
<ul>
<li>点数を入力してA〜Fの成績を判定するプログラムを作成してください</li>
</ul></li>
</ol>
<h3 data-number="6.5.2" id="応用問題-4"><span
class="header-section-number">6.5.2</span> 応用問題</h3>
<ol type="1">
<li><strong>うるう年判定</strong>
<ul>
<li>年を入力してうるう年かどうかを判定するプログラムを作成してください</li>
<li>条件:
4で割り切れる、ただし100で割り切れる年は平年、400で割り切れる年はうるう年</li>
</ul></li>
<li><strong>BMI計算と判定</strong>
<ul>
<li>身長と体重を入力してBMIを計算し、肥満度を判定するプログラムを作成してください</li>
</ul></li>
<li><strong>三角形の判定</strong>
<ul>
<li>3つの辺の長さを入力して、三角形として成立するか、どの種類の三角形かを判定してください</li>
</ul></li>
</ol>
<h2 data-number="6.6" id="コンパイル方法-4"><span
class="header-section-number">6.6</span> コンパイル方法</h2>
<p>この章では以下のMakefileを使用してコンパイルができます：</p>
<div class="sourceCode" id="cb78"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb78-1"><a href="#cb78-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 全ての例題をコンパイル</span></span>
<span id="cb78-2"><a href="#cb78-2" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> all</span>
<span id="cb78-3"><a href="#cb78-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-4"><a href="#cb78-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 特定のプログラムをコンパイル</span></span>
<span id="cb78-5"><a href="#cb78-5" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> if_basic</span>
<span id="cb78-6"><a href="#cb78-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-7"><a href="#cb78-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 実行</span></span>
<span id="cb78-8"><a href="#cb78-8" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> run</span>
<span id="cb78-9"><a href="#cb78-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb78-10"><a href="#cb78-10" aria-hidden="true" tabindex="-1"></a><span class="co"># クリーンアップ</span></span>
<span id="cb78-11"><a href="#cb78-11" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> clean</span></code></pre></div>
<h2 data-number="6.7" id="規格による違い-4"><span
class="header-section-number">6.7</span> 規格による違い</h2>
<h3 data-number="6.7.1" id="c90での制限事項-3"><span
class="header-section-number">6.7.1</span> C90での制限事項</h3>
<ul>
<li>switch文の case ラベルは整数定数のみ</li>
<li>複合文内での変数宣言は先頭のみ</li>
</ul>
<h3 data-number="6.7.2" id="c99以降の拡張-3"><span
class="header-section-number">6.7.2</span> C99以降の拡張</h3>
<ul>
<li>switch文でlong long型が使用可能</li>
<li>ブロック内での変数宣言位置の制限緩和</li>
</ul>
<h2 data-number="6.8" id="よくある間違い-2"><span
class="header-section-number">6.8</span> 🚨 よくある間違い</h2>
<h3 data-number="6.8.1" id="セミコロンの位置"><span
class="header-section-number">6.8.1</span> 1. セミコロンの位置</h3>
<div class="sourceCode" id="cb79"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb79-1"><a href="#cb79-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* NG: if文の後にセミコロン */</span></span>
<span id="cb79-2"><a href="#cb79-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="op">(</span>condition<span class="op">);</span></span>
<span id="cb79-3"><a href="#cb79-3" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb79-4"><a href="#cb79-4" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;常に実行される</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span>  <span class="co">/* 条件に関係なく実行 */</span></span>
<span id="cb79-5"><a href="#cb79-5" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb79-6"><a href="#cb79-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb79-7"><a href="#cb79-7" aria-hidden="true" tabindex="-1"></a><span class="co">/* OK: 正しい記述 */</span></span>
<span id="cb79-8"><a href="#cb79-8" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="op">(</span>condition<span class="op">)</span> <span class="op">{</span></span>
<span id="cb79-9"><a href="#cb79-9" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;条件が真の場合のみ実行</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb79-10"><a href="#cb79-10" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 data-number="6.8.2" id="switch文でのbreak忘れ"><span
class="header-section-number">6.8.2</span> 2. switch文でのbreak忘れ</h3>
<div class="sourceCode" id="cb80"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb80-1"><a href="#cb80-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* NG: break忘れでフォールスルー */</span></span>
<span id="cb80-2"><a href="#cb80-2" aria-hidden="true" tabindex="-1"></a><span class="cf">switch</span> <span class="op">(</span>value<span class="op">)</span> <span class="op">{</span></span>
<span id="cb80-3"><a href="#cb80-3" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> <span class="dv">1</span><span class="op">:</span></span>
<span id="cb80-4"><a href="#cb80-4" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;1です</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb80-5"><a href="#cb80-5" aria-hidden="true" tabindex="-1"></a>        <span class="co">/* break; を忘れると次のcaseも実行される */</span></span>
<span id="cb80-6"><a href="#cb80-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> <span class="dv">2</span><span class="op">:</span></span>
<span id="cb80-7"><a href="#cb80-7" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;2です</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb80-8"><a href="#cb80-8" aria-hidden="true" tabindex="-1"></a>        <span class="cf">break</span><span class="op">;</span></span>
<span id="cb80-9"><a href="#cb80-9" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb80-10"><a href="#cb80-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb80-11"><a href="#cb80-11" aria-hidden="true" tabindex="-1"></a><span class="co">/* OK: 適切なbreak文 */</span></span>
<span id="cb80-12"><a href="#cb80-12" aria-hidden="true" tabindex="-1"></a><span class="cf">switch</span> <span class="op">(</span>value<span class="op">)</span> <span class="op">{</span></span>
<span id="cb80-13"><a href="#cb80-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> <span class="dv">1</span><span class="op">:</span></span>
<span id="cb80-14"><a href="#cb80-14" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;1です</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb80-15"><a href="#cb80-15" aria-hidden="true" tabindex="-1"></a>        <span class="cf">break</span><span class="op">;</span></span>
<span id="cb80-16"><a href="#cb80-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">case</span> <span class="dv">2</span><span class="op">:</span></span>
<span id="cb80-17"><a href="#cb80-17" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;2です</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb80-18"><a href="#cb80-18" aria-hidden="true" tabindex="-1"></a>        <span class="cf">break</span><span class="op">;</span></span>
<span id="cb80-19"><a href="#cb80-19" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 data-number="6.8.3" id="複雑な条件式での括弧不足"><span
class="header-section-number">6.8.3</span> 3.
複雑な条件式での括弧不足</h3>
<div class="sourceCode" id="cb81"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb81-1"><a href="#cb81-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* NG: 意図しない優先順位 */</span></span>
<span id="cb81-2"><a href="#cb81-2" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="op">(</span>a <span class="op">==</span> <span class="dv">1</span> <span class="op">||</span> b <span class="op">==</span> <span class="dv">2</span> <span class="op">&amp;&amp;</span> c <span class="op">==</span> <span class="dv">3</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb81-3"><a href="#cb81-3" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* &amp;&amp; が || より優先される */</span></span>
<span id="cb81-4"><a href="#cb81-4" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb81-5"><a href="#cb81-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb81-6"><a href="#cb81-6" aria-hidden="true" tabindex="-1"></a><span class="co">/* OK: 括弧で明示 */</span></span>
<span id="cb81-7"><a href="#cb81-7" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="op">((</span>a <span class="op">==</span> <span class="dv">1</span><span class="op">)</span> <span class="op">||</span> <span class="op">(</span>b <span class="op">==</span> <span class="dv">2</span> <span class="op">&amp;&amp;</span> c <span class="op">==</span> <span class="dv">3</span><span class="op">))</span> <span class="op">{</span></span>
<span id="cb81-8"><a href="#cb81-8" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 意図が明確 */</span></span>
<span id="cb81-9"><a href="#cb81-9" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h2 data-number="6.9" id="次の章へ-4"><span
class="header-section-number">6.9</span> 次の章へ</h2>
<h2 data-number="6.10" id="参考資料-4"><span
class="header-section-number">6.10</span> 参考資料</h2>
<ul>
<li><a
href="https://ja.cppreference.com/w/c/language/if">if文詳細</a></li>
<li><a
href="https://ja.cppreference.com/w/c/language/switch">switch文詳細</a></li>
<li><a
href="https://ja.cppreference.com/w/c/language/operator_other">条件演算子</a></li>
</ul>
<h1 data-number="7" id="制御構造ループ"><span
class="header-section-number">7</span> 制御構造（ループ）</h1>
<h2 data-number="7.1" id="対応c規格-6"><span
class="header-section-number">7.1</span> 対応C規格</h2>
<ul>
<li><strong>主要対象:</strong> C90</li>
<li><strong>学習内容:</strong>
for文、while文、do-while文、break文、continue文、ネストしたループ</li>
</ul>
<h2 data-number="7.2" id="学習目標-6"><span
class="header-section-number">7.2</span> 学習目標</h2>
<p>この章を完了すると、以下のことができるようになります：</p>
<ul>
<li>for文を使った繰り返し処理ができる</li>
<li>while文とdo-while文の違いを理解する</li>
<li>break文とcontinue文を適切に使える</li>
<li>ネストしたループを理解して活用できる</li>
<li>ループを使った実践的なプログラムを作成できる</li>
</ul>
<h2 data-number="7.3" id="理論解説-5"><span
class="header-section-number">7.3</span> 理論解説</h2>
<h3 data-number="7.3.1" id="for文"><span
class="header-section-number">7.3.1</span> for文 🔄</h3>
<p>最も一般的なループ文で、初期化・条件・更新を1行で記述できます。</p>
<h4 data-number="7.3.1.1" id="基本構文-4"><span
class="header-section-number">7.3.1.1</span> 基本構文</h4>
<div class="sourceCode" id="cb82"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb82-1"><a href="#cb82-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> <span class="op">(</span>初期化<span class="op">;</span> 条件式<span class="op">;</span> 更新式<span class="op">)</span> <span class="op">{</span></span>
<span id="cb82-2"><a href="#cb82-2" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 繰り返し実行される文 */</span></span>
<span id="cb82-3"><a href="#cb82-3" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h4 data-number="7.3.1.2" id="基本的な使用例"><span
class="header-section-number">7.3.1.2</span> 基本的な使用例</h4>
<div class="sourceCode" id="cb83"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb83-1"><a href="#cb83-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb83-2"><a href="#cb83-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb83-3"><a href="#cb83-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb83-4"><a href="#cb83-4" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb83-5"><a href="#cb83-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb83-6"><a href="#cb83-6" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb83-7"><a href="#cb83-7" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 1から10まで出力 */</span></span>
<span id="cb83-8"><a href="#cb83-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&lt;=</span> <span class="dv">10</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb83-9"><a href="#cb83-9" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st"> &quot;</span><span class="op">,</span> i<span class="op">);</span></span>
<span id="cb83-10"><a href="#cb83-10" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb83-11"><a href="#cb83-11" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb83-12"><a href="#cb83-12" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb83-13"><a href="#cb83-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb83-14"><a href="#cb83-14" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h4 data-number="7.3.1.3" id="for文の詳細動作"><span
class="header-section-number">7.3.1.3</span> for文の詳細動作</h4>
<div class="sourceCode" id="cb84"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb84-1"><a href="#cb84-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">5</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb84-2"><a href="#cb84-2" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;i = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> i<span class="op">);</span></span>
<span id="cb84-3"><a href="#cb84-3" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb84-4"><a href="#cb84-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb84-5"><a href="#cb84-5" aria-hidden="true" tabindex="-1"></a><span class="co">/* 上記は以下と同等 */</span></span>
<span id="cb84-6"><a href="#cb84-6" aria-hidden="true" tabindex="-1"></a>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span>              <span class="co">/* 初期化（1回のみ実行） */</span></span>
<span id="cb84-7"><a href="#cb84-7" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span> <span class="op">(</span>i <span class="op">&lt;</span> <span class="dv">5</span><span class="op">)</span> <span class="op">{</span>     <span class="co">/* 条件チェック */</span></span>
<span id="cb84-8"><a href="#cb84-8" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;i = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> i<span class="op">);</span>  <span class="co">/* ループ本体 */</span></span>
<span id="cb84-9"><a href="#cb84-9" aria-hidden="true" tabindex="-1"></a>    i<span class="op">++;</span>            <span class="co">/* 更新式 */</span></span>
<span id="cb84-10"><a href="#cb84-10" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h4 data-number="7.3.1.4" id="さまざまなfor文のパターン"><span
class="header-section-number">7.3.1.4</span>
さまざまなfor文のパターン</h4>
<div class="sourceCode" id="cb85"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb85-1"><a href="#cb85-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* 逆順ループ */</span></span>
<span id="cb85-2"><a href="#cb85-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">10</span><span class="op">;</span> i <span class="op">&gt;=</span> <span class="dv">1</span><span class="op">;</span> i<span class="op">--)</span> <span class="op">{</span></span>
<span id="cb85-3"><a href="#cb85-3" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st"> &quot;</span><span class="op">,</span> i<span class="op">);</span></span>
<span id="cb85-4"><a href="#cb85-4" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb85-5"><a href="#cb85-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb85-6"><a href="#cb85-6" aria-hidden="true" tabindex="-1"></a><span class="co">/* 2つずつ増加 */</span></span>
<span id="cb85-7"><a href="#cb85-7" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;=</span> <span class="dv">20</span><span class="op">;</span> i <span class="op">+=</span> <span class="dv">2</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb85-8"><a href="#cb85-8" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st"> &quot;</span><span class="op">,</span> i<span class="op">);</span></span>
<span id="cb85-9"><a href="#cb85-9" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb85-10"><a href="#cb85-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb85-11"><a href="#cb85-11" aria-hidden="true" tabindex="-1"></a><span class="co">/* 複数変数の制御 */</span></span>
<span id="cb85-12"><a href="#cb85-12" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">,</span> j <span class="op">=</span> <span class="dv">10</span><span class="op">;</span> i <span class="op">&lt;</span> j<span class="op">;</span> i<span class="op">++,</span> j<span class="op">--)</span> <span class="op">{</span></span>
<span id="cb85-13"><a href="#cb85-13" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;i=</span><span class="sc">%d</span><span class="st">, j=</span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> i<span class="op">,</span> j<span class="op">);</span></span>
<span id="cb85-14"><a href="#cb85-14" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 data-number="7.3.2" id="while文"><span
class="header-section-number">7.3.2</span> while文 🌀</h3>
<p>条件が真である間、繰り返し処理を実行します。</p>
<h4 data-number="7.3.2.1" id="基本構文-5"><span
class="header-section-number">7.3.2.1</span> 基本構文</h4>
<div class="sourceCode" id="cb86"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb86-1"><a href="#cb86-1" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span> <span class="op">(</span>条件式<span class="op">)</span> <span class="op">{</span></span>
<span id="cb86-2"><a href="#cb86-2" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 繰り返し実行される文 */</span></span>
<span id="cb86-3"><a href="#cb86-3" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h4 data-number="7.3.2.2" id="while文の使用例"><span
class="header-section-number">7.3.2.2</span> while文の使用例</h4>
<div class="sourceCode" id="cb87"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb87-1"><a href="#cb87-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb87-2"><a href="#cb87-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb87-3"><a href="#cb87-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb87-4"><a href="#cb87-4" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb87-5"><a href="#cb87-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> count <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb87-6"><a href="#cb87-6" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb87-7"><a href="#cb87-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>count <span class="op">&lt;=</span> <span class="dv">5</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb87-8"><a href="#cb87-8" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;count = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> count<span class="op">);</span></span>
<span id="cb87-9"><a href="#cb87-9" aria-hidden="true" tabindex="-1"></a>        count<span class="op">++;</span></span>
<span id="cb87-10"><a href="#cb87-10" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb87-11"><a href="#cb87-11" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb87-12"><a href="#cb87-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb87-13"><a href="#cb87-13" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h4 data-number="7.3.2.3" id="while文の実践例"><span
class="header-section-number">7.3.2.3</span> while文の実践例</h4>
<div class="sourceCode" id="cb88"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb88-1"><a href="#cb88-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* ユーザー入力の処理 */</span></span>
<span id="cb88-2"><a href="#cb88-2" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> number<span class="op">;</span></span>
<span id="cb88-3"><a href="#cb88-3" aria-hidden="true" tabindex="-1"></a>printf<span class="op">(</span><span class="st">&quot;正の数を入力してください（0で終了）: &quot;</span><span class="op">);</span></span>
<span id="cb88-4"><a href="#cb88-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb88-5"><a href="#cb88-5" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span> <span class="op">(</span>scanf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">&amp;</span>number<span class="op">)</span> <span class="op">==</span> <span class="dv">1</span> <span class="op">&amp;&amp;</span> number <span class="op">&gt;</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb88-6"><a href="#cb88-6" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;入力された数: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> number<span class="op">);</span></span>
<span id="cb88-7"><a href="#cb88-7" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;次の数を入力してください（0で終了）: &quot;</span><span class="op">);</span></span>
<span id="cb88-8"><a href="#cb88-8" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb88-9"><a href="#cb88-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb88-10"><a href="#cb88-10" aria-hidden="true" tabindex="-1"></a>printf<span class="op">(</span><span class="st">&quot;プログラムを終了します。</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span></code></pre></div>
<h3 data-number="7.3.3" id="do-while文"><span
class="header-section-number">7.3.3</span> do-while文 🔁</h3>
<p>最低1回は実行され、その後条件をチェックするループです。</p>
<h4 data-number="7.3.3.1" id="基本構文-6"><span
class="header-section-number">7.3.3.1</span> 基本構文</h4>
<div class="sourceCode" id="cb89"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb89-1"><a href="#cb89-1" aria-hidden="true" tabindex="-1"></a><span class="cf">do</span> <span class="op">{</span></span>
<span id="cb89-2"><a href="#cb89-2" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 最低1回は実行される文 */</span></span>
<span id="cb89-3"><a href="#cb89-3" aria-hidden="true" tabindex="-1"></a><span class="op">}</span> <span class="cf">while</span> <span class="op">(</span>条件式<span class="op">);</span></span></code></pre></div>
<h4 data-number="7.3.3.2" id="do-while文の使用例"><span
class="header-section-number">7.3.3.2</span> do-while文の使用例</h4>
<div class="sourceCode" id="cb90"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb90-1"><a href="#cb90-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb90-2"><a href="#cb90-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb90-3"><a href="#cb90-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb90-4"><a href="#cb90-4" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb90-5"><a href="#cb90-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> choice<span class="op">;</span></span>
<span id="cb90-6"><a href="#cb90-6" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb90-7"><a href="#cb90-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">do</span> <span class="op">{</span></span>
<span id="cb90-8"><a href="#cb90-8" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">メニュー:</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb90-9"><a href="#cb90-9" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;1. オプション1</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb90-10"><a href="#cb90-10" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;2. オプション2</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb90-11"><a href="#cb90-11" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;3. 終了</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb90-12"><a href="#cb90-12" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;選択してください: &quot;</span><span class="op">);</span></span>
<span id="cb90-13"><a href="#cb90-13" aria-hidden="true" tabindex="-1"></a>        scanf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">&amp;</span>choice<span class="op">);</span></span>
<span id="cb90-14"><a href="#cb90-14" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb90-15"><a href="#cb90-15" aria-hidden="true" tabindex="-1"></a>        <span class="cf">switch</span> <span class="op">(</span>choice<span class="op">)</span> <span class="op">{</span></span>
<span id="cb90-16"><a href="#cb90-16" aria-hidden="true" tabindex="-1"></a>            <span class="cf">case</span> <span class="dv">1</span><span class="op">:</span></span>
<span id="cb90-17"><a href="#cb90-17" aria-hidden="true" tabindex="-1"></a>                printf<span class="op">(</span><span class="st">&quot;オプション1が選択されました</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb90-18"><a href="#cb90-18" aria-hidden="true" tabindex="-1"></a>                <span class="cf">break</span><span class="op">;</span></span>
<span id="cb90-19"><a href="#cb90-19" aria-hidden="true" tabindex="-1"></a>            <span class="cf">case</span> <span class="dv">2</span><span class="op">:</span></span>
<span id="cb90-20"><a href="#cb90-20" aria-hidden="true" tabindex="-1"></a>                printf<span class="op">(</span><span class="st">&quot;オプション2が選択されました</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb90-21"><a href="#cb90-21" aria-hidden="true" tabindex="-1"></a>                <span class="cf">break</span><span class="op">;</span></span>
<span id="cb90-22"><a href="#cb90-22" aria-hidden="true" tabindex="-1"></a>            <span class="cf">case</span> <span class="dv">3</span><span class="op">:</span></span>
<span id="cb90-23"><a href="#cb90-23" aria-hidden="true" tabindex="-1"></a>                printf<span class="op">(</span><span class="st">&quot;プログラムを終了します</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb90-24"><a href="#cb90-24" aria-hidden="true" tabindex="-1"></a>                <span class="cf">break</span><span class="op">;</span></span>
<span id="cb90-25"><a href="#cb90-25" aria-hidden="true" tabindex="-1"></a>            <span class="cf">default</span><span class="op">:</span></span>
<span id="cb90-26"><a href="#cb90-26" aria-hidden="true" tabindex="-1"></a>                printf<span class="op">(</span><span class="st">&quot;無効な選択です</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb90-27"><a href="#cb90-27" aria-hidden="true" tabindex="-1"></a>                <span class="cf">break</span><span class="op">;</span></span>
<span id="cb90-28"><a href="#cb90-28" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb90-29"><a href="#cb90-29" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span> <span class="cf">while</span> <span class="op">(</span>choice <span class="op">!=</span> <span class="dv">3</span><span class="op">);</span></span>
<span id="cb90-30"><a href="#cb90-30" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb90-31"><a href="#cb90-31" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb90-32"><a href="#cb90-32" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 data-number="7.3.4" id="break文とcontinue文"><span
class="header-section-number">7.3.4</span> break文とcontinue文 ⏹️⏭️</h3>
<p>ループの流れを制御する特別な文です。</p>
<h4 data-number="7.3.4.1" id="break文"><span
class="header-section-number">7.3.4.1</span> break文</h4>
<p>ループを強制的に終了します。</p>
<div class="sourceCode" id="cb91"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb91-1"><a href="#cb91-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb91-2"><a href="#cb91-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb91-3"><a href="#cb91-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb91-4"><a href="#cb91-4" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb91-5"><a href="#cb91-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb91-6"><a href="#cb91-6" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb91-7"><a href="#cb91-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&lt;=</span> <span class="dv">10</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb91-8"><a href="#cb91-8" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>i <span class="op">==</span> <span class="dv">6</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb91-9"><a href="#cb91-9" aria-hidden="true" tabindex="-1"></a>            <span class="cf">break</span><span class="op">;</span>  <span class="co">/* i が 6 のときループを抜ける */</span></span>
<span id="cb91-10"><a href="#cb91-10" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb91-11"><a href="#cb91-11" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st"> &quot;</span><span class="op">,</span> i<span class="op">);</span></span>
<span id="cb91-12"><a href="#cb91-12" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb91-13"><a href="#cb91-13" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">ループを抜けました</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb91-14"><a href="#cb91-14" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb91-15"><a href="#cb91-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb91-16"><a href="#cb91-16" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb91-17"><a href="#cb91-17" aria-hidden="true" tabindex="-1"></a><span class="co">/* 出力: 1 2 3 4 5 */</span></span></code></pre></div>
<h4 data-number="7.3.4.2" id="continue文"><span
class="header-section-number">7.3.4.2</span> continue文</h4>
<p>現在の繰り返しをスキップして、次の繰り返しに進みます。</p>
<div class="sourceCode" id="cb92"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb92-1"><a href="#cb92-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb92-2"><a href="#cb92-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb92-3"><a href="#cb92-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb92-4"><a href="#cb92-4" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb92-5"><a href="#cb92-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb92-6"><a href="#cb92-6" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb92-7"><a href="#cb92-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&lt;=</span> <span class="dv">10</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb92-8"><a href="#cb92-8" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>i <span class="op">%</span> <span class="dv">2</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb92-9"><a href="#cb92-9" aria-hidden="true" tabindex="-1"></a>            <span class="cf">continue</span><span class="op">;</span>  <span class="co">/* 偶数の場合はスキップ */</span></span>
<span id="cb92-10"><a href="#cb92-10" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb92-11"><a href="#cb92-11" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st"> &quot;</span><span class="op">,</span> i<span class="op">);</span></span>
<span id="cb92-12"><a href="#cb92-12" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb92-13"><a href="#cb92-13" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb92-14"><a href="#cb92-14" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb92-15"><a href="#cb92-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb92-16"><a href="#cb92-16" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb92-17"><a href="#cb92-17" aria-hidden="true" tabindex="-1"></a><span class="co">/* 出力: 1 3 5 7 9 */</span></span></code></pre></div>
<h3 data-number="7.3.5" id="ネストしたループ"><span
class="header-section-number">7.3.5</span> ネストしたループ 🏗️</h3>
<p>ループの中にさらにループを含む構造です。</p>
<h4 data-number="7.3.5.1" id="二重ループの例"><span
class="header-section-number">7.3.5.1</span> 二重ループの例</h4>
<div class="sourceCode" id="cb93"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb93-1"><a href="#cb93-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb93-2"><a href="#cb93-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb93-3"><a href="#cb93-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb93-4"><a href="#cb93-4" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb93-5"><a href="#cb93-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">,</span> j<span class="op">;</span></span>
<span id="cb93-6"><a href="#cb93-6" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb93-7"><a href="#cb93-7" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 九九表の作成 */</span></span>
<span id="cb93-8"><a href="#cb93-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&lt;=</span> <span class="dv">9</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb93-9"><a href="#cb93-9" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span>j <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> j <span class="op">&lt;=</span> <span class="dv">9</span><span class="op">;</span> j<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb93-10"><a href="#cb93-10" aria-hidden="true" tabindex="-1"></a>            printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%2d</span><span class="st"> &quot;</span><span class="op">,</span> i <span class="op">*</span> j<span class="op">);</span></span>
<span id="cb93-11"><a href="#cb93-11" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb93-12"><a href="#cb93-12" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb93-13"><a href="#cb93-13" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb93-14"><a href="#cb93-14" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb93-15"><a href="#cb93-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb93-16"><a href="#cb93-16" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h4 data-number="7.3.5.2" id="三角形パターンの出力"><span
class="header-section-number">7.3.5.2</span> 三角形パターンの出力</h4>
<div class="sourceCode" id="cb94"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb94-1"><a href="#cb94-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb94-2"><a href="#cb94-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb94-3"><a href="#cb94-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb94-4"><a href="#cb94-4" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb94-5"><a href="#cb94-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">,</span> j<span class="op">;</span></span>
<span id="cb94-6"><a href="#cb94-6" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb94-7"><a href="#cb94-7" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 星印の三角形 */</span></span>
<span id="cb94-8"><a href="#cb94-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&lt;=</span> <span class="dv">5</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb94-9"><a href="#cb94-9" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span>j <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> j <span class="op">&lt;=</span> i<span class="op">;</span> j<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb94-10"><a href="#cb94-10" aria-hidden="true" tabindex="-1"></a>            printf<span class="op">(</span><span class="st">&quot;* &quot;</span><span class="op">);</span></span>
<span id="cb94-11"><a href="#cb94-11" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb94-12"><a href="#cb94-12" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb94-13"><a href="#cb94-13" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb94-14"><a href="#cb94-14" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb94-15"><a href="#cb94-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb94-16"><a href="#cb94-16" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb94-17"><a href="#cb94-17" aria-hidden="true" tabindex="-1"></a><span class="co">/*</span></span>
<span id="cb94-18"><a href="#cb94-18" aria-hidden="true" tabindex="-1"></a><span class="co">出力:</span></span>
<span id="cb94-19"><a href="#cb94-19" aria-hidden="true" tabindex="-1"></a><span class="co">* </span></span>
<span id="cb94-20"><a href="#cb94-20" aria-hidden="true" tabindex="-1"></a><span class="co">* * </span></span>
<span id="cb94-21"><a href="#cb94-21" aria-hidden="true" tabindex="-1"></a><span class="co">* * * </span></span>
<span id="cb94-22"><a href="#cb94-22" aria-hidden="true" tabindex="-1"></a><span class="co">* * * * </span></span>
<span id="cb94-23"><a href="#cb94-23" aria-hidden="true" tabindex="-1"></a><span class="co">* * * * * </span></span>
<span id="cb94-24"><a href="#cb94-24" aria-hidden="true" tabindex="-1"></a><span class="co">*/</span></span></code></pre></div>
<h3 data-number="7.3.6" id="ループでのbreakcontinueの応用"><span
class="header-section-number">7.3.6</span>
ループでのbreak・continueの応用 🎯</h3>
<h4 data-number="7.3.6.1" id="ネストしたループでのbreak"><span
class="header-section-number">7.3.6.1</span>
ネストしたループでのbreak</h4>
<div class="sourceCode" id="cb95"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb95-1"><a href="#cb95-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb95-2"><a href="#cb95-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb95-3"><a href="#cb95-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb95-4"><a href="#cb95-4" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb95-5"><a href="#cb95-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">,</span> j<span class="op">;</span></span>
<span id="cb95-6"><a href="#cb95-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> found <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb95-7"><a href="#cb95-7" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb95-8"><a href="#cb95-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&lt;=</span> <span class="dv">5</span> <span class="op">&amp;&amp;</span> <span class="op">!</span>found<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb95-9"><a href="#cb95-9" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span>j <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> j <span class="op">&lt;=</span> <span class="dv">5</span><span class="op">;</span> j<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb95-10"><a href="#cb95-10" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>i <span class="op">*</span> j <span class="op">==</span> <span class="dv">12</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb95-11"><a href="#cb95-11" aria-hidden="true" tabindex="-1"></a>                printf<span class="op">(</span><span class="st">&quot;発見: </span><span class="sc">%d</span><span class="st"> * </span><span class="sc">%d</span><span class="st"> = 12</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> i<span class="op">,</span> j<span class="op">);</span></span>
<span id="cb95-12"><a href="#cb95-12" aria-hidden="true" tabindex="-1"></a>                found <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb95-13"><a href="#cb95-13" aria-hidden="true" tabindex="-1"></a>                <span class="cf">break</span><span class="op">;</span>  <span class="co">/* 内側のループを抜ける */</span></span>
<span id="cb95-14"><a href="#cb95-14" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb95-15"><a href="#cb95-15" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb95-16"><a href="#cb95-16" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb95-17"><a href="#cb95-17" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb95-18"><a href="#cb95-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb95-19"><a href="#cb95-19" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h4 data-number="7.3.6.2" id="ラベル付きbreakgoto文を使用"><span
class="header-section-number">7.3.6.2</span>
ラベル付きbreak（goto文を使用）</h4>
<div class="sourceCode" id="cb96"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb96-1"><a href="#cb96-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb96-2"><a href="#cb96-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb96-3"><a href="#cb96-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb96-4"><a href="#cb96-4" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb96-5"><a href="#cb96-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">,</span> j<span class="op">;</span></span>
<span id="cb96-6"><a href="#cb96-6" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb96-7"><a href="#cb96-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&lt;=</span> <span class="dv">5</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb96-8"><a href="#cb96-8" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span>j <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> j <span class="op">&lt;=</span> <span class="dv">5</span><span class="op">;</span> j<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb96-9"><a href="#cb96-9" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>i <span class="op">*</span> j <span class="op">==</span> <span class="dv">12</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb96-10"><a href="#cb96-10" aria-hidden="true" tabindex="-1"></a>                printf<span class="op">(</span><span class="st">&quot;発見: </span><span class="sc">%d</span><span class="st"> * </span><span class="sc">%d</span><span class="st"> = 12</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> i<span class="op">,</span> j<span class="op">);</span></span>
<span id="cb96-11"><a href="#cb96-11" aria-hidden="true" tabindex="-1"></a>                <span class="cf">goto</span> exit_loops<span class="op">;</span>  <span class="co">/* 両方のループを抜ける */</span></span>
<span id="cb96-12"><a href="#cb96-12" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb96-13"><a href="#cb96-13" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb96-14"><a href="#cb96-14" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb96-15"><a href="#cb96-15" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb96-16"><a href="#cb96-16" aria-hidden="true" tabindex="-1"></a>exit_loops<span class="op">:</span></span>
<span id="cb96-17"><a href="#cb96-17" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ループ終了</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb96-18"><a href="#cb96-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb96-19"><a href="#cb96-19" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 data-number="7.3.7" id="無限ループ"><span
class="header-section-number">7.3.7</span> 無限ループ ♾️</h3>
<p>意図的に終了しないループを作成することもあります。</p>
<h4 data-number="7.3.7.1" id="無限ループの作成方法"><span
class="header-section-number">7.3.7.1</span> 無限ループの作成方法</h4>
<div class="sourceCode" id="cb97"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb97-1"><a href="#cb97-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* 方法1: for文 */</span></span>
<span id="cb97-2"><a href="#cb97-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> <span class="op">(;;)</span> <span class="op">{</span></span>
<span id="cb97-3"><a href="#cb97-3" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 無限ループ */</span></span>
<span id="cb97-4"><a href="#cb97-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>条件<span class="op">)</span> <span class="cf">break</span><span class="op">;</span></span>
<span id="cb97-5"><a href="#cb97-5" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb97-6"><a href="#cb97-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-7"><a href="#cb97-7" aria-hidden="true" tabindex="-1"></a><span class="co">/* 方法2: while文 */</span></span>
<span id="cb97-8"><a href="#cb97-8" aria-hidden="true" tabindex="-1"></a><span class="cf">while</span> <span class="op">(</span><span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb97-9"><a href="#cb97-9" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 無限ループ */</span></span>
<span id="cb97-10"><a href="#cb97-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>条件<span class="op">)</span> <span class="cf">break</span><span class="op">;</span></span>
<span id="cb97-11"><a href="#cb97-11" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb97-12"><a href="#cb97-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb97-13"><a href="#cb97-13" aria-hidden="true" tabindex="-1"></a><span class="co">/* 方法3: do-while文 */</span></span>
<span id="cb97-14"><a href="#cb97-14" aria-hidden="true" tabindex="-1"></a><span class="cf">do</span> <span class="op">{</span></span>
<span id="cb97-15"><a href="#cb97-15" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 無限ループ */</span></span>
<span id="cb97-16"><a href="#cb97-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>条件<span class="op">)</span> <span class="cf">break</span><span class="op">;</span></span>
<span id="cb97-17"><a href="#cb97-17" aria-hidden="true" tabindex="-1"></a><span class="op">}</span> <span class="cf">while</span> <span class="op">(</span><span class="dv">1</span><span class="op">);</span></span></code></pre></div>
<h4 data-number="7.3.7.2" id="無限ループの実用例"><span
class="header-section-number">7.3.7.2</span> 無限ループの実用例</h4>
<div class="sourceCode" id="cb98"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb98-1"><a href="#cb98-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb98-2"><a href="#cb98-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb98-3"><a href="#cb98-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb98-4"><a href="#cb98-4" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb98-5"><a href="#cb98-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> choice<span class="op">;</span></span>
<span id="cb98-6"><a href="#cb98-6" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb98-7"><a href="#cb98-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span><span class="dv">1</span><span class="op">)</span> <span class="op">{</span>  <span class="co">/* 無限ループ */</span></span>
<span id="cb98-8"><a href="#cb98-8" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">=== 計算機 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb98-9"><a href="#cb98-9" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;1. 足し算</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb98-10"><a href="#cb98-10" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;2. 引き算</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb98-11"><a href="#cb98-11" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;3. 終了</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb98-12"><a href="#cb98-12" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;選択: &quot;</span><span class="op">);</span></span>
<span id="cb98-13"><a href="#cb98-13" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb98-14"><a href="#cb98-14" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>scanf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">&amp;</span>choice<span class="op">)</span> <span class="op">!=</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb98-15"><a href="#cb98-15" aria-hidden="true" tabindex="-1"></a>            printf<span class="op">(</span><span class="st">&quot;入力エラー</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb98-16"><a href="#cb98-16" aria-hidden="true" tabindex="-1"></a>            <span class="cf">break</span><span class="op">;</span></span>
<span id="cb98-17"><a href="#cb98-17" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb98-18"><a href="#cb98-18" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb98-19"><a href="#cb98-19" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>choice <span class="op">==</span> <span class="dv">3</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb98-20"><a href="#cb98-20" aria-hidden="true" tabindex="-1"></a>            printf<span class="op">(</span><span class="st">&quot;終了します</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb98-21"><a href="#cb98-21" aria-hidden="true" tabindex="-1"></a>            <span class="cf">break</span><span class="op">;</span></span>
<span id="cb98-22"><a href="#cb98-22" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb98-23"><a href="#cb98-23" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb98-24"><a href="#cb98-24" aria-hidden="true" tabindex="-1"></a>        <span class="co">/* 計算処理... */</span></span>
<span id="cb98-25"><a href="#cb98-25" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb98-26"><a href="#cb98-26" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb98-27"><a href="#cb98-27" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb98-28"><a href="#cb98-28" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 data-number="7.3.8" id="ループの最適化とベストプラクティス"><span
class="header-section-number">7.3.8</span>
ループの最適化とベストプラクティス 💡</h3>
<h4 data-number="7.3.8.1" id="効率的なループ"><span
class="header-section-number">7.3.8.1</span> 効率的なループ</h4>
<div class="sourceCode" id="cb99"><pre class="sourceCode c"><code class="sourceCode c"><span id="cb99-1"><a href="#cb99-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* NG: 毎回strlen()を呼び出し */</span></span>
<span id="cb99-2"><a href="#cb99-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> strlen<span class="op">(</span>str<span class="op">);</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb99-3"><a href="#cb99-3" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 処理 */</span></span>
<span id="cb99-4"><a href="#cb99-4" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb99-5"><a href="#cb99-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb99-6"><a href="#cb99-6" aria-hidden="true" tabindex="-1"></a><span class="co">/* OK: 長さを事前に計算 */</span></span>
<span id="cb99-7"><a href="#cb99-7" aria-hidden="true" tabindex="-1"></a>len <span class="op">=</span> strlen<span class="op">(</span>str<span class="op">);</span></span>
<span id="cb99-8"><a href="#cb99-8" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> len<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb99-9"><a href="#cb99-9" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 処理 */</span></span>
<span id="cb99-10"><a href="#cb99-10" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h4 data-number="7.3.8.2" id="ループ変数の適切な使用"><span
class="header-section-number">7.3.8.2</span> ループ変数の適切な使用</h4>
<div class="sourceCode" id="cb100"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb100-1"><a href="#cb100-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb100-2"><a href="#cb100-2" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb100-3"><a href="#cb100-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span>  <span class="co">/* C90では関数の先頭で宣言 */</span></span>
<span id="cb100-4"><a href="#cb100-4" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb100-5"><a href="#cb100-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">10</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb100-6"><a href="#cb100-6" aria-hidden="true" tabindex="-1"></a>        <span class="co">/* iはループ外でも有効 */</span></span>
<span id="cb100-7"><a href="#cb100-7" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb100-8"><a href="#cb100-8" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb100-9"><a href="#cb100-9" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;最終的なi = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> i<span class="op">);</span>  <span class="co">/* 10が出力 */</span></span>
<span id="cb100-10"><a href="#cb100-10" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb100-11"><a href="#cb100-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb100-12"><a href="#cb100-12" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h2 data-number="7.4" id="サンプルコード-5"><span
class="header-section-number">7.4</span> サンプルコード</h2>
<h3 data-number="7.4.1" id="基本的なループ例"><span
class="header-section-number">7.4.1</span> 基本的なループ例</h3>
<p>プログラムファイル: <code>examples/loop_basic.c</code></p>
<p>for、while、do-while文の基本的な使用方法を学習します。</p>
<h3 data-number="7.4.2" id="ネストしたループ-1"><span
class="header-section-number">7.4.2</span> ネストしたループ</h3>
<p>プログラムファイル: <code>examples/nested_loops.c</code></p>
<p>二重・三重ループの使用例を学習します。</p>
<h3 data-number="7.4.3" id="breakcontinue文"><span
class="header-section-number">7.4.3</span> break・continue文</h3>
<p>プログラムファイル: <code>examples/break_continue.c</code></p>
<p>ループ制御文の使い方を学習します。</p>
<h3 data-number="7.4.4" id="コンパイルと実行-5"><span
class="header-section-number">7.4.4</span> コンパイルと実行</h3>
<div class="sourceCode" id="cb101"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb101-1"><a href="#cb101-1" aria-hidden="true" tabindex="-1"></a><span class="co"># examples ディレクトリに移動</span></span>
<span id="cb101-2"><a href="#cb101-2" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> examples</span>
<span id="cb101-3"><a href="#cb101-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb101-4"><a href="#cb101-4" aria-hidden="true" tabindex="-1"></a><span class="co"># C90準拠でコンパイル</span></span>
<span id="cb101-5"><a href="#cb101-5" aria-hidden="true" tabindex="-1"></a><span class="fu">gcc</span> <span class="at">-std</span><span class="op">=</span>c90 <span class="at">-Wall</span> <span class="at">-Wextra</span> <span class="at">-pedantic</span> loop_basic.c <span class="at">-o</span> loop_basic</span>
<span id="cb101-6"><a href="#cb101-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb101-7"><a href="#cb101-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 実行</span></span>
<span id="cb101-8"><a href="#cb101-8" aria-hidden="true" tabindex="-1"></a><span class="ex">./loop_basic</span></span></code></pre></div>
<h2 data-number="7.5" id="演習課題-5"><span
class="header-section-number">7.5</span> 演習課題</h2>
<h3 data-number="7.5.1" id="基礎問題-5"><span
class="header-section-number">7.5.1</span> 基礎問題</h3>
<ol type="1">
<li><strong>数列の出力</strong>
<ul>
<li>1から100までの数を出力するプログラムを3種類のループで作成してください</li>
</ul></li>
<li><strong>偶数・奇数の判定</strong>
<ul>
<li>1から20までの数で、偶数のみを出力するプログラムを作成してください</li>
</ul></li>
<li><strong>階乗の計算</strong>
<ul>
<li>入力された数の階乗を計算するプログラムを作成してください</li>
</ul></li>
</ol>
<h3 data-number="7.5.2" id="応用問題-5"><span
class="header-section-number">7.5.2</span> 応用問題</h3>
<ol type="1">
<li><strong>素数判定</strong>
<ul>
<li>入力された数が素数かどうかを判定するプログラムを作成してください</li>
</ul></li>
<li><strong>フィボナッチ数列</strong>
<ul>
<li>n項目までのフィボナッチ数列を出力するプログラムを作成してください</li>
</ul></li>
<li><strong>パターン出力</strong>
<ul>
<li>以下のようなパターンを出力するプログラムを作成してください：</li>
</ul>
<pre><code>*
**
***
****
*****
****
***
**
*</code></pre></li>
</ol>
<h3 data-number="7.5.3" id="発展問題"><span
class="header-section-number">7.5.3</span> 発展問題</h3>
<ol type="1">
<li><strong>成績管理システム</strong>
<ul>
<li>複数の学生の成績を入力し、平均・最高・最低点を計算するプログラム</li>
</ul></li>
<li><strong>簡易ゲーム</strong>
<ul>
<li>数当てゲームを作成してください（1-100の範囲で乱数を生成）</li>
</ul></li>
<li><strong>データ検索</strong>
<ul>
<li>配列の中から特定の値を検索するプログラムを作成してください</li>
</ul></li>
</ol>
<h2 data-number="7.6" id="コンパイル方法-5"><span
class="header-section-number">7.6</span> コンパイル方法</h2>
<p>この章では以下のMakefileを使用してコンパイルができます：</p>
<div class="sourceCode" id="cb103"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb103-1"><a href="#cb103-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 全ての例題をコンパイル</span></span>
<span id="cb103-2"><a href="#cb103-2" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> all</span>
<span id="cb103-3"><a href="#cb103-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb103-4"><a href="#cb103-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 特定のプログラムをコンパイル</span></span>
<span id="cb103-5"><a href="#cb103-5" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> loop_basic</span>
<span id="cb103-6"><a href="#cb103-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb103-7"><a href="#cb103-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 実行</span></span>
<span id="cb103-8"><a href="#cb103-8" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> run</span>
<span id="cb103-9"><a href="#cb103-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb103-10"><a href="#cb103-10" aria-hidden="true" tabindex="-1"></a><span class="co"># クリーンアップ</span></span>
<span id="cb103-11"><a href="#cb103-11" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> clean</span></code></pre></div>
<h2 data-number="7.7" id="規格による違い-5"><span
class="header-section-number">7.7</span> 規格による違い</h2>
<h3 data-number="7.7.1" id="c90での制限事項-4"><span
class="header-section-number">7.7.1</span> C90での制限事項</h3>
<ul>
<li>ループ変数は関数の先頭で宣言する必要がある</li>
<li>for文内での変数宣言は不可</li>
</ul>
<h3 data-number="7.7.2" id="c99以降の拡張-4"><span
class="header-section-number">7.7.2</span> C99以降の拡張</h3>
<ul>
<li><p>for文内での変数宣言が可能</p>
<div class="sourceCode" id="cb104"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb104-1"><a href="#cb104-1" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> <span class="op">(</span><span class="dt">int</span> i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">10</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span>  <span class="co">/* C99以降 */</span></span>
<span id="cb104-2"><a href="#cb104-2" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 処理 */</span></span>
<span id="cb104-3"><a href="#cb104-3" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div></li>
</ul>
<h2 data-number="7.8" id="よくある間違い-3"><span
class="header-section-number">7.8</span> 🚨 よくある間違い</h2>
<h3 data-number="7.8.1" id="無限ループの作成"><span
class="header-section-number">7.8.1</span> 1. 無限ループの作成</h3>
<div class="sourceCode" id="cb105"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb105-1"><a href="#cb105-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* NG: 終了条件の記述ミス */</span></span>
<span id="cb105-2"><a href="#cb105-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&gt;</span> <span class="dv">0</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span>  <span class="co">/* 最初から条件が偽 */</span></span>
<span id="cb105-3"><a href="#cb105-3" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 実行されない */</span></span>
<span id="cb105-4"><a href="#cb105-4" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb105-5"><a href="#cb105-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb105-6"><a href="#cb105-6" aria-hidden="true" tabindex="-1"></a><span class="co">/* NG: 更新式の記述ミス */</span></span>
<span id="cb105-7"><a href="#cb105-7" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">10</span><span class="op">;</span> i<span class="op">--)</span> <span class="op">{</span>  <span class="co">/* 負の方向に進む */</span></span>
<span id="cb105-8"><a href="#cb105-8" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 無限ループ */</span></span>
<span id="cb105-9"><a href="#cb105-9" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 data-number="7.8.2" id="セミコロンの位置-1"><span
class="header-section-number">7.8.2</span> 2. セミコロンの位置</h3>
<div class="sourceCode" id="cb106"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb106-1"><a href="#cb106-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* NG: for文の後にセミコロン */</span></span>
<span id="cb106-2"><a href="#cb106-2" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">10</span><span class="op">;</span> i<span class="op">++);</span>  <span class="co">/* 空文が実行される */</span></span>
<span id="cb106-3"><a href="#cb106-3" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb106-4"><a href="#cb106-4" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> i<span class="op">);</span>     <span class="co">/* ループ外で実行 */</span></span>
<span id="cb106-5"><a href="#cb106-5" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb106-6"><a href="#cb106-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb106-7"><a href="#cb106-7" aria-hidden="true" tabindex="-1"></a><span class="co">/* OK: 正しい記述 */</span></span>
<span id="cb106-8"><a href="#cb106-8" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">10</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb106-9"><a href="#cb106-9" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> i<span class="op">);</span></span>
<span id="cb106-10"><a href="#cb106-10" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 data-number="7.8.3" id="ループ変数の範囲外アクセス"><span
class="header-section-number">7.8.3</span> 3.
ループ変数の範囲外アクセス</h3>
<div class="sourceCode" id="cb107"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb107-1"><a href="#cb107-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* NG: 配列の範囲を超える */</span></span>
<span id="cb107-2"><a href="#cb107-2" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> arr<span class="op">[</span><span class="dv">10</span><span class="op">];</span></span>
<span id="cb107-3"><a href="#cb107-3" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;=</span> <span class="dv">10</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span>  <span class="co">/* i=10で範囲外 */</span></span>
<span id="cb107-4"><a href="#cb107-4" aria-hidden="true" tabindex="-1"></a>    arr<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> i<span class="op">;</span></span>
<span id="cb107-5"><a href="#cb107-5" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb107-6"><a href="#cb107-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb107-7"><a href="#cb107-7" aria-hidden="true" tabindex="-1"></a><span class="co">/* OK: 正しい範囲 */</span></span>
<span id="cb107-8"><a href="#cb107-8" aria-hidden="true" tabindex="-1"></a><span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">10</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb107-9"><a href="#cb107-9" aria-hidden="true" tabindex="-1"></a>    arr<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> i<span class="op">;</span></span>
<span id="cb107-10"><a href="#cb107-10" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h2 data-number="7.9" id="次の章へ-5"><span
class="header-section-number">7.9</span> 次の章へ</h2>
<h2 data-number="7.10" id="参考資料-5"><span
class="header-section-number">7.10</span> 参考資料</h2>
<ul>
<li><a
href="https://ja.cppreference.com/w/c/language/for">for文詳細</a></li>
<li><a
href="https://ja.cppreference.com/w/c/language/while">while文詳細</a></li>
<li><a
href="https://ja.cppreference.com/w/c/language/break">break・continue文</a></li>
</ul>
<h1 data-number="8" id="配列と文字列配列"><span
class="header-section-number">8</span> 配列と文字列配列</h1>
<h2 data-number="8.1" id="対応c規格-7"><span
class="header-section-number">8.1</span> 対応C規格</h2>
<ul>
<li><strong>主要対象:</strong> C90</li>
<li><strong>学習内容:</strong>
1次元配列、多次元配列、文字列配列、配列の初期化、配列とポインタの関係</li>
</ul>
<h2 data-number="8.2" id="学習目標-7"><span
class="header-section-number">8.2</span> 学習目標</h2>
<p>この章を完了すると、以下のことができるようになります：</p>
<ul>
<li>1次元配列の宣言・初期化・使用ができる</li>
<li>多次元配列を理解して活用できる</li>
<li>文字列配列の扱い方を完全に理解する</li>
<li>char配列とchar*配列の違いを把握する</li>
<li>配列を使った実践的なプログラムを作成できる</li>
</ul>
<h2 data-number="8.3" id="理論解説-6"><span
class="header-section-number">8.3</span> 理論解説</h2>
<h3 data-number="8.3.1" id="配列の基本概念"><span
class="header-section-number">8.3.1</span> 配列の基本概念 📊</h3>
<p>配列は同じデータ型の要素を連続したメモリ領域に格納するデータ構造です。</p>
<h4 data-number="8.3.1.1" id="次元配列の宣言"><span
class="header-section-number">8.3.1.1</span> 1次元配列の宣言</h4>
<div class="sourceCode" id="cb108"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb108-1"><a href="#cb108-1" aria-hidden="true" tabindex="-1"></a>データ型 配列名<span class="op">[</span>要素数<span class="op">];</span></span></code></pre></div>
<h4 data-number="8.3.1.2" id="基本的な配列の使用例"><span
class="header-section-number">8.3.1.2</span> 基本的な配列の使用例</h4>
<div class="sourceCode" id="cb109"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb109-1"><a href="#cb109-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb109-2"><a href="#cb109-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb109-3"><a href="#cb109-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb109-4"><a href="#cb109-4" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb109-5"><a href="#cb109-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> numbers<span class="op">[</span><span class="dv">5</span><span class="op">];</span>         <span class="co">/* 5個のint型要素を持つ配列 */</span></span>
<span id="cb109-6"><a href="#cb109-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb109-7"><a href="#cb109-7" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb109-8"><a href="#cb109-8" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 配列への値の代入 */</span></span>
<span id="cb109-9"><a href="#cb109-9" aria-hidden="true" tabindex="-1"></a>    numbers<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="dv">10</span><span class="op">;</span></span>
<span id="cb109-10"><a href="#cb109-10" aria-hidden="true" tabindex="-1"></a>    numbers<span class="op">[</span><span class="dv">1</span><span class="op">]</span> <span class="op">=</span> <span class="dv">20</span><span class="op">;</span></span>
<span id="cb109-11"><a href="#cb109-11" aria-hidden="true" tabindex="-1"></a>    numbers<span class="op">[</span><span class="dv">2</span><span class="op">]</span> <span class="op">=</span> <span class="dv">30</span><span class="op">;</span></span>
<span id="cb109-12"><a href="#cb109-12" aria-hidden="true" tabindex="-1"></a>    numbers<span class="op">[</span><span class="dv">3</span><span class="op">]</span> <span class="op">=</span> <span class="dv">40</span><span class="op">;</span></span>
<span id="cb109-13"><a href="#cb109-13" aria-hidden="true" tabindex="-1"></a>    numbers<span class="op">[</span><span class="dv">4</span><span class="op">]</span> <span class="op">=</span> <span class="dv">50</span><span class="op">;</span></span>
<span id="cb109-14"><a href="#cb109-14" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb109-15"><a href="#cb109-15" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 配列の値を出力 */</span></span>
<span id="cb109-16"><a href="#cb109-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">5</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb109-17"><a href="#cb109-17" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;numbers[</span><span class="sc">%d</span><span class="st">] = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> i<span class="op">,</span> numbers<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb109-18"><a href="#cb109-18" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb109-19"><a href="#cb109-19" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb109-20"><a href="#cb109-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb109-21"><a href="#cb109-21" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 data-number="8.3.2" id="配列の初期化"><span
class="header-section-number">8.3.2</span> 配列の初期化 🔰</h3>
<h4 data-number="8.3.2.1" id="宣言時の初期化"><span
class="header-section-number">8.3.2.1</span> 宣言時の初期化</h4>
<div class="sourceCode" id="cb110"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb110-1"><a href="#cb110-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* 方法1: 全要素を明示的に初期化 */</span></span>
<span id="cb110-2"><a href="#cb110-2" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> scores<span class="op">[</span><span class="dv">5</span><span class="op">]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">85</span><span class="op">,</span> <span class="dv">92</span><span class="op">,</span> <span class="dv">78</span><span class="op">,</span> <span class="dv">96</span><span class="op">,</span> <span class="dv">88</span><span class="op">};</span></span>
<span id="cb110-3"><a href="#cb110-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-4"><a href="#cb110-4" aria-hidden="true" tabindex="-1"></a><span class="co">/* 方法2: 部分的な初期化（残りは0で初期化） */</span></span>
<span id="cb110-5"><a href="#cb110-5" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> values<span class="op">[</span><span class="dv">10</span><span class="op">]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span><span class="op">};</span>  <span class="co">/* values[0]=1, values[1]=2, values[2]=3, 残りは0 */</span></span>
<span id="cb110-6"><a href="#cb110-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-7"><a href="#cb110-7" aria-hidden="true" tabindex="-1"></a><span class="co">/* 方法3: サイズを省略（要素数から自動決定） */</span></span>
<span id="cb110-8"><a href="#cb110-8" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> grades<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">95</span><span class="op">,</span> <span class="dv">87</span><span class="op">,</span> <span class="dv">92</span><span class="op">,</span> <span class="dv">76</span><span class="op">,</span> <span class="dv">84</span><span class="op">};</span>  <span class="co">/* サイズは5になる */</span></span>
<span id="cb110-9"><a href="#cb110-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb110-10"><a href="#cb110-10" aria-hidden="true" tabindex="-1"></a><span class="co">/* 方法4: 全要素を0で初期化 */</span></span>
<span id="cb110-11"><a href="#cb110-11" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> zeros<span class="op">[</span><span class="dv">100</span><span class="op">]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">0</span><span class="op">};</span>        <span class="co">/* 全要素が0 */</span></span></code></pre></div>
<h4 data-number="8.3.2.2" id="c90での初期化の制限"><span
class="header-section-number">8.3.2.2</span> C90での初期化の制限</h4>
<div class="sourceCode" id="cb111"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb111-1"><a href="#cb111-1" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb111-2"><a href="#cb111-2" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb111-3"><a href="#cb111-3" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> size <span class="op">=</span> <span class="dv">5</span><span class="op">;</span></span>
<span id="cb111-4"><a href="#cb111-4" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* int arr[size];  &lt;- C90では不可（Variable Length Array） */</span></span>
<span id="cb111-5"><a href="#cb111-5" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb111-6"><a href="#cb111-6" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* C90では定数でサイズを指定 */</span></span>
<span id="cb111-7"><a href="#cb111-7" aria-hidden="true" tabindex="-1"></a>    <span class="pp">#define ARRAY_SIZE </span><span class="dv">5</span></span>
<span id="cb111-8"><a href="#cb111-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> arr<span class="op">[</span>ARRAY_SIZE<span class="op">]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">5</span><span class="op">};</span></span>
<span id="cb111-9"><a href="#cb111-9" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb111-10"><a href="#cb111-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb111-11"><a href="#cb111-11" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 data-number="8.3.3" id="配列の操作"><span
class="header-section-number">8.3.3</span> 配列の操作 🔧</h3>
<h4 data-number="8.3.3.1" id="配列要素へのアクセス"><span
class="header-section-number">8.3.3.1</span> 配列要素へのアクセス</h4>
<div class="sourceCode" id="cb112"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb112-1"><a href="#cb112-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb112-2"><a href="#cb112-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb112-3"><a href="#cb112-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb112-4"><a href="#cb112-4" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb112-5"><a href="#cb112-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> data<span class="op">[</span><span class="dv">5</span><span class="op">]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">10</span><span class="op">,</span> <span class="dv">20</span><span class="op">,</span> <span class="dv">30</span><span class="op">,</span> <span class="dv">40</span><span class="op">,</span> <span class="dv">50</span><span class="op">};</span></span>
<span id="cb112-6"><a href="#cb112-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb112-7"><a href="#cb112-7" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb112-8"><a href="#cb112-8" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 読み取り */</span></span>
<span id="cb112-9"><a href="#cb112-9" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;3番目の要素: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> data<span class="op">[</span><span class="dv">2</span><span class="op">]);</span>  <span class="co">/* 30が出力 */</span></span>
<span id="cb112-10"><a href="#cb112-10" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb112-11"><a href="#cb112-11" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 書き込み */</span></span>
<span id="cb112-12"><a href="#cb112-12" aria-hidden="true" tabindex="-1"></a>    data<span class="op">[</span><span class="dv">1</span><span class="op">]</span> <span class="op">=</span> <span class="dv">25</span><span class="op">;</span></span>
<span id="cb112-13"><a href="#cb112-13" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb112-14"><a href="#cb112-14" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* ループでのアクセス */</span></span>
<span id="cb112-15"><a href="#cb112-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">5</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb112-16"><a href="#cb112-16" aria-hidden="true" tabindex="-1"></a>        data<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> data<span class="op">[</span>i<span class="op">]</span> <span class="op">*</span> <span class="dv">2</span><span class="op">;</span>  <span class="co">/* 各要素を2倍 */</span></span>
<span id="cb112-17"><a href="#cb112-17" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb112-18"><a href="#cb112-18" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb112-19"><a href="#cb112-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb112-20"><a href="#cb112-20" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h4 data-number="8.3.3.2" id="配列のサイズ計算"><span
class="header-section-number">8.3.3.2</span> 配列のサイズ計算</h4>
<div class="sourceCode" id="cb113"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb113-1"><a href="#cb113-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb113-2"><a href="#cb113-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb113-3"><a href="#cb113-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb113-4"><a href="#cb113-4" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb113-5"><a href="#cb113-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> numbers<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">5</span><span class="op">,</span> <span class="dv">6</span><span class="op">,</span> <span class="dv">7</span><span class="op">,</span> <span class="dv">8</span><span class="op">,</span> <span class="dv">9</span><span class="op">,</span> <span class="dv">10</span><span class="op">};</span></span>
<span id="cb113-6"><a href="#cb113-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> size<span class="op">;</span></span>
<span id="cb113-7"><a href="#cb113-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb113-8"><a href="#cb113-8" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb113-9"><a href="#cb113-9" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 配列のサイズを計算 */</span></span>
<span id="cb113-10"><a href="#cb113-10" aria-hidden="true" tabindex="-1"></a>    size <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>numbers<span class="op">)</span> <span class="op">/</span> <span class="kw">sizeof</span><span class="op">(</span>numbers<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb113-11"><a href="#cb113-11" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb113-12"><a href="#cb113-12" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;配列のサイズ: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> size<span class="op">);</span>  <span class="co">/* 10が出力 */</span></span>
<span id="cb113-13"><a href="#cb113-13" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb113-14"><a href="#cb113-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> size<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb113-15"><a href="#cb113-15" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st"> &quot;</span><span class="op">,</span> numbers<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb113-16"><a href="#cb113-16" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb113-17"><a href="#cb113-17" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb113-18"><a href="#cb113-18" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb113-19"><a href="#cb113-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb113-20"><a href="#cb113-20" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 data-number="8.3.4" id="文字配列文字列"><span
class="header-section-number">8.3.4</span> 文字配列（文字列） 📝</h3>
<h4 data-number="8.3.4.1" id="char配列による文字列"><span
class="header-section-number">8.3.4.1</span> char配列による文字列</h4>
<div class="sourceCode" id="cb114"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb114-1"><a href="#cb114-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb114-2"><a href="#cb114-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb114-3"><a href="#cb114-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb114-4"><a href="#cb114-4" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb114-5"><a href="#cb114-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> str1<span class="op">[</span><span class="dv">6</span><span class="op">]</span> <span class="op">=</span> <span class="op">{</span><span class="ch">&#39;H&#39;</span><span class="op">,</span> <span class="ch">&#39;e&#39;</span><span class="op">,</span> <span class="ch">&#39;l&#39;</span><span class="op">,</span> <span class="ch">&#39;l&#39;</span><span class="op">,</span> <span class="ch">&#39;o&#39;</span><span class="op">,</span> <span class="ch">&#39;</span><span class="sc">\0</span><span class="ch">&#39;</span><span class="op">};</span>  <span class="co">/* 明示的初期化 */</span></span>
<span id="cb114-6"><a href="#cb114-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> str2<span class="op">[</span><span class="dv">6</span><span class="op">]</span> <span class="op">=</span> <span class="st">&quot;Hello&quot;</span><span class="op">;</span>                           <span class="co">/* 文字列リテラル */</span></span>
<span id="cb114-7"><a href="#cb114-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> str3<span class="op">[]</span> <span class="op">=</span> <span class="st">&quot;Hello&quot;</span><span class="op">;</span>                            <span class="co">/* サイズ自動決定 */</span></span>
<span id="cb114-8"><a href="#cb114-8" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb114-9"><a href="#cb114-9" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;str1: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> str1<span class="op">);</span></span>
<span id="cb114-10"><a href="#cb114-10" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;str2: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> str2<span class="op">);</span></span>
<span id="cb114-11"><a href="#cb114-11" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;str3: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> str3<span class="op">);</span></span>
<span id="cb114-12"><a href="#cb114-12" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb114-13"><a href="#cb114-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb114-14"><a href="#cb114-14" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h4 data-number="8.3.4.2" id="文字配列の操作"><span
class="header-section-number">8.3.4.2</span> 文字配列の操作</h4>
<div class="sourceCode" id="cb115"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb115-1"><a href="#cb115-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb115-2"><a href="#cb115-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;string.h&gt;</span></span>
<span id="cb115-3"><a href="#cb115-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb115-4"><a href="#cb115-4" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb115-5"><a href="#cb115-5" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb115-6"><a href="#cb115-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> buffer<span class="op">[</span><span class="dv">100</span><span class="op">];</span></span>
<span id="cb115-7"><a href="#cb115-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> name<span class="op">[</span><span class="dv">50</span><span class="op">];</span></span>
<span id="cb115-8"><a href="#cb115-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb115-9"><a href="#cb115-9" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb115-10"><a href="#cb115-10" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 文字列のコピー */</span></span>
<span id="cb115-11"><a href="#cb115-11" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>buffer<span class="op">,</span> <span class="st">&quot;Hello, World!&quot;</span><span class="op">);</span></span>
<span id="cb115-12"><a href="#cb115-12" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;buffer: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> buffer<span class="op">);</span></span>
<span id="cb115-13"><a href="#cb115-13" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb115-14"><a href="#cb115-14" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 1文字ずつのアクセス */</span></span>
<span id="cb115-15"><a href="#cb115-15" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>name<span class="op">,</span> <span class="st">&quot;Alice&quot;</span><span class="op">);</span></span>
<span id="cb115-16"><a href="#cb115-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> name<span class="op">[</span>i<span class="op">]</span> <span class="op">!=</span> <span class="ch">&#39;</span><span class="sc">\0</span><span class="ch">&#39;</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb115-17"><a href="#cb115-17" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;name[</span><span class="sc">%d</span><span class="st">] = &#39;</span><span class="sc">%c</span><span class="st">&#39;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> i<span class="op">,</span> name<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb115-18"><a href="#cb115-18" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb115-19"><a href="#cb115-19" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb115-20"><a href="#cb115-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb115-21"><a href="#cb115-21" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 data-number="8.3.5" id="文字列配列の扱い"><span
class="header-section-number">8.3.5</span> 文字列配列の扱い 📚</h3>
<p>これがユーザーの重要な要望の一つです。</p>
<h4 data-number="8.3.5.1" id="方法1-2次元char配列"><span
class="header-section-number">8.3.5.1</span> 方法1: 2次元char配列</h4>
<div class="sourceCode" id="cb116"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb116-1"><a href="#cb116-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb116-2"><a href="#cb116-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;string.h&gt;</span></span>
<span id="cb116-3"><a href="#cb116-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb116-4"><a href="#cb116-4" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb116-5"><a href="#cb116-5" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb116-6"><a href="#cb116-6" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 各文字列の最大長を20文字とする5つの文字列 */</span></span>
<span id="cb116-7"><a href="#cb116-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> names<span class="op">[</span><span class="dv">5</span><span class="op">][</span><span class="dv">21</span><span class="op">];</span>  <span class="co">/* 20文字+null終端文字 */</span></span>
<span id="cb116-8"><a href="#cb116-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb116-9"><a href="#cb116-9" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb116-10"><a href="#cb116-10" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 文字列配列への代入 */</span></span>
<span id="cb116-11"><a href="#cb116-11" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>names<span class="op">[</span><span class="dv">0</span><span class="op">],</span> <span class="st">&quot;Alice&quot;</span><span class="op">);</span></span>
<span id="cb116-12"><a href="#cb116-12" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>names<span class="op">[</span><span class="dv">1</span><span class="op">],</span> <span class="st">&quot;Bob&quot;</span><span class="op">);</span></span>
<span id="cb116-13"><a href="#cb116-13" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>names<span class="op">[</span><span class="dv">2</span><span class="op">],</span> <span class="st">&quot;Charlie&quot;</span><span class="op">);</span></span>
<span id="cb116-14"><a href="#cb116-14" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>names<span class="op">[</span><span class="dv">3</span><span class="op">],</span> <span class="st">&quot;David&quot;</span><span class="op">);</span></span>
<span id="cb116-15"><a href="#cb116-15" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>names<span class="op">[</span><span class="dv">4</span><span class="op">],</span> <span class="st">&quot;Eve&quot;</span><span class="op">);</span></span>
<span id="cb116-16"><a href="#cb116-16" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb116-17"><a href="#cb116-17" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 文字列配列の表示 */</span></span>
<span id="cb116-18"><a href="#cb116-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">5</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb116-19"><a href="#cb116-19" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;names[</span><span class="sc">%d</span><span class="st">] = </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> i<span class="op">,</span> names<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb116-20"><a href="#cb116-20" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb116-21"><a href="#cb116-21" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb116-22"><a href="#cb116-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb116-23"><a href="#cb116-23" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h4 data-number="8.3.5.2" id="方法2-char配列文字列ポインタ配列"><span
class="header-section-number">8.3.5.2</span> 方法2:
char*配列（文字列ポインタ配列）</h4>
<div class="sourceCode" id="cb117"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb117-1"><a href="#cb117-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb117-2"><a href="#cb117-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb117-3"><a href="#cb117-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb117-4"><a href="#cb117-4" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb117-5"><a href="#cb117-5" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 文字列ポインタの配列 */</span></span>
<span id="cb117-6"><a href="#cb117-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> <span class="op">*</span>fruits<span class="op">[</span><span class="dv">4</span><span class="op">]</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb117-7"><a href="#cb117-7" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;Apple&quot;</span><span class="op">,</span></span>
<span id="cb117-8"><a href="#cb117-8" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;Banana&quot;</span><span class="op">,</span> </span>
<span id="cb117-9"><a href="#cb117-9" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;Cherry&quot;</span><span class="op">,</span></span>
<span id="cb117-10"><a href="#cb117-10" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;Date&quot;</span></span>
<span id="cb117-11"><a href="#cb117-11" aria-hidden="true" tabindex="-1"></a>    <span class="op">};</span></span>
<span id="cb117-12"><a href="#cb117-12" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb117-13"><a href="#cb117-13" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb117-14"><a href="#cb117-14" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 文字列ポインタ配列の表示 */</span></span>
<span id="cb117-15"><a href="#cb117-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">4</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb117-16"><a href="#cb117-16" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;fruits[</span><span class="sc">%d</span><span class="st">] = </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> i<span class="op">,</span> fruits<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb117-17"><a href="#cb117-17" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb117-18"><a href="#cb117-18" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb117-19"><a href="#cb117-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb117-20"><a href="#cb117-20" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h4 data-number="8.3.5.3" id="文字列配列の初期化パターン"><span
class="header-section-number">8.3.5.3</span>
文字列配列の初期化パターン</h4>
<div class="sourceCode" id="cb118"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb118-1"><a href="#cb118-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* パターン1: 2次元char配列の初期化 */</span></span>
<span id="cb118-2"><a href="#cb118-2" aria-hidden="true" tabindex="-1"></a><span class="dt">char</span> cities<span class="op">[</span><span class="dv">3</span><span class="op">][</span><span class="dv">10</span><span class="op">]</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb118-3"><a href="#cb118-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;Tokyo&quot;</span><span class="op">,</span></span>
<span id="cb118-4"><a href="#cb118-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;Osaka&quot;</span><span class="op">,</span> </span>
<span id="cb118-5"><a href="#cb118-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;Kyoto&quot;</span></span>
<span id="cb118-6"><a href="#cb118-6" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb118-7"><a href="#cb118-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-8"><a href="#cb118-8" aria-hidden="true" tabindex="-1"></a><span class="co">/* パターン2: char*配列の初期化 */</span></span>
<span id="cb118-9"><a href="#cb118-9" aria-hidden="true" tabindex="-1"></a><span class="dt">char</span> <span class="op">*</span>colors<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb118-10"><a href="#cb118-10" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;Red&quot;</span><span class="op">,</span></span>
<span id="cb118-11"><a href="#cb118-11" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;Green&quot;</span><span class="op">,</span></span>
<span id="cb118-12"><a href="#cb118-12" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;Blue&quot;</span><span class="op">,</span></span>
<span id="cb118-13"><a href="#cb118-13" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;Yellow&quot;</span></span>
<span id="cb118-14"><a href="#cb118-14" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb118-15"><a href="#cb118-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb118-16"><a href="#cb118-16" aria-hidden="true" tabindex="-1"></a><span class="co">/* パターン3: 混合初期化 */</span></span>
<span id="cb118-17"><a href="#cb118-17" aria-hidden="true" tabindex="-1"></a><span class="dt">char</span> languages<span class="op">[</span><span class="dv">4</span><span class="op">][</span><span class="dv">15</span><span class="op">]</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb118-18"><a href="#cb118-18" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span><span class="st">&quot;C&quot;</span><span class="op">},</span>           <span class="co">/* 明示的 */</span></span>
<span id="cb118-19"><a href="#cb118-19" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;Python&quot;</span><span class="op">,</span>        <span class="co">/* 文字列リテラル */</span></span>
<span id="cb118-20"><a href="#cb118-20" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span><span class="st">&quot;Java&quot;</span><span class="op">},</span>        <span class="co">/* 明示的 */</span></span>
<span id="cb118-21"><a href="#cb118-21" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;JavaScript&quot;</span>     <span class="co">/* 文字列リテラル */</span></span>
<span id="cb118-22"><a href="#cb118-22" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span></code></pre></div>
<h3 data-number="8.3.6" id="char配列-vs-char配列の違い"><span
class="header-section-number">8.3.6</span> char配列 vs char*配列の違い
🔍</h3>
<p>これは文字列配列を扱う上で重要な概念です。</p>
<h4 data-number="8.3.6.1" id="メモリ配置の違い"><span
class="header-section-number">8.3.6.1</span> メモリ配置の違い</h4>
<div class="sourceCode" id="cb119"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb119-1"><a href="#cb119-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb119-2"><a href="#cb119-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb119-3"><a href="#cb119-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb119-4"><a href="#cb119-4" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb119-5"><a href="#cb119-5" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 2次元char配列 */</span></span>
<span id="cb119-6"><a href="#cb119-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> matrix<span class="op">[</span><span class="dv">3</span><span class="op">][</span><span class="dv">10</span><span class="op">]</span> <span class="op">=</span> <span class="op">{</span><span class="st">&quot;ABC&quot;</span><span class="op">,</span> <span class="st">&quot;DEFGH&quot;</span><span class="op">,</span> <span class="st">&quot;I&quot;</span><span class="op">};</span></span>
<span id="cb119-7"><a href="#cb119-7" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb119-8"><a href="#cb119-8" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* char*配列 */</span></span>
<span id="cb119-9"><a href="#cb119-9" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> <span class="op">*</span>pointers<span class="op">[</span><span class="dv">3</span><span class="op">]</span> <span class="op">=</span> <span class="op">{</span><span class="st">&quot;ABC&quot;</span><span class="op">,</span> <span class="st">&quot;DEFGH&quot;</span><span class="op">,</span> <span class="st">&quot;I&quot;</span><span class="op">};</span></span>
<span id="cb119-10"><a href="#cb119-10" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb119-11"><a href="#cb119-11" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== 2次元char配列 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb119-12"><a href="#cb119-12" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;全体サイズ: </span><span class="sc">%lu</span><span class="st"> バイト</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="kw">sizeof</span><span class="op">(</span>matrix<span class="op">));</span>        <span class="co">/* 30バイト */</span></span>
<span id="cb119-13"><a href="#cb119-13" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;1行のサイズ: </span><span class="sc">%lu</span><span class="st"> バイト</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="kw">sizeof</span><span class="op">(</span>matrix<span class="op">[</span><span class="dv">0</span><span class="op">]));</span>    <span class="co">/* 10バイト */</span></span>
<span id="cb119-14"><a href="#cb119-14" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb119-15"><a href="#cb119-15" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">=== char*配列 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb119-16"><a href="#cb119-16" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;全体サイズ: </span><span class="sc">%lu</span><span class="st"> バイト</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="kw">sizeof</span><span class="op">(</span>pointers<span class="op">));</span>      <span class="co">/* 24バイト（8バイト×3） */</span></span>
<span id="cb119-17"><a href="#cb119-17" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;1要素のサイズ: </span><span class="sc">%lu</span><span class="st"> バイト</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="kw">sizeof</span><span class="op">(</span>pointers<span class="op">[</span><span class="dv">0</span><span class="op">]));</span> <span class="co">/* 8バイト（ポインタサイズ） */</span></span>
<span id="cb119-18"><a href="#cb119-18" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb119-19"><a href="#cb119-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb119-20"><a href="#cb119-20" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h4 data-number="8.3.6.2" id="変更可能性の違い"><span
class="header-section-number">8.3.6.2</span> 変更可能性の違い</h4>
<div class="sourceCode" id="cb120"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb120-1"><a href="#cb120-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb120-2"><a href="#cb120-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;string.h&gt;</span></span>
<span id="cb120-3"><a href="#cb120-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb120-4"><a href="#cb120-4" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb120-5"><a href="#cb120-5" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb120-6"><a href="#cb120-6" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 2次元char配列（変更可能） */</span></span>
<span id="cb120-7"><a href="#cb120-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> mutable_array<span class="op">[</span><span class="dv">3</span><span class="op">][</span><span class="dv">20</span><span class="op">]</span> <span class="op">=</span> <span class="op">{</span><span class="st">&quot;Hello&quot;</span><span class="op">,</span> <span class="st">&quot;World&quot;</span><span class="op">,</span> <span class="st">&quot;Test&quot;</span><span class="op">};</span></span>
<span id="cb120-8"><a href="#cb120-8" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb120-9"><a href="#cb120-9" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* char*配列（文字列リテラルは変更不可） */</span></span>
<span id="cb120-10"><a href="#cb120-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> <span class="op">*</span>immutable_array<span class="op">[</span><span class="dv">3</span><span class="op">]</span> <span class="op">=</span> <span class="op">{</span><span class="st">&quot;Hello&quot;</span><span class="op">,</span> <span class="st">&quot;World&quot;</span><span class="op">,</span> <span class="st">&quot;Test&quot;</span><span class="op">};</span></span>
<span id="cb120-11"><a href="#cb120-11" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb120-12"><a href="#cb120-12" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 配列の内容変更 */</span></span>
<span id="cb120-13"><a href="#cb120-13" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>mutable_array<span class="op">[</span><span class="dv">0</span><span class="op">],</span> <span class="st">&quot;Hi&quot;</span><span class="op">);</span>     <span class="co">/* OK: 内容変更可能 */</span></span>
<span id="cb120-14"><a href="#cb120-14" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* strcpy(immutable_array[0], &quot;Hi&quot;); &lt;- NG: 文字列リテラルは変更不可 */</span></span>
<span id="cb120-15"><a href="#cb120-15" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb120-16"><a href="#cb120-16" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* ポインタの変更 */</span></span>
<span id="cb120-17"><a href="#cb120-17" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* mutable_array[0] = &quot;New&quot;; &lt;- NG: 配列名は変更不可 */</span></span>
<span id="cb120-18"><a href="#cb120-18" aria-hidden="true" tabindex="-1"></a>    immutable_array<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="st">&quot;New&quot;</span><span class="op">;</span>         <span class="co">/* OK: ポインタ変更可能 */</span></span>
<span id="cb120-19"><a href="#cb120-19" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb120-20"><a href="#cb120-20" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;mutable_array[0]: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> mutable_array<span class="op">[</span><span class="dv">0</span><span class="op">]);</span>     <span class="co">/* &quot;Hi&quot; */</span></span>
<span id="cb120-21"><a href="#cb120-21" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;immutable_array[0]: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> immutable_array<span class="op">[</span><span class="dv">0</span><span class="op">]);</span> <span class="co">/* &quot;New&quot; */</span></span>
<span id="cb120-22"><a href="#cb120-22" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb120-23"><a href="#cb120-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb120-24"><a href="#cb120-24" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h4 data-number="8.3.6.3" id="用途に応じた使い分け"><span
class="header-section-number">8.3.6.3</span> 用途に応じた使い分け</h4>
<div class="sourceCode" id="cb121"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb121-1"><a href="#cb121-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* 固定文字列の配列（読み取り専用） - char*配列が適している */</span></span>
<span id="cb121-2"><a href="#cb121-2" aria-hidden="true" tabindex="-1"></a><span class="dt">char</span> <span class="op">*</span>error_messages<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb121-3"><a href="#cb121-3" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;Success&quot;</span><span class="op">,</span></span>
<span id="cb121-4"><a href="#cb121-4" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;File not found&quot;</span><span class="op">,</span></span>
<span id="cb121-5"><a href="#cb121-5" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;Permission denied&quot;</span><span class="op">,</span></span>
<span id="cb121-6"><a href="#cb121-6" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;Out of memory&quot;</span></span>
<span id="cb121-7"><a href="#cb121-7" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb121-8"><a href="#cb121-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb121-9"><a href="#cb121-9" aria-hidden="true" tabindex="-1"></a><span class="co">/* 動的に変更する文字列配列 - 2次元char配列が適している */</span></span>
<span id="cb121-10"><a href="#cb121-10" aria-hidden="true" tabindex="-1"></a><span class="dt">char</span> user_inputs<span class="op">[</span><span class="dv">10</span><span class="op">][</span><span class="dv">100</span><span class="op">];</span>  <span class="co">/* ユーザー入力を格納 */</span></span>
<span id="cb121-11"><a href="#cb121-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb121-12"><a href="#cb121-12" aria-hidden="true" tabindex="-1"></a><span class="co">/* 設定項目など（変更の可能性あり） - char*配列が適している */</span></span>
<span id="cb121-13"><a href="#cb121-13" aria-hidden="true" tabindex="-1"></a><span class="dt">char</span> <span class="op">*</span>config_items<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb121-14"><a href="#cb121-14" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;debug=on&quot;</span><span class="op">,</span></span>
<span id="cb121-15"><a href="#cb121-15" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;log_level=info&quot;</span><span class="op">,</span> </span>
<span id="cb121-16"><a href="#cb121-16" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;max_connections=100&quot;</span></span>
<span id="cb121-17"><a href="#cb121-17" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span></code></pre></div>
<h3 data-number="8.3.7" id="多次元配列"><span
class="header-section-number">8.3.7</span> 多次元配列 🏢</h3>
<h4 data-number="8.3.7.1" id="次元配列の基本"><span
class="header-section-number">8.3.7.1</span> 2次元配列の基本</h4>
<div class="sourceCode" id="cb122"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb122-1"><a href="#cb122-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb122-2"><a href="#cb122-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb122-3"><a href="#cb122-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb122-4"><a href="#cb122-4" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb122-5"><a href="#cb122-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> matrix<span class="op">[</span><span class="dv">3</span><span class="op">][</span><span class="dv">4</span><span class="op">]</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb122-6"><a href="#cb122-6" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span><span class="dv">1</span><span class="op">,</span>  <span class="dv">2</span><span class="op">,</span>  <span class="dv">3</span><span class="op">,</span>  <span class="dv">4</span><span class="op">},</span></span>
<span id="cb122-7"><a href="#cb122-7" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span><span class="dv">5</span><span class="op">,</span>  <span class="dv">6</span><span class="op">,</span>  <span class="dv">7</span><span class="op">,</span>  <span class="dv">8</span><span class="op">},</span></span>
<span id="cb122-8"><a href="#cb122-8" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span><span class="dv">9</span><span class="op">,</span> <span class="dv">10</span><span class="op">,</span> <span class="dv">11</span><span class="op">,</span> <span class="dv">12</span><span class="op">}</span></span>
<span id="cb122-9"><a href="#cb122-9" aria-hidden="true" tabindex="-1"></a>    <span class="op">};</span></span>
<span id="cb122-10"><a href="#cb122-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">,</span> j<span class="op">;</span></span>
<span id="cb122-11"><a href="#cb122-11" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb122-12"><a href="#cb122-12" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 2次元配列の表示 */</span></span>
<span id="cb122-13"><a href="#cb122-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">3</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb122-14"><a href="#cb122-14" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span>j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> j <span class="op">&lt;</span> <span class="dv">4</span><span class="op">;</span> j<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb122-15"><a href="#cb122-15" aria-hidden="true" tabindex="-1"></a>            printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%3d</span><span class="st"> &quot;</span><span class="op">,</span> matrix<span class="op">[</span>i<span class="op">][</span>j<span class="op">]);</span></span>
<span id="cb122-16"><a href="#cb122-16" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb122-17"><a href="#cb122-17" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb122-18"><a href="#cb122-18" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb122-19"><a href="#cb122-19" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb122-20"><a href="#cb122-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb122-21"><a href="#cb122-21" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h4 data-number="8.3.7.2" id="次元配列の例"><span
class="header-section-number">8.3.7.2</span> 3次元配列の例</h4>
<div class="sourceCode" id="cb123"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb123-1"><a href="#cb123-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb123-2"><a href="#cb123-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb123-3"><a href="#cb123-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb123-4"><a href="#cb123-4" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb123-5"><a href="#cb123-5" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 3次元配列: [2][3][4] */</span></span>
<span id="cb123-6"><a href="#cb123-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> cube<span class="op">[</span><span class="dv">2</span><span class="op">][</span><span class="dv">3</span><span class="op">][</span><span class="dv">4</span><span class="op">]</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb123-7"><a href="#cb123-7" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span></span>
<span id="cb123-8"><a href="#cb123-8" aria-hidden="true" tabindex="-1"></a>            <span class="op">{</span><span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">4</span><span class="op">},</span></span>
<span id="cb123-9"><a href="#cb123-9" aria-hidden="true" tabindex="-1"></a>            <span class="op">{</span><span class="dv">5</span><span class="op">,</span> <span class="dv">6</span><span class="op">,</span> <span class="dv">7</span><span class="op">,</span> <span class="dv">8</span><span class="op">},</span></span>
<span id="cb123-10"><a href="#cb123-10" aria-hidden="true" tabindex="-1"></a>            <span class="op">{</span><span class="dv">9</span><span class="op">,</span> <span class="dv">10</span><span class="op">,</span> <span class="dv">11</span><span class="op">,</span> <span class="dv">12</span><span class="op">}</span></span>
<span id="cb123-11"><a href="#cb123-11" aria-hidden="true" tabindex="-1"></a>        <span class="op">},</span></span>
<span id="cb123-12"><a href="#cb123-12" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span></span>
<span id="cb123-13"><a href="#cb123-13" aria-hidden="true" tabindex="-1"></a>            <span class="op">{</span><span class="dv">13</span><span class="op">,</span> <span class="dv">14</span><span class="op">,</span> <span class="dv">15</span><span class="op">,</span> <span class="dv">16</span><span class="op">},</span></span>
<span id="cb123-14"><a href="#cb123-14" aria-hidden="true" tabindex="-1"></a>            <span class="op">{</span><span class="dv">17</span><span class="op">,</span> <span class="dv">18</span><span class="op">,</span> <span class="dv">19</span><span class="op">,</span> <span class="dv">20</span><span class="op">},</span></span>
<span id="cb123-15"><a href="#cb123-15" aria-hidden="true" tabindex="-1"></a>            <span class="op">{</span><span class="dv">21</span><span class="op">,</span> <span class="dv">22</span><span class="op">,</span> <span class="dv">23</span><span class="op">,</span> <span class="dv">24</span><span class="op">}</span></span>
<span id="cb123-16"><a href="#cb123-16" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb123-17"><a href="#cb123-17" aria-hidden="true" tabindex="-1"></a>    <span class="op">};</span></span>
<span id="cb123-18"><a href="#cb123-18" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">,</span> j<span class="op">,</span> k<span class="op">;</span></span>
<span id="cb123-19"><a href="#cb123-19" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb123-20"><a href="#cb123-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">2</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb123-21"><a href="#cb123-21" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;=== Layer </span><span class="sc">%d</span><span class="st"> ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> i<span class="op">);</span></span>
<span id="cb123-22"><a href="#cb123-22" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span>j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> j <span class="op">&lt;</span> <span class="dv">3</span><span class="op">;</span> j<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb123-23"><a href="#cb123-23" aria-hidden="true" tabindex="-1"></a>            <span class="cf">for</span> <span class="op">(</span>k <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> k <span class="op">&lt;</span> <span class="dv">4</span><span class="op">;</span> k<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb123-24"><a href="#cb123-24" aria-hidden="true" tabindex="-1"></a>                printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%3d</span><span class="st"> &quot;</span><span class="op">,</span> cube<span class="op">[</span>i<span class="op">][</span>j<span class="op">][</span>k<span class="op">]);</span></span>
<span id="cb123-25"><a href="#cb123-25" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb123-26"><a href="#cb123-26" aria-hidden="true" tabindex="-1"></a>            printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb123-27"><a href="#cb123-27" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb123-28"><a href="#cb123-28" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb123-29"><a href="#cb123-29" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb123-30"><a href="#cb123-30" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb123-31"><a href="#cb123-31" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb123-32"><a href="#cb123-32" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 data-number="8.3.8" id="配列の実践的応用"><span
class="header-section-number">8.3.8</span> 配列の実践的応用 💡</h3>
<h4 data-number="8.3.8.1" id="成績管理システム"><span
class="header-section-number">8.3.8.1</span> 成績管理システム</h4>
<div class="sourceCode" id="cb124"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb124-1"><a href="#cb124-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb124-2"><a href="#cb124-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb124-3"><a href="#cb124-3" aria-hidden="true" tabindex="-1"></a><span class="pp">#define MAX_STUDENTS </span><span class="dv">5</span></span>
<span id="cb124-4"><a href="#cb124-4" aria-hidden="true" tabindex="-1"></a><span class="pp">#define MAX_SUBJECTS </span><span class="dv">3</span></span>
<span id="cb124-5"><a href="#cb124-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb124-6"><a href="#cb124-6" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb124-7"><a href="#cb124-7" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb124-8"><a href="#cb124-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> students<span class="op">[</span>MAX_STUDENTS<span class="op">][</span><span class="dv">20</span><span class="op">]</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb124-9"><a href="#cb124-9" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;Alice&quot;</span><span class="op">,</span> <span class="st">&quot;Bob&quot;</span><span class="op">,</span> <span class="st">&quot;Charlie&quot;</span><span class="op">,</span> <span class="st">&quot;David&quot;</span><span class="op">,</span> <span class="st">&quot;Eve&quot;</span></span>
<span id="cb124-10"><a href="#cb124-10" aria-hidden="true" tabindex="-1"></a>    <span class="op">};</span></span>
<span id="cb124-11"><a href="#cb124-11" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> subjects<span class="op">[</span>MAX_SUBJECTS<span class="op">][</span><span class="dv">15</span><span class="op">]</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb124-12"><a href="#cb124-12" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;Math&quot;</span><span class="op">,</span> <span class="st">&quot;English&quot;</span><span class="op">,</span> <span class="st">&quot;Science&quot;</span></span>
<span id="cb124-13"><a href="#cb124-13" aria-hidden="true" tabindex="-1"></a>    <span class="op">};</span></span>
<span id="cb124-14"><a href="#cb124-14" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> scores<span class="op">[</span>MAX_STUDENTS<span class="op">][</span>MAX_SUBJECTS<span class="op">]</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb124-15"><a href="#cb124-15" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span><span class="dv">85</span><span class="op">,</span> <span class="dv">92</span><span class="op">,</span> <span class="dv">78</span><span class="op">},</span>  <span class="co">/* Alice */</span></span>
<span id="cb124-16"><a href="#cb124-16" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span><span class="dv">76</span><span class="op">,</span> <span class="dv">88</span><span class="op">,</span> <span class="dv">84</span><span class="op">},</span>  <span class="co">/* Bob */</span></span>
<span id="cb124-17"><a href="#cb124-17" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span><span class="dv">94</span><span class="op">,</span> <span class="dv">79</span><span class="op">,</span> <span class="dv">91</span><span class="op">},</span>  <span class="co">/* Charlie */</span></span>
<span id="cb124-18"><a href="#cb124-18" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span><span class="dv">82</span><span class="op">,</span> <span class="dv">95</span><span class="op">,</span> <span class="dv">87</span><span class="op">},</span>  <span class="co">/* David */</span></span>
<span id="cb124-19"><a href="#cb124-19" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span><span class="dv">89</span><span class="op">,</span> <span class="dv">83</span><span class="op">,</span> <span class="dv">93</span><span class="op">}</span>   <span class="co">/* Eve */</span></span>
<span id="cb124-20"><a href="#cb124-20" aria-hidden="true" tabindex="-1"></a>    <span class="op">};</span></span>
<span id="cb124-21"><a href="#cb124-21" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">,</span> j<span class="op">;</span></span>
<span id="cb124-22"><a href="#cb124-22" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> total<span class="op">;</span></span>
<span id="cb124-23"><a href="#cb124-23" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb124-24"><a href="#cb124-24" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 成績表の表示 */</span></span>
<span id="cb124-25"><a href="#cb124-25" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;Student    &quot;</span><span class="op">);</span></span>
<span id="cb124-26"><a href="#cb124-26" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> j <span class="op">&lt;</span> MAX_SUBJECTS<span class="op">;</span> j<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb124-27"><a href="#cb124-27" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%-10s</span><span class="st">&quot;</span><span class="op">,</span> subjects<span class="op">[</span>j<span class="op">]);</span></span>
<span id="cb124-28"><a href="#cb124-28" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb124-29"><a href="#cb124-29" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;Average</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb124-30"><a href="#cb124-30" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;----------------------------------------</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb124-31"><a href="#cb124-31" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb124-32"><a href="#cb124-32" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> MAX_STUDENTS<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb124-33"><a href="#cb124-33" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%-10s</span><span class="st"> &quot;</span><span class="op">,</span> students<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb124-34"><a href="#cb124-34" aria-hidden="true" tabindex="-1"></a>        total <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb124-35"><a href="#cb124-35" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span>j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> j <span class="op">&lt;</span> MAX_SUBJECTS<span class="op">;</span> j<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb124-36"><a href="#cb124-36" aria-hidden="true" tabindex="-1"></a>            printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%-10d</span><span class="st">&quot;</span><span class="op">,</span> scores<span class="op">[</span>i<span class="op">][</span>j<span class="op">]);</span></span>
<span id="cb124-37"><a href="#cb124-37" aria-hidden="true" tabindex="-1"></a>            total <span class="op">+=</span> scores<span class="op">[</span>i<span class="op">][</span>j<span class="op">];</span></span>
<span id="cb124-38"><a href="#cb124-38" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb124-39"><a href="#cb124-39" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%.1f\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(</span><span class="dt">double</span><span class="op">)</span>total <span class="op">/</span> MAX_SUBJECTS<span class="op">);</span></span>
<span id="cb124-40"><a href="#cb124-40" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb124-41"><a href="#cb124-41" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb124-42"><a href="#cb124-42" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb124-43"><a href="#cb124-43" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h4 data-number="8.3.8.2" id="文字列配列のソート"><span
class="header-section-number">8.3.8.2</span> 文字列配列のソート</h4>
<div class="sourceCode" id="cb125"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb125-1"><a href="#cb125-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb125-2"><a href="#cb125-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;string.h&gt;</span></span>
<span id="cb125-3"><a href="#cb125-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb125-4"><a href="#cb125-4" aria-hidden="true" tabindex="-1"></a><span class="pp">#define MAX_NAMES </span><span class="dv">5</span></span>
<span id="cb125-5"><a href="#cb125-5" aria-hidden="true" tabindex="-1"></a><span class="pp">#define MAX_LENGTH </span><span class="dv">20</span></span>
<span id="cb125-6"><a href="#cb125-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb125-7"><a href="#cb125-7" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb125-8"><a href="#cb125-8" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb125-9"><a href="#cb125-9" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> names<span class="op">[</span>MAX_NAMES<span class="op">][</span>MAX_LENGTH<span class="op">]</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb125-10"><a href="#cb125-10" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;Charlie&quot;</span><span class="op">,</span> <span class="st">&quot;Alice&quot;</span><span class="op">,</span> <span class="st">&quot;Eve&quot;</span><span class="op">,</span> <span class="st">&quot;Bob&quot;</span><span class="op">,</span> <span class="st">&quot;David&quot;</span></span>
<span id="cb125-11"><a href="#cb125-11" aria-hidden="true" tabindex="-1"></a>    <span class="op">};</span></span>
<span id="cb125-12"><a href="#cb125-12" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> temp<span class="op">[</span>MAX_LENGTH<span class="op">];</span></span>
<span id="cb125-13"><a href="#cb125-13" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">,</span> j<span class="op">;</span></span>
<span id="cb125-14"><a href="#cb125-14" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb125-15"><a href="#cb125-15" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ソート前:</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb125-16"><a href="#cb125-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> MAX_NAMES<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb125-17"><a href="#cb125-17" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%s</span><span class="st"> &quot;</span><span class="op">,</span> names<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb125-18"><a href="#cb125-18" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb125-19"><a href="#cb125-19" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb125-20"><a href="#cb125-20" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb125-21"><a href="#cb125-21" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* バブルソート */</span></span>
<span id="cb125-22"><a href="#cb125-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> MAX_NAMES <span class="op">-</span> <span class="dv">1</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb125-23"><a href="#cb125-23" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span>j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> j <span class="op">&lt;</span> MAX_NAMES <span class="op">-</span> <span class="dv">1</span> <span class="op">-</span> i<span class="op">;</span> j<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb125-24"><a href="#cb125-24" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>strcmp<span class="op">(</span>names<span class="op">[</span>j<span class="op">],</span> names<span class="op">[</span>j <span class="op">+</span> <span class="dv">1</span><span class="op">])</span> <span class="op">&gt;</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb125-25"><a href="#cb125-25" aria-hidden="true" tabindex="-1"></a>                strcpy<span class="op">(</span>temp<span class="op">,</span> names<span class="op">[</span>j<span class="op">]);</span></span>
<span id="cb125-26"><a href="#cb125-26" aria-hidden="true" tabindex="-1"></a>                strcpy<span class="op">(</span>names<span class="op">[</span>j<span class="op">],</span> names<span class="op">[</span>j <span class="op">+</span> <span class="dv">1</span><span class="op">]);</span></span>
<span id="cb125-27"><a href="#cb125-27" aria-hidden="true" tabindex="-1"></a>                strcpy<span class="op">(</span>names<span class="op">[</span>j <span class="op">+</span> <span class="dv">1</span><span class="op">],</span> temp<span class="op">);</span></span>
<span id="cb125-28"><a href="#cb125-28" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb125-29"><a href="#cb125-29" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb125-30"><a href="#cb125-30" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb125-31"><a href="#cb125-31" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb125-32"><a href="#cb125-32" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ソート後:</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb125-33"><a href="#cb125-33" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> MAX_NAMES<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb125-34"><a href="#cb125-34" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%s</span><span class="st"> &quot;</span><span class="op">,</span> names<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb125-35"><a href="#cb125-35" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb125-36"><a href="#cb125-36" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb125-37"><a href="#cb125-37" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb125-38"><a href="#cb125-38" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb125-39"><a href="#cb125-39" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 data-number="8.3.9" id="配列とポインタの関係"><span
class="header-section-number">8.3.9</span> 配列とポインタの関係 🔗</h3>
<p>配列名はその先頭要素へのポインタとして動作します。</p>
<div class="sourceCode" id="cb126"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb126-1"><a href="#cb126-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb126-2"><a href="#cb126-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb126-3"><a href="#cb126-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb126-4"><a href="#cb126-4" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb126-5"><a href="#cb126-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> arr<span class="op">[</span><span class="dv">5</span><span class="op">]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">10</span><span class="op">,</span> <span class="dv">20</span><span class="op">,</span> <span class="dv">30</span><span class="op">,</span> <span class="dv">40</span><span class="op">,</span> <span class="dv">50</span><span class="op">};</span></span>
<span id="cb126-6"><a href="#cb126-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> <span class="op">*</span>ptr<span class="op">;</span></span>
<span id="cb126-7"><a href="#cb126-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb126-8"><a href="#cb126-8" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb126-9"><a href="#cb126-9" aria-hidden="true" tabindex="-1"></a>    ptr <span class="op">=</span> arr<span class="op">;</span>  <span class="co">/* arr は &amp;arr[0] と同じ */</span></span>
<span id="cb126-10"><a href="#cb126-10" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb126-11"><a href="#cb126-11" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== 配列表記 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb126-12"><a href="#cb126-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">5</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb126-13"><a href="#cb126-13" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;arr[</span><span class="sc">%d</span><span class="st">] = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> i<span class="op">,</span> arr<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb126-14"><a href="#cb126-14" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb126-15"><a href="#cb126-15" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb126-16"><a href="#cb126-16" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">=== ポインタ表記 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb126-17"><a href="#cb126-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">5</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb126-18"><a href="#cb126-18" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;*(ptr + </span><span class="sc">%d</span><span class="st">) = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> i<span class="op">,</span> <span class="op">*(</span>ptr <span class="op">+</span> i<span class="op">));</span></span>
<span id="cb126-19"><a href="#cb126-19" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb126-20"><a href="#cb126-20" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb126-21"><a href="#cb126-21" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 配列名とポインタの関係 */</span></span>
<span id="cb126-22"><a href="#cb126-22" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">=== アドレス比較 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb126-23"><a href="#cb126-23" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;arr = </span><span class="sc">%p\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(</span><span class="dt">void</span><span class="op">*)</span>arr<span class="op">);</span></span>
<span id="cb126-24"><a href="#cb126-24" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;&amp;arr[0] = </span><span class="sc">%p\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(</span><span class="dt">void</span><span class="op">*)&amp;</span>arr<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb126-25"><a href="#cb126-25" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ptr = </span><span class="sc">%p\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(</span><span class="dt">void</span><span class="op">*)</span>ptr<span class="op">);</span></span>
<span id="cb126-26"><a href="#cb126-26" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb126-27"><a href="#cb126-27" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb126-28"><a href="#cb126-28" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h2 data-number="8.4" id="サンプルコード-6"><span
class="header-section-number">8.4</span> サンプルコード</h2>
<h3 data-number="8.4.1" id="基本的な配列操作"><span
class="header-section-number">8.4.1</span> 基本的な配列操作</h3>
<p>プログラムファイル: <code>examples/array_basic.c</code></p>
<p>1次元配列の宣言、初期化、操作を学習します。</p>
<h3 data-number="8.4.2" id="文字列配列の実例"><span
class="header-section-number">8.4.2</span> 文字列配列の実例</h3>
<p>プログラムファイル: <code>examples/string_arrays.c</code></p>
<p>char配列とchar*配列の違いと使い分けを学習します。</p>
<h3 data-number="8.4.3" id="多次元配列の活用"><span
class="header-section-number">8.4.3</span> 多次元配列の活用</h3>
<p>プログラムファイル: <code>examples/multidimensional.c</code></p>
<p>2次元・3次元配列の実践的な使用方法を学習します。</p>
<h3 data-number="8.4.4" id="コンパイルと実行-6"><span
class="header-section-number">8.4.4</span> コンパイルと実行</h3>
<div class="sourceCode" id="cb127"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb127-1"><a href="#cb127-1" aria-hidden="true" tabindex="-1"></a><span class="co"># examples ディレクトリに移動</span></span>
<span id="cb127-2"><a href="#cb127-2" aria-hidden="true" tabindex="-1"></a><span class="ex">ncd</span> examples</span>
<span id="cb127-3"><a href="#cb127-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb127-4"><a href="#cb127-4" aria-hidden="true" tabindex="-1"></a><span class="co"># C90準拠でコンパイル</span></span>
<span id="cb127-5"><a href="#cb127-5" aria-hidden="true" tabindex="-1"></a><span class="fu">gcc</span> <span class="at">-std</span><span class="op">=</span>c90 <span class="at">-Wall</span> <span class="at">-Wextra</span> <span class="at">-pedantic</span> array_basic.c <span class="at">-o</span> array_basic</span>
<span id="cb127-6"><a href="#cb127-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb127-7"><a href="#cb127-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 実行</span></span>
<span id="cb127-8"><a href="#cb127-8" aria-hidden="true" tabindex="-1"></a><span class="ex">./array_basic</span></span></code></pre></div>
<h2 data-number="8.5" id="演習課題-6"><span
class="header-section-number">8.5</span> 演習課題</h2>
<h3 data-number="8.5.1" id="基礎問題-6"><span
class="header-section-number">8.5.1</span> 基礎問題</h3>
<ol type="1">
<li><strong>配列の基本操作</strong>
<ul>
<li>10個の整数を格納する配列を作成し、総和と平均を計算してください</li>
</ul></li>
<li><strong>文字列配列の作成</strong>
<ul>
<li>5つの都市名を格納する文字列配列を2通りの方法で作成してください</li>
</ul></li>
<li><strong>配列の検索</strong>
<ul>
<li>整数配列から特定の値を検索するプログラムを作成してください</li>
</ul></li>
</ol>
<h3 data-number="8.5.2" id="応用問題-6"><span
class="header-section-number">8.5.2</span> 応用問題</h3>
<ol type="1">
<li><strong>成績管理</strong>
<ul>
<li>学生名と各科目の成績を管理するプログラムを作成してください</li>
</ul></li>
<li><strong>文字列配列のソート</strong>
<ul>
<li>文字列配列をアルファベット順にソートするプログラムを作成してください</li>
</ul></li>
<li><strong>行列の計算</strong>
<ul>
<li>2つの2次元配列の加算・乗算を行うプログラムを作成してください</li>
</ul></li>
</ol>
<h3 data-number="8.5.3" id="発展問題-1"><span
class="header-section-number">8.5.3</span> 発展問題</h3>
<ol type="1">
<li><strong>動的メニューシステム</strong>
<ul>
<li>文字列配列を使った選択式メニューシステムを作成してください</li>
</ul></li>
<li><strong>簡易データベース</strong>
<ul>
<li>学生情報（名前、年齢、成績）を管理するシステムを配列で実装してください</li>
</ul></li>
<li><strong>パスワード管理</strong>
<ul>
<li>複数のパスワードを管理し、強度チェック機能付きのプログラムを作成してください</li>
</ul></li>
</ol>
<h2 data-number="8.6" id="コンパイル方法-6"><span
class="header-section-number">8.6</span> コンパイル方法</h2>
<p>この章では以下のMakefileを使用してコンパイルができます：</p>
<div class="sourceCode" id="cb128"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb128-1"><a href="#cb128-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 全ての例題をコンパイル</span></span>
<span id="cb128-2"><a href="#cb128-2" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> all</span>
<span id="cb128-3"><a href="#cb128-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb128-4"><a href="#cb128-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 特定のプログラムをコンパイル</span></span>
<span id="cb128-5"><a href="#cb128-5" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> array_basic</span>
<span id="cb128-6"><a href="#cb128-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb128-7"><a href="#cb128-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 実行</span></span>
<span id="cb128-8"><a href="#cb128-8" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> run</span>
<span id="cb128-9"><a href="#cb128-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb128-10"><a href="#cb128-10" aria-hidden="true" tabindex="-1"></a><span class="co"># クリーンアップ</span></span>
<span id="cb128-11"><a href="#cb128-11" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> clean</span></code></pre></div>
<h2 data-number="8.7" id="規格による違い-6"><span
class="header-section-number">8.7</span> 規格による違い</h2>
<h3 data-number="8.7.1" id="c90での制限事項-5"><span
class="header-section-number">8.7.1</span> C90での制限事項</h3>
<ul>
<li>可変長配列（VLA）は使用できない</li>
<li>配列サイズは定数で指定する必要がある</li>
<li>配列の初期化は宣言時のみ</li>
</ul>
<h3 data-number="8.7.2" id="c99以降の拡張-5"><span
class="header-section-number">8.7.2</span> C99以降の拡張</h3>
<ul>
<li>可変長配列（VLA）の追加</li>
<li>複合リテラルによる配列初期化</li>
<li>指定初期化子（designated initializers）</li>
</ul>
<h2 data-number="8.8" id="よくある間違い-4"><span
class="header-section-number">8.8</span> 🚨 よくある間違い</h2>
<h3 data-number="8.8.1" id="配列の境界外アクセス"><span
class="header-section-number">8.8.1</span> 1. 配列の境界外アクセス</h3>
<div class="sourceCode" id="cb129"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb129-1"><a href="#cb129-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* NG: 配列の範囲を超える */</span></span>
<span id="cb129-2"><a href="#cb129-2" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> arr<span class="op">[</span><span class="dv">5</span><span class="op">]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">5</span><span class="op">};</span></span>
<span id="cb129-3"><a href="#cb129-3" aria-hidden="true" tabindex="-1"></a>printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> arr<span class="op">[</span><span class="dv">5</span><span class="op">]);</span>  <span class="co">/* 範囲外アクセス */</span></span>
<span id="cb129-4"><a href="#cb129-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb129-5"><a href="#cb129-5" aria-hidden="true" tabindex="-1"></a><span class="co">/* OK: 正しい範囲でアクセス */</span></span>
<span id="cb129-6"><a href="#cb129-6" aria-hidden="true" tabindex="-1"></a>printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> arr<span class="op">[</span><span class="dv">4</span><span class="op">]);</span>  <span class="co">/* 最後の要素 */</span></span></code></pre></div>
<h3 data-number="8.8.2" id="文字列配列の初期化忘れ"><span
class="header-section-number">8.8.2</span> 2.
文字列配列の初期化忘れ</h3>
<div class="sourceCode" id="cb130"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb130-1"><a href="#cb130-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* NG: 初期化されていない文字配列 */</span></span>
<span id="cb130-2"><a href="#cb130-2" aria-hidden="true" tabindex="-1"></a><span class="dt">char</span> str<span class="op">[</span><span class="dv">10</span><span class="op">];</span></span>
<span id="cb130-3"><a href="#cb130-3" aria-hidden="true" tabindex="-1"></a>printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> str<span class="op">);</span>     <span class="co">/* 未定義動作 */</span></span>
<span id="cb130-4"><a href="#cb130-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb130-5"><a href="#cb130-5" aria-hidden="true" tabindex="-1"></a><span class="co">/* OK: 適切な初期化 */</span></span>
<span id="cb130-6"><a href="#cb130-6" aria-hidden="true" tabindex="-1"></a><span class="dt">char</span> str<span class="op">[</span><span class="dv">10</span><span class="op">]</span> <span class="op">=</span> <span class="st">&quot;&quot;</span><span class="op">;</span>       <span class="co">/* 空文字列で初期化 */</span></span>
<span id="cb130-7"><a href="#cb130-7" aria-hidden="true" tabindex="-1"></a>strcpy<span class="op">(</span>str<span class="op">,</span> <span class="st">&quot;Hello&quot;</span><span class="op">);</span>    <span class="co">/* 後から代入 */</span></span></code></pre></div>
<h3 data-number="8.8.3" id="配列代入の間違い"><span
class="header-section-number">8.8.3</span> 3. 配列代入の間違い</h3>
<div class="sourceCode" id="cb131"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb131-1"><a href="#cb131-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* NG: 配列は直接代入できない */</span></span>
<span id="cb131-2"><a href="#cb131-2" aria-hidden="true" tabindex="-1"></a><span class="dt">char</span> str1<span class="op">[</span><span class="dv">10</span><span class="op">],</span> str2<span class="op">[</span><span class="dv">10</span><span class="op">]</span> <span class="op">=</span> <span class="st">&quot;Hello&quot;</span><span class="op">;</span></span>
<span id="cb131-3"><a href="#cb131-3" aria-hidden="true" tabindex="-1"></a>str1 <span class="op">=</span> str2<span class="op">;</span>             <span class="co">/* エラー */</span></span>
<span id="cb131-4"><a href="#cb131-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb131-5"><a href="#cb131-5" aria-hidden="true" tabindex="-1"></a><span class="co">/* OK: strcpyを使用 */</span></span>
<span id="cb131-6"><a href="#cb131-6" aria-hidden="true" tabindex="-1"></a>strcpy<span class="op">(</span>str1<span class="op">,</span> str2<span class="op">);</span>      <span class="co">/* 正しい文字列コピー */</span></span></code></pre></div>
<h2 data-number="8.9" id="次の章へ-6"><span
class="header-section-number">8.9</span> 次の章へ</h2>
<h2 data-number="8.10" id="参考資料-6"><span
class="header-section-number">8.10</span> 参考資料</h2>
<ul>
<li><a
href="https://ja.cppreference.com/w/c/language/array">C言語配列リファレンス</a></li>
<li><a
href="https://ja.cppreference.com/w/c/string/byte">文字列操作関数</a></li>
<li><a
href="https://ja.cppreference.com/w/c/language/array">多次元配列の詳細</a></li>
</ul>
<h1 data-number="9" id="文字列処理と文字列配列"><span
class="header-section-number">9</span> 📚 文字列処理と文字列配列</h1>
<h2 data-number="9.1" id="対応c規格-8"><span
class="header-section-number">9.1</span> 対応C規格</h2>
<ul>
<li><strong>主要対象:</strong> C90</li>
<li><strong>学習内容:</strong>
文字列の基本、文字列操作関数、文字列配列の詳細操作、文字列の比較・検索・変換</li>
</ul>
<h2 data-number="9.2" id="学習目標-8"><span
class="header-section-number">9.2</span> 学習目標</h2>
<p>この章を完了すると、以下のことができるようになります：</p>
<ul>
<li>文字列の基本概念を完全に理解する</li>
<li>標準ライブラリの文字列操作関数を使いこなせる</li>
<li>文字列配列の詳細な操作ができる</li>
<li>2次元文字配列と文字列ポインタ配列を使い分けられる</li>
<li>実践的な文字列処理プログラムを作成できる</li>
</ul>
<h2 data-number="9.3" id="理論解説-7"><span
class="header-section-number">9.3</span> 理論解説</h2>
<h3 data-number="9.3.1" id="文字列の基本概念"><span
class="header-section-number">9.3.1</span> 文字列の基本概念 📝</h3>
<p>C言語では文字列は文字の配列として表現され、null文字（‘\0’）で終端されます。</p>
<h4 data-number="9.3.1.1" id="文字列の表現方法"><span
class="header-section-number">9.3.1.1</span> 文字列の表現方法</h4>
<div class="sourceCode" id="cb132"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb132-1"><a href="#cb132-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb132-2"><a href="#cb132-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb132-3"><a href="#cb132-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb132-4"><a href="#cb132-4" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb132-5"><a href="#cb132-5" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 方法1: 文字配列として宣言 */</span></span>
<span id="cb132-6"><a href="#cb132-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> str1<span class="op">[</span><span class="dv">6</span><span class="op">]</span> <span class="op">=</span> <span class="op">{</span><span class="ch">&#39;H&#39;</span><span class="op">,</span> <span class="ch">&#39;e&#39;</span><span class="op">,</span> <span class="ch">&#39;l&#39;</span><span class="op">,</span> <span class="ch">&#39;l&#39;</span><span class="op">,</span> <span class="ch">&#39;o&#39;</span><span class="op">,</span> <span class="ch">&#39;</span><span class="sc">\0</span><span class="ch">&#39;</span><span class="op">};</span></span>
<span id="cb132-7"><a href="#cb132-7" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb132-8"><a href="#cb132-8" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 方法2: 文字列リテラルで初期化 */</span></span>
<span id="cb132-9"><a href="#cb132-9" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> str2<span class="op">[</span><span class="dv">6</span><span class="op">]</span> <span class="op">=</span> <span class="st">&quot;Hello&quot;</span><span class="op">;</span></span>
<span id="cb132-10"><a href="#cb132-10" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb132-11"><a href="#cb132-11" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 方法3: サイズを自動決定 */</span></span>
<span id="cb132-12"><a href="#cb132-12" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> str3<span class="op">[]</span> <span class="op">=</span> <span class="st">&quot;Hello&quot;</span><span class="op">;</span></span>
<span id="cb132-13"><a href="#cb132-13" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb132-14"><a href="#cb132-14" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 方法4: 文字列ポインタ */</span></span>
<span id="cb132-15"><a href="#cb132-15" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> <span class="op">*</span>str4 <span class="op">=</span> <span class="st">&quot;Hello&quot;</span><span class="op">;</span></span>
<span id="cb132-16"><a href="#cb132-16" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb132-17"><a href="#cb132-17" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;str1: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> str1<span class="op">);</span></span>
<span id="cb132-18"><a href="#cb132-18" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;str2: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> str2<span class="op">);</span></span>
<span id="cb132-19"><a href="#cb132-19" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;str3: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> str3<span class="op">);</span></span>
<span id="cb132-20"><a href="#cb132-20" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;str4: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> str4<span class="op">);</span></span>
<span id="cb132-21"><a href="#cb132-21" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb132-22"><a href="#cb132-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb132-23"><a href="#cb132-23" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h4 data-number="9.3.1.2" id="文字列の長さとサイズ"><span
class="header-section-number">9.3.1.2</span> 文字列の長さとサイズ</h4>
<div class="sourceCode" id="cb133"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb133-1"><a href="#cb133-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb133-2"><a href="#cb133-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;string.h&gt;</span></span>
<span id="cb133-3"><a href="#cb133-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb133-4"><a href="#cb133-4" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb133-5"><a href="#cb133-5" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb133-6"><a href="#cb133-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> str<span class="op">[]</span> <span class="op">=</span> <span class="st">&quot;Hello&quot;</span><span class="op">;</span></span>
<span id="cb133-7"><a href="#cb133-7" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb133-8"><a href="#cb133-8" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;文字列: </span><span class="sc">\&quot;%s\&quot;\n</span><span class="st">&quot;</span><span class="op">,</span> str<span class="op">);</span></span>
<span id="cb133-9"><a href="#cb133-9" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;strlen(str): </span><span class="sc">%lu\n</span><span class="st">&quot;</span><span class="op">,</span> strlen<span class="op">(</span>str<span class="op">));</span>    <span class="co">/* 5 (文字数) */</span></span>
<span id="cb133-10"><a href="#cb133-10" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;sizeof(str): </span><span class="sc">%lu\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="kw">sizeof</span><span class="op">(</span>str<span class="op">));</span>    <span class="co">/* 6 (配列サイズ) */</span></span>
<span id="cb133-11"><a href="#cb133-11" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb133-12"><a href="#cb133-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb133-13"><a href="#cb133-13" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 data-number="9.3.2" id="標準文字列操作関数"><span
class="header-section-number">9.3.2</span> 標準文字列操作関数 🔧</h3>
<h4 data-number="9.3.2.1" id="strcpy---文字列のコピー"><span
class="header-section-number">9.3.2.1</span> strcpy() -
文字列のコピー</h4>
<div class="sourceCode" id="cb134"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb134-1"><a href="#cb134-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb134-2"><a href="#cb134-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;string.h&gt;</span></span>
<span id="cb134-3"><a href="#cb134-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb134-4"><a href="#cb134-4" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb134-5"><a href="#cb134-5" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb134-6"><a href="#cb134-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> source<span class="op">[]</span> <span class="op">=</span> <span class="st">&quot;Hello, World!&quot;</span><span class="op">;</span></span>
<span id="cb134-7"><a href="#cb134-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> destination<span class="op">[</span><span class="dv">50</span><span class="op">];</span></span>
<span id="cb134-8"><a href="#cb134-8" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb134-9"><a href="#cb134-9" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 文字列のコピー */</span></span>
<span id="cb134-10"><a href="#cb134-10" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>destination<span class="op">,</span> source<span class="op">);</span></span>
<span id="cb134-11"><a href="#cb134-11" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;destination: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> destination<span class="op">);</span></span>
<span id="cb134-12"><a href="#cb134-12" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb134-13"><a href="#cb134-13" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 部分的なコピー */</span></span>
<span id="cb134-14"><a href="#cb134-14" aria-hidden="true" tabindex="-1"></a>    strncpy<span class="op">(</span>destination<span class="op">,</span> source<span class="op">,</span> <span class="dv">5</span><span class="op">);</span></span>
<span id="cb134-15"><a href="#cb134-15" aria-hidden="true" tabindex="-1"></a>    destination<span class="op">[</span><span class="dv">5</span><span class="op">]</span> <span class="op">=</span> <span class="ch">&#39;</span><span class="sc">\0</span><span class="ch">&#39;</span><span class="op">;</span>  <span class="co">/* null終端を明示的に追加 */</span></span>
<span id="cb134-16"><a href="#cb134-16" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;partial copy: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> destination<span class="op">);</span>  <span class="co">/* &quot;Hello&quot; */</span></span>
<span id="cb134-17"><a href="#cb134-17" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb134-18"><a href="#cb134-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb134-19"><a href="#cb134-19" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h4 data-number="9.3.2.2" id="strcat---文字列の連結"><span
class="header-section-number">9.3.2.2</span> strcat() -
文字列の連結</h4>
<div class="sourceCode" id="cb135"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb135-1"><a href="#cb135-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb135-2"><a href="#cb135-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;string.h&gt;</span></span>
<span id="cb135-3"><a href="#cb135-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb135-4"><a href="#cb135-4" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb135-5"><a href="#cb135-5" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb135-6"><a href="#cb135-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> str1<span class="op">[</span><span class="dv">50</span><span class="op">]</span> <span class="op">=</span> <span class="st">&quot;Hello&quot;</span><span class="op">;</span></span>
<span id="cb135-7"><a href="#cb135-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> str2<span class="op">[]</span> <span class="op">=</span> <span class="st">&quot;, World!&quot;</span><span class="op">;</span></span>
<span id="cb135-8"><a href="#cb135-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> str3<span class="op">[]</span> <span class="op">=</span> <span class="st">&quot; How are you?&quot;</span><span class="op">;</span></span>
<span id="cb135-9"><a href="#cb135-9" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb135-10"><a href="#cb135-10" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 文字列の連結 */</span></span>
<span id="cb135-11"><a href="#cb135-11" aria-hidden="true" tabindex="-1"></a>    strcat<span class="op">(</span>str1<span class="op">,</span> str2<span class="op">);</span></span>
<span id="cb135-12"><a href="#cb135-12" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;After strcat: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> str1<span class="op">);</span>  <span class="co">/* &quot;Hello, World!&quot; */</span></span>
<span id="cb135-13"><a href="#cb135-13" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb135-14"><a href="#cb135-14" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 部分的な連結 */</span></span>
<span id="cb135-15"><a href="#cb135-15" aria-hidden="true" tabindex="-1"></a>    strncat<span class="op">(</span>str1<span class="op">,</span> str3<span class="op">,</span> <span class="dv">4</span><span class="op">);</span></span>
<span id="cb135-16"><a href="#cb135-16" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;After strncat: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> str1<span class="op">);</span> <span class="co">/* &quot;Hello, World! How&quot; */</span></span>
<span id="cb135-17"><a href="#cb135-17" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb135-18"><a href="#cb135-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb135-19"><a href="#cb135-19" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h4 data-number="9.3.2.3" id="strcmp---文字列の比較"><span
class="header-section-number">9.3.2.3</span> strcmp() -
文字列の比較</h4>
<div class="sourceCode" id="cb136"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb136-1"><a href="#cb136-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb136-2"><a href="#cb136-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;string.h&gt;</span></span>
<span id="cb136-3"><a href="#cb136-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb136-4"><a href="#cb136-4" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb136-5"><a href="#cb136-5" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb136-6"><a href="#cb136-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> str1<span class="op">[]</span> <span class="op">=</span> <span class="st">&quot;Apple&quot;</span><span class="op">;</span></span>
<span id="cb136-7"><a href="#cb136-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> str2<span class="op">[]</span> <span class="op">=</span> <span class="st">&quot;Banana&quot;</span><span class="op">;</span></span>
<span id="cb136-8"><a href="#cb136-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> str3<span class="op">[]</span> <span class="op">=</span> <span class="st">&quot;Apple&quot;</span><span class="op">;</span></span>
<span id="cb136-9"><a href="#cb136-9" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> result<span class="op">;</span></span>
<span id="cb136-10"><a href="#cb136-10" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb136-11"><a href="#cb136-11" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 文字列の比較 */</span></span>
<span id="cb136-12"><a href="#cb136-12" aria-hidden="true" tabindex="-1"></a>    result <span class="op">=</span> strcmp<span class="op">(</span>str1<span class="op">,</span> str2<span class="op">);</span></span>
<span id="cb136-13"><a href="#cb136-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>result <span class="op">&lt;</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb136-14"><a href="#cb136-14" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\&quot;%s\&quot;</span><span class="st"> &lt; </span><span class="sc">\&quot;%s\&quot;\n</span><span class="st">&quot;</span><span class="op">,</span> str1<span class="op">,</span> str2<span class="op">);</span></span>
<span id="cb136-15"><a href="#cb136-15" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span> <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>result <span class="op">&gt;</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb136-16"><a href="#cb136-16" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\&quot;%s\&quot;</span><span class="st"> &gt; </span><span class="sc">\&quot;%s\&quot;\n</span><span class="st">&quot;</span><span class="op">,</span> str1<span class="op">,</span> str2<span class="op">);</span></span>
<span id="cb136-17"><a href="#cb136-17" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb136-18"><a href="#cb136-18" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\&quot;%s\&quot;</span><span class="st"> == </span><span class="sc">\&quot;%s\&quot;\n</span><span class="st">&quot;</span><span class="op">,</span> str1<span class="op">,</span> str2<span class="op">);</span></span>
<span id="cb136-19"><a href="#cb136-19" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb136-20"><a href="#cb136-20" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb136-21"><a href="#cb136-21" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 等価性の確認 */</span></span>
<span id="cb136-22"><a href="#cb136-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>strcmp<span class="op">(</span>str1<span class="op">,</span> str3<span class="op">)</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb136-23"><a href="#cb136-23" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\&quot;%s\&quot;</span><span class="st"> と </span><span class="sc">\&quot;%s\&quot;</span><span class="st"> は同じです</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> str1<span class="op">,</span> str3<span class="op">);</span></span>
<span id="cb136-24"><a href="#cb136-24" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb136-25"><a href="#cb136-25" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb136-26"><a href="#cb136-26" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 部分比較 */</span></span>
<span id="cb136-27"><a href="#cb136-27" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>strncmp<span class="op">(</span>str1<span class="op">,</span> str2<span class="op">,</span> <span class="dv">1</span><span class="op">)</span> <span class="op">!=</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb136-28"><a href="#cb136-28" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;最初の文字が異なります</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb136-29"><a href="#cb136-29" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb136-30"><a href="#cb136-30" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb136-31"><a href="#cb136-31" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb136-32"><a href="#cb136-32" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h4 data-number="9.3.2.4" id="文字列検索関数"><span
class="header-section-number">9.3.2.4</span> 文字列検索関数</h4>
<div class="sourceCode" id="cb137"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb137-1"><a href="#cb137-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb137-2"><a href="#cb137-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;string.h&gt;</span></span>
<span id="cb137-3"><a href="#cb137-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb137-4"><a href="#cb137-4" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb137-5"><a href="#cb137-5" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb137-6"><a href="#cb137-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> text<span class="op">[]</span> <span class="op">=</span> <span class="st">&quot;Hello, World! Welcome to C programming.&quot;</span><span class="op">;</span></span>
<span id="cb137-7"><a href="#cb137-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> <span class="op">*</span>found<span class="op">;</span></span>
<span id="cb137-8"><a href="#cb137-8" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb137-9"><a href="#cb137-9" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 文字の検索 */</span></span>
<span id="cb137-10"><a href="#cb137-10" aria-hidden="true" tabindex="-1"></a>    found <span class="op">=</span> strchr<span class="op">(</span>text<span class="op">,</span> <span class="ch">&#39;W&#39;</span><span class="op">);</span></span>
<span id="cb137-11"><a href="#cb137-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>found <span class="op">!=</span> NULL<span class="op">)</span> <span class="op">{</span></span>
<span id="cb137-12"><a href="#cb137-12" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;&#39;W&#39; found at position: </span><span class="sc">%ld\n</span><span class="st">&quot;</span><span class="op">,</span> found <span class="op">-</span> text<span class="op">);</span></span>
<span id="cb137-13"><a href="#cb137-13" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb137-14"><a href="#cb137-14" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb137-15"><a href="#cb137-15" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 文字列の検索 */</span></span>
<span id="cb137-16"><a href="#cb137-16" aria-hidden="true" tabindex="-1"></a>    found <span class="op">=</span> strstr<span class="op">(</span>text<span class="op">,</span> <span class="st">&quot;World&quot;</span><span class="op">);</span></span>
<span id="cb137-17"><a href="#cb137-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>found <span class="op">!=</span> NULL<span class="op">)</span> <span class="op">{</span></span>
<span id="cb137-18"><a href="#cb137-18" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\&quot;</span><span class="st">World</span><span class="sc">\&quot;</span><span class="st"> found at position: </span><span class="sc">%ld\n</span><span class="st">&quot;</span><span class="op">,</span> found <span class="op">-</span> text<span class="op">);</span></span>
<span id="cb137-19"><a href="#cb137-19" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;Found: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> found<span class="op">);</span></span>
<span id="cb137-20"><a href="#cb137-20" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb137-21"><a href="#cb137-21" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb137-22"><a href="#cb137-22" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 最後の文字を検索 */</span></span>
<span id="cb137-23"><a href="#cb137-23" aria-hidden="true" tabindex="-1"></a>    found <span class="op">=</span> strrchr<span class="op">(</span>text<span class="op">,</span> <span class="ch">&#39;o&#39;</span><span class="op">);</span></span>
<span id="cb137-24"><a href="#cb137-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>found <span class="op">!=</span> NULL<span class="op">)</span> <span class="op">{</span></span>
<span id="cb137-25"><a href="#cb137-25" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;Last &#39;o&#39; at position: </span><span class="sc">%ld\n</span><span class="st">&quot;</span><span class="op">,</span> found <span class="op">-</span> text<span class="op">);</span></span>
<span id="cb137-26"><a href="#cb137-26" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb137-27"><a href="#cb137-27" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb137-28"><a href="#cb137-28" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb137-29"><a href="#cb137-29" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 data-number="9.3.3" id="文字列配列の詳細操作"><span
class="header-section-number">9.3.3</span> 文字列配列の詳細操作 📚</h3>
<p>これがユーザーの重要な要望の1つです。</p>
<h4 data-number="9.3.3.1" id="次元文字配列での文字列配列"><span
class="header-section-number">9.3.3.1</span>
2次元文字配列での文字列配列</h4>
<div class="sourceCode" id="cb138"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb138-1"><a href="#cb138-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb138-2"><a href="#cb138-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;string.h&gt;</span></span>
<span id="cb138-3"><a href="#cb138-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb138-4"><a href="#cb138-4" aria-hidden="true" tabindex="-1"></a><span class="pp">#define MAX_STRINGS </span><span class="dv">5</span></span>
<span id="cb138-5"><a href="#cb138-5" aria-hidden="true" tabindex="-1"></a><span class="pp">#define MAX_LENGTH </span><span class="dv">20</span></span>
<span id="cb138-6"><a href="#cb138-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb138-7"><a href="#cb138-7" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb138-8"><a href="#cb138-8" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb138-9"><a href="#cb138-9" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 2次元文字配列による文字列配列 */</span></span>
<span id="cb138-10"><a href="#cb138-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> languages<span class="op">[</span>MAX_STRINGS<span class="op">][</span>MAX_LENGTH<span class="op">];</span></span>
<span id="cb138-11"><a href="#cb138-11" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> count <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb138-12"><a href="#cb138-12" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb138-13"><a href="#cb138-13" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb138-14"><a href="#cb138-14" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 文字列配列への代入 */</span></span>
<span id="cb138-15"><a href="#cb138-15" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>languages<span class="op">[</span>count<span class="op">++],</span> <span class="st">&quot;C&quot;</span><span class="op">);</span></span>
<span id="cb138-16"><a href="#cb138-16" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>languages<span class="op">[</span>count<span class="op">++],</span> <span class="st">&quot;Python&quot;</span><span class="op">);</span></span>
<span id="cb138-17"><a href="#cb138-17" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>languages<span class="op">[</span>count<span class="op">++],</span> <span class="st">&quot;Java&quot;</span><span class="op">);</span></span>
<span id="cb138-18"><a href="#cb138-18" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>languages<span class="op">[</span>count<span class="op">++],</span> <span class="st">&quot;JavaScript&quot;</span><span class="op">);</span></span>
<span id="cb138-19"><a href="#cb138-19" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>languages<span class="op">[</span>count<span class="op">++],</span> <span class="st">&quot;C++&quot;</span><span class="op">);</span></span>
<span id="cb138-20"><a href="#cb138-20" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb138-21"><a href="#cb138-21" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 表示 */</span></span>
<span id="cb138-22"><a href="#cb138-22" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;プログラミング言語一覧:</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb138-23"><a href="#cb138-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> count<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb138-24"><a href="#cb138-24" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st">. </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">,</span> languages<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb138-25"><a href="#cb138-25" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb138-26"><a href="#cb138-26" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb138-27"><a href="#cb138-27" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 文字列の変更 */</span></span>
<span id="cb138-28"><a href="#cb138-28" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>languages<span class="op">[</span><span class="dv">0</span><span class="op">],</span> <span class="st">&quot;C言語&quot;</span><span class="op">);</span></span>
<span id="cb138-29"><a href="#cb138-29" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">変更後の1番目: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> languages<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb138-30"><a href="#cb138-30" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb138-31"><a href="#cb138-31" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb138-32"><a href="#cb138-32" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h4 data-number="9.3.3.2" id="文字列ポインタ配列での文字列配列"><span
class="header-section-number">9.3.3.2</span>
文字列ポインタ配列での文字列配列</h4>
<div class="sourceCode" id="cb139"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb139-1"><a href="#cb139-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb139-2"><a href="#cb139-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;string.h&gt;</span></span>
<span id="cb139-3"><a href="#cb139-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb139-4"><a href="#cb139-4" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb139-5"><a href="#cb139-5" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb139-6"><a href="#cb139-6" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 文字列ポインタ配列 */</span></span>
<span id="cb139-7"><a href="#cb139-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> <span class="op">*</span>fruits<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb139-8"><a href="#cb139-8" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;Apple&quot;</span><span class="op">,</span></span>
<span id="cb139-9"><a href="#cb139-9" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;Banana&quot;</span><span class="op">,</span> </span>
<span id="cb139-10"><a href="#cb139-10" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;Cherry&quot;</span><span class="op">,</span></span>
<span id="cb139-11"><a href="#cb139-11" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;Date&quot;</span><span class="op">,</span></span>
<span id="cb139-12"><a href="#cb139-12" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;Elderberry&quot;</span></span>
<span id="cb139-13"><a href="#cb139-13" aria-hidden="true" tabindex="-1"></a>    <span class="op">};</span></span>
<span id="cb139-14"><a href="#cb139-14" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> count <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>fruits<span class="op">)</span> <span class="op">/</span> <span class="kw">sizeof</span><span class="op">(</span>fruits<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb139-15"><a href="#cb139-15" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb139-16"><a href="#cb139-16" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb139-17"><a href="#cb139-17" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 表示 */</span></span>
<span id="cb139-18"><a href="#cb139-18" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;果物一覧:</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb139-19"><a href="#cb139-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> count<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb139-20"><a href="#cb139-20" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st">. </span><span class="sc">%s</span><span class="st"> (長さ: </span><span class="sc">%lu</span><span class="st">)</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">,</span> fruits<span class="op">[</span>i<span class="op">],</span> strlen<span class="op">(</span>fruits<span class="op">[</span>i<span class="op">]));</span></span>
<span id="cb139-21"><a href="#cb139-21" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb139-22"><a href="#cb139-22" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb139-23"><a href="#cb139-23" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* ポインタの変更（文字列リテラルの置き換え） */</span></span>
<span id="cb139-24"><a href="#cb139-24" aria-hidden="true" tabindex="-1"></a>    fruits<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="st">&quot;リンゴ&quot;</span><span class="op">;</span></span>
<span id="cb139-25"><a href="#cb139-25" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">変更後の1番目: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> fruits<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb139-26"><a href="#cb139-26" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb139-27"><a href="#cb139-27" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb139-28"><a href="#cb139-28" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h4 data-number="9.3.3.3" id="文字列配列の初期化と動的変更"><span
class="header-section-number">9.3.3.3</span>
文字列配列の初期化と動的変更</h4>
<div class="sourceCode" id="cb140"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb140-1"><a href="#cb140-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb140-2"><a href="#cb140-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;string.h&gt;</span></span>
<span id="cb140-3"><a href="#cb140-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb140-4"><a href="#cb140-4" aria-hidden="true" tabindex="-1"></a><span class="pp">#define MAX_ITEMS </span><span class="dv">10</span></span>
<span id="cb140-5"><a href="#cb140-5" aria-hidden="true" tabindex="-1"></a><span class="pp">#define MAX_LENGTH </span><span class="dv">50</span></span>
<span id="cb140-6"><a href="#cb140-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb140-7"><a href="#cb140-7" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb140-8"><a href="#cb140-8" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb140-9"><a href="#cb140-9" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 動的に変更可能な文字列配列 */</span></span>
<span id="cb140-10"><a href="#cb140-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> menu_items<span class="op">[</span>MAX_ITEMS<span class="op">][</span>MAX_LENGTH<span class="op">];</span></span>
<span id="cb140-11"><a href="#cb140-11" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> <span class="op">*</span>categories<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="st">&quot;前菜&quot;</span><span class="op">,</span> <span class="st">&quot;メイン&quot;</span><span class="op">,</span> <span class="st">&quot;デザート&quot;</span><span class="op">,</span> <span class="st">&quot;飲み物&quot;</span><span class="op">};</span></span>
<span id="cb140-12"><a href="#cb140-12" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> item_count <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb140-13"><a href="#cb140-13" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb140-14"><a href="#cb140-14" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb140-15"><a href="#cb140-15" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* メニュー項目の追加 */</span></span>
<span id="cb140-16"><a href="#cb140-16" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>menu_items<span class="op">[</span>item_count<span class="op">++],</span> <span class="st">&quot;サラダ&quot;</span><span class="op">);</span></span>
<span id="cb140-17"><a href="#cb140-17" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>menu_items<span class="op">[</span>item_count<span class="op">++],</span> <span class="st">&quot;ステーキ&quot;</span><span class="op">);</span></span>
<span id="cb140-18"><a href="#cb140-18" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>menu_items<span class="op">[</span>item_count<span class="op">++],</span> <span class="st">&quot;アイスクリーム&quot;</span><span class="op">);</span></span>
<span id="cb140-19"><a href="#cb140-19" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>menu_items<span class="op">[</span>item_count<span class="op">++],</span> <span class="st">&quot;コーヒー&quot;</span><span class="op">);</span></span>
<span id="cb140-20"><a href="#cb140-20" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb140-21"><a href="#cb140-21" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* カテゴリ別表示 */</span></span>
<span id="cb140-22"><a href="#cb140-22" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== レストランメニュー ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb140-23"><a href="#cb140-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> item_count <span class="op">&amp;&amp;</span> i <span class="op">&lt;</span> <span class="dv">4</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb140-24"><a href="#cb140-24" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;[</span><span class="sc">%s</span><span class="st">] </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> categories<span class="op">[</span>i<span class="op">],</span> menu_items<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb140-25"><a href="#cb140-25" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb140-26"><a href="#cb140-26" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb140-27"><a href="#cb140-27" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 項目の変更 */</span></span>
<span id="cb140-28"><a href="#cb140-28" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>menu_items<span class="op">[</span><span class="dv">1</span><span class="op">],</span> <span class="st">&quot;ハンバーグ&quot;</span><span class="op">);</span></span>
<span id="cb140-29"><a href="#cb140-29" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">メイン料理を変更: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> menu_items<span class="op">[</span><span class="dv">1</span><span class="op">]);</span></span>
<span id="cb140-30"><a href="#cb140-30" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb140-31"><a href="#cb140-31" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb140-32"><a href="#cb140-32" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 data-number="9.3.4" id="文字列配列の比較と使い分け"><span
class="header-section-number">9.3.4</span> 文字列配列の比較と使い分け
🔍</h3>
<h4 data-number="9.3.4.1" id="メモリ使用量の比較"><span
class="header-section-number">9.3.4.1</span> メモリ使用量の比較</h4>
<div class="sourceCode" id="cb141"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb141-1"><a href="#cb141-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb141-2"><a href="#cb141-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;string.h&gt;</span></span>
<span id="cb141-3"><a href="#cb141-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb141-4"><a href="#cb141-4" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb141-5"><a href="#cb141-5" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb141-6"><a href="#cb141-6" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 2次元文字配列 */</span></span>
<span id="cb141-7"><a href="#cb141-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> matrix_strings<span class="op">[</span><span class="dv">5</span><span class="op">][</span><span class="dv">20</span><span class="op">]</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb141-8"><a href="#cb141-8" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;Cat&quot;</span><span class="op">,</span> <span class="st">&quot;Dog&quot;</span><span class="op">,</span> <span class="st">&quot;Bird&quot;</span><span class="op">,</span> <span class="st">&quot;Fish&quot;</span><span class="op">,</span> <span class="st">&quot;Rabbit&quot;</span></span>
<span id="cb141-9"><a href="#cb141-9" aria-hidden="true" tabindex="-1"></a>    <span class="op">};</span></span>
<span id="cb141-10"><a href="#cb141-10" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb141-11"><a href="#cb141-11" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 文字列ポインタ配列 */</span></span>
<span id="cb141-12"><a href="#cb141-12" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> <span class="op">*</span>pointer_strings<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb141-13"><a href="#cb141-13" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;Cat&quot;</span><span class="op">,</span> <span class="st">&quot;Dog&quot;</span><span class="op">,</span> <span class="st">&quot;Bird&quot;</span><span class="op">,</span> <span class="st">&quot;Fish&quot;</span><span class="op">,</span> <span class="st">&quot;Rabbit&quot;</span></span>
<span id="cb141-14"><a href="#cb141-14" aria-hidden="true" tabindex="-1"></a>    <span class="op">};</span></span>
<span id="cb141-15"><a href="#cb141-15" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb141-16"><a href="#cb141-16" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== メモリ使用量比較 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb141-17"><a href="#cb141-17" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;2次元文字配列: </span><span class="sc">%lu</span><span class="st"> バイト</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="kw">sizeof</span><span class="op">(</span>matrix_strings<span class="op">));</span></span>
<span id="cb141-18"><a href="#cb141-18" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;文字列ポインタ配列: </span><span class="sc">%lu</span><span class="st"> バイト</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="kw">sizeof</span><span class="op">(</span>pointer_strings<span class="op">));</span></span>
<span id="cb141-19"><a href="#cb141-19" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb141-20"><a href="#cb141-20" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">=== 実際の文字列長 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb141-21"><a href="#cb141-21" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb141-22"><a href="#cb141-22" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> total_chars <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb141-23"><a href="#cb141-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">5</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb141-24"><a href="#cb141-24" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> len <span class="op">=</span> strlen<span class="op">(</span>matrix_strings<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb141-25"><a href="#cb141-25" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%s</span><span class="st">: </span><span class="sc">%d</span><span class="st">文字</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> matrix_strings<span class="op">[</span>i<span class="op">],</span> len<span class="op">);</span></span>
<span id="cb141-26"><a href="#cb141-26" aria-hidden="true" tabindex="-1"></a>        total_chars <span class="op">+=</span> len<span class="op">;</span></span>
<span id="cb141-27"><a href="#cb141-27" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb141-28"><a href="#cb141-28" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;総文字数: </span><span class="sc">%d</span><span class="st">文字</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> total_chars<span class="op">);</span></span>
<span id="cb141-29"><a href="#cb141-29" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;未使用領域: </span><span class="sc">%lu</span><span class="st"> バイト</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="kw">sizeof</span><span class="op">(</span>matrix_strings<span class="op">)</span> <span class="op">-</span> total_chars <span class="op">-</span> <span class="dv">5</span><span class="op">);</span></span>
<span id="cb141-30"><a href="#cb141-30" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb141-31"><a href="#cb141-31" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb141-32"><a href="#cb141-32" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h4 data-number="9.3.4.2" id="動的な文字列配列の管理"><span
class="header-section-number">9.3.4.2</span> 動的な文字列配列の管理</h4>
<div class="sourceCode" id="cb142"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb142-1"><a href="#cb142-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb142-2"><a href="#cb142-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;string.h&gt;</span></span>
<span id="cb142-3"><a href="#cb142-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-4"><a href="#cb142-4" aria-hidden="true" tabindex="-1"></a><span class="pp">#define MAX_STUDENTS </span><span class="dv">10</span></span>
<span id="cb142-5"><a href="#cb142-5" aria-hidden="true" tabindex="-1"></a><span class="pp">#define MAX_NAME_LENGTH </span><span class="dv">30</span></span>
<span id="cb142-6"><a href="#cb142-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-7"><a href="#cb142-7" aria-hidden="true" tabindex="-1"></a><span class="kw">typedef</span> <span class="kw">struct</span> <span class="op">{</span></span>
<span id="cb142-8"><a href="#cb142-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> name<span class="op">[</span>MAX_NAME_LENGTH<span class="op">];</span></span>
<span id="cb142-9"><a href="#cb142-9" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> age<span class="op">;</span></span>
<span id="cb142-10"><a href="#cb142-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">float</span> gpa<span class="op">;</span></span>
<span id="cb142-11"><a href="#cb142-11" aria-hidden="true" tabindex="-1"></a><span class="op">}</span> Student<span class="op">;</span></span>
<span id="cb142-12"><a href="#cb142-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb142-13"><a href="#cb142-13" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb142-14"><a href="#cb142-14" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb142-15"><a href="#cb142-15" aria-hidden="true" tabindex="-1"></a>    Student students<span class="op">[</span>MAX_STUDENTS<span class="op">];</span></span>
<span id="cb142-16"><a href="#cb142-16" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> <span class="op">*</span>status_messages<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb142-17"><a href="#cb142-17" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;優秀&quot;</span><span class="op">,</span> <span class="st">&quot;良好&quot;</span><span class="op">,</span> <span class="st">&quot;普通&quot;</span><span class="op">,</span> <span class="st">&quot;要努力&quot;</span></span>
<span id="cb142-18"><a href="#cb142-18" aria-hidden="true" tabindex="-1"></a>    <span class="op">};</span></span>
<span id="cb142-19"><a href="#cb142-19" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> student_count <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb142-20"><a href="#cb142-20" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb142-21"><a href="#cb142-21" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb142-22"><a href="#cb142-22" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 学生データの追加 */</span></span>
<span id="cb142-23"><a href="#cb142-23" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>students<span class="op">[</span>student_count<span class="op">].</span>name<span class="op">,</span> <span class="st">&quot;田中太郎&quot;</span><span class="op">);</span></span>
<span id="cb142-24"><a href="#cb142-24" aria-hidden="true" tabindex="-1"></a>    students<span class="op">[</span>student_count<span class="op">].</span>age <span class="op">=</span> <span class="dv">20</span><span class="op">;</span></span>
<span id="cb142-25"><a href="#cb142-25" aria-hidden="true" tabindex="-1"></a>    students<span class="op">[</span>student_count<span class="op">].</span>gpa <span class="op">=</span> <span class="fl">3.8</span><span class="op">;</span></span>
<span id="cb142-26"><a href="#cb142-26" aria-hidden="true" tabindex="-1"></a>    student_count<span class="op">++;</span></span>
<span id="cb142-27"><a href="#cb142-27" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb142-28"><a href="#cb142-28" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>students<span class="op">[</span>student_count<span class="op">].</span>name<span class="op">,</span> <span class="st">&quot;佐藤花子&quot;</span><span class="op">);</span></span>
<span id="cb142-29"><a href="#cb142-29" aria-hidden="true" tabindex="-1"></a>    students<span class="op">[</span>student_count<span class="op">].</span>age <span class="op">=</span> <span class="dv">19</span><span class="op">;</span></span>
<span id="cb142-30"><a href="#cb142-30" aria-hidden="true" tabindex="-1"></a>    students<span class="op">[</span>student_count<span class="op">].</span>gpa <span class="op">=</span> <span class="fl">3.2</span><span class="op">;</span></span>
<span id="cb142-31"><a href="#cb142-31" aria-hidden="true" tabindex="-1"></a>    student_count<span class="op">++;</span></span>
<span id="cb142-32"><a href="#cb142-32" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb142-33"><a href="#cb142-33" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>students<span class="op">[</span>student_count<span class="op">].</span>name<span class="op">,</span> <span class="st">&quot;鈴木一郎&quot;</span><span class="op">);</span></span>
<span id="cb142-34"><a href="#cb142-34" aria-hidden="true" tabindex="-1"></a>    students<span class="op">[</span>student_count<span class="op">].</span>age <span class="op">=</span> <span class="dv">21</span><span class="op">;</span></span>
<span id="cb142-35"><a href="#cb142-35" aria-hidden="true" tabindex="-1"></a>    students<span class="op">[</span>student_count<span class="op">].</span>gpa <span class="op">=</span> <span class="fl">2.8</span><span class="op">;</span></span>
<span id="cb142-36"><a href="#cb142-36" aria-hidden="true" tabindex="-1"></a>    student_count<span class="op">++;</span></span>
<span id="cb142-37"><a href="#cb142-37" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb142-38"><a href="#cb142-38" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 学生情報の表示 */</span></span>
<span id="cb142-39"><a href="#cb142-39" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== 学生一覧 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb142-40"><a href="#cb142-40" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> student_count<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb142-41"><a href="#cb142-41" aria-hidden="true" tabindex="-1"></a>        <span class="dt">char</span> <span class="op">*</span>status<span class="op">;</span></span>
<span id="cb142-42"><a href="#cb142-42" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>students<span class="op">[</span>i<span class="op">].</span>gpa <span class="op">&gt;=</span> <span class="fl">3.5</span><span class="op">)</span> status <span class="op">=</span> status_messages<span class="op">[</span><span class="dv">0</span><span class="op">];</span></span>
<span id="cb142-43"><a href="#cb142-43" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>students<span class="op">[</span>i<span class="op">].</span>gpa <span class="op">&gt;=</span> <span class="fl">3.0</span><span class="op">)</span> status <span class="op">=</span> status_messages<span class="op">[</span><span class="dv">1</span><span class="op">];</span></span>
<span id="cb142-44"><a href="#cb142-44" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>students<span class="op">[</span>i<span class="op">].</span>gpa <span class="op">&gt;=</span> <span class="fl">2.5</span><span class="op">)</span> status <span class="op">=</span> status_messages<span class="op">[</span><span class="dv">2</span><span class="op">];</span></span>
<span id="cb142-45"><a href="#cb142-45" aria-hidden="true" tabindex="-1"></a>        <span class="cf">else</span> status <span class="op">=</span> status_messages<span class="op">[</span><span class="dv">3</span><span class="op">];</span></span>
<span id="cb142-46"><a href="#cb142-46" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb142-47"><a href="#cb142-47" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%s</span><span class="st"> (</span><span class="sc">%d</span><span class="st">歳) - GPA: </span><span class="sc">%.1f</span><span class="st"> [</span><span class="sc">%s</span><span class="st">]</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> </span>
<span id="cb142-48"><a href="#cb142-48" aria-hidden="true" tabindex="-1"></a>               students<span class="op">[</span>i<span class="op">].</span>name<span class="op">,</span> students<span class="op">[</span>i<span class="op">].</span>age<span class="op">,</span> students<span class="op">[</span>i<span class="op">].</span>gpa<span class="op">,</span> status<span class="op">);</span></span>
<span id="cb142-49"><a href="#cb142-49" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb142-50"><a href="#cb142-50" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb142-51"><a href="#cb142-51" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb142-52"><a href="#cb142-52" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 data-number="9.3.5" id="文字列配列のソートと検索"><span
class="header-section-number">9.3.5</span> 文字列配列のソートと検索
🔍</h3>
<h4 data-number="9.3.5.1" id="文字列配列のバブルソート"><span
class="header-section-number">9.3.5.1</span>
文字列配列のバブルソート</h4>
<div class="sourceCode" id="cb143"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb143-1"><a href="#cb143-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb143-2"><a href="#cb143-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;string.h&gt;</span></span>
<span id="cb143-3"><a href="#cb143-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb143-4"><a href="#cb143-4" aria-hidden="true" tabindex="-1"></a><span class="pp">#define MAX_WORDS </span><span class="dv">8</span></span>
<span id="cb143-5"><a href="#cb143-5" aria-hidden="true" tabindex="-1"></a><span class="pp">#define MAX_LENGTH </span><span class="dv">20</span></span>
<span id="cb143-6"><a href="#cb143-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb143-7"><a href="#cb143-7" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb143-8"><a href="#cb143-8" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb143-9"><a href="#cb143-9" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> words<span class="op">[</span>MAX_WORDS<span class="op">][</span>MAX_LENGTH<span class="op">]</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb143-10"><a href="#cb143-10" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;Zebra&quot;</span><span class="op">,</span> <span class="st">&quot;Apple&quot;</span><span class="op">,</span> <span class="st">&quot;Monkey&quot;</span><span class="op">,</span> <span class="st">&quot;Banana&quot;</span><span class="op">,</span></span>
<span id="cb143-11"><a href="#cb143-11" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;Cat&quot;</span><span class="op">,</span> <span class="st">&quot;Dog&quot;</span><span class="op">,</span> <span class="st">&quot;Elephant&quot;</span><span class="op">,</span> <span class="st">&quot;Fish&quot;</span></span>
<span id="cb143-12"><a href="#cb143-12" aria-hidden="true" tabindex="-1"></a>    <span class="op">};</span></span>
<span id="cb143-13"><a href="#cb143-13" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> temp<span class="op">[</span>MAX_LENGTH<span class="op">];</span></span>
<span id="cb143-14"><a href="#cb143-14" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">,</span> j<span class="op">;</span></span>
<span id="cb143-15"><a href="#cb143-15" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb143-16"><a href="#cb143-16" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ソート前:</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb143-17"><a href="#cb143-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> MAX_WORDS<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb143-18"><a href="#cb143-18" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%s</span><span class="st"> &quot;</span><span class="op">,</span> words<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb143-19"><a href="#cb143-19" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb143-20"><a href="#cb143-20" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb143-21"><a href="#cb143-21" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb143-22"><a href="#cb143-22" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* バブルソート */</span></span>
<span id="cb143-23"><a href="#cb143-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> MAX_WORDS <span class="op">-</span> <span class="dv">1</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb143-24"><a href="#cb143-24" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span>j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> j <span class="op">&lt;</span> MAX_WORDS <span class="op">-</span> <span class="dv">1</span> <span class="op">-</span> i<span class="op">;</span> j<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb143-25"><a href="#cb143-25" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>strcmp<span class="op">(</span>words<span class="op">[</span>j<span class="op">],</span> words<span class="op">[</span>j <span class="op">+</span> <span class="dv">1</span><span class="op">])</span> <span class="op">&gt;</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb143-26"><a href="#cb143-26" aria-hidden="true" tabindex="-1"></a>                strcpy<span class="op">(</span>temp<span class="op">,</span> words<span class="op">[</span>j<span class="op">]);</span></span>
<span id="cb143-27"><a href="#cb143-27" aria-hidden="true" tabindex="-1"></a>                strcpy<span class="op">(</span>words<span class="op">[</span>j<span class="op">],</span> words<span class="op">[</span>j <span class="op">+</span> <span class="dv">1</span><span class="op">]);</span></span>
<span id="cb143-28"><a href="#cb143-28" aria-hidden="true" tabindex="-1"></a>                strcpy<span class="op">(</span>words<span class="op">[</span>j <span class="op">+</span> <span class="dv">1</span><span class="op">],</span> temp<span class="op">);</span></span>
<span id="cb143-29"><a href="#cb143-29" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb143-30"><a href="#cb143-30" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb143-31"><a href="#cb143-31" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb143-32"><a href="#cb143-32" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb143-33"><a href="#cb143-33" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ソート後:</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb143-34"><a href="#cb143-34" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> MAX_WORDS<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb143-35"><a href="#cb143-35" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%s</span><span class="st"> &quot;</span><span class="op">,</span> words<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb143-36"><a href="#cb143-36" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb143-37"><a href="#cb143-37" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb143-38"><a href="#cb143-38" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb143-39"><a href="#cb143-39" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb143-40"><a href="#cb143-40" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h4 data-number="9.3.5.2" id="文字列配列での検索"><span
class="header-section-number">9.3.5.2</span> 文字列配列での検索</h4>
<div class="sourceCode" id="cb144"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb144-1"><a href="#cb144-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb144-2"><a href="#cb144-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;string.h&gt;</span></span>
<span id="cb144-3"><a href="#cb144-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb144-4"><a href="#cb144-4" aria-hidden="true" tabindex="-1"></a><span class="pp">#define MAX_CITIES </span><span class="dv">10</span></span>
<span id="cb144-5"><a href="#cb144-5" aria-hidden="true" tabindex="-1"></a><span class="pp">#define MAX_LENGTH </span><span class="dv">20</span></span>
<span id="cb144-6"><a href="#cb144-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb144-7"><a href="#cb144-7" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> search_city<span class="op">(</span><span class="dt">char</span> cities<span class="op">[][</span>MAX_LENGTH<span class="op">],</span> <span class="dt">int</span> count<span class="op">,</span> <span class="dt">char</span> <span class="op">*</span>target<span class="op">)</span></span>
<span id="cb144-8"><a href="#cb144-8" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb144-9"><a href="#cb144-9" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb144-10"><a href="#cb144-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> count<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb144-11"><a href="#cb144-11" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>strcmp<span class="op">(</span>cities<span class="op">[</span>i<span class="op">],</span> target<span class="op">)</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb144-12"><a href="#cb144-12" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> i<span class="op">;</span>  <span class="co">/* 見つかった場合のインデックス */</span></span>
<span id="cb144-13"><a href="#cb144-13" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb144-14"><a href="#cb144-14" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb144-15"><a href="#cb144-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">-</span><span class="dv">1</span><span class="op">;</span>  <span class="co">/* 見つからない場合 */</span></span>
<span id="cb144-16"><a href="#cb144-16" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb144-17"><a href="#cb144-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb144-18"><a href="#cb144-18" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb144-19"><a href="#cb144-19" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb144-20"><a href="#cb144-20" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> cities<span class="op">[</span>MAX_CITIES<span class="op">][</span>MAX_LENGTH<span class="op">]</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb144-21"><a href="#cb144-21" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;Tokyo&quot;</span><span class="op">,</span> <span class="st">&quot;Osaka&quot;</span><span class="op">,</span> <span class="st">&quot;Kyoto&quot;</span><span class="op">,</span> <span class="st">&quot;Nagoya&quot;</span><span class="op">,</span> <span class="st">&quot;Sapporo&quot;</span><span class="op">,</span></span>
<span id="cb144-22"><a href="#cb144-22" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;Fukuoka&quot;</span><span class="op">,</span> <span class="st">&quot;Kobe&quot;</span><span class="op">,</span> <span class="st">&quot;Sendai&quot;</span><span class="op">,</span> <span class="st">&quot;Hiroshima&quot;</span><span class="op">,</span> <span class="st">&quot;Yokohama&quot;</span></span>
<span id="cb144-23"><a href="#cb144-23" aria-hidden="true" tabindex="-1"></a>    <span class="op">};</span></span>
<span id="cb144-24"><a href="#cb144-24" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> search_target<span class="op">[]</span> <span class="op">=</span> <span class="st">&quot;Kyoto&quot;</span><span class="op">;</span></span>
<span id="cb144-25"><a href="#cb144-25" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> result<span class="op">;</span></span>
<span id="cb144-26"><a href="#cb144-26" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb144-27"><a href="#cb144-27" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb144-28"><a href="#cb144-28" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;都市一覧:</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb144-29"><a href="#cb144-29" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> MAX_CITIES<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb144-30"><a href="#cb144-30" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st">. </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">,</span> cities<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb144-31"><a href="#cb144-31" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb144-32"><a href="#cb144-32" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb144-33"><a href="#cb144-33" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 検索実行 */</span></span>
<span id="cb144-34"><a href="#cb144-34" aria-hidden="true" tabindex="-1"></a>    result <span class="op">=</span> search_city<span class="op">(</span>cities<span class="op">,</span> MAX_CITIES<span class="op">,</span> search_target<span class="op">);</span></span>
<span id="cb144-35"><a href="#cb144-35" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>result <span class="op">!=</span> <span class="op">-</span><span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb144-36"><a href="#cb144-36" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n\&quot;%s\&quot;</span><span class="st"> は </span><span class="sc">%d</span><span class="st">番目にあります。</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> search_target<span class="op">,</span> result <span class="op">+</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb144-37"><a href="#cb144-37" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb144-38"><a href="#cb144-38" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n\&quot;%s\&quot;</span><span class="st"> は見つかりませんでした。</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> search_target<span class="op">);</span></span>
<span id="cb144-39"><a href="#cb144-39" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb144-40"><a href="#cb144-40" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb144-41"><a href="#cb144-41" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb144-42"><a href="#cb144-42" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 data-number="9.3.6" id="実践的な文字列処理"><span
class="header-section-number">9.3.6</span> 実践的な文字列処理 💡</h3>
<h4 data-number="9.3.6.1" id="文字列の分割トークン化"><span
class="header-section-number">9.3.6.1</span>
文字列の分割（トークン化）</h4>
<div class="sourceCode" id="cb145"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb145-1"><a href="#cb145-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb145-2"><a href="#cb145-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;string.h&gt;</span></span>
<span id="cb145-3"><a href="#cb145-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb145-4"><a href="#cb145-4" aria-hidden="true" tabindex="-1"></a><span class="pp">#define MAX_TOKENS </span><span class="dv">10</span></span>
<span id="cb145-5"><a href="#cb145-5" aria-hidden="true" tabindex="-1"></a><span class="pp">#define MAX_LENGTH </span><span class="dv">50</span></span>
<span id="cb145-6"><a href="#cb145-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb145-7"><a href="#cb145-7" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb145-8"><a href="#cb145-8" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb145-9"><a href="#cb145-9" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> input<span class="op">[]</span> <span class="op">=</span> <span class="st">&quot;apple,banana,cherry,date,elderberry&quot;</span><span class="op">;</span></span>
<span id="cb145-10"><a href="#cb145-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> tokens<span class="op">[</span>MAX_TOKENS<span class="op">][</span>MAX_LENGTH<span class="op">];</span></span>
<span id="cb145-11"><a href="#cb145-11" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> temp<span class="op">[</span><span class="dv">100</span><span class="op">];</span></span>
<span id="cb145-12"><a href="#cb145-12" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> <span class="op">*</span>token<span class="op">;</span></span>
<span id="cb145-13"><a href="#cb145-13" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> count <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb145-14"><a href="#cb145-14" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb145-15"><a href="#cb145-15" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb145-16"><a href="#cb145-16" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 入力文字列をコピー（strtokは元の文字列を変更するため） */</span></span>
<span id="cb145-17"><a href="#cb145-17" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>temp<span class="op">,</span> input<span class="op">);</span></span>
<span id="cb145-18"><a href="#cb145-18" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb145-19"><a href="#cb145-19" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* カンマで分割 */</span></span>
<span id="cb145-20"><a href="#cb145-20" aria-hidden="true" tabindex="-1"></a>    token <span class="op">=</span> strtok<span class="op">(</span>temp<span class="op">,</span> <span class="st">&quot;,&quot;</span><span class="op">);</span></span>
<span id="cb145-21"><a href="#cb145-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>token <span class="op">!=</span> NULL <span class="op">&amp;&amp;</span> count <span class="op">&lt;</span> MAX_TOKENS<span class="op">)</span> <span class="op">{</span></span>
<span id="cb145-22"><a href="#cb145-22" aria-hidden="true" tabindex="-1"></a>        strcpy<span class="op">(</span>tokens<span class="op">[</span>count<span class="op">],</span> token<span class="op">);</span></span>
<span id="cb145-23"><a href="#cb145-23" aria-hidden="true" tabindex="-1"></a>        count<span class="op">++;</span></span>
<span id="cb145-24"><a href="#cb145-24" aria-hidden="true" tabindex="-1"></a>        token <span class="op">=</span> strtok<span class="op">(</span>NULL<span class="op">,</span> <span class="st">&quot;,&quot;</span><span class="op">);</span></span>
<span id="cb145-25"><a href="#cb145-25" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb145-26"><a href="#cb145-26" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb145-27"><a href="#cb145-27" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;分割結果:</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb145-28"><a href="#cb145-28" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> count<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb145-29"><a href="#cb145-29" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st">: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">,</span> tokens<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb145-30"><a href="#cb145-30" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb145-31"><a href="#cb145-31" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb145-32"><a href="#cb145-32" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb145-33"><a href="#cb145-33" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h4 data-number="9.3.6.2" id="文字列の変換大文字小文字"><span
class="header-section-number">9.3.6.2</span>
文字列の変換（大文字・小文字）</h4>
<div class="sourceCode" id="cb146"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb146-1"><a href="#cb146-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb146-2"><a href="#cb146-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;string.h&gt;</span></span>
<span id="cb146-3"><a href="#cb146-3" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;ctype.h&gt;</span></span>
<span id="cb146-4"><a href="#cb146-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb146-5"><a href="#cb146-5" aria-hidden="true" tabindex="-1"></a><span class="pp">#define MAX_STRINGS </span><span class="dv">5</span></span>
<span id="cb146-6"><a href="#cb146-6" aria-hidden="true" tabindex="-1"></a><span class="pp">#define MAX_LENGTH </span><span class="dv">30</span></span>
<span id="cb146-7"><a href="#cb146-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb146-8"><a href="#cb146-8" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> to_uppercase<span class="op">(</span><span class="dt">char</span> <span class="op">*</span>str<span class="op">)</span></span>
<span id="cb146-9"><a href="#cb146-9" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb146-10"><a href="#cb146-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb146-11"><a href="#cb146-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> str<span class="op">[</span>i<span class="op">]</span> <span class="op">!=</span> <span class="ch">&#39;</span><span class="sc">\0</span><span class="ch">&#39;</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb146-12"><a href="#cb146-12" aria-hidden="true" tabindex="-1"></a>        str<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> toupper<span class="op">(</span>str<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb146-13"><a href="#cb146-13" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb146-14"><a href="#cb146-14" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb146-15"><a href="#cb146-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb146-16"><a href="#cb146-16" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> to_lowercase<span class="op">(</span><span class="dt">char</span> <span class="op">*</span>str<span class="op">)</span></span>
<span id="cb146-17"><a href="#cb146-17" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb146-18"><a href="#cb146-18" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb146-19"><a href="#cb146-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> str<span class="op">[</span>i<span class="op">]</span> <span class="op">!=</span> <span class="ch">&#39;</span><span class="sc">\0</span><span class="ch">&#39;</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb146-20"><a href="#cb146-20" aria-hidden="true" tabindex="-1"></a>        str<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> tolower<span class="op">(</span>str<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb146-21"><a href="#cb146-21" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb146-22"><a href="#cb146-22" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb146-23"><a href="#cb146-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb146-24"><a href="#cb146-24" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb146-25"><a href="#cb146-25" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb146-26"><a href="#cb146-26" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> original<span class="op">[</span>MAX_STRINGS<span class="op">][</span>MAX_LENGTH<span class="op">]</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb146-27"><a href="#cb146-27" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;Hello World&quot;</span><span class="op">,</span></span>
<span id="cb146-28"><a href="#cb146-28" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;Programming Language&quot;</span><span class="op">,</span></span>
<span id="cb146-29"><a href="#cb146-29" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;C Language Tutorial&quot;</span><span class="op">,</span></span>
<span id="cb146-30"><a href="#cb146-30" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;String Processing&quot;</span><span class="op">,</span></span>
<span id="cb146-31"><a href="#cb146-31" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;Array Manipulation&quot;</span></span>
<span id="cb146-32"><a href="#cb146-32" aria-hidden="true" tabindex="-1"></a>    <span class="op">};</span></span>
<span id="cb146-33"><a href="#cb146-33" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> uppercase<span class="op">[</span>MAX_STRINGS<span class="op">][</span>MAX_LENGTH<span class="op">];</span></span>
<span id="cb146-34"><a href="#cb146-34" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> lowercase<span class="op">[</span>MAX_STRINGS<span class="op">][</span>MAX_LENGTH<span class="op">];</span></span>
<span id="cb146-35"><a href="#cb146-35" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb146-36"><a href="#cb146-36" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb146-37"><a href="#cb146-37" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 文字列をコピーして変換 */</span></span>
<span id="cb146-38"><a href="#cb146-38" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> MAX_STRINGS<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb146-39"><a href="#cb146-39" aria-hidden="true" tabindex="-1"></a>        strcpy<span class="op">(</span>uppercase<span class="op">[</span>i<span class="op">],</span> original<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb146-40"><a href="#cb146-40" aria-hidden="true" tabindex="-1"></a>        strcpy<span class="op">(</span>lowercase<span class="op">[</span>i<span class="op">],</span> original<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb146-41"><a href="#cb146-41" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb146-42"><a href="#cb146-42" aria-hidden="true" tabindex="-1"></a>        to_uppercase<span class="op">(</span>uppercase<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb146-43"><a href="#cb146-43" aria-hidden="true" tabindex="-1"></a>        to_lowercase<span class="op">(</span>lowercase<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb146-44"><a href="#cb146-44" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb146-45"><a href="#cb146-45" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb146-46"><a href="#cb146-46" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 結果の表示 */</span></span>
<span id="cb146-47"><a href="#cb146-47" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;元の文字列 -&gt; 大文字 -&gt; 小文字</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb146-48"><a href="#cb146-48" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=====================================</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb146-49"><a href="#cb146-49" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> MAX_STRINGS<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb146-50"><a href="#cb146-50" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%-20s</span><span class="st"> -&gt; </span><span class="sc">%-20s</span><span class="st"> -&gt; </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> </span>
<span id="cb146-51"><a href="#cb146-51" aria-hidden="true" tabindex="-1"></a>               original<span class="op">[</span>i<span class="op">],</span> uppercase<span class="op">[</span>i<span class="op">],</span> lowercase<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb146-52"><a href="#cb146-52" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb146-53"><a href="#cb146-53" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb146-54"><a href="#cb146-54" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb146-55"><a href="#cb146-55" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h4 data-number="9.3.6.3" id="文字列配列を使った簡易データベース"><span
class="header-section-number">9.3.6.3</span>
文字列配列を使った簡易データベース</h4>
<div class="sourceCode" id="cb147"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb147-1"><a href="#cb147-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb147-2"><a href="#cb147-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;string.h&gt;</span></span>
<span id="cb147-3"><a href="#cb147-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb147-4"><a href="#cb147-4" aria-hidden="true" tabindex="-1"></a><span class="pp">#define MAX_RECORDS </span><span class="dv">100</span></span>
<span id="cb147-5"><a href="#cb147-5" aria-hidden="true" tabindex="-1"></a><span class="pp">#define MAX_FIELD_LENGTH </span><span class="dv">50</span></span>
<span id="cb147-6"><a href="#cb147-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb147-7"><a href="#cb147-7" aria-hidden="true" tabindex="-1"></a><span class="kw">typedef</span> <span class="kw">struct</span> <span class="op">{</span></span>
<span id="cb147-8"><a href="#cb147-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> name<span class="op">[</span>MAX_FIELD_LENGTH<span class="op">];</span></span>
<span id="cb147-9"><a href="#cb147-9" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> department<span class="op">[</span>MAX_FIELD_LENGTH<span class="op">];</span></span>
<span id="cb147-10"><a href="#cb147-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> position<span class="op">[</span>MAX_FIELD_LENGTH<span class="op">];</span></span>
<span id="cb147-11"><a href="#cb147-11" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> salary<span class="op">;</span></span>
<span id="cb147-12"><a href="#cb147-12" aria-hidden="true" tabindex="-1"></a><span class="op">}</span> Employee<span class="op">;</span></span>
<span id="cb147-13"><a href="#cb147-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb147-14"><a href="#cb147-14" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb147-15"><a href="#cb147-15" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb147-16"><a href="#cb147-16" aria-hidden="true" tabindex="-1"></a>    Employee employees<span class="op">[</span>MAX_RECORDS<span class="op">];</span></span>
<span id="cb147-17"><a href="#cb147-17" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> <span class="op">*</span>departments<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="st">&quot;営業&quot;</span><span class="op">,</span> <span class="st">&quot;開発&quot;</span><span class="op">,</span> <span class="st">&quot;人事&quot;</span><span class="op">,</span> <span class="st">&quot;経理&quot;</span><span class="op">};</span></span>
<span id="cb147-18"><a href="#cb147-18" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> <span class="op">*</span>positions<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="st">&quot;部長&quot;</span><span class="op">,</span> <span class="st">&quot;課長&quot;</span><span class="op">,</span> <span class="st">&quot;主任&quot;</span><span class="op">,</span> <span class="st">&quot;一般&quot;</span><span class="op">};</span></span>
<span id="cb147-19"><a href="#cb147-19" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> employee_count <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb147-20"><a href="#cb147-20" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">,</span> j<span class="op">;</span></span>
<span id="cb147-21"><a href="#cb147-21" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb147-22"><a href="#cb147-22" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* サンプルデータの追加 */</span></span>
<span id="cb147-23"><a href="#cb147-23" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>employees<span class="op">[</span>employee_count<span class="op">].</span>name<span class="op">,</span> <span class="st">&quot;田中太郎&quot;</span><span class="op">);</span></span>
<span id="cb147-24"><a href="#cb147-24" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>employees<span class="op">[</span>employee_count<span class="op">].</span>department<span class="op">,</span> departments<span class="op">[</span><span class="dv">1</span><span class="op">]);</span> <span class="co">/* 開発 */</span></span>
<span id="cb147-25"><a href="#cb147-25" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>employees<span class="op">[</span>employee_count<span class="op">].</span>position<span class="op">,</span> positions<span class="op">[</span><span class="dv">1</span><span class="op">]);</span>     <span class="co">/* 課長 */</span></span>
<span id="cb147-26"><a href="#cb147-26" aria-hidden="true" tabindex="-1"></a>    employees<span class="op">[</span>employee_count<span class="op">].</span>salary <span class="op">=</span> <span class="dv">600000</span><span class="op">;</span></span>
<span id="cb147-27"><a href="#cb147-27" aria-hidden="true" tabindex="-1"></a>    employee_count<span class="op">++;</span></span>
<span id="cb147-28"><a href="#cb147-28" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb147-29"><a href="#cb147-29" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>employees<span class="op">[</span>employee_count<span class="op">].</span>name<span class="op">,</span> <span class="st">&quot;佐藤花子&quot;</span><span class="op">);</span></span>
<span id="cb147-30"><a href="#cb147-30" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>employees<span class="op">[</span>employee_count<span class="op">].</span>department<span class="op">,</span> departments<span class="op">[</span><span class="dv">0</span><span class="op">]);</span> <span class="co">/* 営業 */</span></span>
<span id="cb147-31"><a href="#cb147-31" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>employees<span class="op">[</span>employee_count<span class="op">].</span>position<span class="op">,</span> positions<span class="op">[</span><span class="dv">0</span><span class="op">]);</span>     <span class="co">/* 部長 */</span></span>
<span id="cb147-32"><a href="#cb147-32" aria-hidden="true" tabindex="-1"></a>    employees<span class="op">[</span>employee_count<span class="op">].</span>salary <span class="op">=</span> <span class="dv">800000</span><span class="op">;</span></span>
<span id="cb147-33"><a href="#cb147-33" aria-hidden="true" tabindex="-1"></a>    employee_count<span class="op">++;</span></span>
<span id="cb147-34"><a href="#cb147-34" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb147-35"><a href="#cb147-35" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>employees<span class="op">[</span>employee_count<span class="op">].</span>name<span class="op">,</span> <span class="st">&quot;鈴木一郎&quot;</span><span class="op">);</span></span>
<span id="cb147-36"><a href="#cb147-36" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>employees<span class="op">[</span>employee_count<span class="op">].</span>department<span class="op">,</span> departments<span class="op">[</span><span class="dv">1</span><span class="op">]);</span> <span class="co">/* 開発 */</span></span>
<span id="cb147-37"><a href="#cb147-37" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>employees<span class="op">[</span>employee_count<span class="op">].</span>position<span class="op">,</span> positions<span class="op">[</span><span class="dv">3</span><span class="op">]);</span>     <span class="co">/* 一般 */</span></span>
<span id="cb147-38"><a href="#cb147-38" aria-hidden="true" tabindex="-1"></a>    employees<span class="op">[</span>employee_count<span class="op">].</span>salary <span class="op">=</span> <span class="dv">400000</span><span class="op">;</span></span>
<span id="cb147-39"><a href="#cb147-39" aria-hidden="true" tabindex="-1"></a>    employee_count<span class="op">++;</span></span>
<span id="cb147-40"><a href="#cb147-40" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb147-41"><a href="#cb147-41" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 全従業員の表示 */</span></span>
<span id="cb147-42"><a href="#cb147-42" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== 従業員一覧 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb147-43"><a href="#cb147-43" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%-15s</span><span class="st"> </span><span class="sc">%-10s</span><span class="st"> </span><span class="sc">%-10s</span><span class="st"> </span><span class="sc">%10s\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="st">&quot;名前&quot;</span><span class="op">,</span> <span class="st">&quot;部署&quot;</span><span class="op">,</span> <span class="st">&quot;役職&quot;</span><span class="op">,</span> <span class="st">&quot;給与&quot;</span><span class="op">);</span></span>
<span id="cb147-44"><a href="#cb147-44" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;--------------------------------------------------</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb147-45"><a href="#cb147-45" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> employee_count<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb147-46"><a href="#cb147-46" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%-15s</span><span class="st"> </span><span class="sc">%-10s</span><span class="st"> </span><span class="sc">%-10s</span><span class="st"> </span><span class="sc">%10d</span><span class="st">円</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span></span>
<span id="cb147-47"><a href="#cb147-47" aria-hidden="true" tabindex="-1"></a>               employees<span class="op">[</span>i<span class="op">].</span>name<span class="op">,</span></span>
<span id="cb147-48"><a href="#cb147-48" aria-hidden="true" tabindex="-1"></a>               employees<span class="op">[</span>i<span class="op">].</span>department<span class="op">,</span></span>
<span id="cb147-49"><a href="#cb147-49" aria-hidden="true" tabindex="-1"></a>               employees<span class="op">[</span>i<span class="op">].</span>position<span class="op">,</span></span>
<span id="cb147-50"><a href="#cb147-50" aria-hidden="true" tabindex="-1"></a>               employees<span class="op">[</span>i<span class="op">].</span>salary<span class="op">);</span></span>
<span id="cb147-51"><a href="#cb147-51" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb147-52"><a href="#cb147-52" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb147-53"><a href="#cb147-53" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 部署別集計 */</span></span>
<span id="cb147-54"><a href="#cb147-54" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">=== 部署別従業員数 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb147-55"><a href="#cb147-55" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">4</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb147-56"><a href="#cb147-56" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> count <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb147-57"><a href="#cb147-57" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span>j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> j <span class="op">&lt;</span> employee_count<span class="op">;</span> j<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb147-58"><a href="#cb147-58" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>strcmp<span class="op">(</span>employees<span class="op">[</span>j<span class="op">].</span>department<span class="op">,</span> departments<span class="op">[</span>i<span class="op">])</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb147-59"><a href="#cb147-59" aria-hidden="true" tabindex="-1"></a>                count<span class="op">++;</span></span>
<span id="cb147-60"><a href="#cb147-60" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb147-61"><a href="#cb147-61" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb147-62"><a href="#cb147-62" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%s</span><span class="st">: </span><span class="sc">%d</span><span class="st">人</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> departments<span class="op">[</span>i<span class="op">],</span> count<span class="op">);</span></span>
<span id="cb147-63"><a href="#cb147-63" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb147-64"><a href="#cb147-64" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb147-65"><a href="#cb147-65" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb147-66"><a href="#cb147-66" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h2 data-number="9.4" id="サンプルコード-7"><span
class="header-section-number">9.4</span> サンプルコード</h2>
<h3 data-number="9.4.1" id="基本的な文字列操作"><span
class="header-section-number">9.4.1</span> 基本的な文字列操作</h3>
<p>プログラムファイル: <code>examples/string_basic.c</code></p>
<p>標準ライブラリの文字列操作関数の使用方法を学習します。</p>
<h3 data-number="9.4.2" id="文字列配列の実践例"><span
class="header-section-number">9.4.2</span> 文字列配列の実践例</h3>
<p>プログラムファイル:
<code>examples/string_array_operations.c</code></p>
<p>2次元文字配列と文字列ポインタ配列の使い分けを学習します。</p>
<h3 data-number="9.4.3" id="文字列処理の応用"><span
class="header-section-number">9.4.3</span> 文字列処理の応用</h3>
<p>プログラムファイル:
<code>examples/advanced_string_processing.c</code></p>
<p>実践的な文字列処理テクニックを学習します。</p>
<h3 data-number="9.4.4" id="コンパイルと実行-7"><span
class="header-section-number">9.4.4</span> コンパイルと実行</h3>
<div class="sourceCode" id="cb148"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb148-1"><a href="#cb148-1" aria-hidden="true" tabindex="-1"></a><span class="co"># examples ディレクトリに移動</span></span>
<span id="cb148-2"><a href="#cb148-2" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> examples</span>
<span id="cb148-3"><a href="#cb148-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb148-4"><a href="#cb148-4" aria-hidden="true" tabindex="-1"></a><span class="co"># C90準拠でコンパイル</span></span>
<span id="cb148-5"><a href="#cb148-5" aria-hidden="true" tabindex="-1"></a><span class="fu">gcc</span> <span class="at">-std</span><span class="op">=</span>c90 <span class="at">-Wall</span> <span class="at">-Wextra</span> <span class="at">-pedantic</span> string_basic.c <span class="at">-o</span> string_basic</span>
<span id="cb148-6"><a href="#cb148-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb148-7"><a href="#cb148-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 実行</span></span>
<span id="cb148-8"><a href="#cb148-8" aria-hidden="true" tabindex="-1"></a><span class="ex">./string_basic</span></span></code></pre></div>
<h2 data-number="9.5" id="演習課題-7"><span
class="header-section-number">9.5</span> 演習課題</h2>
<h3 data-number="9.5.1" id="基礎問題-7"><span
class="header-section-number">9.5.1</span> 基礎問題</h3>
<ol type="1">
<li><strong>文字列の基本操作</strong>
<ul>
<li>2つの文字列を入力して連結・比較・長さ計算を行うプログラムを作成してください</li>
</ul></li>
<li><strong>文字列配列の管理</strong>
<ul>
<li>学生名を格納する文字列配列を作成し、追加・削除・表示機能を実装してください</li>
</ul></li>
<li><strong>文字列の検索</strong>
<ul>
<li>文字列配列から特定の文字列を検索するプログラムを作成してください</li>
</ul></li>
</ol>
<h3 data-number="9.5.2" id="応用問題-7"><span
class="header-section-number">9.5.2</span> 応用問題</h3>
<ol type="1">
<li><strong>単語カウンタ</strong>
<ul>
<li>文章を入力して、各単語の出現回数をカウントするプログラムを作成してください</li>
</ul></li>
<li><strong>文字列ソートプログラム</strong>
<ul>
<li>複数の文字列を入力してアルファベット順にソートするプログラムを作成してください</li>
</ul></li>
<li><strong>簡易テキストエディタ</strong>
<ul>
<li>文字列配列を使って行単位でテキストを管理するプログラムを作成してください</li>
</ul></li>
</ol>
<h3 data-number="9.5.3" id="発展問題-2"><span
class="header-section-number">9.5.3</span> 発展問題</h3>
<ol type="1">
<li><strong>文字列データベース</strong>
<ul>
<li>商品情報（名前、価格、カテゴリ）を文字列配列で管理するシステムを作成してください</li>
</ul></li>
<li><strong>文字列パーサー</strong>
<ul>
<li>CSV形式の文字列を解析して構造化データに変換するプログラムを作成してください</li>
</ul></li>
<li><strong>文字列暗号化</strong>
<ul>
<li>簡単な暗号化・復号化機能を持つプログラムを作成してください</li>
</ul></li>
</ol>
<h2 data-number="9.6" id="コンパイル方法-7"><span
class="header-section-number">9.6</span> コンパイル方法</h2>
<p>この章では以下のMakefileを使用してコンパイルができます：</p>
<div class="sourceCode" id="cb149"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb149-1"><a href="#cb149-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 全ての例題をコンパイル</span></span>
<span id="cb149-2"><a href="#cb149-2" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> all</span>
<span id="cb149-3"><a href="#cb149-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb149-4"><a href="#cb149-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 特定のプログラムをコンパイル</span></span>
<span id="cb149-5"><a href="#cb149-5" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> string_basic</span>
<span id="cb149-6"><a href="#cb149-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb149-7"><a href="#cb149-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 実行</span></span>
<span id="cb149-8"><a href="#cb149-8" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> run</span>
<span id="cb149-9"><a href="#cb149-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb149-10"><a href="#cb149-10" aria-hidden="true" tabindex="-1"></a><span class="co"># クリーンアップ</span></span>
<span id="cb149-11"><a href="#cb149-11" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> clean</span></code></pre></div>
<h2 data-number="9.7" id="規格による違い-7"><span
class="header-section-number">9.7</span> 規格による違い</h2>
<h3 data-number="9.7.1" id="c90での制限事項-6"><span
class="header-section-number">9.7.1</span> C90での制限事項</h3>
<ul>
<li>文字列操作はnull終端が前提</li>
<li>可変長文字列配列は使用不可</li>
<li>Unicode対応は限定的</li>
</ul>
<h3 data-number="9.7.2" id="c99以降の拡張-6"><span
class="header-section-number">9.7.2</span> C99以降の拡張</h3>
<ul>
<li>snprintf()などの安全な文字列操作関数</li>
<li>可変長配列による動的な文字列配列</li>
<li>より豊富な文字分類関数</li>
</ul>
<h2 data-number="9.8" id="よくある間違い-5"><span
class="header-section-number">9.8</span> 🚨 よくある間違い</h2>
<h3 data-number="9.8.1" id="null終端の忘れ"><span
class="header-section-number">9.8.1</span> 1. null終端の忘れ</h3>
<div class="sourceCode" id="cb150"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb150-1"><a href="#cb150-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* NG: null終端なし */</span></span>
<span id="cb150-2"><a href="#cb150-2" aria-hidden="true" tabindex="-1"></a><span class="dt">char</span> str<span class="op">[</span><span class="dv">5</span><span class="op">];</span></span>
<span id="cb150-3"><a href="#cb150-3" aria-hidden="true" tabindex="-1"></a>strncpy<span class="op">(</span>str<span class="op">,</span> <span class="st">&quot;Hello&quot;</span><span class="op">,</span> <span class="dv">5</span><span class="op">);</span>  <span class="co">/* null終端なし */</span></span>
<span id="cb150-4"><a href="#cb150-4" aria-hidden="true" tabindex="-1"></a>printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> str<span class="op">);</span>       <span class="co">/* 未定義動作 */</span></span>
<span id="cb150-5"><a href="#cb150-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb150-6"><a href="#cb150-6" aria-hidden="true" tabindex="-1"></a><span class="co">/* OK: 明示的にnull終端 */</span></span>
<span id="cb150-7"><a href="#cb150-7" aria-hidden="true" tabindex="-1"></a><span class="dt">char</span> str<span class="op">[</span><span class="dv">6</span><span class="op">];</span></span>
<span id="cb150-8"><a href="#cb150-8" aria-hidden="true" tabindex="-1"></a>strncpy<span class="op">(</span>str<span class="op">,</span> <span class="st">&quot;Hello&quot;</span><span class="op">,</span> <span class="dv">5</span><span class="op">);</span></span>
<span id="cb150-9"><a href="#cb150-9" aria-hidden="true" tabindex="-1"></a>str<span class="op">[</span><span class="dv">5</span><span class="op">]</span> <span class="op">=</span> <span class="ch">&#39;</span><span class="sc">\0</span><span class="ch">&#39;</span><span class="op">;</span></span>
<span id="cb150-10"><a href="#cb150-10" aria-hidden="true" tabindex="-1"></a>printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> str<span class="op">);</span></span></code></pre></div>
<h3 data-number="9.8.2" id="バッファオーバーフロー"><span
class="header-section-number">9.8.2</span> 2.
バッファオーバーフロー</h3>
<div class="sourceCode" id="cb151"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb151-1"><a href="#cb151-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* NG: バッファサイズ不足 */</span></span>
<span id="cb151-2"><a href="#cb151-2" aria-hidden="true" tabindex="-1"></a><span class="dt">char</span> small<span class="op">[</span><span class="dv">5</span><span class="op">];</span></span>
<span id="cb151-3"><a href="#cb151-3" aria-hidden="true" tabindex="-1"></a>strcpy<span class="op">(</span>small<span class="op">,</span> <span class="st">&quot;Hello, World!&quot;</span><span class="op">);</span>  <span class="co">/* バッファオーバーフロー */</span></span>
<span id="cb151-4"><a href="#cb151-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb151-5"><a href="#cb151-5" aria-hidden="true" tabindex="-1"></a><span class="co">/* OK: 適切なサイズ */</span></span>
<span id="cb151-6"><a href="#cb151-6" aria-hidden="true" tabindex="-1"></a><span class="dt">char</span> large<span class="op">[</span><span class="dv">20</span><span class="op">];</span></span>
<span id="cb151-7"><a href="#cb151-7" aria-hidden="true" tabindex="-1"></a>strcpy<span class="op">(</span>large<span class="op">,</span> <span class="st">&quot;Hello, World!&quot;</span><span class="op">);</span></span></code></pre></div>
<h3 data-number="9.8.3" id="文字列比較の間違い"><span
class="header-section-number">9.8.3</span> 3. 文字列比較の間違い</h3>
<div class="sourceCode" id="cb152"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb152-1"><a href="#cb152-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* NG: ポインタの比較 */</span></span>
<span id="cb152-2"><a href="#cb152-2" aria-hidden="true" tabindex="-1"></a><span class="dt">char</span> <span class="op">*</span>str1 <span class="op">=</span> <span class="st">&quot;Hello&quot;</span><span class="op">;</span></span>
<span id="cb152-3"><a href="#cb152-3" aria-hidden="true" tabindex="-1"></a><span class="dt">char</span> <span class="op">*</span>str2 <span class="op">=</span> <span class="st">&quot;Hello&quot;</span><span class="op">;</span></span>
<span id="cb152-4"><a href="#cb152-4" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="op">(</span>str1 <span class="op">==</span> str2<span class="op">)</span> <span class="op">{</span> <span class="co">/* 間違い */</span> <span class="op">}</span></span>
<span id="cb152-5"><a href="#cb152-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb152-6"><a href="#cb152-6" aria-hidden="true" tabindex="-1"></a><span class="co">/* OK: 文字列内容の比較 */</span></span>
<span id="cb152-7"><a href="#cb152-7" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="op">(</span>strcmp<span class="op">(</span>str1<span class="op">,</span> str2<span class="op">)</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span> <span class="co">/* 正しい */</span> <span class="op">}</span></span></code></pre></div>
<h2 data-number="9.9" id="次の章へ-7"><span
class="header-section-number">9.9</span> 次の章へ</h2>
<h2 data-number="9.10" id="参考資料-7"><span
class="header-section-number">9.10</span> 参考資料</h2>
<ul>
<li><a
href="https://ja.cppreference.com/w/c/string/byte">C言語文字列リファレンス</a></li>
<li><a
href="https://ja.cppreference.com/w/c/string/ctype">文字分類関数</a></li>
<li><a
href="https://ja.cppreference.com/w/c/string">文字列操作のベストプラクティス</a></li>
</ul>
<h1 data-number="10" id="関数"><span
class="header-section-number">10</span> 関数</h1>
<h2 data-number="10.1" id="対応c規格-9"><span
class="header-section-number">10.1</span> 対応C規格</h2>
<ul>
<li><strong>主要対象:</strong> C90</li>
<li><strong>学習内容:</strong>
関数の基本、引数と戻り値、関数のスコープ、再帰関数、関数プロトタイプ</li>
</ul>
<h2 data-number="10.2" id="学習目標-9"><span
class="header-section-number">10.2</span> 学習目標</h2>
<p>この章を完了すると、以下のことができるようになります：</p>
<ul>
<li>関数の定義と呼び出しができる</li>
<li>引数と戻り値を適切に使える</li>
<li>関数のスコープを理解する</li>
<li>再帰関数を作成できる</li>
<li>関数プロトタイプの重要性を理解する</li>
</ul>
<h2 data-number="10.3" id="理論解説-8"><span
class="header-section-number">10.3</span> 理論解説</h2>
<h3 data-number="10.3.1" id="関数の基本概念"><span
class="header-section-number">10.3.1</span> 関数の基本概念 🔧</h3>
<p>関数は特定の処理をまとめたコードブロックで、プログラムの再利用性と保守性を向上させます。</p>
<h4 data-number="10.3.1.1" id="関数の構成要素"><span
class="header-section-number">10.3.1.1</span> 関数の構成要素</h4>
<div class="sourceCode" id="cb153"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb153-1"><a href="#cb153-1" aria-hidden="true" tabindex="-1"></a>戻り値の型 関数名<span class="op">(</span>引数リスト<span class="op">)</span></span>
<span id="cb153-2"><a href="#cb153-2" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb153-3"><a href="#cb153-3" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 関数本体 */</span></span>
<span id="cb153-4"><a href="#cb153-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> 戻り値<span class="op">;</span>  <span class="co">/* 戻り値がある場合 */</span></span>
<span id="cb153-5"><a href="#cb153-5" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h4 data-number="10.3.1.2" id="基本的な関数の例"><span
class="header-section-number">10.3.1.2</span> 基本的な関数の例</h4>
<div class="sourceCode" id="cb154"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb154-1"><a href="#cb154-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb154-2"><a href="#cb154-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb154-3"><a href="#cb154-3" aria-hidden="true" tabindex="-1"></a><span class="co">/* 2つの数の合計を計算する関数 */</span></span>
<span id="cb154-4"><a href="#cb154-4" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> add<span class="op">(</span><span class="dt">int</span> a<span class="op">,</span> <span class="dt">int</span> b<span class="op">)</span></span>
<span id="cb154-5"><a href="#cb154-5" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb154-6"><a href="#cb154-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> result <span class="op">=</span> a <span class="op">+</span> b<span class="op">;</span></span>
<span id="cb154-7"><a href="#cb154-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> result<span class="op">;</span></span>
<span id="cb154-8"><a href="#cb154-8" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb154-9"><a href="#cb154-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb154-10"><a href="#cb154-10" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb154-11"><a href="#cb154-11" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb154-12"><a href="#cb154-12" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> num1 <span class="op">=</span> <span class="dv">10</span><span class="op">;</span></span>
<span id="cb154-13"><a href="#cb154-13" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> num2 <span class="op">=</span> <span class="dv">20</span><span class="op">;</span></span>
<span id="cb154-14"><a href="#cb154-14" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> sum<span class="op">;</span></span>
<span id="cb154-15"><a href="#cb154-15" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb154-16"><a href="#cb154-16" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 関数の呼び出し */</span></span>
<span id="cb154-17"><a href="#cb154-17" aria-hidden="true" tabindex="-1"></a>    sum <span class="op">=</span> add<span class="op">(</span>num1<span class="op">,</span> num2<span class="op">);</span></span>
<span id="cb154-18"><a href="#cb154-18" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb154-19"><a href="#cb154-19" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st"> + </span><span class="sc">%d</span><span class="st"> = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> num1<span class="op">,</span> num2<span class="op">,</span> sum<span class="op">);</span></span>
<span id="cb154-20"><a href="#cb154-20" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb154-21"><a href="#cb154-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb154-22"><a href="#cb154-22" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 data-number="10.3.2" id="関数の定義と宣言"><span
class="header-section-number">10.3.2</span> 関数の定義と宣言 📝</h3>
<h4 data-number="10.3.2.1" id="関数プロトタイプ前方宣言"><span
class="header-section-number">10.3.2.1</span>
関数プロトタイプ（前方宣言）</h4>
<div class="sourceCode" id="cb155"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb155-1"><a href="#cb155-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb155-2"><a href="#cb155-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb155-3"><a href="#cb155-3" aria-hidden="true" tabindex="-1"></a><span class="co">/* 関数プロトタイプ */</span></span>
<span id="cb155-4"><a href="#cb155-4" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> multiply<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">);</span></span>
<span id="cb155-5"><a href="#cb155-5" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> print_result<span class="op">(</span><span class="dt">int</span> value<span class="op">);</span></span>
<span id="cb155-6"><a href="#cb155-6" aria-hidden="true" tabindex="-1"></a><span class="dt">double</span> calculate_average<span class="op">(</span><span class="dt">int</span> <span class="op">*</span>array<span class="op">,</span> <span class="dt">int</span> size<span class="op">);</span></span>
<span id="cb155-7"><a href="#cb155-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb155-8"><a href="#cb155-8" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb155-9"><a href="#cb155-9" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb155-10"><a href="#cb155-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> a <span class="op">=</span> <span class="dv">5</span><span class="op">,</span> b <span class="op">=</span> <span class="dv">3</span><span class="op">;</span></span>
<span id="cb155-11"><a href="#cb155-11" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> product<span class="op">;</span></span>
<span id="cb155-12"><a href="#cb155-12" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb155-13"><a href="#cb155-13" aria-hidden="true" tabindex="-1"></a>    product <span class="op">=</span> multiply<span class="op">(</span>a<span class="op">,</span> b<span class="op">);</span></span>
<span id="cb155-14"><a href="#cb155-14" aria-hidden="true" tabindex="-1"></a>    print_result<span class="op">(</span>product<span class="op">);</span></span>
<span id="cb155-15"><a href="#cb155-15" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb155-16"><a href="#cb155-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb155-17"><a href="#cb155-17" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb155-18"><a href="#cb155-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb155-19"><a href="#cb155-19" aria-hidden="true" tabindex="-1"></a><span class="co">/* 関数の実装 */</span></span>
<span id="cb155-20"><a href="#cb155-20" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> multiply<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">)</span></span>
<span id="cb155-21"><a href="#cb155-21" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb155-22"><a href="#cb155-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> x <span class="op">*</span> y<span class="op">;</span></span>
<span id="cb155-23"><a href="#cb155-23" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb155-24"><a href="#cb155-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb155-25"><a href="#cb155-25" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> print_result<span class="op">(</span><span class="dt">int</span> value<span class="op">)</span></span>
<span id="cb155-26"><a href="#cb155-26" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb155-27"><a href="#cb155-27" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;結果: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> value<span class="op">);</span></span>
<span id="cb155-28"><a href="#cb155-28" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb155-29"><a href="#cb155-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb155-30"><a href="#cb155-30" aria-hidden="true" tabindex="-1"></a><span class="dt">double</span> calculate_average<span class="op">(</span><span class="dt">int</span> <span class="op">*</span>array<span class="op">,</span> <span class="dt">int</span> size<span class="op">)</span></span>
<span id="cb155-31"><a href="#cb155-31" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb155-32"><a href="#cb155-32" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> sum <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb155-33"><a href="#cb155-33" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb155-34"><a href="#cb155-34" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb155-35"><a href="#cb155-35" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> size<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb155-36"><a href="#cb155-36" aria-hidden="true" tabindex="-1"></a>        sum <span class="op">+=</span> array<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb155-37"><a href="#cb155-37" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb155-38"><a href="#cb155-38" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb155-39"><a href="#cb155-39" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">(</span><span class="dt">double</span><span class="op">)</span>sum <span class="op">/</span> size<span class="op">;</span></span>
<span id="cb155-40"><a href="#cb155-40" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 data-number="10.3.3" id="引数の渡し方"><span
class="header-section-number">10.3.3</span> 引数の渡し方 📤</h3>
<h4 data-number="10.3.3.1" id="値渡しcall-by-value"><span
class="header-section-number">10.3.3.1</span> 値渡し（Call by
Value）</h4>
<div class="sourceCode" id="cb156"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb156-1"><a href="#cb156-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb156-2"><a href="#cb156-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb156-3"><a href="#cb156-3" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> swap_wrong<span class="op">(</span><span class="dt">int</span> a<span class="op">,</span> <span class="dt">int</span> b<span class="op">)</span></span>
<span id="cb156-4"><a href="#cb156-4" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb156-5"><a href="#cb156-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> temp <span class="op">=</span> a<span class="op">;</span></span>
<span id="cb156-6"><a href="#cb156-6" aria-hidden="true" tabindex="-1"></a>    a <span class="op">=</span> b<span class="op">;</span></span>
<span id="cb156-7"><a href="#cb156-7" aria-hidden="true" tabindex="-1"></a>    b <span class="op">=</span> temp<span class="op">;</span></span>
<span id="cb156-8"><a href="#cb156-8" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;関数内: a = </span><span class="sc">%d</span><span class="st">, b = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> a<span class="op">,</span> b<span class="op">);</span></span>
<span id="cb156-9"><a href="#cb156-9" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb156-10"><a href="#cb156-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb156-11"><a href="#cb156-11" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb156-12"><a href="#cb156-12" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb156-13"><a href="#cb156-13" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> x <span class="op">=</span> <span class="dv">10</span><span class="op">,</span> y <span class="op">=</span> <span class="dv">20</span><span class="op">;</span></span>
<span id="cb156-14"><a href="#cb156-14" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb156-15"><a href="#cb156-15" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;呼び出し前: x = </span><span class="sc">%d</span><span class="st">, y = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> x<span class="op">,</span> y<span class="op">);</span></span>
<span id="cb156-16"><a href="#cb156-16" aria-hidden="true" tabindex="-1"></a>    swap_wrong<span class="op">(</span>x<span class="op">,</span> y<span class="op">);</span></span>
<span id="cb156-17"><a href="#cb156-17" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;呼び出し後: x = </span><span class="sc">%d</span><span class="st">, y = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> x<span class="op">,</span> y<span class="op">);</span>  <span class="co">/* 値は変わらない */</span></span>
<span id="cb156-18"><a href="#cb156-18" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb156-19"><a href="#cb156-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb156-20"><a href="#cb156-20" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h4 data-number="10.3.3.2" id="参照渡しポインタを使用"><span
class="header-section-number">10.3.3.2</span>
参照渡し（ポインタを使用）</h4>
<div class="sourceCode" id="cb157"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb157-1"><a href="#cb157-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb157-2"><a href="#cb157-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb157-3"><a href="#cb157-3" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> swap_correct<span class="op">(</span><span class="dt">int</span> <span class="op">*</span>a<span class="op">,</span> <span class="dt">int</span> <span class="op">*</span>b<span class="op">)</span></span>
<span id="cb157-4"><a href="#cb157-4" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb157-5"><a href="#cb157-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> temp <span class="op">=</span> <span class="op">*</span>a<span class="op">;</span></span>
<span id="cb157-6"><a href="#cb157-6" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>a <span class="op">=</span> <span class="op">*</span>b<span class="op">;</span></span>
<span id="cb157-7"><a href="#cb157-7" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>b <span class="op">=</span> temp<span class="op">;</span></span>
<span id="cb157-8"><a href="#cb157-8" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb157-9"><a href="#cb157-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb157-10"><a href="#cb157-10" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb157-11"><a href="#cb157-11" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb157-12"><a href="#cb157-12" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> x <span class="op">=</span> <span class="dv">10</span><span class="op">,</span> y <span class="op">=</span> <span class="dv">20</span><span class="op">;</span></span>
<span id="cb157-13"><a href="#cb157-13" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb157-14"><a href="#cb157-14" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;呼び出し前: x = </span><span class="sc">%d</span><span class="st">, y = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> x<span class="op">,</span> y<span class="op">);</span></span>
<span id="cb157-15"><a href="#cb157-15" aria-hidden="true" tabindex="-1"></a>    swap_correct<span class="op">(&amp;</span>x<span class="op">,</span> <span class="op">&amp;</span>y<span class="op">);</span></span>
<span id="cb157-16"><a href="#cb157-16" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;呼び出し後: x = </span><span class="sc">%d</span><span class="st">, y = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> x<span class="op">,</span> y<span class="op">);</span>  <span class="co">/* 値が交換される */</span></span>
<span id="cb157-17"><a href="#cb157-17" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb157-18"><a href="#cb157-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb157-19"><a href="#cb157-19" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 data-number="10.3.4" id="配列を引数とする関数"><span
class="header-section-number">10.3.4</span> 配列を引数とする関数 📊</h3>
<h4 data-number="10.3.4.1" id="次元配列の渡し方"><span
class="header-section-number">10.3.4.1</span> 1次元配列の渡し方</h4>
<div class="sourceCode" id="cb158"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb158-1"><a href="#cb158-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb158-2"><a href="#cb158-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb158-3"><a href="#cb158-3" aria-hidden="true" tabindex="-1"></a><span class="co">/* 配列のサイズを計算（要素数を別途渡す必要がある） */</span></span>
<span id="cb158-4"><a href="#cb158-4" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> find_max<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> size<span class="op">)</span></span>
<span id="cb158-5"><a href="#cb158-5" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb158-6"><a href="#cb158-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> max <span class="op">=</span> arr<span class="op">[</span><span class="dv">0</span><span class="op">];</span></span>
<span id="cb158-7"><a href="#cb158-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb158-8"><a href="#cb158-8" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb158-9"><a href="#cb158-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&lt;</span> size<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb158-10"><a href="#cb158-10" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>arr<span class="op">[</span>i<span class="op">]</span> <span class="op">&gt;</span> max<span class="op">)</span> <span class="op">{</span></span>
<span id="cb158-11"><a href="#cb158-11" aria-hidden="true" tabindex="-1"></a>            max <span class="op">=</span> arr<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb158-12"><a href="#cb158-12" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb158-13"><a href="#cb158-13" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb158-14"><a href="#cb158-14" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb158-15"><a href="#cb158-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> max<span class="op">;</span></span>
<span id="cb158-16"><a href="#cb158-16" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb158-17"><a href="#cb158-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb158-18"><a href="#cb158-18" aria-hidden="true" tabindex="-1"></a><span class="co">/* 配列の要素を表示 */</span></span>
<span id="cb158-19"><a href="#cb158-19" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> print_array<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> size<span class="op">)</span></span>
<span id="cb158-20"><a href="#cb158-20" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb158-21"><a href="#cb158-21" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb158-22"><a href="#cb158-22" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb158-23"><a href="#cb158-23" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;配列: &quot;</span><span class="op">);</span></span>
<span id="cb158-24"><a href="#cb158-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> size<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb158-25"><a href="#cb158-25" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st"> &quot;</span><span class="op">,</span> arr<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb158-26"><a href="#cb158-26" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb158-27"><a href="#cb158-27" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb158-28"><a href="#cb158-28" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb158-29"><a href="#cb158-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb158-30"><a href="#cb158-30" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb158-31"><a href="#cb158-31" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb158-32"><a href="#cb158-32" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> numbers<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">3</span><span class="op">,</span> <span class="dv">7</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dv">9</span><span class="op">,</span> <span class="dv">5</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">8</span><span class="op">};</span></span>
<span id="cb158-33"><a href="#cb158-33" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> size <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>numbers<span class="op">)</span> <span class="op">/</span> <span class="kw">sizeof</span><span class="op">(</span>numbers<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb158-34"><a href="#cb158-34" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> maximum<span class="op">;</span></span>
<span id="cb158-35"><a href="#cb158-35" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb158-36"><a href="#cb158-36" aria-hidden="true" tabindex="-1"></a>    print_array<span class="op">(</span>numbers<span class="op">,</span> size<span class="op">);</span></span>
<span id="cb158-37"><a href="#cb158-37" aria-hidden="true" tabindex="-1"></a>    maximum <span class="op">=</span> find_max<span class="op">(</span>numbers<span class="op">,</span> size<span class="op">);</span></span>
<span id="cb158-38"><a href="#cb158-38" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;最大値: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> maximum<span class="op">);</span></span>
<span id="cb158-39"><a href="#cb158-39" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb158-40"><a href="#cb158-40" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb158-41"><a href="#cb158-41" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h4 data-number="10.3.4.2" id="次元配列の渡し方-1"><span
class="header-section-number">10.3.4.2</span> 2次元配列の渡し方</h4>
<div class="sourceCode" id="cb159"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb159-1"><a href="#cb159-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb159-2"><a href="#cb159-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb159-3"><a href="#cb159-3" aria-hidden="true" tabindex="-1"></a><span class="pp">#define ROWS </span><span class="dv">3</span></span>
<span id="cb159-4"><a href="#cb159-4" aria-hidden="true" tabindex="-1"></a><span class="pp">#define COLS </span><span class="dv">4</span></span>
<span id="cb159-5"><a href="#cb159-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb159-6"><a href="#cb159-6" aria-hidden="true" tabindex="-1"></a><span class="co">/* 2次元配列を引数とする関数 */</span></span>
<span id="cb159-7"><a href="#cb159-7" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> print_matrix<span class="op">(</span><span class="dt">int</span> matrix<span class="op">[][</span>COLS<span class="op">],</span> <span class="dt">int</span> rows<span class="op">)</span></span>
<span id="cb159-8"><a href="#cb159-8" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb159-9"><a href="#cb159-9" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">,</span> j<span class="op">;</span></span>
<span id="cb159-10"><a href="#cb159-10" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb159-11"><a href="#cb159-11" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;行列:</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb159-12"><a href="#cb159-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> rows<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb159-13"><a href="#cb159-13" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span>j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> j <span class="op">&lt;</span> COLS<span class="op">;</span> j<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb159-14"><a href="#cb159-14" aria-hidden="true" tabindex="-1"></a>            printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%3d</span><span class="st"> &quot;</span><span class="op">,</span> matrix<span class="op">[</span>i<span class="op">][</span>j<span class="op">]);</span></span>
<span id="cb159-15"><a href="#cb159-15" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb159-16"><a href="#cb159-16" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb159-17"><a href="#cb159-17" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb159-18"><a href="#cb159-18" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb159-19"><a href="#cb159-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb159-20"><a href="#cb159-20" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> matrix_sum<span class="op">(</span><span class="dt">int</span> matrix<span class="op">[][</span>COLS<span class="op">],</span> <span class="dt">int</span> rows<span class="op">)</span></span>
<span id="cb159-21"><a href="#cb159-21" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb159-22"><a href="#cb159-22" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> sum <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb159-23"><a href="#cb159-23" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">,</span> j<span class="op">;</span></span>
<span id="cb159-24"><a href="#cb159-24" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb159-25"><a href="#cb159-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> rows<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb159-26"><a href="#cb159-26" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span>j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> j <span class="op">&lt;</span> COLS<span class="op">;</span> j<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb159-27"><a href="#cb159-27" aria-hidden="true" tabindex="-1"></a>            sum <span class="op">+=</span> matrix<span class="op">[</span>i<span class="op">][</span>j<span class="op">];</span></span>
<span id="cb159-28"><a href="#cb159-28" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb159-29"><a href="#cb159-29" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb159-30"><a href="#cb159-30" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb159-31"><a href="#cb159-31" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> sum<span class="op">;</span></span>
<span id="cb159-32"><a href="#cb159-32" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb159-33"><a href="#cb159-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb159-34"><a href="#cb159-34" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb159-35"><a href="#cb159-35" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb159-36"><a href="#cb159-36" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> data<span class="op">[</span>ROWS<span class="op">][</span>COLS<span class="op">]</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb159-37"><a href="#cb159-37" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span><span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">4</span><span class="op">},</span></span>
<span id="cb159-38"><a href="#cb159-38" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span><span class="dv">5</span><span class="op">,</span> <span class="dv">6</span><span class="op">,</span> <span class="dv">7</span><span class="op">,</span> <span class="dv">8</span><span class="op">},</span></span>
<span id="cb159-39"><a href="#cb159-39" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span><span class="dv">9</span><span class="op">,</span> <span class="dv">10</span><span class="op">,</span> <span class="dv">11</span><span class="op">,</span> <span class="dv">12</span><span class="op">}</span></span>
<span id="cb159-40"><a href="#cb159-40" aria-hidden="true" tabindex="-1"></a>    <span class="op">};</span></span>
<span id="cb159-41"><a href="#cb159-41" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> total<span class="op">;</span></span>
<span id="cb159-42"><a href="#cb159-42" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb159-43"><a href="#cb159-43" aria-hidden="true" tabindex="-1"></a>    print_matrix<span class="op">(</span>data<span class="op">,</span> ROWS<span class="op">);</span></span>
<span id="cb159-44"><a href="#cb159-44" aria-hidden="true" tabindex="-1"></a>    total <span class="op">=</span> matrix_sum<span class="op">(</span>data<span class="op">,</span> ROWS<span class="op">);</span></span>
<span id="cb159-45"><a href="#cb159-45" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;合計: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> total<span class="op">);</span></span>
<span id="cb159-46"><a href="#cb159-46" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb159-47"><a href="#cb159-47" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb159-48"><a href="#cb159-48" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 data-number="10.3.5" id="文字列を引数とする関数"><span
class="header-section-number">10.3.5</span> 文字列を引数とする関数
📝</h3>
<div class="sourceCode" id="cb160"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb160-1"><a href="#cb160-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb160-2"><a href="#cb160-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;string.h&gt;</span></span>
<span id="cb160-3"><a href="#cb160-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb160-4"><a href="#cb160-4" aria-hidden="true" tabindex="-1"></a><span class="co">/* 文字列の長さを計算（自作版） */</span></span>
<span id="cb160-5"><a href="#cb160-5" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> my_strlen<span class="op">(</span><span class="dt">char</span> str<span class="op">[])</span></span>
<span id="cb160-6"><a href="#cb160-6" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb160-7"><a href="#cb160-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> length <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb160-8"><a href="#cb160-8" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb160-9"><a href="#cb160-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>str<span class="op">[</span>length<span class="op">]</span> <span class="op">!=</span> <span class="ch">&#39;</span><span class="sc">\0</span><span class="ch">&#39;</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb160-10"><a href="#cb160-10" aria-hidden="true" tabindex="-1"></a>        length<span class="op">++;</span></span>
<span id="cb160-11"><a href="#cb160-11" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb160-12"><a href="#cb160-12" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb160-13"><a href="#cb160-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> length<span class="op">;</span></span>
<span id="cb160-14"><a href="#cb160-14" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb160-15"><a href="#cb160-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb160-16"><a href="#cb160-16" aria-hidden="true" tabindex="-1"></a><span class="co">/* 文字列を逆順にする */</span></span>
<span id="cb160-17"><a href="#cb160-17" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> reverse_string<span class="op">(</span><span class="dt">char</span> str<span class="op">[])</span></span>
<span id="cb160-18"><a href="#cb160-18" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb160-19"><a href="#cb160-19" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> length <span class="op">=</span> strlen<span class="op">(</span>str<span class="op">);</span></span>
<span id="cb160-20"><a href="#cb160-20" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb160-21"><a href="#cb160-21" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> temp<span class="op">;</span></span>
<span id="cb160-22"><a href="#cb160-22" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb160-23"><a href="#cb160-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> length <span class="op">/</span> <span class="dv">2</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb160-24"><a href="#cb160-24" aria-hidden="true" tabindex="-1"></a>        temp <span class="op">=</span> str<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb160-25"><a href="#cb160-25" aria-hidden="true" tabindex="-1"></a>        str<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> str<span class="op">[</span>length <span class="op">-</span> <span class="dv">1</span> <span class="op">-</span> i<span class="op">];</span></span>
<span id="cb160-26"><a href="#cb160-26" aria-hidden="true" tabindex="-1"></a>        str<span class="op">[</span>length <span class="op">-</span> <span class="dv">1</span> <span class="op">-</span> i<span class="op">]</span> <span class="op">=</span> temp<span class="op">;</span></span>
<span id="cb160-27"><a href="#cb160-27" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb160-28"><a href="#cb160-28" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb160-29"><a href="#cb160-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb160-30"><a href="#cb160-30" aria-hidden="true" tabindex="-1"></a><span class="co">/* 文字列内の特定の文字をカウント */</span></span>
<span id="cb160-31"><a href="#cb160-31" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> count_char<span class="op">(</span><span class="dt">char</span> str<span class="op">[],</span> <span class="dt">char</span> target<span class="op">)</span></span>
<span id="cb160-32"><a href="#cb160-32" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb160-33"><a href="#cb160-33" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> count <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb160-34"><a href="#cb160-34" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb160-35"><a href="#cb160-35" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb160-36"><a href="#cb160-36" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> str<span class="op">[</span>i<span class="op">]</span> <span class="op">!=</span> <span class="ch">&#39;</span><span class="sc">\0</span><span class="ch">&#39;</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb160-37"><a href="#cb160-37" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>str<span class="op">[</span>i<span class="op">]</span> <span class="op">==</span> target<span class="op">)</span> <span class="op">{</span></span>
<span id="cb160-38"><a href="#cb160-38" aria-hidden="true" tabindex="-1"></a>            count<span class="op">++;</span></span>
<span id="cb160-39"><a href="#cb160-39" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb160-40"><a href="#cb160-40" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb160-41"><a href="#cb160-41" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb160-42"><a href="#cb160-42" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> count<span class="op">;</span></span>
<span id="cb160-43"><a href="#cb160-43" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb160-44"><a href="#cb160-44" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb160-45"><a href="#cb160-45" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb160-46"><a href="#cb160-46" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb160-47"><a href="#cb160-47" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> text<span class="op">[]</span> <span class="op">=</span> <span class="st">&quot;Hello, World!&quot;</span><span class="op">;</span></span>
<span id="cb160-48"><a href="#cb160-48" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> length<span class="op">,</span> char_count<span class="op">;</span></span>
<span id="cb160-49"><a href="#cb160-49" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb160-50"><a href="#cb160-50" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;元の文字列: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> text<span class="op">);</span></span>
<span id="cb160-51"><a href="#cb160-51" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb160-52"><a href="#cb160-52" aria-hidden="true" tabindex="-1"></a>    length <span class="op">=</span> my_strlen<span class="op">(</span>text<span class="op">);</span></span>
<span id="cb160-53"><a href="#cb160-53" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;長さ: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> length<span class="op">);</span></span>
<span id="cb160-54"><a href="#cb160-54" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb160-55"><a href="#cb160-55" aria-hidden="true" tabindex="-1"></a>    char_count <span class="op">=</span> count_char<span class="op">(</span>text<span class="op">,</span> <span class="ch">&#39;l&#39;</span><span class="op">);</span></span>
<span id="cb160-56"><a href="#cb160-56" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;&#39;l&#39;の数: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> char_count<span class="op">);</span></span>
<span id="cb160-57"><a href="#cb160-57" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb160-58"><a href="#cb160-58" aria-hidden="true" tabindex="-1"></a>    reverse_string<span class="op">(</span>text<span class="op">);</span></span>
<span id="cb160-59"><a href="#cb160-59" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;逆順: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> text<span class="op">);</span></span>
<span id="cb160-60"><a href="#cb160-60" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb160-61"><a href="#cb160-61" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb160-62"><a href="#cb160-62" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 data-number="10.3.6" id="戻り値のある関数とない関数"><span
class="header-section-number">10.3.6</span> 戻り値のある関数とない関数
↩︎️</h3>
<h4 data-number="10.3.6.1" id="void型関数戻り値なし"><span
class="header-section-number">10.3.6.1</span>
void型関数（戻り値なし）</h4>
<div class="sourceCode" id="cb161"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb161-1"><a href="#cb161-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb161-2"><a href="#cb161-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb161-3"><a href="#cb161-3" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> print_banner<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb161-4"><a href="#cb161-4" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb161-5"><a href="#cb161-5" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;====================</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb161-6"><a href="#cb161-6" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;  C言語チュートリアル  </span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb161-7"><a href="#cb161-7" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;====================</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb161-8"><a href="#cb161-8" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb161-9"><a href="#cb161-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb161-10"><a href="#cb161-10" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> print_separator<span class="op">(</span><span class="dt">int</span> length<span class="op">)</span></span>
<span id="cb161-11"><a href="#cb161-11" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb161-12"><a href="#cb161-12" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb161-13"><a href="#cb161-13" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb161-14"><a href="#cb161-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> length<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb161-15"><a href="#cb161-15" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;-&quot;</span><span class="op">);</span></span>
<span id="cb161-16"><a href="#cb161-16" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb161-17"><a href="#cb161-17" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb161-18"><a href="#cb161-18" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb161-19"><a href="#cb161-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb161-20"><a href="#cb161-20" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb161-21"><a href="#cb161-21" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb161-22"><a href="#cb161-22" aria-hidden="true" tabindex="-1"></a>    print_banner<span class="op">();</span></span>
<span id="cb161-23"><a href="#cb161-23" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;関数の学習中...</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb161-24"><a href="#cb161-24" aria-hidden="true" tabindex="-1"></a>    print_separator<span class="op">(</span><span class="dv">30</span><span class="op">);</span></span>
<span id="cb161-25"><a href="#cb161-25" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;プログラム終了</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb161-26"><a href="#cb161-26" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb161-27"><a href="#cb161-27" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb161-28"><a href="#cb161-28" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h4 data-number="10.3.6.2" id="複数の戻り値ポインタ利用"><span
class="header-section-number">10.3.6.2</span>
複数の戻り値（ポインタ利用）</h4>
<div class="sourceCode" id="cb162"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb162-1"><a href="#cb162-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb162-2"><a href="#cb162-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb162-3"><a href="#cb162-3" aria-hidden="true" tabindex="-1"></a><span class="co">/* 2次方程式の解を計算（実数解のみ） */</span></span>
<span id="cb162-4"><a href="#cb162-4" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> solve_quadratic<span class="op">(</span><span class="dt">double</span> a<span class="op">,</span> <span class="dt">double</span> b<span class="op">,</span> <span class="dt">double</span> c<span class="op">,</span> <span class="dt">double</span> <span class="op">*</span>x1<span class="op">,</span> <span class="dt">double</span> <span class="op">*</span>x2<span class="op">)</span></span>
<span id="cb162-5"><a href="#cb162-5" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb162-6"><a href="#cb162-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span> discriminant <span class="op">=</span> b <span class="op">*</span> b <span class="op">-</span> <span class="dv">4</span> <span class="op">*</span> a <span class="op">*</span> c<span class="op">;</span></span>
<span id="cb162-7"><a href="#cb162-7" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb162-8"><a href="#cb162-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>discriminant <span class="op">&lt;</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb162-9"><a href="#cb162-9" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span>  <span class="co">/* 実数解なし */</span></span>
<span id="cb162-10"><a href="#cb162-10" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb162-11"><a href="#cb162-11" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb162-12"><a href="#cb162-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>discriminant <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb162-13"><a href="#cb162-13" aria-hidden="true" tabindex="-1"></a>        <span class="op">*</span>x1 <span class="op">=</span> <span class="op">*</span>x2 <span class="op">=</span> <span class="op">-</span>b <span class="op">/</span> <span class="op">(</span><span class="dv">2</span> <span class="op">*</span> a<span class="op">);</span></span>
<span id="cb162-14"><a href="#cb162-14" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="dv">1</span><span class="op">;</span>  <span class="co">/* 重解 */</span></span>
<span id="cb162-15"><a href="#cb162-15" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb162-16"><a href="#cb162-16" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb162-17"><a href="#cb162-17" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>x1 <span class="op">=</span> <span class="op">(-</span>b <span class="op">+</span> sqrt<span class="op">(</span>discriminant<span class="op">))</span> <span class="op">/</span> <span class="op">(</span><span class="dv">2</span> <span class="op">*</span> a<span class="op">);</span></span>
<span id="cb162-18"><a href="#cb162-18" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>x2 <span class="op">=</span> <span class="op">(-</span>b <span class="op">-</span> sqrt<span class="op">(</span>discriminant<span class="op">))</span> <span class="op">/</span> <span class="op">(</span><span class="dv">2</span> <span class="op">*</span> a<span class="op">);</span></span>
<span id="cb162-19"><a href="#cb162-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">2</span><span class="op">;</span>  <span class="co">/* 2つの異なる実数解 */</span></span>
<span id="cb162-20"><a href="#cb162-20" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb162-21"><a href="#cb162-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb162-22"><a href="#cb162-22" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb162-23"><a href="#cb162-23" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb162-24"><a href="#cb162-24" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span> a <span class="op">=</span> <span class="fl">1.0</span><span class="op">,</span> b <span class="op">=</span> <span class="op">-</span><span class="fl">5.0</span><span class="op">,</span> c <span class="op">=</span> <span class="fl">6.0</span><span class="op">;</span>  <span class="co">/* x^2 - 5x + 6 = 0 */</span></span>
<span id="cb162-25"><a href="#cb162-25" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span> solution1<span class="op">,</span> solution2<span class="op">;</span></span>
<span id="cb162-26"><a href="#cb162-26" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> result<span class="op">;</span></span>
<span id="cb162-27"><a href="#cb162-27" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb162-28"><a href="#cb162-28" aria-hidden="true" tabindex="-1"></a>    result <span class="op">=</span> solve_quadratic<span class="op">(</span>a<span class="op">,</span> b<span class="op">,</span> c<span class="op">,</span> <span class="op">&amp;</span>solution1<span class="op">,</span> <span class="op">&amp;</span>solution2<span class="op">);</span></span>
<span id="cb162-29"><a href="#cb162-29" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb162-30"><a href="#cb162-30" aria-hidden="true" tabindex="-1"></a>    <span class="cf">switch</span> <span class="op">(</span>result<span class="op">)</span> <span class="op">{</span></span>
<span id="cb162-31"><a href="#cb162-31" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> <span class="dv">0</span><span class="op">:</span></span>
<span id="cb162-32"><a href="#cb162-32" aria-hidden="true" tabindex="-1"></a>            printf<span class="op">(</span><span class="st">&quot;実数解はありません</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb162-33"><a href="#cb162-33" aria-hidden="true" tabindex="-1"></a>            <span class="cf">break</span><span class="op">;</span></span>
<span id="cb162-34"><a href="#cb162-34" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> <span class="dv">1</span><span class="op">:</span></span>
<span id="cb162-35"><a href="#cb162-35" aria-hidden="true" tabindex="-1"></a>            printf<span class="op">(</span><span class="st">&quot;重解: x = </span><span class="sc">%.2f\n</span><span class="st">&quot;</span><span class="op">,</span> solution1<span class="op">);</span></span>
<span id="cb162-36"><a href="#cb162-36" aria-hidden="true" tabindex="-1"></a>            <span class="cf">break</span><span class="op">;</span></span>
<span id="cb162-37"><a href="#cb162-37" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> <span class="dv">2</span><span class="op">:</span></span>
<span id="cb162-38"><a href="#cb162-38" aria-hidden="true" tabindex="-1"></a>            printf<span class="op">(</span><span class="st">&quot;解: x1 = </span><span class="sc">%.2f</span><span class="st">, x2 = </span><span class="sc">%.2f\n</span><span class="st">&quot;</span><span class="op">,</span> solution1<span class="op">,</span> solution2<span class="op">);</span></span>
<span id="cb162-39"><a href="#cb162-39" aria-hidden="true" tabindex="-1"></a>            <span class="cf">break</span><span class="op">;</span></span>
<span id="cb162-40"><a href="#cb162-40" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb162-41"><a href="#cb162-41" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb162-42"><a href="#cb162-42" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb162-43"><a href="#cb162-43" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 data-number="10.3.7" id="関数のスコープ"><span
class="header-section-number">10.3.7</span> 関数のスコープ 🌐</h3>
<h4 data-number="10.3.7.1" id="ローカル変数とグローバル変数"><span
class="header-section-number">10.3.7.1</span>
ローカル変数とグローバル変数</h4>
<div class="sourceCode" id="cb163"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb163-1"><a href="#cb163-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb163-2"><a href="#cb163-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-3"><a href="#cb163-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> global_counter <span class="op">=</span> <span class="dv">0</span><span class="op">;</span>  <span class="co">/* グローバル変数 */</span></span>
<span id="cb163-4"><a href="#cb163-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-5"><a href="#cb163-5" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> increment_global<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb163-6"><a href="#cb163-6" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb163-7"><a href="#cb163-7" aria-hidden="true" tabindex="-1"></a>    global_counter<span class="op">++;</span></span>
<span id="cb163-8"><a href="#cb163-8" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;グローバルカウンタ: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> global_counter<span class="op">);</span></span>
<span id="cb163-9"><a href="#cb163-9" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb163-10"><a href="#cb163-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-11"><a href="#cb163-11" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> local_example<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb163-12"><a href="#cb163-12" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb163-13"><a href="#cb163-13" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> local_counter <span class="op">=</span> <span class="dv">0</span><span class="op">;</span>  <span class="co">/* ローカル変数 */</span></span>
<span id="cb163-14"><a href="#cb163-14" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb163-15"><a href="#cb163-15" aria-hidden="true" tabindex="-1"></a>    local_counter<span class="op">++;</span></span>
<span id="cb163-16"><a href="#cb163-16" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ローカルカウンタ: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> local_counter<span class="op">);</span></span>
<span id="cb163-17"><a href="#cb163-17" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb163-18"><a href="#cb163-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb163-19"><a href="#cb163-19" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb163-20"><a href="#cb163-20" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb163-21"><a href="#cb163-21" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb163-22"><a href="#cb163-22" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb163-23"><a href="#cb163-23" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== グローバル変数のテスト ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb163-24"><a href="#cb163-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">3</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb163-25"><a href="#cb163-25" aria-hidden="true" tabindex="-1"></a>        increment_global<span class="op">();</span></span>
<span id="cb163-26"><a href="#cb163-26" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb163-27"><a href="#cb163-27" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb163-28"><a href="#cb163-28" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">=== ローカル変数のテスト ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb163-29"><a href="#cb163-29" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">3</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb163-30"><a href="#cb163-30" aria-hidden="true" tabindex="-1"></a>        local_example<span class="op">();</span>  <span class="co">/* 毎回0から始まる */</span></span>
<span id="cb163-31"><a href="#cb163-31" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb163-32"><a href="#cb163-32" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb163-33"><a href="#cb163-33" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb163-34"><a href="#cb163-34" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h4 data-number="10.3.7.2" id="static変数を使った状態保持"><span
class="header-section-number">10.3.7.2</span>
static変数を使った状態保持</h4>
<div class="sourceCode" id="cb164"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb164-1"><a href="#cb164-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb164-2"><a href="#cb164-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb164-3"><a href="#cb164-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> get_next_id<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb164-4"><a href="#cb164-4" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb164-5"><a href="#cb164-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">static</span> <span class="dt">int</span> id_counter <span class="op">=</span> <span class="dv">1000</span><span class="op">;</span>  <span class="co">/* 静的ローカル変数 */</span></span>
<span id="cb164-6"><a href="#cb164-6" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb164-7"><a href="#cb164-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> id_counter<span class="op">++;</span></span>
<span id="cb164-8"><a href="#cb164-8" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb164-9"><a href="#cb164-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb164-10"><a href="#cb164-10" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> reset_id_counter<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb164-11"><a href="#cb164-11" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb164-12"><a href="#cb164-12" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 注意: staticローカル変数は外部からアクセスできない */</span></span>
<span id="cb164-13"><a href="#cb164-13" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;カウンタをリセットすることはできません</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb164-14"><a href="#cb164-14" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb164-15"><a href="#cb164-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb164-16"><a href="#cb164-16" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb164-17"><a href="#cb164-17" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb164-18"><a href="#cb164-18" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb164-19"><a href="#cb164-19" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb164-20"><a href="#cb164-20" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ID生成テスト:</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb164-21"><a href="#cb164-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">5</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb164-22"><a href="#cb164-22" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;ID: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> get_next_id<span class="op">());</span></span>
<span id="cb164-23"><a href="#cb164-23" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb164-24"><a href="#cb164-24" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb164-25"><a href="#cb164-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb164-26"><a href="#cb164-26" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 data-number="10.3.8" id="再帰関数"><span
class="header-section-number">10.3.8</span> 再帰関数 🔄</h3>
<h4 data-number="10.3.8.1" id="階乗の計算"><span
class="header-section-number">10.3.8.1</span> 階乗の計算</h4>
<div class="sourceCode" id="cb165"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb165-1"><a href="#cb165-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb165-2"><a href="#cb165-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb165-3"><a href="#cb165-3" aria-hidden="true" tabindex="-1"></a><span class="co">/* 再帰を使った階乗計算 */</span></span>
<span id="cb165-4"><a href="#cb165-4" aria-hidden="true" tabindex="-1"></a><span class="dt">long</span> factorial_recursive<span class="op">(</span><span class="dt">int</span> n<span class="op">)</span></span>
<span id="cb165-5"><a href="#cb165-5" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb165-6"><a href="#cb165-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>n <span class="op">&lt;=</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb165-7"><a href="#cb165-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="dv">1</span><span class="op">;</span>  <span class="co">/* 基底ケース */</span></span>
<span id="cb165-8"><a href="#cb165-8" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb165-9"><a href="#cb165-9" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb165-10"><a href="#cb165-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> n <span class="op">*</span> factorial_recursive<span class="op">(</span>n <span class="op">-</span> <span class="dv">1</span><span class="op">);</span>  <span class="co">/* 再帰呼び出し */</span></span>
<span id="cb165-11"><a href="#cb165-11" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb165-12"><a href="#cb165-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb165-13"><a href="#cb165-13" aria-hidden="true" tabindex="-1"></a><span class="co">/* 反復を使った階乗計算（比較用） */</span></span>
<span id="cb165-14"><a href="#cb165-14" aria-hidden="true" tabindex="-1"></a><span class="dt">long</span> factorial_iterative<span class="op">(</span><span class="dt">int</span> n<span class="op">)</span></span>
<span id="cb165-15"><a href="#cb165-15" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb165-16"><a href="#cb165-16" aria-hidden="true" tabindex="-1"></a>    <span class="dt">long</span> result <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb165-17"><a href="#cb165-17" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb165-18"><a href="#cb165-18" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb165-19"><a href="#cb165-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">2</span><span class="op">;</span> i <span class="op">&lt;=</span> n<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb165-20"><a href="#cb165-20" aria-hidden="true" tabindex="-1"></a>        result <span class="op">*=</span> i<span class="op">;</span></span>
<span id="cb165-21"><a href="#cb165-21" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb165-22"><a href="#cb165-22" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb165-23"><a href="#cb165-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> result<span class="op">;</span></span>
<span id="cb165-24"><a href="#cb165-24" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb165-25"><a href="#cb165-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb165-26"><a href="#cb165-26" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb165-27"><a href="#cb165-27" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb165-28"><a href="#cb165-28" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> number <span class="op">=</span> <span class="dv">5</span><span class="op">;</span></span>
<span id="cb165-29"><a href="#cb165-29" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb165-30"><a href="#cb165-30" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st">! (再帰) = </span><span class="sc">%ld\n</span><span class="st">&quot;</span><span class="op">,</span> number<span class="op">,</span> factorial_recursive<span class="op">(</span>number<span class="op">));</span></span>
<span id="cb165-31"><a href="#cb165-31" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st">! (反復) = </span><span class="sc">%ld\n</span><span class="st">&quot;</span><span class="op">,</span> number<span class="op">,</span> factorial_iterative<span class="op">(</span>number<span class="op">));</span></span>
<span id="cb165-32"><a href="#cb165-32" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb165-33"><a href="#cb165-33" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb165-34"><a href="#cb165-34" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h4 data-number="10.3.8.2" id="フィボナッチ数列"><span
class="header-section-number">10.3.8.2</span> フィボナッチ数列</h4>
<div class="sourceCode" id="cb166"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb166-1"><a href="#cb166-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb166-2"><a href="#cb166-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb166-3"><a href="#cb166-3" aria-hidden="true" tabindex="-1"></a><span class="co">/* 再帰版フィボナッチ */</span></span>
<span id="cb166-4"><a href="#cb166-4" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> fibonacci_recursive<span class="op">(</span><span class="dt">int</span> n<span class="op">)</span></span>
<span id="cb166-5"><a href="#cb166-5" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb166-6"><a href="#cb166-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>n <span class="op">&lt;=</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb166-7"><a href="#cb166-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> n<span class="op">;</span></span>
<span id="cb166-8"><a href="#cb166-8" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb166-9"><a href="#cb166-9" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb166-10"><a href="#cb166-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> fibonacci_recursive<span class="op">(</span>n <span class="op">-</span> <span class="dv">1</span><span class="op">)</span> <span class="op">+</span> fibonacci_recursive<span class="op">(</span>n <span class="op">-</span> <span class="dv">2</span><span class="op">);</span></span>
<span id="cb166-11"><a href="#cb166-11" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb166-12"><a href="#cb166-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb166-13"><a href="#cb166-13" aria-hidden="true" tabindex="-1"></a><span class="co">/* 効率的な反復版フィボナッチ */</span></span>
<span id="cb166-14"><a href="#cb166-14" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> fibonacci_iterative<span class="op">(</span><span class="dt">int</span> n<span class="op">)</span></span>
<span id="cb166-15"><a href="#cb166-15" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb166-16"><a href="#cb166-16" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> a <span class="op">=</span> <span class="dv">0</span><span class="op">,</span> b <span class="op">=</span> <span class="dv">1</span><span class="op">,</span> temp<span class="op">;</span></span>
<span id="cb166-17"><a href="#cb166-17" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb166-18"><a href="#cb166-18" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb166-19"><a href="#cb166-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>n <span class="op">&lt;=</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb166-20"><a href="#cb166-20" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> n<span class="op">;</span></span>
<span id="cb166-21"><a href="#cb166-21" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb166-22"><a href="#cb166-22" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb166-23"><a href="#cb166-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">2</span><span class="op">;</span> i <span class="op">&lt;=</span> n<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb166-24"><a href="#cb166-24" aria-hidden="true" tabindex="-1"></a>        temp <span class="op">=</span> a <span class="op">+</span> b<span class="op">;</span></span>
<span id="cb166-25"><a href="#cb166-25" aria-hidden="true" tabindex="-1"></a>        a <span class="op">=</span> b<span class="op">;</span></span>
<span id="cb166-26"><a href="#cb166-26" aria-hidden="true" tabindex="-1"></a>        b <span class="op">=</span> temp<span class="op">;</span></span>
<span id="cb166-27"><a href="#cb166-27" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb166-28"><a href="#cb166-28" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb166-29"><a href="#cb166-29" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> b<span class="op">;</span></span>
<span id="cb166-30"><a href="#cb166-30" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb166-31"><a href="#cb166-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb166-32"><a href="#cb166-32" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb166-33"><a href="#cb166-33" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb166-34"><a href="#cb166-34" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb166-35"><a href="#cb166-35" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb166-36"><a href="#cb166-36" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;フィボナッチ数列（再帰版）:</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb166-37"><a href="#cb166-37" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">10</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb166-38"><a href="#cb166-38" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st"> &quot;</span><span class="op">,</span> fibonacci_recursive<span class="op">(</span>i<span class="op">));</span></span>
<span id="cb166-39"><a href="#cb166-39" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb166-40"><a href="#cb166-40" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb166-41"><a href="#cb166-41" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb166-42"><a href="#cb166-42" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;フィボナッチ数列（反復版）:</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb166-43"><a href="#cb166-43" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">10</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb166-44"><a href="#cb166-44" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st"> &quot;</span><span class="op">,</span> fibonacci_iterative<span class="op">(</span>i<span class="op">));</span></span>
<span id="cb166-45"><a href="#cb166-45" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb166-46"><a href="#cb166-46" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb166-47"><a href="#cb166-47" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb166-48"><a href="#cb166-48" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb166-49"><a href="#cb166-49" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 data-number="10.3.9" id="実践的な関数の例"><span
class="header-section-number">10.3.9</span> 実践的な関数の例 💡</h3>
<h4 data-number="10.3.9.1" id="配列操作関数群"><span
class="header-section-number">10.3.9.1</span> 配列操作関数群</h4>
<div class="sourceCode" id="cb167"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb167-1"><a href="#cb167-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb167-2"><a href="#cb167-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb167-3"><a href="#cb167-3" aria-hidden="true" tabindex="-1"></a><span class="co">/* 配列の要素を検索 */</span></span>
<span id="cb167-4"><a href="#cb167-4" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> linear_search<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> size<span class="op">,</span> <span class="dt">int</span> target<span class="op">)</span></span>
<span id="cb167-5"><a href="#cb167-5" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb167-6"><a href="#cb167-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb167-7"><a href="#cb167-7" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb167-8"><a href="#cb167-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> size<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb167-9"><a href="#cb167-9" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>arr<span class="op">[</span>i<span class="op">]</span> <span class="op">==</span> target<span class="op">)</span> <span class="op">{</span></span>
<span id="cb167-10"><a href="#cb167-10" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> i<span class="op">;</span>  <span class="co">/* 見つかった位置を返す */</span></span>
<span id="cb167-11"><a href="#cb167-11" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb167-12"><a href="#cb167-12" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb167-13"><a href="#cb167-13" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb167-14"><a href="#cb167-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">-</span><span class="dv">1</span><span class="op">;</span>  <span class="co">/* 見つからない場合 */</span></span>
<span id="cb167-15"><a href="#cb167-15" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb167-16"><a href="#cb167-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb167-17"><a href="#cb167-17" aria-hidden="true" tabindex="-1"></a><span class="co">/* バブルソート */</span></span>
<span id="cb167-18"><a href="#cb167-18" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> bubble_sort<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> size<span class="op">)</span></span>
<span id="cb167-19"><a href="#cb167-19" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb167-20"><a href="#cb167-20" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">,</span> j<span class="op">,</span> temp<span class="op">;</span></span>
<span id="cb167-21"><a href="#cb167-21" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb167-22"><a href="#cb167-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> size <span class="op">-</span> <span class="dv">1</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb167-23"><a href="#cb167-23" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span>j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> j <span class="op">&lt;</span> size <span class="op">-</span> <span class="dv">1</span> <span class="op">-</span> i<span class="op">;</span> j<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb167-24"><a href="#cb167-24" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>arr<span class="op">[</span>j<span class="op">]</span> <span class="op">&gt;</span> arr<span class="op">[</span>j <span class="op">+</span> <span class="dv">1</span><span class="op">])</span> <span class="op">{</span></span>
<span id="cb167-25"><a href="#cb167-25" aria-hidden="true" tabindex="-1"></a>                temp <span class="op">=</span> arr<span class="op">[</span>j<span class="op">];</span></span>
<span id="cb167-26"><a href="#cb167-26" aria-hidden="true" tabindex="-1"></a>                arr<span class="op">[</span>j<span class="op">]</span> <span class="op">=</span> arr<span class="op">[</span>j <span class="op">+</span> <span class="dv">1</span><span class="op">];</span></span>
<span id="cb167-27"><a href="#cb167-27" aria-hidden="true" tabindex="-1"></a>                arr<span class="op">[</span>j <span class="op">+</span> <span class="dv">1</span><span class="op">]</span> <span class="op">=</span> temp<span class="op">;</span></span>
<span id="cb167-28"><a href="#cb167-28" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb167-29"><a href="#cb167-29" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb167-30"><a href="#cb167-30" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb167-31"><a href="#cb167-31" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb167-32"><a href="#cb167-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb167-33"><a href="#cb167-33" aria-hidden="true" tabindex="-1"></a><span class="co">/* 配列の統計情報を計算 */</span></span>
<span id="cb167-34"><a href="#cb167-34" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> calculate_stats<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> size<span class="op">,</span> <span class="dt">int</span> <span class="op">*</span>min<span class="op">,</span> <span class="dt">int</span> <span class="op">*</span>max<span class="op">,</span> <span class="dt">double</span> <span class="op">*</span>avg<span class="op">)</span></span>
<span id="cb167-35"><a href="#cb167-35" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb167-36"><a href="#cb167-36" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> sum <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb167-37"><a href="#cb167-37" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb167-38"><a href="#cb167-38" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb167-39"><a href="#cb167-39" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>min <span class="op">=</span> <span class="op">*</span>max <span class="op">=</span> arr<span class="op">[</span><span class="dv">0</span><span class="op">];</span></span>
<span id="cb167-40"><a href="#cb167-40" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb167-41"><a href="#cb167-41" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> size<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb167-42"><a href="#cb167-42" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>arr<span class="op">[</span>i<span class="op">]</span> <span class="op">&lt;</span> <span class="op">*</span>min<span class="op">)</span> <span class="op">*</span>min <span class="op">=</span> arr<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb167-43"><a href="#cb167-43" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>arr<span class="op">[</span>i<span class="op">]</span> <span class="op">&gt;</span> <span class="op">*</span>max<span class="op">)</span> <span class="op">*</span>max <span class="op">=</span> arr<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb167-44"><a href="#cb167-44" aria-hidden="true" tabindex="-1"></a>        sum <span class="op">+=</span> arr<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb167-45"><a href="#cb167-45" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb167-46"><a href="#cb167-46" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb167-47"><a href="#cb167-47" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>avg <span class="op">=</span> <span class="op">(</span><span class="dt">double</span><span class="op">)</span>sum <span class="op">/</span> size<span class="op">;</span></span>
<span id="cb167-48"><a href="#cb167-48" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb167-49"><a href="#cb167-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb167-50"><a href="#cb167-50" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb167-51"><a href="#cb167-51" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb167-52"><a href="#cb167-52" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> numbers<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">64</span><span class="op">,</span> <span class="dv">34</span><span class="op">,</span> <span class="dv">25</span><span class="op">,</span> <span class="dv">12</span><span class="op">,</span> <span class="dv">22</span><span class="op">,</span> <span class="dv">11</span><span class="op">,</span> <span class="dv">90</span><span class="op">};</span></span>
<span id="cb167-53"><a href="#cb167-53" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> size <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>numbers<span class="op">)</span> <span class="op">/</span> <span class="kw">sizeof</span><span class="op">(</span>numbers<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb167-54"><a href="#cb167-54" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> min<span class="op">,</span> max<span class="op">,</span> search_result<span class="op">;</span></span>
<span id="cb167-55"><a href="#cb167-55" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span> average<span class="op">;</span></span>
<span id="cb167-56"><a href="#cb167-56" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb167-57"><a href="#cb167-57" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb167-58"><a href="#cb167-58" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;元の配列: &quot;</span><span class="op">);</span></span>
<span id="cb167-59"><a href="#cb167-59" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> size<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb167-60"><a href="#cb167-60" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st"> &quot;</span><span class="op">,</span> numbers<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb167-61"><a href="#cb167-61" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb167-62"><a href="#cb167-62" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb167-63"><a href="#cb167-63" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb167-64"><a href="#cb167-64" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 統計情報の計算 */</span></span>
<span id="cb167-65"><a href="#cb167-65" aria-hidden="true" tabindex="-1"></a>    calculate_stats<span class="op">(</span>numbers<span class="op">,</span> size<span class="op">,</span> <span class="op">&amp;</span>min<span class="op">,</span> <span class="op">&amp;</span>max<span class="op">,</span> <span class="op">&amp;</span>average<span class="op">);</span></span>
<span id="cb167-66"><a href="#cb167-66" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;最小値: </span><span class="sc">%d</span><span class="st">, 最大値: </span><span class="sc">%d</span><span class="st">, 平均: </span><span class="sc">%.2f\n</span><span class="st">&quot;</span><span class="op">,</span> min<span class="op">,</span> max<span class="op">,</span> average<span class="op">);</span></span>
<span id="cb167-67"><a href="#cb167-67" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb167-68"><a href="#cb167-68" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 検索 */</span></span>
<span id="cb167-69"><a href="#cb167-69" aria-hidden="true" tabindex="-1"></a>    search_result <span class="op">=</span> linear_search<span class="op">(</span>numbers<span class="op">,</span> size<span class="op">,</span> <span class="dv">25</span><span class="op">);</span></span>
<span id="cb167-70"><a href="#cb167-70" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>search_result <span class="op">!=</span> <span class="op">-</span><span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb167-71"><a href="#cb167-71" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;25は位置</span><span class="sc">%d</span><span class="st">にあります</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> search_result<span class="op">);</span></span>
<span id="cb167-72"><a href="#cb167-72" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb167-73"><a href="#cb167-73" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb167-74"><a href="#cb167-74" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* ソート */</span></span>
<span id="cb167-75"><a href="#cb167-75" aria-hidden="true" tabindex="-1"></a>    bubble_sort<span class="op">(</span>numbers<span class="op">,</span> size<span class="op">);</span></span>
<span id="cb167-76"><a href="#cb167-76" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ソート後: &quot;</span><span class="op">);</span></span>
<span id="cb167-77"><a href="#cb167-77" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> size<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb167-78"><a href="#cb167-78" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st"> &quot;</span><span class="op">,</span> numbers<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb167-79"><a href="#cb167-79" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb167-80"><a href="#cb167-80" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb167-81"><a href="#cb167-81" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb167-82"><a href="#cb167-82" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb167-83"><a href="#cb167-83" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h4 data-number="10.3.9.2" id="文字列処理関数群"><span
class="header-section-number">10.3.9.2</span> 文字列処理関数群</h4>
<div class="sourceCode" id="cb168"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb168-1"><a href="#cb168-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb168-2"><a href="#cb168-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;ctype.h&gt;</span></span>
<span id="cb168-3"><a href="#cb168-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb168-4"><a href="#cb168-4" aria-hidden="true" tabindex="-1"></a><span class="co">/* 文字列を大文字に変換 */</span></span>
<span id="cb168-5"><a href="#cb168-5" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> to_upper<span class="op">(</span><span class="dt">char</span> str<span class="op">[])</span></span>
<span id="cb168-6"><a href="#cb168-6" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb168-7"><a href="#cb168-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb168-8"><a href="#cb168-8" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb168-9"><a href="#cb168-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> str<span class="op">[</span>i<span class="op">]</span> <span class="op">!=</span> <span class="ch">&#39;</span><span class="sc">\0</span><span class="ch">&#39;</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb168-10"><a href="#cb168-10" aria-hidden="true" tabindex="-1"></a>        str<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> toupper<span class="op">(</span>str<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb168-11"><a href="#cb168-11" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb168-12"><a href="#cb168-12" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb168-13"><a href="#cb168-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb168-14"><a href="#cb168-14" aria-hidden="true" tabindex="-1"></a><span class="co">/* 文字列から空白を除去 */</span></span>
<span id="cb168-15"><a href="#cb168-15" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> remove_spaces<span class="op">(</span><span class="dt">char</span> str<span class="op">[])</span></span>
<span id="cb168-16"><a href="#cb168-16" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb168-17"><a href="#cb168-17" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">,</span> j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb168-18"><a href="#cb168-18" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb168-19"><a href="#cb168-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> str<span class="op">[</span>i<span class="op">]</span> <span class="op">!=</span> <span class="ch">&#39;</span><span class="sc">\0</span><span class="ch">&#39;</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb168-20"><a href="#cb168-20" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>str<span class="op">[</span>i<span class="op">]</span> <span class="op">!=</span> <span class="ch">&#39; &#39;</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb168-21"><a href="#cb168-21" aria-hidden="true" tabindex="-1"></a>            str<span class="op">[</span>j<span class="op">++]</span> <span class="op">=</span> str<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb168-22"><a href="#cb168-22" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb168-23"><a href="#cb168-23" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb168-24"><a href="#cb168-24" aria-hidden="true" tabindex="-1"></a>    str<span class="op">[</span>j<span class="op">]</span> <span class="op">=</span> <span class="ch">&#39;</span><span class="sc">\0</span><span class="ch">&#39;</span><span class="op">;</span></span>
<span id="cb168-25"><a href="#cb168-25" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb168-26"><a href="#cb168-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb168-27"><a href="#cb168-27" aria-hidden="true" tabindex="-1"></a><span class="co">/* 文字列が回文かどうかチェック */</span></span>
<span id="cb168-28"><a href="#cb168-28" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> is_palindrome<span class="op">(</span><span class="dt">char</span> str<span class="op">[])</span></span>
<span id="cb168-29"><a href="#cb168-29" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb168-30"><a href="#cb168-30" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> left <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb168-31"><a href="#cb168-31" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> right <span class="op">=</span> strlen<span class="op">(</span>str<span class="op">)</span> <span class="op">-</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb168-32"><a href="#cb168-32" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb168-33"><a href="#cb168-33" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>left <span class="op">&lt;</span> right<span class="op">)</span> <span class="op">{</span></span>
<span id="cb168-34"><a href="#cb168-34" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>tolower<span class="op">(</span>str<span class="op">[</span>left<span class="op">])</span> <span class="op">!=</span> tolower<span class="op">(</span>str<span class="op">[</span>right<span class="op">]))</span> <span class="op">{</span></span>
<span id="cb168-35"><a href="#cb168-35" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span>  <span class="co">/* 回文でない */</span></span>
<span id="cb168-36"><a href="#cb168-36" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb168-37"><a href="#cb168-37" aria-hidden="true" tabindex="-1"></a>        left<span class="op">++;</span></span>
<span id="cb168-38"><a href="#cb168-38" aria-hidden="true" tabindex="-1"></a>        right<span class="op">--;</span></span>
<span id="cb168-39"><a href="#cb168-39" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb168-40"><a href="#cb168-40" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb168-41"><a href="#cb168-41" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">1</span><span class="op">;</span>  <span class="co">/* 回文 */</span></span>
<span id="cb168-42"><a href="#cb168-42" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb168-43"><a href="#cb168-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb168-44"><a href="#cb168-44" aria-hidden="true" tabindex="-1"></a><span class="co">/* 単語数をカウント */</span></span>
<span id="cb168-45"><a href="#cb168-45" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> count_words<span class="op">(</span><span class="dt">char</span> str<span class="op">[])</span></span>
<span id="cb168-46"><a href="#cb168-46" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb168-47"><a href="#cb168-47" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> count <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb168-48"><a href="#cb168-48" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> in_word <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb168-49"><a href="#cb168-49" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb168-50"><a href="#cb168-50" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb168-51"><a href="#cb168-51" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> str<span class="op">[</span>i<span class="op">]</span> <span class="op">!=</span> <span class="ch">&#39;</span><span class="sc">\0</span><span class="ch">&#39;</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb168-52"><a href="#cb168-52" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>isspace<span class="op">(</span>str<span class="op">[</span>i<span class="op">]))</span> <span class="op">{</span></span>
<span id="cb168-53"><a href="#cb168-53" aria-hidden="true" tabindex="-1"></a>            in_word <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb168-54"><a href="#cb168-54" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span> <span class="cf">else</span> <span class="cf">if</span> <span class="op">(!</span>in_word<span class="op">)</span> <span class="op">{</span></span>
<span id="cb168-55"><a href="#cb168-55" aria-hidden="true" tabindex="-1"></a>            in_word <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb168-56"><a href="#cb168-56" aria-hidden="true" tabindex="-1"></a>            count<span class="op">++;</span></span>
<span id="cb168-57"><a href="#cb168-57" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb168-58"><a href="#cb168-58" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb168-59"><a href="#cb168-59" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb168-60"><a href="#cb168-60" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> count<span class="op">;</span></span>
<span id="cb168-61"><a href="#cb168-61" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb168-62"><a href="#cb168-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb168-63"><a href="#cb168-63" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb168-64"><a href="#cb168-64" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb168-65"><a href="#cb168-65" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> text1<span class="op">[]</span> <span class="op">=</span> <span class="st">&quot;Hello World&quot;</span><span class="op">;</span></span>
<span id="cb168-66"><a href="#cb168-66" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> text2<span class="op">[]</span> <span class="op">=</span> <span class="st">&quot;madam&quot;</span><span class="op">;</span></span>
<span id="cb168-67"><a href="#cb168-67" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> text3<span class="op">[]</span> <span class="op">=</span> <span class="st">&quot;This is a test sentence&quot;</span><span class="op">;</span></span>
<span id="cb168-68"><a href="#cb168-68" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb168-69"><a href="#cb168-69" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;元の文字列1: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> text1<span class="op">);</span></span>
<span id="cb168-70"><a href="#cb168-70" aria-hidden="true" tabindex="-1"></a>    to_upper<span class="op">(</span>text1<span class="op">);</span></span>
<span id="cb168-71"><a href="#cb168-71" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;大文字変換後: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> text1<span class="op">);</span></span>
<span id="cb168-72"><a href="#cb168-72" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb168-73"><a href="#cb168-73" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">元の文字列2: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> text2<span class="op">);</span></span>
<span id="cb168-74"><a href="#cb168-74" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>is_palindrome<span class="op">(</span>text2<span class="op">))</span> <span class="op">{</span></span>
<span id="cb168-75"><a href="#cb168-75" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;&#39;</span><span class="sc">%s</span><span class="st">&#39;は回文です</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> text2<span class="op">);</span></span>
<span id="cb168-76"><a href="#cb168-76" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb168-77"><a href="#cb168-77" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;&#39;</span><span class="sc">%s</span><span class="st">&#39;は回文ではありません</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> text2<span class="op">);</span></span>
<span id="cb168-78"><a href="#cb168-78" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb168-79"><a href="#cb168-79" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb168-80"><a href="#cb168-80" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">文字列3: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> text3<span class="op">);</span></span>
<span id="cb168-81"><a href="#cb168-81" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;単語数: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> count_words<span class="op">(</span>text3<span class="op">));</span></span>
<span id="cb168-82"><a href="#cb168-82" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb168-83"><a href="#cb168-83" aria-hidden="true" tabindex="-1"></a>    remove_spaces<span class="op">(</span>text3<span class="op">);</span></span>
<span id="cb168-84"><a href="#cb168-84" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;空白除去後: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> text3<span class="op">);</span></span>
<span id="cb168-85"><a href="#cb168-85" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb168-86"><a href="#cb168-86" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb168-87"><a href="#cb168-87" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 data-number="10.3.10" id="関数設計のベストプラクティス"><span
class="header-section-number">10.3.10</span>
関数設計のベストプラクティス 📋</h3>
<h4 data-number="10.3.10.1" id="単一責任の原則"><span
class="header-section-number">10.3.10.1</span> 1. 単一責任の原則</h4>
<div class="sourceCode" id="cb169"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb169-1"><a href="#cb169-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* NG: 1つの関数で複数の処理 */</span></span>
<span id="cb169-2"><a href="#cb169-2" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> process_data_bad<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> size<span class="op">)</span></span>
<span id="cb169-3"><a href="#cb169-3" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb169-4"><a href="#cb169-4" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* データの検証 */</span></span>
<span id="cb169-5"><a href="#cb169-5" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* データの変換 */</span></span>
<span id="cb169-6"><a href="#cb169-6" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* データの表示 */</span></span>
<span id="cb169-7"><a href="#cb169-7" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* ファイルへの保存 */</span></span>
<span id="cb169-8"><a href="#cb169-8" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb169-9"><a href="#cb169-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb169-10"><a href="#cb169-10" aria-hidden="true" tabindex="-1"></a><span class="co">/* OK: 各処理を分離 */</span></span>
<span id="cb169-11"><a href="#cb169-11" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> validate_data<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> size<span class="op">);</span></span>
<span id="cb169-12"><a href="#cb169-12" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> transform_data<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> size<span class="op">);</span></span>
<span id="cb169-13"><a href="#cb169-13" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> display_data<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> size<span class="op">);</span></span>
<span id="cb169-14"><a href="#cb169-14" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> save_to_file<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> size<span class="op">,</span> <span class="dt">char</span> <span class="op">*</span>filename<span class="op">);</span></span></code></pre></div>
<h4 data-number="10.3.10.2" id="関数名の命名規則"><span
class="header-section-number">10.3.10.2</span> 2. 関数名の命名規則</h4>
<div class="sourceCode" id="cb170"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb170-1"><a href="#cb170-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* 動詞＋名詞の形式 */</span></span>
<span id="cb170-2"><a href="#cb170-2" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> calculate_sum<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> size<span class="op">);</span></span>
<span id="cb170-3"><a href="#cb170-3" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> print_array<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> size<span class="op">);</span></span>
<span id="cb170-4"><a href="#cb170-4" aria-hidden="true" tabindex="-1"></a><span class="dt">char</span><span class="op">*</span> find_substring<span class="op">(</span><span class="dt">char</span> <span class="op">*</span>str<span class="op">,</span> <span class="dt">char</span> <span class="op">*</span>substr<span class="op">);</span></span>
<span id="cb170-5"><a href="#cb170-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb170-6"><a href="#cb170-6" aria-hidden="true" tabindex="-1"></a><span class="co">/* 論理値を返す関数は is_, has_, can_ などで始める */</span></span>
<span id="cb170-7"><a href="#cb170-7" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> is_prime<span class="op">(</span><span class="dt">int</span> n<span class="op">);</span></span>
<span id="cb170-8"><a href="#cb170-8" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> has_duplicates<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> size<span class="op">);</span></span>
<span id="cb170-9"><a href="#cb170-9" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> can_divide<span class="op">(</span><span class="dt">int</span> a<span class="op">,</span> <span class="dt">int</span> b<span class="op">);</span></span></code></pre></div>
<h4 data-number="10.3.10.3" id="エラーハンドリング"><span
class="header-section-number">10.3.10.3</span> 3.
エラーハンドリング</h4>
<div class="sourceCode" id="cb171"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb171-1"><a href="#cb171-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb171-2"><a href="#cb171-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb171-3"><a href="#cb171-3" aria-hidden="true" tabindex="-1"></a><span class="co">/* 安全な除算関数 */</span></span>
<span id="cb171-4"><a href="#cb171-4" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> safe_divide<span class="op">(</span><span class="dt">int</span> dividend<span class="op">,</span> <span class="dt">int</span> divisor<span class="op">,</span> <span class="dt">double</span> <span class="op">*</span>result<span class="op">)</span></span>
<span id="cb171-5"><a href="#cb171-5" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb171-6"><a href="#cb171-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>divisor <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb171-7"><a href="#cb171-7" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span>  <span class="co">/* エラー: ゼロ除算 */</span></span>
<span id="cb171-8"><a href="#cb171-8" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb171-9"><a href="#cb171-9" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb171-10"><a href="#cb171-10" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>result <span class="op">=</span> <span class="op">(</span><span class="dt">double</span><span class="op">)</span>dividend <span class="op">/</span> divisor<span class="op">;</span></span>
<span id="cb171-11"><a href="#cb171-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">1</span><span class="op">;</span>  <span class="co">/* 成功 */</span></span>
<span id="cb171-12"><a href="#cb171-12" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb171-13"><a href="#cb171-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb171-14"><a href="#cb171-14" aria-hidden="true" tabindex="-1"></a><span class="co">/* 配列の平均を安全に計算 */</span></span>
<span id="cb171-15"><a href="#cb171-15" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> calculate_average_safe<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> size<span class="op">,</span> <span class="dt">double</span> <span class="op">*</span>avg<span class="op">)</span></span>
<span id="cb171-16"><a href="#cb171-16" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb171-17"><a href="#cb171-17" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> sum <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb171-18"><a href="#cb171-18" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb171-19"><a href="#cb171-19" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb171-20"><a href="#cb171-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>arr <span class="op">==</span> NULL <span class="op">||</span> size <span class="op">&lt;=</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb171-21"><a href="#cb171-21" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span>  <span class="co">/* エラー: 無効な引数 */</span></span>
<span id="cb171-22"><a href="#cb171-22" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb171-23"><a href="#cb171-23" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb171-24"><a href="#cb171-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> size<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb171-25"><a href="#cb171-25" aria-hidden="true" tabindex="-1"></a>        sum <span class="op">+=</span> arr<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb171-26"><a href="#cb171-26" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb171-27"><a href="#cb171-27" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb171-28"><a href="#cb171-28" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>avg <span class="op">=</span> <span class="op">(</span><span class="dt">double</span><span class="op">)</span>sum <span class="op">/</span> size<span class="op">;</span></span>
<span id="cb171-29"><a href="#cb171-29" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">1</span><span class="op">;</span>  <span class="co">/* 成功 */</span></span>
<span id="cb171-30"><a href="#cb171-30" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb171-31"><a href="#cb171-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb171-32"><a href="#cb171-32" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb171-33"><a href="#cb171-33" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb171-34"><a href="#cb171-34" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span> result<span class="op">,</span> average<span class="op">;</span></span>
<span id="cb171-35"><a href="#cb171-35" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> numbers<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">10</span><span class="op">,</span> <span class="dv">20</span><span class="op">,</span> <span class="dv">30</span><span class="op">,</span> <span class="dv">40</span><span class="op">,</span> <span class="dv">50</span><span class="op">};</span></span>
<span id="cb171-36"><a href="#cb171-36" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> size <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>numbers<span class="op">)</span> <span class="op">/</span> <span class="kw">sizeof</span><span class="op">(</span>numbers<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb171-37"><a href="#cb171-37" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb171-38"><a href="#cb171-38" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 安全な除算 */</span></span>
<span id="cb171-39"><a href="#cb171-39" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>safe_divide<span class="op">(</span><span class="dv">10</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="op">&amp;</span>result<span class="op">))</span> <span class="op">{</span></span>
<span id="cb171-40"><a href="#cb171-40" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;10 / 3 = </span><span class="sc">%.2f\n</span><span class="st">&quot;</span><span class="op">,</span> result<span class="op">);</span></span>
<span id="cb171-41"><a href="#cb171-41" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb171-42"><a href="#cb171-42" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;除算エラー</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb171-43"><a href="#cb171-43" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb171-44"><a href="#cb171-44" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb171-45"><a href="#cb171-45" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 安全な平均計算 */</span></span>
<span id="cb171-46"><a href="#cb171-46" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>calculate_average_safe<span class="op">(</span>numbers<span class="op">,</span> size<span class="op">,</span> <span class="op">&amp;</span>average<span class="op">))</span> <span class="op">{</span></span>
<span id="cb171-47"><a href="#cb171-47" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;平均: </span><span class="sc">%.2f\n</span><span class="st">&quot;</span><span class="op">,</span> average<span class="op">);</span></span>
<span id="cb171-48"><a href="#cb171-48" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb171-49"><a href="#cb171-49" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;平均計算エラー</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb171-50"><a href="#cb171-50" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb171-51"><a href="#cb171-51" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb171-52"><a href="#cb171-52" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb171-53"><a href="#cb171-53" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h2 data-number="10.4" id="サンプルコード-8"><span
class="header-section-number">10.4</span> サンプルコード</h2>
<h3 data-number="10.4.1" id="基本的な関数操作"><span
class="header-section-number">10.4.1</span> 基本的な関数操作</h3>
<p>プログラムファイル: <code>examples/function_basic.c</code></p>
<p>関数の定義、呼び出し、引数と戻り値の基本的な使用方法を学習します。</p>
<h3 data-number="10.4.2" id="配列操作関数"><span
class="header-section-number">10.4.2</span> 配列操作関数</h3>
<p>プログラムファイル: <code>examples/array_functions.c</code></p>
<p>配列を引数とする様々な関数の実装例を学習します。</p>
<h3 data-number="10.4.3" id="再帰関数の実例"><span
class="header-section-number">10.4.3</span> 再帰関数の実例</h3>
<p>プログラムファイル: <code>examples/recursive_functions.c</code></p>
<p>再帰を使った様々なアルゴリズムの実装を学習します。</p>
<h3 data-number="10.4.4" id="コンパイルと実行-8"><span
class="header-section-number">10.4.4</span> コンパイルと実行</h3>
<div class="sourceCode" id="cb172"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb172-1"><a href="#cb172-1" aria-hidden="true" tabindex="-1"></a><span class="co"># examples ディレクトリに移動</span></span>
<span id="cb172-2"><a href="#cb172-2" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> examples</span>
<span id="cb172-3"><a href="#cb172-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb172-4"><a href="#cb172-4" aria-hidden="true" tabindex="-1"></a><span class="co"># C90準拠でコンパイル</span></span>
<span id="cb172-5"><a href="#cb172-5" aria-hidden="true" tabindex="-1"></a><span class="fu">gcc</span> <span class="at">-std</span><span class="op">=</span>c90 <span class="at">-Wall</span> <span class="at">-Wextra</span> <span class="at">-pedantic</span> function_basic.c <span class="at">-o</span> function_basic</span>
<span id="cb172-6"><a href="#cb172-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb172-7"><a href="#cb172-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 実行</span></span>
<span id="cb172-8"><a href="#cb172-8" aria-hidden="true" tabindex="-1"></a><span class="ex">./function_basic</span></span></code></pre></div>
<h2 data-number="10.5" id="演習課題-8"><span
class="header-section-number">10.5</span> 演習課題</h2>
<h3 data-number="10.5.1" id="基礎問題-8"><span
class="header-section-number">10.5.1</span> 基礎問題</h3>
<ol type="1">
<li><strong>数学関数の作成</strong>
<ul>
<li>累乗、最大公約数、最小公倍数を計算する関数を作成してください</li>
</ul></li>
<li><strong>文字列操作関数</strong>
<ul>
<li>文字列の長さ、文字数カウント、文字置換を行う関数を作成してください</li>
</ul></li>
<li><strong>配列操作関数</strong>
<ul>
<li>配列の要素をシフト、逆順、重複除去する関数を作成してください</li>
</ul></li>
</ol>
<h3 data-number="10.5.2" id="応用問題-8"><span
class="header-section-number">10.5.2</span> 応用問題</h3>
<ol type="1">
<li><strong>素数判定システム</strong>
<ul>
<li>素数判定、素数一覧生成、素因数分解を行う関数群を作成してください</li>
</ul></li>
<li><strong>簡易計算機</strong>
<ul>
<li>四則演算、三角関数、対数計算を行う関数群を作成してください</li>
</ul></li>
<li><strong>データ分析関数</strong>
<ul>
<li>平均、分散、標準偏差、中央値を計算する統計関数を作成してください</li>
</ul></li>
</ol>
<h3 data-number="10.5.3" id="発展問題-3"><span
class="header-section-number">10.5.3</span> 発展問題</h3>
<ol type="1">
<li><strong>ソートアルゴリズム集</strong>
<ul>
<li>バブルソート、選択ソート、挿入ソートを実装して性能比較してください</li>
</ul></li>
<li><strong>文字列処理ライブラリ</strong>
<ul>
<li>文字列分割、結合、検索、置換機能を持つ関数群を作成してください</li>
</ul></li>
<li><strong>数値計算ライブラリ</strong>
<ul>
<li>行列演算、方程式求解、数値積分を行う関数群を作成してください</li>
</ul></li>
</ol>
<h2 data-number="10.6" id="コンパイル方法-8"><span
class="header-section-number">10.6</span> コンパイル方法</h2>
<p>この章では以下のMakefileを使用してコンパイルができます：</p>
<div class="sourceCode" id="cb173"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb173-1"><a href="#cb173-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 全ての例題をコンパイル</span></span>
<span id="cb173-2"><a href="#cb173-2" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> all</span>
<span id="cb173-3"><a href="#cb173-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb173-4"><a href="#cb173-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 特定のプログラムをコンパイル</span></span>
<span id="cb173-5"><a href="#cb173-5" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> function_basic</span>
<span id="cb173-6"><a href="#cb173-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb173-7"><a href="#cb173-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 実行</span></span>
<span id="cb173-8"><a href="#cb173-8" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> run</span>
<span id="cb173-9"><a href="#cb173-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb173-10"><a href="#cb173-10" aria-hidden="true" tabindex="-1"></a><span class="co"># クリーンアップ</span></span>
<span id="cb173-11"><a href="#cb173-11" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> clean</span></code></pre></div>
<h2 data-number="10.7" id="規格による違い-8"><span
class="header-section-number">10.7</span> 規格による違い</h2>
<h3 data-number="10.7.1" id="c90での制限事項-7"><span
class="header-section-number">10.7.1</span> C90での制限事項</h3>
<ul>
<li>関数プロトタイプの宣言が推奨（必須ではない）</li>
<li>可変長引数リストは限定的</li>
<li>inline関数は使用不可</li>
</ul>
<h3 data-number="10.7.2" id="c99以降の拡張-7"><span
class="header-section-number">10.7.2</span> C99以降の拡張</h3>
<ul>
<li>inline関数の追加</li>
<li>可変長引数マクロの改善</li>
<li>restrict修飾子の追加</li>
</ul>
<h2 data-number="10.8" id="よくある間違い-6"><span
class="header-section-number">10.8</span> 🚨 よくある間違い</h2>
<h3 data-number="10.8.1" id="関数プロトタイプの忘れ"><span
class="header-section-number">10.8.1</span> 1.
関数プロトタイプの忘れ</h3>
<div class="sourceCode" id="cb174"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb174-1"><a href="#cb174-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* NG: プロトタイプなしで後で定義された関数を使用 */</span></span>
<span id="cb174-2"><a href="#cb174-2" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb174-3"><a href="#cb174-3" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb174-4"><a href="#cb174-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> result <span class="op">=</span> calculate<span class="op">(</span><span class="dv">5</span><span class="op">,</span> <span class="dv">3</span><span class="op">);</span>  <span class="co">/* エラーまたは警告 */</span></span>
<span id="cb174-5"><a href="#cb174-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb174-6"><a href="#cb174-6" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb174-7"><a href="#cb174-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb174-8"><a href="#cb174-8" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> calculate<span class="op">(</span><span class="dt">int</span> a<span class="op">,</span> <span class="dt">int</span> b<span class="op">)</span></span>
<span id="cb174-9"><a href="#cb174-9" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb174-10"><a href="#cb174-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> a <span class="op">+</span> b<span class="op">;</span></span>
<span id="cb174-11"><a href="#cb174-11" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb174-12"><a href="#cb174-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb174-13"><a href="#cb174-13" aria-hidden="true" tabindex="-1"></a><span class="co">/* OK: プロトタイプを先に宣言 */</span></span>
<span id="cb174-14"><a href="#cb174-14" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> calculate<span class="op">(</span><span class="dt">int</span> a<span class="op">,</span> <span class="dt">int</span> b<span class="op">);</span>  <span class="co">/* プロトタイプ */</span></span>
<span id="cb174-15"><a href="#cb174-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb174-16"><a href="#cb174-16" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb174-17"><a href="#cb174-17" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb174-18"><a href="#cb174-18" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> result <span class="op">=</span> calculate<span class="op">(</span><span class="dv">5</span><span class="op">,</span> <span class="dv">3</span><span class="op">);</span></span>
<span id="cb174-19"><a href="#cb174-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb174-20"><a href="#cb174-20" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 data-number="10.8.2" id="配列サイズの情報不足"><span
class="header-section-number">10.8.2</span> 2. 配列サイズの情報不足</h3>
<div class="sourceCode" id="cb175"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb175-1"><a href="#cb175-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* NG: 関数内で配列のサイズがわからない */</span></span>
<span id="cb175-2"><a href="#cb175-2" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> print_array_bad<span class="op">(</span><span class="dt">int</span> arr<span class="op">[])</span></span>
<span id="cb175-3"><a href="#cb175-3" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb175-4"><a href="#cb175-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> size <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">)</span> <span class="op">/</span> <span class="kw">sizeof</span><span class="op">(</span>arr<span class="op">[</span><span class="dv">0</span><span class="op">]);</span>  <span class="co">/* 間違い */</span></span>
<span id="cb175-5"><a href="#cb175-5" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* ... */</span></span>
<span id="cb175-6"><a href="#cb175-6" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb175-7"><a href="#cb175-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb175-8"><a href="#cb175-8" aria-hidden="true" tabindex="-1"></a><span class="co">/* OK: サイズを別の引数で渡す */</span></span>
<span id="cb175-9"><a href="#cb175-9" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> print_array_good<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> size<span class="op">)</span></span>
<span id="cb175-10"><a href="#cb175-10" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb175-11"><a href="#cb175-11" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* ... */</span></span>
<span id="cb175-12"><a href="#cb175-12" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 data-number="10.8.3" id="ローカル変数のアドレス返し"><span
class="header-section-number">10.8.3</span> 3.
ローカル変数のアドレス返し</h3>
<div class="sourceCode" id="cb176"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb176-1"><a href="#cb176-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* NG: ローカル変数のアドレスを返す */</span></span>
<span id="cb176-2"><a href="#cb176-2" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span><span class="op">*</span> create_array_bad<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb176-3"><a href="#cb176-3" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb176-4"><a href="#cb176-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> arr<span class="op">[</span><span class="dv">10</span><span class="op">];</span></span>
<span id="cb176-5"><a href="#cb176-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> arr<span class="op">;</span>  <span class="co">/* 危険: スタック上のアドレス */</span></span>
<span id="cb176-6"><a href="#cb176-6" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb176-7"><a href="#cb176-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb176-8"><a href="#cb176-8" aria-hidden="true" tabindex="-1"></a><span class="co">/* OK: staticまたは動的メモリを使用 */</span></span>
<span id="cb176-9"><a href="#cb176-9" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span><span class="op">*</span> create_array_good<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb176-10"><a href="#cb176-10" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb176-11"><a href="#cb176-11" aria-hidden="true" tabindex="-1"></a>    <span class="dt">static</span> <span class="dt">int</span> arr<span class="op">[</span><span class="dv">10</span><span class="op">];</span></span>
<span id="cb176-12"><a href="#cb176-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> arr<span class="op">;</span></span>
<span id="cb176-13"><a href="#cb176-13" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h2 data-number="10.9" id="次の章へ-8"><span
class="header-section-number">10.9</span> 次の章へ</h2>
<h2 data-number="10.10" id="参考資料-8"><span
class="header-section-number">10.10</span> 参考資料</h2>
<ul>
<li><a
href="https://ja.cppreference.com/w/c/language/function">C言語関数リファレンス</a></li>
<li><a
href="https://ja.cppreference.com/w/c/language/function_declaration">関数プロトタイプ</a></li>
<li><a
href="https://ja.cppreference.com/w/c/language/function">再帰関数の詳細</a></li>
</ul>
<h1 data-number="11" id="ポインタ基礎"><span
class="header-section-number">11</span> ポインタ基礎</h1>
<h2 data-number="11.1" id="対応c規格-10"><span
class="header-section-number">11.1</span> 対応C規格</h2>
<ul>
<li><strong>主要対象:</strong> C90</li>
<li><strong>学習内容:</strong>
ポインタの基本概念、アドレス演算子、間接参照演算子、ポインタと配列、ポインタ演算</li>
</ul>
<h2 data-number="11.2" id="学習目標-10"><span
class="header-section-number">11.2</span> 学習目標</h2>
<p>この章を完了すると、以下のことができるようになります：</p>
<ul>
<li>ポインタの基本概念を理解する</li>
<li>アドレス演算子（&amp;）と間接参照演算子（*）を使える</li>
<li>ポインタと配列の関係を理解する</li>
<li>ポインタ演算ができる</li>
<li>ポインタを関数の引数として使える</li>
</ul>
<h2 data-number="11.3" id="理論解説-9"><span
class="header-section-number">11.3</span> 理論解説</h2>
<h3 data-number="11.3.1" id="ポインタの基本概念"><span
class="header-section-number">11.3.1</span> ポインタの基本概念 🎯</h3>
<p>ポインタは他の変数のメモリアドレスを格納する変数です。これにより間接的に他の変数にアクセスできます。</p>
<h4 data-number="11.3.1.1" id="メモリとアドレス"><span
class="header-section-number">11.3.1.1</span> メモリとアドレス</h4>
<div class="sourceCode" id="cb177"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb177-1"><a href="#cb177-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb177-2"><a href="#cb177-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb177-3"><a href="#cb177-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb177-4"><a href="#cb177-4" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb177-5"><a href="#cb177-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> number <span class="op">=</span> <span class="dv">42</span><span class="op">;</span></span>
<span id="cb177-6"><a href="#cb177-6" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb177-7"><a href="#cb177-7" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;変数numberの値: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> number<span class="op">);</span></span>
<span id="cb177-8"><a href="#cb177-8" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;変数numberのアドレス: </span><span class="sc">%p\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(</span><span class="dt">void</span><span class="op">*)&amp;</span>number<span class="op">);</span></span>
<span id="cb177-9"><a href="#cb177-9" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;変数numberのサイズ: </span><span class="sc">%lu</span><span class="st"> バイト</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="kw">sizeof</span><span class="op">(</span>number<span class="op">));</span></span>
<span id="cb177-10"><a href="#cb177-10" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb177-11"><a href="#cb177-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb177-12"><a href="#cb177-12" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h4 data-number="11.3.1.2" id="ポインタ変数の宣言"><span
class="header-section-number">11.3.1.2</span> ポインタ変数の宣言</h4>
<div class="sourceCode" id="cb178"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb178-1"><a href="#cb178-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb178-2"><a href="#cb178-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb178-3"><a href="#cb178-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb178-4"><a href="#cb178-4" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb178-5"><a href="#cb178-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> value <span class="op">=</span> <span class="dv">100</span><span class="op">;</span>        <span class="co">/* 通常の整数変数 */</span></span>
<span id="cb178-6"><a href="#cb178-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> <span class="op">*</span>ptr<span class="op">;</span>               <span class="co">/* 整数を指すポインタ変数 */</span></span>
<span id="cb178-7"><a href="#cb178-7" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb178-8"><a href="#cb178-8" aria-hidden="true" tabindex="-1"></a>    ptr <span class="op">=</span> <span class="op">&amp;</span>value<span class="op">;</span>           <span class="co">/* valueのアドレスをptrに代入 */</span></span>
<span id="cb178-9"><a href="#cb178-9" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb178-10"><a href="#cb178-10" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;value = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> value<span class="op">);</span></span>
<span id="cb178-11"><a href="#cb178-11" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;&amp;value = </span><span class="sc">%p\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(</span><span class="dt">void</span><span class="op">*)&amp;</span>value<span class="op">);</span></span>
<span id="cb178-12"><a href="#cb178-12" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ptr = </span><span class="sc">%p\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(</span><span class="dt">void</span><span class="op">*)</span>ptr<span class="op">);</span></span>
<span id="cb178-13"><a href="#cb178-13" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;*ptr = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">*</span>ptr<span class="op">);</span>        <span class="co">/* ポインタが指す値 */</span></span>
<span id="cb178-14"><a href="#cb178-14" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb178-15"><a href="#cb178-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb178-16"><a href="#cb178-16" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 data-number="11.3.2" id="アドレス演算子と間接参照演算子"><span
class="header-section-number">11.3.2</span>
アドレス演算子（&amp;）と間接参照演算子（*） 🔗</h3>
<h4 data-number="11.3.2.1" id="アドレス演算子"><span
class="header-section-number">11.3.2.1</span>
アドレス演算子（&amp;）</h4>
<div class="sourceCode" id="cb179"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb179-1"><a href="#cb179-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb179-2"><a href="#cb179-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb179-3"><a href="#cb179-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb179-4"><a href="#cb179-4" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb179-5"><a href="#cb179-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> a <span class="op">=</span> <span class="dv">10</span><span class="op">;</span></span>
<span id="cb179-6"><a href="#cb179-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span> b <span class="op">=</span> <span class="fl">3.14</span><span class="op">;</span></span>
<span id="cb179-7"><a href="#cb179-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> c <span class="op">=</span> <span class="ch">&#39;A&#39;</span><span class="op">;</span></span>
<span id="cb179-8"><a href="#cb179-8" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb179-9"><a href="#cb179-9" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;変数のアドレス:</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb179-10"><a href="#cb179-10" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;&amp;a = </span><span class="sc">%p\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(</span><span class="dt">void</span><span class="op">*)&amp;</span>a<span class="op">);</span></span>
<span id="cb179-11"><a href="#cb179-11" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;&amp;b = </span><span class="sc">%p\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(</span><span class="dt">void</span><span class="op">*)&amp;</span>b<span class="op">);</span></span>
<span id="cb179-12"><a href="#cb179-12" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;&amp;c = </span><span class="sc">%p\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(</span><span class="dt">void</span><span class="op">*)&amp;</span>c<span class="op">);</span></span>
<span id="cb179-13"><a href="#cb179-13" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb179-14"><a href="#cb179-14" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* ポインタ変数の宣言と初期化 */</span></span>
<span id="cb179-15"><a href="#cb179-15" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> <span class="op">*</span>ptr_a <span class="op">=</span> <span class="op">&amp;</span>a<span class="op">;</span></span>
<span id="cb179-16"><a href="#cb179-16" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span> <span class="op">*</span>ptr_b <span class="op">=</span> <span class="op">&amp;</span>b<span class="op">;</span></span>
<span id="cb179-17"><a href="#cb179-17" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> <span class="op">*</span>ptr_c <span class="op">=</span> <span class="op">&amp;</span>c<span class="op">;</span></span>
<span id="cb179-18"><a href="#cb179-18" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb179-19"><a href="#cb179-19" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">ポインタの値（アドレス）:</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb179-20"><a href="#cb179-20" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ptr_a = </span><span class="sc">%p\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(</span><span class="dt">void</span><span class="op">*)</span>ptr_a<span class="op">);</span></span>
<span id="cb179-21"><a href="#cb179-21" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ptr_b = </span><span class="sc">%p\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(</span><span class="dt">void</span><span class="op">*)</span>ptr_b<span class="op">);</span></span>
<span id="cb179-22"><a href="#cb179-22" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ptr_c = </span><span class="sc">%p\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(</span><span class="dt">void</span><span class="op">*)</span>ptr_c<span class="op">);</span></span>
<span id="cb179-23"><a href="#cb179-23" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb179-24"><a href="#cb179-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb179-25"><a href="#cb179-25" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h4 data-number="11.3.2.2" id="間接参照演算子"><span
class="header-section-number">11.3.2.2</span> 間接参照演算子（*）</h4>
<div class="sourceCode" id="cb180"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb180-1"><a href="#cb180-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb180-2"><a href="#cb180-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb180-3"><a href="#cb180-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb180-4"><a href="#cb180-4" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb180-5"><a href="#cb180-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> original <span class="op">=</span> <span class="dv">50</span><span class="op">;</span></span>
<span id="cb180-6"><a href="#cb180-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> <span class="op">*</span>pointer <span class="op">=</span> <span class="op">&amp;</span>original<span class="op">;</span></span>
<span id="cb180-7"><a href="#cb180-7" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb180-8"><a href="#cb180-8" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== 元の状態 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb180-9"><a href="#cb180-9" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;original = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> original<span class="op">);</span></span>
<span id="cb180-10"><a href="#cb180-10" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;*pointer = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">*</span>pointer<span class="op">);</span></span>
<span id="cb180-11"><a href="#cb180-11" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb180-12"><a href="#cb180-12" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* ポインタを通じて値を変更 */</span></span>
<span id="cb180-13"><a href="#cb180-13" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>pointer <span class="op">=</span> <span class="dv">75</span><span class="op">;</span></span>
<span id="cb180-14"><a href="#cb180-14" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb180-15"><a href="#cb180-15" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">=== *pointer = 75 実行後 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb180-16"><a href="#cb180-16" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;original = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> original<span class="op">);</span>      <span class="co">/* 75に変更される */</span></span>
<span id="cb180-17"><a href="#cb180-17" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;*pointer = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">*</span>pointer<span class="op">);</span>      <span class="co">/* 75 */</span></span>
<span id="cb180-18"><a href="#cb180-18" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb180-19"><a href="#cb180-19" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 元の変数を直接変更 */</span></span>
<span id="cb180-20"><a href="#cb180-20" aria-hidden="true" tabindex="-1"></a>    original <span class="op">=</span> <span class="dv">100</span><span class="op">;</span></span>
<span id="cb180-21"><a href="#cb180-21" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb180-22"><a href="#cb180-22" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">=== original = 100 実行後 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb180-23"><a href="#cb180-23" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;original = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> original<span class="op">);</span>      <span class="co">/* 100 */</span></span>
<span id="cb180-24"><a href="#cb180-24" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;*pointer = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">*</span>pointer<span class="op">);</span>      <span class="co">/* 100 */</span></span>
<span id="cb180-25"><a href="#cb180-25" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb180-26"><a href="#cb180-26" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb180-27"><a href="#cb180-27" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 data-number="11.3.3" id="ポインタのデータ型"><span
class="header-section-number">11.3.3</span> ポインタのデータ型 📊</h3>
<h4 data-number="11.3.3.1" id="さまざまなデータ型のポインタ"><span
class="header-section-number">11.3.3.1</span>
さまざまなデータ型のポインタ</h4>
<div class="sourceCode" id="cb181"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb181-1"><a href="#cb181-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb181-2"><a href="#cb181-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb181-3"><a href="#cb181-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb181-4"><a href="#cb181-4" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb181-5"><a href="#cb181-5" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 各データ型の変数 */</span></span>
<span id="cb181-6"><a href="#cb181-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> char_var <span class="op">=</span> <span class="ch">&#39;X&#39;</span><span class="op">;</span></span>
<span id="cb181-7"><a href="#cb181-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> int_var <span class="op">=</span> <span class="dv">42</span><span class="op">;</span></span>
<span id="cb181-8"><a href="#cb181-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">float</span> float_var <span class="op">=</span> <span class="fl">3.14</span><span class="bu">f</span><span class="op">;</span></span>
<span id="cb181-9"><a href="#cb181-9" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span> double_var <span class="op">=</span> <span class="fl">2.718</span><span class="op">;</span></span>
<span id="cb181-10"><a href="#cb181-10" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb181-11"><a href="#cb181-11" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 各データ型のポインタ */</span></span>
<span id="cb181-12"><a href="#cb181-12" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> <span class="op">*</span>char_ptr <span class="op">=</span> <span class="op">&amp;</span>char_var<span class="op">;</span></span>
<span id="cb181-13"><a href="#cb181-13" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> <span class="op">*</span>int_ptr <span class="op">=</span> <span class="op">&amp;</span>int_var<span class="op">;</span></span>
<span id="cb181-14"><a href="#cb181-14" aria-hidden="true" tabindex="-1"></a>    <span class="dt">float</span> <span class="op">*</span>float_ptr <span class="op">=</span> <span class="op">&amp;</span>float_var<span class="op">;</span></span>
<span id="cb181-15"><a href="#cb181-15" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span> <span class="op">*</span>double_ptr <span class="op">=</span> <span class="op">&amp;</span>double_var<span class="op">;</span></span>
<span id="cb181-16"><a href="#cb181-16" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb181-17"><a href="#cb181-17" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== 値の表示 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb181-18"><a href="#cb181-18" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;char: </span><span class="sc">%c\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">*</span>char_ptr<span class="op">);</span></span>
<span id="cb181-19"><a href="#cb181-19" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;int: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">*</span>int_ptr<span class="op">);</span></span>
<span id="cb181-20"><a href="#cb181-20" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;float: </span><span class="sc">%.2f\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">*</span>float_ptr<span class="op">);</span></span>
<span id="cb181-21"><a href="#cb181-21" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;double: </span><span class="sc">%.3f\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">*</span>double_ptr<span class="op">);</span></span>
<span id="cb181-22"><a href="#cb181-22" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb181-23"><a href="#cb181-23" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">=== ポインタのサイズ ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb181-24"><a href="#cb181-24" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;char*: </span><span class="sc">%lu</span><span class="st"> バイト</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="kw">sizeof</span><span class="op">(</span>char_ptr<span class="op">));</span></span>
<span id="cb181-25"><a href="#cb181-25" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;int*: </span><span class="sc">%lu</span><span class="st"> バイト</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="kw">sizeof</span><span class="op">(</span>int_ptr<span class="op">));</span></span>
<span id="cb181-26"><a href="#cb181-26" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;float*: </span><span class="sc">%lu</span><span class="st"> バイト</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="kw">sizeof</span><span class="op">(</span>float_ptr<span class="op">));</span></span>
<span id="cb181-27"><a href="#cb181-27" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;double*: </span><span class="sc">%lu</span><span class="st"> バイト</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="kw">sizeof</span><span class="op">(</span>double_ptr<span class="op">));</span></span>
<span id="cb181-28"><a href="#cb181-28" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb181-29"><a href="#cb181-29" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb181-30"><a href="#cb181-30" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h4 data-number="11.3.3.2" id="voidポインタ汎用ポインタ"><span
class="header-section-number">11.3.3.2</span>
void*ポインタ（汎用ポインタ）</h4>
<div class="sourceCode" id="cb182"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb182-1"><a href="#cb182-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb182-2"><a href="#cb182-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb182-3"><a href="#cb182-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb182-4"><a href="#cb182-4" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb182-5"><a href="#cb182-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> int_value <span class="op">=</span> <span class="dv">123</span><span class="op">;</span></span>
<span id="cb182-6"><a href="#cb182-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span> double_value <span class="op">=</span> <span class="fl">45.67</span><span class="op">;</span></span>
<span id="cb182-7"><a href="#cb182-7" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb182-8"><a href="#cb182-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">void</span> <span class="op">*</span>generic_ptr<span class="op">;</span>      <span class="co">/* 汎用ポインタ */</span></span>
<span id="cb182-9"><a href="#cb182-9" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb182-10"><a href="#cb182-10" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* intを指す */</span></span>
<span id="cb182-11"><a href="#cb182-11" aria-hidden="true" tabindex="-1"></a>    generic_ptr <span class="op">=</span> <span class="op">&amp;</span>int_value<span class="op">;</span></span>
<span id="cb182-12"><a href="#cb182-12" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;int値: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">*(</span><span class="dt">int</span><span class="op">*)</span>generic_ptr<span class="op">);</span>  <span class="co">/* キャストが必要 */</span></span>
<span id="cb182-13"><a href="#cb182-13" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb182-14"><a href="#cb182-14" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* doubleを指す */</span></span>
<span id="cb182-15"><a href="#cb182-15" aria-hidden="true" tabindex="-1"></a>    generic_ptr <span class="op">=</span> <span class="op">&amp;</span>double_value<span class="op">;</span></span>
<span id="cb182-16"><a href="#cb182-16" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;double値: </span><span class="sc">%.2f\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">*(</span><span class="dt">double</span><span class="op">*)</span>generic_ptr<span class="op">);</span>  <span class="co">/* キャストが必要 */</span></span>
<span id="cb182-17"><a href="#cb182-17" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb182-18"><a href="#cb182-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb182-19"><a href="#cb182-19" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 data-number="11.3.4" id="ポインタと配列の関係"><span
class="header-section-number">11.3.4</span> ポインタと配列の関係 📊</h3>
<h4 data-number="11.3.4.1" id="配列名はポインタ"><span
class="header-section-number">11.3.4.1</span> 配列名はポインタ</h4>
<div class="sourceCode" id="cb183"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb183-1"><a href="#cb183-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb183-2"><a href="#cb183-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb183-3"><a href="#cb183-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb183-4"><a href="#cb183-4" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb183-5"><a href="#cb183-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> arr<span class="op">[</span><span class="dv">5</span><span class="op">]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">10</span><span class="op">,</span> <span class="dv">20</span><span class="op">,</span> <span class="dv">30</span><span class="op">,</span> <span class="dv">40</span><span class="op">,</span> <span class="dv">50</span><span class="op">};</span></span>
<span id="cb183-6"><a href="#cb183-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> <span class="op">*</span>ptr <span class="op">=</span> arr<span class="op">;</span>         <span class="co">/* arr は &amp;arr[0] と同じ */</span></span>
<span id="cb183-7"><a href="#cb183-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb183-8"><a href="#cb183-8" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb183-9"><a href="#cb183-9" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== 配列とポインタの関係 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb183-10"><a href="#cb183-10" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;arr = </span><span class="sc">%p\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(</span><span class="dt">void</span><span class="op">*)</span>arr<span class="op">);</span></span>
<span id="cb183-11"><a href="#cb183-11" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;&amp;arr[0] = </span><span class="sc">%p\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(</span><span class="dt">void</span><span class="op">*)&amp;</span>arr<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb183-12"><a href="#cb183-12" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ptr = </span><span class="sc">%p\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(</span><span class="dt">void</span><span class="op">*)</span>ptr<span class="op">);</span></span>
<span id="cb183-13"><a href="#cb183-13" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb183-14"><a href="#cb183-14" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">=== 配列要素へのアクセス ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb183-15"><a href="#cb183-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">5</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb183-16"><a href="#cb183-16" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;arr[</span><span class="sc">%d</span><span class="st">] = </span><span class="sc">%d</span><span class="st">, *(arr + </span><span class="sc">%d</span><span class="st">) = </span><span class="sc">%d</span><span class="st">, *(ptr + </span><span class="sc">%d</span><span class="st">) = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span></span>
<span id="cb183-17"><a href="#cb183-17" aria-hidden="true" tabindex="-1"></a>               i<span class="op">,</span> arr<span class="op">[</span>i<span class="op">],</span> i<span class="op">,</span> <span class="op">*(</span>arr <span class="op">+</span> i<span class="op">),</span> i<span class="op">,</span> <span class="op">*(</span>ptr <span class="op">+</span> i<span class="op">));</span></span>
<span id="cb183-18"><a href="#cb183-18" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb183-19"><a href="#cb183-19" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb183-20"><a href="#cb183-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb183-21"><a href="#cb183-21" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h4 data-number="11.3.4.2" id="ポインタを使った配列操作"><span
class="header-section-number">11.3.4.2</span>
ポインタを使った配列操作</h4>
<div class="sourceCode" id="cb184"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb184-1"><a href="#cb184-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb184-2"><a href="#cb184-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb184-3"><a href="#cb184-3" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> print_array_index<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> size<span class="op">)</span></span>
<span id="cb184-4"><a href="#cb184-4" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb184-5"><a href="#cb184-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb184-6"><a href="#cb184-6" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb184-7"><a href="#cb184-7" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;インデックス記法: &quot;</span><span class="op">);</span></span>
<span id="cb184-8"><a href="#cb184-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> size<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb184-9"><a href="#cb184-9" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st"> &quot;</span><span class="op">,</span> arr<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb184-10"><a href="#cb184-10" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb184-11"><a href="#cb184-11" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb184-12"><a href="#cb184-12" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb184-13"><a href="#cb184-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb184-14"><a href="#cb184-14" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> print_array_pointer<span class="op">(</span><span class="dt">int</span> <span class="op">*</span>ptr<span class="op">,</span> <span class="dt">int</span> size<span class="op">)</span></span>
<span id="cb184-15"><a href="#cb184-15" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb184-16"><a href="#cb184-16" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb184-17"><a href="#cb184-17" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb184-18"><a href="#cb184-18" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ポインタ記法: &quot;</span><span class="op">);</span></span>
<span id="cb184-19"><a href="#cb184-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> size<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb184-20"><a href="#cb184-20" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st"> &quot;</span><span class="op">,</span> <span class="op">*(</span>ptr <span class="op">+</span> i<span class="op">));</span></span>
<span id="cb184-21"><a href="#cb184-21" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb184-22"><a href="#cb184-22" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb184-23"><a href="#cb184-23" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb184-24"><a href="#cb184-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb184-25"><a href="#cb184-25" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb184-26"><a href="#cb184-26" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb184-27"><a href="#cb184-27" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> numbers<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">5</span><span class="op">};</span></span>
<span id="cb184-28"><a href="#cb184-28" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> size <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>numbers<span class="op">)</span> <span class="op">/</span> <span class="kw">sizeof</span><span class="op">(</span>numbers<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb184-29"><a href="#cb184-29" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb184-30"><a href="#cb184-30" aria-hidden="true" tabindex="-1"></a>    print_array_index<span class="op">(</span>numbers<span class="op">,</span> size<span class="op">);</span></span>
<span id="cb184-31"><a href="#cb184-31" aria-hidden="true" tabindex="-1"></a>    print_array_pointer<span class="op">(</span>numbers<span class="op">,</span> size<span class="op">);</span></span>
<span id="cb184-32"><a href="#cb184-32" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb184-33"><a href="#cb184-33" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb184-34"><a href="#cb184-34" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 data-number="11.3.5" id="ポインタ演算"><span
class="header-section-number">11.3.5</span> ポインタ演算 🧮</h3>
<h4 data-number="11.3.5.1" id="ポインタの加算減算"><span
class="header-section-number">11.3.5.1</span> ポインタの加算・減算</h4>
<div class="sourceCode" id="cb185"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb185-1"><a href="#cb185-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb185-2"><a href="#cb185-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb185-3"><a href="#cb185-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb185-4"><a href="#cb185-4" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb185-5"><a href="#cb185-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> arr<span class="op">[</span><span class="dv">5</span><span class="op">]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">100</span><span class="op">,</span> <span class="dv">200</span><span class="op">,</span> <span class="dv">300</span><span class="op">,</span> <span class="dv">400</span><span class="op">,</span> <span class="dv">500</span><span class="op">};</span></span>
<span id="cb185-6"><a href="#cb185-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> <span class="op">*</span>ptr <span class="op">=</span> arr<span class="op">;</span></span>
<span id="cb185-7"><a href="#cb185-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb185-8"><a href="#cb185-8" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb185-9"><a href="#cb185-9" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== ポインタ演算の例 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb185-10"><a href="#cb185-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">5</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb185-11"><a href="#cb185-11" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;ptr + </span><span class="sc">%d</span><span class="st"> = </span><span class="sc">%p</span><span class="st">, *(ptr + </span><span class="sc">%d</span><span class="st">) = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span></span>
<span id="cb185-12"><a href="#cb185-12" aria-hidden="true" tabindex="-1"></a>               i<span class="op">,</span> <span class="op">(</span><span class="dt">void</span><span class="op">*)(</span>ptr <span class="op">+</span> i<span class="op">),</span> i<span class="op">,</span> <span class="op">*(</span>ptr <span class="op">+</span> i<span class="op">));</span></span>
<span id="cb185-13"><a href="#cb185-13" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb185-14"><a href="#cb185-14" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb185-15"><a href="#cb185-15" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">=== ポインタのインクリメント ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb185-16"><a href="#cb185-16" aria-hidden="true" tabindex="-1"></a>    ptr <span class="op">=</span> arr<span class="op">;</span>  <span class="co">/* 先頭に戻す */</span></span>
<span id="cb185-17"><a href="#cb185-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">5</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb185-18"><a href="#cb185-18" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;*ptr = </span><span class="sc">%d</span><span class="st"> (アドレス: </span><span class="sc">%p</span><span class="st">)</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">*</span>ptr<span class="op">,</span> <span class="op">(</span><span class="dt">void</span><span class="op">*)</span>ptr<span class="op">);</span></span>
<span id="cb185-19"><a href="#cb185-19" aria-hidden="true" tabindex="-1"></a>        ptr<span class="op">++;</span>  <span class="co">/* 次の要素に移動 */</span></span>
<span id="cb185-20"><a href="#cb185-20" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb185-21"><a href="#cb185-21" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb185-22"><a href="#cb185-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb185-23"><a href="#cb185-23" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h4 data-number="11.3.5.2" id="ポインタ同士の差"><span
class="header-section-number">11.3.5.2</span> ポインタ同士の差</h4>
<div class="sourceCode" id="cb186"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb186-1"><a href="#cb186-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb186-2"><a href="#cb186-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb186-3"><a href="#cb186-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb186-4"><a href="#cb186-4" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb186-5"><a href="#cb186-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> arr<span class="op">[</span><span class="dv">10</span><span class="op">]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">0</span><span class="op">,</span> <span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">5</span><span class="op">,</span> <span class="dv">6</span><span class="op">,</span> <span class="dv">7</span><span class="op">,</span> <span class="dv">8</span><span class="op">,</span> <span class="dv">9</span><span class="op">};</span></span>
<span id="cb186-6"><a href="#cb186-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> <span class="op">*</span>start <span class="op">=</span> <span class="op">&amp;</span>arr<span class="op">[</span><span class="dv">2</span><span class="op">];</span>   <span class="co">/* arr[2]を指す */</span></span>
<span id="cb186-7"><a href="#cb186-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> <span class="op">*</span>end <span class="op">=</span> <span class="op">&amp;</span>arr<span class="op">[</span><span class="dv">7</span><span class="op">];</span>     <span class="co">/* arr[7]を指す */</span></span>
<span id="cb186-8"><a href="#cb186-8" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb186-9"><a href="#cb186-9" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;start が指す値: </span><span class="sc">%d</span><span class="st"> (インデックス2)</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">*</span>start<span class="op">);</span></span>
<span id="cb186-10"><a href="#cb186-10" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;end が指す値: </span><span class="sc">%d</span><span class="st"> (インデックス7)</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">*</span>end<span class="op">);</span></span>
<span id="cb186-11"><a href="#cb186-11" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ポインタの差: </span><span class="sc">%ld\n</span><span class="st">&quot;</span><span class="op">,</span> end <span class="op">-</span> start<span class="op">);</span>  <span class="co">/* 5 */</span></span>
<span id="cb186-12"><a href="#cb186-12" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;バイト差: </span><span class="sc">%ld\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(</span><span class="dt">char</span><span class="op">*)</span>end <span class="op">-</span> <span class="op">(</span><span class="dt">char</span><span class="op">*)</span>start<span class="op">);</span></span>
<span id="cb186-13"><a href="#cb186-13" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb186-14"><a href="#cb186-14" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb186-15"><a href="#cb186-15" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 data-number="11.3.6" id="ポインタと関数"><span
class="header-section-number">11.3.6</span> ポインタと関数 🔧</h3>
<h4 data-number="11.3.6.1" id="ポインタを引数とする関数"><span
class="header-section-number">11.3.6.1</span>
ポインタを引数とする関数</h4>
<div class="sourceCode" id="cb187"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb187-1"><a href="#cb187-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb187-2"><a href="#cb187-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb187-3"><a href="#cb187-3" aria-hidden="true" tabindex="-1"></a><span class="co">/* 値を交換する関数 */</span></span>
<span id="cb187-4"><a href="#cb187-4" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> swap<span class="op">(</span><span class="dt">int</span> <span class="op">*</span>a<span class="op">,</span> <span class="dt">int</span> <span class="op">*</span>b<span class="op">)</span></span>
<span id="cb187-5"><a href="#cb187-5" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb187-6"><a href="#cb187-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> temp <span class="op">=</span> <span class="op">*</span>a<span class="op">;</span></span>
<span id="cb187-7"><a href="#cb187-7" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>a <span class="op">=</span> <span class="op">*</span>b<span class="op">;</span></span>
<span id="cb187-8"><a href="#cb187-8" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>b <span class="op">=</span> temp<span class="op">;</span></span>
<span id="cb187-9"><a href="#cb187-9" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb187-10"><a href="#cb187-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb187-11"><a href="#cb187-11" aria-hidden="true" tabindex="-1"></a><span class="co">/* 値を2倍にする関数 */</span></span>
<span id="cb187-12"><a href="#cb187-12" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> double_value<span class="op">(</span><span class="dt">int</span> <span class="op">*</span>value<span class="op">)</span></span>
<span id="cb187-13"><a href="#cb187-13" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb187-14"><a href="#cb187-14" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>value <span class="op">=</span> <span class="op">(*</span>value<span class="op">)</span> <span class="op">*</span> <span class="dv">2</span><span class="op">;</span></span>
<span id="cb187-15"><a href="#cb187-15" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb187-16"><a href="#cb187-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb187-17"><a href="#cb187-17" aria-hidden="true" tabindex="-1"></a><span class="co">/* 配列の要素を変更する関数 */</span></span>
<span id="cb187-18"><a href="#cb187-18" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> modify_array<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> size<span class="op">)</span></span>
<span id="cb187-19"><a href="#cb187-19" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb187-20"><a href="#cb187-20" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb187-21"><a href="#cb187-21" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb187-22"><a href="#cb187-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> size<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb187-23"><a href="#cb187-23" aria-hidden="true" tabindex="-1"></a>        arr<span class="op">[</span>i<span class="op">]</span> <span class="op">*=</span> <span class="dv">10</span><span class="op">;</span>  <span class="co">/* 各要素を10倍 */</span></span>
<span id="cb187-24"><a href="#cb187-24" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb187-25"><a href="#cb187-25" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb187-26"><a href="#cb187-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb187-27"><a href="#cb187-27" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb187-28"><a href="#cb187-28" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb187-29"><a href="#cb187-29" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> x <span class="op">=</span> <span class="dv">10</span><span class="op">,</span> y <span class="op">=</span> <span class="dv">20</span><span class="op">;</span></span>
<span id="cb187-30"><a href="#cb187-30" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> numbers<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">5</span><span class="op">};</span></span>
<span id="cb187-31"><a href="#cb187-31" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> size <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>numbers<span class="op">)</span> <span class="op">/</span> <span class="kw">sizeof</span><span class="op">(</span>numbers<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb187-32"><a href="#cb187-32" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb187-33"><a href="#cb187-33" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb187-34"><a href="#cb187-34" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== swap関数のテスト ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb187-35"><a href="#cb187-35" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;交換前: x = </span><span class="sc">%d</span><span class="st">, y = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> x<span class="op">,</span> y<span class="op">);</span></span>
<span id="cb187-36"><a href="#cb187-36" aria-hidden="true" tabindex="-1"></a>    swap<span class="op">(&amp;</span>x<span class="op">,</span> <span class="op">&amp;</span>y<span class="op">);</span></span>
<span id="cb187-37"><a href="#cb187-37" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;交換後: x = </span><span class="sc">%d</span><span class="st">, y = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> x<span class="op">,</span> y<span class="op">);</span></span>
<span id="cb187-38"><a href="#cb187-38" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb187-39"><a href="#cb187-39" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">=== double_value関数のテスト ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb187-40"><a href="#cb187-40" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;2倍前: x = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> x<span class="op">);</span></span>
<span id="cb187-41"><a href="#cb187-41" aria-hidden="true" tabindex="-1"></a>    double_value<span class="op">(&amp;</span>x<span class="op">);</span></span>
<span id="cb187-42"><a href="#cb187-42" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;2倍後: x = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> x<span class="op">);</span></span>
<span id="cb187-43"><a href="#cb187-43" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb187-44"><a href="#cb187-44" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">=== modify_array関数のテスト ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb187-45"><a href="#cb187-45" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;変更前: &quot;</span><span class="op">);</span></span>
<span id="cb187-46"><a href="#cb187-46" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> size<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb187-47"><a href="#cb187-47" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st"> &quot;</span><span class="op">,</span> numbers<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb187-48"><a href="#cb187-48" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb187-49"><a href="#cb187-49" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb187-50"><a href="#cb187-50" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb187-51"><a href="#cb187-51" aria-hidden="true" tabindex="-1"></a>    modify_array<span class="op">(</span>numbers<span class="op">,</span> size<span class="op">);</span></span>
<span id="cb187-52"><a href="#cb187-52" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb187-53"><a href="#cb187-53" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;変更後: &quot;</span><span class="op">);</span></span>
<span id="cb187-54"><a href="#cb187-54" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> size<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb187-55"><a href="#cb187-55" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st"> &quot;</span><span class="op">,</span> numbers<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb187-56"><a href="#cb187-56" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb187-57"><a href="#cb187-57" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb187-58"><a href="#cb187-58" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb187-59"><a href="#cb187-59" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb187-60"><a href="#cb187-60" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h4 data-number="11.3.6.2" id="ポインタを戻り値とする関数"><span
class="header-section-number">11.3.6.2</span>
ポインタを戻り値とする関数</h4>
<div class="sourceCode" id="cb188"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb188-1"><a href="#cb188-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb188-2"><a href="#cb188-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb188-3"><a href="#cb188-3" aria-hidden="true" tabindex="-1"></a><span class="co">/* 配列から最大値のアドレスを返す */</span></span>
<span id="cb188-4"><a href="#cb188-4" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span><span class="op">*</span> find_max_ptr<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> size<span class="op">)</span></span>
<span id="cb188-5"><a href="#cb188-5" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb188-6"><a href="#cb188-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> <span class="op">*</span>max_ptr <span class="op">=</span> <span class="op">&amp;</span>arr<span class="op">[</span><span class="dv">0</span><span class="op">];</span></span>
<span id="cb188-7"><a href="#cb188-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb188-8"><a href="#cb188-8" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb188-9"><a href="#cb188-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&lt;</span> size<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb188-10"><a href="#cb188-10" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>arr<span class="op">[</span>i<span class="op">]</span> <span class="op">&gt;</span> <span class="op">*</span>max_ptr<span class="op">)</span> <span class="op">{</span></span>
<span id="cb188-11"><a href="#cb188-11" aria-hidden="true" tabindex="-1"></a>            max_ptr <span class="op">=</span> <span class="op">&amp;</span>arr<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb188-12"><a href="#cb188-12" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb188-13"><a href="#cb188-13" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb188-14"><a href="#cb188-14" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb188-15"><a href="#cb188-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> max_ptr<span class="op">;</span></span>
<span id="cb188-16"><a href="#cb188-16" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb188-17"><a href="#cb188-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb188-18"><a href="#cb188-18" aria-hidden="true" tabindex="-1"></a><span class="co">/* 配列から指定値を検索してアドレスを返す */</span></span>
<span id="cb188-19"><a href="#cb188-19" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span><span class="op">*</span> search_value<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> size<span class="op">,</span> <span class="dt">int</span> target<span class="op">)</span></span>
<span id="cb188-20"><a href="#cb188-20" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb188-21"><a href="#cb188-21" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb188-22"><a href="#cb188-22" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb188-23"><a href="#cb188-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> size<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb188-24"><a href="#cb188-24" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>arr<span class="op">[</span>i<span class="op">]</span> <span class="op">==</span> target<span class="op">)</span> <span class="op">{</span></span>
<span id="cb188-25"><a href="#cb188-25" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> <span class="op">&amp;</span>arr<span class="op">[</span>i<span class="op">];</span>  <span class="co">/* 見つかった要素のアドレス */</span></span>
<span id="cb188-26"><a href="#cb188-26" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb188-27"><a href="#cb188-27" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb188-28"><a href="#cb188-28" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb188-29"><a href="#cb188-29" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> NULL<span class="op">;</span>  <span class="co">/* 見つからない場合 */</span></span>
<span id="cb188-30"><a href="#cb188-30" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb188-31"><a href="#cb188-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb188-32"><a href="#cb188-32" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb188-33"><a href="#cb188-33" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb188-34"><a href="#cb188-34" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> data<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">45</span><span class="op">,</span> <span class="dv">67</span><span class="op">,</span> <span class="dv">23</span><span class="op">,</span> <span class="dv">89</span><span class="op">,</span> <span class="dv">12</span><span class="op">,</span> <span class="dv">56</span><span class="op">,</span> <span class="dv">78</span><span class="op">};</span></span>
<span id="cb188-35"><a href="#cb188-35" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> size <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>data<span class="op">)</span> <span class="op">/</span> <span class="kw">sizeof</span><span class="op">(</span>data<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb188-36"><a href="#cb188-36" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> <span class="op">*</span>result_ptr<span class="op">;</span></span>
<span id="cb188-37"><a href="#cb188-37" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> search_target <span class="op">=</span> <span class="dv">56</span><span class="op">;</span></span>
<span id="cb188-38"><a href="#cb188-38" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb188-39"><a href="#cb188-39" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb188-40"><a href="#cb188-40" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 配列の表示 */</span></span>
<span id="cb188-41"><a href="#cb188-41" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;配列: &quot;</span><span class="op">);</span></span>
<span id="cb188-42"><a href="#cb188-42" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> size<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb188-43"><a href="#cb188-43" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st"> &quot;</span><span class="op">,</span> data<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb188-44"><a href="#cb188-44" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb188-45"><a href="#cb188-45" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb188-46"><a href="#cb188-46" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb188-47"><a href="#cb188-47" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 最大値の検索 */</span></span>
<span id="cb188-48"><a href="#cb188-48" aria-hidden="true" tabindex="-1"></a>    result_ptr <span class="op">=</span> find_max_ptr<span class="op">(</span>data<span class="op">,</span> size<span class="op">);</span></span>
<span id="cb188-49"><a href="#cb188-49" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;最大値: </span><span class="sc">%d</span><span class="st"> (アドレス: </span><span class="sc">%p</span><span class="st">)</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">*</span>result_ptr<span class="op">,</span> <span class="op">(</span><span class="dt">void</span><span class="op">*)</span>result_ptr<span class="op">);</span></span>
<span id="cb188-50"><a href="#cb188-50" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb188-51"><a href="#cb188-51" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 特定値の検索 */</span></span>
<span id="cb188-52"><a href="#cb188-52" aria-hidden="true" tabindex="-1"></a>    result_ptr <span class="op">=</span> search_value<span class="op">(</span>data<span class="op">,</span> size<span class="op">,</span> search_target<span class="op">);</span></span>
<span id="cb188-53"><a href="#cb188-53" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>result_ptr <span class="op">!=</span> NULL<span class="op">)</span> <span class="op">{</span></span>
<span id="cb188-54"><a href="#cb188-54" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st"> が見つかりました (アドレス: </span><span class="sc">%p</span><span class="st">)</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> </span>
<span id="cb188-55"><a href="#cb188-55" aria-hidden="true" tabindex="-1"></a>               <span class="op">*</span>result_ptr<span class="op">,</span> <span class="op">(</span><span class="dt">void</span><span class="op">*)</span>result_ptr<span class="op">);</span></span>
<span id="cb188-56"><a href="#cb188-56" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb188-57"><a href="#cb188-57" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st"> は見つかりませんでした</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> search_target<span class="op">);</span></span>
<span id="cb188-58"><a href="#cb188-58" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb188-59"><a href="#cb188-59" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb188-60"><a href="#cb188-60" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb188-61"><a href="#cb188-61" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 data-number="11.3.7" id="文字列とポインタ"><span
class="header-section-number">11.3.7</span> 文字列とポインタ 📝</h3>
<h4 data-number="11.3.7.1" id="文字列リテラルとポインタ"><span
class="header-section-number">11.3.7.1</span>
文字列リテラルとポインタ</h4>
<div class="sourceCode" id="cb189"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb189-1"><a href="#cb189-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb189-2"><a href="#cb189-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb189-3"><a href="#cb189-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb189-4"><a href="#cb189-4" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb189-5"><a href="#cb189-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> <span class="op">*</span>str1 <span class="op">=</span> <span class="st">&quot;Hello, World!&quot;</span><span class="op">;</span>     <span class="co">/* 文字列リテラル */</span></span>
<span id="cb189-6"><a href="#cb189-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> str2<span class="op">[]</span> <span class="op">=</span> <span class="st">&quot;Hello, World!&quot;</span><span class="op">;</span>    <span class="co">/* 文字配列 */</span></span>
<span id="cb189-7"><a href="#cb189-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> <span class="op">*</span>ptr <span class="op">=</span> str2<span class="op">;</span></span>
<span id="cb189-8"><a href="#cb189-8" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb189-9"><a href="#cb189-9" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;str1: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> str1<span class="op">);</span></span>
<span id="cb189-10"><a href="#cb189-10" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;str2: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> str2<span class="op">);</span></span>
<span id="cb189-11"><a href="#cb189-11" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ptr: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> ptr<span class="op">);</span></span>
<span id="cb189-12"><a href="#cb189-12" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb189-13"><a href="#cb189-13" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">=== アドレスの比較 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb189-14"><a href="#cb189-14" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;str1のアドレス: </span><span class="sc">%p\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(</span><span class="dt">void</span><span class="op">*)</span>str1<span class="op">);</span></span>
<span id="cb189-15"><a href="#cb189-15" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;str2のアドレス: </span><span class="sc">%p\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(</span><span class="dt">void</span><span class="op">*)</span>str2<span class="op">);</span></span>
<span id="cb189-16"><a href="#cb189-16" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ptrの値: </span><span class="sc">%p\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(</span><span class="dt">void</span><span class="op">*)</span>ptr<span class="op">);</span></span>
<span id="cb189-17"><a href="#cb189-17" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb189-18"><a href="#cb189-18" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 文字配列は変更可能 */</span></span>
<span id="cb189-19"><a href="#cb189-19" aria-hidden="true" tabindex="-1"></a>    str2<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="ch">&#39;h&#39;</span><span class="op">;</span></span>
<span id="cb189-20"><a href="#cb189-20" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">変更後のstr2: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> str2<span class="op">);</span></span>
<span id="cb189-21"><a href="#cb189-21" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb189-22"><a href="#cb189-22" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 文字列リテラルは変更不可 */</span></span>
<span id="cb189-23"><a href="#cb189-23" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* str1[0] = &#39;h&#39;;  &lt;- 実行時エラーの可能性 */</span></span>
<span id="cb189-24"><a href="#cb189-24" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb189-25"><a href="#cb189-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb189-26"><a href="#cb189-26" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h4 data-number="11.3.7.2" id="ポインタを使った文字列操作"><span
class="header-section-number">11.3.7.2</span>
ポインタを使った文字列操作</h4>
<div class="sourceCode" id="cb190"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb190-1"><a href="#cb190-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb190-2"><a href="#cb190-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb190-3"><a href="#cb190-3" aria-hidden="true" tabindex="-1"></a><span class="co">/* 文字列の長さを計算（ポインタ版） */</span></span>
<span id="cb190-4"><a href="#cb190-4" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> string_length<span class="op">(</span><span class="dt">char</span> <span class="op">*</span>str<span class="op">)</span></span>
<span id="cb190-5"><a href="#cb190-5" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb190-6"><a href="#cb190-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> length <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb190-7"><a href="#cb190-7" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb190-8"><a href="#cb190-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(*</span>str <span class="op">!=</span> <span class="ch">&#39;</span><span class="sc">\0</span><span class="ch">&#39;</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb190-9"><a href="#cb190-9" aria-hidden="true" tabindex="-1"></a>        length<span class="op">++;</span></span>
<span id="cb190-10"><a href="#cb190-10" aria-hidden="true" tabindex="-1"></a>        str<span class="op">++;</span></span>
<span id="cb190-11"><a href="#cb190-11" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb190-12"><a href="#cb190-12" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb190-13"><a href="#cb190-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> length<span class="op">;</span></span>
<span id="cb190-14"><a href="#cb190-14" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb190-15"><a href="#cb190-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb190-16"><a href="#cb190-16" aria-hidden="true" tabindex="-1"></a><span class="co">/* 文字列をコピー（ポインタ版） */</span></span>
<span id="cb190-17"><a href="#cb190-17" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> string_copy<span class="op">(</span><span class="dt">char</span> <span class="op">*</span>dest<span class="op">,</span> <span class="dt">char</span> <span class="op">*</span>src<span class="op">)</span></span>
<span id="cb190-18"><a href="#cb190-18" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb190-19"><a href="#cb190-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(*</span>src <span class="op">!=</span> <span class="ch">&#39;</span><span class="sc">\0</span><span class="ch">&#39;</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb190-20"><a href="#cb190-20" aria-hidden="true" tabindex="-1"></a>        <span class="op">*</span>dest <span class="op">=</span> <span class="op">*</span>src<span class="op">;</span></span>
<span id="cb190-21"><a href="#cb190-21" aria-hidden="true" tabindex="-1"></a>        dest<span class="op">++;</span></span>
<span id="cb190-22"><a href="#cb190-22" aria-hidden="true" tabindex="-1"></a>        src<span class="op">++;</span></span>
<span id="cb190-23"><a href="#cb190-23" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb190-24"><a href="#cb190-24" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>dest <span class="op">=</span> <span class="ch">&#39;</span><span class="sc">\0</span><span class="ch">&#39;</span><span class="op">;</span>  <span class="co">/* null終端文字を追加 */</span></span>
<span id="cb190-25"><a href="#cb190-25" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb190-26"><a href="#cb190-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb190-27"><a href="#cb190-27" aria-hidden="true" tabindex="-1"></a><span class="co">/* 文字列を連結（ポインタ版） */</span></span>
<span id="cb190-28"><a href="#cb190-28" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> string_concat<span class="op">(</span><span class="dt">char</span> <span class="op">*</span>dest<span class="op">,</span> <span class="dt">char</span> <span class="op">*</span>src<span class="op">)</span></span>
<span id="cb190-29"><a href="#cb190-29" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb190-30"><a href="#cb190-30" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* destの末尾を見つける */</span></span>
<span id="cb190-31"><a href="#cb190-31" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(*</span>dest <span class="op">!=</span> <span class="ch">&#39;</span><span class="sc">\0</span><span class="ch">&#39;</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb190-32"><a href="#cb190-32" aria-hidden="true" tabindex="-1"></a>        dest<span class="op">++;</span></span>
<span id="cb190-33"><a href="#cb190-33" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb190-34"><a href="#cb190-34" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb190-35"><a href="#cb190-35" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* srcをdestの末尾に追加 */</span></span>
<span id="cb190-36"><a href="#cb190-36" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(*</span>src <span class="op">!=</span> <span class="ch">&#39;</span><span class="sc">\0</span><span class="ch">&#39;</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb190-37"><a href="#cb190-37" aria-hidden="true" tabindex="-1"></a>        <span class="op">*</span>dest <span class="op">=</span> <span class="op">*</span>src<span class="op">;</span></span>
<span id="cb190-38"><a href="#cb190-38" aria-hidden="true" tabindex="-1"></a>        dest<span class="op">++;</span></span>
<span id="cb190-39"><a href="#cb190-39" aria-hidden="true" tabindex="-1"></a>        src<span class="op">++;</span></span>
<span id="cb190-40"><a href="#cb190-40" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb190-41"><a href="#cb190-41" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>dest <span class="op">=</span> <span class="ch">&#39;</span><span class="sc">\0</span><span class="ch">&#39;</span><span class="op">;</span></span>
<span id="cb190-42"><a href="#cb190-42" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb190-43"><a href="#cb190-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb190-44"><a href="#cb190-44" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb190-45"><a href="#cb190-45" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb190-46"><a href="#cb190-46" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> str1<span class="op">[]</span> <span class="op">=</span> <span class="st">&quot;Hello&quot;</span><span class="op">;</span></span>
<span id="cb190-47"><a href="#cb190-47" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> str2<span class="op">[]</span> <span class="op">=</span> <span class="st">&quot;World&quot;</span><span class="op">;</span></span>
<span id="cb190-48"><a href="#cb190-48" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> buffer<span class="op">[</span><span class="dv">50</span><span class="op">];</span></span>
<span id="cb190-49"><a href="#cb190-49" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> result<span class="op">[</span><span class="dv">100</span><span class="op">];</span></span>
<span id="cb190-50"><a href="#cb190-50" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb190-51"><a href="#cb190-51" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;元の文字列: </span><span class="sc">\&quot;%s\&quot;</span><span class="st">, </span><span class="sc">\&quot;%s\&quot;\n</span><span class="st">&quot;</span><span class="op">,</span> str1<span class="op">,</span> str2<span class="op">);</span></span>
<span id="cb190-52"><a href="#cb190-52" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb190-53"><a href="#cb190-53" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 長さの計算 */</span></span>
<span id="cb190-54"><a href="#cb190-54" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;str1の長さ: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> string_length<span class="op">(</span>str1<span class="op">));</span></span>
<span id="cb190-55"><a href="#cb190-55" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;str2の長さ: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> string_length<span class="op">(</span>str2<span class="op">));</span></span>
<span id="cb190-56"><a href="#cb190-56" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb190-57"><a href="#cb190-57" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 文字列のコピー */</span></span>
<span id="cb190-58"><a href="#cb190-58" aria-hidden="true" tabindex="-1"></a>    string_copy<span class="op">(</span>buffer<span class="op">,</span> str1<span class="op">);</span></span>
<span id="cb190-59"><a href="#cb190-59" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;コピー結果: </span><span class="sc">\&quot;%s\&quot;\n</span><span class="st">&quot;</span><span class="op">,</span> buffer<span class="op">);</span></span>
<span id="cb190-60"><a href="#cb190-60" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb190-61"><a href="#cb190-61" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 文字列の連結 */</span></span>
<span id="cb190-62"><a href="#cb190-62" aria-hidden="true" tabindex="-1"></a>    string_copy<span class="op">(</span>result<span class="op">,</span> str1<span class="op">);</span>  <span class="co">/* まずstr1をコピー */</span></span>
<span id="cb190-63"><a href="#cb190-63" aria-hidden="true" tabindex="-1"></a>    string_concat<span class="op">(</span>result<span class="op">,</span> <span class="st">&quot;, &quot;</span><span class="op">);</span></span>
<span id="cb190-64"><a href="#cb190-64" aria-hidden="true" tabindex="-1"></a>    string_concat<span class="op">(</span>result<span class="op">,</span> str2<span class="op">);</span></span>
<span id="cb190-65"><a href="#cb190-65" aria-hidden="true" tabindex="-1"></a>    string_concat<span class="op">(</span>result<span class="op">,</span> <span class="st">&quot;!&quot;</span><span class="op">);</span></span>
<span id="cb190-66"><a href="#cb190-66" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;連結結果: </span><span class="sc">\&quot;%s\&quot;\n</span><span class="st">&quot;</span><span class="op">,</span> result<span class="op">);</span></span>
<span id="cb190-67"><a href="#cb190-67" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb190-68"><a href="#cb190-68" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb190-69"><a href="#cb190-69" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 data-number="11.3.8" id="ポインタの配列"><span
class="header-section-number">11.3.8</span> ポインタの配列 📚</h3>
<h4 data-number="11.3.8.1" id="ポインタ配列の基本"><span
class="header-section-number">11.3.8.1</span> ポインタ配列の基本</h4>
<div class="sourceCode" id="cb191"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb191-1"><a href="#cb191-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb191-2"><a href="#cb191-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb191-3"><a href="#cb191-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb191-4"><a href="#cb191-4" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb191-5"><a href="#cb191-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> a <span class="op">=</span> <span class="dv">10</span><span class="op">,</span> b <span class="op">=</span> <span class="dv">20</span><span class="op">,</span> c <span class="op">=</span> <span class="dv">30</span><span class="op">,</span> d <span class="op">=</span> <span class="dv">40</span><span class="op">;</span></span>
<span id="cb191-6"><a href="#cb191-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> <span class="op">*</span>ptr_array<span class="op">[</span><span class="dv">4</span><span class="op">];</span>  <span class="co">/* ポインタの配列 */</span></span>
<span id="cb191-7"><a href="#cb191-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb191-8"><a href="#cb191-8" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb191-9"><a href="#cb191-9" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* ポインタ配列に各変数のアドレスを格納 */</span></span>
<span id="cb191-10"><a href="#cb191-10" aria-hidden="true" tabindex="-1"></a>    ptr_array<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="op">&amp;</span>a<span class="op">;</span></span>
<span id="cb191-11"><a href="#cb191-11" aria-hidden="true" tabindex="-1"></a>    ptr_array<span class="op">[</span><span class="dv">1</span><span class="op">]</span> <span class="op">=</span> <span class="op">&amp;</span>b<span class="op">;</span></span>
<span id="cb191-12"><a href="#cb191-12" aria-hidden="true" tabindex="-1"></a>    ptr_array<span class="op">[</span><span class="dv">2</span><span class="op">]</span> <span class="op">=</span> <span class="op">&amp;</span>c<span class="op">;</span></span>
<span id="cb191-13"><a href="#cb191-13" aria-hidden="true" tabindex="-1"></a>    ptr_array<span class="op">[</span><span class="dv">3</span><span class="op">]</span> <span class="op">=</span> <span class="op">&amp;</span>d<span class="op">;</span></span>
<span id="cb191-14"><a href="#cb191-14" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb191-15"><a href="#cb191-15" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== ポインタ配列の内容 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb191-16"><a href="#cb191-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">4</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb191-17"><a href="#cb191-17" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;ptr_array[</span><span class="sc">%d</span><span class="st">] = </span><span class="sc">%p</span><span class="st">, *ptr_array[</span><span class="sc">%d</span><span class="st">] = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span></span>
<span id="cb191-18"><a href="#cb191-18" aria-hidden="true" tabindex="-1"></a>               i<span class="op">,</span> <span class="op">(</span><span class="dt">void</span><span class="op">*)</span>ptr_array<span class="op">[</span>i<span class="op">],</span> i<span class="op">,</span> <span class="op">*</span>ptr_array<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb191-19"><a href="#cb191-19" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb191-20"><a href="#cb191-20" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb191-21"><a href="#cb191-21" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* ポインタを通じて値を変更 */</span></span>
<span id="cb191-22"><a href="#cb191-22" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>ptr_array<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="dv">100</span><span class="op">;</span></span>
<span id="cb191-23"><a href="#cb191-23" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>ptr_array<span class="op">[</span><span class="dv">2</span><span class="op">]</span> <span class="op">=</span> <span class="dv">300</span><span class="op">;</span></span>
<span id="cb191-24"><a href="#cb191-24" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb191-25"><a href="#cb191-25" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">=== 変更後の値 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb191-26"><a href="#cb191-26" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;a = </span><span class="sc">%d</span><span class="st">, b = </span><span class="sc">%d</span><span class="st">, c = </span><span class="sc">%d</span><span class="st">, d = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> a<span class="op">,</span> b<span class="op">,</span> c<span class="op">,</span> d<span class="op">);</span></span>
<span id="cb191-27"><a href="#cb191-27" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb191-28"><a href="#cb191-28" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb191-29"><a href="#cb191-29" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h4 data-number="11.3.8.2" id="文字列ポインタの配列"><span
class="header-section-number">11.3.8.2</span> 文字列ポインタの配列</h4>
<div class="sourceCode" id="cb192"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb192-1"><a href="#cb192-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb192-2"><a href="#cb192-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb192-3"><a href="#cb192-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb192-4"><a href="#cb192-4" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb192-5"><a href="#cb192-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> <span class="op">*</span>fruits<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb192-6"><a href="#cb192-6" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;Apple&quot;</span><span class="op">,</span></span>
<span id="cb192-7"><a href="#cb192-7" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;Banana&quot;</span><span class="op">,</span></span>
<span id="cb192-8"><a href="#cb192-8" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;Cherry&quot;</span><span class="op">,</span></span>
<span id="cb192-9"><a href="#cb192-9" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;Date&quot;</span><span class="op">,</span></span>
<span id="cb192-10"><a href="#cb192-10" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;Elderberry&quot;</span></span>
<span id="cb192-11"><a href="#cb192-11" aria-hidden="true" tabindex="-1"></a>    <span class="op">};</span></span>
<span id="cb192-12"><a href="#cb192-12" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> count <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>fruits<span class="op">)</span> <span class="op">/</span> <span class="kw">sizeof</span><span class="op">(</span>fruits<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb192-13"><a href="#cb192-13" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb192-14"><a href="#cb192-14" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb192-15"><a href="#cb192-15" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== 果物リスト ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb192-16"><a href="#cb192-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> count<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb192-17"><a href="#cb192-17" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st">. </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">,</span> fruits<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb192-18"><a href="#cb192-18" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb192-19"><a href="#cb192-19" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb192-20"><a href="#cb192-20" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* ポインタの変更 */</span></span>
<span id="cb192-21"><a href="#cb192-21" aria-hidden="true" tabindex="-1"></a>    fruits<span class="op">[</span><span class="dv">1</span><span class="op">]</span> <span class="op">=</span> <span class="st">&quot;Blueberry&quot;</span><span class="op">;</span></span>
<span id="cb192-22"><a href="#cb192-22" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb192-23"><a href="#cb192-23" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">=== 変更後 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb192-24"><a href="#cb192-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> count<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb192-25"><a href="#cb192-25" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st">. </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">,</span> fruits<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb192-26"><a href="#cb192-26" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb192-27"><a href="#cb192-27" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb192-28"><a href="#cb192-28" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb192-29"><a href="#cb192-29" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 data-number="11.3.9" id="実践的なポインタ活用例"><span
class="header-section-number">11.3.9</span> 実践的なポインタ活用例
💡</h3>
<h4 data-number="11.3.9.1" id="動的配列の操作"><span
class="header-section-number">11.3.9.1</span> 動的配列の操作</h4>
<div class="sourceCode" id="cb193"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb193-1"><a href="#cb193-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb193-2"><a href="#cb193-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb193-3"><a href="#cb193-3" aria-hidden="true" tabindex="-1"></a><span class="co">/* 配列内の要素を逆順にする */</span></span>
<span id="cb193-4"><a href="#cb193-4" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> reverse_array<span class="op">(</span><span class="dt">int</span> <span class="op">*</span>arr<span class="op">,</span> <span class="dt">int</span> size<span class="op">)</span></span>
<span id="cb193-5"><a href="#cb193-5" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb193-6"><a href="#cb193-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> <span class="op">*</span>start <span class="op">=</span> arr<span class="op">;</span></span>
<span id="cb193-7"><a href="#cb193-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> <span class="op">*</span>end <span class="op">=</span> arr <span class="op">+</span> size <span class="op">-</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb193-8"><a href="#cb193-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> temp<span class="op">;</span></span>
<span id="cb193-9"><a href="#cb193-9" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb193-10"><a href="#cb193-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>start <span class="op">&lt;</span> end<span class="op">)</span> <span class="op">{</span></span>
<span id="cb193-11"><a href="#cb193-11" aria-hidden="true" tabindex="-1"></a>        temp <span class="op">=</span> <span class="op">*</span>start<span class="op">;</span></span>
<span id="cb193-12"><a href="#cb193-12" aria-hidden="true" tabindex="-1"></a>        <span class="op">*</span>start <span class="op">=</span> <span class="op">*</span>end<span class="op">;</span></span>
<span id="cb193-13"><a href="#cb193-13" aria-hidden="true" tabindex="-1"></a>        <span class="op">*</span>end <span class="op">=</span> temp<span class="op">;</span></span>
<span id="cb193-14"><a href="#cb193-14" aria-hidden="true" tabindex="-1"></a>        start<span class="op">++;</span></span>
<span id="cb193-15"><a href="#cb193-15" aria-hidden="true" tabindex="-1"></a>        end<span class="op">--;</span></span>
<span id="cb193-16"><a href="#cb193-16" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb193-17"><a href="#cb193-17" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb193-18"><a href="#cb193-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb193-19"><a href="#cb193-19" aria-hidden="true" tabindex="-1"></a><span class="co">/* 配列を回転させる（右に1つシフト） */</span></span>
<span id="cb193-20"><a href="#cb193-20" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> rotate_right<span class="op">(</span><span class="dt">int</span> <span class="op">*</span>arr<span class="op">,</span> <span class="dt">int</span> size<span class="op">)</span></span>
<span id="cb193-21"><a href="#cb193-21" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb193-22"><a href="#cb193-22" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> last <span class="op">=</span> <span class="op">*(</span>arr <span class="op">+</span> size <span class="op">-</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb193-23"><a href="#cb193-23" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb193-24"><a href="#cb193-24" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb193-25"><a href="#cb193-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> size <span class="op">-</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&gt;</span> <span class="dv">0</span><span class="op">;</span> i<span class="op">--)</span> <span class="op">{</span></span>
<span id="cb193-26"><a href="#cb193-26" aria-hidden="true" tabindex="-1"></a>        <span class="op">*(</span>arr <span class="op">+</span> i<span class="op">)</span> <span class="op">=</span> <span class="op">*(</span>arr <span class="op">+</span> i <span class="op">-</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb193-27"><a href="#cb193-27" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb193-28"><a href="#cb193-28" aria-hidden="true" tabindex="-1"></a>    <span class="op">*</span>arr <span class="op">=</span> last<span class="op">;</span></span>
<span id="cb193-29"><a href="#cb193-29" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb193-30"><a href="#cb193-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb193-31"><a href="#cb193-31" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb193-32"><a href="#cb193-32" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb193-33"><a href="#cb193-33" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> numbers<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">5</span><span class="op">,</span> <span class="dv">6</span><span class="op">,</span> <span class="dv">7</span><span class="op">,</span> <span class="dv">8</span><span class="op">};</span></span>
<span id="cb193-34"><a href="#cb193-34" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> size <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>numbers<span class="op">)</span> <span class="op">/</span> <span class="kw">sizeof</span><span class="op">(</span>numbers<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb193-35"><a href="#cb193-35" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb193-36"><a href="#cb193-36" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb193-37"><a href="#cb193-37" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;元の配列: &quot;</span><span class="op">);</span></span>
<span id="cb193-38"><a href="#cb193-38" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> size<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb193-39"><a href="#cb193-39" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st"> &quot;</span><span class="op">,</span> numbers<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb193-40"><a href="#cb193-40" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb193-41"><a href="#cb193-41" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb193-42"><a href="#cb193-42" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb193-43"><a href="#cb193-43" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 配列を逆順にする */</span></span>
<span id="cb193-44"><a href="#cb193-44" aria-hidden="true" tabindex="-1"></a>    reverse_array<span class="op">(</span>numbers<span class="op">,</span> size<span class="op">);</span></span>
<span id="cb193-45"><a href="#cb193-45" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;逆順後: &quot;</span><span class="op">);</span></span>
<span id="cb193-46"><a href="#cb193-46" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> size<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb193-47"><a href="#cb193-47" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st"> &quot;</span><span class="op">,</span> numbers<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb193-48"><a href="#cb193-48" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb193-49"><a href="#cb193-49" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb193-50"><a href="#cb193-50" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb193-51"><a href="#cb193-51" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 配列を右に回転 */</span></span>
<span id="cb193-52"><a href="#cb193-52" aria-hidden="true" tabindex="-1"></a>    rotate_right<span class="op">(</span>numbers<span class="op">,</span> size<span class="op">);</span></span>
<span id="cb193-53"><a href="#cb193-53" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;右回転後: &quot;</span><span class="op">);</span></span>
<span id="cb193-54"><a href="#cb193-54" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> size<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb193-55"><a href="#cb193-55" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st"> &quot;</span><span class="op">,</span> numbers<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb193-56"><a href="#cb193-56" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb193-57"><a href="#cb193-57" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb193-58"><a href="#cb193-58" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb193-59"><a href="#cb193-59" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb193-60"><a href="#cb193-60" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h4 data-number="11.3.9.2" id="ポインタを使ったソート"><span
class="header-section-number">11.3.9.2</span>
ポインタを使ったソート</h4>
<div class="sourceCode" id="cb194"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb194-1"><a href="#cb194-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb194-2"><a href="#cb194-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb194-3"><a href="#cb194-3" aria-hidden="true" tabindex="-1"></a><span class="co">/* ポインタを使ったバブルソート */</span></span>
<span id="cb194-4"><a href="#cb194-4" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> bubble_sort_ptr<span class="op">(</span><span class="dt">int</span> <span class="op">*</span>arr<span class="op">,</span> <span class="dt">int</span> size<span class="op">)</span></span>
<span id="cb194-5"><a href="#cb194-5" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb194-6"><a href="#cb194-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">,</span> j<span class="op">;</span></span>
<span id="cb194-7"><a href="#cb194-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> <span class="op">*</span>ptr1<span class="op">,</span> <span class="op">*</span>ptr2<span class="op">;</span></span>
<span id="cb194-8"><a href="#cb194-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> temp<span class="op">;</span></span>
<span id="cb194-9"><a href="#cb194-9" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb194-10"><a href="#cb194-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> size <span class="op">-</span> <span class="dv">1</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb194-11"><a href="#cb194-11" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span>j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> j <span class="op">&lt;</span> size <span class="op">-</span> <span class="dv">1</span> <span class="op">-</span> i<span class="op">;</span> j<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb194-12"><a href="#cb194-12" aria-hidden="true" tabindex="-1"></a>            ptr1 <span class="op">=</span> arr <span class="op">+</span> j<span class="op">;</span></span>
<span id="cb194-13"><a href="#cb194-13" aria-hidden="true" tabindex="-1"></a>            ptr2 <span class="op">=</span> arr <span class="op">+</span> j <span class="op">+</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb194-14"><a href="#cb194-14" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb194-15"><a href="#cb194-15" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(*</span>ptr1 <span class="op">&gt;</span> <span class="op">*</span>ptr2<span class="op">)</span> <span class="op">{</span></span>
<span id="cb194-16"><a href="#cb194-16" aria-hidden="true" tabindex="-1"></a>                temp <span class="op">=</span> <span class="op">*</span>ptr1<span class="op">;</span></span>
<span id="cb194-17"><a href="#cb194-17" aria-hidden="true" tabindex="-1"></a>                <span class="op">*</span>ptr1 <span class="op">=</span> <span class="op">*</span>ptr2<span class="op">;</span></span>
<span id="cb194-18"><a href="#cb194-18" aria-hidden="true" tabindex="-1"></a>                <span class="op">*</span>ptr2 <span class="op">=</span> temp<span class="op">;</span></span>
<span id="cb194-19"><a href="#cb194-19" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb194-20"><a href="#cb194-20" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb194-21"><a href="#cb194-21" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb194-22"><a href="#cb194-22" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb194-23"><a href="#cb194-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb194-24"><a href="#cb194-24" aria-hidden="true" tabindex="-1"></a><span class="co">/* 2つの配列を比較 */</span></span>
<span id="cb194-25"><a href="#cb194-25" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> compare_arrays<span class="op">(</span><span class="dt">int</span> <span class="op">*</span>arr1<span class="op">,</span> <span class="dt">int</span> <span class="op">*</span>arr2<span class="op">,</span> <span class="dt">int</span> size<span class="op">)</span></span>
<span id="cb194-26"><a href="#cb194-26" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb194-27"><a href="#cb194-27" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb194-28"><a href="#cb194-28" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb194-29"><a href="#cb194-29" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> size<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb194-30"><a href="#cb194-30" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(*(</span>arr1 <span class="op">+</span> i<span class="op">)</span> <span class="op">!=</span> <span class="op">*(</span>arr2 <span class="op">+</span> i<span class="op">))</span> <span class="op">{</span></span>
<span id="cb194-31"><a href="#cb194-31" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span>  <span class="co">/* 異なる */</span></span>
<span id="cb194-32"><a href="#cb194-32" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb194-33"><a href="#cb194-33" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb194-34"><a href="#cb194-34" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb194-35"><a href="#cb194-35" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">1</span><span class="op">;</span>  <span class="co">/* 同じ */</span></span>
<span id="cb194-36"><a href="#cb194-36" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb194-37"><a href="#cb194-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb194-38"><a href="#cb194-38" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb194-39"><a href="#cb194-39" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb194-40"><a href="#cb194-40" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> original<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">64</span><span class="op">,</span> <span class="dv">34</span><span class="op">,</span> <span class="dv">25</span><span class="op">,</span> <span class="dv">12</span><span class="op">,</span> <span class="dv">22</span><span class="op">,</span> <span class="dv">11</span><span class="op">,</span> <span class="dv">90</span><span class="op">};</span></span>
<span id="cb194-41"><a href="#cb194-41" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> copy<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">64</span><span class="op">,</span> <span class="dv">34</span><span class="op">,</span> <span class="dv">25</span><span class="op">,</span> <span class="dv">12</span><span class="op">,</span> <span class="dv">22</span><span class="op">,</span> <span class="dv">11</span><span class="op">,</span> <span class="dv">90</span><span class="op">};</span></span>
<span id="cb194-42"><a href="#cb194-42" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> size <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>original<span class="op">)</span> <span class="op">/</span> <span class="kw">sizeof</span><span class="op">(</span>original<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb194-43"><a href="#cb194-43" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb194-44"><a href="#cb194-44" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb194-45"><a href="#cb194-45" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ソート前: &quot;</span><span class="op">);</span></span>
<span id="cb194-46"><a href="#cb194-46" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> size<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb194-47"><a href="#cb194-47" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st"> &quot;</span><span class="op">,</span> original<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb194-48"><a href="#cb194-48" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb194-49"><a href="#cb194-49" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb194-50"><a href="#cb194-50" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb194-51"><a href="#cb194-51" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* ソート実行 */</span></span>
<span id="cb194-52"><a href="#cb194-52" aria-hidden="true" tabindex="-1"></a>    bubble_sort_ptr<span class="op">(</span>original<span class="op">,</span> size<span class="op">);</span></span>
<span id="cb194-53"><a href="#cb194-53" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb194-54"><a href="#cb194-54" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ソート後: &quot;</span><span class="op">);</span></span>
<span id="cb194-55"><a href="#cb194-55" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> size<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb194-56"><a href="#cb194-56" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st"> &quot;</span><span class="op">,</span> original<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb194-57"><a href="#cb194-57" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb194-58"><a href="#cb194-58" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb194-59"><a href="#cb194-59" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb194-60"><a href="#cb194-60" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 配列の比較 */</span></span>
<span id="cb194-61"><a href="#cb194-61" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>compare_arrays<span class="op">(</span>original<span class="op">,</span> copy<span class="op">,</span> size<span class="op">))</span> <span class="op">{</span></span>
<span id="cb194-62"><a href="#cb194-62" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;配列は同じです</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb194-63"><a href="#cb194-63" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb194-64"><a href="#cb194-64" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;配列は異なります</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb194-65"><a href="#cb194-65" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb194-66"><a href="#cb194-66" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb194-67"><a href="#cb194-67" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb194-68"><a href="#cb194-68" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h2 data-number="11.4" id="サンプルコード-9"><span
class="header-section-number">11.4</span> サンプルコード</h2>
<h3 data-number="11.4.1" id="ポインタの基本操作"><span
class="header-section-number">11.4.1</span> ポインタの基本操作</h3>
<p>プログラムファイル: <code>examples/pointer_basic.c</code></p>
<p>ポインタの宣言、初期化、基本的な操作を学習します。</p>
<h3 data-number="11.4.2" id="ポインタと配列"><span
class="header-section-number">11.4.2</span> ポインタと配列</h3>
<p>プログラムファイル: <code>examples/pointer_arrays.c</code></p>
<p>ポインタと配列の関係、ポインタ演算を学習します。</p>
<h3 data-number="11.4.3" id="ポインタと関数-1"><span
class="header-section-number">11.4.3</span> ポインタと関数</h3>
<p>プログラムファイル: <code>examples/pointer_functions.c</code></p>
<p>関数引数、戻り値としてのポインタの使用方法を学習します。</p>
<h3 data-number="11.4.4" id="コンパイルと実行-9"><span
class="header-section-number">11.4.4</span> コンパイルと実行</h3>
<div class="sourceCode" id="cb195"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb195-1"><a href="#cb195-1" aria-hidden="true" tabindex="-1"></a><span class="co"># examples ディレクトリに移動</span></span>
<span id="cb195-2"><a href="#cb195-2" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> examples</span>
<span id="cb195-3"><a href="#cb195-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb195-4"><a href="#cb195-4" aria-hidden="true" tabindex="-1"></a><span class="co"># C90準拠でコンパイル</span></span>
<span id="cb195-5"><a href="#cb195-5" aria-hidden="true" tabindex="-1"></a><span class="fu">gcc</span> <span class="at">-std</span><span class="op">=</span>c90 <span class="at">-Wall</span> <span class="at">-Wextra</span> <span class="at">-pedantic</span> pointer_basic.c <span class="at">-o</span> pointer_basic</span>
<span id="cb195-6"><a href="#cb195-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb195-7"><a href="#cb195-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 実行</span></span>
<span id="cb195-8"><a href="#cb195-8" aria-hidden="true" tabindex="-1"></a><span class="ex">./pointer_basic</span></span></code></pre></div>
<h2 data-number="11.5" id="演習課題-9"><span
class="header-section-number">11.5</span> 演習課題</h2>
<h3 data-number="11.5.1" id="基礎問題-9"><span
class="header-section-number">11.5.1</span> 基礎問題</h3>
<ol type="1">
<li><strong>ポインタの基本操作</strong>
<ul>
<li>2つの変数の値をポインタを使って交換するプログラムを作成してください</li>
</ul></li>
<li><strong>配列とポインタ</strong>
<ul>
<li>ポインタ演算を使って配列の要素を逆順に表示するプログラムを作成してください</li>
</ul></li>
<li><strong>文字列操作</strong>
<ul>
<li>ポインタを使って文字列の長さを計算し、文字列を逆順にするプログラムを作成してください</li>
</ul></li>
</ol>
<h3 data-number="11.5.2" id="応用問題-9"><span
class="header-section-number">11.5.2</span> 応用問題</h3>
<ol type="1">
<li><strong>配列操作関数</strong>
<ul>
<li>ポインタを使って配列の最大値、最小値、平均値を計算する関数を作成してください</li>
</ul></li>
<li><strong>文字列処理</strong>
<ul>
<li>ポインタを使って文字列の検索、置換、分割を行う関数群を作成してください</li>
</ul></li>
<li><strong>データ変換</strong>
<ul>
<li>ポインタを使って配列のデータ型変換を行うプログラムを作成してください</li>
</ul></li>
</ol>
<h3 data-number="11.5.3" id="発展問題-4"><span
class="header-section-number">11.5.3</span> 発展問題</h3>
<ol type="1">
<li><strong>メモリ操作</strong>
<ul>
<li>ポインタを使って任意のデータ型の配列をコピーする汎用関数を作成してください</li>
</ul></li>
<li><strong>アルゴリズム実装</strong>
<ul>
<li>ポインタを使って各種ソートアルゴリズムを実装してください</li>
</ul></li>
<li><strong>データ構造</strong>
<ul>
<li>ポインタを使って簡単なリンクリスト構造を実装してください</li>
</ul></li>
</ol>
<h2 data-number="11.6" id="コンパイル方法-9"><span
class="header-section-number">11.6</span> コンパイル方法</h2>
<p>この章では以下のMakefileを使用してコンパイルができます：</p>
<div class="sourceCode" id="cb196"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb196-1"><a href="#cb196-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 全ての例題をコンパイル</span></span>
<span id="cb196-2"><a href="#cb196-2" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> all</span>
<span id="cb196-3"><a href="#cb196-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb196-4"><a href="#cb196-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 特定のプログラムをコンパイル</span></span>
<span id="cb196-5"><a href="#cb196-5" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> pointer_basic</span>
<span id="cb196-6"><a href="#cb196-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb196-7"><a href="#cb196-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 実行</span></span>
<span id="cb196-8"><a href="#cb196-8" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> run</span>
<span id="cb196-9"><a href="#cb196-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb196-10"><a href="#cb196-10" aria-hidden="true" tabindex="-1"></a><span class="co"># クリーンアップ</span></span>
<span id="cb196-11"><a href="#cb196-11" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> clean</span></code></pre></div>
<h2 data-number="11.7" id="規格による違い-9"><span
class="header-section-number">11.7</span> 規格による違い</h2>
<h3 data-number="11.7.1" id="c90での制限事項-8"><span
class="header-section-number">11.7.1</span> C90での制限事項</h3>
<ul>
<li>void*からの暗黙的な型変換は制限的</li>
<li>ポインタ演算は整数型との組み合わせのみ</li>
<li>関数ポインタの表記法は限定的</li>
</ul>
<h3 data-number="11.7.2" id="c99以降の拡張-8"><span
class="header-section-number">11.7.2</span> C99以降の拡張</h3>
<ul>
<li>restrict修飾子の追加</li>
<li>可変長配列とポインタの関係改善</li>
<li>より厳密なポインタ型チェック</li>
</ul>
<h2 data-number="11.8" id="よくある間違い-7"><span
class="header-section-number">11.8</span> 🚨 よくある間違い</h2>
<h3 data-number="11.8.1" id="未初期化ポインタの使用"><span
class="header-section-number">11.8.1</span> 1.
未初期化ポインタの使用</h3>
<div class="sourceCode" id="cb197"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb197-1"><a href="#cb197-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* NG: 初期化されていないポインタ */</span></span>
<span id="cb197-2"><a href="#cb197-2" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> <span class="op">*</span>ptr<span class="op">;</span></span>
<span id="cb197-3"><a href="#cb197-3" aria-hidden="true" tabindex="-1"></a><span class="op">*</span>ptr <span class="op">=</span> <span class="dv">100</span><span class="op">;</span>  <span class="co">/* 危険: 不明なメモリへの書き込み */</span></span>
<span id="cb197-4"><a href="#cb197-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb197-5"><a href="#cb197-5" aria-hidden="true" tabindex="-1"></a><span class="co">/* OK: 適切に初期化 */</span></span>
<span id="cb197-6"><a href="#cb197-6" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> value <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb197-7"><a href="#cb197-7" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> <span class="op">*</span>ptr <span class="op">=</span> <span class="op">&amp;</span>value<span class="op">;</span></span>
<span id="cb197-8"><a href="#cb197-8" aria-hidden="true" tabindex="-1"></a><span class="op">*</span>ptr <span class="op">=</span> <span class="dv">100</span><span class="op">;</span></span></code></pre></div>
<h3 data-number="11.8.2" id="nullポインタの参照"><span
class="header-section-number">11.8.2</span> 2. NULLポインタの参照</h3>
<div class="sourceCode" id="cb198"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb198-1"><a href="#cb198-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* NG: NULLポインタの参照 */</span></span>
<span id="cb198-2"><a href="#cb198-2" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> <span class="op">*</span>ptr <span class="op">=</span> NULL<span class="op">;</span></span>
<span id="cb198-3"><a href="#cb198-3" aria-hidden="true" tabindex="-1"></a>printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">*</span>ptr<span class="op">);</span>  <span class="co">/* セグメンテーション違反 */</span></span>
<span id="cb198-4"><a href="#cb198-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb198-5"><a href="#cb198-5" aria-hidden="true" tabindex="-1"></a><span class="co">/* OK: NULLチェック */</span></span>
<span id="cb198-6"><a href="#cb198-6" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="op">(</span>ptr <span class="op">!=</span> NULL<span class="op">)</span> <span class="op">{</span></span>
<span id="cb198-7"><a href="#cb198-7" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">*</span>ptr<span class="op">);</span></span>
<span id="cb198-8"><a href="#cb198-8" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 data-number="11.8.3" id="スコープ外変数へのポインタ"><span
class="header-section-number">11.8.3</span> 3.
スコープ外変数へのポインタ</h3>
<div class="sourceCode" id="cb199"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb199-1"><a href="#cb199-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* NG: ローカル変数のアドレス返し */</span></span>
<span id="cb199-2"><a href="#cb199-2" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span><span class="op">*</span> bad_function<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb199-3"><a href="#cb199-3" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb199-4"><a href="#cb199-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> local <span class="op">=</span> <span class="dv">42</span><span class="op">;</span></span>
<span id="cb199-5"><a href="#cb199-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">&amp;</span>local<span class="op">;</span>  <span class="co">/* 危険: ローカル変数のアドレス */</span></span>
<span id="cb199-6"><a href="#cb199-6" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb199-7"><a href="#cb199-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb199-8"><a href="#cb199-8" aria-hidden="true" tabindex="-1"></a><span class="co">/* OK: 静的変数または引数で渡された変数を使用 */</span></span>
<span id="cb199-9"><a href="#cb199-9" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span><span class="op">*</span> good_function<span class="op">(</span><span class="dt">int</span> <span class="op">*</span>param<span class="op">)</span></span>
<span id="cb199-10"><a href="#cb199-10" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb199-11"><a href="#cb199-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> param<span class="op">;</span>  <span class="co">/* 引数で渡されたアドレスを返す */</span></span>
<span id="cb199-12"><a href="#cb199-12" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 data-number="11.8.4" id="配列境界の越えた参照"><span
class="header-section-number">11.8.4</span> 4. 配列境界の越えた参照</h3>
<div class="sourceCode" id="cb200"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb200-1"><a href="#cb200-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* NG: 配列の範囲外アクセス */</span></span>
<span id="cb200-2"><a href="#cb200-2" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> arr<span class="op">[</span><span class="dv">5</span><span class="op">]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">5</span><span class="op">};</span></span>
<span id="cb200-3"><a href="#cb200-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> <span class="op">*</span>ptr <span class="op">=</span> arr<span class="op">;</span></span>
<span id="cb200-4"><a href="#cb200-4" aria-hidden="true" tabindex="-1"></a>printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">*(</span>ptr <span class="op">+</span> <span class="dv">10</span><span class="op">));</span>  <span class="co">/* 範囲外アクセス */</span></span>
<span id="cb200-5"><a href="#cb200-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb200-6"><a href="#cb200-6" aria-hidden="true" tabindex="-1"></a><span class="co">/* OK: 範囲チェック */</span></span>
<span id="cb200-7"><a href="#cb200-7" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> index <span class="op">=</span> <span class="dv">3</span><span class="op">;</span></span>
<span id="cb200-8"><a href="#cb200-8" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="op">(</span>index <span class="op">&gt;=</span> <span class="dv">0</span> <span class="op">&amp;&amp;</span> index <span class="op">&lt;</span> <span class="dv">5</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb200-9"><a href="#cb200-9" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">*(</span>ptr <span class="op">+</span> index<span class="op">));</span></span>
<span id="cb200-10"><a href="#cb200-10" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h2 data-number="11.9" id="次の章へ-9"><span
class="header-section-number">11.9</span> 次の章へ</h2>
<p>ポインタの基礎を理解したら、第10章「構造体とポインタ」の実装をお待ちください。現在実装中です。</p>
<h2 data-number="11.10" id="参考資料-9"><span
class="header-section-number">11.10</span> 参考資料</h2>
<ul>
<li><a
href="https://ja.cppreference.com/w/c/language/pointer">C言語ポインタリファレンス</a></li>
<li><a
href="https://ja.cppreference.com/w/c/language/operator_arithmetic">ポインタ演算の詳細</a></li>
<li><a
href="https://ja.cppreference.com/w/c/language/memory_model">メモリモデルとポインタ</a></li>
</ul>
<h1 data-number="12" id="構造体とポインタ"><span
class="header-section-number">12</span> 構造体とポインタ</h1>
<h2 data-number="12.1" id="対応c規格-11"><span
class="header-section-number">12.1</span> 対応C規格</h2>
<ul>
<li><strong>主要対象:</strong> C90</li>
<li><strong>学習内容:</strong>
構造体の基本、構造体ポインタ、構造体ポインタ配列、-&gt;演算子、メモリ管理</li>
</ul>
<h2 data-number="12.2" id="学習目標-11"><span
class="header-section-number">12.2</span> 学習目標</h2>
<p>この章を完了すると、以下のことができるようになります：</p>
<ul>
<li>構造体の基本概念を理解する</li>
<li>構造体ポインタを効果的に使える</li>
<li>-&gt;演算子と.演算子の使い分けができる</li>
<li>構造体ポインタ配列を活用できる</li>
<li>構造体を使ったデータ管理ができる</li>
</ul>
<h2 data-number="12.3" id="理論解説-10"><span
class="header-section-number">12.3</span> 理論解説</h2>
<h3 data-number="12.3.1" id="構造体の基本概念"><span
class="header-section-number">12.3.1</span> 構造体の基本概念 🏗️</h3>
<p>構造体は異なるデータ型を組み合わせて新しいデータ型を作る仕組みです。</p>
<h4 data-number="12.3.1.1" id="構造体の定義と宣言"><span
class="header-section-number">12.3.1.1</span> 構造体の定義と宣言</h4>
<div class="sourceCode" id="cb201"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb201-1"><a href="#cb201-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb201-2"><a href="#cb201-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;string.h&gt;</span></span>
<span id="cb201-3"><a href="#cb201-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb201-4"><a href="#cb201-4" aria-hidden="true" tabindex="-1"></a><span class="co">/* 学生情報を表す構造体 */</span></span>
<span id="cb201-5"><a href="#cb201-5" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> Student <span class="op">{</span></span>
<span id="cb201-6"><a href="#cb201-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> id<span class="op">;</span></span>
<span id="cb201-7"><a href="#cb201-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> name<span class="op">[</span><span class="dv">50</span><span class="op">];</span></span>
<span id="cb201-8"><a href="#cb201-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> age<span class="op">;</span></span>
<span id="cb201-9"><a href="#cb201-9" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span> gpa<span class="op">;</span></span>
<span id="cb201-10"><a href="#cb201-10" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb201-11"><a href="#cb201-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb201-12"><a href="#cb201-12" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb201-13"><a href="#cb201-13" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb201-14"><a href="#cb201-14" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Student student1<span class="op">;</span></span>
<span id="cb201-15"><a href="#cb201-15" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb201-16"><a href="#cb201-16" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* メンバーに値を代入 */</span></span>
<span id="cb201-17"><a href="#cb201-17" aria-hidden="true" tabindex="-1"></a>    student1<span class="op">.</span>id <span class="op">=</span> <span class="dv">12345</span><span class="op">;</span></span>
<span id="cb201-18"><a href="#cb201-18" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>student1<span class="op">.</span>name<span class="op">,</span> <span class="st">&quot;田中太郎&quot;</span><span class="op">);</span></span>
<span id="cb201-19"><a href="#cb201-19" aria-hidden="true" tabindex="-1"></a>    student1<span class="op">.</span>age <span class="op">=</span> <span class="dv">20</span><span class="op">;</span></span>
<span id="cb201-20"><a href="#cb201-20" aria-hidden="true" tabindex="-1"></a>    student1<span class="op">.</span>gpa <span class="op">=</span> <span class="fl">3.75</span><span class="op">;</span></span>
<span id="cb201-21"><a href="#cb201-21" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb201-22"><a href="#cb201-22" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* メンバーの値を表示 */</span></span>
<span id="cb201-23"><a href="#cb201-23" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;学生ID: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> student1<span class="op">.</span>id<span class="op">);</span></span>
<span id="cb201-24"><a href="#cb201-24" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;名前: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> student1<span class="op">.</span>name<span class="op">);</span></span>
<span id="cb201-25"><a href="#cb201-25" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;年齢: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> student1<span class="op">.</span>age<span class="op">);</span></span>
<span id="cb201-26"><a href="#cb201-26" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;GPA: </span><span class="sc">%.2f\n</span><span class="st">&quot;</span><span class="op">,</span> student1<span class="op">.</span>gpa<span class="op">);</span></span>
<span id="cb201-27"><a href="#cb201-27" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb201-28"><a href="#cb201-28" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb201-29"><a href="#cb201-29" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h4 data-number="12.3.1.2" id="構造体の初期化"><span
class="header-section-number">12.3.1.2</span> 構造体の初期化</h4>
<div class="sourceCode" id="cb202"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb202-1"><a href="#cb202-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb202-2"><a href="#cb202-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb202-3"><a href="#cb202-3" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> Point <span class="op">{</span></span>
<span id="cb202-4"><a href="#cb202-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> x<span class="op">;</span></span>
<span id="cb202-5"><a href="#cb202-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> y<span class="op">;</span></span>
<span id="cb202-6"><a href="#cb202-6" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb202-7"><a href="#cb202-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb202-8"><a href="#cb202-8" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> Rectangle <span class="op">{</span></span>
<span id="cb202-9"><a href="#cb202-9" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Point top_left<span class="op">;</span></span>
<span id="cb202-10"><a href="#cb202-10" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Point bottom_right<span class="op">;</span></span>
<span id="cb202-11"><a href="#cb202-11" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb202-12"><a href="#cb202-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb202-13"><a href="#cb202-13" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb202-14"><a href="#cb202-14" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb202-15"><a href="#cb202-15" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 初期化方法1: 順序指定 */</span></span>
<span id="cb202-16"><a href="#cb202-16" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Point p1 <span class="op">=</span> <span class="op">{</span><span class="dv">10</span><span class="op">,</span> <span class="dv">20</span><span class="op">};</span></span>
<span id="cb202-17"><a href="#cb202-17" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb202-18"><a href="#cb202-18" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 初期化方法2: 部分初期化 */</span></span>
<span id="cb202-19"><a href="#cb202-19" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Point p2 <span class="op">=</span> <span class="op">{</span><span class="dv">30</span><span class="op">};</span>  <span class="co">/* x=30, y=0 */</span></span>
<span id="cb202-20"><a href="#cb202-20" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb202-21"><a href="#cb202-21" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 初期化方法3: ネストした構造体 */</span></span>
<span id="cb202-22"><a href="#cb202-22" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Rectangle rect <span class="op">=</span> <span class="op">{{</span><span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">},</span> <span class="op">{</span><span class="dv">100</span><span class="op">,</span> <span class="dv">50</span><span class="op">}};</span></span>
<span id="cb202-23"><a href="#cb202-23" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb202-24"><a href="#cb202-24" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 初期化方法4: 個別代入 */</span></span>
<span id="cb202-25"><a href="#cb202-25" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Point p3<span class="op">;</span></span>
<span id="cb202-26"><a href="#cb202-26" aria-hidden="true" tabindex="-1"></a>    p3<span class="op">.</span>x <span class="op">=</span> <span class="dv">40</span><span class="op">;</span></span>
<span id="cb202-27"><a href="#cb202-27" aria-hidden="true" tabindex="-1"></a>    p3<span class="op">.</span>y <span class="op">=</span> <span class="dv">60</span><span class="op">;</span></span>
<span id="cb202-28"><a href="#cb202-28" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb202-29"><a href="#cb202-29" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;p1: (</span><span class="sc">%d</span><span class="st">, </span><span class="sc">%d</span><span class="st">)</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> p1<span class="op">.</span>x<span class="op">,</span> p1<span class="op">.</span>y<span class="op">);</span></span>
<span id="cb202-30"><a href="#cb202-30" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;p2: (</span><span class="sc">%d</span><span class="st">, </span><span class="sc">%d</span><span class="st">)</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> p2<span class="op">.</span>x<span class="op">,</span> p2<span class="op">.</span>y<span class="op">);</span></span>
<span id="cb202-31"><a href="#cb202-31" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;p3: (</span><span class="sc">%d</span><span class="st">, </span><span class="sc">%d</span><span class="st">)</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> p3<span class="op">.</span>x<span class="op">,</span> p3<span class="op">.</span>y<span class="op">);</span></span>
<span id="cb202-32"><a href="#cb202-32" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;矩形: (</span><span class="sc">%d</span><span class="st">,</span><span class="sc">%d</span><span class="st">) から (</span><span class="sc">%d</span><span class="st">,</span><span class="sc">%d</span><span class="st">)</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> </span>
<span id="cb202-33"><a href="#cb202-33" aria-hidden="true" tabindex="-1"></a>           rect<span class="op">.</span>top_left<span class="op">.</span>x<span class="op">,</span> rect<span class="op">.</span>top_left<span class="op">.</span>y<span class="op">,</span></span>
<span id="cb202-34"><a href="#cb202-34" aria-hidden="true" tabindex="-1"></a>           rect<span class="op">.</span>bottom_right<span class="op">.</span>x<span class="op">,</span> rect<span class="op">.</span>bottom_right<span class="op">.</span>y<span class="op">);</span></span>
<span id="cb202-35"><a href="#cb202-35" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb202-36"><a href="#cb202-36" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb202-37"><a href="#cb202-37" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 data-number="12.3.2" id="構造体ポインタの基本"><span
class="header-section-number">12.3.2</span> 構造体ポインタの基本 🎯</h3>
<p>構造体もポインタで操作できます。大きな構造体を関数に渡す際に効率的です。</p>
<h4 data-number="12.3.2.1" id="構造体ポインタの宣言と使用"><span
class="header-section-number">12.3.2.1</span>
構造体ポインタの宣言と使用</h4>
<div class="sourceCode" id="cb203"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb203-1"><a href="#cb203-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb203-2"><a href="#cb203-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;string.h&gt;</span></span>
<span id="cb203-3"><a href="#cb203-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb203-4"><a href="#cb203-4" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> Book <span class="op">{</span></span>
<span id="cb203-5"><a href="#cb203-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> title<span class="op">[</span><span class="dv">100</span><span class="op">];</span></span>
<span id="cb203-6"><a href="#cb203-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> author<span class="op">[</span><span class="dv">50</span><span class="op">];</span></span>
<span id="cb203-7"><a href="#cb203-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> pages<span class="op">;</span></span>
<span id="cb203-8"><a href="#cb203-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span> price<span class="op">;</span></span>
<span id="cb203-9"><a href="#cb203-9" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb203-10"><a href="#cb203-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb203-11"><a href="#cb203-11" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb203-12"><a href="#cb203-12" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb203-13"><a href="#cb203-13" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Book book1<span class="op">;</span></span>
<span id="cb203-14"><a href="#cb203-14" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Book <span class="op">*</span>book_ptr<span class="op">;</span></span>
<span id="cb203-15"><a href="#cb203-15" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb203-16"><a href="#cb203-16" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 構造体ポインタを構造体のアドレスに設定 */</span></span>
<span id="cb203-17"><a href="#cb203-17" aria-hidden="true" tabindex="-1"></a>    book_ptr <span class="op">=</span> <span class="op">&amp;</span>book1<span class="op">;</span></span>
<span id="cb203-18"><a href="#cb203-18" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb203-19"><a href="#cb203-19" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* ポインタを通じてメンバーにアクセス（方法1: (*ptr).member） */</span></span>
<span id="cb203-20"><a href="#cb203-20" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">((*</span>book_ptr<span class="op">).</span>title<span class="op">,</span> <span class="st">&quot;C言語入門&quot;</span><span class="op">);</span></span>
<span id="cb203-21"><a href="#cb203-21" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">((*</span>book_ptr<span class="op">).</span>author<span class="op">,</span> <span class="st">&quot;山田花子&quot;</span><span class="op">);</span></span>
<span id="cb203-22"><a href="#cb203-22" aria-hidden="true" tabindex="-1"></a>    <span class="op">(*</span>book_ptr<span class="op">).</span>pages <span class="op">=</span> <span class="dv">300</span><span class="op">;</span></span>
<span id="cb203-23"><a href="#cb203-23" aria-hidden="true" tabindex="-1"></a>    <span class="op">(*</span>book_ptr<span class="op">).</span>price <span class="op">=</span> <span class="fl">2500.0</span><span class="op">;</span></span>
<span id="cb203-24"><a href="#cb203-24" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb203-25"><a href="#cb203-25" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 直接アクセスとポインタアクセスの比較 */</span></span>
<span id="cb203-26"><a href="#cb203-26" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== 直接アクセス ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb203-27"><a href="#cb203-27" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;書名: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> book1<span class="op">.</span>title<span class="op">);</span></span>
<span id="cb203-28"><a href="#cb203-28" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;著者: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> book1<span class="op">.</span>author<span class="op">);</span></span>
<span id="cb203-29"><a href="#cb203-29" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ページ数: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> book1<span class="op">.</span>pages<span class="op">);</span></span>
<span id="cb203-30"><a href="#cb203-30" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;価格: </span><span class="sc">%.0f</span><span class="st">円</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> book1<span class="op">.</span>price<span class="op">);</span></span>
<span id="cb203-31"><a href="#cb203-31" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb203-32"><a href="#cb203-32" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">=== ポインタアクセス ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb203-33"><a href="#cb203-33" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;書名: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(*</span>book_ptr<span class="op">).</span>title<span class="op">);</span></span>
<span id="cb203-34"><a href="#cb203-34" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;著者: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(*</span>book_ptr<span class="op">).</span>author<span class="op">);</span></span>
<span id="cb203-35"><a href="#cb203-35" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ページ数: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(*</span>book_ptr<span class="op">).</span>pages<span class="op">);</span></span>
<span id="cb203-36"><a href="#cb203-36" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;価格: </span><span class="sc">%.0f</span><span class="st">円</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(*</span>book_ptr<span class="op">).</span>price<span class="op">);</span></span>
<span id="cb203-37"><a href="#cb203-37" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb203-38"><a href="#cb203-38" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb203-39"><a href="#cb203-39" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 data-number="12.3.3" id="アロー演算子-の使用"><span
class="header-section-number">12.3.3</span> アロー演算子（-&gt;）の使用
➡️</h3>
<p>構造体ポインタには便利なアロー演算子（-&gt;）が用意されています。</p>
<h4 data-number="12.3.3.1" id="演算子と.演算子の比較"><span
class="header-section-number">12.3.3.1</span>
-&gt;演算子と.演算子の比較</h4>
<div class="sourceCode" id="cb204"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb204-1"><a href="#cb204-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb204-2"><a href="#cb204-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;string.h&gt;</span></span>
<span id="cb204-3"><a href="#cb204-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb204-4"><a href="#cb204-4" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> Employee <span class="op">{</span></span>
<span id="cb204-5"><a href="#cb204-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> id<span class="op">;</span></span>
<span id="cb204-6"><a href="#cb204-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> name<span class="op">[</span><span class="dv">30</span><span class="op">];</span></span>
<span id="cb204-7"><a href="#cb204-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> department<span class="op">[</span><span class="dv">20</span><span class="op">];</span></span>
<span id="cb204-8"><a href="#cb204-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span> salary<span class="op">;</span></span>
<span id="cb204-9"><a href="#cb204-9" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb204-10"><a href="#cb204-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb204-11"><a href="#cb204-11" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> print_employee_info<span class="op">(</span><span class="kw">struct</span> Employee <span class="op">*</span>emp<span class="op">)</span></span>
<span id="cb204-12"><a href="#cb204-12" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb204-13"><a href="#cb204-13" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== 社員情報 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb204-14"><a href="#cb204-14" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ID: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> emp<span class="op">-&gt;</span>id<span class="op">);</span>           <span class="co">/* emp-&gt;id は (*emp).id と同じ */</span></span>
<span id="cb204-15"><a href="#cb204-15" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;名前: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> emp<span class="op">-&gt;</span>name<span class="op">);</span>       <span class="co">/* emp-&gt;name は (*emp).name と同じ */</span></span>
<span id="cb204-16"><a href="#cb204-16" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;部署: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> emp<span class="op">-&gt;</span>department<span class="op">);</span> <span class="co">/* emp-&gt;department は (*emp).department と同じ */</span></span>
<span id="cb204-17"><a href="#cb204-17" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;給与: </span><span class="sc">%.0f</span><span class="st">円</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> emp<span class="op">-&gt;</span>salary<span class="op">);</span> <span class="co">/* emp-&gt;salary は (*emp).salary と同じ */</span></span>
<span id="cb204-18"><a href="#cb204-18" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb204-19"><a href="#cb204-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb204-20"><a href="#cb204-20" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb204-21"><a href="#cb204-21" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb204-22"><a href="#cb204-22" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Employee emp1<span class="op">;</span></span>
<span id="cb204-23"><a href="#cb204-23" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Employee <span class="op">*</span>emp_ptr <span class="op">=</span> <span class="op">&amp;</span>emp1<span class="op">;</span></span>
<span id="cb204-24"><a href="#cb204-24" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb204-25"><a href="#cb204-25" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* -&gt;演算子を使用してメンバーに値を設定 */</span></span>
<span id="cb204-26"><a href="#cb204-26" aria-hidden="true" tabindex="-1"></a>    emp_ptr<span class="op">-&gt;</span>id <span class="op">=</span> <span class="dv">1001</span><span class="op">;</span></span>
<span id="cb204-27"><a href="#cb204-27" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>emp_ptr<span class="op">-&gt;</span>name<span class="op">,</span> <span class="st">&quot;佐藤次郎&quot;</span><span class="op">);</span></span>
<span id="cb204-28"><a href="#cb204-28" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>emp_ptr<span class="op">-&gt;</span>department<span class="op">,</span> <span class="st">&quot;開発部&quot;</span><span class="op">);</span></span>
<span id="cb204-29"><a href="#cb204-29" aria-hidden="true" tabindex="-1"></a>    emp_ptr<span class="op">-&gt;</span>salary <span class="op">=</span> <span class="fl">450000.0</span><span class="op">;</span></span>
<span id="cb204-30"><a href="#cb204-30" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb204-31"><a href="#cb204-31" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 3つの方法でアクセス */</span></span>
<span id="cb204-32"><a href="#cb204-32" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== 直接アクセス（.演算子） ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb204-33"><a href="#cb204-33" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ID: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> emp1<span class="op">.</span>id<span class="op">);</span></span>
<span id="cb204-34"><a href="#cb204-34" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb204-35"><a href="#cb204-35" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">=== ポインタ経由（(*ptr).member） ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb204-36"><a href="#cb204-36" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ID: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(*</span>emp_ptr<span class="op">).</span>id<span class="op">);</span></span>
<span id="cb204-37"><a href="#cb204-37" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb204-38"><a href="#cb204-38" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">=== ポインタ経由（-&gt;演算子） ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb204-39"><a href="#cb204-39" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ID: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> emp_ptr<span class="op">-&gt;</span>id<span class="op">);</span></span>
<span id="cb204-40"><a href="#cb204-40" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb204-41"><a href="#cb204-41" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb204-42"><a href="#cb204-42" aria-hidden="true" tabindex="-1"></a>    print_employee_info<span class="op">(</span>emp_ptr<span class="op">);</span></span>
<span id="cb204-43"><a href="#cb204-43" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb204-44"><a href="#cb204-44" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb204-45"><a href="#cb204-45" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h4 data-number="12.3.3.2" id="演算子の実践例"><span
class="header-section-number">12.3.3.2</span> -&gt;演算子の実践例</h4>
<div class="sourceCode" id="cb205"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb205-1"><a href="#cb205-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb205-2"><a href="#cb205-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;string.h&gt;</span></span>
<span id="cb205-3"><a href="#cb205-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb205-4"><a href="#cb205-4" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> Car <span class="op">{</span></span>
<span id="cb205-5"><a href="#cb205-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> brand<span class="op">[</span><span class="dv">20</span><span class="op">];</span></span>
<span id="cb205-6"><a href="#cb205-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> model<span class="op">[</span><span class="dv">30</span><span class="op">];</span></span>
<span id="cb205-7"><a href="#cb205-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> year<span class="op">;</span></span>
<span id="cb205-8"><a href="#cb205-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span> mileage<span class="op">;</span></span>
<span id="cb205-9"><a href="#cb205-9" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> is_electric<span class="op">;</span></span>
<span id="cb205-10"><a href="#cb205-10" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb205-11"><a href="#cb205-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb205-12"><a href="#cb205-12" aria-hidden="true" tabindex="-1"></a><span class="co">/* 車の情報を更新する関数 */</span></span>
<span id="cb205-13"><a href="#cb205-13" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> update_mileage<span class="op">(</span><span class="kw">struct</span> Car <span class="op">*</span>car<span class="op">,</span> <span class="dt">double</span> new_mileage<span class="op">)</span></span>
<span id="cb205-14"><a href="#cb205-14" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb205-15"><a href="#cb205-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>car <span class="op">!=</span> NULL <span class="op">&amp;&amp;</span> new_mileage <span class="op">&gt;=</span> car<span class="op">-&gt;</span>mileage<span class="op">)</span> <span class="op">{</span></span>
<span id="cb205-16"><a href="#cb205-16" aria-hidden="true" tabindex="-1"></a>        car<span class="op">-&gt;</span>mileage <span class="op">=</span> new_mileage<span class="op">;</span></span>
<span id="cb205-17"><a href="#cb205-17" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%s</span><span class="st"> </span><span class="sc">%s</span><span class="st"> の走行距離を </span><span class="sc">%.1f</span><span class="st"> km に更新しました</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> </span>
<span id="cb205-18"><a href="#cb205-18" aria-hidden="true" tabindex="-1"></a>               car<span class="op">-&gt;</span>brand<span class="op">,</span> car<span class="op">-&gt;</span>model<span class="op">,</span> car<span class="op">-&gt;</span>mileage<span class="op">);</span></span>
<span id="cb205-19"><a href="#cb205-19" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb205-20"><a href="#cb205-20" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb205-21"><a href="#cb205-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb205-22"><a href="#cb205-22" aria-hidden="true" tabindex="-1"></a><span class="co">/* 車の詳細情報を表示する関数 */</span></span>
<span id="cb205-23"><a href="#cb205-23" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> display_car_details<span class="op">(</span><span class="kw">struct</span> Car <span class="op">*</span>car<span class="op">)</span></span>
<span id="cb205-24"><a href="#cb205-24" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb205-25"><a href="#cb205-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>car <span class="op">==</span> NULL<span class="op">)</span> <span class="op">{</span></span>
<span id="cb205-26"><a href="#cb205-26" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;無効な車両データです</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb205-27"><a href="#cb205-27" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span><span class="op">;</span></span>
<span id="cb205-28"><a href="#cb205-28" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb205-29"><a href="#cb205-29" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb205-30"><a href="#cb205-30" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== 車両情報 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb205-31"><a href="#cb205-31" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ブランド: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> car<span class="op">-&gt;</span>brand<span class="op">);</span></span>
<span id="cb205-32"><a href="#cb205-32" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;モデル: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> car<span class="op">-&gt;</span>model<span class="op">);</span></span>
<span id="cb205-33"><a href="#cb205-33" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;年式: </span><span class="sc">%d</span><span class="st">年</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> car<span class="op">-&gt;</span>year<span class="op">);</span></span>
<span id="cb205-34"><a href="#cb205-34" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;走行距離: </span><span class="sc">%.1f</span><span class="st"> km</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> car<span class="op">-&gt;</span>mileage<span class="op">);</span></span>
<span id="cb205-35"><a href="#cb205-35" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;電気自動車: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> car<span class="op">-&gt;</span>is_electric <span class="op">?</span> <span class="st">&quot;はい&quot;</span> <span class="op">:</span> <span class="st">&quot;いいえ&quot;</span><span class="op">);</span></span>
<span id="cb205-36"><a href="#cb205-36" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb205-37"><a href="#cb205-37" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb205-38"><a href="#cb205-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb205-39"><a href="#cb205-39" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb205-40"><a href="#cb205-40" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb205-41"><a href="#cb205-41" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Car my_car<span class="op">;</span></span>
<span id="cb205-42"><a href="#cb205-42" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Car <span class="op">*</span>car_ptr <span class="op">=</span> <span class="op">&amp;</span>my_car<span class="op">;</span></span>
<span id="cb205-43"><a href="#cb205-43" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb205-44"><a href="#cb205-44" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* -&gt;演算子で車の初期設定 */</span></span>
<span id="cb205-45"><a href="#cb205-45" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>car_ptr<span class="op">-&gt;</span>brand<span class="op">,</span> <span class="st">&quot;Toyota&quot;</span><span class="op">);</span></span>
<span id="cb205-46"><a href="#cb205-46" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>car_ptr<span class="op">-&gt;</span>model<span class="op">,</span> <span class="st">&quot;Prius&quot;</span><span class="op">);</span></span>
<span id="cb205-47"><a href="#cb205-47" aria-hidden="true" tabindex="-1"></a>    car_ptr<span class="op">-&gt;</span>year <span class="op">=</span> <span class="dv">2022</span><span class="op">;</span></span>
<span id="cb205-48"><a href="#cb205-48" aria-hidden="true" tabindex="-1"></a>    car_ptr<span class="op">-&gt;</span>mileage <span class="op">=</span> <span class="fl">15000.0</span><span class="op">;</span></span>
<span id="cb205-49"><a href="#cb205-49" aria-hidden="true" tabindex="-1"></a>    car_ptr<span class="op">-&gt;</span>is_electric <span class="op">=</span> <span class="dv">0</span><span class="op">;</span>  <span class="co">/* ハイブリッド車 */</span></span>
<span id="cb205-50"><a href="#cb205-50" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb205-51"><a href="#cb205-51" aria-hidden="true" tabindex="-1"></a>    display_car_details<span class="op">(</span>car_ptr<span class="op">);</span></span>
<span id="cb205-52"><a href="#cb205-52" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb205-53"><a href="#cb205-53" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 走行距離を更新 */</span></span>
<span id="cb205-54"><a href="#cb205-54" aria-hidden="true" tabindex="-1"></a>    update_mileage<span class="op">(</span>car_ptr<span class="op">,</span> <span class="fl">18500.0</span><span class="op">);</span></span>
<span id="cb205-55"><a href="#cb205-55" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb205-56"><a href="#cb205-56" aria-hidden="true" tabindex="-1"></a>    display_car_details<span class="op">(</span>car_ptr<span class="op">);</span></span>
<span id="cb205-57"><a href="#cb205-57" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb205-58"><a href="#cb205-58" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb205-59"><a href="#cb205-59" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 data-number="12.3.4" id="構造体配列とポインタ"><span
class="header-section-number">12.3.4</span> 構造体配列とポインタ 📊</h3>
<p>構造体の配列とそのポインタ操作について学習します。</p>
<h4 data-number="12.3.4.1" id="構造体配列の基本操作"><span
class="header-section-number">12.3.4.1</span> 構造体配列の基本操作</h4>
<div class="sourceCode" id="cb206"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb206-1"><a href="#cb206-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb206-2"><a href="#cb206-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;string.h&gt;</span></span>
<span id="cb206-3"><a href="#cb206-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb206-4"><a href="#cb206-4" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> Product <span class="op">{</span></span>
<span id="cb206-5"><a href="#cb206-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> code<span class="op">;</span></span>
<span id="cb206-6"><a href="#cb206-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> name<span class="op">[</span><span class="dv">30</span><span class="op">];</span></span>
<span id="cb206-7"><a href="#cb206-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span> price<span class="op">;</span></span>
<span id="cb206-8"><a href="#cb206-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> stock<span class="op">;</span></span>
<span id="cb206-9"><a href="#cb206-9" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb206-10"><a href="#cb206-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb206-11"><a href="#cb206-11" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> print_product<span class="op">(</span><span class="kw">struct</span> Product <span class="op">*</span>prod<span class="op">)</span></span>
<span id="cb206-12"><a href="#cb206-12" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb206-13"><a href="#cb206-13" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;商品コード: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> prod<span class="op">-&gt;</span>code<span class="op">);</span></span>
<span id="cb206-14"><a href="#cb206-14" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;商品名: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> prod<span class="op">-&gt;</span>name<span class="op">);</span></span>
<span id="cb206-15"><a href="#cb206-15" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;価格: </span><span class="sc">%.0f</span><span class="st">円</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> prod<span class="op">-&gt;</span>price<span class="op">);</span></span>
<span id="cb206-16"><a href="#cb206-16" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;在庫: </span><span class="sc">%d</span><span class="st">個</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> prod<span class="op">-&gt;</span>stock<span class="op">);</span></span>
<span id="cb206-17"><a href="#cb206-17" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;---</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb206-18"><a href="#cb206-18" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb206-19"><a href="#cb206-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb206-20"><a href="#cb206-20" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> print_all_products<span class="op">(</span><span class="kw">struct</span> Product products<span class="op">[],</span> <span class="dt">int</span> count<span class="op">)</span></span>
<span id="cb206-21"><a href="#cb206-21" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb206-22"><a href="#cb206-22" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb206-23"><a href="#cb206-23" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== 全商品リスト ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb206-24"><a href="#cb206-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> count<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb206-25"><a href="#cb206-25" aria-hidden="true" tabindex="-1"></a>        print_product<span class="op">(&amp;</span>products<span class="op">[</span>i<span class="op">]);</span>  <span class="co">/* 配列要素のアドレスを渡す */</span></span>
<span id="cb206-26"><a href="#cb206-26" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb206-27"><a href="#cb206-27" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb206-28"><a href="#cb206-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb206-29"><a href="#cb206-29" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb206-30"><a href="#cb206-30" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb206-31"><a href="#cb206-31" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Product inventory<span class="op">[</span><span class="dv">3</span><span class="op">];</span></span>
<span id="cb206-32"><a href="#cb206-32" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb206-33"><a href="#cb206-33" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb206-34"><a href="#cb206-34" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 商品データの初期化 */</span></span>
<span id="cb206-35"><a href="#cb206-35" aria-hidden="true" tabindex="-1"></a>    inventory<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="op">(</span><span class="kw">struct</span> Product<span class="op">){</span><span class="dv">1001</span><span class="op">,</span> <span class="st">&quot;ノートPC&quot;</span><span class="op">,</span> <span class="dv">89800</span><span class="op">,</span> <span class="dv">5</span><span class="op">};</span></span>
<span id="cb206-36"><a href="#cb206-36" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb206-37"><a href="#cb206-37" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>inventory<span class="op">[</span><span class="dv">1</span><span class="op">].</span>name<span class="op">,</span> <span class="st">&quot;マウス&quot;</span><span class="op">);</span></span>
<span id="cb206-38"><a href="#cb206-38" aria-hidden="true" tabindex="-1"></a>    inventory<span class="op">[</span><span class="dv">1</span><span class="op">].</span>code <span class="op">=</span> <span class="dv">1002</span><span class="op">;</span></span>
<span id="cb206-39"><a href="#cb206-39" aria-hidden="true" tabindex="-1"></a>    inventory<span class="op">[</span><span class="dv">1</span><span class="op">].</span>price <span class="op">=</span> <span class="dv">2980</span><span class="op">;</span></span>
<span id="cb206-40"><a href="#cb206-40" aria-hidden="true" tabindex="-1"></a>    inventory<span class="op">[</span><span class="dv">1</span><span class="op">].</span>stock <span class="op">=</span> <span class="dv">20</span><span class="op">;</span></span>
<span id="cb206-41"><a href="#cb206-41" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb206-42"><a href="#cb206-42" aria-hidden="true" tabindex="-1"></a>    inventory<span class="op">[</span><span class="dv">2</span><span class="op">].</span>code <span class="op">=</span> <span class="dv">1003</span><span class="op">;</span></span>
<span id="cb206-43"><a href="#cb206-43" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>inventory<span class="op">[</span><span class="dv">2</span><span class="op">].</span>name<span class="op">,</span> <span class="st">&quot;キーボード&quot;</span><span class="op">);</span></span>
<span id="cb206-44"><a href="#cb206-44" aria-hidden="true" tabindex="-1"></a>    inventory<span class="op">[</span><span class="dv">2</span><span class="op">].</span>price <span class="op">=</span> <span class="dv">8500</span><span class="op">;</span></span>
<span id="cb206-45"><a href="#cb206-45" aria-hidden="true" tabindex="-1"></a>    inventory<span class="op">[</span><span class="dv">2</span><span class="op">].</span>stock <span class="op">=</span> <span class="dv">8</span><span class="op">;</span></span>
<span id="cb206-46"><a href="#cb206-46" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb206-47"><a href="#cb206-47" aria-hidden="true" tabindex="-1"></a>    print_all_products<span class="op">(</span>inventory<span class="op">,</span> <span class="dv">3</span><span class="op">);</span></span>
<span id="cb206-48"><a href="#cb206-48" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb206-49"><a href="#cb206-49" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* ポインタを使った配列操作 */</span></span>
<span id="cb206-50"><a href="#cb206-50" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== ポインタを使った操作 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb206-51"><a href="#cb206-51" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Product <span class="op">*</span>ptr <span class="op">=</span> inventory<span class="op">;</span>  <span class="co">/* 配列の先頭要素を指す */</span></span>
<span id="cb206-52"><a href="#cb206-52" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb206-53"><a href="#cb206-53" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">3</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb206-54"><a href="#cb206-54" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st">番目: </span><span class="sc">%s</span><span class="st"> (</span><span class="sc">%.0f</span><span class="st">円)</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> </span>
<span id="cb206-55"><a href="#cb206-55" aria-hidden="true" tabindex="-1"></a>               i <span class="op">+</span> <span class="dv">1</span><span class="op">,</span> <span class="op">(</span>ptr <span class="op">+</span> i<span class="op">)-&gt;</span>name<span class="op">,</span> <span class="op">(</span>ptr <span class="op">+</span> i<span class="op">)-&gt;</span>price<span class="op">);</span></span>
<span id="cb206-56"><a href="#cb206-56" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb206-57"><a href="#cb206-57" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb206-58"><a href="#cb206-58" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb206-59"><a href="#cb206-59" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h4 data-number="12.3.4.2" id="ポインタ演算による構造体配列操作"><span
class="header-section-number">12.3.4.2</span>
ポインタ演算による構造体配列操作</h4>
<div class="sourceCode" id="cb207"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb207-1"><a href="#cb207-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb207-2"><a href="#cb207-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;string.h&gt;</span></span>
<span id="cb207-3"><a href="#cb207-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb207-4"><a href="#cb207-4" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> Score <span class="op">{</span></span>
<span id="cb207-5"><a href="#cb207-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> subject<span class="op">[</span><span class="dv">20</span><span class="op">];</span></span>
<span id="cb207-6"><a href="#cb207-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> points<span class="op">;</span></span>
<span id="cb207-7"><a href="#cb207-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> grade<span class="op">;</span></span>
<span id="cb207-8"><a href="#cb207-8" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb207-9"><a href="#cb207-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb207-10"><a href="#cb207-10" aria-hidden="true" tabindex="-1"></a><span class="co">/* 成績を計算してグレードを設定 */</span></span>
<span id="cb207-11"><a href="#cb207-11" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> calculate_grade<span class="op">(</span><span class="kw">struct</span> Score <span class="op">*</span>score<span class="op">)</span></span>
<span id="cb207-12"><a href="#cb207-12" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb207-13"><a href="#cb207-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>score<span class="op">-&gt;</span>points <span class="op">&gt;=</span> <span class="dv">90</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb207-14"><a href="#cb207-14" aria-hidden="true" tabindex="-1"></a>        score<span class="op">-&gt;</span>grade <span class="op">=</span> <span class="ch">&#39;A&#39;</span><span class="op">;</span></span>
<span id="cb207-15"><a href="#cb207-15" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span> <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>score<span class="op">-&gt;</span>points <span class="op">&gt;=</span> <span class="dv">80</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb207-16"><a href="#cb207-16" aria-hidden="true" tabindex="-1"></a>        score<span class="op">-&gt;</span>grade <span class="op">=</span> <span class="ch">&#39;B&#39;</span><span class="op">;</span></span>
<span id="cb207-17"><a href="#cb207-17" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span> <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>score<span class="op">-&gt;</span>points <span class="op">&gt;=</span> <span class="dv">70</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb207-18"><a href="#cb207-18" aria-hidden="true" tabindex="-1"></a>        score<span class="op">-&gt;</span>grade <span class="op">=</span> <span class="ch">&#39;C&#39;</span><span class="op">;</span></span>
<span id="cb207-19"><a href="#cb207-19" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span> <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>score<span class="op">-&gt;</span>points <span class="op">&gt;=</span> <span class="dv">60</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb207-20"><a href="#cb207-20" aria-hidden="true" tabindex="-1"></a>        score<span class="op">-&gt;</span>grade <span class="op">=</span> <span class="ch">&#39;D&#39;</span><span class="op">;</span></span>
<span id="cb207-21"><a href="#cb207-21" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb207-22"><a href="#cb207-22" aria-hidden="true" tabindex="-1"></a>        score<span class="op">-&gt;</span>grade <span class="op">=</span> <span class="ch">&#39;F&#39;</span><span class="op">;</span></span>
<span id="cb207-23"><a href="#cb207-23" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb207-24"><a href="#cb207-24" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb207-25"><a href="#cb207-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb207-26"><a href="#cb207-26" aria-hidden="true" tabindex="-1"></a><span class="co">/* 配列内の最高得点を見つける */</span></span>
<span id="cb207-27"><a href="#cb207-27" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> Score<span class="op">*</span> find_best_score<span class="op">(</span><span class="kw">struct</span> Score scores<span class="op">[],</span> <span class="dt">int</span> count<span class="op">)</span></span>
<span id="cb207-28"><a href="#cb207-28" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb207-29"><a href="#cb207-29" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Score <span class="op">*</span>best <span class="op">=</span> <span class="op">&amp;</span>scores<span class="op">[</span><span class="dv">0</span><span class="op">];</span></span>
<span id="cb207-30"><a href="#cb207-30" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb207-31"><a href="#cb207-31" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb207-32"><a href="#cb207-32" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">1</span><span class="op">;</span> i <span class="op">&lt;</span> count<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb207-33"><a href="#cb207-33" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>scores<span class="op">[</span>i<span class="op">].</span>points <span class="op">&gt;</span> best<span class="op">-&gt;</span>points<span class="op">)</span> <span class="op">{</span></span>
<span id="cb207-34"><a href="#cb207-34" aria-hidden="true" tabindex="-1"></a>            best <span class="op">=</span> <span class="op">&amp;</span>scores<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb207-35"><a href="#cb207-35" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb207-36"><a href="#cb207-36" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb207-37"><a href="#cb207-37" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb207-38"><a href="#cb207-38" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> best<span class="op">;</span></span>
<span id="cb207-39"><a href="#cb207-39" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb207-40"><a href="#cb207-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb207-41"><a href="#cb207-41" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb207-42"><a href="#cb207-42" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb207-43"><a href="#cb207-43" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Score my_scores<span class="op">[</span><span class="dv">4</span><span class="op">];</span></span>
<span id="cb207-44"><a href="#cb207-44" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Score <span class="op">*</span>ptr<span class="op">;</span></span>
<span id="cb207-45"><a href="#cb207-45" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Score <span class="op">*</span>best<span class="op">;</span></span>
<span id="cb207-46"><a href="#cb207-46" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb207-47"><a href="#cb207-47" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb207-48"><a href="#cb207-48" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 成績データの入力 */</span></span>
<span id="cb207-49"><a href="#cb207-49" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>my_scores<span class="op">[</span><span class="dv">0</span><span class="op">].</span>subject<span class="op">,</span> <span class="st">&quot;数学&quot;</span><span class="op">);</span></span>
<span id="cb207-50"><a href="#cb207-50" aria-hidden="true" tabindex="-1"></a>    my_scores<span class="op">[</span><span class="dv">0</span><span class="op">].</span>points <span class="op">=</span> <span class="dv">85</span><span class="op">;</span></span>
<span id="cb207-51"><a href="#cb207-51" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb207-52"><a href="#cb207-52" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>my_scores<span class="op">[</span><span class="dv">1</span><span class="op">].</span>subject<span class="op">,</span> <span class="st">&quot;英語&quot;</span><span class="op">);</span></span>
<span id="cb207-53"><a href="#cb207-53" aria-hidden="true" tabindex="-1"></a>    my_scores<span class="op">[</span><span class="dv">1</span><span class="op">].</span>points <span class="op">=</span> <span class="dv">92</span><span class="op">;</span></span>
<span id="cb207-54"><a href="#cb207-54" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb207-55"><a href="#cb207-55" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>my_scores<span class="op">[</span><span class="dv">2</span><span class="op">].</span>subject<span class="op">,</span> <span class="st">&quot;理科&quot;</span><span class="op">);</span></span>
<span id="cb207-56"><a href="#cb207-56" aria-hidden="true" tabindex="-1"></a>    my_scores<span class="op">[</span><span class="dv">2</span><span class="op">].</span>points <span class="op">=</span> <span class="dv">78</span><span class="op">;</span></span>
<span id="cb207-57"><a href="#cb207-57" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb207-58"><a href="#cb207-58" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>my_scores<span class="op">[</span><span class="dv">3</span><span class="op">].</span>subject<span class="op">,</span> <span class="st">&quot;社会&quot;</span><span class="op">);</span></span>
<span id="cb207-59"><a href="#cb207-59" aria-hidden="true" tabindex="-1"></a>    my_scores<span class="op">[</span><span class="dv">3</span><span class="op">].</span>points <span class="op">=</span> <span class="dv">88</span><span class="op">;</span></span>
<span id="cb207-60"><a href="#cb207-60" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb207-61"><a href="#cb207-61" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 各科目のグレードを計算 */</span></span>
<span id="cb207-62"><a href="#cb207-62" aria-hidden="true" tabindex="-1"></a>    ptr <span class="op">=</span> my_scores<span class="op">;</span>  <span class="co">/* 配列の先頭を指すポインタ */</span></span>
<span id="cb207-63"><a href="#cb207-63" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">4</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb207-64"><a href="#cb207-64" aria-hidden="true" tabindex="-1"></a>        calculate_grade<span class="op">(</span>ptr <span class="op">+</span> i<span class="op">);</span>  <span class="co">/* ポインタ演算でi番目の要素 */</span></span>
<span id="cb207-65"><a href="#cb207-65" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb207-66"><a href="#cb207-66" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb207-67"><a href="#cb207-67" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 結果表示 */</span></span>
<span id="cb207-68"><a href="#cb207-68" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== 成績表 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb207-69"><a href="#cb207-69" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">4</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb207-70"><a href="#cb207-70" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%s</span><span class="st">: </span><span class="sc">%d</span><span class="st">点 (評価: </span><span class="sc">%c</span><span class="st">)</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> </span>
<span id="cb207-71"><a href="#cb207-71" aria-hidden="true" tabindex="-1"></a>               my_scores<span class="op">[</span>i<span class="op">].</span>subject<span class="op">,</span> </span>
<span id="cb207-72"><a href="#cb207-72" aria-hidden="true" tabindex="-1"></a>               my_scores<span class="op">[</span>i<span class="op">].</span>points<span class="op">,</span> </span>
<span id="cb207-73"><a href="#cb207-73" aria-hidden="true" tabindex="-1"></a>               my_scores<span class="op">[</span>i<span class="op">].</span>grade<span class="op">);</span></span>
<span id="cb207-74"><a href="#cb207-74" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb207-75"><a href="#cb207-75" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb207-76"><a href="#cb207-76" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 最高得点の科目を見つける */</span></span>
<span id="cb207-77"><a href="#cb207-77" aria-hidden="true" tabindex="-1"></a>    best <span class="op">=</span> find_best_score<span class="op">(</span>my_scores<span class="op">,</span> <span class="dv">4</span><span class="op">);</span></span>
<span id="cb207-78"><a href="#cb207-78" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">最高得点: </span><span class="sc">%s</span><span class="st"> (</span><span class="sc">%d</span><span class="st">点)</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> best<span class="op">-&gt;</span>subject<span class="op">,</span> best<span class="op">-&gt;</span>points<span class="op">);</span></span>
<span id="cb207-79"><a href="#cb207-79" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb207-80"><a href="#cb207-80" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb207-81"><a href="#cb207-81" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 data-number="12.3.5" id="構造体ポインタ配列"><span
class="header-section-number">12.3.5</span> 構造体ポインタ配列 🗂️</h3>
<p>ポインタの配列で複数の構造体を効率的に管理します。</p>
<h4 data-number="12.3.5.1" id="構造体ポインタ配列の基本"><span
class="header-section-number">12.3.5.1</span>
構造体ポインタ配列の基本</h4>
<div class="sourceCode" id="cb208"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb208-1"><a href="#cb208-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb208-2"><a href="#cb208-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;string.h&gt;</span></span>
<span id="cb208-3"><a href="#cb208-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb208-4"><a href="#cb208-4" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> Person <span class="op">{</span></span>
<span id="cb208-5"><a href="#cb208-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> name<span class="op">[</span><span class="dv">30</span><span class="op">];</span></span>
<span id="cb208-6"><a href="#cb208-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> age<span class="op">;</span></span>
<span id="cb208-7"><a href="#cb208-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> city<span class="op">[</span><span class="dv">20</span><span class="op">];</span></span>
<span id="cb208-8"><a href="#cb208-8" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb208-9"><a href="#cb208-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb208-10"><a href="#cb208-10" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> print_person_info<span class="op">(</span><span class="kw">struct</span> Person <span class="op">*</span>person<span class="op">)</span></span>
<span id="cb208-11"><a href="#cb208-11" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb208-12"><a href="#cb208-12" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;名前: </span><span class="sc">%s</span><span class="st">, 年齢: </span><span class="sc">%d</span><span class="st">歳, 居住地: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> </span>
<span id="cb208-13"><a href="#cb208-13" aria-hidden="true" tabindex="-1"></a>           person<span class="op">-&gt;</span>name<span class="op">,</span> person<span class="op">-&gt;</span>age<span class="op">,</span> person<span class="op">-&gt;</span>city<span class="op">);</span></span>
<span id="cb208-14"><a href="#cb208-14" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb208-15"><a href="#cb208-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb208-16"><a href="#cb208-16" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb208-17"><a href="#cb208-17" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb208-18"><a href="#cb208-18" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 個別の構造体変数 */</span></span>
<span id="cb208-19"><a href="#cb208-19" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Person person1 <span class="op">=</span> <span class="op">{</span><span class="st">&quot;山田太郎&quot;</span><span class="op">,</span> <span class="dv">25</span><span class="op">,</span> <span class="st">&quot;東京&quot;</span><span class="op">};</span></span>
<span id="cb208-20"><a href="#cb208-20" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Person person2 <span class="op">=</span> <span class="op">{</span><span class="st">&quot;佐藤花子&quot;</span><span class="op">,</span> <span class="dv">30</span><span class="op">,</span> <span class="st">&quot;大阪&quot;</span><span class="op">};</span></span>
<span id="cb208-21"><a href="#cb208-21" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Person person3 <span class="op">=</span> <span class="op">{</span><span class="st">&quot;田中次郎&quot;</span><span class="op">,</span> <span class="dv">28</span><span class="op">,</span> <span class="st">&quot;名古屋&quot;</span><span class="op">};</span></span>
<span id="cb208-22"><a href="#cb208-22" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Person person4 <span class="op">=</span> <span class="op">{</span><span class="st">&quot;鈴木美咲&quot;</span><span class="op">,</span> <span class="dv">22</span><span class="op">,</span> <span class="st">&quot;福岡&quot;</span><span class="op">};</span></span>
<span id="cb208-23"><a href="#cb208-23" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb208-24"><a href="#cb208-24" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 構造体ポインタの配列 */</span></span>
<span id="cb208-25"><a href="#cb208-25" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Person <span class="op">*</span>people<span class="op">[</span><span class="dv">4</span><span class="op">];</span></span>
<span id="cb208-26"><a href="#cb208-26" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb208-27"><a href="#cb208-27" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb208-28"><a href="#cb208-28" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* ポインタ配列に各構造体のアドレスを設定 */</span></span>
<span id="cb208-29"><a href="#cb208-29" aria-hidden="true" tabindex="-1"></a>    people<span class="op">[</span><span class="dv">0</span><span class="op">]</span> <span class="op">=</span> <span class="op">&amp;</span>person1<span class="op">;</span></span>
<span id="cb208-30"><a href="#cb208-30" aria-hidden="true" tabindex="-1"></a>    people<span class="op">[</span><span class="dv">1</span><span class="op">]</span> <span class="op">=</span> <span class="op">&amp;</span>person2<span class="op">;</span></span>
<span id="cb208-31"><a href="#cb208-31" aria-hidden="true" tabindex="-1"></a>    people<span class="op">[</span><span class="dv">2</span><span class="op">]</span> <span class="op">=</span> <span class="op">&amp;</span>person3<span class="op">;</span></span>
<span id="cb208-32"><a href="#cb208-32" aria-hidden="true" tabindex="-1"></a>    people<span class="op">[</span><span class="dv">3</span><span class="op">]</span> <span class="op">=</span> <span class="op">&amp;</span>person4<span class="op">;</span></span>
<span id="cb208-33"><a href="#cb208-33" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb208-34"><a href="#cb208-34" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== 全員の情報 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb208-35"><a href="#cb208-35" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">4</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb208-36"><a href="#cb208-36" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st">. &quot;</span><span class="op">,</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb208-37"><a href="#cb208-37" aria-hidden="true" tabindex="-1"></a>        print_person_info<span class="op">(</span>people<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb208-38"><a href="#cb208-38" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb208-39"><a href="#cb208-39" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb208-40"><a href="#cb208-40" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 特定の条件で検索 */</span></span>
<span id="cb208-41"><a href="#cb208-41" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">=== 30歳未満の人 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb208-42"><a href="#cb208-42" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">4</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb208-43"><a href="#cb208-43" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>people<span class="op">[</span>i<span class="op">]-&gt;</span>age <span class="op">&lt;</span> <span class="dv">30</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb208-44"><a href="#cb208-44" aria-hidden="true" tabindex="-1"></a>            print_person_info<span class="op">(</span>people<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb208-45"><a href="#cb208-45" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb208-46"><a href="#cb208-46" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb208-47"><a href="#cb208-47" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb208-48"><a href="#cb208-48" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb208-49"><a href="#cb208-49" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h4 data-number="12.3.5.2" id="動的な構造体ポインタ配列"><span
class="header-section-number">12.3.5.2</span>
動的な構造体ポインタ配列</h4>
<div class="sourceCode" id="cb209"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb209-1"><a href="#cb209-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb209-2"><a href="#cb209-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;string.h&gt;</span></span>
<span id="cb209-3"><a href="#cb209-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb209-4"><a href="#cb209-4" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> Student <span class="op">{</span></span>
<span id="cb209-5"><a href="#cb209-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> id<span class="op">;</span></span>
<span id="cb209-6"><a href="#cb209-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> name<span class="op">[</span><span class="dv">30</span><span class="op">];</span></span>
<span id="cb209-7"><a href="#cb209-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span> gpa<span class="op">;</span></span>
<span id="cb209-8"><a href="#cb209-8" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb209-9"><a href="#cb209-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb209-10"><a href="#cb209-10" aria-hidden="true" tabindex="-1"></a><span class="co">/* 学生データを作成する関数 */</span></span>
<span id="cb209-11"><a href="#cb209-11" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> Student create_student<span class="op">(</span><span class="dt">int</span> id<span class="op">,</span> <span class="dt">const</span> <span class="dt">char</span><span class="op">*</span> name<span class="op">,</span> <span class="dt">double</span> gpa<span class="op">)</span></span>
<span id="cb209-12"><a href="#cb209-12" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb209-13"><a href="#cb209-13" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Student student<span class="op">;</span></span>
<span id="cb209-14"><a href="#cb209-14" aria-hidden="true" tabindex="-1"></a>    student<span class="op">.</span>id <span class="op">=</span> id<span class="op">;</span></span>
<span id="cb209-15"><a href="#cb209-15" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>student<span class="op">.</span>name<span class="op">,</span> name<span class="op">);</span></span>
<span id="cb209-16"><a href="#cb209-16" aria-hidden="true" tabindex="-1"></a>    student<span class="op">.</span>gpa <span class="op">=</span> gpa<span class="op">;</span></span>
<span id="cb209-17"><a href="#cb209-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> student<span class="op">;</span></span>
<span id="cb209-18"><a href="#cb209-18" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb209-19"><a href="#cb209-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb209-20"><a href="#cb209-20" aria-hidden="true" tabindex="-1"></a><span class="co">/* GPA順でソート（バブルソート） */</span></span>
<span id="cb209-21"><a href="#cb209-21" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> sort_students_by_gpa<span class="op">(</span><span class="kw">struct</span> Student <span class="op">*</span>students<span class="op">[],</span> <span class="dt">int</span> count<span class="op">)</span></span>
<span id="cb209-22"><a href="#cb209-22" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb209-23"><a href="#cb209-23" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">,</span> j<span class="op">;</span></span>
<span id="cb209-24"><a href="#cb209-24" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Student <span class="op">*</span>temp<span class="op">;</span></span>
<span id="cb209-25"><a href="#cb209-25" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb209-26"><a href="#cb209-26" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> count <span class="op">-</span> <span class="dv">1</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb209-27"><a href="#cb209-27" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span>j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> j <span class="op">&lt;</span> count <span class="op">-</span> <span class="dv">1</span> <span class="op">-</span> i<span class="op">;</span> j<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb209-28"><a href="#cb209-28" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>students<span class="op">[</span>j<span class="op">]-&gt;</span>gpa <span class="op">&lt;</span> students<span class="op">[</span>j <span class="op">+</span> <span class="dv">1</span><span class="op">]-&gt;</span>gpa<span class="op">)</span> <span class="op">{</span></span>
<span id="cb209-29"><a href="#cb209-29" aria-hidden="true" tabindex="-1"></a>                temp <span class="op">=</span> students<span class="op">[</span>j<span class="op">];</span></span>
<span id="cb209-30"><a href="#cb209-30" aria-hidden="true" tabindex="-1"></a>                students<span class="op">[</span>j<span class="op">]</span> <span class="op">=</span> students<span class="op">[</span>j <span class="op">+</span> <span class="dv">1</span><span class="op">];</span></span>
<span id="cb209-31"><a href="#cb209-31" aria-hidden="true" tabindex="-1"></a>                students<span class="op">[</span>j <span class="op">+</span> <span class="dv">1</span><span class="op">]</span> <span class="op">=</span> temp<span class="op">;</span></span>
<span id="cb209-32"><a href="#cb209-32" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb209-33"><a href="#cb209-33" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb209-34"><a href="#cb209-34" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb209-35"><a href="#cb209-35" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb209-36"><a href="#cb209-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb209-37"><a href="#cb209-37" aria-hidden="true" tabindex="-1"></a><span class="co">/* 学生一覧を表示 */</span></span>
<span id="cb209-38"><a href="#cb209-38" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> display_students<span class="op">(</span><span class="kw">struct</span> Student <span class="op">*</span>students<span class="op">[],</span> <span class="dt">int</span> count<span class="op">)</span></span>
<span id="cb209-39"><a href="#cb209-39" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb209-40"><a href="#cb209-40" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb209-41"><a href="#cb209-41" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ID</span><span class="sc">\t</span><span class="st">名前</span><span class="sc">\t\t</span><span class="st">GPA</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb209-42"><a href="#cb209-42" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;------------------------</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb209-43"><a href="#cb209-43" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> count<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb209-44"><a href="#cb209-44" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d\t%s\t\t%.2f\n</span><span class="st">&quot;</span><span class="op">,</span> </span>
<span id="cb209-45"><a href="#cb209-45" aria-hidden="true" tabindex="-1"></a>               students<span class="op">[</span>i<span class="op">]-&gt;</span>id<span class="op">,</span> </span>
<span id="cb209-46"><a href="#cb209-46" aria-hidden="true" tabindex="-1"></a>               students<span class="op">[</span>i<span class="op">]-&gt;</span>name<span class="op">,</span> </span>
<span id="cb209-47"><a href="#cb209-47" aria-hidden="true" tabindex="-1"></a>               students<span class="op">[</span>i<span class="op">]-&gt;</span>gpa<span class="op">);</span></span>
<span id="cb209-48"><a href="#cb209-48" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb209-49"><a href="#cb209-49" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb209-50"><a href="#cb209-50" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb209-51"><a href="#cb209-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb209-52"><a href="#cb209-52" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb209-53"><a href="#cb209-53" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb209-54"><a href="#cb209-54" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 学生データの作成 */</span></span>
<span id="cb209-55"><a href="#cb209-55" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Student student1 <span class="op">=</span> create_student<span class="op">(</span><span class="dv">1001</span><span class="op">,</span> <span class="st">&quot;田中太郎&quot;</span><span class="op">,</span> <span class="fl">3.7</span><span class="op">);</span></span>
<span id="cb209-56"><a href="#cb209-56" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Student student2 <span class="op">=</span> create_student<span class="op">(</span><span class="dv">1002</span><span class="op">,</span> <span class="st">&quot;佐藤花子&quot;</span><span class="op">,</span> <span class="fl">3.9</span><span class="op">);</span></span>
<span id="cb209-57"><a href="#cb209-57" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Student student3 <span class="op">=</span> create_student<span class="op">(</span><span class="dv">1003</span><span class="op">,</span> <span class="st">&quot;山田次郎&quot;</span><span class="op">,</span> <span class="fl">3.2</span><span class="op">);</span></span>
<span id="cb209-58"><a href="#cb209-58" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Student student4 <span class="op">=</span> create_student<span class="op">(</span><span class="dv">1004</span><span class="op">,</span> <span class="st">&quot;鈴木美咲&quot;</span><span class="op">,</span> <span class="fl">3.8</span><span class="op">);</span></span>
<span id="cb209-59"><a href="#cb209-59" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Student student5 <span class="op">=</span> create_student<span class="op">(</span><span class="dv">1005</span><span class="op">,</span> <span class="st">&quot;高橋健太&quot;</span><span class="op">,</span> <span class="fl">3.5</span><span class="op">);</span></span>
<span id="cb209-60"><a href="#cb209-60" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb209-61"><a href="#cb209-61" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 構造体ポインタ配列 */</span></span>
<span id="cb209-62"><a href="#cb209-62" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Student <span class="op">*</span>class_roster<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb209-63"><a href="#cb209-63" aria-hidden="true" tabindex="-1"></a>        <span class="op">&amp;</span>student1<span class="op">,</span> <span class="op">&amp;</span>student2<span class="op">,</span> <span class="op">&amp;</span>student3<span class="op">,</span> <span class="op">&amp;</span>student4<span class="op">,</span> <span class="op">&amp;</span>student5</span>
<span id="cb209-64"><a href="#cb209-64" aria-hidden="true" tabindex="-1"></a>    <span class="op">};</span></span>
<span id="cb209-65"><a href="#cb209-65" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb209-66"><a href="#cb209-66" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> class_size <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>class_roster<span class="op">)</span> <span class="op">/</span> <span class="kw">sizeof</span><span class="op">(</span>class_roster<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb209-67"><a href="#cb209-67" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb209-68"><a href="#cb209-68" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== 入学順（元の順序） ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb209-69"><a href="#cb209-69" aria-hidden="true" tabindex="-1"></a>    display_students<span class="op">(</span>class_roster<span class="op">,</span> class_size<span class="op">);</span></span>
<span id="cb209-70"><a href="#cb209-70" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb209-71"><a href="#cb209-71" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* GPA順でソート */</span></span>
<span id="cb209-72"><a href="#cb209-72" aria-hidden="true" tabindex="-1"></a>    sort_students_by_gpa<span class="op">(</span>class_roster<span class="op">,</span> class_size<span class="op">);</span></span>
<span id="cb209-73"><a href="#cb209-73" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb209-74"><a href="#cb209-74" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== GPA順（高い順） ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb209-75"><a href="#cb209-75" aria-hidden="true" tabindex="-1"></a>    display_students<span class="op">(</span>class_roster<span class="op">,</span> class_size<span class="op">);</span></span>
<span id="cb209-76"><a href="#cb209-76" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb209-77"><a href="#cb209-77" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 優秀な学生を見つける */</span></span>
<span id="cb209-78"><a href="#cb209-78" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== GPA 3.6以上の学生 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb209-79"><a href="#cb209-79" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb209-80"><a href="#cb209-80" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> class_size<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb209-81"><a href="#cb209-81" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>class_roster<span class="op">[</span>i<span class="op">]-&gt;</span>gpa <span class="op">&gt;=</span> <span class="fl">3.6</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb209-82"><a href="#cb209-82" aria-hidden="true" tabindex="-1"></a>            printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%s</span><span class="st"> (GPA: </span><span class="sc">%.2f</span><span class="st">)</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> </span>
<span id="cb209-83"><a href="#cb209-83" aria-hidden="true" tabindex="-1"></a>                   class_roster<span class="op">[</span>i<span class="op">]-&gt;</span>name<span class="op">,</span> </span>
<span id="cb209-84"><a href="#cb209-84" aria-hidden="true" tabindex="-1"></a>                   class_roster<span class="op">[</span>i<span class="op">]-&gt;</span>gpa<span class="op">);</span></span>
<span id="cb209-85"><a href="#cb209-85" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb209-86"><a href="#cb209-86" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb209-87"><a href="#cb209-87" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb209-88"><a href="#cb209-88" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb209-89"><a href="#cb209-89" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 data-number="12.3.6" id="ネストした構造体とポインタ"><span
class="header-section-number">12.3.6</span> ネストした構造体とポインタ
🏗️</h3>
<p>構造体の中に他の構造体を含む場合のポインタ操作について学習します。</p>
<h4 data-number="12.3.6.1" id="ネストした構造体の基本"><span
class="header-section-number">12.3.6.1</span>
ネストした構造体の基本</h4>
<div class="sourceCode" id="cb210"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb210-1"><a href="#cb210-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb210-2"><a href="#cb210-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;string.h&gt;</span></span>
<span id="cb210-3"><a href="#cb210-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb210-4"><a href="#cb210-4" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> Address <span class="op">{</span></span>
<span id="cb210-5"><a href="#cb210-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> street<span class="op">[</span><span class="dv">50</span><span class="op">];</span></span>
<span id="cb210-6"><a href="#cb210-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> city<span class="op">[</span><span class="dv">30</span><span class="op">];</span></span>
<span id="cb210-7"><a href="#cb210-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> postal_code<span class="op">[</span><span class="dv">10</span><span class="op">];</span></span>
<span id="cb210-8"><a href="#cb210-8" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb210-9"><a href="#cb210-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb210-10"><a href="#cb210-10" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> Contact <span class="op">{</span></span>
<span id="cb210-11"><a href="#cb210-11" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> phone<span class="op">[</span><span class="dv">15</span><span class="op">];</span></span>
<span id="cb210-12"><a href="#cb210-12" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> email<span class="op">[</span><span class="dv">50</span><span class="op">];</span></span>
<span id="cb210-13"><a href="#cb210-13" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb210-14"><a href="#cb210-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb210-15"><a href="#cb210-15" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> Employee <span class="op">{</span></span>
<span id="cb210-16"><a href="#cb210-16" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> id<span class="op">;</span></span>
<span id="cb210-17"><a href="#cb210-17" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> name<span class="op">[</span><span class="dv">30</span><span class="op">];</span></span>
<span id="cb210-18"><a href="#cb210-18" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Address address<span class="op">;</span>    <span class="co">/* ネストした構造体 */</span></span>
<span id="cb210-19"><a href="#cb210-19" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Contact contact<span class="op">;</span>    <span class="co">/* ネストした構造体 */</span></span>
<span id="cb210-20"><a href="#cb210-20" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span> salary<span class="op">;</span></span>
<span id="cb210-21"><a href="#cb210-21" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb210-22"><a href="#cb210-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb210-23"><a href="#cb210-23" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> print_employee_details<span class="op">(</span><span class="kw">struct</span> Employee <span class="op">*</span>emp<span class="op">)</span></span>
<span id="cb210-24"><a href="#cb210-24" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb210-25"><a href="#cb210-25" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== 社員詳細情報 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb210-26"><a href="#cb210-26" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ID: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> emp<span class="op">-&gt;</span>id<span class="op">);</span></span>
<span id="cb210-27"><a href="#cb210-27" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;名前: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> emp<span class="op">-&gt;</span>name<span class="op">);</span></span>
<span id="cb210-28"><a href="#cb210-28" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;住所: </span><span class="sc">%s</span><span class="st">, </span><span class="sc">%s</span><span class="st"> </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> </span>
<span id="cb210-29"><a href="#cb210-29" aria-hidden="true" tabindex="-1"></a>           emp<span class="op">-&gt;</span>address<span class="op">.</span>street<span class="op">,</span> </span>
<span id="cb210-30"><a href="#cb210-30" aria-hidden="true" tabindex="-1"></a>           emp<span class="op">-&gt;</span>address<span class="op">.</span>city<span class="op">,</span> </span>
<span id="cb210-31"><a href="#cb210-31" aria-hidden="true" tabindex="-1"></a>           emp<span class="op">-&gt;</span>address<span class="op">.</span>postal_code<span class="op">);</span></span>
<span id="cb210-32"><a href="#cb210-32" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;電話: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> emp<span class="op">-&gt;</span>contact<span class="op">.</span>phone<span class="op">);</span></span>
<span id="cb210-33"><a href="#cb210-33" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;メール: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> emp<span class="op">-&gt;</span>contact<span class="op">.</span>email<span class="op">);</span></span>
<span id="cb210-34"><a href="#cb210-34" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;給与: </span><span class="sc">%.0f</span><span class="st">円</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> emp<span class="op">-&gt;</span>salary<span class="op">);</span></span>
<span id="cb210-35"><a href="#cb210-35" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb210-36"><a href="#cb210-36" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb210-37"><a href="#cb210-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb210-38"><a href="#cb210-38" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> update_address<span class="op">(</span><span class="kw">struct</span> Employee <span class="op">*</span>emp<span class="op">,</span> <span class="dt">const</span> <span class="dt">char</span><span class="op">*</span> street<span class="op">,</span> </span>
<span id="cb210-39"><a href="#cb210-39" aria-hidden="true" tabindex="-1"></a>                   <span class="dt">const</span> <span class="dt">char</span><span class="op">*</span> city<span class="op">,</span> <span class="dt">const</span> <span class="dt">char</span><span class="op">*</span> postal_code<span class="op">)</span></span>
<span id="cb210-40"><a href="#cb210-40" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb210-41"><a href="#cb210-41" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>emp<span class="op">-&gt;</span>address<span class="op">.</span>street<span class="op">,</span> street<span class="op">);</span></span>
<span id="cb210-42"><a href="#cb210-42" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>emp<span class="op">-&gt;</span>address<span class="op">.</span>city<span class="op">,</span> city<span class="op">);</span></span>
<span id="cb210-43"><a href="#cb210-43" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>emp<span class="op">-&gt;</span>address<span class="op">.</span>postal_code<span class="op">,</span> postal_code<span class="op">);</span></span>
<span id="cb210-44"><a href="#cb210-44" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%s</span><span class="st"> の住所を更新しました</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> emp<span class="op">-&gt;</span>name<span class="op">);</span></span>
<span id="cb210-45"><a href="#cb210-45" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb210-46"><a href="#cb210-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb210-47"><a href="#cb210-47" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb210-48"><a href="#cb210-48" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb210-49"><a href="#cb210-49" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Employee emp1<span class="op">;</span></span>
<span id="cb210-50"><a href="#cb210-50" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Employee <span class="op">*</span>emp_ptr <span class="op">=</span> <span class="op">&amp;</span>emp1<span class="op">;</span></span>
<span id="cb210-51"><a href="#cb210-51" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb210-52"><a href="#cb210-52" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 基本情報の設定 */</span></span>
<span id="cb210-53"><a href="#cb210-53" aria-hidden="true" tabindex="-1"></a>    emp_ptr<span class="op">-&gt;</span>id <span class="op">=</span> <span class="dv">2001</span><span class="op">;</span></span>
<span id="cb210-54"><a href="#cb210-54" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>emp_ptr<span class="op">-&gt;</span>name<span class="op">,</span> <span class="st">&quot;田中太郎&quot;</span><span class="op">);</span></span>
<span id="cb210-55"><a href="#cb210-55" aria-hidden="true" tabindex="-1"></a>    emp_ptr<span class="op">-&gt;</span>salary <span class="op">=</span> <span class="fl">500000.0</span><span class="op">;</span></span>
<span id="cb210-56"><a href="#cb210-56" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb210-57"><a href="#cb210-57" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* ネストした構造体メンバーの設定 */</span></span>
<span id="cb210-58"><a href="#cb210-58" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>emp_ptr<span class="op">-&gt;</span>address<span class="op">.</span>street<span class="op">,</span> <span class="st">&quot;新宿区西新宿1-1-1&quot;</span><span class="op">);</span></span>
<span id="cb210-59"><a href="#cb210-59" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>emp_ptr<span class="op">-&gt;</span>address<span class="op">.</span>city<span class="op">,</span> <span class="st">&quot;東京都&quot;</span><span class="op">);</span></span>
<span id="cb210-60"><a href="#cb210-60" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>emp_ptr<span class="op">-&gt;</span>address<span class="op">.</span>postal_code<span class="op">,</span> <span class="st">&quot;160-0023&quot;</span><span class="op">);</span></span>
<span id="cb210-61"><a href="#cb210-61" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb210-62"><a href="#cb210-62" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>emp_ptr<span class="op">-&gt;</span>contact<span class="op">.</span>phone<span class="op">,</span> <span class="st">&quot;03-1234-5678&quot;</span><span class="op">);</span></span>
<span id="cb210-63"><a href="#cb210-63" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>emp_ptr<span class="op">-&gt;</span>contact<span class="op">.</span>email<span class="op">,</span> <span class="st">&quot;tanaka@company.co.jp&quot;</span><span class="op">);</span></span>
<span id="cb210-64"><a href="#cb210-64" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb210-65"><a href="#cb210-65" aria-hidden="true" tabindex="-1"></a>    print_employee_details<span class="op">(</span>emp_ptr<span class="op">);</span></span>
<span id="cb210-66"><a href="#cb210-66" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb210-67"><a href="#cb210-67" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 住所更新 */</span></span>
<span id="cb210-68"><a href="#cb210-68" aria-hidden="true" tabindex="-1"></a>    update_address<span class="op">(</span>emp_ptr<span class="op">,</span> <span class="st">&quot;渋谷区渋谷2-2-2&quot;</span><span class="op">,</span> <span class="st">&quot;東京都&quot;</span><span class="op">,</span> <span class="st">&quot;150-0002&quot;</span><span class="op">);</span></span>
<span id="cb210-69"><a href="#cb210-69" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb210-70"><a href="#cb210-70" aria-hidden="true" tabindex="-1"></a>    print_employee_details<span class="op">(</span>emp_ptr<span class="op">);</span></span>
<span id="cb210-71"><a href="#cb210-71" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb210-72"><a href="#cb210-72" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb210-73"><a href="#cb210-73" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h4 data-number="12.3.6.2" id="構造体ポインタのネスト"><span
class="header-section-number">12.3.6.2</span>
構造体ポインタのネスト</h4>
<div class="sourceCode" id="cb211"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb211-1"><a href="#cb211-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb211-2"><a href="#cb211-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;string.h&gt;</span></span>
<span id="cb211-3"><a href="#cb211-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb211-4"><a href="#cb211-4" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> Engine <span class="op">{</span></span>
<span id="cb211-5"><a href="#cb211-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> type<span class="op">[</span><span class="dv">20</span><span class="op">];</span></span>
<span id="cb211-6"><a href="#cb211-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span> displacement<span class="op">;</span></span>
<span id="cb211-7"><a href="#cb211-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> horsepower<span class="op">;</span></span>
<span id="cb211-8"><a href="#cb211-8" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb211-9"><a href="#cb211-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb211-10"><a href="#cb211-10" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> Car <span class="op">{</span></span>
<span id="cb211-11"><a href="#cb211-11" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> model<span class="op">[</span><span class="dv">30</span><span class="op">];</span></span>
<span id="cb211-12"><a href="#cb211-12" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> year<span class="op">;</span></span>
<span id="cb211-13"><a href="#cb211-13" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Engine <span class="op">*</span>engine<span class="op">;</span>  <span class="co">/* エンジン情報へのポインタ */</span></span>
<span id="cb211-14"><a href="#cb211-14" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span> price<span class="op">;</span></span>
<span id="cb211-15"><a href="#cb211-15" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb211-16"><a href="#cb211-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb211-17"><a href="#cb211-17" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> Dealership <span class="op">{</span></span>
<span id="cb211-18"><a href="#cb211-18" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> name<span class="op">[</span><span class="dv">50</span><span class="op">];</span></span>
<span id="cb211-19"><a href="#cb211-19" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Car <span class="op">*</span>inventory<span class="op">;</span>  <span class="co">/* 車の在庫配列へのポインタ */</span></span>
<span id="cb211-20"><a href="#cb211-20" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> car_count<span class="op">;</span></span>
<span id="cb211-21"><a href="#cb211-21" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb211-22"><a href="#cb211-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb211-23"><a href="#cb211-23" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> print_car_info<span class="op">(</span><span class="kw">struct</span> Car <span class="op">*</span>car<span class="op">)</span></span>
<span id="cb211-24"><a href="#cb211-24" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb211-25"><a href="#cb211-25" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== 車両情報 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb211-26"><a href="#cb211-26" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;モデル: </span><span class="sc">%s</span><span class="st"> (</span><span class="sc">%d</span><span class="st">年)</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> car<span class="op">-&gt;</span>model<span class="op">,</span> car<span class="op">-&gt;</span>year<span class="op">);</span></span>
<span id="cb211-27"><a href="#cb211-27" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>car<span class="op">-&gt;</span>engine <span class="op">!=</span> NULL<span class="op">)</span> <span class="op">{</span></span>
<span id="cb211-28"><a href="#cb211-28" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;エンジン: </span><span class="sc">%s</span><span class="st"> </span><span class="sc">%.1f</span><span class="st">L </span><span class="sc">%d</span><span class="st">HP</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> </span>
<span id="cb211-29"><a href="#cb211-29" aria-hidden="true" tabindex="-1"></a>               car<span class="op">-&gt;</span>engine<span class="op">-&gt;</span>type<span class="op">,</span> </span>
<span id="cb211-30"><a href="#cb211-30" aria-hidden="true" tabindex="-1"></a>               car<span class="op">-&gt;</span>engine<span class="op">-&gt;</span>displacement<span class="op">,</span> </span>
<span id="cb211-31"><a href="#cb211-31" aria-hidden="true" tabindex="-1"></a>               car<span class="op">-&gt;</span>engine<span class="op">-&gt;</span>horsepower<span class="op">);</span></span>
<span id="cb211-32"><a href="#cb211-32" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb211-33"><a href="#cb211-33" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;価格: </span><span class="sc">%.0f</span><span class="st">万円</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> car<span class="op">-&gt;</span>price<span class="op">);</span></span>
<span id="cb211-34"><a href="#cb211-34" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb211-35"><a href="#cb211-35" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb211-36"><a href="#cb211-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb211-37"><a href="#cb211-37" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> print_dealership_inventory<span class="op">(</span><span class="kw">struct</span> Dealership <span class="op">*</span>dealer<span class="op">)</span></span>
<span id="cb211-38"><a href="#cb211-38" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb211-39"><a href="#cb211-39" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb211-40"><a href="#cb211-40" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== </span><span class="sc">%s</span><span class="st"> の在庫 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> dealer<span class="op">-&gt;</span>name<span class="op">);</span></span>
<span id="cb211-41"><a href="#cb211-41" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> dealer<span class="op">-&gt;</span>car_count<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb211-42"><a href="#cb211-42" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st">. </span><span class="sc">%s</span><span class="st"> (</span><span class="sc">%.0f</span><span class="st">万円)</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> </span>
<span id="cb211-43"><a href="#cb211-43" aria-hidden="true" tabindex="-1"></a>               i <span class="op">+</span> <span class="dv">1</span><span class="op">,</span> </span>
<span id="cb211-44"><a href="#cb211-44" aria-hidden="true" tabindex="-1"></a>               <span class="op">(</span>dealer<span class="op">-&gt;</span>inventory <span class="op">+</span> i<span class="op">)-&gt;</span>model<span class="op">,</span> </span>
<span id="cb211-45"><a href="#cb211-45" aria-hidden="true" tabindex="-1"></a>               <span class="op">(</span>dealer<span class="op">-&gt;</span>inventory <span class="op">+</span> i<span class="op">)-&gt;</span>price<span class="op">);</span></span>
<span id="cb211-46"><a href="#cb211-46" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb211-47"><a href="#cb211-47" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb211-48"><a href="#cb211-48" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb211-49"><a href="#cb211-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb211-50"><a href="#cb211-50" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb211-51"><a href="#cb211-51" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb211-52"><a href="#cb211-52" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* エンジン情報 */</span></span>
<span id="cb211-53"><a href="#cb211-53" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Engine engine1 <span class="op">=</span> <span class="op">{</span><span class="st">&quot;V6ガソリン&quot;</span><span class="op">,</span> <span class="fl">3.0</span><span class="op">,</span> <span class="dv">280</span><span class="op">};</span></span>
<span id="cb211-54"><a href="#cb211-54" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Engine engine2 <span class="op">=</span> <span class="op">{</span><span class="st">&quot;直4ハイブリッド&quot;</span><span class="op">,</span> <span class="fl">2.0</span><span class="op">,</span> <span class="dv">200</span><span class="op">};</span></span>
<span id="cb211-55"><a href="#cb211-55" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Engine engine3 <span class="op">=</span> <span class="op">{</span><span class="st">&quot;V8ガソリン&quot;</span><span class="op">,</span> <span class="fl">5.0</span><span class="op">,</span> <span class="dv">450</span><span class="op">};</span></span>
<span id="cb211-56"><a href="#cb211-56" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb211-57"><a href="#cb211-57" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 車両情報 */</span></span>
<span id="cb211-58"><a href="#cb211-58" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Car cars<span class="op">[</span><span class="dv">3</span><span class="op">]</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb211-59"><a href="#cb211-59" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span><span class="st">&quot;セダンLX&quot;</span><span class="op">,</span> <span class="dv">2023</span><span class="op">,</span> <span class="op">&amp;</span>engine1<span class="op">,</span> <span class="dv">350</span><span class="op">},</span></span>
<span id="cb211-60"><a href="#cb211-60" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span><span class="st">&quot;ハイブリッドEC&quot;</span><span class="op">,</span> <span class="dv">2023</span><span class="op">,</span> <span class="op">&amp;</span>engine2<span class="op">,</span> <span class="dv">280</span><span class="op">},</span></span>
<span id="cb211-61"><a href="#cb211-61" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span><span class="st">&quot;スポーツST&quot;</span><span class="op">,</span> <span class="dv">2022</span><span class="op">,</span> <span class="op">&amp;</span>engine3<span class="op">,</span> <span class="dv">650</span><span class="op">}</span></span>
<span id="cb211-62"><a href="#cb211-62" aria-hidden="true" tabindex="-1"></a>    <span class="op">};</span></span>
<span id="cb211-63"><a href="#cb211-63" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb211-64"><a href="#cb211-64" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* ディーラー情報 */</span></span>
<span id="cb211-65"><a href="#cb211-65" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Dealership dealer <span class="op">=</span> <span class="op">{</span></span>
<span id="cb211-66"><a href="#cb211-66" aria-hidden="true" tabindex="-1"></a>        <span class="st">&quot;トーキョー自動車&quot;</span><span class="op">,</span></span>
<span id="cb211-67"><a href="#cb211-67" aria-hidden="true" tabindex="-1"></a>        cars<span class="op">,</span></span>
<span id="cb211-68"><a href="#cb211-68" aria-hidden="true" tabindex="-1"></a>        <span class="dv">3</span></span>
<span id="cb211-69"><a href="#cb211-69" aria-hidden="true" tabindex="-1"></a>    <span class="op">};</span></span>
<span id="cb211-70"><a href="#cb211-70" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb211-71"><a href="#cb211-71" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* ディーラーの在庫一覧 */</span></span>
<span id="cb211-72"><a href="#cb211-72" aria-hidden="true" tabindex="-1"></a>    print_dealership_inventory<span class="op">(&amp;</span>dealer<span class="op">);</span></span>
<span id="cb211-73"><a href="#cb211-73" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb211-74"><a href="#cb211-74" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 各車両の詳細情報 */</span></span>
<span id="cb211-75"><a href="#cb211-75" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb211-76"><a href="#cb211-76" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> dealer<span class="op">.</span>car_count<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb211-77"><a href="#cb211-77" aria-hidden="true" tabindex="-1"></a>        print_car_info<span class="op">(</span>dealer<span class="op">.</span>inventory <span class="op">+</span> i<span class="op">);</span></span>
<span id="cb211-78"><a href="#cb211-78" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb211-79"><a href="#cb211-79" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb211-80"><a href="#cb211-80" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb211-81"><a href="#cb211-81" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 data-number="12.3.7" id="構造体とメモリ管理"><span
class="header-section-number">12.3.7</span> 構造体とメモリ管理 💾</h3>
<p>構造体のメモリレイアウトとアライメントについて理解します。</p>
<h4 data-number="12.3.7.1" id="構造体のメモリサイズとアライメント"><span
class="header-section-number">12.3.7.1</span>
構造体のメモリサイズとアライメント</h4>
<div class="sourceCode" id="cb212"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb212-1"><a href="#cb212-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb212-2"><a href="#cb212-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-3"><a href="#cb212-3" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> Example1 <span class="op">{</span></span>
<span id="cb212-4"><a href="#cb212-4" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> a<span class="op">;</span>     <span class="co">/* 1バイト */</span></span>
<span id="cb212-5"><a href="#cb212-5" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> b<span class="op">;</span>      <span class="co">/* 4バイト */</span></span>
<span id="cb212-6"><a href="#cb212-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> c<span class="op">;</span>     <span class="co">/* 1バイト */</span></span>
<span id="cb212-7"><a href="#cb212-7" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb212-8"><a href="#cb212-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-9"><a href="#cb212-9" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> Example2 <span class="op">{</span></span>
<span id="cb212-10"><a href="#cb212-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> a<span class="op">;</span>     <span class="co">/* 1バイト */</span></span>
<span id="cb212-11"><a href="#cb212-11" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> c<span class="op">;</span>     <span class="co">/* 1バイト */</span></span>
<span id="cb212-12"><a href="#cb212-12" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> b<span class="op">;</span>      <span class="co">/* 4バイト */</span></span>
<span id="cb212-13"><a href="#cb212-13" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb212-14"><a href="#cb212-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-15"><a href="#cb212-15" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> Example3 <span class="op">{</span></span>
<span id="cb212-16"><a href="#cb212-16" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span> d<span class="op">;</span>   <span class="co">/* 8バイト */</span></span>
<span id="cb212-17"><a href="#cb212-17" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> a<span class="op">;</span>     <span class="co">/* 1バイト */</span></span>
<span id="cb212-18"><a href="#cb212-18" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> b<span class="op">;</span>      <span class="co">/* 4バイト */</span></span>
<span id="cb212-19"><a href="#cb212-19" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb212-20"><a href="#cb212-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-21"><a href="#cb212-21" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> analyze_struct_memory<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb212-22"><a href="#cb212-22" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb212-23"><a href="#cb212-23" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Example1 ex1<span class="op">;</span></span>
<span id="cb212-24"><a href="#cb212-24" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Example2 ex2<span class="op">;</span></span>
<span id="cb212-25"><a href="#cb212-25" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Example3 ex3<span class="op">;</span></span>
<span id="cb212-26"><a href="#cb212-26" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb212-27"><a href="#cb212-27" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== 構造体メモリ分析 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb212-28"><a href="#cb212-28" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb212-29"><a href="#cb212-29" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;Example1 (char, int, char):</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb212-30"><a href="#cb212-30" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;  sizeof: </span><span class="sc">%lu</span><span class="st"> バイト</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="kw">sizeof</span><span class="op">(</span><span class="kw">struct</span> Example1<span class="op">));</span></span>
<span id="cb212-31"><a href="#cb212-31" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;  a のオフセット: </span><span class="sc">%lu\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(</span><span class="dt">unsigned</span> <span class="dt">long</span><span class="op">)&amp;</span>ex1<span class="op">.</span>a <span class="op">-</span> <span class="op">(</span><span class="dt">unsigned</span> <span class="dt">long</span><span class="op">)&amp;</span>ex1<span class="op">);</span></span>
<span id="cb212-32"><a href="#cb212-32" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;  b のオフセット: </span><span class="sc">%lu\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(</span><span class="dt">unsigned</span> <span class="dt">long</span><span class="op">)&amp;</span>ex1<span class="op">.</span>b <span class="op">-</span> <span class="op">(</span><span class="dt">unsigned</span> <span class="dt">long</span><span class="op">)&amp;</span>ex1<span class="op">);</span></span>
<span id="cb212-33"><a href="#cb212-33" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;  c のオフセット: </span><span class="sc">%lu\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(</span><span class="dt">unsigned</span> <span class="dt">long</span><span class="op">)&amp;</span>ex1<span class="op">.</span>c <span class="op">-</span> <span class="op">(</span><span class="dt">unsigned</span> <span class="dt">long</span><span class="op">)&amp;</span>ex1<span class="op">);</span></span>
<span id="cb212-34"><a href="#cb212-34" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb212-35"><a href="#cb212-35" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb212-36"><a href="#cb212-36" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;Example2 (char, char, int):</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb212-37"><a href="#cb212-37" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;  sizeof: </span><span class="sc">%lu</span><span class="st"> バイト</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="kw">sizeof</span><span class="op">(</span><span class="kw">struct</span> Example2<span class="op">));</span></span>
<span id="cb212-38"><a href="#cb212-38" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;  a のオフセット: </span><span class="sc">%lu\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(</span><span class="dt">unsigned</span> <span class="dt">long</span><span class="op">)&amp;</span>ex2<span class="op">.</span>a <span class="op">-</span> <span class="op">(</span><span class="dt">unsigned</span> <span class="dt">long</span><span class="op">)&amp;</span>ex2<span class="op">);</span></span>
<span id="cb212-39"><a href="#cb212-39" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;  c のオフセット: </span><span class="sc">%lu\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(</span><span class="dt">unsigned</span> <span class="dt">long</span><span class="op">)&amp;</span>ex2<span class="op">.</span>c <span class="op">-</span> <span class="op">(</span><span class="dt">unsigned</span> <span class="dt">long</span><span class="op">)&amp;</span>ex2<span class="op">);</span></span>
<span id="cb212-40"><a href="#cb212-40" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;  b のオフセット: </span><span class="sc">%lu\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(</span><span class="dt">unsigned</span> <span class="dt">long</span><span class="op">)&amp;</span>ex2<span class="op">.</span>b <span class="op">-</span> <span class="op">(</span><span class="dt">unsigned</span> <span class="dt">long</span><span class="op">)&amp;</span>ex2<span class="op">);</span></span>
<span id="cb212-41"><a href="#cb212-41" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb212-42"><a href="#cb212-42" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb212-43"><a href="#cb212-43" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;Example3 (double, char, int):</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb212-44"><a href="#cb212-44" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;  sizeof: </span><span class="sc">%lu</span><span class="st"> バイト</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="kw">sizeof</span><span class="op">(</span><span class="kw">struct</span> Example3<span class="op">));</span></span>
<span id="cb212-45"><a href="#cb212-45" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;  d のオフセット: </span><span class="sc">%lu\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(</span><span class="dt">unsigned</span> <span class="dt">long</span><span class="op">)&amp;</span>ex3<span class="op">.</span>d <span class="op">-</span> <span class="op">(</span><span class="dt">unsigned</span> <span class="dt">long</span><span class="op">)&amp;</span>ex3<span class="op">);</span></span>
<span id="cb212-46"><a href="#cb212-46" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;  a のオフセット: </span><span class="sc">%lu\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(</span><span class="dt">unsigned</span> <span class="dt">long</span><span class="op">)&amp;</span>ex3<span class="op">.</span>a <span class="op">-</span> <span class="op">(</span><span class="dt">unsigned</span> <span class="dt">long</span><span class="op">)&amp;</span>ex3<span class="op">);</span></span>
<span id="cb212-47"><a href="#cb212-47" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;  b のオフセット: </span><span class="sc">%lu\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(</span><span class="dt">unsigned</span> <span class="dt">long</span><span class="op">)&amp;</span>ex3<span class="op">.</span>b <span class="op">-</span> <span class="op">(</span><span class="dt">unsigned</span> <span class="dt">long</span><span class="op">)&amp;</span>ex3<span class="op">);</span></span>
<span id="cb212-48"><a href="#cb212-48" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb212-49"><a href="#cb212-49" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb212-50"><a href="#cb212-50" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb212-51"><a href="#cb212-51" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb212-52"><a href="#cb212-52" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb212-53"><a href="#cb212-53" aria-hidden="true" tabindex="-1"></a>    analyze_struct_memory<span class="op">();</span></span>
<span id="cb212-54"><a href="#cb212-54" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb212-55"><a href="#cb212-55" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== 基本データ型のサイズ ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb212-56"><a href="#cb212-56" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;char: </span><span class="sc">%lu</span><span class="st"> バイト</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="kw">sizeof</span><span class="op">(</span><span class="dt">char</span><span class="op">));</span></span>
<span id="cb212-57"><a href="#cb212-57" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;int: </span><span class="sc">%lu</span><span class="st"> バイト</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="kw">sizeof</span><span class="op">(</span><span class="dt">int</span><span class="op">));</span></span>
<span id="cb212-58"><a href="#cb212-58" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;double: </span><span class="sc">%lu</span><span class="st"> バイト</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="kw">sizeof</span><span class="op">(</span><span class="dt">double</span><span class="op">));</span></span>
<span id="cb212-59"><a href="#cb212-59" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ポインタ: </span><span class="sc">%lu</span><span class="st"> バイト</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="kw">sizeof</span><span class="op">(</span><span class="dt">void</span><span class="op">*));</span></span>
<span id="cb212-60"><a href="#cb212-60" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb212-61"><a href="#cb212-61" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb212-62"><a href="#cb212-62" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h4 data-number="12.3.7.2" id="構造体の配列とポインタの効率性"><span
class="header-section-number">12.3.7.2</span>
構造体の配列とポインタの効率性</h4>
<div class="sourceCode" id="cb213"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb213-1"><a href="#cb213-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb213-2"><a href="#cb213-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;string.h&gt;</span></span>
<span id="cb213-3"><a href="#cb213-3" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;time.h&gt;</span></span>
<span id="cb213-4"><a href="#cb213-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb213-5"><a href="#cb213-5" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> LargeData <span class="op">{</span></span>
<span id="cb213-6"><a href="#cb213-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> description<span class="op">[</span><span class="dv">100</span><span class="op">];</span></span>
<span id="cb213-7"><a href="#cb213-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span> values<span class="op">[</span><span class="dv">50</span><span class="op">];</span></span>
<span id="cb213-8"><a href="#cb213-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> status<span class="op">;</span></span>
<span id="cb213-9"><a href="#cb213-9" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb213-10"><a href="#cb213-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb213-11"><a href="#cb213-11" aria-hidden="true" tabindex="-1"></a><span class="co">/* 値渡しで構造体を処理（非効率） */</span></span>
<span id="cb213-12"><a href="#cb213-12" aria-hidden="true" tabindex="-1"></a><span class="dt">double</span> process_by_value<span class="op">(</span><span class="kw">struct</span> LargeData data<span class="op">)</span></span>
<span id="cb213-13"><a href="#cb213-13" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb213-14"><a href="#cb213-14" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb213-15"><a href="#cb213-15" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span> sum <span class="op">=</span> <span class="fl">0.0</span><span class="op">;</span></span>
<span id="cb213-16"><a href="#cb213-16" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb213-17"><a href="#cb213-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">50</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb213-18"><a href="#cb213-18" aria-hidden="true" tabindex="-1"></a>        sum <span class="op">+=</span> data<span class="op">.</span>values<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb213-19"><a href="#cb213-19" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb213-20"><a href="#cb213-20" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb213-21"><a href="#cb213-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> sum <span class="op">/</span> <span class="fl">50.0</span><span class="op">;</span>  <span class="co">/* 平均値 */</span></span>
<span id="cb213-22"><a href="#cb213-22" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb213-23"><a href="#cb213-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb213-24"><a href="#cb213-24" aria-hidden="true" tabindex="-1"></a><span class="co">/* ポインタ渡しで構造体を処理（効率的） */</span></span>
<span id="cb213-25"><a href="#cb213-25" aria-hidden="true" tabindex="-1"></a><span class="dt">double</span> process_by_pointer<span class="op">(</span><span class="kw">struct</span> LargeData <span class="op">*</span>data<span class="op">)</span></span>
<span id="cb213-26"><a href="#cb213-26" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb213-27"><a href="#cb213-27" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb213-28"><a href="#cb213-28" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span> sum <span class="op">=</span> <span class="fl">0.0</span><span class="op">;</span></span>
<span id="cb213-29"><a href="#cb213-29" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb213-30"><a href="#cb213-30" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">50</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb213-31"><a href="#cb213-31" aria-hidden="true" tabindex="-1"></a>        sum <span class="op">+=</span> data<span class="op">-&gt;</span>values<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb213-32"><a href="#cb213-32" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb213-33"><a href="#cb213-33" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb213-34"><a href="#cb213-34" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> sum <span class="op">/</span> <span class="fl">50.0</span><span class="op">;</span>  <span class="co">/* 平均値 */</span></span>
<span id="cb213-35"><a href="#cb213-35" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb213-36"><a href="#cb213-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb213-37"><a href="#cb213-37" aria-hidden="true" tabindex="-1"></a><span class="co">/* 構造体にテストデータを設定 */</span></span>
<span id="cb213-38"><a href="#cb213-38" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> setup_test_data<span class="op">(</span><span class="kw">struct</span> LargeData <span class="op">*</span>data<span class="op">)</span></span>
<span id="cb213-39"><a href="#cb213-39" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb213-40"><a href="#cb213-40" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb213-41"><a href="#cb213-41" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>data<span class="op">-&gt;</span>description<span class="op">,</span> <span class="st">&quot;テストデータセット&quot;</span><span class="op">);</span></span>
<span id="cb213-42"><a href="#cb213-42" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb213-43"><a href="#cb213-43" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">50</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb213-44"><a href="#cb213-44" aria-hidden="true" tabindex="-1"></a>        data<span class="op">-&gt;</span>values<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> <span class="op">(</span><span class="dt">double</span><span class="op">)(</span>i <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">*</span> <span class="fl">1.5</span><span class="op">;</span></span>
<span id="cb213-45"><a href="#cb213-45" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb213-46"><a href="#cb213-46" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb213-47"><a href="#cb213-47" aria-hidden="true" tabindex="-1"></a>    data<span class="op">-&gt;</span>status <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb213-48"><a href="#cb213-48" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb213-49"><a href="#cb213-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb213-50"><a href="#cb213-50" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb213-51"><a href="#cb213-51" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb213-52"><a href="#cb213-52" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> LargeData test_data<span class="op">;</span></span>
<span id="cb213-53"><a href="#cb213-53" aria-hidden="true" tabindex="-1"></a>    clock_t start<span class="op">,</span> end<span class="op">;</span></span>
<span id="cb213-54"><a href="#cb213-54" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span> result<span class="op">;</span></span>
<span id="cb213-55"><a href="#cb213-55" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> iterations <span class="op">=</span> <span class="dv">100000</span><span class="op">;</span></span>
<span id="cb213-56"><a href="#cb213-56" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb213-57"><a href="#cb213-57" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb213-58"><a href="#cb213-58" aria-hidden="true" tabindex="-1"></a>    setup_test_data<span class="op">(&amp;</span>test_data<span class="op">);</span></span>
<span id="cb213-59"><a href="#cb213-59" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb213-60"><a href="#cb213-60" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== 構造体サイズ情報 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb213-61"><a href="#cb213-61" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;LargeData のサイズ: </span><span class="sc">%lu</span><span class="st"> バイト</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="kw">sizeof</span><span class="op">(</span><span class="kw">struct</span> LargeData<span class="op">));</span></span>
<span id="cb213-62"><a href="#cb213-62" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;テスト回数: </span><span class="sc">%d</span><span class="st"> 回</span><span class="sc">\n\n</span><span class="st">&quot;</span><span class="op">,</span> iterations<span class="op">);</span></span>
<span id="cb213-63"><a href="#cb213-63" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb213-64"><a href="#cb213-64" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 値渡しのテスト */</span></span>
<span id="cb213-65"><a href="#cb213-65" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;値渡しでのテスト開始...</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb213-66"><a href="#cb213-66" aria-hidden="true" tabindex="-1"></a>    start <span class="op">=</span> clock<span class="op">();</span></span>
<span id="cb213-67"><a href="#cb213-67" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> iterations<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb213-68"><a href="#cb213-68" aria-hidden="true" tabindex="-1"></a>        result <span class="op">=</span> process_by_value<span class="op">(</span>test_data<span class="op">);</span></span>
<span id="cb213-69"><a href="#cb213-69" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb213-70"><a href="#cb213-70" aria-hidden="true" tabindex="-1"></a>    end <span class="op">=</span> clock<span class="op">();</span></span>
<span id="cb213-71"><a href="#cb213-71" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;値渡し結果: </span><span class="sc">%.2f\n</span><span class="st">&quot;</span><span class="op">,</span> result<span class="op">);</span></span>
<span id="cb213-72"><a href="#cb213-72" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;実行時間: </span><span class="sc">%.3f</span><span class="st"> 秒</span><span class="sc">\n\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(</span><span class="dt">double</span><span class="op">)(</span>end <span class="op">-</span> start<span class="op">)</span> <span class="op">/</span> CLOCKS_PER_SEC<span class="op">);</span></span>
<span id="cb213-73"><a href="#cb213-73" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb213-74"><a href="#cb213-74" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* ポインタ渡しのテスト */</span></span>
<span id="cb213-75"><a href="#cb213-75" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ポインタ渡しでのテスト開始...</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb213-76"><a href="#cb213-76" aria-hidden="true" tabindex="-1"></a>    start <span class="op">=</span> clock<span class="op">();</span></span>
<span id="cb213-77"><a href="#cb213-77" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> iterations<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb213-78"><a href="#cb213-78" aria-hidden="true" tabindex="-1"></a>        result <span class="op">=</span> process_by_pointer<span class="op">(&amp;</span>test_data<span class="op">);</span></span>
<span id="cb213-79"><a href="#cb213-79" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb213-80"><a href="#cb213-80" aria-hidden="true" tabindex="-1"></a>    end <span class="op">=</span> clock<span class="op">();</span></span>
<span id="cb213-81"><a href="#cb213-81" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ポインタ渡し結果: </span><span class="sc">%.2f\n</span><span class="st">&quot;</span><span class="op">,</span> result<span class="op">);</span></span>
<span id="cb213-82"><a href="#cb213-82" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;実行時間: </span><span class="sc">%.3f</span><span class="st"> 秒</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(</span><span class="dt">double</span><span class="op">)(</span>end <span class="op">-</span> start<span class="op">)</span> <span class="op">/</span> CLOCKS_PER_SEC<span class="op">);</span></span>
<span id="cb213-83"><a href="#cb213-83" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb213-84"><a href="#cb213-84" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb213-85"><a href="#cb213-85" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 data-number="12.3.8" id="実践的な構造体活用例"><span
class="header-section-number">12.3.8</span> 実践的な構造体活用例 💡</h3>
<h4 data-number="12.3.8.1" id="データベース風の学生管理システム"><span
class="header-section-number">12.3.8.1</span>
データベース風の学生管理システム</h4>
<div class="sourceCode" id="cb214"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb214-1"><a href="#cb214-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb214-2"><a href="#cb214-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;string.h&gt;</span></span>
<span id="cb214-3"><a href="#cb214-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb214-4"><a href="#cb214-4" aria-hidden="true" tabindex="-1"></a><span class="pp">#define MAX_STUDENTS </span><span class="dv">100</span></span>
<span id="cb214-5"><a href="#cb214-5" aria-hidden="true" tabindex="-1"></a><span class="pp">#define MAX_NAME_LEN </span><span class="dv">30</span></span>
<span id="cb214-6"><a href="#cb214-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb214-7"><a href="#cb214-7" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> Student <span class="op">{</span></span>
<span id="cb214-8"><a href="#cb214-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> id<span class="op">;</span></span>
<span id="cb214-9"><a href="#cb214-9" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> name<span class="op">[</span>MAX_NAME_LEN<span class="op">];</span></span>
<span id="cb214-10"><a href="#cb214-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> age<span class="op">;</span></span>
<span id="cb214-11"><a href="#cb214-11" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span> gpa<span class="op">;</span></span>
<span id="cb214-12"><a href="#cb214-12" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> major<span class="op">[</span><span class="dv">20</span><span class="op">];</span></span>
<span id="cb214-13"><a href="#cb214-13" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb214-14"><a href="#cb214-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb214-15"><a href="#cb214-15" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> StudentDatabase <span class="op">{</span></span>
<span id="cb214-16"><a href="#cb214-16" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Student <span class="op">*</span>students<span class="op">[</span>MAX_STUDENTS<span class="op">];</span></span>
<span id="cb214-17"><a href="#cb214-17" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> count<span class="op">;</span></span>
<span id="cb214-18"><a href="#cb214-18" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb214-19"><a href="#cb214-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb214-20"><a href="#cb214-20" aria-hidden="true" tabindex="-1"></a><span class="co">/* 学生データベースの初期化 */</span></span>
<span id="cb214-21"><a href="#cb214-21" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> init_database<span class="op">(</span><span class="kw">struct</span> StudentDatabase <span class="op">*</span>db<span class="op">)</span></span>
<span id="cb214-22"><a href="#cb214-22" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb214-23"><a href="#cb214-23" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb214-24"><a href="#cb214-24" aria-hidden="true" tabindex="-1"></a>    db<span class="op">-&gt;</span>count <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb214-25"><a href="#cb214-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> MAX_STUDENTS<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb214-26"><a href="#cb214-26" aria-hidden="true" tabindex="-1"></a>        db<span class="op">-&gt;</span>students<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> NULL<span class="op">;</span></span>
<span id="cb214-27"><a href="#cb214-27" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb214-28"><a href="#cb214-28" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb214-29"><a href="#cb214-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb214-30"><a href="#cb214-30" aria-hidden="true" tabindex="-1"></a><span class="co">/* 学生を追加 */</span></span>
<span id="cb214-31"><a href="#cb214-31" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> add_student<span class="op">(</span><span class="kw">struct</span> StudentDatabase <span class="op">*</span>db<span class="op">,</span> <span class="kw">struct</span> Student <span class="op">*</span>student<span class="op">)</span></span>
<span id="cb214-32"><a href="#cb214-32" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb214-33"><a href="#cb214-33" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>db<span class="op">-&gt;</span>count <span class="op">&gt;=</span> MAX_STUDENTS<span class="op">)</span> <span class="op">{</span></span>
<span id="cb214-34"><a href="#cb214-34" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;エラー: データベースが満杯です</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb214-35"><a href="#cb214-35" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb214-36"><a href="#cb214-36" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb214-37"><a href="#cb214-37" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb214-38"><a href="#cb214-38" aria-hidden="true" tabindex="-1"></a>    db<span class="op">-&gt;</span>students<span class="op">[</span>db<span class="op">-&gt;</span>count<span class="op">]</span> <span class="op">=</span> student<span class="op">;</span></span>
<span id="cb214-39"><a href="#cb214-39" aria-hidden="true" tabindex="-1"></a>    db<span class="op">-&gt;</span>count<span class="op">++;</span></span>
<span id="cb214-40"><a href="#cb214-40" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;学生 </span><span class="sc">%s</span><span class="st"> を追加しました (ID: </span><span class="sc">%d</span><span class="st">)</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> student<span class="op">-&gt;</span>name<span class="op">,</span> student<span class="op">-&gt;</span>id<span class="op">);</span></span>
<span id="cb214-41"><a href="#cb214-41" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb214-42"><a href="#cb214-42" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb214-43"><a href="#cb214-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb214-44"><a href="#cb214-44" aria-hidden="true" tabindex="-1"></a><span class="co">/* IDで学生を検索 */</span></span>
<span id="cb214-45"><a href="#cb214-45" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> Student<span class="op">*</span> find_student_by_id<span class="op">(</span><span class="kw">struct</span> StudentDatabase <span class="op">*</span>db<span class="op">,</span> <span class="dt">int</span> id<span class="op">)</span></span>
<span id="cb214-46"><a href="#cb214-46" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb214-47"><a href="#cb214-47" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb214-48"><a href="#cb214-48" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> db<span class="op">-&gt;</span>count<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb214-49"><a href="#cb214-49" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>db<span class="op">-&gt;</span>students<span class="op">[</span>i<span class="op">]-&gt;</span>id <span class="op">==</span> id<span class="op">)</span> <span class="op">{</span></span>
<span id="cb214-50"><a href="#cb214-50" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> db<span class="op">-&gt;</span>students<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb214-51"><a href="#cb214-51" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb214-52"><a href="#cb214-52" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb214-53"><a href="#cb214-53" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> NULL<span class="op">;</span></span>
<span id="cb214-54"><a href="#cb214-54" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb214-55"><a href="#cb214-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb214-56"><a href="#cb214-56" aria-hidden="true" tabindex="-1"></a><span class="co">/* 専攻で学生を検索 */</span></span>
<span id="cb214-57"><a href="#cb214-57" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> find_students_by_major<span class="op">(</span><span class="kw">struct</span> StudentDatabase <span class="op">*</span>db<span class="op">,</span> <span class="dt">const</span> <span class="dt">char</span><span class="op">*</span> major<span class="op">)</span></span>
<span id="cb214-58"><a href="#cb214-58" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb214-59"><a href="#cb214-59" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb214-60"><a href="#cb214-60" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> found <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb214-61"><a href="#cb214-61" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb214-62"><a href="#cb214-62" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== </span><span class="sc">%s</span><span class="st">専攻の学生 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> major<span class="op">);</span></span>
<span id="cb214-63"><a href="#cb214-63" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> db<span class="op">-&gt;</span>count<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb214-64"><a href="#cb214-64" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>strcmp<span class="op">(</span>db<span class="op">-&gt;</span>students<span class="op">[</span>i<span class="op">]-&gt;</span>major<span class="op">,</span> major<span class="op">)</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb214-65"><a href="#cb214-65" aria-hidden="true" tabindex="-1"></a>            printf<span class="op">(</span><span class="st">&quot;ID: </span><span class="sc">%d</span><span class="st">, 名前: </span><span class="sc">%s</span><span class="st">, GPA: </span><span class="sc">%.2f\n</span><span class="st">&quot;</span><span class="op">,</span> </span>
<span id="cb214-66"><a href="#cb214-66" aria-hidden="true" tabindex="-1"></a>                   db<span class="op">-&gt;</span>students<span class="op">[</span>i<span class="op">]-&gt;</span>id<span class="op">,</span></span>
<span id="cb214-67"><a href="#cb214-67" aria-hidden="true" tabindex="-1"></a>                   db<span class="op">-&gt;</span>students<span class="op">[</span>i<span class="op">]-&gt;</span>name<span class="op">,</span></span>
<span id="cb214-68"><a href="#cb214-68" aria-hidden="true" tabindex="-1"></a>                   db<span class="op">-&gt;</span>students<span class="op">[</span>i<span class="op">]-&gt;</span>gpa<span class="op">);</span></span>
<span id="cb214-69"><a href="#cb214-69" aria-hidden="true" tabindex="-1"></a>            found <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb214-70"><a href="#cb214-70" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb214-71"><a href="#cb214-71" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb214-72"><a href="#cb214-72" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb214-73"><a href="#cb214-73" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(!</span>found<span class="op">)</span> <span class="op">{</span></span>
<span id="cb214-74"><a href="#cb214-74" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;該当する学生が見つかりませんでした</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb214-75"><a href="#cb214-75" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb214-76"><a href="#cb214-76" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb214-77"><a href="#cb214-77" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb214-78"><a href="#cb214-78" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb214-79"><a href="#cb214-79" aria-hidden="true" tabindex="-1"></a><span class="co">/* 全学生の一覧表示 */</span></span>
<span id="cb214-80"><a href="#cb214-80" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> display_all_students<span class="op">(</span><span class="kw">struct</span> StudentDatabase <span class="op">*</span>db<span class="op">)</span></span>
<span id="cb214-81"><a href="#cb214-81" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb214-82"><a href="#cb214-82" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb214-83"><a href="#cb214-83" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb214-84"><a href="#cb214-84" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== 全学生一覧 (</span><span class="sc">%d</span><span class="st">名) ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> db<span class="op">-&gt;</span>count<span class="op">);</span></span>
<span id="cb214-85"><a href="#cb214-85" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ID</span><span class="sc">\t</span><span class="st">名前</span><span class="sc">\t\t</span><span class="st">年齢</span><span class="sc">\t</span><span class="st">GPA</span><span class="sc">\t</span><span class="st">専攻</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb214-86"><a href="#cb214-86" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;------------------------------------------------</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb214-87"><a href="#cb214-87" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb214-88"><a href="#cb214-88" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> db<span class="op">-&gt;</span>count<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb214-89"><a href="#cb214-89" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d\t%s\t\t%d\t%.2f\t%s\n</span><span class="st">&quot;</span><span class="op">,</span></span>
<span id="cb214-90"><a href="#cb214-90" aria-hidden="true" tabindex="-1"></a>               db<span class="op">-&gt;</span>students<span class="op">[</span>i<span class="op">]-&gt;</span>id<span class="op">,</span></span>
<span id="cb214-91"><a href="#cb214-91" aria-hidden="true" tabindex="-1"></a>               db<span class="op">-&gt;</span>students<span class="op">[</span>i<span class="op">]-&gt;</span>name<span class="op">,</span></span>
<span id="cb214-92"><a href="#cb214-92" aria-hidden="true" tabindex="-1"></a>               db<span class="op">-&gt;</span>students<span class="op">[</span>i<span class="op">]-&gt;</span>age<span class="op">,</span></span>
<span id="cb214-93"><a href="#cb214-93" aria-hidden="true" tabindex="-1"></a>               db<span class="op">-&gt;</span>students<span class="op">[</span>i<span class="op">]-&gt;</span>gpa<span class="op">,</span></span>
<span id="cb214-94"><a href="#cb214-94" aria-hidden="true" tabindex="-1"></a>               db<span class="op">-&gt;</span>students<span class="op">[</span>i<span class="op">]-&gt;</span>major<span class="op">);</span></span>
<span id="cb214-95"><a href="#cb214-95" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb214-96"><a href="#cb214-96" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb214-97"><a href="#cb214-97" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb214-98"><a href="#cb214-98" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb214-99"><a href="#cb214-99" aria-hidden="true" tabindex="-1"></a><span class="co">/* 平均GPAを計算 */</span></span>
<span id="cb214-100"><a href="#cb214-100" aria-hidden="true" tabindex="-1"></a><span class="dt">double</span> calculate_average_gpa<span class="op">(</span><span class="kw">struct</span> StudentDatabase <span class="op">*</span>db<span class="op">)</span></span>
<span id="cb214-101"><a href="#cb214-101" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb214-102"><a href="#cb214-102" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>db<span class="op">-&gt;</span>count <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="cf">return</span> <span class="fl">0.0</span><span class="op">;</span></span>
<span id="cb214-103"><a href="#cb214-103" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb214-104"><a href="#cb214-104" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span> total <span class="op">=</span> <span class="fl">0.0</span><span class="op">;</span></span>
<span id="cb214-105"><a href="#cb214-105" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb214-106"><a href="#cb214-106" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb214-107"><a href="#cb214-107" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> db<span class="op">-&gt;</span>count<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb214-108"><a href="#cb214-108" aria-hidden="true" tabindex="-1"></a>        total <span class="op">+=</span> db<span class="op">-&gt;</span>students<span class="op">[</span>i<span class="op">]-&gt;</span>gpa<span class="op">;</span></span>
<span id="cb214-109"><a href="#cb214-109" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb214-110"><a href="#cb214-110" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb214-111"><a href="#cb214-111" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> total <span class="op">/</span> db<span class="op">-&gt;</span>count<span class="op">;</span></span>
<span id="cb214-112"><a href="#cb214-112" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb214-113"><a href="#cb214-113" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb214-114"><a href="#cb214-114" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb214-115"><a href="#cb214-115" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb214-116"><a href="#cb214-116" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> StudentDatabase db<span class="op">;</span></span>
<span id="cb214-117"><a href="#cb214-117" aria-hidden="true" tabindex="-1"></a>    init_database<span class="op">(&amp;</span>db<span class="op">);</span></span>
<span id="cb214-118"><a href="#cb214-118" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb214-119"><a href="#cb214-119" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 学生データの作成 */</span></span>
<span id="cb214-120"><a href="#cb214-120" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Student student1 <span class="op">=</span> <span class="op">{</span><span class="dv">1001</span><span class="op">,</span> <span class="st">&quot;田中太郎&quot;</span><span class="op">,</span> <span class="dv">20</span><span class="op">,</span> <span class="fl">3.7</span><span class="op">,</span> <span class="st">&quot;コンピュータ&quot;</span><span class="op">};</span></span>
<span id="cb214-121"><a href="#cb214-121" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Student student2 <span class="op">=</span> <span class="op">{</span><span class="dv">1002</span><span class="op">,</span> <span class="st">&quot;佐藤花子&quot;</span><span class="op">,</span> <span class="dv">21</span><span class="op">,</span> <span class="fl">3.9</span><span class="op">,</span> <span class="st">&quot;数学&quot;</span><span class="op">};</span></span>
<span id="cb214-122"><a href="#cb214-122" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Student student3 <span class="op">=</span> <span class="op">{</span><span class="dv">1003</span><span class="op">,</span> <span class="st">&quot;山田次郎&quot;</span><span class="op">,</span> <span class="dv">19</span><span class="op">,</span> <span class="fl">3.2</span><span class="op">,</span> <span class="st">&quot;コンピュータ&quot;</span><span class="op">};</span></span>
<span id="cb214-123"><a href="#cb214-123" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Student student4 <span class="op">=</span> <span class="op">{</span><span class="dv">1004</span><span class="op">,</span> <span class="st">&quot;鈴木美咲&quot;</span><span class="op">,</span> <span class="dv">22</span><span class="op">,</span> <span class="fl">3.8</span><span class="op">,</span> <span class="st">&quot;物理&quot;</span><span class="op">};</span></span>
<span id="cb214-124"><a href="#cb214-124" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Student student5 <span class="op">=</span> <span class="op">{</span><span class="dv">1005</span><span class="op">,</span> <span class="st">&quot;高橋健太&quot;</span><span class="op">,</span> <span class="dv">20</span><span class="op">,</span> <span class="fl">3.5</span><span class="op">,</span> <span class="st">&quot;数学&quot;</span><span class="op">};</span></span>
<span id="cb214-125"><a href="#cb214-125" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb214-126"><a href="#cb214-126" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* データベースに学生を追加 */</span></span>
<span id="cb214-127"><a href="#cb214-127" aria-hidden="true" tabindex="-1"></a>    add_student<span class="op">(&amp;</span>db<span class="op">,</span> <span class="op">&amp;</span>student1<span class="op">);</span></span>
<span id="cb214-128"><a href="#cb214-128" aria-hidden="true" tabindex="-1"></a>    add_student<span class="op">(&amp;</span>db<span class="op">,</span> <span class="op">&amp;</span>student2<span class="op">);</span></span>
<span id="cb214-129"><a href="#cb214-129" aria-hidden="true" tabindex="-1"></a>    add_student<span class="op">(&amp;</span>db<span class="op">,</span> <span class="op">&amp;</span>student3<span class="op">);</span></span>
<span id="cb214-130"><a href="#cb214-130" aria-hidden="true" tabindex="-1"></a>    add_student<span class="op">(&amp;</span>db<span class="op">,</span> <span class="op">&amp;</span>student4<span class="op">);</span></span>
<span id="cb214-131"><a href="#cb214-131" aria-hidden="true" tabindex="-1"></a>    add_student<span class="op">(&amp;</span>db<span class="op">,</span> <span class="op">&amp;</span>student5<span class="op">);</span></span>
<span id="cb214-132"><a href="#cb214-132" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb214-133"><a href="#cb214-133" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 全学生表示 */</span></span>
<span id="cb214-134"><a href="#cb214-134" aria-hidden="true" tabindex="-1"></a>    display_all_students<span class="op">(&amp;</span>db<span class="op">);</span></span>
<span id="cb214-135"><a href="#cb214-135" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb214-136"><a href="#cb214-136" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 特定IDの学生を検索 */</span></span>
<span id="cb214-137"><a href="#cb214-137" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Student <span class="op">*</span>found <span class="op">=</span> find_student_by_id<span class="op">(&amp;</span>db<span class="op">,</span> <span class="dv">1003</span><span class="op">);</span></span>
<span id="cb214-138"><a href="#cb214-138" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>found <span class="op">!=</span> NULL<span class="op">)</span> <span class="op">{</span></span>
<span id="cb214-139"><a href="#cb214-139" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;ID 1003 の学生: </span><span class="sc">%s</span><span class="st"> (</span><span class="sc">%s</span><span class="st">専攻)</span><span class="sc">\n\n</span><span class="st">&quot;</span><span class="op">,</span> found<span class="op">-&gt;</span>name<span class="op">,</span> found<span class="op">-&gt;</span>major<span class="op">);</span></span>
<span id="cb214-140"><a href="#cb214-140" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb214-141"><a href="#cb214-141" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb214-142"><a href="#cb214-142" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 専攻別検索 */</span></span>
<span id="cb214-143"><a href="#cb214-143" aria-hidden="true" tabindex="-1"></a>    find_students_by_major<span class="op">(&amp;</span>db<span class="op">,</span> <span class="st">&quot;コンピュータ&quot;</span><span class="op">);</span></span>
<span id="cb214-144"><a href="#cb214-144" aria-hidden="true" tabindex="-1"></a>    find_students_by_major<span class="op">(&amp;</span>db<span class="op">,</span> <span class="st">&quot;数学&quot;</span><span class="op">);</span></span>
<span id="cb214-145"><a href="#cb214-145" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb214-146"><a href="#cb214-146" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 統計情報 */</span></span>
<span id="cb214-147"><a href="#cb214-147" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== 統計情報 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb214-148"><a href="#cb214-148" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;登録学生数: </span><span class="sc">%d</span><span class="st">名</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> db<span class="op">.</span>count<span class="op">);</span></span>
<span id="cb214-149"><a href="#cb214-149" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;平均GPA: </span><span class="sc">%.2f\n</span><span class="st">&quot;</span><span class="op">,</span> calculate_average_gpa<span class="op">(&amp;</span>db<span class="op">));</span></span>
<span id="cb214-150"><a href="#cb214-150" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb214-151"><a href="#cb214-151" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb214-152"><a href="#cb214-152" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h2 data-number="12.4" id="サンプルコード-10"><span
class="header-section-number">12.4</span> サンプルコード</h2>
<h3 data-number="12.4.1" id="構造体の基本操作"><span
class="header-section-number">12.4.1</span> 構造体の基本操作</h3>
<p>プログラムファイル: <code>examples/struct_basic.c</code></p>
<p>構造体の定義、初期化、メンバーアクセスの基本を学習します。</p>
<h3 data-number="12.4.2" id="構造体ポインタと-演算子"><span
class="header-section-number">12.4.2</span>
構造体ポインタと-&gt;演算子</h3>
<p>プログラムファイル: <code>examples/struct_pointers.c</code></p>
<p>構造体ポインタと-&gt;演算子の使用方法を学習します。</p>
<h3 data-number="12.4.3" id="構造体ポインタ配列-1"><span
class="header-section-number">12.4.3</span> 構造体ポインタ配列</h3>
<p>プログラムファイル: <code>examples/struct_pointer_arrays.c</code></p>
<p>構造体ポインタ配列を使ったデータ管理を学習します。</p>
<h3 data-number="12.4.4" id="コンパイルと実行-10"><span
class="header-section-number">12.4.4</span> コンパイルと実行</h3>
<div class="sourceCode" id="cb215"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb215-1"><a href="#cb215-1" aria-hidden="true" tabindex="-1"></a><span class="co"># examples ディレクトリに移動</span></span>
<span id="cb215-2"><a href="#cb215-2" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> examples</span>
<span id="cb215-3"><a href="#cb215-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb215-4"><a href="#cb215-4" aria-hidden="true" tabindex="-1"></a><span class="co"># C90準拠でコンパイル</span></span>
<span id="cb215-5"><a href="#cb215-5" aria-hidden="true" tabindex="-1"></a><span class="fu">gcc</span> <span class="at">-std</span><span class="op">=</span>c90 <span class="at">-Wall</span> <span class="at">-Wextra</span> <span class="at">-pedantic</span> struct_basic.c <span class="at">-o</span> struct_basic</span>
<span id="cb215-6"><a href="#cb215-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb215-7"><a href="#cb215-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 実行</span></span>
<span id="cb215-8"><a href="#cb215-8" aria-hidden="true" tabindex="-1"></a><span class="ex">./struct_basic</span></span></code></pre></div>
<h2 data-number="12.5" id="演習課題-10"><span
class="header-section-number">12.5</span> 演習課題</h2>
<h3 data-number="12.5.1" id="基礎問題-10"><span
class="header-section-number">12.5.1</span> 基礎問題</h3>
<ol type="1">
<li><strong>学生情報管理</strong>
<ul>
<li>学生の情報（ID、名前、年齢、成績）を格納する構造体を定義し、ポインタを使って情報を表示・更新するプログラムを作成してください</li>
</ul></li>
<li><strong>座標計算</strong>
<ul>
<li>2D座標を表す構造体を定義し、2点間の距離を計算する関数をポインタを使って実装してください</li>
</ul></li>
<li><strong>商品管理</strong>
<ul>
<li>商品情報（コード、名前、価格、在庫）の構造体を作成し、構造体ポインタ配列で複数商品を管理するプログラムを作成してください</li>
</ul></li>
</ol>
<h3 data-number="12.5.2" id="応用問題-10"><span
class="header-section-number">12.5.2</span> 応用問題</h3>
<ol type="1">
<li><strong>従業員データベース</strong>
<ul>
<li>従業員情報と部署情報をネストした構造体で管理し、部署別の給与統計を算出するプログラムを作成してください</li>
</ul></li>
<li><strong>図書管理システム</strong>
<ul>
<li>本の情報（タイトル、著者、出版年、貸出状況）を管理し、検索・貸出・返却機能を実装してください</li>
</ul></li>
<li><strong>成績管理システム</strong>
<ul>
<li>学生と科目の構造体を使って、学生別・科目別の成績統計を管理するプログラムを作成してください</li>
</ul></li>
</ol>
<h3 data-number="12.5.3" id="発展問題-5"><span
class="header-section-number">12.5.3</span> 発展問題</h3>
<ol type="1">
<li><strong>動的配列システム</strong>
<ul>
<li>構造体ポインタ配列を動的に拡張できるシステムを実装してください</li>
</ul></li>
<li><strong>データソート</strong>
<ul>
<li>構造体ポインタ配列を複数の条件（名前、年齢、成績など）でソートできるプログラムを作成してください</li>
</ul></li>
<li><strong>階層データ構造</strong>
<ul>
<li>会社組織（部署→チーム→従業員）のような階層構造を構造体とポインタで表現してください</li>
</ul></li>
</ol>
<h2 data-number="12.6" id="コンパイル方法-10"><span
class="header-section-number">12.6</span> コンパイル方法</h2>
<p>この章では以下のMakefileを使用してコンパイルができます：</p>
<div class="sourceCode" id="cb216"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb216-1"><a href="#cb216-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 全ての例題をコンパイル</span></span>
<span id="cb216-2"><a href="#cb216-2" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> all</span>
<span id="cb216-3"><a href="#cb216-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb216-4"><a href="#cb216-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 特定のプログラムをコンパイル</span></span>
<span id="cb216-5"><a href="#cb216-5" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> struct_basic</span>
<span id="cb216-6"><a href="#cb216-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb216-7"><a href="#cb216-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 実行</span></span>
<span id="cb216-8"><a href="#cb216-8" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> run</span>
<span id="cb216-9"><a href="#cb216-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb216-10"><a href="#cb216-10" aria-hidden="true" tabindex="-1"></a><span class="co"># クリーンアップ</span></span>
<span id="cb216-11"><a href="#cb216-11" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> clean</span></code></pre></div>
<h2 data-number="12.7" id="規格による違い-10"><span
class="header-section-number">12.7</span> 規格による違い</h2>
<h3 data-number="12.7.1" id="c90での制限事項-9"><span
class="header-section-number">12.7.1</span> C90での制限事項</h3>
<ul>
<li>構造体の初期化は順序通りのみ</li>
<li>可変長配列メンバーは不可</li>
<li>匿名構造体・共用体は不可</li>
</ul>
<h3 data-number="12.7.2" id="c99以降の拡張-9"><span
class="header-section-number">12.7.2</span> C99以降の拡張</h3>
<ul>
<li>指定イニシャライザが使用可能</li>
<li>可変長配列メンバー（C99）</li>
<li>匿名構造体・共用体（C11）</li>
</ul>
<h2 data-number="12.8" id="よくある間違い-8"><span
class="header-section-number">12.8</span> 🚨 よくある間違い</h2>
<h3 data-number="12.8.1" id="nullポインタの参照-1"><span
class="header-section-number">12.8.1</span> 1. NULLポインタの参照</h3>
<div class="sourceCode" id="cb217"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb217-1"><a href="#cb217-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* NG: NULLポインタの参照 */</span></span>
<span id="cb217-2"><a href="#cb217-2" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> Student <span class="op">*</span>student <span class="op">=</span> NULL<span class="op">;</span></span>
<span id="cb217-3"><a href="#cb217-3" aria-hidden="true" tabindex="-1"></a>printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> student<span class="op">-&gt;</span>name<span class="op">);</span>  <span class="co">/* セグメンテーション違反 */</span></span>
<span id="cb217-4"><a href="#cb217-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb217-5"><a href="#cb217-5" aria-hidden="true" tabindex="-1"></a><span class="co">/* OK: NULLチェック */</span></span>
<span id="cb217-6"><a href="#cb217-6" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="op">(</span>student <span class="op">!=</span> NULL<span class="op">)</span> <span class="op">{</span></span>
<span id="cb217-7"><a href="#cb217-7" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> student<span class="op">-&gt;</span>name<span class="op">);</span></span>
<span id="cb217-8"><a href="#cb217-8" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 data-number="12.8.2" id="スタック上の構造体アドレスの返却"><span
class="header-section-number">12.8.2</span> 2.
スタック上の構造体アドレスの返却</h3>
<div class="sourceCode" id="cb218"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb218-1"><a href="#cb218-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* NG: ローカル構造体のアドレス返し */</span></span>
<span id="cb218-2"><a href="#cb218-2" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> Point<span class="op">*</span> create_point<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">)</span> <span class="op">{</span></span>
<span id="cb218-3"><a href="#cb218-3" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> Point p <span class="op">=</span> <span class="op">{</span>x<span class="op">,</span> y<span class="op">};</span></span>
<span id="cb218-4"><a href="#cb218-4" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">&amp;</span>p<span class="op">;</span>  <span class="co">/* 危険: ローカル変数のアドレス */</span></span>
<span id="cb218-5"><a href="#cb218-5" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb218-6"><a href="#cb218-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb218-7"><a href="#cb218-7" aria-hidden="true" tabindex="-1"></a><span class="co">/* OK: 静的変数または呼び出し元で用意 */</span></span>
<span id="cb218-8"><a href="#cb218-8" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> create_point<span class="op">(</span><span class="kw">struct</span> Point <span class="op">*</span>p<span class="op">,</span> <span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">)</span> <span class="op">{</span></span>
<span id="cb218-9"><a href="#cb218-9" aria-hidden="true" tabindex="-1"></a>    p<span class="op">-&gt;</span>x <span class="op">=</span> x<span class="op">;</span></span>
<span id="cb218-10"><a href="#cb218-10" aria-hidden="true" tabindex="-1"></a>    p<span class="op">-&gt;</span>y <span class="op">=</span> y<span class="op">;</span></span>
<span id="cb218-11"><a href="#cb218-11" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 data-number="12.8.3" id="構造体の比較"><span
class="header-section-number">12.8.3</span> 3. 構造体の比較</h3>
<div class="sourceCode" id="cb219"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb219-1"><a href="#cb219-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* NG: 構造体の直接比較 */</span></span>
<span id="cb219-2"><a href="#cb219-2" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> Point p1 <span class="op">=</span> <span class="op">{</span><span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">};</span></span>
<span id="cb219-3"><a href="#cb219-3" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> Point p2 <span class="op">=</span> <span class="op">{</span><span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">};</span></span>
<span id="cb219-4"><a href="#cb219-4" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="op">(</span>p1 <span class="op">==</span> p2<span class="op">)</span> <span class="op">{</span> <span class="co">/* コンパイルエラー */</span> <span class="op">}</span></span>
<span id="cb219-5"><a href="#cb219-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb219-6"><a href="#cb219-6" aria-hidden="true" tabindex="-1"></a><span class="co">/* OK: メンバーごとの比較 */</span></span>
<span id="cb219-7"><a href="#cb219-7" aria-hidden="true" tabindex="-1"></a><span class="cf">if</span> <span class="op">(</span>p1<span class="op">.</span>x <span class="op">==</span> p2<span class="op">.</span>x <span class="op">&amp;&amp;</span> p1<span class="op">.</span>y <span class="op">==</span> p2<span class="op">.</span>y<span class="op">)</span> <span class="op">{</span></span>
<span id="cb219-8"><a href="#cb219-8" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;同じ座標です</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb219-9"><a href="#cb219-9" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h2 data-number="12.9" id="次の章へ-10"><span
class="header-section-number">12.9</span> 次の章へ</h2>
<h2 data-number="12.10" id="参考資料-10"><span
class="header-section-number">12.10</span> 参考資料</h2>
<ul>
<li><a
href="https://ja.cppreference.com/w/c/language/struct">C言語構造体リファレンス</a></li>
<li><a
href="https://ja.cppreference.com/w/c/language/object">メモリアライメントの詳細</a></li>
<li><a
href="https://ja.cppreference.com/w/c/language/struct_initialization">構造体の初期化</a></li>
</ul>
<h1 data-number="13" id="関数ポインタ"><span
class="header-section-number">13</span> 関数ポインタ</h1>
<h2 data-number="13.1" id="対応c規格-12"><span
class="header-section-number">13.1</span> 対応C規格</h2>
<ul>
<li><strong>主要対象:</strong> C90</li>
<li><strong>学習内容:</strong>
関数ポインタの基本、コールバック関数、関数ポインタ配列、動的な関数呼び出し</li>
</ul>
<h2 data-number="13.2" id="学習目標-12"><span
class="header-section-number">13.2</span> 学習目標</h2>
<p>この章を完了すると、以下のことができるようになります：</p>
<ul>
<li>関数ポインタの基本概念を理解する</li>
<li>関数ポインタの宣言と初期化ができる</li>
<li>コールバック関数を実装できる</li>
<li>関数ポインタ配列を活用できる</li>
<li>動的な関数選択システムを作成できる</li>
</ul>
<h2 data-number="13.3" id="理論解説-11"><span
class="header-section-number">13.3</span> 理論解説</h2>
<h3 data-number="13.3.1" id="関数ポインタの基本概念"><span
class="header-section-number">13.3.1</span> 関数ポインタの基本概念
🎯</h3>
<p>関数ポインタは関数のアドレスを格納するポインタです。これにより、実行時に呼び出す関数を動的に決定できます。</p>
<h4 data-number="13.3.1.1" id="関数ポインタの宣言"><span
class="header-section-number">13.3.1.1</span> 関数ポインタの宣言</h4>
<div class="sourceCode" id="cb220"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb220-1"><a href="#cb220-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb220-2"><a href="#cb220-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb220-3"><a href="#cb220-3" aria-hidden="true" tabindex="-1"></a><span class="co">/* 通常の関数 */</span></span>
<span id="cb220-4"><a href="#cb220-4" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> add<span class="op">(</span><span class="dt">int</span> a<span class="op">,</span> <span class="dt">int</span> b<span class="op">)</span></span>
<span id="cb220-5"><a href="#cb220-5" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb220-6"><a href="#cb220-6" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> a <span class="op">+</span> b<span class="op">;</span></span>
<span id="cb220-7"><a href="#cb220-7" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb220-8"><a href="#cb220-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb220-9"><a href="#cb220-9" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> subtract<span class="op">(</span><span class="dt">int</span> a<span class="op">,</span> <span class="dt">int</span> b<span class="op">)</span></span>
<span id="cb220-10"><a href="#cb220-10" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb220-11"><a href="#cb220-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> a <span class="op">-</span> b<span class="op">;</span></span>
<span id="cb220-12"><a href="#cb220-12" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb220-13"><a href="#cb220-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb220-14"><a href="#cb220-14" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb220-15"><a href="#cb220-15" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb220-16"><a href="#cb220-16" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 関数ポインタの宣言 */</span></span>
<span id="cb220-17"><a href="#cb220-17" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> <span class="op">(*</span>operation<span class="op">)(</span><span class="dt">int</span><span class="op">,</span> <span class="dt">int</span><span class="op">);</span></span>
<span id="cb220-18"><a href="#cb220-18" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb220-19"><a href="#cb220-19" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 関数ポインタに関数のアドレスを代入 */</span></span>
<span id="cb220-20"><a href="#cb220-20" aria-hidden="true" tabindex="-1"></a>    operation <span class="op">=</span> add<span class="op">;</span>  <span class="co">/* または &amp;add */</span></span>
<span id="cb220-21"><a href="#cb220-21" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb220-22"><a href="#cb220-22" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 関数ポインタを通じて関数を呼び出し */</span></span>
<span id="cb220-23"><a href="#cb220-23" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;addition: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> operation<span class="op">(</span><span class="dv">5</span><span class="op">,</span> <span class="dv">3</span><span class="op">));</span></span>
<span id="cb220-24"><a href="#cb220-24" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb220-25"><a href="#cb220-25" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 別の関数を指すように変更 */</span></span>
<span id="cb220-26"><a href="#cb220-26" aria-hidden="true" tabindex="-1"></a>    operation <span class="op">=</span> subtract<span class="op">;</span></span>
<span id="cb220-27"><a href="#cb220-27" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;subtraction: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> operation<span class="op">(</span><span class="dv">5</span><span class="op">,</span> <span class="dv">3</span><span class="op">));</span></span>
<span id="cb220-28"><a href="#cb220-28" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb220-29"><a href="#cb220-29" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb220-30"><a href="#cb220-30" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h4 data-number="13.3.1.2" id="関数ポインタの基本文法"><span
class="header-section-number">13.3.1.2</span>
関数ポインタの基本文法</h4>
<div class="sourceCode" id="cb221"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb221-1"><a href="#cb221-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb221-2"><a href="#cb221-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb221-3"><a href="#cb221-3" aria-hidden="true" tabindex="-1"></a><span class="co">/* さまざまな関数 */</span></span>
<span id="cb221-4"><a href="#cb221-4" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> greet<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb221-5"><a href="#cb221-5" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb221-6"><a href="#cb221-6" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;こんにちは！</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb221-7"><a href="#cb221-7" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb221-8"><a href="#cb221-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb221-9"><a href="#cb221-9" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> multiply<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">)</span></span>
<span id="cb221-10"><a href="#cb221-10" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb221-11"><a href="#cb221-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> x <span class="op">*</span> y<span class="op">;</span></span>
<span id="cb221-12"><a href="#cb221-12" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb221-13"><a href="#cb221-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb221-14"><a href="#cb221-14" aria-hidden="true" tabindex="-1"></a><span class="dt">double</span> divide<span class="op">(</span><span class="dt">double</span> a<span class="op">,</span> <span class="dt">double</span> b<span class="op">)</span></span>
<span id="cb221-15"><a href="#cb221-15" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb221-16"><a href="#cb221-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>b <span class="op">!=</span> <span class="fl">0.0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb221-17"><a href="#cb221-17" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> a <span class="op">/</span> b<span class="op">;</span></span>
<span id="cb221-18"><a href="#cb221-18" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb221-19"><a href="#cb221-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="fl">0.0</span><span class="op">;</span></span>
<span id="cb221-20"><a href="#cb221-20" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb221-21"><a href="#cb221-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb221-22"><a href="#cb221-22" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb221-23"><a href="#cb221-23" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb221-24"><a href="#cb221-24" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* さまざまな関数ポインタの宣言 */</span></span>
<span id="cb221-25"><a href="#cb221-25" aria-hidden="true" tabindex="-1"></a>    <span class="dt">void</span> <span class="op">(*</span>greeting_func<span class="op">)(</span><span class="dt">void</span><span class="op">);</span>           <span class="co">/* 引数なし、戻り値なし */</span></span>
<span id="cb221-26"><a href="#cb221-26" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> <span class="op">(*</span>math_func<span class="op">)(</span><span class="dt">int</span><span class="op">,</span> <span class="dt">int</span><span class="op">);</span>            <span class="co">/* int引数2つ、int戻り値 */</span></span>
<span id="cb221-27"><a href="#cb221-27" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span> <span class="op">(*</span>calc_func<span class="op">)(</span><span class="dt">double</span><span class="op">,</span> <span class="dt">double</span><span class="op">);</span>   <span class="co">/* double引数2つ、double戻り値 */</span></span>
<span id="cb221-28"><a href="#cb221-28" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb221-29"><a href="#cb221-29" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 関数ポインタの初期化 */</span></span>
<span id="cb221-30"><a href="#cb221-30" aria-hidden="true" tabindex="-1"></a>    greeting_func <span class="op">=</span> greet<span class="op">;</span></span>
<span id="cb221-31"><a href="#cb221-31" aria-hidden="true" tabindex="-1"></a>    math_func <span class="op">=</span> multiply<span class="op">;</span></span>
<span id="cb221-32"><a href="#cb221-32" aria-hidden="true" tabindex="-1"></a>    calc_func <span class="op">=</span> divide<span class="op">;</span></span>
<span id="cb221-33"><a href="#cb221-33" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb221-34"><a href="#cb221-34" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 関数ポインタを使った呼び出し */</span></span>
<span id="cb221-35"><a href="#cb221-35" aria-hidden="true" tabindex="-1"></a>    greeting_func<span class="op">();</span>                       <span class="co">/* greet()を呼び出し */</span></span>
<span id="cb221-36"><a href="#cb221-36" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;乗算: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> math_func<span class="op">(</span><span class="dv">4</span><span class="op">,</span> <span class="dv">7</span><span class="op">));</span> <span class="co">/* multiply(4, 7)を呼び出し */</span></span>
<span id="cb221-37"><a href="#cb221-37" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;除算: </span><span class="sc">%.2f\n</span><span class="st">&quot;</span><span class="op">,</span> calc_func<span class="op">(</span><span class="fl">10.0</span><span class="op">,</span> <span class="fl">3.0</span><span class="op">));</span> <span class="co">/* divide(10.0, 3.0)を呼び出し */</span></span>
<span id="cb221-38"><a href="#cb221-38" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb221-39"><a href="#cb221-39" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 2つの異なる呼び出し方法 */</span></span>
<span id="cb221-40"><a href="#cb221-40" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;直接呼び出し: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">(*</span>math_func<span class="op">)(</span><span class="dv">6</span><span class="op">,</span> <span class="dv">8</span><span class="op">));</span>  <span class="co">/* (*ptr)(args) */</span></span>
<span id="cb221-41"><a href="#cb221-41" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;間接呼び出し: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> math_func<span class="op">(</span><span class="dv">6</span><span class="op">,</span> <span class="dv">8</span><span class="op">));</span>     <span class="co">/* ptr(args) */</span></span>
<span id="cb221-42"><a href="#cb221-42" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb221-43"><a href="#cb221-43" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb221-44"><a href="#cb221-44" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 data-number="13.3.2" id="関数ポインタの実践的な使用"><span
class="header-section-number">13.3.2</span> 関数ポインタの実践的な使用
💡</h3>
<h4 data-number="13.3.2.1" id="計算機システム"><span
class="header-section-number">13.3.2.1</span> 計算機システム</h4>
<div class="sourceCode" id="cb222"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb222-1"><a href="#cb222-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb222-2"><a href="#cb222-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb222-3"><a href="#cb222-3" aria-hidden="true" tabindex="-1"></a><span class="co">/* 演算関数群 */</span></span>
<span id="cb222-4"><a href="#cb222-4" aria-hidden="true" tabindex="-1"></a><span class="dt">double</span> add_op<span class="op">(</span><span class="dt">double</span> a<span class="op">,</span> <span class="dt">double</span> b<span class="op">)</span> <span class="op">{</span> <span class="cf">return</span> a <span class="op">+</span> b<span class="op">;</span> <span class="op">}</span></span>
<span id="cb222-5"><a href="#cb222-5" aria-hidden="true" tabindex="-1"></a><span class="dt">double</span> sub_op<span class="op">(</span><span class="dt">double</span> a<span class="op">,</span> <span class="dt">double</span> b<span class="op">)</span> <span class="op">{</span> <span class="cf">return</span> a <span class="op">-</span> b<span class="op">;</span> <span class="op">}</span></span>
<span id="cb222-6"><a href="#cb222-6" aria-hidden="true" tabindex="-1"></a><span class="dt">double</span> mul_op<span class="op">(</span><span class="dt">double</span> a<span class="op">,</span> <span class="dt">double</span> b<span class="op">)</span> <span class="op">{</span> <span class="cf">return</span> a <span class="op">*</span> b<span class="op">;</span> <span class="op">}</span></span>
<span id="cb222-7"><a href="#cb222-7" aria-hidden="true" tabindex="-1"></a><span class="dt">double</span> div_op<span class="op">(</span><span class="dt">double</span> a<span class="op">,</span> <span class="dt">double</span> b<span class="op">)</span> </span>
<span id="cb222-8"><a href="#cb222-8" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb222-9"><a href="#cb222-9" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>b <span class="op">!=</span> <span class="fl">0.0</span><span class="op">)</span> <span class="cf">return</span> a <span class="op">/</span> b<span class="op">;</span></span>
<span id="cb222-10"><a href="#cb222-10" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;エラー: ゼロ除算</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb222-11"><a href="#cb222-11" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="fl">0.0</span><span class="op">;</span></span>
<span id="cb222-12"><a href="#cb222-12" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb222-13"><a href="#cb222-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb222-14"><a href="#cb222-14" aria-hidden="true" tabindex="-1"></a><span class="co">/* 演算を実行する関数 */</span></span>
<span id="cb222-15"><a href="#cb222-15" aria-hidden="true" tabindex="-1"></a><span class="dt">double</span> calculate<span class="op">(</span><span class="dt">double</span> a<span class="op">,</span> <span class="dt">double</span> b<span class="op">,</span> <span class="dt">double</span> <span class="op">(*</span>operation<span class="op">)(</span><span class="dt">double</span><span class="op">,</span> <span class="dt">double</span><span class="op">))</span></span>
<span id="cb222-16"><a href="#cb222-16" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb222-17"><a href="#cb222-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> operation<span class="op">(</span>a<span class="op">,</span> b<span class="op">);</span></span>
<span id="cb222-18"><a href="#cb222-18" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb222-19"><a href="#cb222-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb222-20"><a href="#cb222-20" aria-hidden="true" tabindex="-1"></a><span class="co">/* 演算子に基づいて関数を選択 */</span></span>
<span id="cb222-21"><a href="#cb222-21" aria-hidden="true" tabindex="-1"></a><span class="dt">double</span> <span class="op">(*</span>get_operation<span class="op">(</span><span class="dt">char</span> op<span class="op">))(</span><span class="dt">double</span><span class="op">,</span> <span class="dt">double</span><span class="op">)</span></span>
<span id="cb222-22"><a href="#cb222-22" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb222-23"><a href="#cb222-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">switch</span> <span class="op">(</span>op<span class="op">)</span> <span class="op">{</span></span>
<span id="cb222-24"><a href="#cb222-24" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> <span class="ch">&#39;+&#39;</span><span class="op">:</span> <span class="cf">return</span> add_op<span class="op">;</span></span>
<span id="cb222-25"><a href="#cb222-25" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> <span class="ch">&#39;-&#39;</span><span class="op">:</span> <span class="cf">return</span> sub_op<span class="op">;</span></span>
<span id="cb222-26"><a href="#cb222-26" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> <span class="ch">&#39;*&#39;</span><span class="op">:</span> <span class="cf">return</span> mul_op<span class="op">;</span></span>
<span id="cb222-27"><a href="#cb222-27" aria-hidden="true" tabindex="-1"></a>        <span class="cf">case</span> <span class="ch">&#39;/&#39;</span><span class="op">:</span> <span class="cf">return</span> div_op<span class="op">;</span></span>
<span id="cb222-28"><a href="#cb222-28" aria-hidden="true" tabindex="-1"></a>        <span class="cf">default</span><span class="op">:</span>  <span class="cf">return</span> NULL<span class="op">;</span></span>
<span id="cb222-29"><a href="#cb222-29" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb222-30"><a href="#cb222-30" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb222-31"><a href="#cb222-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb222-32"><a href="#cb222-32" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb222-33"><a href="#cb222-33" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb222-34"><a href="#cb222-34" aria-hidden="true" tabindex="-1"></a>    <span class="dt">double</span> num1 <span class="op">=</span> <span class="fl">15.0</span><span class="op">,</span> num2 <span class="op">=</span> <span class="fl">4.0</span><span class="op">;</span></span>
<span id="cb222-35"><a href="#cb222-35" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> operators<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="ch">&#39;+&#39;</span><span class="op">,</span> <span class="ch">&#39;-&#39;</span><span class="op">,</span> <span class="ch">&#39;*&#39;</span><span class="op">,</span> <span class="ch">&#39;/&#39;</span><span class="op">};</span></span>
<span id="cb222-36"><a href="#cb222-36" aria-hidden="true" tabindex="-1"></a>    <span class="dt">const</span> <span class="dt">char</span><span class="op">*</span> op_names<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="st">&quot;加算&quot;</span><span class="op">,</span> <span class="st">&quot;減算&quot;</span><span class="op">,</span> <span class="st">&quot;乗算&quot;</span><span class="op">,</span> <span class="st">&quot;除算&quot;</span><span class="op">};</span></span>
<span id="cb222-37"><a href="#cb222-37" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb222-38"><a href="#cb222-38" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb222-39"><a href="#cb222-39" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;数値1: </span><span class="sc">%.1f</span><span class="st">, 数値2: </span><span class="sc">%.1f\n\n</span><span class="st">&quot;</span><span class="op">,</span> num1<span class="op">,</span> num2<span class="op">);</span></span>
<span id="cb222-40"><a href="#cb222-40" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb222-41"><a href="#cb222-41" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* すべての演算を実行 */</span></span>
<span id="cb222-42"><a href="#cb222-42" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> <span class="dv">4</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb222-43"><a href="#cb222-43" aria-hidden="true" tabindex="-1"></a>        <span class="dt">double</span> <span class="op">(*</span>op_func<span class="op">)(</span><span class="dt">double</span><span class="op">,</span> <span class="dt">double</span><span class="op">)</span> <span class="op">=</span> get_operation<span class="op">(</span>operators<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb222-44"><a href="#cb222-44" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>op_func <span class="op">!=</span> NULL<span class="op">)</span> <span class="op">{</span></span>
<span id="cb222-45"><a href="#cb222-45" aria-hidden="true" tabindex="-1"></a>            <span class="dt">double</span> result <span class="op">=</span> calculate<span class="op">(</span>num1<span class="op">,</span> num2<span class="op">,</span> op_func<span class="op">);</span></span>
<span id="cb222-46"><a href="#cb222-46" aria-hidden="true" tabindex="-1"></a>            printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%s</span><span class="st"> (</span><span class="sc">%c</span><span class="st">): </span><span class="sc">%.2f\n</span><span class="st">&quot;</span><span class="op">,</span> op_names<span class="op">[</span>i<span class="op">],</span> operators<span class="op">[</span>i<span class="op">],</span> result<span class="op">);</span></span>
<span id="cb222-47"><a href="#cb222-47" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb222-48"><a href="#cb222-48" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb222-49"><a href="#cb222-49" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb222-50"><a href="#cb222-50" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb222-51"><a href="#cb222-51" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h4 data-number="13.3.2.2" id="動的メニューシステム"><span
class="header-section-number">13.3.2.2</span> 動的メニューシステム</h4>
<div class="sourceCode" id="cb223"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb223-1"><a href="#cb223-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb223-2"><a href="#cb223-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb223-3"><a href="#cb223-3" aria-hidden="true" tabindex="-1"></a><span class="co">/* メニュー項目の処理関数 */</span></span>
<span id="cb223-4"><a href="#cb223-4" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> show_profile<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb223-5"><a href="#cb223-5" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb223-6"><a href="#cb223-6" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== プロフィール表示 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb223-7"><a href="#cb223-7" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;名前: 田中太郎</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb223-8"><a href="#cb223-8" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;年齢: 25歳</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb223-9"><a href="#cb223-9" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;職業: エンジニア</span><span class="sc">\n\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb223-10"><a href="#cb223-10" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb223-11"><a href="#cb223-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb223-12"><a href="#cb223-12" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> show_settings<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb223-13"><a href="#cb223-13" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb223-14"><a href="#cb223-14" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== 設定画面 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb223-15"><a href="#cb223-15" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;言語: 日本語</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb223-16"><a href="#cb223-16" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;テーマ: ダーク</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb223-17"><a href="#cb223-17" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;通知: ON</span><span class="sc">\n\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb223-18"><a href="#cb223-18" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb223-19"><a href="#cb223-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb223-20"><a href="#cb223-20" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> show_help<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb223-21"><a href="#cb223-21" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb223-22"><a href="#cb223-22" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== ヘルプ ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb223-23"><a href="#cb223-23" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;このアプリケーションの使用方法:</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb223-24"><a href="#cb223-24" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;1. メニューから項目を選択</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb223-25"><a href="#cb223-25" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;2. 処理が実行されます</span><span class="sc">\n\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb223-26"><a href="#cb223-26" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb223-27"><a href="#cb223-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb223-28"><a href="#cb223-28" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> exit_app<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb223-29"><a href="#cb223-29" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb223-30"><a href="#cb223-30" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;アプリケーションを終了します。</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb223-31"><a href="#cb223-31" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb223-32"><a href="#cb223-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb223-33"><a href="#cb223-33" aria-hidden="true" tabindex="-1"></a><span class="co">/* メニュー項目の構造体 */</span></span>
<span id="cb223-34"><a href="#cb223-34" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> MenuItem <span class="op">{</span></span>
<span id="cb223-35"><a href="#cb223-35" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> name<span class="op">[</span><span class="dv">20</span><span class="op">];</span></span>
<span id="cb223-36"><a href="#cb223-36" aria-hidden="true" tabindex="-1"></a>    <span class="dt">void</span> <span class="op">(*</span>handler<span class="op">)(</span><span class="dt">void</span><span class="op">);</span>  <span class="co">/* 関数ポインタ */</span></span>
<span id="cb223-37"><a href="#cb223-37" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb223-38"><a href="#cb223-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb223-39"><a href="#cb223-39" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb223-40"><a href="#cb223-40" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb223-41"><a href="#cb223-41" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* メニュー項目の定義 */</span></span>
<span id="cb223-42"><a href="#cb223-42" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> MenuItem menu<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb223-43"><a href="#cb223-43" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span><span class="st">&quot;プロフィール&quot;</span><span class="op">,</span> show_profile<span class="op">},</span></span>
<span id="cb223-44"><a href="#cb223-44" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span><span class="st">&quot;設定&quot;</span><span class="op">,</span> show_settings<span class="op">},</span></span>
<span id="cb223-45"><a href="#cb223-45" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span><span class="st">&quot;ヘルプ&quot;</span><span class="op">,</span> show_help<span class="op">},</span></span>
<span id="cb223-46"><a href="#cb223-46" aria-hidden="true" tabindex="-1"></a>        <span class="op">{</span><span class="st">&quot;終了&quot;</span><span class="op">,</span> exit_app<span class="op">}</span></span>
<span id="cb223-47"><a href="#cb223-47" aria-hidden="true" tabindex="-1"></a>    <span class="op">};</span></span>
<span id="cb223-48"><a href="#cb223-48" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb223-49"><a href="#cb223-49" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> menu_size <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>menu<span class="op">)</span> <span class="op">/</span> <span class="kw">sizeof</span><span class="op">(</span>menu<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb223-50"><a href="#cb223-50" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> choice<span class="op">;</span></span>
<span id="cb223-51"><a href="#cb223-51" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb223-52"><a href="#cb223-52" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb223-53"><a href="#cb223-53" aria-hidden="true" tabindex="-1"></a>    <span class="cf">do</span> <span class="op">{</span></span>
<span id="cb223-54"><a href="#cb223-54" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;=== メインメニュー ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb223-55"><a href="#cb223-55" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> menu_size<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb223-56"><a href="#cb223-56" aria-hidden="true" tabindex="-1"></a>            printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st">. </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> i <span class="op">+</span> <span class="dv">1</span><span class="op">,</span> menu<span class="op">[</span>i<span class="op">].</span>name<span class="op">);</span></span>
<span id="cb223-57"><a href="#cb223-57" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb223-58"><a href="#cb223-58" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;選択してください (1-</span><span class="sc">%d</span><span class="st">): &quot;</span><span class="op">,</span> menu_size<span class="op">);</span></span>
<span id="cb223-59"><a href="#cb223-59" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb223-60"><a href="#cb223-60" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>scanf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st">&quot;</span><span class="op">,</span> <span class="op">&amp;</span>choice<span class="op">)</span> <span class="op">==</span> <span class="dv">1</span> <span class="op">&amp;&amp;</span> choice <span class="op">&gt;=</span> <span class="dv">1</span> <span class="op">&amp;&amp;</span> choice <span class="op">&lt;=</span> menu_size<span class="op">)</span> <span class="op">{</span></span>
<span id="cb223-61"><a href="#cb223-61" aria-hidden="true" tabindex="-1"></a>            printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb223-62"><a href="#cb223-62" aria-hidden="true" tabindex="-1"></a>            menu<span class="op">[</span>choice <span class="op">-</span> <span class="dv">1</span><span class="op">].</span>handler<span class="op">();</span>  <span class="co">/* 関数ポインタを使って実行 */</span></span>
<span id="cb223-63"><a href="#cb223-63" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb223-64"><a href="#cb223-64" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>choice <span class="op">==</span> menu_size<span class="op">)</span> <span class="op">{</span>  <span class="co">/* 終了が選択された場合 */</span></span>
<span id="cb223-65"><a href="#cb223-65" aria-hidden="true" tabindex="-1"></a>                <span class="cf">break</span><span class="op">;</span></span>
<span id="cb223-66"><a href="#cb223-66" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb223-67"><a href="#cb223-67" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb223-68"><a href="#cb223-68" aria-hidden="true" tabindex="-1"></a>            printf<span class="op">(</span><span class="st">&quot;無効な選択です。</span><span class="sc">\n\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb223-69"><a href="#cb223-69" aria-hidden="true" tabindex="-1"></a>            <span class="co">/* 入力バッファをクリア */</span></span>
<span id="cb223-70"><a href="#cb223-70" aria-hidden="true" tabindex="-1"></a>            <span class="cf">while</span> <span class="op">(</span>getchar<span class="op">()</span> <span class="op">!=</span> <span class="ch">&#39;</span><span class="sc">\n</span><span class="ch">&#39;</span><span class="op">);</span></span>
<span id="cb223-71"><a href="#cb223-71" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb223-72"><a href="#cb223-72" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span> <span class="cf">while</span> <span class="op">(</span><span class="dv">1</span><span class="op">);</span></span>
<span id="cb223-73"><a href="#cb223-73" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb223-74"><a href="#cb223-74" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb223-75"><a href="#cb223-75" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 data-number="13.3.3" id="コールバック関数"><span
class="header-section-number">13.3.3</span> コールバック関数 🔄</h3>
<p>コールバック関数は他の関数に引数として渡される関数です。</p>
<h4 data-number="13.3.3.1" id="配列処理のコールバック"><span
class="header-section-number">13.3.3.1</span>
配列処理のコールバック</h4>
<div class="sourceCode" id="cb224"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb224-1"><a href="#cb224-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb224-2"><a href="#cb224-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb224-3"><a href="#cb224-3" aria-hidden="true" tabindex="-1"></a><span class="co">/* 配列の各要素に適用する関数群 */</span></span>
<span id="cb224-4"><a href="#cb224-4" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> square<span class="op">(</span><span class="dt">int</span> x<span class="op">)</span> <span class="op">{</span> <span class="cf">return</span> x <span class="op">*</span> x<span class="op">;</span> <span class="op">}</span></span>
<span id="cb224-5"><a href="#cb224-5" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> cube<span class="op">(</span><span class="dt">int</span> x<span class="op">)</span> <span class="op">{</span> <span class="cf">return</span> x <span class="op">*</span> x <span class="op">*</span> x<span class="op">;</span> <span class="op">}</span></span>
<span id="cb224-6"><a href="#cb224-6" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> double_value<span class="op">(</span><span class="dt">int</span> x<span class="op">)</span> <span class="op">{</span> <span class="cf">return</span> x <span class="op">*</span> <span class="dv">2</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb224-7"><a href="#cb224-7" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> increment<span class="op">(</span><span class="dt">int</span> x<span class="op">)</span> <span class="op">{</span> <span class="cf">return</span> x <span class="op">+</span> <span class="dv">1</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb224-8"><a href="#cb224-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb224-9"><a href="#cb224-9" aria-hidden="true" tabindex="-1"></a><span class="co">/* 配列の各要素に関数を適用 */</span></span>
<span id="cb224-10"><a href="#cb224-10" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> apply_to_array<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> size<span class="op">,</span> <span class="dt">int</span> <span class="op">(*</span>func<span class="op">)(</span><span class="dt">int</span><span class="op">))</span></span>
<span id="cb224-11"><a href="#cb224-11" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb224-12"><a href="#cb224-12" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb224-13"><a href="#cb224-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> size<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb224-14"><a href="#cb224-14" aria-hidden="true" tabindex="-1"></a>        arr<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> func<span class="op">(</span>arr<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb224-15"><a href="#cb224-15" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb224-16"><a href="#cb224-16" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb224-17"><a href="#cb224-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb224-18"><a href="#cb224-18" aria-hidden="true" tabindex="-1"></a><span class="co">/* 配列を表示する関数 */</span></span>
<span id="cb224-19"><a href="#cb224-19" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> print_array<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> size<span class="op">,</span> <span class="dt">const</span> <span class="dt">char</span><span class="op">*</span> label<span class="op">)</span></span>
<span id="cb224-20"><a href="#cb224-20" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb224-21"><a href="#cb224-21" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb224-22"><a href="#cb224-22" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%s</span><span class="st">: &quot;</span><span class="op">,</span> label<span class="op">);</span></span>
<span id="cb224-23"><a href="#cb224-23" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> size<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb224-24"><a href="#cb224-24" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st"> &quot;</span><span class="op">,</span> arr<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb224-25"><a href="#cb224-25" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb224-26"><a href="#cb224-26" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb224-27"><a href="#cb224-27" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb224-28"><a href="#cb224-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb224-29"><a href="#cb224-29" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb224-30"><a href="#cb224-30" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb224-31"><a href="#cb224-31" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> numbers<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">1</span><span class="op">,</span> <span class="dv">2</span><span class="op">,</span> <span class="dv">3</span><span class="op">,</span> <span class="dv">4</span><span class="op">,</span> <span class="dv">5</span><span class="op">};</span></span>
<span id="cb224-32"><a href="#cb224-32" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> size <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>numbers<span class="op">)</span> <span class="op">/</span> <span class="kw">sizeof</span><span class="op">(</span>numbers<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb224-33"><a href="#cb224-33" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> temp<span class="op">[</span><span class="dv">5</span><span class="op">];</span></span>
<span id="cb224-34"><a href="#cb224-34" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb224-35"><a href="#cb224-35" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb224-36"><a href="#cb224-36" aria-hidden="true" tabindex="-1"></a>    print_array<span class="op">(</span>numbers<span class="op">,</span> size<span class="op">,</span> <span class="st">&quot;元の配列&quot;</span><span class="op">);</span></span>
<span id="cb224-37"><a href="#cb224-37" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb224-38"><a href="#cb224-38" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 2乗を適用 */</span></span>
<span id="cb224-39"><a href="#cb224-39" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> size<span class="op">;</span> i<span class="op">++)</span> temp<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> numbers<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb224-40"><a href="#cb224-40" aria-hidden="true" tabindex="-1"></a>    apply_to_array<span class="op">(</span>temp<span class="op">,</span> size<span class="op">,</span> square<span class="op">);</span></span>
<span id="cb224-41"><a href="#cb224-41" aria-hidden="true" tabindex="-1"></a>    print_array<span class="op">(</span>temp<span class="op">,</span> size<span class="op">,</span> <span class="st">&quot;2乗後&quot;</span><span class="op">);</span></span>
<span id="cb224-42"><a href="#cb224-42" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb224-43"><a href="#cb224-43" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 3乗を適用 */</span></span>
<span id="cb224-44"><a href="#cb224-44" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> size<span class="op">;</span> i<span class="op">++)</span> temp<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> numbers<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb224-45"><a href="#cb224-45" aria-hidden="true" tabindex="-1"></a>    apply_to_array<span class="op">(</span>temp<span class="op">,</span> size<span class="op">,</span> cube<span class="op">);</span></span>
<span id="cb224-46"><a href="#cb224-46" aria-hidden="true" tabindex="-1"></a>    print_array<span class="op">(</span>temp<span class="op">,</span> size<span class="op">,</span> <span class="st">&quot;3乗後&quot;</span><span class="op">);</span></span>
<span id="cb224-47"><a href="#cb224-47" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb224-48"><a href="#cb224-48" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 2倍を適用 */</span></span>
<span id="cb224-49"><a href="#cb224-49" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> size<span class="op">;</span> i<span class="op">++)</span> temp<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> numbers<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb224-50"><a href="#cb224-50" aria-hidden="true" tabindex="-1"></a>    apply_to_array<span class="op">(</span>temp<span class="op">,</span> size<span class="op">,</span> double_value<span class="op">);</span></span>
<span id="cb224-51"><a href="#cb224-51" aria-hidden="true" tabindex="-1"></a>    print_array<span class="op">(</span>temp<span class="op">,</span> size<span class="op">,</span> <span class="st">&quot;2倍後&quot;</span><span class="op">);</span></span>
<span id="cb224-52"><a href="#cb224-52" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb224-53"><a href="#cb224-53" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* インクリメントを適用 */</span></span>
<span id="cb224-54"><a href="#cb224-54" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> size<span class="op">;</span> i<span class="op">++)</span> temp<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> numbers<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb224-55"><a href="#cb224-55" aria-hidden="true" tabindex="-1"></a>    apply_to_array<span class="op">(</span>temp<span class="op">,</span> size<span class="op">,</span> increment<span class="op">);</span></span>
<span id="cb224-56"><a href="#cb224-56" aria-hidden="true" tabindex="-1"></a>    print_array<span class="op">(</span>temp<span class="op">,</span> size<span class="op">,</span> <span class="st">&quot;インクリメント後&quot;</span><span class="op">);</span></span>
<span id="cb224-57"><a href="#cb224-57" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb224-58"><a href="#cb224-58" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb224-59"><a href="#cb224-59" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h4 data-number="13.3.3.2" id="ソートのコールバック比較関数"><span
class="header-section-number">13.3.3.2</span>
ソートのコールバック（比較関数）</h4>
<div class="sourceCode" id="cb225"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb225-1"><a href="#cb225-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb225-2"><a href="#cb225-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;string.h&gt;</span></span>
<span id="cb225-3"><a href="#cb225-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb225-4"><a href="#cb225-4" aria-hidden="true" tabindex="-1"></a><span class="co">/* 比較関数の型定義 */</span></span>
<span id="cb225-5"><a href="#cb225-5" aria-hidden="true" tabindex="-1"></a><span class="kw">typedef</span> <span class="dt">int</span> <span class="op">(*</span>compare_func_t<span class="op">)(</span><span class="dt">const</span> <span class="dt">void</span> <span class="op">*</span>a<span class="op">,</span> <span class="dt">const</span> <span class="dt">void</span> <span class="op">*</span>b<span class="op">);</span></span>
<span id="cb225-6"><a href="#cb225-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb225-7"><a href="#cb225-7" aria-hidden="true" tabindex="-1"></a><span class="co">/* 整数の比較関数 */</span></span>
<span id="cb225-8"><a href="#cb225-8" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> compare_int_asc<span class="op">(</span><span class="dt">const</span> <span class="dt">void</span> <span class="op">*</span>a<span class="op">,</span> <span class="dt">const</span> <span class="dt">void</span> <span class="op">*</span>b<span class="op">)</span></span>
<span id="cb225-9"><a href="#cb225-9" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb225-10"><a href="#cb225-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> ia <span class="op">=</span> <span class="op">*(</span><span class="dt">const</span> <span class="dt">int</span><span class="op">*)</span>a<span class="op">;</span></span>
<span id="cb225-11"><a href="#cb225-11" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> ib <span class="op">=</span> <span class="op">*(</span><span class="dt">const</span> <span class="dt">int</span><span class="op">*)</span>b<span class="op">;</span></span>
<span id="cb225-12"><a href="#cb225-12" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">(</span>ia <span class="op">&gt;</span> ib<span class="op">)</span> <span class="op">-</span> <span class="op">(</span>ia <span class="op">&lt;</span> ib<span class="op">);</span>  <span class="co">/* 昇順 */</span></span>
<span id="cb225-13"><a href="#cb225-13" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb225-14"><a href="#cb225-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb225-15"><a href="#cb225-15" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> compare_int_desc<span class="op">(</span><span class="dt">const</span> <span class="dt">void</span> <span class="op">*</span>a<span class="op">,</span> <span class="dt">const</span> <span class="dt">void</span> <span class="op">*</span>b<span class="op">)</span></span>
<span id="cb225-16"><a href="#cb225-16" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb225-17"><a href="#cb225-17" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> ia <span class="op">=</span> <span class="op">*(</span><span class="dt">const</span> <span class="dt">int</span><span class="op">*)</span>a<span class="op">;</span></span>
<span id="cb225-18"><a href="#cb225-18" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> ib <span class="op">=</span> <span class="op">*(</span><span class="dt">const</span> <span class="dt">int</span><span class="op">*)</span>b<span class="op">;</span></span>
<span id="cb225-19"><a href="#cb225-19" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">(</span>ib <span class="op">&gt;</span> ia<span class="op">)</span> <span class="op">-</span> <span class="op">(</span>ib <span class="op">&lt;</span> ia<span class="op">);</span>  <span class="co">/* 降順 */</span></span>
<span id="cb225-20"><a href="#cb225-20" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb225-21"><a href="#cb225-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb225-22"><a href="#cb225-22" aria-hidden="true" tabindex="-1"></a><span class="co">/* 簡単なバブルソート（コールバック版） */</span></span>
<span id="cb225-23"><a href="#cb225-23" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> bubble_sort<span class="op">(</span><span class="dt">void</span> <span class="op">*</span>base<span class="op">,</span> <span class="dt">size_t</span> num<span class="op">,</span> <span class="dt">size_t</span> size<span class="op">,</span> </span>
<span id="cb225-24"><a href="#cb225-24" aria-hidden="true" tabindex="-1"></a>                 <span class="dt">int</span> <span class="op">(*</span>compare<span class="op">)(</span><span class="dt">const</span> <span class="dt">void</span> <span class="op">*,</span> <span class="dt">const</span> <span class="dt">void</span> <span class="op">*))</span></span>
<span id="cb225-25"><a href="#cb225-25" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb225-26"><a href="#cb225-26" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> <span class="op">*</span>arr <span class="op">=</span> <span class="op">(</span><span class="dt">char</span><span class="op">*)</span>base<span class="op">;</span></span>
<span id="cb225-27"><a href="#cb225-27" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> <span class="op">*</span>temp <span class="op">=</span> malloc<span class="op">(</span>size<span class="op">);</span></span>
<span id="cb225-28"><a href="#cb225-28" aria-hidden="true" tabindex="-1"></a>    <span class="dt">size_t</span> i<span class="op">,</span> j<span class="op">;</span></span>
<span id="cb225-29"><a href="#cb225-29" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb225-30"><a href="#cb225-30" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>temp <span class="op">==</span> NULL<span class="op">)</span> <span class="cf">return</span><span class="op">;</span></span>
<span id="cb225-31"><a href="#cb225-31" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb225-32"><a href="#cb225-32" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> num <span class="op">-</span> <span class="dv">1</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb225-33"><a href="#cb225-33" aria-hidden="true" tabindex="-1"></a>        <span class="cf">for</span> <span class="op">(</span>j <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> j <span class="op">&lt;</span> num <span class="op">-</span> <span class="dv">1</span> <span class="op">-</span> i<span class="op">;</span> j<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb225-34"><a href="#cb225-34" aria-hidden="true" tabindex="-1"></a>            <span class="dt">void</span> <span class="op">*</span>elem1 <span class="op">=</span> arr <span class="op">+</span> j <span class="op">*</span> size<span class="op">;</span></span>
<span id="cb225-35"><a href="#cb225-35" aria-hidden="true" tabindex="-1"></a>            <span class="dt">void</span> <span class="op">*</span>elem2 <span class="op">=</span> arr <span class="op">+</span> <span class="op">(</span>j <span class="op">+</span> <span class="dv">1</span><span class="op">)</span> <span class="op">*</span> size<span class="op">;</span></span>
<span id="cb225-36"><a href="#cb225-36" aria-hidden="true" tabindex="-1"></a>            </span>
<span id="cb225-37"><a href="#cb225-37" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>compare<span class="op">(</span>elem1<span class="op">,</span> elem2<span class="op">)</span> <span class="op">&gt;</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb225-38"><a href="#cb225-38" aria-hidden="true" tabindex="-1"></a>                <span class="co">/* 要素を交換 */</span></span>
<span id="cb225-39"><a href="#cb225-39" aria-hidden="true" tabindex="-1"></a>                memcpy<span class="op">(</span>temp<span class="op">,</span> elem1<span class="op">,</span> size<span class="op">);</span></span>
<span id="cb225-40"><a href="#cb225-40" aria-hidden="true" tabindex="-1"></a>                memcpy<span class="op">(</span>elem1<span class="op">,</span> elem2<span class="op">,</span> size<span class="op">);</span></span>
<span id="cb225-41"><a href="#cb225-41" aria-hidden="true" tabindex="-1"></a>                memcpy<span class="op">(</span>elem2<span class="op">,</span> temp<span class="op">,</span> size<span class="op">);</span></span>
<span id="cb225-42"><a href="#cb225-42" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb225-43"><a href="#cb225-43" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb225-44"><a href="#cb225-44" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb225-45"><a href="#cb225-45" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb225-46"><a href="#cb225-46" aria-hidden="true" tabindex="-1"></a>    free<span class="op">(</span>temp<span class="op">);</span></span>
<span id="cb225-47"><a href="#cb225-47" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb225-48"><a href="#cb225-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb225-49"><a href="#cb225-49" aria-hidden="true" tabindex="-1"></a><span class="co">/* 配列を表示 */</span></span>
<span id="cb225-50"><a href="#cb225-50" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> print_int_array<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> size<span class="op">,</span> <span class="dt">const</span> <span class="dt">char</span><span class="op">*</span> label<span class="op">)</span></span>
<span id="cb225-51"><a href="#cb225-51" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb225-52"><a href="#cb225-52" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb225-53"><a href="#cb225-53" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%s</span><span class="st">: &quot;</span><span class="op">,</span> label<span class="op">);</span></span>
<span id="cb225-54"><a href="#cb225-54" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> size<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb225-55"><a href="#cb225-55" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%d</span><span class="st"> &quot;</span><span class="op">,</span> arr<span class="op">[</span>i<span class="op">]);</span></span>
<span id="cb225-56"><a href="#cb225-56" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb225-57"><a href="#cb225-57" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb225-58"><a href="#cb225-58" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb225-59"><a href="#cb225-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb225-60"><a href="#cb225-60" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb225-61"><a href="#cb225-61" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb225-62"><a href="#cb225-62" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> numbers<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">64</span><span class="op">,</span> <span class="dv">34</span><span class="op">,</span> <span class="dv">25</span><span class="op">,</span> <span class="dv">12</span><span class="op">,</span> <span class="dv">22</span><span class="op">,</span> <span class="dv">11</span><span class="op">,</span> <span class="dv">90</span><span class="op">,</span> <span class="dv">5</span><span class="op">};</span></span>
<span id="cb225-63"><a href="#cb225-63" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> size <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>numbers<span class="op">)</span> <span class="op">/</span> <span class="kw">sizeof</span><span class="op">(</span>numbers<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb225-64"><a href="#cb225-64" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> temp<span class="op">[</span><span class="dv">8</span><span class="op">];</span></span>
<span id="cb225-65"><a href="#cb225-65" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb225-66"><a href="#cb225-66" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb225-67"><a href="#cb225-67" aria-hidden="true" tabindex="-1"></a>    print_int_array<span class="op">(</span>numbers<span class="op">,</span> size<span class="op">,</span> <span class="st">&quot;元の配列&quot;</span><span class="op">);</span></span>
<span id="cb225-68"><a href="#cb225-68" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb225-69"><a href="#cb225-69" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 昇順ソート */</span></span>
<span id="cb225-70"><a href="#cb225-70" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> size<span class="op">;</span> i<span class="op">++)</span> temp<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> numbers<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb225-71"><a href="#cb225-71" aria-hidden="true" tabindex="-1"></a>    bubble_sort<span class="op">(</span>temp<span class="op">,</span> size<span class="op">,</span> <span class="kw">sizeof</span><span class="op">(</span><span class="dt">int</span><span class="op">),</span> compare_int_asc<span class="op">);</span></span>
<span id="cb225-72"><a href="#cb225-72" aria-hidden="true" tabindex="-1"></a>    print_int_array<span class="op">(</span>temp<span class="op">,</span> size<span class="op">,</span> <span class="st">&quot;昇順ソート&quot;</span><span class="op">);</span></span>
<span id="cb225-73"><a href="#cb225-73" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb225-74"><a href="#cb225-74" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 降順ソート */</span></span>
<span id="cb225-75"><a href="#cb225-75" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> size<span class="op">;</span> i<span class="op">++)</span> temp<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> numbers<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb225-76"><a href="#cb225-76" aria-hidden="true" tabindex="-1"></a>    bubble_sort<span class="op">(</span>temp<span class="op">,</span> size<span class="op">,</span> <span class="kw">sizeof</span><span class="op">(</span><span class="dt">int</span><span class="op">),</span> compare_int_desc<span class="op">);</span></span>
<span id="cb225-77"><a href="#cb225-77" aria-hidden="true" tabindex="-1"></a>    print_int_array<span class="op">(</span>temp<span class="op">,</span> size<span class="op">,</span> <span class="st">&quot;降順ソート&quot;</span><span class="op">);</span></span>
<span id="cb225-78"><a href="#cb225-78" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb225-79"><a href="#cb225-79" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb225-80"><a href="#cb225-80" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 data-number="13.3.4" id="関数ポインタ配列"><span
class="header-section-number">13.3.4</span> 関数ポインタ配列 📚</h3>
<p>関数ポインタの配列を使って、複数の関数を効率的に管理できます。</p>
<h4 data-number="13.3.4.1" id="演算関数配列"><span
class="header-section-number">13.3.4.1</span> 演算関数配列</h4>
<div class="sourceCode" id="cb226"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb226-1"><a href="#cb226-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb226-2"><a href="#cb226-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb226-3"><a href="#cb226-3" aria-hidden="true" tabindex="-1"></a><span class="co">/* 演算関数群 */</span></span>
<span id="cb226-4"><a href="#cb226-4" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> add_func<span class="op">(</span><span class="dt">int</span> a<span class="op">,</span> <span class="dt">int</span> b<span class="op">)</span> <span class="op">{</span> <span class="cf">return</span> a <span class="op">+</span> b<span class="op">;</span> <span class="op">}</span></span>
<span id="cb226-5"><a href="#cb226-5" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> sub_func<span class="op">(</span><span class="dt">int</span> a<span class="op">,</span> <span class="dt">int</span> b<span class="op">)</span> <span class="op">{</span> <span class="cf">return</span> a <span class="op">-</span> b<span class="op">;</span> <span class="op">}</span></span>
<span id="cb226-6"><a href="#cb226-6" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> mul_func<span class="op">(</span><span class="dt">int</span> a<span class="op">,</span> <span class="dt">int</span> b<span class="op">)</span> <span class="op">{</span> <span class="cf">return</span> a <span class="op">*</span> b<span class="op">;</span> <span class="op">}</span></span>
<span id="cb226-7"><a href="#cb226-7" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> div_func<span class="op">(</span><span class="dt">int</span> a<span class="op">,</span> <span class="dt">int</span> b<span class="op">)</span> <span class="op">{</span> <span class="cf">return</span> b <span class="op">!=</span> <span class="dv">0</span> <span class="op">?</span> a <span class="op">/</span> b <span class="op">:</span> <span class="dv">0</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb226-8"><a href="#cb226-8" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> mod_func<span class="op">(</span><span class="dt">int</span> a<span class="op">,</span> <span class="dt">int</span> b<span class="op">)</span> <span class="op">{</span> <span class="cf">return</span> b <span class="op">!=</span> <span class="dv">0</span> <span class="op">?</span> a <span class="op">%</span> b <span class="op">:</span> <span class="dv">0</span><span class="op">;</span> <span class="op">}</span></span>
<span id="cb226-9"><a href="#cb226-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb226-10"><a href="#cb226-10" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb226-11"><a href="#cb226-11" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb226-12"><a href="#cb226-12" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 関数ポインタ配列の宣言と初期化 */</span></span>
<span id="cb226-13"><a href="#cb226-13" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> <span class="op">(*</span>operations<span class="op">[])(</span><span class="dt">int</span><span class="op">,</span> <span class="dt">int</span><span class="op">)</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb226-14"><a href="#cb226-14" aria-hidden="true" tabindex="-1"></a>        add_func<span class="op">,</span>  <span class="co">/* インデックス0: 加算 */</span></span>
<span id="cb226-15"><a href="#cb226-15" aria-hidden="true" tabindex="-1"></a>        sub_func<span class="op">,</span>  <span class="co">/* インデックス1: 減算 */</span></span>
<span id="cb226-16"><a href="#cb226-16" aria-hidden="true" tabindex="-1"></a>        mul_func<span class="op">,</span>  <span class="co">/* インデックス2: 乗算 */</span></span>
<span id="cb226-17"><a href="#cb226-17" aria-hidden="true" tabindex="-1"></a>        div_func<span class="op">,</span>  <span class="co">/* インデックス3: 除算 */</span></span>
<span id="cb226-18"><a href="#cb226-18" aria-hidden="true" tabindex="-1"></a>        mod_func   <span class="co">/* インデックス4: 剰余 */</span></span>
<span id="cb226-19"><a href="#cb226-19" aria-hidden="true" tabindex="-1"></a>    <span class="op">};</span></span>
<span id="cb226-20"><a href="#cb226-20" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb226-21"><a href="#cb226-21" aria-hidden="true" tabindex="-1"></a>    <span class="dt">const</span> <span class="dt">char</span><span class="op">*</span> op_names<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="st">&quot;加算&quot;</span><span class="op">,</span> <span class="st">&quot;減算&quot;</span><span class="op">,</span> <span class="st">&quot;乗算&quot;</span><span class="op">,</span> <span class="st">&quot;除算&quot;</span><span class="op">,</span> <span class="st">&quot;剰余&quot;</span><span class="op">};</span></span>
<span id="cb226-22"><a href="#cb226-22" aria-hidden="true" tabindex="-1"></a>    <span class="dt">const</span> <span class="dt">char</span><span class="op">*</span> op_symbols<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="st">&quot;+&quot;</span><span class="op">,</span> <span class="st">&quot;-&quot;</span><span class="op">,</span> <span class="st">&quot;*&quot;</span><span class="op">,</span> <span class="st">&quot;/&quot;</span><span class="op">,</span> <span class="st">&quot;%&quot;</span><span class="op">};</span></span>
<span id="cb226-23"><a href="#cb226-23" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> num_ops <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>operations<span class="op">)</span> <span class="op">/</span> <span class="kw">sizeof</span><span class="op">(</span>operations<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb226-24"><a href="#cb226-24" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> a <span class="op">=</span> <span class="dv">20</span><span class="op">,</span> b <span class="op">=</span> <span class="dv">6</span><span class="op">;</span></span>
<span id="cb226-25"><a href="#cb226-25" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb226-26"><a href="#cb226-26" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb226-27"><a href="#cb226-27" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;数値: a = </span><span class="sc">%d</span><span class="st">, b = </span><span class="sc">%d\n\n</span><span class="st">&quot;</span><span class="op">,</span> a<span class="op">,</span> b<span class="op">);</span></span>
<span id="cb226-28"><a href="#cb226-28" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb226-29"><a href="#cb226-29" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* すべての演算を実行 */</span></span>
<span id="cb226-30"><a href="#cb226-30" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> num_ops<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb226-31"><a href="#cb226-31" aria-hidden="true" tabindex="-1"></a>        <span class="dt">int</span> result <span class="op">=</span> operations<span class="op">[</span>i<span class="op">](</span>a<span class="op">,</span> b<span class="op">);</span></span>
<span id="cb226-32"><a href="#cb226-32" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%s</span><span class="st"> (</span><span class="sc">%s</span><span class="st">): </span><span class="sc">%d</span><span class="st"> </span><span class="sc">%s</span><span class="st"> </span><span class="sc">%d</span><span class="st"> = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> </span>
<span id="cb226-33"><a href="#cb226-33" aria-hidden="true" tabindex="-1"></a>               op_names<span class="op">[</span>i<span class="op">],</span> op_symbols<span class="op">[</span>i<span class="op">],</span> a<span class="op">,</span> op_symbols<span class="op">[</span>i<span class="op">],</span> b<span class="op">,</span> result<span class="op">);</span></span>
<span id="cb226-34"><a href="#cb226-34" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb226-35"><a href="#cb226-35" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb226-36"><a href="#cb226-36" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 特定の演算だけ実行 */</span></span>
<span id="cb226-37"><a href="#cb226-37" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">特定の演算:</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb226-38"><a href="#cb226-38" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;乗算結果: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> operations<span class="op">[</span><span class="dv">2</span><span class="op">](</span>a<span class="op">,</span> b<span class="op">));</span>  <span class="co">/* mul_func */</span></span>
<span id="cb226-39"><a href="#cb226-39" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;除算結果: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> operations<span class="op">[</span><span class="dv">3</span><span class="op">](</span>a<span class="op">,</span> b<span class="op">));</span>  <span class="co">/* div_func */</span></span>
<span id="cb226-40"><a href="#cb226-40" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb226-41"><a href="#cb226-41" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb226-42"><a href="#cb226-42" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h4 data-number="13.3.4.2" id="状態機械ステートマシン"><span
class="header-section-number">13.3.4.2</span>
状態機械（ステートマシン）</h4>
<div class="sourceCode" id="cb227"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb227-1"><a href="#cb227-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb227-2"><a href="#cb227-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb227-3"><a href="#cb227-3" aria-hidden="true" tabindex="-1"></a><span class="co">/* 状態の定義 */</span></span>
<span id="cb227-4"><a href="#cb227-4" aria-hidden="true" tabindex="-1"></a><span class="kw">typedef</span> <span class="kw">enum</span> <span class="op">{</span></span>
<span id="cb227-5"><a href="#cb227-5" aria-hidden="true" tabindex="-1"></a>    STATE_IDLE<span class="op">,</span></span>
<span id="cb227-6"><a href="#cb227-6" aria-hidden="true" tabindex="-1"></a>    STATE_RUNNING<span class="op">,</span></span>
<span id="cb227-7"><a href="#cb227-7" aria-hidden="true" tabindex="-1"></a>    STATE_PAUSED<span class="op">,</span></span>
<span id="cb227-8"><a href="#cb227-8" aria-hidden="true" tabindex="-1"></a>    STATE_STOPPED<span class="op">,</span></span>
<span id="cb227-9"><a href="#cb227-9" aria-hidden="true" tabindex="-1"></a>    STATE_COUNT</span>
<span id="cb227-10"><a href="#cb227-10" aria-hidden="true" tabindex="-1"></a><span class="op">}</span> State<span class="op">;</span></span>
<span id="cb227-11"><a href="#cb227-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb227-12"><a href="#cb227-12" aria-hidden="true" tabindex="-1"></a><span class="co">/* 状態処理関数の宣言 */</span></span>
<span id="cb227-13"><a href="#cb227-13" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> handle_idle<span class="op">(</span><span class="dt">void</span><span class="op">);</span></span>
<span id="cb227-14"><a href="#cb227-14" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> handle_running<span class="op">(</span><span class="dt">void</span><span class="op">);</span></span>
<span id="cb227-15"><a href="#cb227-15" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> handle_paused<span class="op">(</span><span class="dt">void</span><span class="op">);</span></span>
<span id="cb227-16"><a href="#cb227-16" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> handle_stopped<span class="op">(</span><span class="dt">void</span><span class="op">);</span></span>
<span id="cb227-17"><a href="#cb227-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb227-18"><a href="#cb227-18" aria-hidden="true" tabindex="-1"></a><span class="co">/* 現在の状態 */</span></span>
<span id="cb227-19"><a href="#cb227-19" aria-hidden="true" tabindex="-1"></a><span class="dt">static</span> State current_state <span class="op">=</span> STATE_IDLE<span class="op">;</span></span>
<span id="cb227-20"><a href="#cb227-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb227-21"><a href="#cb227-21" aria-hidden="true" tabindex="-1"></a><span class="co">/* 状態処理関数配列 */</span></span>
<span id="cb227-22"><a href="#cb227-22" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> <span class="op">(*</span>state_handlers<span class="op">[])(</span><span class="dt">void</span><span class="op">)</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb227-23"><a href="#cb227-23" aria-hidden="true" tabindex="-1"></a>    handle_idle<span class="op">,</span>     <span class="co">/* STATE_IDLE */</span></span>
<span id="cb227-24"><a href="#cb227-24" aria-hidden="true" tabindex="-1"></a>    handle_running<span class="op">,</span>  <span class="co">/* STATE_RUNNING */</span></span>
<span id="cb227-25"><a href="#cb227-25" aria-hidden="true" tabindex="-1"></a>    handle_paused<span class="op">,</span>   <span class="co">/* STATE_PAUSED */</span></span>
<span id="cb227-26"><a href="#cb227-26" aria-hidden="true" tabindex="-1"></a>    handle_stopped   <span class="co">/* STATE_STOPPED */</span></span>
<span id="cb227-27"><a href="#cb227-27" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb227-28"><a href="#cb227-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb227-29"><a href="#cb227-29" aria-hidden="true" tabindex="-1"></a><span class="dt">const</span> <span class="dt">char</span><span class="op">*</span> state_names<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb227-30"><a href="#cb227-30" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;待機中&quot;</span><span class="op">,</span> <span class="st">&quot;実行中&quot;</span><span class="op">,</span> <span class="st">&quot;一時停止&quot;</span><span class="op">,</span> <span class="st">&quot;停止中&quot;</span></span>
<span id="cb227-31"><a href="#cb227-31" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb227-32"><a href="#cb227-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb227-33"><a href="#cb227-33" aria-hidden="true" tabindex="-1"></a><span class="co">/* 各状態の処理関数 */</span></span>
<span id="cb227-34"><a href="#cb227-34" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> handle_idle<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb227-35"><a href="#cb227-35" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb227-36"><a href="#cb227-36" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;[待機中] システムが待機状態です</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb227-37"><a href="#cb227-37" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;  利用可能なアクション: 開始(s)</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb227-38"><a href="#cb227-38" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb227-39"><a href="#cb227-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb227-40"><a href="#cb227-40" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> handle_running<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb227-41"><a href="#cb227-41" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb227-42"><a href="#cb227-42" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;[実行中] システムが動作しています</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb227-43"><a href="#cb227-43" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;  利用可能なアクション: 一時停止(p), 停止(q)</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb227-44"><a href="#cb227-44" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb227-45"><a href="#cb227-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb227-46"><a href="#cb227-46" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> handle_paused<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb227-47"><a href="#cb227-47" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb227-48"><a href="#cb227-48" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;[一時停止] システムが一時停止中です</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb227-49"><a href="#cb227-49" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;  利用可能なアクション: 再開(r), 停止(q)</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb227-50"><a href="#cb227-50" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb227-51"><a href="#cb227-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb227-52"><a href="#cb227-52" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> handle_stopped<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb227-53"><a href="#cb227-53" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb227-54"><a href="#cb227-54" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;[停止中] システムが停止しました</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb227-55"><a href="#cb227-55" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;  利用可能なアクション: リセット(reset)</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb227-56"><a href="#cb227-56" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb227-57"><a href="#cb227-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb227-58"><a href="#cb227-58" aria-hidden="true" tabindex="-1"></a><span class="co">/* 状態遷移関数 */</span></span>
<span id="cb227-59"><a href="#cb227-59" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> transition_to_state<span class="op">(</span>State new_state<span class="op">)</span></span>
<span id="cb227-60"><a href="#cb227-60" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb227-61"><a href="#cb227-61" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>new_state <span class="op">&gt;=</span> <span class="dv">0</span> <span class="op">&amp;&amp;</span> new_state <span class="op">&lt;</span> STATE_COUNT<span class="op">)</span> <span class="op">{</span></span>
<span id="cb227-62"><a href="#cb227-62" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;状態遷移: </span><span class="sc">%s</span><span class="st"> -&gt; </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> </span>
<span id="cb227-63"><a href="#cb227-63" aria-hidden="true" tabindex="-1"></a>               state_names<span class="op">[</span>current_state<span class="op">],</span> state_names<span class="op">[</span>new_state<span class="op">]);</span></span>
<span id="cb227-64"><a href="#cb227-64" aria-hidden="true" tabindex="-1"></a>        current_state <span class="op">=</span> new_state<span class="op">;</span></span>
<span id="cb227-65"><a href="#cb227-65" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb227-66"><a href="#cb227-66" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb227-67"><a href="#cb227-67" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb227-68"><a href="#cb227-68" aria-hidden="true" tabindex="-1"></a><span class="co">/* 現在の状態を処理 */</span></span>
<span id="cb227-69"><a href="#cb227-69" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> process_current_state<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb227-70"><a href="#cb227-70" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb227-71"><a href="#cb227-71" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>current_state <span class="op">&gt;=</span> <span class="dv">0</span> <span class="op">&amp;&amp;</span> current_state <span class="op">&lt;</span> STATE_COUNT<span class="op">)</span> <span class="op">{</span></span>
<span id="cb227-72"><a href="#cb227-72" aria-hidden="true" tabindex="-1"></a>        state_handlers<span class="op">[</span>current_state<span class="op">]();</span></span>
<span id="cb227-73"><a href="#cb227-73" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb227-74"><a href="#cb227-74" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb227-75"><a href="#cb227-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb227-76"><a href="#cb227-76" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb227-77"><a href="#cb227-77" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb227-78"><a href="#cb227-78" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> command<span class="op">[</span><span class="dv">10</span><span class="op">];</span></span>
<span id="cb227-79"><a href="#cb227-79" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb227-80"><a href="#cb227-80" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== ステートマシンデモ ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb227-81"><a href="#cb227-81" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;コマンド: s(start), p(pause), r(resume), q(quit), reset</span><span class="sc">\n\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb227-82"><a href="#cb227-82" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb227-83"><a href="#cb227-83" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span><span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb227-84"><a href="#cb227-84" aria-hidden="true" tabindex="-1"></a>        process_current_state<span class="op">();</span></span>
<span id="cb227-85"><a href="#cb227-85" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">コマンドを入力してください: &quot;</span><span class="op">);</span></span>
<span id="cb227-86"><a href="#cb227-86" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb227-87"><a href="#cb227-87" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>scanf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%9s</span><span class="st">&quot;</span><span class="op">,</span> command<span class="op">)</span> <span class="op">==</span> <span class="dv">1</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb227-88"><a href="#cb227-88" aria-hidden="true" tabindex="-1"></a>            <span class="cf">if</span> <span class="op">(</span>strcmp<span class="op">(</span>command<span class="op">,</span> <span class="st">&quot;s&quot;</span><span class="op">)</span> <span class="op">==</span> <span class="dv">0</span> <span class="op">&amp;&amp;</span> current_state <span class="op">==</span> STATE_IDLE<span class="op">)</span> <span class="op">{</span></span>
<span id="cb227-89"><a href="#cb227-89" aria-hidden="true" tabindex="-1"></a>                transition_to_state<span class="op">(</span>STATE_RUNNING<span class="op">);</span></span>
<span id="cb227-90"><a href="#cb227-90" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb227-91"><a href="#cb227-91" aria-hidden="true" tabindex="-1"></a>            <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>strcmp<span class="op">(</span>command<span class="op">,</span> <span class="st">&quot;p&quot;</span><span class="op">)</span> <span class="op">==</span> <span class="dv">0</span> <span class="op">&amp;&amp;</span> current_state <span class="op">==</span> STATE_RUNNING<span class="op">)</span> <span class="op">{</span></span>
<span id="cb227-92"><a href="#cb227-92" aria-hidden="true" tabindex="-1"></a>                transition_to_state<span class="op">(</span>STATE_PAUSED<span class="op">);</span></span>
<span id="cb227-93"><a href="#cb227-93" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb227-94"><a href="#cb227-94" aria-hidden="true" tabindex="-1"></a>            <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>strcmp<span class="op">(</span>command<span class="op">,</span> <span class="st">&quot;r&quot;</span><span class="op">)</span> <span class="op">==</span> <span class="dv">0</span> <span class="op">&amp;&amp;</span> current_state <span class="op">==</span> STATE_PAUSED<span class="op">)</span> <span class="op">{</span></span>
<span id="cb227-95"><a href="#cb227-95" aria-hidden="true" tabindex="-1"></a>                transition_to_state<span class="op">(</span>STATE_RUNNING<span class="op">);</span></span>
<span id="cb227-96"><a href="#cb227-96" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb227-97"><a href="#cb227-97" aria-hidden="true" tabindex="-1"></a>            <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>strcmp<span class="op">(</span>command<span class="op">,</span> <span class="st">&quot;q&quot;</span><span class="op">)</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb227-98"><a href="#cb227-98" aria-hidden="true" tabindex="-1"></a>                transition_to_state<span class="op">(</span>STATE_STOPPED<span class="op">);</span></span>
<span id="cb227-99"><a href="#cb227-99" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb227-100"><a href="#cb227-100" aria-hidden="true" tabindex="-1"></a>            <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>strcmp<span class="op">(</span>command<span class="op">,</span> <span class="st">&quot;reset&quot;</span><span class="op">)</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb227-101"><a href="#cb227-101" aria-hidden="true" tabindex="-1"></a>                transition_to_state<span class="op">(</span>STATE_IDLE<span class="op">);</span></span>
<span id="cb227-102"><a href="#cb227-102" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb227-103"><a href="#cb227-103" aria-hidden="true" tabindex="-1"></a>            <span class="cf">else</span> <span class="cf">if</span> <span class="op">(</span>strcmp<span class="op">(</span>command<span class="op">,</span> <span class="st">&quot;exit&quot;</span><span class="op">)</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb227-104"><a href="#cb227-104" aria-hidden="true" tabindex="-1"></a>                printf<span class="op">(</span><span class="st">&quot;プログラムを終了します</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb227-105"><a href="#cb227-105" aria-hidden="true" tabindex="-1"></a>                <span class="cf">break</span><span class="op">;</span></span>
<span id="cb227-106"><a href="#cb227-106" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb227-107"><a href="#cb227-107" aria-hidden="true" tabindex="-1"></a>            <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb227-108"><a href="#cb227-108" aria-hidden="true" tabindex="-1"></a>                printf<span class="op">(</span><span class="st">&quot;無効なコマンドまたは現在の状態では実行できません</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb227-109"><a href="#cb227-109" aria-hidden="true" tabindex="-1"></a>            <span class="op">}</span></span>
<span id="cb227-110"><a href="#cb227-110" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb227-111"><a href="#cb227-111" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb227-112"><a href="#cb227-112" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb227-113"><a href="#cb227-113" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb227-114"><a href="#cb227-114" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb227-115"><a href="#cb227-115" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 data-number="13.3.5" id="高度な関数ポインタ活用"><span
class="header-section-number">13.3.5</span> 高度な関数ポインタ活用
🚀</h3>
<h4 data-number="13.3.5.1" id="プラグインシステム"><span
class="header-section-number">13.3.5.1</span> プラグインシステム</h4>
<div class="sourceCode" id="cb228"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb228-1"><a href="#cb228-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb228-2"><a href="#cb228-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;string.h&gt;</span></span>
<span id="cb228-3"><a href="#cb228-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb228-4"><a href="#cb228-4" aria-hidden="true" tabindex="-1"></a><span class="co">/* プラグインインターフェース */</span></span>
<span id="cb228-5"><a href="#cb228-5" aria-hidden="true" tabindex="-1"></a><span class="kw">typedef</span> <span class="kw">struct</span> <span class="op">{</span></span>
<span id="cb228-6"><a href="#cb228-6" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> name<span class="op">[</span><span class="dv">30</span><span class="op">];</span></span>
<span id="cb228-7"><a href="#cb228-7" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> version<span class="op">[</span><span class="dv">10</span><span class="op">];</span></span>
<span id="cb228-8"><a href="#cb228-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">void</span> <span class="op">(*</span>init<span class="op">)(</span><span class="dt">void</span><span class="op">);</span></span>
<span id="cb228-9"><a href="#cb228-9" aria-hidden="true" tabindex="-1"></a>    <span class="dt">void</span> <span class="op">(*</span>execute<span class="op">)(</span><span class="dt">void</span><span class="op">);</span></span>
<span id="cb228-10"><a href="#cb228-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">void</span> <span class="op">(*</span>cleanup<span class="op">)(</span><span class="dt">void</span><span class="op">);</span></span>
<span id="cb228-11"><a href="#cb228-11" aria-hidden="true" tabindex="-1"></a><span class="op">}</span> Plugin<span class="op">;</span></span>
<span id="cb228-12"><a href="#cb228-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb228-13"><a href="#cb228-13" aria-hidden="true" tabindex="-1"></a><span class="co">/* プラグイン1: ログ出力 */</span></span>
<span id="cb228-14"><a href="#cb228-14" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> log_init<span class="op">(</span><span class="dt">void</span><span class="op">)</span> <span class="op">{</span> printf<span class="op">(</span><span class="st">&quot;ログプラグイン初期化</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb228-15"><a href="#cb228-15" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> log_execute<span class="op">(</span><span class="dt">void</span><span class="op">)</span> <span class="op">{</span> printf<span class="op">(</span><span class="st">&quot;ログファイルに出力中...</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb228-16"><a href="#cb228-16" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> log_cleanup<span class="op">(</span><span class="dt">void</span><span class="op">)</span> <span class="op">{</span> printf<span class="op">(</span><span class="st">&quot;ログプラグイン終了処理</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb228-17"><a href="#cb228-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb228-18"><a href="#cb228-18" aria-hidden="true" tabindex="-1"></a><span class="co">/* プラグイン2: データベース接続 */</span></span>
<span id="cb228-19"><a href="#cb228-19" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> db_init<span class="op">(</span><span class="dt">void</span><span class="op">)</span> <span class="op">{</span> printf<span class="op">(</span><span class="st">&quot;データベースプラグイン初期化</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb228-20"><a href="#cb228-20" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> db_execute<span class="op">(</span><span class="dt">void</span><span class="op">)</span> <span class="op">{</span> printf<span class="op">(</span><span class="st">&quot;データベースに接続中...</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb228-21"><a href="#cb228-21" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> db_cleanup<span class="op">(</span><span class="dt">void</span><span class="op">)</span> <span class="op">{</span> printf<span class="op">(</span><span class="st">&quot;データベース接続終了</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb228-22"><a href="#cb228-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb228-23"><a href="#cb228-23" aria-hidden="true" tabindex="-1"></a><span class="co">/* プラグイン3: ネットワーク通信 */</span></span>
<span id="cb228-24"><a href="#cb228-24" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> net_init<span class="op">(</span><span class="dt">void</span><span class="op">)</span> <span class="op">{</span> printf<span class="op">(</span><span class="st">&quot;ネットワークプラグイン初期化</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb228-25"><a href="#cb228-25" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> net_execute<span class="op">(</span><span class="dt">void</span><span class="op">)</span> <span class="op">{</span> printf<span class="op">(</span><span class="st">&quot;ネットワーク通信実行中...</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb228-26"><a href="#cb228-26" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> net_cleanup<span class="op">(</span><span class="dt">void</span><span class="op">)</span> <span class="op">{</span> printf<span class="op">(</span><span class="st">&quot;ネットワーク接続終了</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span> <span class="op">}</span></span>
<span id="cb228-27"><a href="#cb228-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb228-28"><a href="#cb228-28" aria-hidden="true" tabindex="-1"></a><span class="co">/* プラグインの登録 */</span></span>
<span id="cb228-29"><a href="#cb228-29" aria-hidden="true" tabindex="-1"></a>Plugin plugins<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb228-30"><a href="#cb228-30" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span><span class="st">&quot;LogPlugin&quot;</span><span class="op">,</span> <span class="st">&quot;1.0&quot;</span><span class="op">,</span> log_init<span class="op">,</span> log_execute<span class="op">,</span> log_cleanup<span class="op">},</span></span>
<span id="cb228-31"><a href="#cb228-31" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span><span class="st">&quot;DatabasePlugin&quot;</span><span class="op">,</span> <span class="st">&quot;2.1&quot;</span><span class="op">,</span> db_init<span class="op">,</span> db_execute<span class="op">,</span> db_cleanup<span class="op">},</span></span>
<span id="cb228-32"><a href="#cb228-32" aria-hidden="true" tabindex="-1"></a>    <span class="op">{</span><span class="st">&quot;NetworkPlugin&quot;</span><span class="op">,</span> <span class="st">&quot;1.5&quot;</span><span class="op">,</span> net_init<span class="op">,</span> net_execute<span class="op">,</span> net_cleanup<span class="op">}</span></span>
<span id="cb228-33"><a href="#cb228-33" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb228-34"><a href="#cb228-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb228-35"><a href="#cb228-35" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> plugin_count <span class="op">=</span> <span class="kw">sizeof</span><span class="op">(</span>plugins<span class="op">)</span> <span class="op">/</span> <span class="kw">sizeof</span><span class="op">(</span>plugins<span class="op">[</span><span class="dv">0</span><span class="op">]);</span></span>
<span id="cb228-36"><a href="#cb228-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb228-37"><a href="#cb228-37" aria-hidden="true" tabindex="-1"></a><span class="co">/* プラグイン管理システム */</span></span>
<span id="cb228-38"><a href="#cb228-38" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> load_plugins<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb228-39"><a href="#cb228-39" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb228-40"><a href="#cb228-40" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb228-41"><a href="#cb228-41" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== プラグイン読み込み ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb228-42"><a href="#cb228-42" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> plugin_count<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb228-43"><a href="#cb228-43" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;プラグイン: </span><span class="sc">%s</span><span class="st"> (v</span><span class="sc">%s</span><span class="st">)</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> plugins<span class="op">[</span>i<span class="op">].</span>name<span class="op">,</span> plugins<span class="op">[</span>i<span class="op">].</span>version<span class="op">);</span></span>
<span id="cb228-44"><a href="#cb228-44" aria-hidden="true" tabindex="-1"></a>        plugins<span class="op">[</span>i<span class="op">].</span>init<span class="op">();</span></span>
<span id="cb228-45"><a href="#cb228-45" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb228-46"><a href="#cb228-46" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb228-47"><a href="#cb228-47" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb228-48"><a href="#cb228-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb228-49"><a href="#cb228-49" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> execute_plugins<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb228-50"><a href="#cb228-50" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb228-51"><a href="#cb228-51" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb228-52"><a href="#cb228-52" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== プラグイン実行 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb228-53"><a href="#cb228-53" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> plugin_count<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb228-54"><a href="#cb228-54" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;[</span><span class="sc">%s</span><span class="st">] &quot;</span><span class="op">,</span> plugins<span class="op">[</span>i<span class="op">].</span>name<span class="op">);</span></span>
<span id="cb228-55"><a href="#cb228-55" aria-hidden="true" tabindex="-1"></a>        plugins<span class="op">[</span>i<span class="op">].</span>execute<span class="op">();</span></span>
<span id="cb228-56"><a href="#cb228-56" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb228-57"><a href="#cb228-57" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb228-58"><a href="#cb228-58" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb228-59"><a href="#cb228-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb228-60"><a href="#cb228-60" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> unload_plugins<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb228-61"><a href="#cb228-61" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb228-62"><a href="#cb228-62" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb228-63"><a href="#cb228-63" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== プラグイン終了処理 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb228-64"><a href="#cb228-64" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> plugin_count<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb228-65"><a href="#cb228-65" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;[</span><span class="sc">%s</span><span class="st">] &quot;</span><span class="op">,</span> plugins<span class="op">[</span>i<span class="op">].</span>name<span class="op">);</span></span>
<span id="cb228-66"><a href="#cb228-66" aria-hidden="true" tabindex="-1"></a>        plugins<span class="op">[</span>i<span class="op">].</span>cleanup<span class="op">();</span></span>
<span id="cb228-67"><a href="#cb228-67" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb228-68"><a href="#cb228-68" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb228-69"><a href="#cb228-69" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb228-70"><a href="#cb228-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb228-71"><a href="#cb228-71" aria-hidden="true" tabindex="-1"></a><span class="co">/* 特定のプラグインを実行 */</span></span>
<span id="cb228-72"><a href="#cb228-72" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> execute_plugin_by_name<span class="op">(</span><span class="dt">const</span> <span class="dt">char</span><span class="op">*</span> name<span class="op">)</span></span>
<span id="cb228-73"><a href="#cb228-73" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb228-74"><a href="#cb228-74" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb228-75"><a href="#cb228-75" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> plugin_count<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb228-76"><a href="#cb228-76" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>strcmp<span class="op">(</span>plugins<span class="op">[</span>i<span class="op">].</span>name<span class="op">,</span> name<span class="op">)</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb228-77"><a href="#cb228-77" aria-hidden="true" tabindex="-1"></a>            printf<span class="op">(</span><span class="st">&quot;プラグイン &#39;</span><span class="sc">%s</span><span class="st">&#39; を実行:</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> name<span class="op">);</span></span>
<span id="cb228-78"><a href="#cb228-78" aria-hidden="true" tabindex="-1"></a>            plugins<span class="op">[</span>i<span class="op">].</span>execute<span class="op">();</span></span>
<span id="cb228-79"><a href="#cb228-79" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span><span class="op">;</span></span>
<span id="cb228-80"><a href="#cb228-80" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb228-81"><a href="#cb228-81" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb228-82"><a href="#cb228-82" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;プラグイン &#39;</span><span class="sc">%s</span><span class="st">&#39; が見つかりません</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> name<span class="op">);</span></span>
<span id="cb228-83"><a href="#cb228-83" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb228-84"><a href="#cb228-84" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb228-85"><a href="#cb228-85" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb228-86"><a href="#cb228-86" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb228-87"><a href="#cb228-87" aria-hidden="true" tabindex="-1"></a>    load_plugins<span class="op">();</span></span>
<span id="cb228-88"><a href="#cb228-88" aria-hidden="true" tabindex="-1"></a>    execute_plugins<span class="op">();</span></span>
<span id="cb228-89"><a href="#cb228-89" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb228-90"><a href="#cb228-90" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 特定のプラグインのみ実行 */</span></span>
<span id="cb228-91"><a href="#cb228-91" aria-hidden="true" tabindex="-1"></a>    execute_plugin_by_name<span class="op">(</span><span class="st">&quot;DatabasePlugin&quot;</span><span class="op">);</span></span>
<span id="cb228-92"><a href="#cb228-92" aria-hidden="true" tabindex="-1"></a>    execute_plugin_by_name<span class="op">(</span><span class="st">&quot;InvalidPlugin&quot;</span><span class="op">);</span></span>
<span id="cb228-93"><a href="#cb228-93" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb228-94"><a href="#cb228-94" aria-hidden="true" tabindex="-1"></a>    unload_plugins<span class="op">();</span></span>
<span id="cb228-95"><a href="#cb228-95" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb228-96"><a href="#cb228-96" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb228-97"><a href="#cb228-97" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h4 data-number="13.3.5.2" id="イベントハンドラシステム"><span
class="header-section-number">13.3.5.2</span>
イベントハンドラシステム</h4>
<div class="sourceCode" id="cb229"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb229-1"><a href="#cb229-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb229-2"><a href="#cb229-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb229-3"><a href="#cb229-3" aria-hidden="true" tabindex="-1"></a><span class="co">/* イベントタイプ */</span></span>
<span id="cb229-4"><a href="#cb229-4" aria-hidden="true" tabindex="-1"></a><span class="kw">typedef</span> <span class="kw">enum</span> <span class="op">{</span></span>
<span id="cb229-5"><a href="#cb229-5" aria-hidden="true" tabindex="-1"></a>    EVENT_CLICK<span class="op">,</span></span>
<span id="cb229-6"><a href="#cb229-6" aria-hidden="true" tabindex="-1"></a>    EVENT_KEYPRESS<span class="op">,</span></span>
<span id="cb229-7"><a href="#cb229-7" aria-hidden="true" tabindex="-1"></a>    EVENT_MOUSE_MOVE<span class="op">,</span></span>
<span id="cb229-8"><a href="#cb229-8" aria-hidden="true" tabindex="-1"></a>    EVENT_WINDOW_CLOSE<span class="op">,</span></span>
<span id="cb229-9"><a href="#cb229-9" aria-hidden="true" tabindex="-1"></a>    EVENT_TYPE_COUNT</span>
<span id="cb229-10"><a href="#cb229-10" aria-hidden="true" tabindex="-1"></a><span class="op">}</span> EventType<span class="op">;</span></span>
<span id="cb229-11"><a href="#cb229-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb229-12"><a href="#cb229-12" aria-hidden="true" tabindex="-1"></a><span class="co">/* イベントデータ */</span></span>
<span id="cb229-13"><a href="#cb229-13" aria-hidden="true" tabindex="-1"></a><span class="kw">typedef</span> <span class="kw">struct</span> <span class="op">{</span></span>
<span id="cb229-14"><a href="#cb229-14" aria-hidden="true" tabindex="-1"></a>    EventType type<span class="op">;</span></span>
<span id="cb229-15"><a href="#cb229-15" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> x<span class="op">,</span> y<span class="op">;</span>      <span class="co">/* 座標 */</span></span>
<span id="cb229-16"><a href="#cb229-16" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> key_code<span class="op">;</span>  <span class="co">/* キーコード */</span></span>
<span id="cb229-17"><a href="#cb229-17" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> message<span class="op">[</span><span class="dv">50</span><span class="op">];</span></span>
<span id="cb229-18"><a href="#cb229-18" aria-hidden="true" tabindex="-1"></a><span class="op">}</span> Event<span class="op">;</span></span>
<span id="cb229-19"><a href="#cb229-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb229-20"><a href="#cb229-20" aria-hidden="true" tabindex="-1"></a><span class="co">/* イベントハンドラ関数の型 */</span></span>
<span id="cb229-21"><a href="#cb229-21" aria-hidden="true" tabindex="-1"></a><span class="kw">typedef</span> <span class="dt">void</span> <span class="op">(*</span>EventHandler<span class="op">)(</span><span class="dt">const</span> Event<span class="op">*</span> event<span class="op">);</span></span>
<span id="cb229-22"><a href="#cb229-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb229-23"><a href="#cb229-23" aria-hidden="true" tabindex="-1"></a><span class="co">/* イベントハンドラ配列 */</span></span>
<span id="cb229-24"><a href="#cb229-24" aria-hidden="true" tabindex="-1"></a>EventHandler event_handlers<span class="op">[</span>EVENT_TYPE_COUNT<span class="op">]</span> <span class="op">=</span> <span class="op">{</span>NULL<span class="op">};</span></span>
<span id="cb229-25"><a href="#cb229-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb229-26"><a href="#cb229-26" aria-hidden="true" tabindex="-1"></a><span class="co">/* 各イベントのハンドラ実装 */</span></span>
<span id="cb229-27"><a href="#cb229-27" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> handle_click<span class="op">(</span><span class="dt">const</span> Event<span class="op">*</span> event<span class="op">)</span></span>
<span id="cb229-28"><a href="#cb229-28" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb229-29"><a href="#cb229-29" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;クリックイベント: 座標(</span><span class="sc">%d</span><span class="st">, </span><span class="sc">%d</span><span class="st">) - </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> </span>
<span id="cb229-30"><a href="#cb229-30" aria-hidden="true" tabindex="-1"></a>           event<span class="op">-&gt;</span>x<span class="op">,</span> event<span class="op">-&gt;</span>y<span class="op">,</span> event<span class="op">-&gt;</span>message<span class="op">);</span></span>
<span id="cb229-31"><a href="#cb229-31" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb229-32"><a href="#cb229-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb229-33"><a href="#cb229-33" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> handle_keypress<span class="op">(</span><span class="dt">const</span> Event<span class="op">*</span> event<span class="op">)</span></span>
<span id="cb229-34"><a href="#cb229-34" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb229-35"><a href="#cb229-35" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;キー押下イベント: キーコード </span><span class="sc">%d</span><span class="st"> - </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> </span>
<span id="cb229-36"><a href="#cb229-36" aria-hidden="true" tabindex="-1"></a>           event<span class="op">-&gt;</span>key_code<span class="op">,</span> event<span class="op">-&gt;</span>message<span class="op">);</span></span>
<span id="cb229-37"><a href="#cb229-37" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb229-38"><a href="#cb229-38" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb229-39"><a href="#cb229-39" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> handle_mouse_move<span class="op">(</span><span class="dt">const</span> Event<span class="op">*</span> event<span class="op">)</span></span>
<span id="cb229-40"><a href="#cb229-40" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb229-41"><a href="#cb229-41" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;マウス移動イベント: 座標(</span><span class="sc">%d</span><span class="st">, </span><span class="sc">%d</span><span class="st">)</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> event<span class="op">-&gt;</span>x<span class="op">,</span> event<span class="op">-&gt;</span>y<span class="op">);</span></span>
<span id="cb229-42"><a href="#cb229-42" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb229-43"><a href="#cb229-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb229-44"><a href="#cb229-44" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> handle_window_close<span class="op">(</span><span class="dt">const</span> Event<span class="op">*</span> event<span class="op">)</span></span>
<span id="cb229-45"><a href="#cb229-45" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb229-46"><a href="#cb229-46" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ウィンドウ閉じるイベント: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> event<span class="op">-&gt;</span>message<span class="op">);</span></span>
<span id="cb229-47"><a href="#cb229-47" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb229-48"><a href="#cb229-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb229-49"><a href="#cb229-49" aria-hidden="true" tabindex="-1"></a><span class="co">/* イベントハンドラの登録 */</span></span>
<span id="cb229-50"><a href="#cb229-50" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> register_event_handler<span class="op">(</span>EventType type<span class="op">,</span> EventHandler handler<span class="op">)</span></span>
<span id="cb229-51"><a href="#cb229-51" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb229-52"><a href="#cb229-52" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>type <span class="op">&gt;=</span> <span class="dv">0</span> <span class="op">&amp;&amp;</span> type <span class="op">&lt;</span> EVENT_TYPE_COUNT<span class="op">)</span> <span class="op">{</span></span>
<span id="cb229-53"><a href="#cb229-53" aria-hidden="true" tabindex="-1"></a>        event_handlers<span class="op">[</span>type<span class="op">]</span> <span class="op">=</span> handler<span class="op">;</span></span>
<span id="cb229-54"><a href="#cb229-54" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;イベントハンドラ登録: タイプ </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> type<span class="op">);</span></span>
<span id="cb229-55"><a href="#cb229-55" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb229-56"><a href="#cb229-56" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb229-57"><a href="#cb229-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb229-58"><a href="#cb229-58" aria-hidden="true" tabindex="-1"></a><span class="co">/* イベントの処理 */</span></span>
<span id="cb229-59"><a href="#cb229-59" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> process_event<span class="op">(</span><span class="dt">const</span> Event<span class="op">*</span> event<span class="op">)</span></span>
<span id="cb229-60"><a href="#cb229-60" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb229-61"><a href="#cb229-61" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>event<span class="op">-&gt;</span>type <span class="op">&gt;=</span> <span class="dv">0</span> <span class="op">&amp;&amp;</span> event<span class="op">-&gt;</span>type <span class="op">&lt;</span> EVENT_TYPE_COUNT <span class="op">&amp;&amp;</span> </span>
<span id="cb229-62"><a href="#cb229-62" aria-hidden="true" tabindex="-1"></a>        event_handlers<span class="op">[</span>event<span class="op">-&gt;</span>type<span class="op">]</span> <span class="op">!=</span> NULL<span class="op">)</span> <span class="op">{</span></span>
<span id="cb229-63"><a href="#cb229-63" aria-hidden="true" tabindex="-1"></a>        event_handlers<span class="op">[</span>event<span class="op">-&gt;</span>type<span class="op">](</span>event<span class="op">);</span></span>
<span id="cb229-64"><a href="#cb229-64" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb229-65"><a href="#cb229-65" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;未処理のイベント: タイプ </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> event<span class="op">-&gt;</span>type<span class="op">);</span></span>
<span id="cb229-66"><a href="#cb229-66" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb229-67"><a href="#cb229-67" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb229-68"><a href="#cb229-68" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb229-69"><a href="#cb229-69" aria-hidden="true" tabindex="-1"></a><span class="co">/* イベントの作成補助関数 */</span></span>
<span id="cb229-70"><a href="#cb229-70" aria-hidden="true" tabindex="-1"></a>Event create_click_event<span class="op">(</span><span class="dt">int</span> x<span class="op">,</span> <span class="dt">int</span> y<span class="op">,</span> <span class="dt">const</span> <span class="dt">char</span><span class="op">*</span> msg<span class="op">)</span></span>
<span id="cb229-71"><a href="#cb229-71" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb229-72"><a href="#cb229-72" aria-hidden="true" tabindex="-1"></a>    Event event <span class="op">=</span> <span class="op">{</span>EVENT_CLICK<span class="op">,</span> x<span class="op">,</span> y<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="st">&quot;&quot;</span><span class="op">};</span></span>
<span id="cb229-73"><a href="#cb229-73" aria-hidden="true" tabindex="-1"></a>    strncpy<span class="op">(</span>event<span class="op">.</span>message<span class="op">,</span> msg<span class="op">,</span> <span class="kw">sizeof</span><span class="op">(</span>event<span class="op">.</span>message<span class="op">)</span> <span class="op">-</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb229-74"><a href="#cb229-74" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> event<span class="op">;</span></span>
<span id="cb229-75"><a href="#cb229-75" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb229-76"><a href="#cb229-76" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb229-77"><a href="#cb229-77" aria-hidden="true" tabindex="-1"></a>Event create_keypress_event<span class="op">(</span><span class="dt">int</span> key_code<span class="op">,</span> <span class="dt">const</span> <span class="dt">char</span><span class="op">*</span> msg<span class="op">)</span></span>
<span id="cb229-78"><a href="#cb229-78" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb229-79"><a href="#cb229-79" aria-hidden="true" tabindex="-1"></a>    Event event <span class="op">=</span> <span class="op">{</span>EVENT_KEYPRESS<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> key_code<span class="op">,</span> <span class="st">&quot;&quot;</span><span class="op">};</span></span>
<span id="cb229-80"><a href="#cb229-80" aria-hidden="true" tabindex="-1"></a>    strncpy<span class="op">(</span>event<span class="op">.</span>message<span class="op">,</span> msg<span class="op">,</span> <span class="kw">sizeof</span><span class="op">(</span>event<span class="op">.</span>message<span class="op">)</span> <span class="op">-</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb229-81"><a href="#cb229-81" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> event<span class="op">;</span></span>
<span id="cb229-82"><a href="#cb229-82" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb229-83"><a href="#cb229-83" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb229-84"><a href="#cb229-84" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb229-85"><a href="#cb229-85" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb229-86"><a href="#cb229-86" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== イベントハンドラシステム ===</span><span class="sc">\n\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb229-87"><a href="#cb229-87" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb229-88"><a href="#cb229-88" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* イベントハンドラを登録 */</span></span>
<span id="cb229-89"><a href="#cb229-89" aria-hidden="true" tabindex="-1"></a>    register_event_handler<span class="op">(</span>EVENT_CLICK<span class="op">,</span> handle_click<span class="op">);</span></span>
<span id="cb229-90"><a href="#cb229-90" aria-hidden="true" tabindex="-1"></a>    register_event_handler<span class="op">(</span>EVENT_KEYPRESS<span class="op">,</span> handle_keypress<span class="op">);</span></span>
<span id="cb229-91"><a href="#cb229-91" aria-hidden="true" tabindex="-1"></a>    register_event_handler<span class="op">(</span>EVENT_MOUSE_MOVE<span class="op">,</span> handle_mouse_move<span class="op">);</span></span>
<span id="cb229-92"><a href="#cb229-92" aria-hidden="true" tabindex="-1"></a>    register_event_handler<span class="op">(</span>EVENT_WINDOW_CLOSE<span class="op">,</span> handle_window_close<span class="op">);</span></span>
<span id="cb229-93"><a href="#cb229-93" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb229-94"><a href="#cb229-94" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">=== イベント処理テスト ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb229-95"><a href="#cb229-95" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb229-96"><a href="#cb229-96" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* さまざまなイベントを生成・処理 */</span></span>
<span id="cb229-97"><a href="#cb229-97" aria-hidden="true" tabindex="-1"></a>    Event click_event <span class="op">=</span> create_click_event<span class="op">(</span><span class="dv">100</span><span class="op">,</span> <span class="dv">50</span><span class="op">,</span> <span class="st">&quot;ボタンクリック&quot;</span><span class="op">);</span></span>
<span id="cb229-98"><a href="#cb229-98" aria-hidden="true" tabindex="-1"></a>    process_event<span class="op">(&amp;</span>click_event<span class="op">);</span></span>
<span id="cb229-99"><a href="#cb229-99" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb229-100"><a href="#cb229-100" aria-hidden="true" tabindex="-1"></a>    Event key_event <span class="op">=</span> create_keypress_event<span class="op">(</span><span class="dv">65</span><span class="op">,</span> <span class="st">&quot;Aキー押下&quot;</span><span class="op">);</span></span>
<span id="cb229-101"><a href="#cb229-101" aria-hidden="true" tabindex="-1"></a>    process_event<span class="op">(&amp;</span>key_event<span class="op">);</span></span>
<span id="cb229-102"><a href="#cb229-102" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb229-103"><a href="#cb229-103" aria-hidden="true" tabindex="-1"></a>    Event mouse_event <span class="op">=</span> <span class="op">{</span>EVENT_MOUSE_MOVE<span class="op">,</span> <span class="dv">200</span><span class="op">,</span> <span class="dv">150</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="st">&quot;&quot;</span><span class="op">};</span></span>
<span id="cb229-104"><a href="#cb229-104" aria-hidden="true" tabindex="-1"></a>    process_event<span class="op">(&amp;</span>mouse_event<span class="op">);</span></span>
<span id="cb229-105"><a href="#cb229-105" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb229-106"><a href="#cb229-106" aria-hidden="true" tabindex="-1"></a>    Event close_event <span class="op">=</span> <span class="op">{</span>EVENT_WINDOW_CLOSE<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="st">&quot;アプリケーション終了&quot;</span><span class="op">};</span></span>
<span id="cb229-107"><a href="#cb229-107" aria-hidden="true" tabindex="-1"></a>    process_event<span class="op">(&amp;</span>close_event<span class="op">);</span></span>
<span id="cb229-108"><a href="#cb229-108" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb229-109"><a href="#cb229-109" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 未登録のイベントタイプ */</span></span>
<span id="cb229-110"><a href="#cb229-110" aria-hidden="true" tabindex="-1"></a>    Event unknown_event <span class="op">=</span> <span class="op">{</span><span class="dv">99</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="dv">0</span><span class="op">,</span> <span class="st">&quot;&quot;</span><span class="op">};</span></span>
<span id="cb229-111"><a href="#cb229-111" aria-hidden="true" tabindex="-1"></a>    process_event<span class="op">(&amp;</span>unknown_event<span class="op">);</span></span>
<span id="cb229-112"><a href="#cb229-112" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb229-113"><a href="#cb229-113" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb229-114"><a href="#cb229-114" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 data-number="13.3.6" id="関数ポインタのtypedef"><span
class="header-section-number">13.3.6</span> 関数ポインタのtypedef
📝</h3>
<p>複雑な関数ポインタの型を簡潔に書くためにtypedefを使用します。</p>
<div class="sourceCode" id="cb230"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb230-1"><a href="#cb230-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb230-2"><a href="#cb230-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb230-3"><a href="#cb230-3" aria-hidden="true" tabindex="-1"></a><span class="co">/* 関数ポインタの型定義 */</span></span>
<span id="cb230-4"><a href="#cb230-4" aria-hidden="true" tabindex="-1"></a><span class="kw">typedef</span> <span class="dt">int</span> <span class="op">(*</span>BinaryOperation<span class="op">)(</span><span class="dt">int</span><span class="op">,</span> <span class="dt">int</span><span class="op">);</span></span>
<span id="cb230-5"><a href="#cb230-5" aria-hidden="true" tabindex="-1"></a><span class="kw">typedef</span> <span class="dt">void</span> <span class="op">(*</span>EventCallback<span class="op">)(</span><span class="dt">int</span> event_id<span class="op">,</span> <span class="dt">const</span> <span class="dt">char</span><span class="op">*</span> message<span class="op">);</span></span>
<span id="cb230-6"><a href="#cb230-6" aria-hidden="true" tabindex="-1"></a><span class="kw">typedef</span> <span class="dt">double</span> <span class="op">(*</span>MathFunction<span class="op">)(</span><span class="dt">double</span><span class="op">);</span></span>
<span id="cb230-7"><a href="#cb230-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb230-8"><a href="#cb230-8" aria-hidden="true" tabindex="-1"></a><span class="co">/* 演算関数 */</span></span>
<span id="cb230-9"><a href="#cb230-9" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> add_nums<span class="op">(</span><span class="dt">int</span> a<span class="op">,</span> <span class="dt">int</span> b<span class="op">)</span> <span class="op">{</span> <span class="cf">return</span> a <span class="op">+</span> b<span class="op">;</span> <span class="op">}</span></span>
<span id="cb230-10"><a href="#cb230-10" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> mul_nums<span class="op">(</span><span class="dt">int</span> a<span class="op">,</span> <span class="dt">int</span> b<span class="op">)</span> <span class="op">{</span> <span class="cf">return</span> a <span class="op">*</span> b<span class="op">;</span> <span class="op">}</span></span>
<span id="cb230-11"><a href="#cb230-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb230-12"><a href="#cb230-12" aria-hidden="true" tabindex="-1"></a><span class="co">/* イベントコールバック関数 */</span></span>
<span id="cb230-13"><a href="#cb230-13" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> on_start<span class="op">(</span><span class="dt">int</span> id<span class="op">,</span> <span class="dt">const</span> <span class="dt">char</span><span class="op">*</span> msg<span class="op">)</span> <span class="op">{</span></span>
<span id="cb230-14"><a href="#cb230-14" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;開始イベント[</span><span class="sc">%d</span><span class="st">]: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> id<span class="op">,</span> msg<span class="op">);</span></span>
<span id="cb230-15"><a href="#cb230-15" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb230-16"><a href="#cb230-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb230-17"><a href="#cb230-17" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> on_stop<span class="op">(</span><span class="dt">int</span> id<span class="op">,</span> <span class="dt">const</span> <span class="dt">char</span><span class="op">*</span> msg<span class="op">)</span> <span class="op">{</span></span>
<span id="cb230-18"><a href="#cb230-18" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;停止イベント[</span><span class="sc">%d</span><span class="st">]: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> id<span class="op">,</span> msg<span class="op">);</span></span>
<span id="cb230-19"><a href="#cb230-19" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb230-20"><a href="#cb230-20" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb230-21"><a href="#cb230-21" aria-hidden="true" tabindex="-1"></a><span class="co">/* 数学関数 */</span></span>
<span id="cb230-22"><a href="#cb230-22" aria-hidden="true" tabindex="-1"></a><span class="dt">double</span> square_root<span class="op">(</span><span class="dt">double</span> x<span class="op">)</span> <span class="op">{</span> <span class="cf">return</span> x <span class="op">*</span> x<span class="op">;</span> <span class="op">}</span>  <span class="co">/* 簡易版 */</span></span>
<span id="cb230-23"><a href="#cb230-23" aria-hidden="true" tabindex="-1"></a><span class="dt">double</span> absolute<span class="op">(</span><span class="dt">double</span> x<span class="op">)</span> <span class="op">{</span> <span class="cf">return</span> x <span class="op">&lt;</span> <span class="dv">0</span> <span class="op">?</span> <span class="op">-</span>x <span class="op">:</span> x<span class="op">;</span> <span class="op">}</span></span>
<span id="cb230-24"><a href="#cb230-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb230-25"><a href="#cb230-25" aria-hidden="true" tabindex="-1"></a><span class="co">/* 関数を実行する汎用関数 */</span></span>
<span id="cb230-26"><a href="#cb230-26" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> execute_binary_op<span class="op">(</span><span class="dt">int</span> a<span class="op">,</span> <span class="dt">int</span> b<span class="op">,</span> BinaryOperation op<span class="op">)</span></span>
<span id="cb230-27"><a href="#cb230-27" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb230-28"><a href="#cb230-28" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> op<span class="op">(</span>a<span class="op">,</span> b<span class="op">);</span></span>
<span id="cb230-29"><a href="#cb230-29" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb230-30"><a href="#cb230-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb230-31"><a href="#cb230-31" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> trigger_event<span class="op">(</span><span class="dt">int</span> id<span class="op">,</span> <span class="dt">const</span> <span class="dt">char</span><span class="op">*</span> message<span class="op">,</span> EventCallback callback<span class="op">)</span></span>
<span id="cb230-32"><a href="#cb230-32" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb230-33"><a href="#cb230-33" aria-hidden="true" tabindex="-1"></a>    callback<span class="op">(</span>id<span class="op">,</span> message<span class="op">);</span></span>
<span id="cb230-34"><a href="#cb230-34" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb230-35"><a href="#cb230-35" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb230-36"><a href="#cb230-36" aria-hidden="true" tabindex="-1"></a><span class="dt">double</span> apply_math_func<span class="op">(</span><span class="dt">double</span> value<span class="op">,</span> MathFunction func<span class="op">)</span></span>
<span id="cb230-37"><a href="#cb230-37" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb230-38"><a href="#cb230-38" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> func<span class="op">(</span>value<span class="op">);</span></span>
<span id="cb230-39"><a href="#cb230-39" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb230-40"><a href="#cb230-40" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb230-41"><a href="#cb230-41" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb230-42"><a href="#cb230-42" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb230-43"><a href="#cb230-43" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 型定義を使った関数ポインタの使用 */</span></span>
<span id="cb230-44"><a href="#cb230-44" aria-hidden="true" tabindex="-1"></a>    BinaryOperation math_op<span class="op">;</span></span>
<span id="cb230-45"><a href="#cb230-45" aria-hidden="true" tabindex="-1"></a>    EventCallback event_handler<span class="op">;</span></span>
<span id="cb230-46"><a href="#cb230-46" aria-hidden="true" tabindex="-1"></a>    MathFunction math_func<span class="op">;</span></span>
<span id="cb230-47"><a href="#cb230-47" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb230-48"><a href="#cb230-48" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== typedef を使った関数ポインタ ===</span><span class="sc">\n\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb230-49"><a href="#cb230-49" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb230-50"><a href="#cb230-50" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 数値演算 */</span></span>
<span id="cb230-51"><a href="#cb230-51" aria-hidden="true" tabindex="-1"></a>    math_op <span class="op">=</span> add_nums<span class="op">;</span></span>
<span id="cb230-52"><a href="#cb230-52" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;加算: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> execute_binary_op<span class="op">(</span><span class="dv">10</span><span class="op">,</span> <span class="dv">5</span><span class="op">,</span> math_op<span class="op">));</span></span>
<span id="cb230-53"><a href="#cb230-53" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb230-54"><a href="#cb230-54" aria-hidden="true" tabindex="-1"></a>    math_op <span class="op">=</span> mul_nums<span class="op">;</span></span>
<span id="cb230-55"><a href="#cb230-55" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;乗算: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> execute_binary_op<span class="op">(</span><span class="dv">10</span><span class="op">,</span> <span class="dv">5</span><span class="op">,</span> math_op<span class="op">));</span></span>
<span id="cb230-56"><a href="#cb230-56" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb230-57"><a href="#cb230-57" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* イベント処理 */</span></span>
<span id="cb230-58"><a href="#cb230-58" aria-hidden="true" tabindex="-1"></a>    event_handler <span class="op">=</span> on_start<span class="op">;</span></span>
<span id="cb230-59"><a href="#cb230-59" aria-hidden="true" tabindex="-1"></a>    trigger_event<span class="op">(</span><span class="dv">1</span><span class="op">,</span> <span class="st">&quot;システム開始&quot;</span><span class="op">,</span> event_handler<span class="op">);</span></span>
<span id="cb230-60"><a href="#cb230-60" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb230-61"><a href="#cb230-61" aria-hidden="true" tabindex="-1"></a>    event_handler <span class="op">=</span> on_stop<span class="op">;</span></span>
<span id="cb230-62"><a href="#cb230-62" aria-hidden="true" tabindex="-1"></a>    trigger_event<span class="op">(</span><span class="dv">2</span><span class="op">,</span> <span class="st">&quot;システム終了&quot;</span><span class="op">,</span> event_handler<span class="op">);</span></span>
<span id="cb230-63"><a href="#cb230-63" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb230-64"><a href="#cb230-64" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 数学関数 */</span></span>
<span id="cb230-65"><a href="#cb230-65" aria-hidden="true" tabindex="-1"></a>    math_func <span class="op">=</span> square_root<span class="op">;</span></span>
<span id="cb230-66"><a href="#cb230-66" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;二乗: </span><span class="sc">%.2f\n</span><span class="st">&quot;</span><span class="op">,</span> apply_math_func<span class="op">(</span><span class="fl">5.0</span><span class="op">,</span> math_func<span class="op">));</span></span>
<span id="cb230-67"><a href="#cb230-67" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb230-68"><a href="#cb230-68" aria-hidden="true" tabindex="-1"></a>    math_func <span class="op">=</span> absolute<span class="op">;</span></span>
<span id="cb230-69"><a href="#cb230-69" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;絶対値: </span><span class="sc">%.2f\n</span><span class="st">&quot;</span><span class="op">,</span> apply_math_func<span class="op">(-</span><span class="fl">7.5</span><span class="op">,</span> math_func<span class="op">));</span></span>
<span id="cb230-70"><a href="#cb230-70" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb230-71"><a href="#cb230-71" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb230-72"><a href="#cb230-72" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h2 data-number="13.4" id="サンプルコード-11"><span
class="header-section-number">13.4</span> サンプルコード</h2>
<h3 data-number="13.4.1" id="関数ポインタの基本"><span
class="header-section-number">13.4.1</span> 関数ポインタの基本</h3>
<p>プログラムファイル:
<code>examples/function_pointer_basic.c</code></p>
<p>関数ポインタの宣言、初期化、基本的な使用方法を学習します。</p>
<h3 data-number="13.4.2" id="コールバック関数-1"><span
class="header-section-number">13.4.2</span> コールバック関数</h3>
<p>プログラムファイル: <code>examples/callback_functions.c</code></p>
<p>コールバック関数を使ったイベント処理システムを学習します。</p>
<h3 data-number="13.4.3" id="関数ポインタ配列-1"><span
class="header-section-number">13.4.3</span> 関数ポインタ配列</h3>
<p>プログラムファイル:
<code>examples/function_pointer_arrays.c</code></p>
<p>関数ポインタ配列を使った動的な関数選択を学習します。</p>
<h3 data-number="13.4.4" id="コンパイルと実行-11"><span
class="header-section-number">13.4.4</span> コンパイルと実行</h3>
<div class="sourceCode" id="cb231"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb231-1"><a href="#cb231-1" aria-hidden="true" tabindex="-1"></a><span class="co"># examples ディレクトリに移動</span></span>
<span id="cb231-2"><a href="#cb231-2" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> examples</span>
<span id="cb231-3"><a href="#cb231-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb231-4"><a href="#cb231-4" aria-hidden="true" tabindex="-1"></a><span class="co"># C90準拠でコンパイル</span></span>
<span id="cb231-5"><a href="#cb231-5" aria-hidden="true" tabindex="-1"></a><span class="fu">gcc</span> <span class="at">-std</span><span class="op">=</span>c90 <span class="at">-Wall</span> <span class="at">-Wextra</span> <span class="at">-pedantic</span> function_pointer_basic.c <span class="at">-o</span> function_pointer_basic</span>
<span id="cb231-6"><a href="#cb231-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb231-7"><a href="#cb231-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 実行</span></span>
<span id="cb231-8"><a href="#cb231-8" aria-hidden="true" tabindex="-1"></a><span class="ex">./function_pointer_basic</span></span></code></pre></div>
<h2 data-number="13.5" id="演習課題-11"><span
class="header-section-number">13.5</span> 演習課題</h2>
<h3 data-number="13.5.1" id="基礎問題-11"><span
class="header-section-number">13.5.1</span> 基礎問題</h3>
<ol type="1">
<li><strong>計算機の実装</strong>
<ul>
<li>四則演算の関数を作成し、関数ポインタを使って動的に演算を選択できる計算機を実装してください</li>
</ul></li>
<li><strong>ソート比較関数</strong>
<ul>
<li>整数配列を昇順・降順でソートできるよう、比較関数を関数ポインタで渡すソート関数を実装してください</li>
</ul></li>
<li><strong>メニューシステム</strong>
<ul>
<li>関数ポインタ配列を使って、複数の機能を持つメニューシステムを作成してください</li>
</ul></li>
</ol>
<h3 data-number="13.5.2" id="応用問題-11"><span
class="header-section-number">13.5.2</span> 応用問題</h3>
<ol type="1">
<li><strong>データ変換システム</strong>
<ul>
<li>さまざまなデータ変換関数（大文字変換、小文字変換など）を関数ポインタで管理するシステムを実装してください</li>
</ul></li>
<li><strong>フィルタシステム</strong>
<ul>
<li>配列の要素をフィルタリングする関数を、条件を関数ポインタで渡して実装してください</li>
</ul></li>
<li><strong>ゲームの状態管理</strong>
<ul>
<li>ゲームの状態（メニュー、プレイ中、ポーズ、終了）を関数ポインタ配列で管理するシステムを作成してください</li>
</ul></li>
</ol>
<h3 data-number="13.5.3" id="発展問題-6"><span
class="header-section-number">13.5.3</span> 発展問題</h3>
<ol type="1">
<li><strong>プラグインシステム</strong>
<ul>
<li>実行時に機能を追加できるプラグインシステムを関数ポインタで実装してください</li>
</ul></li>
<li><strong>コマンドパターン</strong>
<ul>
<li>コマンドパターンを関数ポインタで実装し、undo/redo機能付きのシステムを作成してください</li>
</ul></li>
<li><strong>イベントドリブンシステム</strong>
<ul>
<li>複数のイベントタイプを処理できるイベントドリブンシステムを実装してください</li>
</ul></li>
</ol>
<h2 data-number="13.6" id="コンパイル方法-11"><span
class="header-section-number">13.6</span> コンパイル方法</h2>
<p>この章では以下のMakefileを使用してコンパイルができます：</p>
<div class="sourceCode" id="cb232"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb232-1"><a href="#cb232-1" aria-hidden="true" tabindex="-1"></a><span class="co"># 全ての例題をコンパイル</span></span>
<span id="cb232-2"><a href="#cb232-2" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> all</span>
<span id="cb232-3"><a href="#cb232-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb232-4"><a href="#cb232-4" aria-hidden="true" tabindex="-1"></a><span class="co"># 特定のプログラムをコンパイル</span></span>
<span id="cb232-5"><a href="#cb232-5" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> function_pointer_basic</span>
<span id="cb232-6"><a href="#cb232-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb232-7"><a href="#cb232-7" aria-hidden="true" tabindex="-1"></a><span class="co"># 実行</span></span>
<span id="cb232-8"><a href="#cb232-8" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> run</span>
<span id="cb232-9"><a href="#cb232-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb232-10"><a href="#cb232-10" aria-hidden="true" tabindex="-1"></a><span class="co"># クリーンアップ</span></span>
<span id="cb232-11"><a href="#cb232-11" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> clean</span></code></pre></div>
<h2 data-number="13.7" id="規格による違い-11"><span
class="header-section-number">13.7</span> 規格による違い</h2>
<h3 data-number="13.7.1" id="c90での制限事項-10"><span
class="header-section-number">13.7.1</span> C90での制限事項</h3>
<ul>
<li>関数ポインタの型変換は明示的なキャストが必要</li>
<li>可変引数関数への関数ポインタは制限的</li>
</ul>
<h3 data-number="13.7.2" id="c99以降の拡張-10"><span
class="header-section-number">13.7.2</span> C99以降の拡張</h3>
<ul>
<li>より柔軟な関数ポインタの初期化</li>
<li>inline関数への関数ポインタサポート改善</li>
</ul>
<h2 data-number="13.8" id="よくある間違い-9"><span
class="header-section-number">13.8</span> 🚨 よくある間違い</h2>
<h3 data-number="13.8.1" id="関数ポインタの初期化忘れ"><span
class="header-section-number">13.8.1</span> 1.
関数ポインタの初期化忘れ</h3>
<div class="sourceCode" id="cb233"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb233-1"><a href="#cb233-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* NG: 初期化されていない関数ポインタ */</span></span>
<span id="cb233-2"><a href="#cb233-2" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> <span class="op">(*</span>func_ptr<span class="op">)(</span><span class="dt">int</span><span class="op">,</span> <span class="dt">int</span><span class="op">);</span></span>
<span id="cb233-3"><a href="#cb233-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> result <span class="op">=</span> func_ptr<span class="op">(</span><span class="dv">5</span><span class="op">,</span> <span class="dv">3</span><span class="op">);</span>  <span class="co">/* 未定義動作 */</span></span>
<span id="cb233-4"><a href="#cb233-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb233-5"><a href="#cb233-5" aria-hidden="true" tabindex="-1"></a><span class="co">/* OK: 適切な初期化 */</span></span>
<span id="cb233-6"><a href="#cb233-6" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> <span class="op">(*</span>func_ptr<span class="op">)(</span><span class="dt">int</span><span class="op">,</span> <span class="dt">int</span><span class="op">)</span> <span class="op">=</span> add_function<span class="op">;</span></span>
<span id="cb233-7"><a href="#cb233-7" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> result <span class="op">=</span> func_ptr<span class="op">(</span><span class="dv">5</span><span class="op">,</span> <span class="dv">3</span><span class="op">);</span></span></code></pre></div>
<h3 data-number="13.8.2" id="関数ポインタのnullチェック不足"><span
class="header-section-number">13.8.2</span> 2.
関数ポインタのNULLチェック不足</h3>
<div class="sourceCode" id="cb234"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb234-1"><a href="#cb234-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* NG: NULLチェックなし */</span></span>
<span id="cb234-2"><a href="#cb234-2" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> execute_callback<span class="op">(</span><span class="dt">void</span> <span class="op">(*</span>callback<span class="op">)(</span><span class="dt">void</span><span class="op">))</span></span>
<span id="cb234-3"><a href="#cb234-3" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb234-4"><a href="#cb234-4" aria-hidden="true" tabindex="-1"></a>    callback<span class="op">();</span>  <span class="co">/* callbackがNULLの場合クラッシュ */</span></span>
<span id="cb234-5"><a href="#cb234-5" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb234-6"><a href="#cb234-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb234-7"><a href="#cb234-7" aria-hidden="true" tabindex="-1"></a><span class="co">/* OK: NULLチェック */</span></span>
<span id="cb234-8"><a href="#cb234-8" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> execute_callback<span class="op">(</span><span class="dt">void</span> <span class="op">(*</span>callback<span class="op">)(</span><span class="dt">void</span><span class="op">))</span></span>
<span id="cb234-9"><a href="#cb234-9" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb234-10"><a href="#cb234-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>callback <span class="op">!=</span> NULL<span class="op">)</span> <span class="op">{</span></span>
<span id="cb234-11"><a href="#cb234-11" aria-hidden="true" tabindex="-1"></a>        callback<span class="op">();</span></span>
<span id="cb234-12"><a href="#cb234-12" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb234-13"><a href="#cb234-13" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 data-number="13.8.3" id="関数の戻り値型の不一致"><span
class="header-section-number">13.8.3</span> 3.
関数の戻り値型の不一致</h3>
<div class="sourceCode" id="cb235"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb235-1"><a href="#cb235-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* NG: 戻り値型が一致しない */</span></span>
<span id="cb235-2"><a href="#cb235-2" aria-hidden="true" tabindex="-1"></a><span class="dt">double</span> divide_func<span class="op">(</span><span class="dt">int</span> a<span class="op">,</span> <span class="dt">int</span> b<span class="op">)</span> <span class="op">{</span> <span class="cf">return</span> <span class="op">(</span><span class="dt">double</span><span class="op">)</span>a <span class="op">/</span> b<span class="op">;</span> <span class="op">}</span></span>
<span id="cb235-3"><a href="#cb235-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> <span class="op">(*</span>math_op<span class="op">)(</span><span class="dt">int</span><span class="op">,</span> <span class="dt">int</span><span class="op">)</span> <span class="op">=</span> divide_func<span class="op">;</span>  <span class="co">/* 型エラー */</span></span>
<span id="cb235-4"><a href="#cb235-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb235-5"><a href="#cb235-5" aria-hidden="true" tabindex="-1"></a><span class="co">/* OK: 戻り値型を一致させる */</span></span>
<span id="cb235-6"><a href="#cb235-6" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> divide_func<span class="op">(</span><span class="dt">int</span> a<span class="op">,</span> <span class="dt">int</span> b<span class="op">)</span> <span class="op">{</span> <span class="cf">return</span> a <span class="op">/</span> b<span class="op">;</span> <span class="op">}</span></span>
<span id="cb235-7"><a href="#cb235-7" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> <span class="op">(*</span>math_op<span class="op">)(</span><span class="dt">int</span><span class="op">,</span> <span class="dt">int</span><span class="op">)</span> <span class="op">=</span> divide_func<span class="op">;</span></span></code></pre></div>
<h2 data-number="13.9" id="次の章へ-11"><span
class="header-section-number">13.9</span> 次の章へ</h2>
<h2 data-number="13.10" id="参考資料-11"><span
class="header-section-number">13.10</span> 参考資料</h2>
<ul>
<li><a
href="https://ja.cppreference.com/w/c/language/pointer">C言語関数ポインタリファレンス</a></li>
<li><a
href="https://en.wikipedia.org/wiki/Callback_(computer_programming)">コールバック関数の設計パターン</a></li>
<li><a
href="https://www.learn-c.org/en/Function_Pointers">関数ポインタの活用例</a></li>
</ul>
<h1 data-number="14" id="複数ファイル発展技術"><span
class="header-section-number">14</span> 複数ファイル・発展技術</h1>
<h2 data-number="14.1" id="対応c規格-13"><span
class="header-section-number">14.1</span> 対応C規格</h2>
<ul>
<li><strong>主要対象:</strong> C90</li>
<li><strong>学習内容:</strong>
分割コンパイル、extern宣言、プリプロセッサ、モジュール設計、ライブラリ作成</li>
</ul>
<h2 data-number="14.2" id="学習目標-13"><span
class="header-section-number">14.2</span> 学習目標</h2>
<p>この章を完了すると、以下のことができるようになります：</p>
<ul>
<li>複数ファイルに分割したプログラムを作成できる</li>
<li>extern宣言を正しく使用できる</li>
<li>プリプロセッサ機能を効果的に活用できる</li>
<li>再利用可能なモジュールを設計できる</li>
<li>静的ライブラリを作成・使用できる</li>
<li>大規模プロジェクトの構成を理解する</li>
</ul>
<h2 data-number="14.3" id="理論解説-12"><span
class="header-section-number">14.3</span> 理論解説</h2>
<h3 data-number="14.3.1" id="分割コンパイルの基本"><span
class="header-section-number">14.3.1</span> 分割コンパイルの基本 📁</h3>
<p>大きなプログラムを複数のソースファイルに分割することで、保守性と再利用性が向上します。</p>
<h4 data-number="14.3.1.1" id="基本的な分割例"><span
class="header-section-number">14.3.1.1</span> 基本的な分割例</h4>
<p><strong>main.c（メインプログラム）</strong></p>
<div class="sourceCode" id="cb236"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb236-1"><a href="#cb236-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb236-2"><a href="#cb236-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&quot;math_utils.h&quot;</span></span>
<span id="cb236-3"><a href="#cb236-3" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&quot;string_utils.h&quot;</span></span>
<span id="cb236-4"><a href="#cb236-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb236-5"><a href="#cb236-5" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb236-6"><a href="#cb236-6" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb236-7"><a href="#cb236-7" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== 数学関数テスト ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb236-8"><a href="#cb236-8" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;add(10, 5) = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> add<span class="op">(</span><span class="dv">10</span><span class="op">,</span> <span class="dv">5</span><span class="op">));</span></span>
<span id="cb236-9"><a href="#cb236-9" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;multiply(7, 8) = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> multiply<span class="op">(</span><span class="dv">7</span><span class="op">,</span> <span class="dv">8</span><span class="op">));</span></span>
<span id="cb236-10"><a href="#cb236-10" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;power(2, 8) = </span><span class="sc">%ld\n</span><span class="st">&quot;</span><span class="op">,</span> power<span class="op">(</span><span class="dv">2</span><span class="op">,</span> <span class="dv">8</span><span class="op">));</span></span>
<span id="cb236-11"><a href="#cb236-11" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb236-12"><a href="#cb236-12" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">=== 文字列関数テスト ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb236-13"><a href="#cb236-13" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> str<span class="op">[]</span> <span class="op">=</span> <span class="st">&quot;hello world&quot;</span><span class="op">;</span></span>
<span id="cb236-14"><a href="#cb236-14" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;元の文字列: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> str<span class="op">);</span></span>
<span id="cb236-15"><a href="#cb236-15" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb236-16"><a href="#cb236-16" aria-hidden="true" tabindex="-1"></a>    to_uppercase<span class="op">(</span>str<span class="op">);</span></span>
<span id="cb236-17"><a href="#cb236-17" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;大文字変換: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> str<span class="op">);</span></span>
<span id="cb236-18"><a href="#cb236-18" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb236-19"><a href="#cb236-19" aria-hidden="true" tabindex="-1"></a>    reverse_string<span class="op">(</span>str<span class="op">);</span></span>
<span id="cb236-20"><a href="#cb236-20" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;逆順変換: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> str<span class="op">);</span></span>
<span id="cb236-21"><a href="#cb236-21" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb236-22"><a href="#cb236-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb236-23"><a href="#cb236-23" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p><strong>math_utils.h（数学関数のヘッダファイル）</strong></p>
<div class="sourceCode" id="cb237"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb237-1"><a href="#cb237-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#ifndef MATH_UTILS_H</span></span>
<span id="cb237-2"><a href="#cb237-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#define MATH_UTILS_H</span></span>
<span id="cb237-3"><a href="#cb237-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb237-4"><a href="#cb237-4" aria-hidden="true" tabindex="-1"></a><span class="co">/* 関数宣言 */</span></span>
<span id="cb237-5"><a href="#cb237-5" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> add<span class="op">(</span><span class="dt">int</span> a<span class="op">,</span> <span class="dt">int</span> b<span class="op">);</span></span>
<span id="cb237-6"><a href="#cb237-6" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> multiply<span class="op">(</span><span class="dt">int</span> a<span class="op">,</span> <span class="dt">int</span> b<span class="op">);</span></span>
<span id="cb237-7"><a href="#cb237-7" aria-hidden="true" tabindex="-1"></a><span class="dt">long</span> power<span class="op">(</span><span class="dt">int</span> base<span class="op">,</span> <span class="dt">int</span> exponent<span class="op">);</span></span>
<span id="cb237-8"><a href="#cb237-8" aria-hidden="true" tabindex="-1"></a><span class="dt">double</span> average<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> size<span class="op">);</span></span>
<span id="cb237-9"><a href="#cb237-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb237-10"><a href="#cb237-10" aria-hidden="true" tabindex="-1"></a><span class="co">/* 定数定義 */</span></span>
<span id="cb237-11"><a href="#cb237-11" aria-hidden="true" tabindex="-1"></a><span class="pp">#define PI </span><span class="fl">3.14159265359</span></span>
<span id="cb237-12"><a href="#cb237-12" aria-hidden="true" tabindex="-1"></a><span class="pp">#define E  </span><span class="fl">2.71828182846</span></span>
<span id="cb237-13"><a href="#cb237-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb237-14"><a href="#cb237-14" aria-hidden="true" tabindex="-1"></a><span class="pp">#endif </span><span class="co">/* MATH_UTILS_H */</span></span></code></pre></div>
<p><strong>math_utils.c（数学関数の実装）</strong></p>
<div class="sourceCode" id="cb238"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb238-1"><a href="#cb238-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&quot;math_utils.h&quot;</span></span>
<span id="cb238-2"><a href="#cb238-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb238-3"><a href="#cb238-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> add<span class="op">(</span><span class="dt">int</span> a<span class="op">,</span> <span class="dt">int</span> b<span class="op">)</span></span>
<span id="cb238-4"><a href="#cb238-4" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb238-5"><a href="#cb238-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> a <span class="op">+</span> b<span class="op">;</span></span>
<span id="cb238-6"><a href="#cb238-6" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb238-7"><a href="#cb238-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb238-8"><a href="#cb238-8" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> multiply<span class="op">(</span><span class="dt">int</span> a<span class="op">,</span> <span class="dt">int</span> b<span class="op">)</span></span>
<span id="cb238-9"><a href="#cb238-9" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb238-10"><a href="#cb238-10" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> a <span class="op">*</span> b<span class="op">;</span></span>
<span id="cb238-11"><a href="#cb238-11" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb238-12"><a href="#cb238-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb238-13"><a href="#cb238-13" aria-hidden="true" tabindex="-1"></a><span class="dt">long</span> power<span class="op">(</span><span class="dt">int</span> base<span class="op">,</span> <span class="dt">int</span> exponent<span class="op">)</span></span>
<span id="cb238-14"><a href="#cb238-14" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb238-15"><a href="#cb238-15" aria-hidden="true" tabindex="-1"></a>    <span class="dt">long</span> result <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb238-16"><a href="#cb238-16" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb238-17"><a href="#cb238-17" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb238-18"><a href="#cb238-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>exponent <span class="op">&lt;</span> <span class="dv">0</span><span class="op">)</span> <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span>  <span class="co">/* 簡易実装 */</span></span>
<span id="cb238-19"><a href="#cb238-19" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb238-20"><a href="#cb238-20" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> exponent<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb238-21"><a href="#cb238-21" aria-hidden="true" tabindex="-1"></a>        result <span class="op">*=</span> base<span class="op">;</span></span>
<span id="cb238-22"><a href="#cb238-22" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb238-23"><a href="#cb238-23" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb238-24"><a href="#cb238-24" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> result<span class="op">;</span></span>
<span id="cb238-25"><a href="#cb238-25" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb238-26"><a href="#cb238-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb238-27"><a href="#cb238-27" aria-hidden="true" tabindex="-1"></a><span class="dt">double</span> average<span class="op">(</span><span class="dt">int</span> arr<span class="op">[],</span> <span class="dt">int</span> size<span class="op">)</span></span>
<span id="cb238-28"><a href="#cb238-28" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb238-29"><a href="#cb238-29" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> sum <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb238-30"><a href="#cb238-30" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> i<span class="op">;</span></span>
<span id="cb238-31"><a href="#cb238-31" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb238-32"><a href="#cb238-32" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>size <span class="op">&lt;=</span> <span class="dv">0</span><span class="op">)</span> <span class="cf">return</span> <span class="fl">0.0</span><span class="op">;</span></span>
<span id="cb238-33"><a href="#cb238-33" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb238-34"><a href="#cb238-34" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> size<span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb238-35"><a href="#cb238-35" aria-hidden="true" tabindex="-1"></a>        sum <span class="op">+=</span> arr<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb238-36"><a href="#cb238-36" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb238-37"><a href="#cb238-37" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb238-38"><a href="#cb238-38" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="op">(</span><span class="dt">double</span><span class="op">)</span>sum <span class="op">/</span> size<span class="op">;</span></span>
<span id="cb238-39"><a href="#cb238-39" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p><strong>string_utils.h（文字列関数のヘッダファイル）</strong></p>
<div class="sourceCode" id="cb239"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb239-1"><a href="#cb239-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#ifndef STRING_UTILS_H</span></span>
<span id="cb239-2"><a href="#cb239-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#define STRING_UTILS_H</span></span>
<span id="cb239-3"><a href="#cb239-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-4"><a href="#cb239-4" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;string.h&gt;</span></span>
<span id="cb239-5"><a href="#cb239-5" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;ctype.h&gt;</span></span>
<span id="cb239-6"><a href="#cb239-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-7"><a href="#cb239-7" aria-hidden="true" tabindex="-1"></a><span class="co">/* 関数宣言 */</span></span>
<span id="cb239-8"><a href="#cb239-8" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> to_uppercase<span class="op">(</span><span class="dt">char</span> <span class="op">*</span>str<span class="op">);</span></span>
<span id="cb239-9"><a href="#cb239-9" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> to_lowercase<span class="op">(</span><span class="dt">char</span> <span class="op">*</span>str<span class="op">);</span></span>
<span id="cb239-10"><a href="#cb239-10" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> reverse_string<span class="op">(</span><span class="dt">char</span> <span class="op">*</span>str<span class="op">);</span></span>
<span id="cb239-11"><a href="#cb239-11" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> count_words<span class="op">(</span><span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>str<span class="op">);</span></span>
<span id="cb239-12"><a href="#cb239-12" aria-hidden="true" tabindex="-1"></a><span class="dt">char</span><span class="op">*</span> trim_whitespace<span class="op">(</span><span class="dt">char</span> <span class="op">*</span>str<span class="op">);</span></span>
<span id="cb239-13"><a href="#cb239-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb239-14"><a href="#cb239-14" aria-hidden="true" tabindex="-1"></a><span class="pp">#endif </span><span class="co">/* STRING_UTILS_H */</span></span></code></pre></div>
<p><strong>string_utils.c（文字列関数の実装）</strong></p>
<div class="sourceCode" id="cb240"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb240-1"><a href="#cb240-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&quot;string_utils.h&quot;</span></span>
<span id="cb240-2"><a href="#cb240-2" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb240-3"><a href="#cb240-3" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> to_uppercase<span class="op">(</span><span class="dt">char</span> <span class="op">*</span>str<span class="op">)</span></span>
<span id="cb240-4"><a href="#cb240-4" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb240-5"><a href="#cb240-5" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>str <span class="op">==</span> NULL<span class="op">)</span> <span class="cf">return</span><span class="op">;</span></span>
<span id="cb240-6"><a href="#cb240-6" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb240-7"><a href="#cb240-7" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(*</span>str<span class="op">)</span> <span class="op">{</span></span>
<span id="cb240-8"><a href="#cb240-8" aria-hidden="true" tabindex="-1"></a>        <span class="op">*</span>str <span class="op">=</span> toupper<span class="op">((</span><span class="dt">unsigned</span> <span class="dt">char</span><span class="op">)*</span>str<span class="op">);</span></span>
<span id="cb240-9"><a href="#cb240-9" aria-hidden="true" tabindex="-1"></a>        str<span class="op">++;</span></span>
<span id="cb240-10"><a href="#cb240-10" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb240-11"><a href="#cb240-11" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb240-12"><a href="#cb240-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb240-13"><a href="#cb240-13" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> to_lowercase<span class="op">(</span><span class="dt">char</span> <span class="op">*</span>str<span class="op">)</span></span>
<span id="cb240-14"><a href="#cb240-14" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb240-15"><a href="#cb240-15" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>str <span class="op">==</span> NULL<span class="op">)</span> <span class="cf">return</span><span class="op">;</span></span>
<span id="cb240-16"><a href="#cb240-16" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb240-17"><a href="#cb240-17" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(*</span>str<span class="op">)</span> <span class="op">{</span></span>
<span id="cb240-18"><a href="#cb240-18" aria-hidden="true" tabindex="-1"></a>        <span class="op">*</span>str <span class="op">=</span> tolower<span class="op">((</span><span class="dt">unsigned</span> <span class="dt">char</span><span class="op">)*</span>str<span class="op">);</span></span>
<span id="cb240-19"><a href="#cb240-19" aria-hidden="true" tabindex="-1"></a>        str<span class="op">++;</span></span>
<span id="cb240-20"><a href="#cb240-20" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb240-21"><a href="#cb240-21" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb240-22"><a href="#cb240-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb240-23"><a href="#cb240-23" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> reverse_string<span class="op">(</span><span class="dt">char</span> <span class="op">*</span>str<span class="op">)</span></span>
<span id="cb240-24"><a href="#cb240-24" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb240-25"><a href="#cb240-25" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> len<span class="op">,</span> i<span class="op">;</span></span>
<span id="cb240-26"><a href="#cb240-26" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> temp<span class="op">;</span></span>
<span id="cb240-27"><a href="#cb240-27" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb240-28"><a href="#cb240-28" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>str <span class="op">==</span> NULL<span class="op">)</span> <span class="cf">return</span><span class="op">;</span></span>
<span id="cb240-29"><a href="#cb240-29" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb240-30"><a href="#cb240-30" aria-hidden="true" tabindex="-1"></a>    len <span class="op">=</span> strlen<span class="op">(</span>str<span class="op">);</span></span>
<span id="cb240-31"><a href="#cb240-31" aria-hidden="true" tabindex="-1"></a>    <span class="cf">for</span> <span class="op">(</span>i <span class="op">=</span> <span class="dv">0</span><span class="op">;</span> i <span class="op">&lt;</span> len <span class="op">/</span> <span class="dv">2</span><span class="op">;</span> i<span class="op">++)</span> <span class="op">{</span></span>
<span id="cb240-32"><a href="#cb240-32" aria-hidden="true" tabindex="-1"></a>        temp <span class="op">=</span> str<span class="op">[</span>i<span class="op">];</span></span>
<span id="cb240-33"><a href="#cb240-33" aria-hidden="true" tabindex="-1"></a>        str<span class="op">[</span>i<span class="op">]</span> <span class="op">=</span> str<span class="op">[</span>len <span class="op">-</span> <span class="dv">1</span> <span class="op">-</span> i<span class="op">];</span></span>
<span id="cb240-34"><a href="#cb240-34" aria-hidden="true" tabindex="-1"></a>        str<span class="op">[</span>len <span class="op">-</span> <span class="dv">1</span> <span class="op">-</span> i<span class="op">]</span> <span class="op">=</span> temp<span class="op">;</span></span>
<span id="cb240-35"><a href="#cb240-35" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb240-36"><a href="#cb240-36" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb240-37"><a href="#cb240-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb240-38"><a href="#cb240-38" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> count_words<span class="op">(</span><span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>str<span class="op">)</span></span>
<span id="cb240-39"><a href="#cb240-39" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb240-40"><a href="#cb240-40" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> count <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb240-41"><a href="#cb240-41" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> in_word <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb240-42"><a href="#cb240-42" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb240-43"><a href="#cb240-43" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>str <span class="op">==</span> NULL<span class="op">)</span> <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb240-44"><a href="#cb240-44" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb240-45"><a href="#cb240-45" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(*</span>str<span class="op">)</span> <span class="op">{</span></span>
<span id="cb240-46"><a href="#cb240-46" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>isspace<span class="op">((</span><span class="dt">unsigned</span> <span class="dt">char</span><span class="op">)*</span>str<span class="op">))</span> <span class="op">{</span></span>
<span id="cb240-47"><a href="#cb240-47" aria-hidden="true" tabindex="-1"></a>            in_word <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb240-48"><a href="#cb240-48" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span> <span class="cf">else</span> <span class="cf">if</span> <span class="op">(!</span>in_word<span class="op">)</span> <span class="op">{</span></span>
<span id="cb240-49"><a href="#cb240-49" aria-hidden="true" tabindex="-1"></a>            in_word <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb240-50"><a href="#cb240-50" aria-hidden="true" tabindex="-1"></a>            count<span class="op">++;</span></span>
<span id="cb240-51"><a href="#cb240-51" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb240-52"><a href="#cb240-52" aria-hidden="true" tabindex="-1"></a>        str<span class="op">++;</span></span>
<span id="cb240-53"><a href="#cb240-53" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb240-54"><a href="#cb240-54" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb240-55"><a href="#cb240-55" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> count<span class="op">;</span></span>
<span id="cb240-56"><a href="#cb240-56" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb240-57"><a href="#cb240-57" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb240-58"><a href="#cb240-58" aria-hidden="true" tabindex="-1"></a><span class="dt">char</span><span class="op">*</span> trim_whitespace<span class="op">(</span><span class="dt">char</span> <span class="op">*</span>str<span class="op">)</span></span>
<span id="cb240-59"><a href="#cb240-59" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb240-60"><a href="#cb240-60" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> <span class="op">*</span>end<span class="op">;</span></span>
<span id="cb240-61"><a href="#cb240-61" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb240-62"><a href="#cb240-62" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>str <span class="op">==</span> NULL<span class="op">)</span> <span class="cf">return</span> NULL<span class="op">;</span></span>
<span id="cb240-63"><a href="#cb240-63" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb240-64"><a href="#cb240-64" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 先頭の空白をスキップ */</span></span>
<span id="cb240-65"><a href="#cb240-65" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>isspace<span class="op">((</span><span class="dt">unsigned</span> <span class="dt">char</span><span class="op">)*</span>str<span class="op">))</span> str<span class="op">++;</span></span>
<span id="cb240-66"><a href="#cb240-66" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb240-67"><a href="#cb240-67" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(*</span>str <span class="op">==</span> <span class="ch">&#39;</span><span class="sc">\0</span><span class="ch">&#39;</span><span class="op">)</span> <span class="cf">return</span> str<span class="op">;</span></span>
<span id="cb240-68"><a href="#cb240-68" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb240-69"><a href="#cb240-69" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 末尾の空白を削除 */</span></span>
<span id="cb240-70"><a href="#cb240-70" aria-hidden="true" tabindex="-1"></a>    end <span class="op">=</span> str <span class="op">+</span> strlen<span class="op">(</span>str<span class="op">)</span> <span class="op">-</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb240-71"><a href="#cb240-71" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>end <span class="op">&gt;</span> str <span class="op">&amp;&amp;</span> isspace<span class="op">((</span><span class="dt">unsigned</span> <span class="dt">char</span><span class="op">)*</span>end<span class="op">))</span> end<span class="op">--;</span></span>
<span id="cb240-72"><a href="#cb240-72" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb240-73"><a href="#cb240-73" aria-hidden="true" tabindex="-1"></a>    end<span class="op">[</span><span class="dv">1</span><span class="op">]</span> <span class="op">=</span> <span class="ch">&#39;</span><span class="sc">\0</span><span class="ch">&#39;</span><span class="op">;</span></span>
<span id="cb240-74"><a href="#cb240-74" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb240-75"><a href="#cb240-75" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> str<span class="op">;</span></span>
<span id="cb240-76"><a href="#cb240-76" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 data-number="14.3.2" id="extern宣言とグローバル変数"><span
class="header-section-number">14.3.2</span> extern宣言とグローバル変数
🌐</h3>
<p>複数ファイル間でグローバル変数を共有する方法を学習します。</p>
<h4 data-number="14.3.2.1" id="グローバル変数の管理"><span
class="header-section-number">14.3.2.1</span> グローバル変数の管理</h4>
<p><strong>globals.h（グローバル変数の宣言）</strong></p>
<div class="sourceCode" id="cb241"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb241-1"><a href="#cb241-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#ifndef GLOBALS_H</span></span>
<span id="cb241-2"><a href="#cb241-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#define GLOBALS_H</span></span>
<span id="cb241-3"><a href="#cb241-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb241-4"><a href="#cb241-4" aria-hidden="true" tabindex="-1"></a><span class="co">/* グローバル変数の宣言（extern） */</span></span>
<span id="cb241-5"><a href="#cb241-5" aria-hidden="true" tabindex="-1"></a><span class="kw">extern</span> <span class="dt">int</span> g_debug_mode<span class="op">;</span></span>
<span id="cb241-6"><a href="#cb241-6" aria-hidden="true" tabindex="-1"></a><span class="kw">extern</span> <span class="dt">char</span> g_application_name<span class="op">[</span><span class="dv">50</span><span class="op">];</span></span>
<span id="cb241-7"><a href="#cb241-7" aria-hidden="true" tabindex="-1"></a><span class="kw">extern</span> <span class="dt">double</span> g_version<span class="op">;</span></span>
<span id="cb241-8"><a href="#cb241-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb241-9"><a href="#cb241-9" aria-hidden="true" tabindex="-1"></a><span class="co">/* グローバル関数の宣言 */</span></span>
<span id="cb241-10"><a href="#cb241-10" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> init_globals<span class="op">(</span><span class="dt">void</span><span class="op">);</span></span>
<span id="cb241-11"><a href="#cb241-11" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> print_globals<span class="op">(</span><span class="dt">void</span><span class="op">);</span></span>
<span id="cb241-12"><a href="#cb241-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb241-13"><a href="#cb241-13" aria-hidden="true" tabindex="-1"></a><span class="pp">#endif </span><span class="co">/* GLOBALS_H */</span></span></code></pre></div>
<p><strong>globals.c（グローバル変数の定義）</strong></p>
<div class="sourceCode" id="cb242"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb242-1"><a href="#cb242-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb242-2"><a href="#cb242-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;string.h&gt;</span></span>
<span id="cb242-3"><a href="#cb242-3" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&quot;globals.h&quot;</span></span>
<span id="cb242-4"><a href="#cb242-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb242-5"><a href="#cb242-5" aria-hidden="true" tabindex="-1"></a><span class="co">/* グローバル変数の定義（実体） */</span></span>
<span id="cb242-6"><a href="#cb242-6" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> g_debug_mode <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb242-7"><a href="#cb242-7" aria-hidden="true" tabindex="-1"></a><span class="dt">char</span> g_application_name<span class="op">[</span><span class="dv">50</span><span class="op">]</span> <span class="op">=</span> <span class="st">&quot;MyApplication&quot;</span><span class="op">;</span></span>
<span id="cb242-8"><a href="#cb242-8" aria-hidden="true" tabindex="-1"></a><span class="dt">double</span> g_version <span class="op">=</span> <span class="fl">1.0</span><span class="op">;</span></span>
<span id="cb242-9"><a href="#cb242-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb242-10"><a href="#cb242-10" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> init_globals<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb242-11"><a href="#cb242-11" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb242-12"><a href="#cb242-12" aria-hidden="true" tabindex="-1"></a>    g_debug_mode <span class="op">=</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb242-13"><a href="#cb242-13" aria-hidden="true" tabindex="-1"></a>    strcpy<span class="op">(</span>g_application_name<span class="op">,</span> <span class="st">&quot;Advanced C Tutorial&quot;</span><span class="op">);</span></span>
<span id="cb242-14"><a href="#cb242-14" aria-hidden="true" tabindex="-1"></a>    g_version <span class="op">=</span> <span class="fl">2.1</span><span class="op">;</span></span>
<span id="cb242-15"><a href="#cb242-15" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb242-16"><a href="#cb242-16" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;グローバル変数を初期化しました</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb242-17"><a href="#cb242-17" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb242-18"><a href="#cb242-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb242-19"><a href="#cb242-19" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> print_globals<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb242-20"><a href="#cb242-20" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb242-21"><a href="#cb242-21" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== グローバル変数 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb242-22"><a href="#cb242-22" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;アプリケーション名: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> g_application_name<span class="op">);</span></span>
<span id="cb242-23"><a href="#cb242-23" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;バージョン: </span><span class="sc">%.1f\n</span><span class="st">&quot;</span><span class="op">,</span> g_version<span class="op">);</span></span>
<span id="cb242-24"><a href="#cb242-24" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;デバッグモード: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> g_debug_mode <span class="op">?</span> <span class="st">&quot;ON&quot;</span> <span class="op">:</span> <span class="st">&quot;OFF&quot;</span><span class="op">);</span></span>
<span id="cb242-25"><a href="#cb242-25" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p><strong>module1.c（モジュール1）</strong></p>
<div class="sourceCode" id="cb243"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb243-1"><a href="#cb243-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb243-2"><a href="#cb243-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&quot;globals.h&quot;</span></span>
<span id="cb243-3"><a href="#cb243-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb243-4"><a href="#cb243-4" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> module1_function<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb243-5"><a href="#cb243-5" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb243-6"><a href="#cb243-6" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;[モジュール1] 実行中</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb243-7"><a href="#cb243-7" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb243-8"><a href="#cb243-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>g_debug_mode<span class="op">)</span> <span class="op">{</span></span>
<span id="cb243-9"><a href="#cb243-9" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;[DEBUG] モジュール1の詳細情報</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb243-10"><a href="#cb243-10" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb243-11"><a href="#cb243-11" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb243-12"><a href="#cb243-12" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;[モジュール1] アプリケーション: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> g_application_name<span class="op">);</span></span>
<span id="cb243-13"><a href="#cb243-13" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p><strong>module2.c（モジュール2）</strong></p>
<div class="sourceCode" id="cb244"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb244-1"><a href="#cb244-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb244-2"><a href="#cb244-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&quot;globals.h&quot;</span></span>
<span id="cb244-3"><a href="#cb244-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb244-4"><a href="#cb244-4" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> module2_function<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb244-5"><a href="#cb244-5" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb244-6"><a href="#cb244-6" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;[モジュール2] 実行中</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb244-7"><a href="#cb244-7" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb244-8"><a href="#cb244-8" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>g_debug_mode<span class="op">)</span> <span class="op">{</span></span>
<span id="cb244-9"><a href="#cb244-9" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;[DEBUG] モジュール2の詳細情報</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb244-10"><a href="#cb244-10" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb244-11"><a href="#cb244-11" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb244-12"><a href="#cb244-12" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* バージョンチェック */</span></span>
<span id="cb244-13"><a href="#cb244-13" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>g_version <span class="op">&gt;=</span> <span class="fl">2.0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb244-14"><a href="#cb244-14" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;[モジュール2] 新機能が利用可能です</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb244-15"><a href="#cb244-15" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb244-16"><a href="#cb244-16" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 data-number="14.3.3" id="プリプロセッサ機能"><span
class="header-section-number">14.3.3</span> プリプロセッサ機能 🔧</h3>
<p>プリプロセッサを使ってより柔軟なプログラムを作成します。</p>
<h4 data-number="14.3.3.1" id="マクロの活用"><span
class="header-section-number">14.3.3.1</span> マクロの活用</h4>
<p><strong>macros.h（マクロ定義集）</strong></p>
<div class="sourceCode" id="cb245"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb245-1"><a href="#cb245-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#ifndef MACROS_H</span></span>
<span id="cb245-2"><a href="#cb245-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#define MACROS_H</span></span>
<span id="cb245-3"><a href="#cb245-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb245-4"><a href="#cb245-4" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb245-5"><a href="#cb245-5" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdlib.h&gt;</span></span>
<span id="cb245-6"><a href="#cb245-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb245-7"><a href="#cb245-7" aria-hidden="true" tabindex="-1"></a><span class="co">/* 基本的なマクロ */</span></span>
<span id="cb245-8"><a href="#cb245-8" aria-hidden="true" tabindex="-1"></a><span class="pp">#define MAX</span><span class="op">(</span><span class="pp">a</span><span class="op">,</span><span class="pp"> b</span><span class="op">)</span><span class="pp"> </span><span class="op">((</span><span class="pp">a</span><span class="op">)</span><span class="pp"> </span><span class="op">&gt;</span><span class="pp"> </span><span class="op">(</span><span class="pp">b</span><span class="op">)</span><span class="pp"> </span><span class="op">?</span><span class="pp"> </span><span class="op">(</span><span class="pp">a</span><span class="op">)</span><span class="pp"> </span><span class="op">:</span><span class="pp"> </span><span class="op">(</span><span class="pp">b</span><span class="op">))</span></span>
<span id="cb245-9"><a href="#cb245-9" aria-hidden="true" tabindex="-1"></a><span class="pp">#define MIN</span><span class="op">(</span><span class="pp">a</span><span class="op">,</span><span class="pp"> b</span><span class="op">)</span><span class="pp"> </span><span class="op">((</span><span class="pp">a</span><span class="op">)</span><span class="pp"> </span><span class="op">&lt;</span><span class="pp"> </span><span class="op">(</span><span class="pp">b</span><span class="op">)</span><span class="pp"> </span><span class="op">?</span><span class="pp"> </span><span class="op">(</span><span class="pp">a</span><span class="op">)</span><span class="pp"> </span><span class="op">:</span><span class="pp"> </span><span class="op">(</span><span class="pp">b</span><span class="op">))</span></span>
<span id="cb245-10"><a href="#cb245-10" aria-hidden="true" tabindex="-1"></a><span class="pp">#define ABS</span><span class="op">(</span><span class="pp">x</span><span class="op">)</span><span class="pp"> </span><span class="op">((</span><span class="pp">x</span><span class="op">)</span><span class="pp"> </span><span class="op">&lt;</span><span class="pp"> </span><span class="dv">0</span><span class="pp"> </span><span class="op">?</span><span class="pp"> </span><span class="op">-(</span><span class="pp">x</span><span class="op">)</span><span class="pp"> </span><span class="op">:</span><span class="pp"> </span><span class="op">(</span><span class="pp">x</span><span class="op">))</span></span>
<span id="cb245-11"><a href="#cb245-11" aria-hidden="true" tabindex="-1"></a><span class="pp">#define SQUARE</span><span class="op">(</span><span class="pp">x</span><span class="op">)</span><span class="pp"> </span><span class="op">((</span><span class="pp">x</span><span class="op">)</span><span class="pp"> </span><span class="op">*</span><span class="pp"> </span><span class="op">(</span><span class="pp">x</span><span class="op">))</span></span>
<span id="cb245-12"><a href="#cb245-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb245-13"><a href="#cb245-13" aria-hidden="true" tabindex="-1"></a><span class="co">/* 配列サイズ計算 */</span></span>
<span id="cb245-14"><a href="#cb245-14" aria-hidden="true" tabindex="-1"></a><span class="pp">#define ARRAY_SIZE</span><span class="op">(</span><span class="pp">arr</span><span class="op">)</span><span class="pp"> </span><span class="op">(</span><span class="kw">sizeof</span><span class="op">(</span><span class="pp">arr</span><span class="op">)</span><span class="pp"> </span><span class="op">/</span><span class="pp"> </span><span class="kw">sizeof</span><span class="op">((</span><span class="pp">arr</span><span class="op">)[</span><span class="dv">0</span><span class="op">]))</span></span>
<span id="cb245-15"><a href="#cb245-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb245-16"><a href="#cb245-16" aria-hidden="true" tabindex="-1"></a><span class="co">/* メモリ関連 */</span></span>
<span id="cb245-17"><a href="#cb245-17" aria-hidden="true" tabindex="-1"></a><span class="pp">#define SAFE_FREE</span><span class="op">(</span><span class="pp">ptr</span><span class="op">)</span><span class="pp"> </span><span class="cf">do</span><span class="pp"> </span><span class="op">{</span><span class="pp"> </span><span class="op">\</span></span>
<span id="cb245-18"><a href="#cb245-18" aria-hidden="true" tabindex="-1"></a><span class="pp">    </span><span class="cf">if</span><span class="pp"> </span><span class="op">((</span><span class="pp">ptr</span><span class="op">)</span><span class="pp"> </span><span class="op">!=</span><span class="pp"> NULL</span><span class="op">)</span><span class="pp"> </span><span class="op">{</span><span class="pp"> </span><span class="op">\</span></span>
<span id="cb245-19"><a href="#cb245-19" aria-hidden="true" tabindex="-1"></a><span class="pp">        free</span><span class="op">(</span><span class="pp">ptr</span><span class="op">);</span><span class="pp"> </span><span class="op">\</span></span>
<span id="cb245-20"><a href="#cb245-20" aria-hidden="true" tabindex="-1"></a><span class="pp">        </span><span class="op">(</span><span class="pp">ptr</span><span class="op">)</span><span class="pp"> </span><span class="op">=</span><span class="pp"> NULL</span><span class="op">;</span><span class="pp"> </span><span class="op">\</span></span>
<span id="cb245-21"><a href="#cb245-21" aria-hidden="true" tabindex="-1"></a><span class="pp">    </span><span class="op">}</span><span class="pp"> </span><span class="op">\</span></span>
<span id="cb245-22"><a href="#cb245-22" aria-hidden="true" tabindex="-1"></a><span class="op">}</span><span class="pp"> </span><span class="cf">while</span><span class="op">(</span><span class="dv">0</span><span class="op">)</span></span>
<span id="cb245-23"><a href="#cb245-23" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb245-24"><a href="#cb245-24" aria-hidden="true" tabindex="-1"></a><span class="pp">#define MALLOC_CHECK</span><span class="op">(</span><span class="pp">ptr</span><span class="op">,</span><span class="pp"> size</span><span class="op">)</span><span class="pp"> </span><span class="cf">do</span><span class="pp"> </span><span class="op">{</span><span class="pp"> </span><span class="op">\</span></span>
<span id="cb245-25"><a href="#cb245-25" aria-hidden="true" tabindex="-1"></a><span class="pp">    </span><span class="op">(</span><span class="pp">ptr</span><span class="op">)</span><span class="pp"> </span><span class="op">=</span><span class="pp"> malloc</span><span class="op">(</span><span class="pp">size</span><span class="op">);</span><span class="pp"> </span><span class="op">\</span></span>
<span id="cb245-26"><a href="#cb245-26" aria-hidden="true" tabindex="-1"></a><span class="pp">    </span><span class="cf">if</span><span class="pp"> </span><span class="op">((</span><span class="pp">ptr</span><span class="op">)</span><span class="pp"> </span><span class="op">==</span><span class="pp"> NULL</span><span class="op">)</span><span class="pp"> </span><span class="op">{</span><span class="pp"> </span><span class="op">\</span></span>
<span id="cb245-27"><a href="#cb245-27" aria-hidden="true" tabindex="-1"></a><span class="pp">        fprintf</span><span class="op">(</span><span class="pp">stderr</span><span class="op">,</span><span class="pp"> </span><span class="st">&quot;メモリ割り当てエラー: </span><span class="sc">%s</span><span class="st">:</span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span><span class="pp"> __FILE__</span><span class="op">,</span><span class="pp"> __LINE__</span><span class="op">);</span><span class="pp"> </span><span class="op">\</span></span>
<span id="cb245-28"><a href="#cb245-28" aria-hidden="true" tabindex="-1"></a><span class="pp">        exit</span><span class="op">(</span><span class="pp">EXIT_FAILURE</span><span class="op">);</span><span class="pp"> </span><span class="op">\</span></span>
<span id="cb245-29"><a href="#cb245-29" aria-hidden="true" tabindex="-1"></a><span class="pp">    </span><span class="op">}</span><span class="pp"> </span><span class="op">\</span></span>
<span id="cb245-30"><a href="#cb245-30" aria-hidden="true" tabindex="-1"></a><span class="op">}</span><span class="pp"> </span><span class="cf">while</span><span class="op">(</span><span class="dv">0</span><span class="op">)</span></span>
<span id="cb245-31"><a href="#cb245-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb245-32"><a href="#cb245-32" aria-hidden="true" tabindex="-1"></a><span class="co">/* デバッグ用マクロ */</span></span>
<span id="cb245-33"><a href="#cb245-33" aria-hidden="true" tabindex="-1"></a><span class="pp">#ifdef DEBUG</span></span>
<span id="cb245-34"><a href="#cb245-34" aria-hidden="true" tabindex="-1"></a>    <span class="pp">#define DEBUG_PRINT</span><span class="op">(</span><span class="pp">fmt</span><span class="op">,</span><span class="pp"> </span><span class="op">...)</span><span class="pp"> </span><span class="op">\</span></span>
<span id="cb245-35"><a href="#cb245-35" aria-hidden="true" tabindex="-1"></a><span class="pp">        fprintf</span><span class="op">(</span><span class="pp">stderr</span><span class="op">,</span><span class="pp"> </span><span class="st">&quot;[DEBUG </span><span class="sc">%s</span><span class="st">:</span><span class="sc">%d</span><span class="st">] &quot;</span><span class="pp"> fmt </span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span><span class="pp"> __FILE__</span><span class="op">,</span><span class="pp"> __LINE__</span><span class="op">,</span><span class="pp"> </span><span class="op">##</span><span class="pp">__VA_ARGS__</span><span class="op">)</span></span>
<span id="cb245-36"><a href="#cb245-36" aria-hidden="true" tabindex="-1"></a><span class="pp">#else</span></span>
<span id="cb245-37"><a href="#cb245-37" aria-hidden="true" tabindex="-1"></a>    <span class="pp">#define DEBUG_PRINT</span><span class="op">(</span><span class="pp">fmt</span><span class="op">,</span><span class="pp"> </span><span class="op">...)</span><span class="pp"> </span><span class="cf">do</span><span class="pp"> </span><span class="op">{}</span><span class="pp"> </span><span class="cf">while</span><span class="op">(</span><span class="dv">0</span><span class="op">)</span></span>
<span id="cb245-38"><a href="#cb245-38" aria-hidden="true" tabindex="-1"></a><span class="pp">#endif</span></span>
<span id="cb245-39"><a href="#cb245-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb245-40"><a href="#cb245-40" aria-hidden="true" tabindex="-1"></a><span class="co">/* エラーハンドリング */</span></span>
<span id="cb245-41"><a href="#cb245-41" aria-hidden="true" tabindex="-1"></a><span class="pp">#define ERROR_EXIT</span><span class="op">(</span><span class="pp">msg</span><span class="op">)</span><span class="pp"> </span><span class="cf">do</span><span class="pp"> </span><span class="op">{</span><span class="pp"> </span><span class="op">\</span></span>
<span id="cb245-42"><a href="#cb245-42" aria-hidden="true" tabindex="-1"></a><span class="pp">    fprintf</span><span class="op">(</span><span class="pp">stderr</span><span class="op">,</span><span class="pp"> </span><span class="st">&quot;エラー: </span><span class="sc">%s</span><span class="st"> (</span><span class="sc">%s</span><span class="st">:</span><span class="sc">%d</span><span class="st">)</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span><span class="pp"> </span><span class="op">(</span><span class="pp">msg</span><span class="op">),</span><span class="pp"> __FILE__</span><span class="op">,</span><span class="pp"> __LINE__</span><span class="op">);</span><span class="pp"> </span><span class="op">\</span></span>
<span id="cb245-43"><a href="#cb245-43" aria-hidden="true" tabindex="-1"></a><span class="pp">    exit</span><span class="op">(</span><span class="pp">EXIT_FAILURE</span><span class="op">);</span><span class="pp"> </span><span class="op">\</span></span>
<span id="cb245-44"><a href="#cb245-44" aria-hidden="true" tabindex="-1"></a><span class="op">}</span><span class="pp"> </span><span class="cf">while</span><span class="op">(</span><span class="dv">0</span><span class="op">)</span></span>
<span id="cb245-45"><a href="#cb245-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb245-46"><a href="#cb245-46" aria-hidden="true" tabindex="-1"></a><span class="co">/* 関数の開始・終了ログ */</span></span>
<span id="cb245-47"><a href="#cb245-47" aria-hidden="true" tabindex="-1"></a><span class="pp">#ifdef TRACE</span></span>
<span id="cb245-48"><a href="#cb245-48" aria-hidden="true" tabindex="-1"></a>    <span class="pp">#define FUNC_ENTER</span><span class="op">()</span><span class="pp"> printf</span><span class="op">(</span><span class="st">&quot;&gt;&gt; </span><span class="sc">%s</span><span class="st"> 開始</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span><span class="pp"> __FUNCTION__</span><span class="op">)</span></span>
<span id="cb245-49"><a href="#cb245-49" aria-hidden="true" tabindex="-1"></a>    <span class="pp">#define FUNC_EXIT</span><span class="op">()</span><span class="pp"> printf</span><span class="op">(</span><span class="st">&quot;&lt;&lt; </span><span class="sc">%s</span><span class="st"> 終了</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span><span class="pp"> __FUNCTION__</span><span class="op">)</span></span>
<span id="cb245-50"><a href="#cb245-50" aria-hidden="true" tabindex="-1"></a><span class="pp">#else</span></span>
<span id="cb245-51"><a href="#cb245-51" aria-hidden="true" tabindex="-1"></a>    <span class="pp">#define FUNC_ENTER</span><span class="op">()</span><span class="pp"> </span><span class="cf">do</span><span class="pp"> </span><span class="op">{}</span><span class="pp"> </span><span class="cf">while</span><span class="op">(</span><span class="dv">0</span><span class="op">)</span></span>
<span id="cb245-52"><a href="#cb245-52" aria-hidden="true" tabindex="-1"></a>    <span class="pp">#define FUNC_EXIT</span><span class="op">()</span><span class="pp"> </span><span class="cf">do</span><span class="pp"> </span><span class="op">{}</span><span class="pp"> </span><span class="cf">while</span><span class="op">(</span><span class="dv">0</span><span class="op">)</span></span>
<span id="cb245-53"><a href="#cb245-53" aria-hidden="true" tabindex="-1"></a><span class="pp">#endif</span></span>
<span id="cb245-54"><a href="#cb245-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb245-55"><a href="#cb245-55" aria-hidden="true" tabindex="-1"></a><span class="pp">#endif </span><span class="co">/* MACROS_H */</span></span></code></pre></div>
<h4 data-number="14.3.3.2" id="条件コンパイル"><span
class="header-section-number">14.3.3.2</span> 条件コンパイル</h4>
<p><strong>platform.h（プラットフォーム依存処理）</strong></p>
<div class="sourceCode" id="cb246"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb246-1"><a href="#cb246-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#ifndef PLATFORM_H</span></span>
<span id="cb246-2"><a href="#cb246-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#define PLATFORM_H</span></span>
<span id="cb246-3"><a href="#cb246-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb246-4"><a href="#cb246-4" aria-hidden="true" tabindex="-1"></a><span class="co">/* プラットフォーム判定 */</span></span>
<span id="cb246-5"><a href="#cb246-5" aria-hidden="true" tabindex="-1"></a><span class="pp">#ifdef _WIN32</span></span>
<span id="cb246-6"><a href="#cb246-6" aria-hidden="true" tabindex="-1"></a>    <span class="pp">#define OS_WINDOWS</span></span>
<span id="cb246-7"><a href="#cb246-7" aria-hidden="true" tabindex="-1"></a>    <span class="pp">#include </span><span class="im">&lt;windows.h&gt;</span></span>
<span id="cb246-8"><a href="#cb246-8" aria-hidden="true" tabindex="-1"></a>    <span class="pp">#define PATH_SEPARATOR </span><span class="ch">&#39;</span><span class="sc">\\</span><span class="ch">&#39;</span></span>
<span id="cb246-9"><a href="#cb246-9" aria-hidden="true" tabindex="-1"></a>    <span class="pp">#define LINE_ENDING </span><span class="st">&quot;</span><span class="sc">\r\n</span><span class="st">&quot;</span></span>
<span id="cb246-10"><a href="#cb246-10" aria-hidden="true" tabindex="-1"></a><span class="pp">#elif defined(__linux__)</span></span>
<span id="cb246-11"><a href="#cb246-11" aria-hidden="true" tabindex="-1"></a>    <span class="pp">#define OS_LINUX</span></span>
<span id="cb246-12"><a href="#cb246-12" aria-hidden="true" tabindex="-1"></a>    <span class="pp">#include </span><span class="im">&lt;unistd.h&gt;</span></span>
<span id="cb246-13"><a href="#cb246-13" aria-hidden="true" tabindex="-1"></a>    <span class="pp">#define PATH_SEPARATOR </span><span class="ch">&#39;/&#39;</span></span>
<span id="cb246-14"><a href="#cb246-14" aria-hidden="true" tabindex="-1"></a>    <span class="pp">#define LINE_ENDING </span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb246-15"><a href="#cb246-15" aria-hidden="true" tabindex="-1"></a><span class="pp">#elif defined(__APPLE__)</span></span>
<span id="cb246-16"><a href="#cb246-16" aria-hidden="true" tabindex="-1"></a>    <span class="pp">#define OS_MACOS</span></span>
<span id="cb246-17"><a href="#cb246-17" aria-hidden="true" tabindex="-1"></a>    <span class="pp">#include </span><span class="im">&lt;unistd.h&gt;</span></span>
<span id="cb246-18"><a href="#cb246-18" aria-hidden="true" tabindex="-1"></a>    <span class="pp">#define PATH_SEPARATOR </span><span class="ch">&#39;/&#39;</span></span>
<span id="cb246-19"><a href="#cb246-19" aria-hidden="true" tabindex="-1"></a>    <span class="pp">#define LINE_ENDING </span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb246-20"><a href="#cb246-20" aria-hidden="true" tabindex="-1"></a><span class="pp">#else</span></span>
<span id="cb246-21"><a href="#cb246-21" aria-hidden="true" tabindex="-1"></a>    <span class="pp">#define OS_UNKNOWN</span></span>
<span id="cb246-22"><a href="#cb246-22" aria-hidden="true" tabindex="-1"></a>    <span class="pp">#define PATH_SEPARATOR </span><span class="ch">&#39;/&#39;</span></span>
<span id="cb246-23"><a href="#cb246-23" aria-hidden="true" tabindex="-1"></a>    <span class="pp">#define LINE_ENDING </span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span></span>
<span id="cb246-24"><a href="#cb246-24" aria-hidden="true" tabindex="-1"></a><span class="pp">#endif</span></span>
<span id="cb246-25"><a href="#cb246-25" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb246-26"><a href="#cb246-26" aria-hidden="true" tabindex="-1"></a><span class="co">/* コンパイラ判定 */</span></span>
<span id="cb246-27"><a href="#cb246-27" aria-hidden="true" tabindex="-1"></a><span class="pp">#ifdef __GNUC__</span></span>
<span id="cb246-28"><a href="#cb246-28" aria-hidden="true" tabindex="-1"></a>    <span class="pp">#define COMPILER_GCC</span></span>
<span id="cb246-29"><a href="#cb246-29" aria-hidden="true" tabindex="-1"></a>    <span class="pp">#define FORCE_INLINE __inline__</span></span>
<span id="cb246-30"><a href="#cb246-30" aria-hidden="true" tabindex="-1"></a><span class="pp">#elif defined(_MSC_VER)</span></span>
<span id="cb246-31"><a href="#cb246-31" aria-hidden="true" tabindex="-1"></a>    <span class="pp">#define COMPILER_MSVC</span></span>
<span id="cb246-32"><a href="#cb246-32" aria-hidden="true" tabindex="-1"></a>    <span class="pp">#define FORCE_INLINE __forceinline</span></span>
<span id="cb246-33"><a href="#cb246-33" aria-hidden="true" tabindex="-1"></a><span class="pp">#else</span></span>
<span id="cb246-34"><a href="#cb246-34" aria-hidden="true" tabindex="-1"></a>    <span class="pp">#define COMPILER_UNKNOWN</span></span>
<span id="cb246-35"><a href="#cb246-35" aria-hidden="true" tabindex="-1"></a>    <span class="pp">#define FORCE_INLINE </span><span class="kw">inline</span></span>
<span id="cb246-36"><a href="#cb246-36" aria-hidden="true" tabindex="-1"></a><span class="pp">#endif</span></span>
<span id="cb246-37"><a href="#cb246-37" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb246-38"><a href="#cb246-38" aria-hidden="true" tabindex="-1"></a><span class="co">/* バージョン管理 */</span></span>
<span id="cb246-39"><a href="#cb246-39" aria-hidden="true" tabindex="-1"></a><span class="pp">#define VERSION_MAJOR </span><span class="dv">1</span></span>
<span id="cb246-40"><a href="#cb246-40" aria-hidden="true" tabindex="-1"></a><span class="pp">#define VERSION_MINOR </span><span class="dv">2</span></span>
<span id="cb246-41"><a href="#cb246-41" aria-hidden="true" tabindex="-1"></a><span class="pp">#define VERSION_PATCH </span><span class="dv">3</span></span>
<span id="cb246-42"><a href="#cb246-42" aria-hidden="true" tabindex="-1"></a><span class="pp">#define VERSION_STRING </span><span class="st">&quot;1.2.3&quot;</span></span>
<span id="cb246-43"><a href="#cb246-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb246-44"><a href="#cb246-44" aria-hidden="true" tabindex="-1"></a><span class="co">/* 機能フラグ */</span></span>
<span id="cb246-45"><a href="#cb246-45" aria-hidden="true" tabindex="-1"></a><span class="pp">#define FEATURE_LOGGING </span><span class="dv">1</span></span>
<span id="cb246-46"><a href="#cb246-46" aria-hidden="true" tabindex="-1"></a><span class="pp">#define FEATURE_ENCRYPTION </span><span class="dv">0</span></span>
<span id="cb246-47"><a href="#cb246-47" aria-hidden="true" tabindex="-1"></a><span class="pp">#define FEATURE_COMPRESSION </span><span class="dv">1</span></span>
<span id="cb246-48"><a href="#cb246-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb246-49"><a href="#cb246-49" aria-hidden="true" tabindex="-1"></a><span class="co">/* プラットフォーム固有の関数 */</span></span>
<span id="cb246-50"><a href="#cb246-50" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> platform_init<span class="op">(</span><span class="dt">void</span><span class="op">);</span></span>
<span id="cb246-51"><a href="#cb246-51" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> platform_cleanup<span class="op">(</span><span class="dt">void</span><span class="op">);</span></span>
<span id="cb246-52"><a href="#cb246-52" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> platform_sleep<span class="op">(</span><span class="dt">int</span> milliseconds<span class="op">);</span></span>
<span id="cb246-53"><a href="#cb246-53" aria-hidden="true" tabindex="-1"></a><span class="dt">char</span><span class="op">*</span> platform_get_username<span class="op">(</span><span class="dt">void</span><span class="op">);</span></span>
<span id="cb246-54"><a href="#cb246-54" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb246-55"><a href="#cb246-55" aria-hidden="true" tabindex="-1"></a><span class="pp">#endif </span><span class="co">/* PLATFORM_H */</span></span></code></pre></div>
<p><strong>platform.c（プラットフォーム実装）</strong></p>
<div class="sourceCode" id="cb247"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb247-1"><a href="#cb247-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb247-2"><a href="#cb247-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdlib.h&gt;</span></span>
<span id="cb247-3"><a href="#cb247-3" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;string.h&gt;</span></span>
<span id="cb247-4"><a href="#cb247-4" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&quot;platform.h&quot;</span></span>
<span id="cb247-5"><a href="#cb247-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb247-6"><a href="#cb247-6" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> platform_init<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb247-7"><a href="#cb247-7" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb247-8"><a href="#cb247-8" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;プラットフォーム初期化中...</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb247-9"><a href="#cb247-9" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb247-10"><a href="#cb247-10" aria-hidden="true" tabindex="-1"></a>    <span class="pp">#ifdef OS_WINDOWS</span></span>
<span id="cb247-11"><a href="#cb247-11" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;Windows環境を検出</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb247-12"><a href="#cb247-12" aria-hidden="true" tabindex="-1"></a>    <span class="pp">#elif defined(OS_LINUX)</span></span>
<span id="cb247-13"><a href="#cb247-13" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;Linux環境を検出</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb247-14"><a href="#cb247-14" aria-hidden="true" tabindex="-1"></a>    <span class="pp">#elif defined(OS_MACOS)</span></span>
<span id="cb247-15"><a href="#cb247-15" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;macOS環境を検出</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb247-16"><a href="#cb247-16" aria-hidden="true" tabindex="-1"></a>    <span class="pp">#else</span></span>
<span id="cb247-17"><a href="#cb247-17" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;未知の環境</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb247-18"><a href="#cb247-18" aria-hidden="true" tabindex="-1"></a>    <span class="pp">#endif</span></span>
<span id="cb247-19"><a href="#cb247-19" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb247-20"><a href="#cb247-20" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;バージョン: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> VERSION_STRING<span class="op">);</span></span>
<span id="cb247-21"><a href="#cb247-21" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb247-22"><a href="#cb247-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb247-23"><a href="#cb247-23" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> platform_cleanup<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb247-24"><a href="#cb247-24" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb247-25"><a href="#cb247-25" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;プラットフォーム終了処理</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb247-26"><a href="#cb247-26" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb247-27"><a href="#cb247-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb247-28"><a href="#cb247-28" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> platform_sleep<span class="op">(</span><span class="dt">int</span> milliseconds<span class="op">)</span></span>
<span id="cb247-29"><a href="#cb247-29" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb247-30"><a href="#cb247-30" aria-hidden="true" tabindex="-1"></a>    <span class="pp">#ifdef OS_WINDOWS</span></span>
<span id="cb247-31"><a href="#cb247-31" aria-hidden="true" tabindex="-1"></a>        Sleep<span class="op">(</span>milliseconds<span class="op">);</span></span>
<span id="cb247-32"><a href="#cb247-32" aria-hidden="true" tabindex="-1"></a>    <span class="pp">#else</span></span>
<span id="cb247-33"><a href="#cb247-33" aria-hidden="true" tabindex="-1"></a>        usleep<span class="op">(</span>milliseconds <span class="op">*</span> <span class="dv">1000</span><span class="op">);</span></span>
<span id="cb247-34"><a href="#cb247-34" aria-hidden="true" tabindex="-1"></a>    <span class="pp">#endif</span></span>
<span id="cb247-35"><a href="#cb247-35" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb247-36"><a href="#cb247-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb247-37"><a href="#cb247-37" aria-hidden="true" tabindex="-1"></a><span class="dt">char</span><span class="op">*</span> platform_get_username<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb247-38"><a href="#cb247-38" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb247-39"><a href="#cb247-39" aria-hidden="true" tabindex="-1"></a>    <span class="dt">static</span> <span class="dt">char</span> username<span class="op">[</span><span class="dv">256</span><span class="op">];</span></span>
<span id="cb247-40"><a href="#cb247-40" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> <span class="op">*</span>env_user<span class="op">;</span></span>
<span id="cb247-41"><a href="#cb247-41" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb247-42"><a href="#cb247-42" aria-hidden="true" tabindex="-1"></a>    <span class="pp">#ifdef OS_WINDOWS</span></span>
<span id="cb247-43"><a href="#cb247-43" aria-hidden="true" tabindex="-1"></a>        env_user <span class="op">=</span> getenv<span class="op">(</span><span class="st">&quot;USERNAME&quot;</span><span class="op">);</span></span>
<span id="cb247-44"><a href="#cb247-44" aria-hidden="true" tabindex="-1"></a>    <span class="pp">#else</span></span>
<span id="cb247-45"><a href="#cb247-45" aria-hidden="true" tabindex="-1"></a>        env_user <span class="op">=</span> getenv<span class="op">(</span><span class="st">&quot;USER&quot;</span><span class="op">);</span></span>
<span id="cb247-46"><a href="#cb247-46" aria-hidden="true" tabindex="-1"></a>    <span class="pp">#endif</span></span>
<span id="cb247-47"><a href="#cb247-47" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb247-48"><a href="#cb247-48" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>env_user <span class="op">!=</span> NULL<span class="op">)</span> <span class="op">{</span></span>
<span id="cb247-49"><a href="#cb247-49" aria-hidden="true" tabindex="-1"></a>        strncpy<span class="op">(</span>username<span class="op">,</span> env_user<span class="op">,</span> <span class="kw">sizeof</span><span class="op">(</span>username<span class="op">)</span> <span class="op">-</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb247-50"><a href="#cb247-50" aria-hidden="true" tabindex="-1"></a>        username<span class="op">[</span><span class="kw">sizeof</span><span class="op">(</span>username<span class="op">)</span> <span class="op">-</span> <span class="dv">1</span><span class="op">]</span> <span class="op">=</span> <span class="ch">&#39;</span><span class="sc">\0</span><span class="ch">&#39;</span><span class="op">;</span></span>
<span id="cb247-51"><a href="#cb247-51" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> username<span class="op">;</span></span>
<span id="cb247-52"><a href="#cb247-52" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb247-53"><a href="#cb247-53" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb247-54"><a href="#cb247-54" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="st">&quot;unknown&quot;</span><span class="op">;</span></span>
<span id="cb247-55"><a href="#cb247-55" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 data-number="14.3.4" id="モジュール設計パターン"><span
class="header-section-number">14.3.4</span> モジュール設計パターン
🏗️</h3>
<p>効果的なモジュール設計の例を学習します。</p>
<h4 data-number="14.3.4.1" id="ログシステムの実装"><span
class="header-section-number">14.3.4.1</span> ログシステムの実装</h4>
<p><strong>logger.h（ログシステムのインターフェース）</strong></p>
<div class="sourceCode" id="cb248"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb248-1"><a href="#cb248-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#ifndef LOGGER_H</span></span>
<span id="cb248-2"><a href="#cb248-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#define LOGGER_H</span></span>
<span id="cb248-3"><a href="#cb248-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb248-4"><a href="#cb248-4" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb248-5"><a href="#cb248-5" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;time.h&gt;</span></span>
<span id="cb248-6"><a href="#cb248-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb248-7"><a href="#cb248-7" aria-hidden="true" tabindex="-1"></a><span class="co">/* ログレベル定義 */</span></span>
<span id="cb248-8"><a href="#cb248-8" aria-hidden="true" tabindex="-1"></a><span class="kw">typedef</span> <span class="kw">enum</span> <span class="op">{</span></span>
<span id="cb248-9"><a href="#cb248-9" aria-hidden="true" tabindex="-1"></a>    LOG_DEBUG <span class="op">=</span> <span class="dv">0</span><span class="op">,</span></span>
<span id="cb248-10"><a href="#cb248-10" aria-hidden="true" tabindex="-1"></a>    LOG_INFO <span class="op">=</span> <span class="dv">1</span><span class="op">,</span></span>
<span id="cb248-11"><a href="#cb248-11" aria-hidden="true" tabindex="-1"></a>    LOG_WARNING <span class="op">=</span> <span class="dv">2</span><span class="op">,</span></span>
<span id="cb248-12"><a href="#cb248-12" aria-hidden="true" tabindex="-1"></a>    LOG_ERROR <span class="op">=</span> <span class="dv">3</span><span class="op">,</span></span>
<span id="cb248-13"><a href="#cb248-13" aria-hidden="true" tabindex="-1"></a>    LOG_CRITICAL <span class="op">=</span> <span class="dv">4</span></span>
<span id="cb248-14"><a href="#cb248-14" aria-hidden="true" tabindex="-1"></a><span class="op">}</span> LogLevel<span class="op">;</span></span>
<span id="cb248-15"><a href="#cb248-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb248-16"><a href="#cb248-16" aria-hidden="true" tabindex="-1"></a><span class="co">/* ログ設定構造体 */</span></span>
<span id="cb248-17"><a href="#cb248-17" aria-hidden="true" tabindex="-1"></a><span class="kw">typedef</span> <span class="kw">struct</span> <span class="op">{</span></span>
<span id="cb248-18"><a href="#cb248-18" aria-hidden="true" tabindex="-1"></a>    LogLevel min_level<span class="op">;</span></span>
<span id="cb248-19"><a href="#cb248-19" aria-hidden="true" tabindex="-1"></a>    <span class="dt">FILE</span> <span class="op">*</span>output_file<span class="op">;</span></span>
<span id="cb248-20"><a href="#cb248-20" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> show_timestamp<span class="op">;</span></span>
<span id="cb248-21"><a href="#cb248-21" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> show_level<span class="op">;</span></span>
<span id="cb248-22"><a href="#cb248-22" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> show_filename<span class="op">;</span></span>
<span id="cb248-23"><a href="#cb248-23" aria-hidden="true" tabindex="-1"></a><span class="op">}</span> LogConfig<span class="op">;</span></span>
<span id="cb248-24"><a href="#cb248-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb248-25"><a href="#cb248-25" aria-hidden="true" tabindex="-1"></a><span class="co">/* ログシステムの初期化・終了 */</span></span>
<span id="cb248-26"><a href="#cb248-26" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> logger_init<span class="op">(</span><span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>filename<span class="op">);</span></span>
<span id="cb248-27"><a href="#cb248-27" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> logger_cleanup<span class="op">(</span><span class="dt">void</span><span class="op">);</span></span>
<span id="cb248-28"><a href="#cb248-28" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb248-29"><a href="#cb248-29" aria-hidden="true" tabindex="-1"></a><span class="co">/* ログレベル設定 */</span></span>
<span id="cb248-30"><a href="#cb248-30" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> logger_set_level<span class="op">(</span>LogLevel level<span class="op">);</span></span>
<span id="cb248-31"><a href="#cb248-31" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> logger_set_output<span class="op">(</span><span class="dt">FILE</span> <span class="op">*</span>file<span class="op">);</span></span>
<span id="cb248-32"><a href="#cb248-32" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb248-33"><a href="#cb248-33" aria-hidden="true" tabindex="-1"></a><span class="co">/* ログ出力関数 */</span></span>
<span id="cb248-34"><a href="#cb248-34" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> log_debug<span class="op">(</span><span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>format<span class="op">,</span> <span class="op">...);</span></span>
<span id="cb248-35"><a href="#cb248-35" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> log_info<span class="op">(</span><span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>format<span class="op">,</span> <span class="op">...);</span></span>
<span id="cb248-36"><a href="#cb248-36" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> log_warning<span class="op">(</span><span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>format<span class="op">,</span> <span class="op">...);</span></span>
<span id="cb248-37"><a href="#cb248-37" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> log_error<span class="op">(</span><span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>format<span class="op">,</span> <span class="op">...);</span></span>
<span id="cb248-38"><a href="#cb248-38" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> log_critical<span class="op">(</span><span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>format<span class="op">,</span> <span class="op">...);</span></span>
<span id="cb248-39"><a href="#cb248-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb248-40"><a href="#cb248-40" aria-hidden="true" tabindex="-1"></a><span class="co">/* 汎用ログ関数 */</span></span>
<span id="cb248-41"><a href="#cb248-41" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> logger_write<span class="op">(</span>LogLevel level<span class="op">,</span> <span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>file<span class="op">,</span> <span class="dt">int</span> line<span class="op">,</span> <span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>format<span class="op">,</span> <span class="op">...);</span></span>
<span id="cb248-42"><a href="#cb248-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb248-43"><a href="#cb248-43" aria-hidden="true" tabindex="-1"></a><span class="co">/* 便利マクロ */</span></span>
<span id="cb248-44"><a href="#cb248-44" aria-hidden="true" tabindex="-1"></a><span class="pp">#define LOG_DEBUG</span><span class="op">(</span><span class="pp">fmt</span><span class="op">,</span><span class="pp"> </span><span class="op">...)</span><span class="pp"> logger_write</span><span class="op">(</span>LOG_DEBUG<span class="op">,</span><span class="pp"> __FILE__</span><span class="op">,</span><span class="pp"> __LINE__</span><span class="op">,</span><span class="pp"> fmt</span><span class="op">,</span><span class="pp"> </span><span class="op">##</span><span class="pp">__VA_ARGS__</span><span class="op">)</span></span>
<span id="cb248-45"><a href="#cb248-45" aria-hidden="true" tabindex="-1"></a><span class="pp">#define LOG_INFO</span><span class="op">(</span><span class="pp">fmt</span><span class="op">,</span><span class="pp"> </span><span class="op">...)</span><span class="pp"> logger_write</span><span class="op">(</span>LOG_INFO<span class="op">,</span><span class="pp"> __FILE__</span><span class="op">,</span><span class="pp"> __LINE__</span><span class="op">,</span><span class="pp"> fmt</span><span class="op">,</span><span class="pp"> </span><span class="op">##</span><span class="pp">__VA_ARGS__</span><span class="op">)</span></span>
<span id="cb248-46"><a href="#cb248-46" aria-hidden="true" tabindex="-1"></a><span class="pp">#define LOG_WARNING</span><span class="op">(</span><span class="pp">fmt</span><span class="op">,</span><span class="pp"> </span><span class="op">...)</span><span class="pp"> logger_write</span><span class="op">(</span>LOG_WARNING<span class="op">,</span><span class="pp"> __FILE__</span><span class="op">,</span><span class="pp"> __LINE__</span><span class="op">,</span><span class="pp"> fmt</span><span class="op">,</span><span class="pp"> </span><span class="op">##</span><span class="pp">__VA_ARGS__</span><span class="op">)</span></span>
<span id="cb248-47"><a href="#cb248-47" aria-hidden="true" tabindex="-1"></a><span class="pp">#define LOG_ERROR</span><span class="op">(</span><span class="pp">fmt</span><span class="op">,</span><span class="pp"> </span><span class="op">...)</span><span class="pp"> logger_write</span><span class="op">(</span>LOG_ERROR<span class="op">,</span><span class="pp"> __FILE__</span><span class="op">,</span><span class="pp"> __LINE__</span><span class="op">,</span><span class="pp"> fmt</span><span class="op">,</span><span class="pp"> </span><span class="op">##</span><span class="pp">__VA_ARGS__</span><span class="op">)</span></span>
<span id="cb248-48"><a href="#cb248-48" aria-hidden="true" tabindex="-1"></a><span class="pp">#define LOG_CRITICAL</span><span class="op">(</span><span class="pp">fmt</span><span class="op">,</span><span class="pp"> </span><span class="op">...)</span><span class="pp"> logger_write</span><span class="op">(</span>LOG_CRITICAL<span class="op">,</span><span class="pp"> __FILE__</span><span class="op">,</span><span class="pp"> __LINE__</span><span class="op">,</span><span class="pp"> fmt</span><span class="op">,</span><span class="pp"> </span><span class="op">##</span><span class="pp">__VA_ARGS__</span><span class="op">)</span></span>
<span id="cb248-49"><a href="#cb248-49" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb248-50"><a href="#cb248-50" aria-hidden="true" tabindex="-1"></a><span class="pp">#endif </span><span class="co">/* LOGGER_H */</span></span></code></pre></div>
<p><strong>logger.c（ログシステムの実装）</strong></p>
<div class="sourceCode" id="cb249"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb249-1"><a href="#cb249-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdarg.h&gt;</span></span>
<span id="cb249-2"><a href="#cb249-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;string.h&gt;</span></span>
<span id="cb249-3"><a href="#cb249-3" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdlib.h&gt;</span></span>
<span id="cb249-4"><a href="#cb249-4" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&quot;logger.h&quot;</span></span>
<span id="cb249-5"><a href="#cb249-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb249-6"><a href="#cb249-6" aria-hidden="true" tabindex="-1"></a><span class="co">/* プライベート変数 */</span></span>
<span id="cb249-7"><a href="#cb249-7" aria-hidden="true" tabindex="-1"></a><span class="dt">static</span> LogConfig g_log_config <span class="op">=</span> <span class="op">{</span></span>
<span id="cb249-8"><a href="#cb249-8" aria-hidden="true" tabindex="-1"></a>    LOG_INFO<span class="op">,</span>    <span class="co">/* デフォルトはINFO以上 */</span></span>
<span id="cb249-9"><a href="#cb249-9" aria-hidden="true" tabindex="-1"></a>    NULL<span class="op">,</span>        <span class="co">/* stdoutを使用 */</span></span>
<span id="cb249-10"><a href="#cb249-10" aria-hidden="true" tabindex="-1"></a>    <span class="dv">1</span><span class="op">,</span>           <span class="co">/* タイムスタンプ表示 */</span></span>
<span id="cb249-11"><a href="#cb249-11" aria-hidden="true" tabindex="-1"></a>    <span class="dv">1</span><span class="op">,</span>           <span class="co">/* レベル表示 */</span></span>
<span id="cb249-12"><a href="#cb249-12" aria-hidden="true" tabindex="-1"></a>    <span class="dv">0</span>            <span class="co">/* ファイル名非表示 */</span></span>
<span id="cb249-13"><a href="#cb249-13" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb249-14"><a href="#cb249-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb249-15"><a href="#cb249-15" aria-hidden="true" tabindex="-1"></a><span class="dt">static</span> <span class="dt">FILE</span> <span class="op">*</span>g_log_file <span class="op">=</span> NULL<span class="op">;</span></span>
<span id="cb249-16"><a href="#cb249-16" aria-hidden="true" tabindex="-1"></a><span class="dt">static</span> <span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>g_level_names<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span></span>
<span id="cb249-17"><a href="#cb249-17" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;DEBUG&quot;</span><span class="op">,</span> <span class="st">&quot;INFO&quot;</span><span class="op">,</span> <span class="st">&quot;WARNING&quot;</span><span class="op">,</span> <span class="st">&quot;ERROR&quot;</span><span class="op">,</span> <span class="st">&quot;CRITICAL&quot;</span></span>
<span id="cb249-18"><a href="#cb249-18" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb249-19"><a href="#cb249-19" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb249-20"><a href="#cb249-20" aria-hidden="true" tabindex="-1"></a><span class="co">/* プライベート関数 */</span></span>
<span id="cb249-21"><a href="#cb249-21" aria-hidden="true" tabindex="-1"></a><span class="dt">static</span> <span class="dt">const</span> <span class="dt">char</span><span class="op">*</span> get_timestamp<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb249-22"><a href="#cb249-22" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb249-23"><a href="#cb249-23" aria-hidden="true" tabindex="-1"></a>    <span class="dt">static</span> <span class="dt">char</span> timestamp<span class="op">[</span><span class="dv">64</span><span class="op">];</span></span>
<span id="cb249-24"><a href="#cb249-24" aria-hidden="true" tabindex="-1"></a>    <span class="dt">time_t</span> now<span class="op">;</span></span>
<span id="cb249-25"><a href="#cb249-25" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> tm <span class="op">*</span>local_time<span class="op">;</span></span>
<span id="cb249-26"><a href="#cb249-26" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb249-27"><a href="#cb249-27" aria-hidden="true" tabindex="-1"></a>    time<span class="op">(&amp;</span>now<span class="op">);</span></span>
<span id="cb249-28"><a href="#cb249-28" aria-hidden="true" tabindex="-1"></a>    local_time <span class="op">=</span> localtime<span class="op">(&amp;</span>now<span class="op">);</span></span>
<span id="cb249-29"><a href="#cb249-29" aria-hidden="true" tabindex="-1"></a>    strftime<span class="op">(</span>timestamp<span class="op">,</span> <span class="kw">sizeof</span><span class="op">(</span>timestamp<span class="op">),</span> <span class="st">&quot;%Y-%m-</span><span class="sc">%d</span><span class="st"> %H:%M:%S&quot;</span><span class="op">,</span> local_time<span class="op">);</span></span>
<span id="cb249-30"><a href="#cb249-30" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb249-31"><a href="#cb249-31" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> timestamp<span class="op">;</span></span>
<span id="cb249-32"><a href="#cb249-32" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb249-33"><a href="#cb249-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb249-34"><a href="#cb249-34" aria-hidden="true" tabindex="-1"></a><span class="dt">static</span> <span class="dt">const</span> <span class="dt">char</span><span class="op">*</span> get_filename<span class="op">(</span><span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>filepath<span class="op">)</span></span>
<span id="cb249-35"><a href="#cb249-35" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb249-36"><a href="#cb249-36" aria-hidden="true" tabindex="-1"></a>    <span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>filename <span class="op">=</span> strrchr<span class="op">(</span>filepath<span class="op">,</span> <span class="ch">&#39;/&#39;</span><span class="op">);</span></span>
<span id="cb249-37"><a href="#cb249-37" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>filename <span class="op">==</span> NULL<span class="op">)</span> <span class="op">{</span></span>
<span id="cb249-38"><a href="#cb249-38" aria-hidden="true" tabindex="-1"></a>        filename <span class="op">=</span> strrchr<span class="op">(</span>filepath<span class="op">,</span> <span class="ch">&#39;</span><span class="sc">\\</span><span class="ch">&#39;</span><span class="op">);</span></span>
<span id="cb249-39"><a href="#cb249-39" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb249-40"><a href="#cb249-40" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> filename <span class="op">?</span> filename <span class="op">+</span> <span class="dv">1</span> <span class="op">:</span> filepath<span class="op">;</span></span>
<span id="cb249-41"><a href="#cb249-41" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb249-42"><a href="#cb249-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb249-43"><a href="#cb249-43" aria-hidden="true" tabindex="-1"></a><span class="co">/* パブリック関数の実装 */</span></span>
<span id="cb249-44"><a href="#cb249-44" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> logger_init<span class="op">(</span><span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>filename<span class="op">)</span></span>
<span id="cb249-45"><a href="#cb249-45" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb249-46"><a href="#cb249-46" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>filename <span class="op">!=</span> NULL<span class="op">)</span> <span class="op">{</span></span>
<span id="cb249-47"><a href="#cb249-47" aria-hidden="true" tabindex="-1"></a>        g_log_file <span class="op">=</span> fopen<span class="op">(</span>filename<span class="op">,</span> <span class="st">&quot;a&quot;</span><span class="op">);</span></span>
<span id="cb249-48"><a href="#cb249-48" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>g_log_file <span class="op">==</span> NULL<span class="op">)</span> <span class="op">{</span></span>
<span id="cb249-49"><a href="#cb249-49" aria-hidden="true" tabindex="-1"></a>            fprintf<span class="op">(</span>stderr<span class="op">,</span> <span class="st">&quot;ログファイルを開けません: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> filename<span class="op">);</span></span>
<span id="cb249-50"><a href="#cb249-50" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> <span class="op">-</span><span class="dv">1</span><span class="op">;</span></span>
<span id="cb249-51"><a href="#cb249-51" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb249-52"><a href="#cb249-52" aria-hidden="true" tabindex="-1"></a>        g_log_config<span class="op">.</span>output_file <span class="op">=</span> g_log_file<span class="op">;</span></span>
<span id="cb249-53"><a href="#cb249-53" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb249-54"><a href="#cb249-54" aria-hidden="true" tabindex="-1"></a>        g_log_config<span class="op">.</span>output_file <span class="op">=</span> stdout<span class="op">;</span></span>
<span id="cb249-55"><a href="#cb249-55" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb249-56"><a href="#cb249-56" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb249-57"><a href="#cb249-57" aria-hidden="true" tabindex="-1"></a>    LOG_INFO<span class="op">(</span><span class="st">&quot;ログシステム初期化完了&quot;</span><span class="op">);</span></span>
<span id="cb249-58"><a href="#cb249-58" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb249-59"><a href="#cb249-59" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb249-60"><a href="#cb249-60" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb249-61"><a href="#cb249-61" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> logger_cleanup<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb249-62"><a href="#cb249-62" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb249-63"><a href="#cb249-63" aria-hidden="true" tabindex="-1"></a>    LOG_INFO<span class="op">(</span><span class="st">&quot;ログシステム終了&quot;</span><span class="op">);</span></span>
<span id="cb249-64"><a href="#cb249-64" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb249-65"><a href="#cb249-65" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>g_log_file <span class="op">!=</span> NULL <span class="op">&amp;&amp;</span> g_log_file <span class="op">!=</span> stdout <span class="op">&amp;&amp;</span> g_log_file <span class="op">!=</span> stderr<span class="op">)</span> <span class="op">{</span></span>
<span id="cb249-66"><a href="#cb249-66" aria-hidden="true" tabindex="-1"></a>        fclose<span class="op">(</span>g_log_file<span class="op">);</span></span>
<span id="cb249-67"><a href="#cb249-67" aria-hidden="true" tabindex="-1"></a>        g_log_file <span class="op">=</span> NULL<span class="op">;</span></span>
<span id="cb249-68"><a href="#cb249-68" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb249-69"><a href="#cb249-69" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb249-70"><a href="#cb249-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb249-71"><a href="#cb249-71" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> logger_set_level<span class="op">(</span>LogLevel level<span class="op">)</span></span>
<span id="cb249-72"><a href="#cb249-72" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb249-73"><a href="#cb249-73" aria-hidden="true" tabindex="-1"></a>    g_log_config<span class="op">.</span>min_level <span class="op">=</span> level<span class="op">;</span></span>
<span id="cb249-74"><a href="#cb249-74" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb249-75"><a href="#cb249-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb249-76"><a href="#cb249-76" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> logger_set_output<span class="op">(</span><span class="dt">FILE</span> <span class="op">*</span>file<span class="op">)</span></span>
<span id="cb249-77"><a href="#cb249-77" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb249-78"><a href="#cb249-78" aria-hidden="true" tabindex="-1"></a>    g_log_config<span class="op">.</span>output_file <span class="op">=</span> file <span class="op">?</span> file <span class="op">:</span> stdout<span class="op">;</span></span>
<span id="cb249-79"><a href="#cb249-79" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb249-80"><a href="#cb249-80" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb249-81"><a href="#cb249-81" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> logger_write<span class="op">(</span>LogLevel level<span class="op">,</span> <span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>file<span class="op">,</span> <span class="dt">int</span> line<span class="op">,</span> <span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>format<span class="op">,</span> <span class="op">...)</span></span>
<span id="cb249-82"><a href="#cb249-82" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb249-83"><a href="#cb249-83" aria-hidden="true" tabindex="-1"></a>    <span class="dt">va_list</span> args<span class="op">;</span></span>
<span id="cb249-84"><a href="#cb249-84" aria-hidden="true" tabindex="-1"></a>    <span class="dt">FILE</span> <span class="op">*</span>output<span class="op">;</span></span>
<span id="cb249-85"><a href="#cb249-85" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb249-86"><a href="#cb249-86" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* レベルチェック */</span></span>
<span id="cb249-87"><a href="#cb249-87" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>level <span class="op">&lt;</span> g_log_config<span class="op">.</span>min_level<span class="op">)</span> <span class="op">{</span></span>
<span id="cb249-88"><a href="#cb249-88" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span><span class="op">;</span></span>
<span id="cb249-89"><a href="#cb249-89" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb249-90"><a href="#cb249-90" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb249-91"><a href="#cb249-91" aria-hidden="true" tabindex="-1"></a>    output <span class="op">=</span> g_log_config<span class="op">.</span>output_file <span class="op">?</span> g_log_config<span class="op">.</span>output_file <span class="op">:</span> stdout<span class="op">;</span></span>
<span id="cb249-92"><a href="#cb249-92" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb249-93"><a href="#cb249-93" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* タイムスタンプ */</span></span>
<span id="cb249-94"><a href="#cb249-94" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>g_log_config<span class="op">.</span>show_timestamp<span class="op">)</span> <span class="op">{</span></span>
<span id="cb249-95"><a href="#cb249-95" aria-hidden="true" tabindex="-1"></a>        fprintf<span class="op">(</span>output<span class="op">,</span> <span class="st">&quot;[</span><span class="sc">%s</span><span class="st">] &quot;</span><span class="op">,</span> get_timestamp<span class="op">());</span></span>
<span id="cb249-96"><a href="#cb249-96" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb249-97"><a href="#cb249-97" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb249-98"><a href="#cb249-98" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* ログレベル */</span></span>
<span id="cb249-99"><a href="#cb249-99" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>g_log_config<span class="op">.</span>show_level<span class="op">)</span> <span class="op">{</span></span>
<span id="cb249-100"><a href="#cb249-100" aria-hidden="true" tabindex="-1"></a>        fprintf<span class="op">(</span>output<span class="op">,</span> <span class="st">&quot;[</span><span class="sc">%s</span><span class="st">] &quot;</span><span class="op">,</span> g_level_names<span class="op">[</span>level<span class="op">]);</span></span>
<span id="cb249-101"><a href="#cb249-101" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb249-102"><a href="#cb249-102" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb249-103"><a href="#cb249-103" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* ファイル名と行番号 */</span></span>
<span id="cb249-104"><a href="#cb249-104" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>g_log_config<span class="op">.</span>show_filename <span class="op">&amp;&amp;</span> file <span class="op">!=</span> NULL<span class="op">)</span> <span class="op">{</span></span>
<span id="cb249-105"><a href="#cb249-105" aria-hidden="true" tabindex="-1"></a>        fprintf<span class="op">(</span>output<span class="op">,</span> <span class="st">&quot;[</span><span class="sc">%s</span><span class="st">:</span><span class="sc">%d</span><span class="st">] &quot;</span><span class="op">,</span> get_filename<span class="op">(</span>file<span class="op">),</span> line<span class="op">);</span></span>
<span id="cb249-106"><a href="#cb249-106" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb249-107"><a href="#cb249-107" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb249-108"><a href="#cb249-108" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* メッセージ */</span></span>
<span id="cb249-109"><a href="#cb249-109" aria-hidden="true" tabindex="-1"></a>    va_start<span class="op">(</span>args<span class="op">,</span> format<span class="op">);</span></span>
<span id="cb249-110"><a href="#cb249-110" aria-hidden="true" tabindex="-1"></a>    vfprintf<span class="op">(</span>output<span class="op">,</span> format<span class="op">,</span> args<span class="op">);</span></span>
<span id="cb249-111"><a href="#cb249-111" aria-hidden="true" tabindex="-1"></a>    va_end<span class="op">(</span>args<span class="op">);</span></span>
<span id="cb249-112"><a href="#cb249-112" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb249-113"><a href="#cb249-113" aria-hidden="true" tabindex="-1"></a>    fprintf<span class="op">(</span>output<span class="op">,</span> <span class="st">&quot;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb249-114"><a href="#cb249-114" aria-hidden="true" tabindex="-1"></a>    fflush<span class="op">(</span>output<span class="op">);</span></span>
<span id="cb249-115"><a href="#cb249-115" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb249-116"><a href="#cb249-116" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb249-117"><a href="#cb249-117" aria-hidden="true" tabindex="-1"></a><span class="co">/* 便利関数 */</span></span>
<span id="cb249-118"><a href="#cb249-118" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> log_debug<span class="op">(</span><span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>format<span class="op">,</span> <span class="op">...)</span></span>
<span id="cb249-119"><a href="#cb249-119" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb249-120"><a href="#cb249-120" aria-hidden="true" tabindex="-1"></a>    <span class="dt">va_list</span> args<span class="op">;</span></span>
<span id="cb249-121"><a href="#cb249-121" aria-hidden="true" tabindex="-1"></a>    va_start<span class="op">(</span>args<span class="op">,</span> format<span class="op">);</span></span>
<span id="cb249-122"><a href="#cb249-122" aria-hidden="true" tabindex="-1"></a>    logger_write<span class="op">(</span>LOG_DEBUG<span class="op">,</span> NULL<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> format<span class="op">,</span> args<span class="op">);</span></span>
<span id="cb249-123"><a href="#cb249-123" aria-hidden="true" tabindex="-1"></a>    va_end<span class="op">(</span>args<span class="op">);</span></span>
<span id="cb249-124"><a href="#cb249-124" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb249-125"><a href="#cb249-125" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb249-126"><a href="#cb249-126" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> log_info<span class="op">(</span><span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>format<span class="op">,</span> <span class="op">...)</span></span>
<span id="cb249-127"><a href="#cb249-127" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb249-128"><a href="#cb249-128" aria-hidden="true" tabindex="-1"></a>    <span class="dt">va_list</span> args<span class="op">;</span></span>
<span id="cb249-129"><a href="#cb249-129" aria-hidden="true" tabindex="-1"></a>    va_start<span class="op">(</span>args<span class="op">,</span> format<span class="op">);</span></span>
<span id="cb249-130"><a href="#cb249-130" aria-hidden="true" tabindex="-1"></a>    logger_write<span class="op">(</span>LOG_INFO<span class="op">,</span> NULL<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> format<span class="op">,</span> args<span class="op">);</span></span>
<span id="cb249-131"><a href="#cb249-131" aria-hidden="true" tabindex="-1"></a>    va_end<span class="op">(</span>args<span class="op">);</span></span>
<span id="cb249-132"><a href="#cb249-132" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb249-133"><a href="#cb249-133" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb249-134"><a href="#cb249-134" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> log_warning<span class="op">(</span><span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>format<span class="op">,</span> <span class="op">...)</span></span>
<span id="cb249-135"><a href="#cb249-135" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb249-136"><a href="#cb249-136" aria-hidden="true" tabindex="-1"></a>    <span class="dt">va_list</span> args<span class="op">;</span></span>
<span id="cb249-137"><a href="#cb249-137" aria-hidden="true" tabindex="-1"></a>    va_start<span class="op">(</span>args<span class="op">,</span> format<span class="op">);</span></span>
<span id="cb249-138"><a href="#cb249-138" aria-hidden="true" tabindex="-1"></a>    logger_write<span class="op">(</span>LOG_WARNING<span class="op">,</span> NULL<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> format<span class="op">,</span> args<span class="op">);</span></span>
<span id="cb249-139"><a href="#cb249-139" aria-hidden="true" tabindex="-1"></a>    va_end<span class="op">(</span>args<span class="op">);</span></span>
<span id="cb249-140"><a href="#cb249-140" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb249-141"><a href="#cb249-141" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb249-142"><a href="#cb249-142" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> log_error<span class="op">(</span><span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>format<span class="op">,</span> <span class="op">...)</span></span>
<span id="cb249-143"><a href="#cb249-143" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb249-144"><a href="#cb249-144" aria-hidden="true" tabindex="-1"></a>    <span class="dt">va_list</span> args<span class="op">;</span></span>
<span id="cb249-145"><a href="#cb249-145" aria-hidden="true" tabindex="-1"></a>    va_start<span class="op">(</span>args<span class="op">,</span> format<span class="op">);</span></span>
<span id="cb249-146"><a href="#cb249-146" aria-hidden="true" tabindex="-1"></a>    logger_write<span class="op">(</span>LOG_ERROR<span class="op">,</span> NULL<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> format<span class="op">,</span> args<span class="op">);</span></span>
<span id="cb249-147"><a href="#cb249-147" aria-hidden="true" tabindex="-1"></a>    va_end<span class="op">(</span>args<span class="op">);</span></span>
<span id="cb249-148"><a href="#cb249-148" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb249-149"><a href="#cb249-149" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb249-150"><a href="#cb249-150" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> log_critical<span class="op">(</span><span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>format<span class="op">,</span> <span class="op">...)</span></span>
<span id="cb249-151"><a href="#cb249-151" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb249-152"><a href="#cb249-152" aria-hidden="true" tabindex="-1"></a>    <span class="dt">va_list</span> args<span class="op">;</span></span>
<span id="cb249-153"><a href="#cb249-153" aria-hidden="true" tabindex="-1"></a>    va_start<span class="op">(</span>args<span class="op">,</span> format<span class="op">);</span></span>
<span id="cb249-154"><a href="#cb249-154" aria-hidden="true" tabindex="-1"></a>    logger_write<span class="op">(</span>LOG_CRITICAL<span class="op">,</span> NULL<span class="op">,</span> <span class="dv">0</span><span class="op">,</span> format<span class="op">,</span> args<span class="op">);</span></span>
<span id="cb249-155"><a href="#cb249-155" aria-hidden="true" tabindex="-1"></a>    va_end<span class="op">(</span>args<span class="op">);</span></span>
<span id="cb249-156"><a href="#cb249-156" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h4 data-number="14.3.4.2" id="設定管理システム"><span
class="header-section-number">14.3.4.2</span> 設定管理システム</h4>
<p><strong>config.h（設定管理のインターフェース）</strong></p>
<div class="sourceCode" id="cb250"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb250-1"><a href="#cb250-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#ifndef CONFIG_H</span></span>
<span id="cb250-2"><a href="#cb250-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#define CONFIG_H</span></span>
<span id="cb250-3"><a href="#cb250-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb250-4"><a href="#cb250-4" aria-hidden="true" tabindex="-1"></a><span class="pp">#define MAX_CONFIG_LINE </span><span class="dv">256</span></span>
<span id="cb250-5"><a href="#cb250-5" aria-hidden="true" tabindex="-1"></a><span class="pp">#define MAX_KEY_LENGTH </span><span class="dv">64</span></span>
<span id="cb250-6"><a href="#cb250-6" aria-hidden="true" tabindex="-1"></a><span class="pp">#define MAX_VALUE_LENGTH </span><span class="dv">192</span></span>
<span id="cb250-7"><a href="#cb250-7" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb250-8"><a href="#cb250-8" aria-hidden="true" tabindex="-1"></a><span class="co">/* 設定項目の構造体 */</span></span>
<span id="cb250-9"><a href="#cb250-9" aria-hidden="true" tabindex="-1"></a><span class="kw">typedef</span> <span class="kw">struct</span> ConfigItem <span class="op">{</span></span>
<span id="cb250-10"><a href="#cb250-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> key<span class="op">[</span>MAX_KEY_LENGTH<span class="op">];</span></span>
<span id="cb250-11"><a href="#cb250-11" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> value<span class="op">[</span>MAX_VALUE_LENGTH<span class="op">];</span></span>
<span id="cb250-12"><a href="#cb250-12" aria-hidden="true" tabindex="-1"></a>    <span class="kw">struct</span> ConfigItem <span class="op">*</span>next<span class="op">;</span></span>
<span id="cb250-13"><a href="#cb250-13" aria-hidden="true" tabindex="-1"></a><span class="op">}</span> ConfigItem<span class="op">;</span></span>
<span id="cb250-14"><a href="#cb250-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb250-15"><a href="#cb250-15" aria-hidden="true" tabindex="-1"></a><span class="co">/* 設定管理システム */</span></span>
<span id="cb250-16"><a href="#cb250-16" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> config_load<span class="op">(</span><span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>filename<span class="op">);</span></span>
<span id="cb250-17"><a href="#cb250-17" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> config_unload<span class="op">(</span><span class="dt">void</span><span class="op">);</span></span>
<span id="cb250-18"><a href="#cb250-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb250-19"><a href="#cb250-19" aria-hidden="true" tabindex="-1"></a><span class="co">/* 値の取得 */</span></span>
<span id="cb250-20"><a href="#cb250-20" aria-hidden="true" tabindex="-1"></a><span class="dt">const</span> <span class="dt">char</span><span class="op">*</span> config_get_string<span class="op">(</span><span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>key<span class="op">,</span> <span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>default_value<span class="op">);</span></span>
<span id="cb250-21"><a href="#cb250-21" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> config_get_int<span class="op">(</span><span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>key<span class="op">,</span> <span class="dt">int</span> default_value<span class="op">);</span></span>
<span id="cb250-22"><a href="#cb250-22" aria-hidden="true" tabindex="-1"></a><span class="dt">double</span> config_get_double<span class="op">(</span><span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>key<span class="op">,</span> <span class="dt">double</span> default_value<span class="op">);</span></span>
<span id="cb250-23"><a href="#cb250-23" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> config_get_bool<span class="op">(</span><span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>key<span class="op">,</span> <span class="dt">int</span> default_value<span class="op">);</span></span>
<span id="cb250-24"><a href="#cb250-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb250-25"><a href="#cb250-25" aria-hidden="true" tabindex="-1"></a><span class="co">/* 値の設定 */</span></span>
<span id="cb250-26"><a href="#cb250-26" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> config_set_string<span class="op">(</span><span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>key<span class="op">,</span> <span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>value<span class="op">);</span></span>
<span id="cb250-27"><a href="#cb250-27" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> config_set_int<span class="op">(</span><span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>key<span class="op">,</span> <span class="dt">int</span> value<span class="op">);</span></span>
<span id="cb250-28"><a href="#cb250-28" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> config_set_double<span class="op">(</span><span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>key<span class="op">,</span> <span class="dt">double</span> value<span class="op">);</span></span>
<span id="cb250-29"><a href="#cb250-29" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> config_set_bool<span class="op">(</span><span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>key<span class="op">,</span> <span class="dt">int</span> value<span class="op">);</span></span>
<span id="cb250-30"><a href="#cb250-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb250-31"><a href="#cb250-31" aria-hidden="true" tabindex="-1"></a><span class="co">/* 設定の保存 */</span></span>
<span id="cb250-32"><a href="#cb250-32" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> config_save<span class="op">(</span><span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>filename<span class="op">);</span></span>
<span id="cb250-33"><a href="#cb250-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb250-34"><a href="#cb250-34" aria-hidden="true" tabindex="-1"></a><span class="co">/* デバッグ用 */</span></span>
<span id="cb250-35"><a href="#cb250-35" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> config_print_all<span class="op">(</span><span class="dt">void</span><span class="op">);</span></span>
<span id="cb250-36"><a href="#cb250-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb250-37"><a href="#cb250-37" aria-hidden="true" tabindex="-1"></a><span class="pp">#endif </span><span class="co">/* CONFIG_H */</span></span></code></pre></div>
<p><strong>config.c（設定管理の実装）</strong></p>
<div class="sourceCode" id="cb251"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb251-1"><a href="#cb251-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb251-2"><a href="#cb251-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdlib.h&gt;</span></span>
<span id="cb251-3"><a href="#cb251-3" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;string.h&gt;</span></span>
<span id="cb251-4"><a href="#cb251-4" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;ctype.h&gt;</span></span>
<span id="cb251-5"><a href="#cb251-5" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&quot;config.h&quot;</span></span>
<span id="cb251-6"><a href="#cb251-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb251-7"><a href="#cb251-7" aria-hidden="true" tabindex="-1"></a><span class="co">/* プライベート変数 */</span></span>
<span id="cb251-8"><a href="#cb251-8" aria-hidden="true" tabindex="-1"></a><span class="dt">static</span> ConfigItem <span class="op">*</span>g_config_head <span class="op">=</span> NULL<span class="op">;</span></span>
<span id="cb251-9"><a href="#cb251-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb251-10"><a href="#cb251-10" aria-hidden="true" tabindex="-1"></a><span class="co">/* プライベート関数 */</span></span>
<span id="cb251-11"><a href="#cb251-11" aria-hidden="true" tabindex="-1"></a><span class="dt">static</span> <span class="dt">char</span><span class="op">*</span> trim_whitespace<span class="op">(</span><span class="dt">char</span> <span class="op">*</span>str<span class="op">)</span></span>
<span id="cb251-12"><a href="#cb251-12" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb251-13"><a href="#cb251-13" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> <span class="op">*</span>end<span class="op">;</span></span>
<span id="cb251-14"><a href="#cb251-14" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb251-15"><a href="#cb251-15" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 先頭の空白をスキップ */</span></span>
<span id="cb251-16"><a href="#cb251-16" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>isspace<span class="op">((</span><span class="dt">unsigned</span> <span class="dt">char</span><span class="op">)*</span>str<span class="op">))</span> str<span class="op">++;</span></span>
<span id="cb251-17"><a href="#cb251-17" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb251-18"><a href="#cb251-18" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(*</span>str <span class="op">==</span> <span class="ch">&#39;</span><span class="sc">\0</span><span class="ch">&#39;</span><span class="op">)</span> <span class="cf">return</span> str<span class="op">;</span></span>
<span id="cb251-19"><a href="#cb251-19" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb251-20"><a href="#cb251-20" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 末尾の空白を削除 */</span></span>
<span id="cb251-21"><a href="#cb251-21" aria-hidden="true" tabindex="-1"></a>    end <span class="op">=</span> str <span class="op">+</span> strlen<span class="op">(</span>str<span class="op">)</span> <span class="op">-</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb251-22"><a href="#cb251-22" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>end <span class="op">&gt;</span> str <span class="op">&amp;&amp;</span> isspace<span class="op">((</span><span class="dt">unsigned</span> <span class="dt">char</span><span class="op">)*</span>end<span class="op">))</span> end<span class="op">--;</span></span>
<span id="cb251-23"><a href="#cb251-23" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb251-24"><a href="#cb251-24" aria-hidden="true" tabindex="-1"></a>    end<span class="op">[</span><span class="dv">1</span><span class="op">]</span> <span class="op">=</span> <span class="ch">&#39;</span><span class="sc">\0</span><span class="ch">&#39;</span><span class="op">;</span></span>
<span id="cb251-25"><a href="#cb251-25" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> str<span class="op">;</span></span>
<span id="cb251-26"><a href="#cb251-26" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb251-27"><a href="#cb251-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb251-28"><a href="#cb251-28" aria-hidden="true" tabindex="-1"></a><span class="dt">static</span> ConfigItem<span class="op">*</span> find_config_item<span class="op">(</span><span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>key<span class="op">)</span></span>
<span id="cb251-29"><a href="#cb251-29" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb251-30"><a href="#cb251-30" aria-hidden="true" tabindex="-1"></a>    ConfigItem <span class="op">*</span>item <span class="op">=</span> g_config_head<span class="op">;</span></span>
<span id="cb251-31"><a href="#cb251-31" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb251-32"><a href="#cb251-32" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>item <span class="op">!=</span> NULL<span class="op">)</span> <span class="op">{</span></span>
<span id="cb251-33"><a href="#cb251-33" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>strcmp<span class="op">(</span>item<span class="op">-&gt;</span>key<span class="op">,</span> key<span class="op">)</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb251-34"><a href="#cb251-34" aria-hidden="true" tabindex="-1"></a>            <span class="cf">return</span> item<span class="op">;</span></span>
<span id="cb251-35"><a href="#cb251-35" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb251-36"><a href="#cb251-36" aria-hidden="true" tabindex="-1"></a>        item <span class="op">=</span> item<span class="op">-&gt;</span>next<span class="op">;</span></span>
<span id="cb251-37"><a href="#cb251-37" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb251-38"><a href="#cb251-38" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb251-39"><a href="#cb251-39" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> NULL<span class="op">;</span></span>
<span id="cb251-40"><a href="#cb251-40" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb251-41"><a href="#cb251-41" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb251-42"><a href="#cb251-42" aria-hidden="true" tabindex="-1"></a><span class="dt">static</span> ConfigItem<span class="op">*</span> create_config_item<span class="op">(</span><span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>key<span class="op">,</span> <span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>value<span class="op">)</span></span>
<span id="cb251-43"><a href="#cb251-43" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb251-44"><a href="#cb251-44" aria-hidden="true" tabindex="-1"></a>    ConfigItem <span class="op">*</span>item <span class="op">=</span> malloc<span class="op">(</span><span class="kw">sizeof</span><span class="op">(</span>ConfigItem<span class="op">));</span></span>
<span id="cb251-45"><a href="#cb251-45" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>item <span class="op">==</span> NULL<span class="op">)</span> <span class="cf">return</span> NULL<span class="op">;</span></span>
<span id="cb251-46"><a href="#cb251-46" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb251-47"><a href="#cb251-47" aria-hidden="true" tabindex="-1"></a>    strncpy<span class="op">(</span>item<span class="op">-&gt;</span>key<span class="op">,</span> key<span class="op">,</span> MAX_KEY_LENGTH <span class="op">-</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb251-48"><a href="#cb251-48" aria-hidden="true" tabindex="-1"></a>    item<span class="op">-&gt;</span>key<span class="op">[</span>MAX_KEY_LENGTH <span class="op">-</span> <span class="dv">1</span><span class="op">]</span> <span class="op">=</span> <span class="ch">&#39;</span><span class="sc">\0</span><span class="ch">&#39;</span><span class="op">;</span></span>
<span id="cb251-49"><a href="#cb251-49" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb251-50"><a href="#cb251-50" aria-hidden="true" tabindex="-1"></a>    strncpy<span class="op">(</span>item<span class="op">-&gt;</span>value<span class="op">,</span> value<span class="op">,</span> MAX_VALUE_LENGTH <span class="op">-</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb251-51"><a href="#cb251-51" aria-hidden="true" tabindex="-1"></a>    item<span class="op">-&gt;</span>value<span class="op">[</span>MAX_VALUE_LENGTH <span class="op">-</span> <span class="dv">1</span><span class="op">]</span> <span class="op">=</span> <span class="ch">&#39;</span><span class="sc">\0</span><span class="ch">&#39;</span><span class="op">;</span></span>
<span id="cb251-52"><a href="#cb251-52" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb251-53"><a href="#cb251-53" aria-hidden="true" tabindex="-1"></a>    item<span class="op">-&gt;</span>next <span class="op">=</span> g_config_head<span class="op">;</span></span>
<span id="cb251-54"><a href="#cb251-54" aria-hidden="true" tabindex="-1"></a>    g_config_head <span class="op">=</span> item<span class="op">;</span></span>
<span id="cb251-55"><a href="#cb251-55" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb251-56"><a href="#cb251-56" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> item<span class="op">;</span></span>
<span id="cb251-57"><a href="#cb251-57" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb251-58"><a href="#cb251-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb251-59"><a href="#cb251-59" aria-hidden="true" tabindex="-1"></a><span class="co">/* パブリック関数の実装 */</span></span>
<span id="cb251-60"><a href="#cb251-60" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> config_load<span class="op">(</span><span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>filename<span class="op">)</span></span>
<span id="cb251-61"><a href="#cb251-61" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb251-62"><a href="#cb251-62" aria-hidden="true" tabindex="-1"></a>    <span class="dt">FILE</span> <span class="op">*</span>file<span class="op">;</span></span>
<span id="cb251-63"><a href="#cb251-63" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> line<span class="op">[</span>MAX_CONFIG_LINE<span class="op">];</span></span>
<span id="cb251-64"><a href="#cb251-64" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> <span class="op">*</span>key<span class="op">,</span> <span class="op">*</span>value<span class="op">,</span> <span class="op">*</span>equals<span class="op">;</span></span>
<span id="cb251-65"><a href="#cb251-65" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> line_number <span class="op">=</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb251-66"><a href="#cb251-66" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb251-67"><a href="#cb251-67" aria-hidden="true" tabindex="-1"></a>    file <span class="op">=</span> fopen<span class="op">(</span>filename<span class="op">,</span> <span class="st">&quot;r&quot;</span><span class="op">);</span></span>
<span id="cb251-68"><a href="#cb251-68" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>file <span class="op">==</span> NULL<span class="op">)</span> <span class="op">{</span></span>
<span id="cb251-69"><a href="#cb251-69" aria-hidden="true" tabindex="-1"></a>        fprintf<span class="op">(</span>stderr<span class="op">,</span> <span class="st">&quot;設定ファイルを開けません: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> filename<span class="op">);</span></span>
<span id="cb251-70"><a href="#cb251-70" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="op">-</span><span class="dv">1</span><span class="op">;</span></span>
<span id="cb251-71"><a href="#cb251-71" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb251-72"><a href="#cb251-72" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb251-73"><a href="#cb251-73" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>fgets<span class="op">(</span>line<span class="op">,</span> <span class="kw">sizeof</span><span class="op">(</span>line<span class="op">),</span> file<span class="op">)</span> <span class="op">!=</span> NULL<span class="op">)</span> <span class="op">{</span></span>
<span id="cb251-74"><a href="#cb251-74" aria-hidden="true" tabindex="-1"></a>        line_number<span class="op">++;</span></span>
<span id="cb251-75"><a href="#cb251-75" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb251-76"><a href="#cb251-76" aria-hidden="true" tabindex="-1"></a>        <span class="co">/* コメント行と空行をスキップ */</span></span>
<span id="cb251-77"><a href="#cb251-77" aria-hidden="true" tabindex="-1"></a>        <span class="dt">char</span> <span class="op">*</span>trimmed <span class="op">=</span> trim_whitespace<span class="op">(</span>line<span class="op">);</span></span>
<span id="cb251-78"><a href="#cb251-78" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(*</span>trimmed <span class="op">==</span> <span class="ch">&#39;</span><span class="sc">\0</span><span class="ch">&#39;</span> <span class="op">||</span> <span class="op">*</span>trimmed <span class="op">==</span> <span class="ch">&#39;#&#39;</span> <span class="op">||</span> <span class="op">*</span>trimmed <span class="op">==</span> <span class="ch">&#39;;&#39;</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb251-79"><a href="#cb251-79" aria-hidden="true" tabindex="-1"></a>            <span class="cf">continue</span><span class="op">;</span></span>
<span id="cb251-80"><a href="#cb251-80" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb251-81"><a href="#cb251-81" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb251-82"><a href="#cb251-82" aria-hidden="true" tabindex="-1"></a>        <span class="co">/* キーと値を分離 */</span></span>
<span id="cb251-83"><a href="#cb251-83" aria-hidden="true" tabindex="-1"></a>        equals <span class="op">=</span> strchr<span class="op">(</span>trimmed<span class="op">,</span> <span class="ch">&#39;=&#39;</span><span class="op">);</span></span>
<span id="cb251-84"><a href="#cb251-84" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>equals <span class="op">==</span> NULL<span class="op">)</span> <span class="op">{</span></span>
<span id="cb251-85"><a href="#cb251-85" aria-hidden="true" tabindex="-1"></a>            fprintf<span class="op">(</span>stderr<span class="op">,</span> <span class="st">&quot;設定エラー </span><span class="sc">%s</span><span class="st">:</span><span class="sc">%d</span><span class="st"> - &#39;=&#39;が見つかりません</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> filename<span class="op">,</span> line_number<span class="op">);</span></span>
<span id="cb251-86"><a href="#cb251-86" aria-hidden="true" tabindex="-1"></a>            <span class="cf">continue</span><span class="op">;</span></span>
<span id="cb251-87"><a href="#cb251-87" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb251-88"><a href="#cb251-88" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb251-89"><a href="#cb251-89" aria-hidden="true" tabindex="-1"></a>        <span class="op">*</span>equals <span class="op">=</span> <span class="ch">&#39;</span><span class="sc">\0</span><span class="ch">&#39;</span><span class="op">;</span></span>
<span id="cb251-90"><a href="#cb251-90" aria-hidden="true" tabindex="-1"></a>        key <span class="op">=</span> trim_whitespace<span class="op">(</span>trimmed<span class="op">);</span></span>
<span id="cb251-91"><a href="#cb251-91" aria-hidden="true" tabindex="-1"></a>        value <span class="op">=</span> trim_whitespace<span class="op">(</span>equals <span class="op">+</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb251-92"><a href="#cb251-92" aria-hidden="true" tabindex="-1"></a>        </span>
<span id="cb251-93"><a href="#cb251-93" aria-hidden="true" tabindex="-1"></a>        <span class="co">/* 既存の項目を更新または新規作成 */</span></span>
<span id="cb251-94"><a href="#cb251-94" aria-hidden="true" tabindex="-1"></a>        ConfigItem <span class="op">*</span>existing <span class="op">=</span> find_config_item<span class="op">(</span>key<span class="op">);</span></span>
<span id="cb251-95"><a href="#cb251-95" aria-hidden="true" tabindex="-1"></a>        <span class="cf">if</span> <span class="op">(</span>existing <span class="op">!=</span> NULL<span class="op">)</span> <span class="op">{</span></span>
<span id="cb251-96"><a href="#cb251-96" aria-hidden="true" tabindex="-1"></a>            strncpy<span class="op">(</span>existing<span class="op">-&gt;</span>value<span class="op">,</span> value<span class="op">,</span> MAX_VALUE_LENGTH <span class="op">-</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb251-97"><a href="#cb251-97" aria-hidden="true" tabindex="-1"></a>            existing<span class="op">-&gt;</span>value<span class="op">[</span>MAX_VALUE_LENGTH <span class="op">-</span> <span class="dv">1</span><span class="op">]</span> <span class="op">=</span> <span class="ch">&#39;</span><span class="sc">\0</span><span class="ch">&#39;</span><span class="op">;</span></span>
<span id="cb251-98"><a href="#cb251-98" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb251-99"><a href="#cb251-99" aria-hidden="true" tabindex="-1"></a>            create_config_item<span class="op">(</span>key<span class="op">,</span> value<span class="op">);</span></span>
<span id="cb251-100"><a href="#cb251-100" aria-hidden="true" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb251-101"><a href="#cb251-101" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb251-102"><a href="#cb251-102" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb251-103"><a href="#cb251-103" aria-hidden="true" tabindex="-1"></a>    fclose<span class="op">(</span>file<span class="op">);</span></span>
<span id="cb251-104"><a href="#cb251-104" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;設定ファイル読み込み完了: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> filename<span class="op">);</span></span>
<span id="cb251-105"><a href="#cb251-105" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb251-106"><a href="#cb251-106" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb251-107"><a href="#cb251-107" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb251-108"><a href="#cb251-108" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> config_unload<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb251-109"><a href="#cb251-109" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb251-110"><a href="#cb251-110" aria-hidden="true" tabindex="-1"></a>    ConfigItem <span class="op">*</span>item <span class="op">=</span> g_config_head<span class="op">;</span></span>
<span id="cb251-111"><a href="#cb251-111" aria-hidden="true" tabindex="-1"></a>    ConfigItem <span class="op">*</span>next<span class="op">;</span></span>
<span id="cb251-112"><a href="#cb251-112" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb251-113"><a href="#cb251-113" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>item <span class="op">!=</span> NULL<span class="op">)</span> <span class="op">{</span></span>
<span id="cb251-114"><a href="#cb251-114" aria-hidden="true" tabindex="-1"></a>        next <span class="op">=</span> item<span class="op">-&gt;</span>next<span class="op">;</span></span>
<span id="cb251-115"><a href="#cb251-115" aria-hidden="true" tabindex="-1"></a>        free<span class="op">(</span>item<span class="op">);</span></span>
<span id="cb251-116"><a href="#cb251-116" aria-hidden="true" tabindex="-1"></a>        item <span class="op">=</span> next<span class="op">;</span></span>
<span id="cb251-117"><a href="#cb251-117" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb251-118"><a href="#cb251-118" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb251-119"><a href="#cb251-119" aria-hidden="true" tabindex="-1"></a>    g_config_head <span class="op">=</span> NULL<span class="op">;</span></span>
<span id="cb251-120"><a href="#cb251-120" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb251-121"><a href="#cb251-121" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb251-122"><a href="#cb251-122" aria-hidden="true" tabindex="-1"></a><span class="dt">const</span> <span class="dt">char</span><span class="op">*</span> config_get_string<span class="op">(</span><span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>key<span class="op">,</span> <span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>default_value<span class="op">)</span></span>
<span id="cb251-123"><a href="#cb251-123" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb251-124"><a href="#cb251-124" aria-hidden="true" tabindex="-1"></a>    ConfigItem <span class="op">*</span>item <span class="op">=</span> find_config_item<span class="op">(</span>key<span class="op">);</span></span>
<span id="cb251-125"><a href="#cb251-125" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> item <span class="op">?</span> item<span class="op">-&gt;</span>value <span class="op">:</span> default_value<span class="op">;</span></span>
<span id="cb251-126"><a href="#cb251-126" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb251-127"><a href="#cb251-127" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb251-128"><a href="#cb251-128" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> config_get_int<span class="op">(</span><span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>key<span class="op">,</span> <span class="dt">int</span> default_value<span class="op">)</span></span>
<span id="cb251-129"><a href="#cb251-129" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb251-130"><a href="#cb251-130" aria-hidden="true" tabindex="-1"></a>    <span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>value <span class="op">=</span> config_get_string<span class="op">(</span>key<span class="op">,</span> NULL<span class="op">);</span></span>
<span id="cb251-131"><a href="#cb251-131" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>value <span class="op">==</span> NULL<span class="op">)</span> <span class="cf">return</span> default_value<span class="op">;</span></span>
<span id="cb251-132"><a href="#cb251-132" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb251-133"><a href="#cb251-133" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> atoi<span class="op">(</span>value<span class="op">);</span></span>
<span id="cb251-134"><a href="#cb251-134" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb251-135"><a href="#cb251-135" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb251-136"><a href="#cb251-136" aria-hidden="true" tabindex="-1"></a><span class="dt">double</span> config_get_double<span class="op">(</span><span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>key<span class="op">,</span> <span class="dt">double</span> default_value<span class="op">)</span></span>
<span id="cb251-137"><a href="#cb251-137" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb251-138"><a href="#cb251-138" aria-hidden="true" tabindex="-1"></a>    <span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>value <span class="op">=</span> config_get_string<span class="op">(</span>key<span class="op">,</span> NULL<span class="op">);</span></span>
<span id="cb251-139"><a href="#cb251-139" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>value <span class="op">==</span> NULL<span class="op">)</span> <span class="cf">return</span> default_value<span class="op">;</span></span>
<span id="cb251-140"><a href="#cb251-140" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb251-141"><a href="#cb251-141" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> atof<span class="op">(</span>value<span class="op">);</span></span>
<span id="cb251-142"><a href="#cb251-142" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb251-143"><a href="#cb251-143" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb251-144"><a href="#cb251-144" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> config_get_bool<span class="op">(</span><span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>key<span class="op">,</span> <span class="dt">int</span> default_value<span class="op">)</span></span>
<span id="cb251-145"><a href="#cb251-145" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb251-146"><a href="#cb251-146" aria-hidden="true" tabindex="-1"></a>    <span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>value <span class="op">=</span> config_get_string<span class="op">(</span>key<span class="op">,</span> NULL<span class="op">);</span></span>
<span id="cb251-147"><a href="#cb251-147" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>value <span class="op">==</span> NULL<span class="op">)</span> <span class="cf">return</span> default_value<span class="op">;</span></span>
<span id="cb251-148"><a href="#cb251-148" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb251-149"><a href="#cb251-149" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>strcmp<span class="op">(</span>value<span class="op">,</span> <span class="st">&quot;true&quot;</span><span class="op">)</span> <span class="op">==</span> <span class="dv">0</span> <span class="op">||</span> strcmp<span class="op">(</span>value<span class="op">,</span> <span class="st">&quot;1&quot;</span><span class="op">)</span> <span class="op">==</span> <span class="dv">0</span> <span class="op">||</span> </span>
<span id="cb251-150"><a href="#cb251-150" aria-hidden="true" tabindex="-1"></a>        strcmp<span class="op">(</span>value<span class="op">,</span> <span class="st">&quot;yes&quot;</span><span class="op">)</span> <span class="op">==</span> <span class="dv">0</span> <span class="op">||</span> strcmp<span class="op">(</span>value<span class="op">,</span> <span class="st">&quot;on&quot;</span><span class="op">)</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb251-151"><a href="#cb251-151" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="dv">1</span><span class="op">;</span></span>
<span id="cb251-152"><a href="#cb251-152" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb251-153"><a href="#cb251-153" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb251-154"><a href="#cb251-154" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>strcmp<span class="op">(</span>value<span class="op">,</span> <span class="st">&quot;false&quot;</span><span class="op">)</span> <span class="op">==</span> <span class="dv">0</span> <span class="op">||</span> strcmp<span class="op">(</span>value<span class="op">,</span> <span class="st">&quot;0&quot;</span><span class="op">)</span> <span class="op">==</span> <span class="dv">0</span> <span class="op">||</span> </span>
<span id="cb251-155"><a href="#cb251-155" aria-hidden="true" tabindex="-1"></a>        strcmp<span class="op">(</span>value<span class="op">,</span> <span class="st">&quot;no&quot;</span><span class="op">)</span> <span class="op">==</span> <span class="dv">0</span> <span class="op">||</span> strcmp<span class="op">(</span>value<span class="op">,</span> <span class="st">&quot;off&quot;</span><span class="op">)</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="op">{</span></span>
<span id="cb251-156"><a href="#cb251-156" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb251-157"><a href="#cb251-157" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb251-158"><a href="#cb251-158" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb251-159"><a href="#cb251-159" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> default_value<span class="op">;</span></span>
<span id="cb251-160"><a href="#cb251-160" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb251-161"><a href="#cb251-161" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb251-162"><a href="#cb251-162" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> config_set_string<span class="op">(</span><span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>key<span class="op">,</span> <span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>value<span class="op">)</span></span>
<span id="cb251-163"><a href="#cb251-163" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb251-164"><a href="#cb251-164" aria-hidden="true" tabindex="-1"></a>    ConfigItem <span class="op">*</span>item <span class="op">=</span> find_config_item<span class="op">(</span>key<span class="op">);</span></span>
<span id="cb251-165"><a href="#cb251-165" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb251-166"><a href="#cb251-166" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>item <span class="op">!=</span> NULL<span class="op">)</span> <span class="op">{</span></span>
<span id="cb251-167"><a href="#cb251-167" aria-hidden="true" tabindex="-1"></a>        strncpy<span class="op">(</span>item<span class="op">-&gt;</span>value<span class="op">,</span> value<span class="op">,</span> MAX_VALUE_LENGTH <span class="op">-</span> <span class="dv">1</span><span class="op">);</span></span>
<span id="cb251-168"><a href="#cb251-168" aria-hidden="true" tabindex="-1"></a>        item<span class="op">-&gt;</span>value<span class="op">[</span>MAX_VALUE_LENGTH <span class="op">-</span> <span class="dv">1</span><span class="op">]</span> <span class="op">=</span> <span class="ch">&#39;</span><span class="sc">\0</span><span class="ch">&#39;</span><span class="op">;</span></span>
<span id="cb251-169"><a href="#cb251-169" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb251-170"><a href="#cb251-170" aria-hidden="true" tabindex="-1"></a>        create_config_item<span class="op">(</span>key<span class="op">,</span> value<span class="op">);</span></span>
<span id="cb251-171"><a href="#cb251-171" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb251-172"><a href="#cb251-172" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb251-173"><a href="#cb251-173" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb251-174"><a href="#cb251-174" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> config_set_int<span class="op">(</span><span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>key<span class="op">,</span> <span class="dt">int</span> value<span class="op">)</span></span>
<span id="cb251-175"><a href="#cb251-175" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb251-176"><a href="#cb251-176" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> str_value<span class="op">[</span><span class="dv">32</span><span class="op">];</span></span>
<span id="cb251-177"><a href="#cb251-177" aria-hidden="true" tabindex="-1"></a>    sprintf<span class="op">(</span>str_value<span class="op">,</span> <span class="st">&quot;</span><span class="sc">%d</span><span class="st">&quot;</span><span class="op">,</span> value<span class="op">);</span></span>
<span id="cb251-178"><a href="#cb251-178" aria-hidden="true" tabindex="-1"></a>    config_set_string<span class="op">(</span>key<span class="op">,</span> str_value<span class="op">);</span></span>
<span id="cb251-179"><a href="#cb251-179" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb251-180"><a href="#cb251-180" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb251-181"><a href="#cb251-181" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> config_set_double<span class="op">(</span><span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>key<span class="op">,</span> <span class="dt">double</span> value<span class="op">)</span></span>
<span id="cb251-182"><a href="#cb251-182" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb251-183"><a href="#cb251-183" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> str_value<span class="op">[</span><span class="dv">32</span><span class="op">];</span></span>
<span id="cb251-184"><a href="#cb251-184" aria-hidden="true" tabindex="-1"></a>    sprintf<span class="op">(</span>str_value<span class="op">,</span> <span class="st">&quot;</span><span class="sc">%.6f</span><span class="st">&quot;</span><span class="op">,</span> value<span class="op">);</span></span>
<span id="cb251-185"><a href="#cb251-185" aria-hidden="true" tabindex="-1"></a>    config_set_string<span class="op">(</span>key<span class="op">,</span> str_value<span class="op">);</span></span>
<span id="cb251-186"><a href="#cb251-186" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb251-187"><a href="#cb251-187" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb251-188"><a href="#cb251-188" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> config_set_bool<span class="op">(</span><span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>key<span class="op">,</span> <span class="dt">int</span> value<span class="op">)</span></span>
<span id="cb251-189"><a href="#cb251-189" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb251-190"><a href="#cb251-190" aria-hidden="true" tabindex="-1"></a>    config_set_string<span class="op">(</span>key<span class="op">,</span> value <span class="op">?</span> <span class="st">&quot;true&quot;</span> <span class="op">:</span> <span class="st">&quot;false&quot;</span><span class="op">);</span></span>
<span id="cb251-191"><a href="#cb251-191" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb251-192"><a href="#cb251-192" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb251-193"><a href="#cb251-193" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> config_save<span class="op">(</span><span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>filename<span class="op">)</span></span>
<span id="cb251-194"><a href="#cb251-194" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb251-195"><a href="#cb251-195" aria-hidden="true" tabindex="-1"></a>    <span class="dt">FILE</span> <span class="op">*</span>file<span class="op">;</span></span>
<span id="cb251-196"><a href="#cb251-196" aria-hidden="true" tabindex="-1"></a>    ConfigItem <span class="op">*</span>item<span class="op">;</span></span>
<span id="cb251-197"><a href="#cb251-197" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb251-198"><a href="#cb251-198" aria-hidden="true" tabindex="-1"></a>    file <span class="op">=</span> fopen<span class="op">(</span>filename<span class="op">,</span> <span class="st">&quot;w&quot;</span><span class="op">);</span></span>
<span id="cb251-199"><a href="#cb251-199" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>file <span class="op">==</span> NULL<span class="op">)</span> <span class="op">{</span></span>
<span id="cb251-200"><a href="#cb251-200" aria-hidden="true" tabindex="-1"></a>        fprintf<span class="op">(</span>stderr<span class="op">,</span> <span class="st">&quot;設定ファイルに書き込めません: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> filename<span class="op">);</span></span>
<span id="cb251-201"><a href="#cb251-201" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> <span class="op">-</span><span class="dv">1</span><span class="op">;</span></span>
<span id="cb251-202"><a href="#cb251-202" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb251-203"><a href="#cb251-203" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb251-204"><a href="#cb251-204" aria-hidden="true" tabindex="-1"></a>    fprintf<span class="op">(</span>file<span class="op">,</span> <span class="st">&quot;# 自動生成された設定ファイル</span><span class="sc">\n\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb251-205"><a href="#cb251-205" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb251-206"><a href="#cb251-206" aria-hidden="true" tabindex="-1"></a>    item <span class="op">=</span> g_config_head<span class="op">;</span></span>
<span id="cb251-207"><a href="#cb251-207" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>item <span class="op">!=</span> NULL<span class="op">)</span> <span class="op">{</span></span>
<span id="cb251-208"><a href="#cb251-208" aria-hidden="true" tabindex="-1"></a>        fprintf<span class="op">(</span>file<span class="op">,</span> <span class="st">&quot;</span><span class="sc">%s</span><span class="st"> = </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> item<span class="op">-&gt;</span>key<span class="op">,</span> item<span class="op">-&gt;</span>value<span class="op">);</span></span>
<span id="cb251-209"><a href="#cb251-209" aria-hidden="true" tabindex="-1"></a>        item <span class="op">=</span> item<span class="op">-&gt;</span>next<span class="op">;</span></span>
<span id="cb251-210"><a href="#cb251-210" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb251-211"><a href="#cb251-211" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb251-212"><a href="#cb251-212" aria-hidden="true" tabindex="-1"></a>    fclose<span class="op">(</span>file<span class="op">);</span></span>
<span id="cb251-213"><a href="#cb251-213" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;設定ファイル保存完了: </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> filename<span class="op">);</span></span>
<span id="cb251-214"><a href="#cb251-214" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb251-215"><a href="#cb251-215" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span>
<span id="cb251-216"><a href="#cb251-216" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb251-217"><a href="#cb251-217" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> config_print_all<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb251-218"><a href="#cb251-218" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb251-219"><a href="#cb251-219" aria-hidden="true" tabindex="-1"></a>    ConfigItem <span class="op">*</span>item <span class="op">=</span> g_config_head<span class="op">;</span></span>
<span id="cb251-220"><a href="#cb251-220" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb251-221"><a href="#cb251-221" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== 現在の設定 ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb251-222"><a href="#cb251-222" aria-hidden="true" tabindex="-1"></a>    <span class="cf">while</span> <span class="op">(</span>item <span class="op">!=</span> NULL<span class="op">)</span> <span class="op">{</span></span>
<span id="cb251-223"><a href="#cb251-223" aria-hidden="true" tabindex="-1"></a>        printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">%s</span><span class="st"> = </span><span class="sc">%s\n</span><span class="st">&quot;</span><span class="op">,</span> item<span class="op">-&gt;</span>key<span class="op">,</span> item<span class="op">-&gt;</span>value<span class="op">);</span></span>
<span id="cb251-224"><a href="#cb251-224" aria-hidden="true" tabindex="-1"></a>        item <span class="op">=</span> item<span class="op">-&gt;</span>next<span class="op">;</span></span>
<span id="cb251-225"><a href="#cb251-225" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb251-226"><a href="#cb251-226" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 data-number="14.3.5" id="静的ライブラリの作成"><span
class="header-section-number">14.3.5</span> 静的ライブラリの作成 📚</h3>
<p>再利用可能なライブラリを作成する方法を学習します。</p>
<h4 data-number="14.3.5.1" id="ライブラリ作成の手順"><span
class="header-section-number">14.3.5.1</span> ライブラリ作成の手順</h4>
<p><strong>Makefile（ライブラリ作成用）</strong></p>
<div class="sourceCode" id="cb252"><pre
class="sourceCode makefile"><code class="sourceCode makefile"><span id="cb252-1"><a href="#cb252-1" aria-hidden="true" tabindex="-1"></a><span class="co"># コンパイラとフラグ</span></span>
<span id="cb252-2"><a href="#cb252-2" aria-hidden="true" tabindex="-1"></a><span class="dt">CC</span> <span class="ch">=</span><span class="st"> gcc</span></span>
<span id="cb252-3"><a href="#cb252-3" aria-hidden="true" tabindex="-1"></a><span class="dt">CFLAGS</span> <span class="ch">=</span><span class="st"> -std=c90 -Wall -Wextra -pedantic -O2</span></span>
<span id="cb252-4"><a href="#cb252-4" aria-hidden="true" tabindex="-1"></a><span class="dt">AR</span> <span class="ch">=</span><span class="st"> ar</span></span>
<span id="cb252-5"><a href="#cb252-5" aria-hidden="true" tabindex="-1"></a><span class="dt">ARFLAGS</span> <span class="ch">=</span><span class="st"> rcs</span></span>
<span id="cb252-6"><a href="#cb252-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb252-7"><a href="#cb252-7" aria-hidden="true" tabindex="-1"></a><span class="co"># ターゲット</span></span>
<span id="cb252-8"><a href="#cb252-8" aria-hidden="true" tabindex="-1"></a><span class="dt">LIB_NAME</span> <span class="ch">=</span><span class="st"> libmyutils.a</span></span>
<span id="cb252-9"><a href="#cb252-9" aria-hidden="true" tabindex="-1"></a><span class="dt">HEADER_DIR</span> <span class="ch">=</span><span class="st"> include</span></span>
<span id="cb252-10"><a href="#cb252-10" aria-hidden="true" tabindex="-1"></a><span class="dt">SOURCE_DIR</span> <span class="ch">=</span><span class="st"> src</span></span>
<span id="cb252-11"><a href="#cb252-11" aria-hidden="true" tabindex="-1"></a><span class="dt">BUILD_DIR</span> <span class="ch">=</span><span class="st"> build</span></span>
<span id="cb252-12"><a href="#cb252-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb252-13"><a href="#cb252-13" aria-hidden="true" tabindex="-1"></a><span class="co"># ソースファイル</span></span>
<span id="cb252-14"><a href="#cb252-14" aria-hidden="true" tabindex="-1"></a><span class="dt">SOURCES</span> <span class="ch">=</span><span class="st"> </span><span class="ch">$(</span><span class="dt">SOURCE_DIR</span><span class="ch">)</span><span class="st">/math_utils.c </span><span class="ch">\</span></span>
<span id="cb252-15"><a href="#cb252-15" aria-hidden="true" tabindex="-1"></a><span class="st">          </span><span class="ch">$(</span><span class="dt">SOURCE_DIR</span><span class="ch">)</span><span class="st">/string_utils.c </span><span class="ch">\</span></span>
<span id="cb252-16"><a href="#cb252-16" aria-hidden="true" tabindex="-1"></a><span class="st">          </span><span class="ch">$(</span><span class="dt">SOURCE_DIR</span><span class="ch">)</span><span class="st">/logger.c </span><span class="ch">\</span></span>
<span id="cb252-17"><a href="#cb252-17" aria-hidden="true" tabindex="-1"></a><span class="st">          </span><span class="ch">$(</span><span class="dt">SOURCE_DIR</span><span class="ch">)</span><span class="st">/config.c</span></span>
<span id="cb252-18"><a href="#cb252-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb252-19"><a href="#cb252-19" aria-hidden="true" tabindex="-1"></a><span class="co"># オブジェクトファイル</span></span>
<span id="cb252-20"><a href="#cb252-20" aria-hidden="true" tabindex="-1"></a><span class="dt">OBJECTS</span> <span class="ch">=</span><span class="st"> </span><span class="ch">$(</span><span class="dt">SOURCES</span><span class="kw">:</span><span class="ch">$(</span><span class="dt">SOURCE_DIR</span><span class="ch">)</span><span class="ss">/%.c</span><span class="kw">=</span><span class="ch">$(</span><span class="dt">BUILD_DIR</span><span class="ch">)</span><span class="ss">/%.o</span><span class="ch">)</span></span>
<span id="cb252-21"><a href="#cb252-21" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb252-22"><a href="#cb252-22" aria-hidden="true" tabindex="-1"></a><span class="co"># ヘッダファイル</span></span>
<span id="cb252-23"><a href="#cb252-23" aria-hidden="true" tabindex="-1"></a><span class="dt">HEADERS</span> <span class="ch">=</span><span class="st"> </span><span class="ch">$(</span><span class="dt">HEADER_DIR</span><span class="ch">)</span><span class="st">/math_utils.h </span><span class="ch">\</span></span>
<span id="cb252-24"><a href="#cb252-24" aria-hidden="true" tabindex="-1"></a><span class="st">          </span><span class="ch">$(</span><span class="dt">HEADER_DIR</span><span class="ch">)</span><span class="st">/string_utils.h </span><span class="ch">\</span></span>
<span id="cb252-25"><a href="#cb252-25" aria-hidden="true" tabindex="-1"></a><span class="st">          </span><span class="ch">$(</span><span class="dt">HEADER_DIR</span><span class="ch">)</span><span class="st">/logger.h </span><span class="ch">\</span></span>
<span id="cb252-26"><a href="#cb252-26" aria-hidden="true" tabindex="-1"></a><span class="st">          </span><span class="ch">$(</span><span class="dt">HEADER_DIR</span><span class="ch">)</span><span class="st">/config.h</span></span>
<span id="cb252-27"><a href="#cb252-27" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb252-28"><a href="#cb252-28" aria-hidden="true" tabindex="-1"></a><span class="co"># デフォルトターゲット</span></span>
<span id="cb252-29"><a href="#cb252-29" aria-hidden="true" tabindex="-1"></a><span class="dv">all:</span><span class="dt"> </span><span class="ch">$(</span><span class="dt">BUILD_DIR</span><span class="ch">)</span><span class="dt"> </span><span class="ch">$(</span><span class="dt">LIB_NAME</span><span class="ch">)</span></span>
<span id="cb252-30"><a href="#cb252-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb252-31"><a href="#cb252-31" aria-hidden="true" tabindex="-1"></a><span class="co"># ディレクトリ作成</span></span>
<span id="cb252-32"><a href="#cb252-32" aria-hidden="true" tabindex="-1"></a><span class="dv">$(BUILD_DIR):</span></span>
<span id="cb252-33"><a href="#cb252-33" aria-hidden="true" tabindex="-1"></a><span class="er">    </span>mkdir -p <span class="ch">$(</span><span class="dt">BUILD_DIR</span><span class="ch">)</span></span>
<span id="cb252-34"><a href="#cb252-34" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb252-35"><a href="#cb252-35" aria-hidden="true" tabindex="-1"></a><span class="co"># 静的ライブラリ作成</span></span>
<span id="cb252-36"><a href="#cb252-36" aria-hidden="true" tabindex="-1"></a><span class="dv">$(LIB_NAME):</span><span class="dt"> </span><span class="ch">$(</span><span class="dt">OBJECTS</span><span class="ch">)</span></span>
<span id="cb252-37"><a href="#cb252-37" aria-hidden="true" tabindex="-1"></a><span class="er">    </span><span class="ch">$(</span><span class="dt">AR</span><span class="ch">)</span> <span class="ch">$(</span><span class="dt">ARFLAGS</span><span class="ch">)</span> <span class="ch">$@</span> <span class="ch">$^</span></span>
<span id="cb252-38"><a href="#cb252-38" aria-hidden="true" tabindex="-1"></a>    <span class="ch">@</span><span class="fu">echo </span><span class="st">&quot;ライブラリ作成完了: </span><span class="ch">$@</span><span class="st">&quot;</span></span>
<span id="cb252-39"><a href="#cb252-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb252-40"><a href="#cb252-40" aria-hidden="true" tabindex="-1"></a><span class="co"># オブジェクトファイル作成</span></span>
<span id="cb252-41"><a href="#cb252-41" aria-hidden="true" tabindex="-1"></a><span class="dv">$(BUILD_DIR)/%.o:</span><span class="dt"> </span><span class="ch">$(</span><span class="dt">SOURCE_DIR</span><span class="ch">)</span><span class="dt">/%.c </span><span class="ch">$(</span><span class="dt">HEADERS</span><span class="ch">)</span></span>
<span id="cb252-42"><a href="#cb252-42" aria-hidden="true" tabindex="-1"></a><span class="er">    </span><span class="ch">$(</span><span class="dt">CC</span><span class="ch">)</span> <span class="ch">$(</span><span class="dt">CFLAGS</span><span class="ch">)</span> -I<span class="ch">$(</span><span class="dt">HEADER_DIR</span><span class="ch">)</span> -c <span class="ch">$&lt;</span> -o <span class="ch">$@</span></span>
<span id="cb252-43"><a href="#cb252-43" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb252-44"><a href="#cb252-44" aria-hidden="true" tabindex="-1"></a><span class="co"># テストプログラム</span></span>
<span id="cb252-45"><a href="#cb252-45" aria-hidden="true" tabindex="-1"></a><span class="dv">test:</span><span class="dt"> </span><span class="ch">$(</span><span class="dt">LIB_NAME</span><span class="ch">)</span><span class="dt"> test_program.c</span></span>
<span id="cb252-46"><a href="#cb252-46" aria-hidden="true" tabindex="-1"></a><span class="er">    </span><span class="ch">$(</span><span class="dt">CC</span><span class="ch">)</span> <span class="ch">$(</span><span class="dt">CFLAGS</span><span class="ch">)</span> -I<span class="ch">$(</span><span class="dt">HEADER_DIR</span><span class="ch">)</span> test_program.c -L. -lmyutils -o test_program</span>
<span id="cb252-47"><a href="#cb252-47" aria-hidden="true" tabindex="-1"></a>    <span class="ch">@</span><span class="fu">echo </span><span class="st">&quot;テストプログラム作成完了&quot;</span></span>
<span id="cb252-48"><a href="#cb252-48" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb252-49"><a href="#cb252-49" aria-hidden="true" tabindex="-1"></a><span class="co"># インストール</span></span>
<span id="cb252-50"><a href="#cb252-50" aria-hidden="true" tabindex="-1"></a><span class="dv">install:</span><span class="dt"> </span><span class="ch">$(</span><span class="dt">LIB_NAME</span><span class="ch">)</span></span>
<span id="cb252-51"><a href="#cb252-51" aria-hidden="true" tabindex="-1"></a><span class="er">    </span>sudo cp <span class="ch">$(</span><span class="dt">LIB_NAME</span><span class="ch">)</span> /usr/local/lib/</span>
<span id="cb252-52"><a href="#cb252-52" aria-hidden="true" tabindex="-1"></a>    sudo mkdir -p /usr/local/include/myutils</span>
<span id="cb252-53"><a href="#cb252-53" aria-hidden="true" tabindex="-1"></a>    sudo cp <span class="ch">$(</span><span class="dt">HEADERS</span><span class="ch">)</span> /usr/local/include/myutils/</span>
<span id="cb252-54"><a href="#cb252-54" aria-hidden="true" tabindex="-1"></a>    <span class="ch">@</span><span class="fu">echo </span><span class="st">&quot;ライブラリインストール完了&quot;</span></span>
<span id="cb252-55"><a href="#cb252-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb252-56"><a href="#cb252-56" aria-hidden="true" tabindex="-1"></a><span class="co"># クリーンアップ</span></span>
<span id="cb252-57"><a href="#cb252-57" aria-hidden="true" tabindex="-1"></a><span class="dv">clean:</span></span>
<span id="cb252-58"><a href="#cb252-58" aria-hidden="true" tabindex="-1"></a><span class="er">    </span>rm -rf <span class="ch">$(</span><span class="dt">BUILD_DIR</span><span class="ch">)</span></span>
<span id="cb252-59"><a href="#cb252-59" aria-hidden="true" tabindex="-1"></a>    rm -f <span class="ch">$(</span><span class="dt">LIB_NAME</span><span class="ch">)</span></span>
<span id="cb252-60"><a href="#cb252-60" aria-hidden="true" tabindex="-1"></a>    rm -f test_program</span>
<span id="cb252-61"><a href="#cb252-61" aria-hidden="true" tabindex="-1"></a>    <span class="ch">@</span><span class="fu">echo </span><span class="st">&quot;クリーンアップ完了&quot;</span></span>
<span id="cb252-62"><a href="#cb252-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb252-63"><a href="#cb252-63" aria-hidden="true" tabindex="-1"></a><span class="co"># 依存関係</span></span>
<span id="cb252-64"><a href="#cb252-64" aria-hidden="true" tabindex="-1"></a><span class="ot">.PHONY:</span><span class="dt"> all clean test install</span></span></code></pre></div>
<p><strong>test_program.c（ライブラリテストプログラム）</strong></p>
<div class="sourceCode" id="cb253"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb253-1"><a href="#cb253-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb253-2"><a href="#cb253-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&quot;math_utils.h&quot;</span></span>
<span id="cb253-3"><a href="#cb253-3" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&quot;string_utils.h&quot;</span></span>
<span id="cb253-4"><a href="#cb253-4" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&quot;logger.h&quot;</span></span>
<span id="cb253-5"><a href="#cb253-5" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&quot;config.h&quot;</span></span>
<span id="cb253-6"><a href="#cb253-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb253-7"><a href="#cb253-7" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb253-8"><a href="#cb253-8" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb253-9"><a href="#cb253-9" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== ライブラリテストプログラム ===</span><span class="sc">\n\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb253-10"><a href="#cb253-10" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb253-11"><a href="#cb253-11" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* ログシステムテスト */</span></span>
<span id="cb253-12"><a href="#cb253-12" aria-hidden="true" tabindex="-1"></a>    logger_init<span class="op">(</span><span class="st">&quot;test.log&quot;</span><span class="op">);</span></span>
<span id="cb253-13"><a href="#cb253-13" aria-hidden="true" tabindex="-1"></a>    logger_set_level<span class="op">(</span>LOG_DEBUG<span class="op">);</span></span>
<span id="cb253-14"><a href="#cb253-14" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb253-15"><a href="#cb253-15" aria-hidden="true" tabindex="-1"></a>    LOG_INFO<span class="op">(</span><span class="st">&quot;テストプログラム開始&quot;</span><span class="op">);</span></span>
<span id="cb253-16"><a href="#cb253-16" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb253-17"><a href="#cb253-17" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 数学関数テスト */</span></span>
<span id="cb253-18"><a href="#cb253-18" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== 数学関数テスト ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb253-19"><a href="#cb253-19" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;add(15, 25) = </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> add<span class="op">(</span><span class="dv">15</span><span class="op">,</span> <span class="dv">25</span><span class="op">));</span></span>
<span id="cb253-20"><a href="#cb253-20" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;power(3, 4) = </span><span class="sc">%ld\n</span><span class="st">&quot;</span><span class="op">,</span> power<span class="op">(</span><span class="dv">3</span><span class="op">,</span> <span class="dv">4</span><span class="op">));</span></span>
<span id="cb253-21"><a href="#cb253-21" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb253-22"><a href="#cb253-22" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> numbers<span class="op">[]</span> <span class="op">=</span> <span class="op">{</span><span class="dv">10</span><span class="op">,</span> <span class="dv">20</span><span class="op">,</span> <span class="dv">30</span><span class="op">,</span> <span class="dv">40</span><span class="op">,</span> <span class="dv">50</span><span class="op">};</span></span>
<span id="cb253-23"><a href="#cb253-23" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;average = </span><span class="sc">%.2f\n</span><span class="st">&quot;</span><span class="op">,</span> average<span class="op">(</span>numbers<span class="op">,</span> <span class="dv">5</span><span class="op">));</span></span>
<span id="cb253-24"><a href="#cb253-24" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb253-25"><a href="#cb253-25" aria-hidden="true" tabindex="-1"></a>    LOG_DEBUG<span class="op">(</span><span class="st">&quot;数学関数テスト完了&quot;</span><span class="op">);</span></span>
<span id="cb253-26"><a href="#cb253-26" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb253-27"><a href="#cb253-27" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 文字列関数テスト */</span></span>
<span id="cb253-28"><a href="#cb253-28" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">=== 文字列関数テスト ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb253-29"><a href="#cb253-29" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> test_str<span class="op">[]</span> <span class="op">=</span> <span class="st">&quot;  Hello World  &quot;</span><span class="op">;</span></span>
<span id="cb253-30"><a href="#cb253-30" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;元の文字列: &#39;</span><span class="sc">%s</span><span class="st">&#39;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> test_str<span class="op">);</span></span>
<span id="cb253-31"><a href="#cb253-31" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb253-32"><a href="#cb253-32" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> <span class="op">*</span>trimmed <span class="op">=</span> trim_whitespace<span class="op">(</span>test_str<span class="op">);</span></span>
<span id="cb253-33"><a href="#cb253-33" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;トリム後: &#39;</span><span class="sc">%s</span><span class="st">&#39;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> trimmed<span class="op">);</span></span>
<span id="cb253-34"><a href="#cb253-34" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb253-35"><a href="#cb253-35" aria-hidden="true" tabindex="-1"></a>    to_uppercase<span class="op">(</span>trimmed<span class="op">);</span></span>
<span id="cb253-36"><a href="#cb253-36" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;大文字変換: &#39;</span><span class="sc">%s</span><span class="st">&#39;</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">,</span> trimmed<span class="op">);</span></span>
<span id="cb253-37"><a href="#cb253-37" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb253-38"><a href="#cb253-38" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;単語数: </span><span class="sc">%d\n</span><span class="st">&quot;</span><span class="op">,</span> count_words<span class="op">(</span><span class="st">&quot;Hello beautiful world&quot;</span><span class="op">));</span></span>
<span id="cb253-39"><a href="#cb253-39" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb253-40"><a href="#cb253-40" aria-hidden="true" tabindex="-1"></a>    LOG_DEBUG<span class="op">(</span><span class="st">&quot;文字列関数テスト完了&quot;</span><span class="op">);</span></span>
<span id="cb253-41"><a href="#cb253-41" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb253-42"><a href="#cb253-42" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 設定管理テスト */</span></span>
<span id="cb253-43"><a href="#cb253-43" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;</span><span class="sc">\n</span><span class="st">=== 設定管理テスト ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb253-44"><a href="#cb253-44" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb253-45"><a href="#cb253-45" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* デフォルト設定 */</span></span>
<span id="cb253-46"><a href="#cb253-46" aria-hidden="true" tabindex="-1"></a>    config_set_string<span class="op">(</span><span class="st">&quot;app_name&quot;</span><span class="op">,</span> <span class="st">&quot;Test Application&quot;</span><span class="op">);</span></span>
<span id="cb253-47"><a href="#cb253-47" aria-hidden="true" tabindex="-1"></a>    config_set_int<span class="op">(</span><span class="st">&quot;window_width&quot;</span><span class="op">,</span> <span class="dv">800</span><span class="op">);</span></span>
<span id="cb253-48"><a href="#cb253-48" aria-hidden="true" tabindex="-1"></a>    config_set_int<span class="op">(</span><span class="st">&quot;window_height&quot;</span><span class="op">,</span> <span class="dv">600</span><span class="op">);</span></span>
<span id="cb253-49"><a href="#cb253-49" aria-hidden="true" tabindex="-1"></a>    config_set_bool<span class="op">(</span><span class="st">&quot;full_screen&quot;</span><span class="op">,</span> <span class="dv">0</span><span class="op">);</span></span>
<span id="cb253-50"><a href="#cb253-50" aria-hidden="true" tabindex="-1"></a>    config_set_double<span class="op">(</span><span class="st">&quot;volume&quot;</span><span class="op">,</span> <span class="fl">0.75</span><span class="op">);</span></span>
<span id="cb253-51"><a href="#cb253-51" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb253-52"><a href="#cb253-52" aria-hidden="true" tabindex="-1"></a>    config_print_all<span class="op">();</span></span>
<span id="cb253-53"><a href="#cb253-53" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb253-54"><a href="#cb253-54" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 設定ファイル保存・読み込み */</span></span>
<span id="cb253-55"><a href="#cb253-55" aria-hidden="true" tabindex="-1"></a>    config_save<span class="op">(</span><span class="st">&quot;test.conf&quot;</span><span class="op">);</span></span>
<span id="cb253-56"><a href="#cb253-56" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb253-57"><a href="#cb253-57" aria-hidden="true" tabindex="-1"></a>    LOG_INFO<span class="op">(</span><span class="st">&quot;テストプログラム終了&quot;</span><span class="op">);</span></span>
<span id="cb253-58"><a href="#cb253-58" aria-hidden="true" tabindex="-1"></a>    logger_cleanup<span class="op">();</span></span>
<span id="cb253-59"><a href="#cb253-59" aria-hidden="true" tabindex="-1"></a>    config_unload<span class="op">();</span></span>
<span id="cb253-60"><a href="#cb253-60" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb253-61"><a href="#cb253-61" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> <span class="dv">0</span><span class="op">;</span></span>
<span id="cb253-62"><a href="#cb253-62" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<h3 data-number="14.3.6"
id="実践プロジェクト-ファイル管理システム"><span
class="header-section-number">14.3.6</span> 実践プロジェクト:
ファイル管理システム 📁</h3>
<p>これまでの知識を統合した実践的なプロジェクトを作成します。</p>
<h4 data-number="14.3.6.1" id="プロジェクト構成"><span
class="header-section-number">14.3.6.1</span> プロジェクト構成</h4>
<pre><code>file_manager/
├── include/
│   ├── file_ops.h
│   ├── menu.h
│   ├── utils.h
│   └── common.h
├── src/
│   ├── main.c
│   ├── file_ops.c
│   ├── menu.c
│   └── utils.c
├── config/
│   └── settings.conf
├── logs/
└── Makefile</code></pre>
<p><strong>include/common.h（共通定義）</strong></p>
<div class="sourceCode" id="cb255"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb255-1"><a href="#cb255-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#ifndef COMMON_H</span></span>
<span id="cb255-2"><a href="#cb255-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#define COMMON_H</span></span>
<span id="cb255-3"><a href="#cb255-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb255-4"><a href="#cb255-4" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdio.h&gt;</span></span>
<span id="cb255-5"><a href="#cb255-5" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;stdlib.h&gt;</span></span>
<span id="cb255-6"><a href="#cb255-6" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;string.h&gt;</span></span>
<span id="cb255-7"><a href="#cb255-7" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;time.h&gt;</span></span>
<span id="cb255-8"><a href="#cb255-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb255-9"><a href="#cb255-9" aria-hidden="true" tabindex="-1"></a><span class="co">/* 定数定義 */</span></span>
<span id="cb255-10"><a href="#cb255-10" aria-hidden="true" tabindex="-1"></a><span class="pp">#define MAX_PATH_LENGTH </span><span class="dv">1024</span></span>
<span id="cb255-11"><a href="#cb255-11" aria-hidden="true" tabindex="-1"></a><span class="pp">#define MAX_FILENAME_LENGTH </span><span class="dv">256</span></span>
<span id="cb255-12"><a href="#cb255-12" aria-hidden="true" tabindex="-1"></a><span class="pp">#define MAX_BUFFER_SIZE </span><span class="dv">4096</span></span>
<span id="cb255-13"><a href="#cb255-13" aria-hidden="true" tabindex="-1"></a><span class="pp">#define MAX_FILES_PER_PAGE </span><span class="dv">20</span></span>
<span id="cb255-14"><a href="#cb255-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb255-15"><a href="#cb255-15" aria-hidden="true" tabindex="-1"></a><span class="co">/* エラーコード */</span></span>
<span id="cb255-16"><a href="#cb255-16" aria-hidden="true" tabindex="-1"></a><span class="kw">typedef</span> <span class="kw">enum</span> <span class="op">{</span></span>
<span id="cb255-17"><a href="#cb255-17" aria-hidden="true" tabindex="-1"></a>    SUCCESS <span class="op">=</span> <span class="dv">0</span><span class="op">,</span></span>
<span id="cb255-18"><a href="#cb255-18" aria-hidden="true" tabindex="-1"></a>    ERROR_FILE_NOT_FOUND <span class="op">=</span> <span class="op">-</span><span class="dv">1</span><span class="op">,</span></span>
<span id="cb255-19"><a href="#cb255-19" aria-hidden="true" tabindex="-1"></a>    ERROR_PERMISSION_DENIED <span class="op">=</span> <span class="op">-</span><span class="dv">2</span><span class="op">,</span></span>
<span id="cb255-20"><a href="#cb255-20" aria-hidden="true" tabindex="-1"></a>    ERROR_INVALID_ARGUMENT <span class="op">=</span> <span class="op">-</span><span class="dv">3</span><span class="op">,</span></span>
<span id="cb255-21"><a href="#cb255-21" aria-hidden="true" tabindex="-1"></a>    ERROR_MEMORY_ALLOCATION <span class="op">=</span> <span class="op">-</span><span class="dv">4</span><span class="op">,</span></span>
<span id="cb255-22"><a href="#cb255-22" aria-hidden="true" tabindex="-1"></a>    ERROR_UNKNOWN <span class="op">=</span> <span class="op">-</span><span class="dv">99</span></span>
<span id="cb255-23"><a href="#cb255-23" aria-hidden="true" tabindex="-1"></a><span class="op">}</span> ErrorCode<span class="op">;</span></span>
<span id="cb255-24"><a href="#cb255-24" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb255-25"><a href="#cb255-25" aria-hidden="true" tabindex="-1"></a><span class="co">/* ファイル情報構造体 */</span></span>
<span id="cb255-26"><a href="#cb255-26" aria-hidden="true" tabindex="-1"></a><span class="kw">typedef</span> <span class="kw">struct</span> <span class="op">{</span></span>
<span id="cb255-27"><a href="#cb255-27" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> name<span class="op">[</span>MAX_FILENAME_LENGTH<span class="op">];</span></span>
<span id="cb255-28"><a href="#cb255-28" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> path<span class="op">[</span>MAX_PATH_LENGTH<span class="op">];</span></span>
<span id="cb255-29"><a href="#cb255-29" aria-hidden="true" tabindex="-1"></a>    <span class="dt">long</span> size<span class="op">;</span></span>
<span id="cb255-30"><a href="#cb255-30" aria-hidden="true" tabindex="-1"></a>    <span class="dt">time_t</span> modified_time<span class="op">;</span></span>
<span id="cb255-31"><a href="#cb255-31" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> is_directory<span class="op">;</span></span>
<span id="cb255-32"><a href="#cb255-32" aria-hidden="true" tabindex="-1"></a><span class="op">}</span> FileInfo<span class="op">;</span></span>
<span id="cb255-33"><a href="#cb255-33" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb255-34"><a href="#cb255-34" aria-hidden="true" tabindex="-1"></a><span class="co">/* アプリケーション設定 */</span></span>
<span id="cb255-35"><a href="#cb255-35" aria-hidden="true" tabindex="-1"></a><span class="kw">typedef</span> <span class="kw">struct</span> <span class="op">{</span></span>
<span id="cb255-36"><a href="#cb255-36" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> default_directory<span class="op">[</span>MAX_PATH_LENGTH<span class="op">];</span></span>
<span id="cb255-37"><a href="#cb255-37" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> show_hidden_files<span class="op">;</span></span>
<span id="cb255-38"><a href="#cb255-38" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> sort_by_name<span class="op">;</span></span>
<span id="cb255-39"><a href="#cb255-39" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> sort_ascending<span class="op">;</span></span>
<span id="cb255-40"><a href="#cb255-40" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> auto_save_settings<span class="op">;</span></span>
<span id="cb255-41"><a href="#cb255-41" aria-hidden="true" tabindex="-1"></a><span class="op">}</span> AppConfig<span class="op">;</span></span>
<span id="cb255-42"><a href="#cb255-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb255-43"><a href="#cb255-43" aria-hidden="true" tabindex="-1"></a><span class="co">/* グローバル変数宣言 */</span></span>
<span id="cb255-44"><a href="#cb255-44" aria-hidden="true" tabindex="-1"></a><span class="kw">extern</span> AppConfig g_app_config<span class="op">;</span></span>
<span id="cb255-45"><a href="#cb255-45" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb255-46"><a href="#cb255-46" aria-hidden="true" tabindex="-1"></a><span class="co">/* 共通マクロ */</span></span>
<span id="cb255-47"><a href="#cb255-47" aria-hidden="true" tabindex="-1"></a><span class="pp">#define SAFE_FREE</span><span class="op">(</span><span class="pp">ptr</span><span class="op">)</span><span class="pp"> </span><span class="cf">do</span><span class="pp"> </span><span class="op">{</span><span class="pp"> </span><span class="op">\</span></span>
<span id="cb255-48"><a href="#cb255-48" aria-hidden="true" tabindex="-1"></a><span class="pp">    </span><span class="cf">if</span><span class="pp"> </span><span class="op">((</span><span class="pp">ptr</span><span class="op">)</span><span class="pp"> </span><span class="op">!=</span><span class="pp"> NULL</span><span class="op">)</span><span class="pp"> </span><span class="op">{</span><span class="pp"> </span><span class="op">\</span></span>
<span id="cb255-49"><a href="#cb255-49" aria-hidden="true" tabindex="-1"></a><span class="pp">        free</span><span class="op">(</span><span class="pp">ptr</span><span class="op">);</span><span class="pp"> </span><span class="op">\</span></span>
<span id="cb255-50"><a href="#cb255-50" aria-hidden="true" tabindex="-1"></a><span class="pp">        </span><span class="op">(</span><span class="pp">ptr</span><span class="op">)</span><span class="pp"> </span><span class="op">=</span><span class="pp"> NULL</span><span class="op">;</span><span class="pp"> </span><span class="op">\</span></span>
<span id="cb255-51"><a href="#cb255-51" aria-hidden="true" tabindex="-1"></a><span class="pp">    </span><span class="op">}</span><span class="pp"> </span><span class="op">\</span></span>
<span id="cb255-52"><a href="#cb255-52" aria-hidden="true" tabindex="-1"></a><span class="op">}</span><span class="pp"> </span><span class="cf">while</span><span class="op">(</span><span class="dv">0</span><span class="op">)</span></span>
<span id="cb255-53"><a href="#cb255-53" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb255-54"><a href="#cb255-54" aria-hidden="true" tabindex="-1"></a><span class="pp">#define CHECK_NULL</span><span class="op">(</span><span class="pp">ptr</span><span class="op">,</span><span class="pp"> action</span><span class="op">)</span><span class="pp"> </span><span class="cf">do</span><span class="pp"> </span><span class="op">{</span><span class="pp"> </span><span class="op">\</span></span>
<span id="cb255-55"><a href="#cb255-55" aria-hidden="true" tabindex="-1"></a><span class="pp">    </span><span class="cf">if</span><span class="pp"> </span><span class="op">((</span><span class="pp">ptr</span><span class="op">)</span><span class="pp"> </span><span class="op">==</span><span class="pp"> NULL</span><span class="op">)</span><span class="pp"> </span><span class="op">{</span><span class="pp"> </span><span class="op">\</span></span>
<span id="cb255-56"><a href="#cb255-56" aria-hidden="true" tabindex="-1"></a><span class="pp">        action</span><span class="op">;</span><span class="pp"> </span><span class="op">\</span></span>
<span id="cb255-57"><a href="#cb255-57" aria-hidden="true" tabindex="-1"></a><span class="pp">    </span><span class="op">}</span><span class="pp"> </span><span class="op">\</span></span>
<span id="cb255-58"><a href="#cb255-58" aria-hidden="true" tabindex="-1"></a><span class="op">}</span><span class="pp"> </span><span class="cf">while</span><span class="op">(</span><span class="dv">0</span><span class="op">)</span></span>
<span id="cb255-59"><a href="#cb255-59" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb255-60"><a href="#cb255-60" aria-hidden="true" tabindex="-1"></a><span class="pp">#endif </span><span class="co">/* COMMON_H */</span></span></code></pre></div>
<p><strong>include/file_ops.h（ファイル操作）</strong></p>
<div class="sourceCode" id="cb256"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb256-1"><a href="#cb256-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#ifndef FILE_OPS_H</span></span>
<span id="cb256-2"><a href="#cb256-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#define FILE_OPS_H</span></span>
<span id="cb256-3"><a href="#cb256-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb256-4"><a href="#cb256-4" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&quot;common.h&quot;</span></span>
<span id="cb256-5"><a href="#cb256-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb256-6"><a href="#cb256-6" aria-hidden="true" tabindex="-1"></a><span class="co">/* ディレクトリ操作 */</span></span>
<span id="cb256-7"><a href="#cb256-7" aria-hidden="true" tabindex="-1"></a>ErrorCode list_directory<span class="op">(</span><span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>path<span class="op">,</span> FileInfo <span class="op">**</span>files<span class="op">,</span> <span class="dt">int</span> <span class="op">*</span>count<span class="op">);</span></span>
<span id="cb256-8"><a href="#cb256-8" aria-hidden="true" tabindex="-1"></a>ErrorCode change_directory<span class="op">(</span><span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>path<span class="op">);</span></span>
<span id="cb256-9"><a href="#cb256-9" aria-hidden="true" tabindex="-1"></a><span class="dt">char</span><span class="op">*</span> get_current_directory<span class="op">(</span><span class="dt">void</span><span class="op">);</span></span>
<span id="cb256-10"><a href="#cb256-10" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb256-11"><a href="#cb256-11" aria-hidden="true" tabindex="-1"></a><span class="co">/* ファイル操作 */</span></span>
<span id="cb256-12"><a href="#cb256-12" aria-hidden="true" tabindex="-1"></a>ErrorCode copy_file<span class="op">(</span><span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>source<span class="op">,</span> <span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>destination<span class="op">);</span></span>
<span id="cb256-13"><a href="#cb256-13" aria-hidden="true" tabindex="-1"></a>ErrorCode move_file<span class="op">(</span><span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>source<span class="op">,</span> <span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>destination<span class="op">);</span></span>
<span id="cb256-14"><a href="#cb256-14" aria-hidden="true" tabindex="-1"></a>ErrorCode delete_file<span class="op">(</span><span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>path<span class="op">);</span></span>
<span id="cb256-15"><a href="#cb256-15" aria-hidden="true" tabindex="-1"></a>ErrorCode create_directory<span class="op">(</span><span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>path<span class="op">);</span></span>
<span id="cb256-16"><a href="#cb256-16" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb256-17"><a href="#cb256-17" aria-hidden="true" tabindex="-1"></a><span class="co">/* ファイル情報 */</span></span>
<span id="cb256-18"><a href="#cb256-18" aria-hidden="true" tabindex="-1"></a>ErrorCode get_file_info<span class="op">(</span><span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>path<span class="op">,</span> FileInfo <span class="op">*</span>info<span class="op">);</span></span>
<span id="cb256-19"><a href="#cb256-19" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> print_file_info<span class="op">(</span><span class="dt">const</span> FileInfo <span class="op">*</span>info<span class="op">);</span></span>
<span id="cb256-20"><a href="#cb256-20" aria-hidden="true" tabindex="-1"></a><span class="dt">const</span> <span class="dt">char</span><span class="op">*</span> format_file_size<span class="op">(</span><span class="dt">long</span> size<span class="op">);</span></span>
<span id="cb256-21"><a href="#cb256-21" aria-hidden="true" tabindex="-1"></a><span class="dt">const</span> <span class="dt">char</span><span class="op">*</span> format_time<span class="op">(</span><span class="dt">time_t</span> time<span class="op">);</span></span>
<span id="cb256-22"><a href="#cb256-22" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb256-23"><a href="#cb256-23" aria-hidden="true" tabindex="-1"></a><span class="co">/* 検索機能 */</span></span>
<span id="cb256-24"><a href="#cb256-24" aria-hidden="true" tabindex="-1"></a>ErrorCode search_files<span class="op">(</span><span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>directory<span class="op">,</span> <span class="dt">const</span> <span class="dt">char</span> <span class="op">*</span>pattern<span class="op">,</span> </span>
<span id="cb256-25"><a href="#cb256-25" aria-hidden="true" tabindex="-1"></a>                       FileInfo <span class="op">**</span>results<span class="op">,</span> <span class="dt">int</span> <span class="op">*</span>count<span class="op">);</span></span>
<span id="cb256-26"><a href="#cb256-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb256-27"><a href="#cb256-27" aria-hidden="true" tabindex="-1"></a><span class="co">/* ソート機能 */</span></span>
<span id="cb256-28"><a href="#cb256-28" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> sort_files<span class="op">(</span>FileInfo <span class="op">*</span>files<span class="op">,</span> <span class="dt">int</span> count<span class="op">,</span> <span class="dt">int</span> by_name<span class="op">,</span> <span class="dt">int</span> ascending<span class="op">);</span></span>
<span id="cb256-29"><a href="#cb256-29" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb256-30"><a href="#cb256-30" aria-hidden="true" tabindex="-1"></a><span class="pp">#endif </span><span class="co">/* FILE_OPS_H */</span></span></code></pre></div>
<p><strong>src/main.c（メインプログラム）</strong></p>
<div class="sourceCode" id="cb257"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb257-1"><a href="#cb257-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&quot;common.h&quot;</span></span>
<span id="cb257-2"><a href="#cb257-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&quot;file_ops.h&quot;</span></span>
<span id="cb257-3"><a href="#cb257-3" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&quot;menu.h&quot;</span></span>
<span id="cb257-4"><a href="#cb257-4" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&quot;utils.h&quot;</span></span>
<span id="cb257-5"><a href="#cb257-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb257-6"><a href="#cb257-6" aria-hidden="true" tabindex="-1"></a><span class="co">/* グローバル変数定義 */</span></span>
<span id="cb257-7"><a href="#cb257-7" aria-hidden="true" tabindex="-1"></a>AppConfig g_app_config <span class="op">=</span> <span class="op">{</span></span>
<span id="cb257-8"><a href="#cb257-8" aria-hidden="true" tabindex="-1"></a>    <span class="st">&quot;/&quot;</span><span class="op">,</span>    <span class="co">/* default_directory */</span></span>
<span id="cb257-9"><a href="#cb257-9" aria-hidden="true" tabindex="-1"></a>    <span class="dv">0</span><span class="op">,</span>      <span class="co">/* show_hidden_files */</span></span>
<span id="cb257-10"><a href="#cb257-10" aria-hidden="true" tabindex="-1"></a>    <span class="dv">1</span><span class="op">,</span>      <span class="co">/* sort_by_name */</span></span>
<span id="cb257-11"><a href="#cb257-11" aria-hidden="true" tabindex="-1"></a>    <span class="dv">1</span><span class="op">,</span>      <span class="co">/* sort_ascending */</span></span>
<span id="cb257-12"><a href="#cb257-12" aria-hidden="true" tabindex="-1"></a>    <span class="dv">1</span>       <span class="co">/* auto_save_settings */</span></span>
<span id="cb257-13"><a href="#cb257-13" aria-hidden="true" tabindex="-1"></a><span class="op">};</span></span>
<span id="cb257-14"><a href="#cb257-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb257-15"><a href="#cb257-15" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> main<span class="op">(</span><span class="dt">void</span><span class="op">)</span></span>
<span id="cb257-16"><a href="#cb257-16" aria-hidden="true" tabindex="-1"></a><span class="op">{</span></span>
<span id="cb257-17"><a href="#cb257-17" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;=== ファイル管理システム ===</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb257-18"><a href="#cb257-18" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;バージョン 1.0</span><span class="sc">\n\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb257-19"><a href="#cb257-19" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb257-20"><a href="#cb257-20" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 初期化 */</span></span>
<span id="cb257-21"><a href="#cb257-21" aria-hidden="true" tabindex="-1"></a>    <span class="cf">if</span> <span class="op">(</span>init_application<span class="op">()</span> <span class="op">!=</span> SUCCESS<span class="op">)</span> <span class="op">{</span></span>
<span id="cb257-22"><a href="#cb257-22" aria-hidden="true" tabindex="-1"></a>        fprintf<span class="op">(</span>stderr<span class="op">,</span> <span class="st">&quot;アプリケーションの初期化に失敗しました</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb257-23"><a href="#cb257-23" aria-hidden="true" tabindex="-1"></a>        <span class="cf">return</span> EXIT_FAILURE<span class="op">;</span></span>
<span id="cb257-24"><a href="#cb257-24" aria-hidden="true" tabindex="-1"></a>    <span class="op">}</span></span>
<span id="cb257-25"><a href="#cb257-25" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb257-26"><a href="#cb257-26" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* メインループ */</span></span>
<span id="cb257-27"><a href="#cb257-27" aria-hidden="true" tabindex="-1"></a>    run_main_menu<span class="op">();</span></span>
<span id="cb257-28"><a href="#cb257-28" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb257-29"><a href="#cb257-29" aria-hidden="true" tabindex="-1"></a>    <span class="co">/* 終了処理 */</span></span>
<span id="cb257-30"><a href="#cb257-30" aria-hidden="true" tabindex="-1"></a>    cleanup_application<span class="op">();</span></span>
<span id="cb257-31"><a href="#cb257-31" aria-hidden="true" tabindex="-1"></a>    </span>
<span id="cb257-32"><a href="#cb257-32" aria-hidden="true" tabindex="-1"></a>    printf<span class="op">(</span><span class="st">&quot;ファイル管理システムを終了しました</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">);</span></span>
<span id="cb257-33"><a href="#cb257-33" aria-hidden="true" tabindex="-1"></a>    <span class="cf">return</span> EXIT_SUCCESS<span class="op">;</span></span>
<span id="cb257-34"><a href="#cb257-34" aria-hidden="true" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
<p><strong>include/menu.h（メニューシステム）</strong></p>
<div class="sourceCode" id="cb258"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb258-1"><a href="#cb258-1" aria-hidden="true" tabindex="-1"></a><span class="pp">#ifndef MENU_H</span></span>
<span id="cb258-2"><a href="#cb258-2" aria-hidden="true" tabindex="-1"></a><span class="pp">#define MENU_H</span></span>
<span id="cb258-3"><a href="#cb258-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb258-4"><a href="#cb258-4" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&quot;common.h&quot;</span></span>
<span id="cb258-5"><a href="#cb258-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb258-6"><a href="#cb258-6" aria-hidden="true" tabindex="-1"></a><span class="co">/* メニュー項目構造体 */</span></span>
<span id="cb258-7"><a href="#cb258-7" aria-hidden="true" tabindex="-1"></a><span class="kw">typedef</span> <span class="kw">struct</span> <span class="op">{</span></span>
<span id="cb258-8"><a href="#cb258-8" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> title<span class="op">[</span><span class="dv">50</span><span class="op">];</span></span>
<span id="cb258-9"><a href="#cb258-9" aria-hidden="true" tabindex="-1"></a>    <span class="dt">char</span> description<span class="op">[</span><span class="dv">100</span><span class="op">];</span></span>
<span id="cb258-10"><a href="#cb258-10" aria-hidden="true" tabindex="-1"></a>    <span class="dt">void</span> <span class="op">(*</span>handler<span class="op">)(</span><span class="dt">void</span><span class="op">);</span></span>
<span id="cb258-11"><a href="#cb258-11" aria-hidden="true" tabindex="-1"></a>    <span class="dt">int</span> enabled<span class="op">;</span></span>
<span id="cb258-12"><a href="#cb258-12" aria-hidden="true" tabindex="-1"></a><span class="op">}</span> MenuItem<span class="op">;</span></span>
<span id="cb258-13"><a href="#cb258-13" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb258-14"><a href="#cb258-14" aria-hidden="true" tabindex="-1"></a><span class="co">/* メニュー関数 */</span></span>
<span id="cb258-15"><a href="#cb258-15" aria-hidden="true" tabindex="-1"></a>ErrorCode init_application<span class="op">(</span><span class="dt">void</span><span class="op">);</span></span>
<span id="cb258-16"><a href="#cb258-16" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> cleanup_application<span class="op">(</span><span class="dt">void</span><span class="op">);</span></span>
<span id="cb258-17"><a href="#cb258-17" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> run_main_menu<span class="op">(</span><span class="dt">void</span><span class="op">);</span></span>
<span id="cb258-18"><a href="#cb258-18" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb258-19"><a href="#cb258-19" aria-hidden="true" tabindex="-1"></a><span class="co">/* メニューハンドラ */</span></span>
<span id="cb258-20"><a href="#cb258-20" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> handle_list_files<span class="op">(</span><span class="dt">void</span><span class="op">);</span></span>
<span id="cb258-21"><a href="#cb258-21" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> handle_change_directory<span class="op">(</span><span class="dt">void</span><span class="op">);</span></span>
<span id="cb258-22"><a href="#cb258-22" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> handle_copy_file<span class="op">(</span><span class="dt">void</span><span class="op">);</span></span>
<span id="cb258-23"><a href="#cb258-23" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> handle_move_file<span class="op">(</span><span class="dt">void</span><span class="op">);</span></span>
<span id="cb258-24"><a href="#cb258-24" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> handle_delete_file<span class="op">(</span><span class="dt">void</span><span class="op">);</span></span>
<span id="cb258-25"><a href="#cb258-25" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> handle_create_directory<span class="op">(</span><span class="dt">void</span><span class="op">);</span></span>
<span id="cb258-26"><a href="#cb258-26" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> handle_search_files<span class="op">(</span><span class="dt">void</span><span class="op">);</span></span>
<span id="cb258-27"><a href="#cb258-27" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> handle_show_settings<span class="op">(</span><span class="dt">void</span><span class="op">);</span></span>
<span id="cb258-28"><a href="#cb258-28" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> handle_save_settings<span class="op">(</span><span class="dt">void</span><span class="op">);</span></span>
<span id="cb258-29"><a href="#cb258-29" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> handle_help<span class="op">(</span><span class="dt">void</span><span class="op">);</span></span>
<span id="cb258-30"><a href="#cb258-30" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb258-31"><a href="#cb258-31" aria-hidden="true" tabindex="-1"></a><span class="co">/* ユーティリティ */</span></span>
<span id="cb258-32"><a href="#cb258-32" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> display_menu<span class="op">(</span><span class="dt">const</span> MenuItem <span class="op">*</span>menu<span class="op">,</span> <span class="dt">int</span> count<span class="op">);</span></span>
<span id="cb258-33"><a href="#cb258-33" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> get_menu_choice<span class="op">(</span><span class="dt">int</span> max_choice<span class="op">);</span></span>
<span id="cb258-34"><a href="#cb258-34" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> wait_for_enter<span class="op">(</span><span class="dt">void</span><span class="op">);</span></span>
<span id="cb258-35"><a href="#cb258-35" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> clear_screen<span class="op">(</span><span class="dt">void</span><span class="op">);</span></span>
<span id="cb258-36"><a href="#cb258-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb258-37"><a href="#cb258-37" aria-hidden="true" tabindex="-1"></a><span class="pp">#endif </span><span class="co">/* MENU_H */</span></span></code></pre></div>
<h3 data-number="14.3.7" id="コンパイル最適化とデバッグ"><span
class="header-section-number">14.3.7</span> コンパイル最適化とデバッグ
🔧</h3>
<p>効率的な開発のためのコンパイル設定を学習します。</p>
<h4 data-number="14.3.7.1" id="高度なmakefile"><span
class="header-section-number">14.3.7.1</span> 高度なMakefile</h4>
<p><strong>Makefile（完全版）</strong></p>
<div class="sourceCode" id="cb259"><pre
class="sourceCode makefile"><code class="sourceCode makefile"><span id="cb259-1"><a href="#cb259-1" aria-hidden="true" tabindex="-1"></a><span class="co"># プロジェクト設定</span></span>
<span id="cb259-2"><a href="#cb259-2" aria-hidden="true" tabindex="-1"></a><span class="dt">PROJECT_NAME</span> <span class="ch">=</span><span class="st"> file_manager</span></span>
<span id="cb259-3"><a href="#cb259-3" aria-hidden="true" tabindex="-1"></a><span class="dt">VERSION</span> <span class="ch">=</span><span class="st"> 1.0.0</span></span>
<span id="cb259-4"><a href="#cb259-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb259-5"><a href="#cb259-5" aria-hidden="true" tabindex="-1"></a><span class="co"># ディレクトリ構成</span></span>
<span id="cb259-6"><a href="#cb259-6" aria-hidden="true" tabindex="-1"></a><span class="dt">SRC_DIR</span> <span class="ch">=</span><span class="st"> src</span></span>
<span id="cb259-7"><a href="#cb259-7" aria-hidden="true" tabindex="-1"></a><span class="dt">INC_DIR</span> <span class="ch">=</span><span class="st"> include</span></span>
<span id="cb259-8"><a href="#cb259-8" aria-hidden="true" tabindex="-1"></a><span class="dt">BUILD_DIR</span> <span class="ch">=</span><span class="st"> build</span></span>
<span id="cb259-9"><a href="#cb259-9" aria-hidden="true" tabindex="-1"></a><span class="dt">BIN_DIR</span> <span class="ch">=</span><span class="st"> bin</span></span>
<span id="cb259-10"><a href="#cb259-10" aria-hidden="true" tabindex="-1"></a><span class="dt">LIB_DIR</span> <span class="ch">=</span><span class="st"> lib</span></span>
<span id="cb259-11"><a href="#cb259-11" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb259-12"><a href="#cb259-12" aria-hidden="true" tabindex="-1"></a><span class="co"># コンパイラ設定</span></span>
<span id="cb259-13"><a href="#cb259-13" aria-hidden="true" tabindex="-1"></a><span class="dt">CC</span> <span class="ch">=</span><span class="st"> gcc</span></span>
<span id="cb259-14"><a href="#cb259-14" aria-hidden="true" tabindex="-1"></a><span class="dt">CFLAGS</span> <span class="ch">=</span><span class="st"> -std=c90 -Wall -Wextra -pedantic</span></span>
<span id="cb259-15"><a href="#cb259-15" aria-hidden="true" tabindex="-1"></a><span class="dt">INCLUDES</span> <span class="ch">=</span><span class="st"> -I</span><span class="ch">$(</span><span class="dt">INC_DIR</span><span class="ch">)</span></span>
<span id="cb259-16"><a href="#cb259-16" aria-hidden="true" tabindex="-1"></a><span class="dt">LIBS</span> <span class="ch">=</span><span class="st"> -lm</span></span>
<span id="cb259-17"><a href="#cb259-17" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb259-18"><a href="#cb259-18" aria-hidden="true" tabindex="-1"></a><span class="co"># ビルドモード別設定</span></span>
<span id="cb259-19"><a href="#cb259-19" aria-hidden="true" tabindex="-1"></a><span class="cf">ifdef</span> DEBUG</span>
<span id="cb259-20"><a href="#cb259-20" aria-hidden="true" tabindex="-1"></a>    <span class="dt">CFLAGS</span> <span class="ch">+=</span><span class="st"> -g -DDEBUG -O0</span></span>
<span id="cb259-21"><a href="#cb259-21" aria-hidden="true" tabindex="-1"></a>    <span class="dt">BUILD_TYPE</span> <span class="ch">=</span><span class="st"> debug</span></span>
<span id="cb259-22"><a href="#cb259-22" aria-hidden="true" tabindex="-1"></a><span class="cf">else</span></span>
<span id="cb259-23"><a href="#cb259-23" aria-hidden="true" tabindex="-1"></a>    <span class="dt">CFLAGS</span> <span class="ch">+=</span><span class="st"> -O2 -DNDEBUG</span></span>
<span id="cb259-24"><a href="#cb259-24" aria-hidden="true" tabindex="-1"></a>    <span class="dt">BUILD_TYPE</span> <span class="ch">=</span><span class="st"> release</span></span>
<span id="cb259-25"><a href="#cb259-25" aria-hidden="true" tabindex="-1"></a><span class="cf">endif</span></span>
<span id="cb259-26"><a href="#cb259-26" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb259-27"><a href="#cb259-27" aria-hidden="true" tabindex="-1"></a><span class="cf">ifdef</span> PROFILE</span>
<span id="cb259-28"><a href="#cb259-28" aria-hidden="true" tabindex="-1"></a>    <span class="dt">CFLAGS</span> <span class="ch">+=</span><span class="st"> -pg</span></span>
<span id="cb259-29"><a href="#cb259-29" aria-hidden="true" tabindex="-1"></a>    <span class="dt">LIBS</span> <span class="ch">+=</span><span class="st"> -pg</span></span>
<span id="cb259-30"><a href="#cb259-30" aria-hidden="true" tabindex="-1"></a><span class="cf">endif</span></span>
<span id="cb259-31"><a href="#cb259-31" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb259-32"><a href="#cb259-32" aria-hidden="true" tabindex="-1"></a><span class="co"># ソースファイルの自動検出</span></span>
<span id="cb259-33"><a href="#cb259-33" aria-hidden="true" tabindex="-1"></a><span class="dt">SOURCES</span> <span class="ch">=</span><span class="st"> </span><span class="ch">$(</span><span class="kw">wildcard</span><span class="st"> </span><span class="ch">$(</span><span class="dt">SRC_DIR</span><span class="ch">)</span><span class="st">/*.c</span><span class="ch">)</span></span>
<span id="cb259-34"><a href="#cb259-34" aria-hidden="true" tabindex="-1"></a><span class="dt">OBJECTS</span> <span class="ch">=</span><span class="st"> </span><span class="ch">$(</span><span class="dt">SOURCES</span><span class="kw">:</span><span class="ch">$(</span><span class="dt">SRC_DIR</span><span class="ch">)</span><span class="ss">/%.c</span><span class="kw">=</span><span class="ch">$(</span><span class="dt">BUILD_DIR</span><span class="ch">)</span><span class="ss">/%.o</span><span class="ch">)</span></span>
<span id="cb259-35"><a href="#cb259-35" aria-hidden="true" tabindex="-1"></a><span class="dt">DEPS</span> <span class="ch">=</span><span class="st"> </span><span class="ch">$(</span><span class="dt">OBJECTS</span><span class="kw">:</span><span class="ss">.o</span><span class="kw">=</span><span class="ss">.d</span><span class="ch">)</span></span>
<span id="cb259-36"><a href="#cb259-36" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb259-37"><a href="#cb259-37" aria-hidden="true" tabindex="-1"></a><span class="co"># ターゲット名</span></span>
<span id="cb259-38"><a href="#cb259-38" aria-hidden="true" tabindex="-1"></a><span class="dt">TARGET</span> <span class="ch">=</span><span class="st"> </span><span class="ch">$(</span><span class="dt">BIN_DIR</span><span class="ch">)</span><span class="st">/</span><span class="ch">$(</span><span class="dt">PROJECT_NAME</span><span class="ch">)</span></span>
<span id="cb259-39"><a href="#cb259-39" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb259-40"><a href="#cb259-40" aria-hidden="true" tabindex="-1"></a><span class="co"># デフォルトターゲット</span></span>
<span id="cb259-41"><a href="#cb259-41" aria-hidden="true" tabindex="-1"></a><span class="dv">all:</span><span class="dt"> </span><span class="ch">$(</span><span class="dt">TARGET</span><span class="ch">)</span></span>
<span id="cb259-42"><a href="#cb259-42" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb259-43"><a href="#cb259-43" aria-hidden="true" tabindex="-1"></a><span class="co"># ディレクトリ作成</span></span>
<span id="cb259-44"><a href="#cb259-44" aria-hidden="true" tabindex="-1"></a><span class="dv">$(BUILD_DIR) $(BIN_DIR) $(LIB_DIR):</span></span>
<span id="cb259-45"><a href="#cb259-45" aria-hidden="true" tabindex="-1"></a><span class="er">    </span>mkdir -p <span class="ch">$@</span></span>
<span id="cb259-46"><a href="#cb259-46" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb259-47"><a href="#cb259-47" aria-hidden="true" tabindex="-1"></a><span class="co"># 実行ファイル作成</span></span>
<span id="cb259-48"><a href="#cb259-48" aria-hidden="true" tabindex="-1"></a><span class="dv">$(TARGET):</span><span class="dt"> </span><span class="ch">$(</span><span class="dt">OBJECTS</span><span class="ch">)</span><span class="dt"> | </span><span class="ch">$(</span><span class="dt">BIN_DIR</span><span class="ch">)</span></span>
<span id="cb259-49"><a href="#cb259-49" aria-hidden="true" tabindex="-1"></a><span class="er">    </span><span class="ch">$(</span><span class="dt">CC</span><span class="ch">)</span> <span class="ch">$(</span><span class="dt">OBJECTS</span><span class="ch">)</span> <span class="ch">$(</span><span class="dt">LIBS</span><span class="ch">)</span> -o <span class="ch">$@</span></span>
<span id="cb259-50"><a href="#cb259-50" aria-hidden="true" tabindex="-1"></a>    <span class="ch">@</span><span class="fu">echo </span><span class="st">&quot;ビルド完了: </span><span class="ch">$@</span><span class="st"> (</span><span class="ch">$(</span><span class="dt">BUILD_TYPE</span><span class="ch">)</span><span class="st">)&quot;</span></span>
<span id="cb259-51"><a href="#cb259-51" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb259-52"><a href="#cb259-52" aria-hidden="true" tabindex="-1"></a><span class="co"># オブジェクトファイル作成（依存関係付き）</span></span>
<span id="cb259-53"><a href="#cb259-53" aria-hidden="true" tabindex="-1"></a><span class="dv">$(BUILD_DIR)/%.o:</span><span class="dt"> </span><span class="ch">$(</span><span class="dt">SRC_DIR</span><span class="ch">)</span><span class="dt">/%.c | </span><span class="ch">$(</span><span class="dt">BUILD_DIR</span><span class="ch">)</span></span>
<span id="cb259-54"><a href="#cb259-54" aria-hidden="true" tabindex="-1"></a><span class="er">    </span><span class="ch">$(</span><span class="dt">CC</span><span class="ch">)</span> <span class="ch">$(</span><span class="dt">CFLAGS</span><span class="ch">)</span> <span class="ch">$(</span><span class="dt">INCLUDES</span><span class="ch">)</span> -MMD -MP -c <span class="ch">$&lt;</span> -o <span class="ch">$@</span></span>
<span id="cb259-55"><a href="#cb259-55" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb259-56"><a href="#cb259-56" aria-hidden="true" tabindex="-1"></a><span class="co"># 依存関係ファイルをインクルード</span></span>
<span id="cb259-57"><a href="#cb259-57" aria-hidden="true" tabindex="-1"></a><span class="kw">-include</span> <span class="ch">$(</span><span class="dt">DEPS</span><span class="ch">)</span></span>
<span id="cb259-58"><a href="#cb259-58" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb259-59"><a href="#cb259-59" aria-hidden="true" tabindex="-1"></a><span class="co"># デバッグビルド</span></span>
<span id="cb259-60"><a href="#cb259-60" aria-hidden="true" tabindex="-1"></a><span class="dv">debug:</span></span>
<span id="cb259-61"><a href="#cb259-61" aria-hidden="true" tabindex="-1"></a><span class="er">    </span><span class="ch">$(</span><span class="dt">MAKE</span><span class="ch">)</span> DEBUG=1</span>
<span id="cb259-62"><a href="#cb259-62" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb259-63"><a href="#cb259-63" aria-hidden="true" tabindex="-1"></a><span class="co"># リリースビルド</span></span>
<span id="cb259-64"><a href="#cb259-64" aria-hidden="true" tabindex="-1"></a><span class="dv">release:</span></span>
<span id="cb259-65"><a href="#cb259-65" aria-hidden="true" tabindex="-1"></a><span class="er">    </span><span class="ch">$(</span><span class="dt">MAKE</span><span class="ch">)</span></span>
<span id="cb259-66"><a href="#cb259-66" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb259-67"><a href="#cb259-67" aria-hidden="true" tabindex="-1"></a><span class="co"># プロファイルビルド</span></span>
<span id="cb259-68"><a href="#cb259-68" aria-hidden="true" tabindex="-1"></a><span class="dv">profile:</span></span>
<span id="cb259-69"><a href="#cb259-69" aria-hidden="true" tabindex="-1"></a><span class="er">    </span><span class="ch">$(</span><span class="dt">MAKE</span><span class="ch">)</span> PROFILE=1</span>
<span id="cb259-70"><a href="#cb259-70" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb259-71"><a href="#cb259-71" aria-hidden="true" tabindex="-1"></a><span class="co"># テスト実行</span></span>
<span id="cb259-72"><a href="#cb259-72" aria-hidden="true" tabindex="-1"></a><span class="dv">test:</span><span class="dt"> </span><span class="ch">$(</span><span class="dt">TARGET</span><span class="ch">)</span></span>
<span id="cb259-73"><a href="#cb259-73" aria-hidden="true" tabindex="-1"></a><span class="er">    </span><span class="ch">@</span><span class="fu">echo </span><span class="st">&quot;テスト実行中...&quot;</span></span>
<span id="cb259-74"><a href="#cb259-74" aria-hidden="true" tabindex="-1"></a>    ./<span class="ch">$(</span><span class="dt">TARGET</span><span class="ch">)</span> --test</span>
<span id="cb259-75"><a href="#cb259-75" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb259-76"><a href="#cb259-76" aria-hidden="true" tabindex="-1"></a><span class="co"># インストール</span></span>
<span id="cb259-77"><a href="#cb259-77" aria-hidden="true" tabindex="-1"></a><span class="dv">install:</span><span class="dt"> </span><span class="ch">$(</span><span class="dt">TARGET</span><span class="ch">)</span></span>
<span id="cb259-78"><a href="#cb259-78" aria-hidden="true" tabindex="-1"></a><span class="er">    </span>sudo cp <span class="ch">$(</span><span class="dt">TARGET</span><span class="ch">)</span> /usr/local/bin/</span>
<span id="cb259-79"><a href="#cb259-79" aria-hidden="true" tabindex="-1"></a>    sudo mkdir -p /usr/local/share/<span class="ch">$(</span><span class="dt">PROJECT_NAME</span><span class="ch">)</span></span>
<span id="cb259-80"><a href="#cb259-80" aria-hidden="true" tabindex="-1"></a>    sudo cp -r config /usr/local/share/<span class="ch">$(</span><span class="dt">PROJECT_NAME</span><span class="ch">)</span>/</span>
<span id="cb259-81"><a href="#cb259-81" aria-hidden="true" tabindex="-1"></a>    <span class="ch">@</span><span class="fu">echo </span><span class="st">&quot;インストール完了&quot;</span></span>
<span id="cb259-82"><a href="#cb259-82" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb259-83"><a href="#cb259-83" aria-hidden="true" tabindex="-1"></a><span class="co"># アンインストール</span></span>
<span id="cb259-84"><a href="#cb259-84" aria-hidden="true" tabindex="-1"></a><span class="dv">uninstall:</span></span>
<span id="cb259-85"><a href="#cb259-85" aria-hidden="true" tabindex="-1"></a><span class="er">    </span>sudo rm -f /usr/local/bin/<span class="ch">$(</span><span class="dt">PROJECT_NAME</span><span class="ch">)</span></span>
<span id="cb259-86"><a href="#cb259-86" aria-hidden="true" tabindex="-1"></a>    sudo rm -rf /usr/local/share/<span class="ch">$(</span><span class="dt">PROJECT_NAME</span><span class="ch">)</span></span>
<span id="cb259-87"><a href="#cb259-87" aria-hidden="true" tabindex="-1"></a>    <span class="ch">@</span><span class="fu">echo </span><span class="st">&quot;アンインストール完了&quot;</span></span>
<span id="cb259-88"><a href="#cb259-88" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb259-89"><a href="#cb259-89" aria-hidden="true" tabindex="-1"></a><span class="co"># パッケージ作成</span></span>
<span id="cb259-90"><a href="#cb259-90" aria-hidden="true" tabindex="-1"></a><span class="dv">package:</span><span class="dt"> clean</span></span>
<span id="cb259-91"><a href="#cb259-91" aria-hidden="true" tabindex="-1"></a><span class="er">    </span>tar -czf <span class="ch">$(</span><span class="dt">PROJECT_NAME</span><span class="ch">)</span>-<span class="ch">$(</span><span class="dt">VERSION</span><span class="ch">)</span>.tar.gz \</span>
<span id="cb259-92"><a href="#cb259-92" aria-hidden="true" tabindex="-1"></a>        <span class="ch">$(</span><span class="dt">SRC_DIR</span><span class="ch">)</span> <span class="ch">$(</span><span class="dt">INC_DIR</span><span class="ch">)</span> Makefile README.md</span>
<span id="cb259-93"><a href="#cb259-93" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb259-94"><a href="#cb259-94" aria-hidden="true" tabindex="-1"></a><span class="co"># クリーンアップ</span></span>
<span id="cb259-95"><a href="#cb259-95" aria-hidden="true" tabindex="-1"></a><span class="dv">clean:</span></span>
<span id="cb259-96"><a href="#cb259-96" aria-hidden="true" tabindex="-1"></a><span class="er">    </span>rm -rf <span class="ch">$(</span><span class="dt">BUILD_DIR</span><span class="ch">)</span> <span class="ch">$(</span><span class="dt">BIN_DIR</span><span class="ch">)</span></span>
<span id="cb259-97"><a href="#cb259-97" aria-hidden="true" tabindex="-1"></a>    <span class="ch">@</span><span class="fu">echo </span><span class="st">&quot;クリーンアップ完了&quot;</span></span>
<span id="cb259-98"><a href="#cb259-98" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb259-99"><a href="#cb259-99" aria-hidden="true" tabindex="-1"></a><span class="co"># 全削除</span></span>
<span id="cb259-100"><a href="#cb259-100" aria-hidden="true" tabindex="-1"></a><span class="dv">distclean:</span><span class="dt"> clean</span></span>
<span id="cb259-101"><a href="#cb259-101" aria-hidden="true" tabindex="-1"></a><span class="er">    </span>rm -rf <span class="ch">$(</span><span class="dt">LIB_DIR</span><span class="ch">)</span></span>
<span id="cb259-102"><a href="#cb259-102" aria-hidden="true" tabindex="-1"></a>    rm -f *.tar.gz</span>
<span id="cb259-103"><a href="#cb259-103" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb259-104"><a href="#cb259-104" aria-hidden="true" tabindex="-1"></a><span class="co"># ヘルプ</span></span>
<span id="cb259-105"><a href="#cb259-105" aria-hidden="true" tabindex="-1"></a><span class="dv">help:</span></span>
<span id="cb259-106"><a href="#cb259-106" aria-hidden="true" tabindex="-1"></a><span class="er">    </span><span class="ch">@</span><span class="fu">echo </span><span class="st">&quot;利用可能なターゲット:&quot;</span></span>
<span id="cb259-107"><a href="#cb259-107" aria-hidden="true" tabindex="-1"></a>    <span class="ch">@</span><span class="fu">echo </span><span class="st">&quot;  all       - リリースビルド&quot;</span></span>
<span id="cb259-108"><a href="#cb259-108" aria-hidden="true" tabindex="-1"></a>    <span class="ch">@</span><span class="fu">echo </span><span class="st">&quot;  debug     - デバッグビルド&quot;</span></span>
<span id="cb259-109"><a href="#cb259-109" aria-hidden="true" tabindex="-1"></a>    <span class="ch">@</span><span class="fu">echo </span><span class="st">&quot;  release   - リリースビルド&quot;</span></span>
<span id="cb259-110"><a href="#cb259-110" aria-hidden="true" tabindex="-1"></a>    <span class="ch">@</span><span class="fu">echo </span><span class="st">&quot;  profile   - プロファイリングビルド&quot;</span></span>
<span id="cb259-111"><a href="#cb259-111" aria-hidden="true" tabindex="-1"></a>    <span class="ch">@</span><span class="fu">echo </span><span class="st">&quot;  test      - テスト実行&quot;</span></span>
<span id="cb259-112"><a href="#cb259-112" aria-hidden="true" tabindex="-1"></a>    <span class="ch">@</span><span class="fu">echo </span><span class="st">&quot;  install   - システムにインストール&quot;</span></span>
<span id="cb259-113"><a href="#cb259-113" aria-hidden="true" tabindex="-1"></a>    <span class="ch">@</span><span class="fu">echo </span><span class="st">&quot;  uninstall - アンインストール&quot;</span></span>
<span id="cb259-114"><a href="#cb259-114" aria-hidden="true" tabindex="-1"></a>    <span class="ch">@</span><span class="fu">echo </span><span class="st">&quot;  package   - パッケージ作成&quot;</span></span>
<span id="cb259-115"><a href="#cb259-115" aria-hidden="true" tabindex="-1"></a>    <span class="ch">@</span><span class="fu">echo </span><span class="st">&quot;  clean     - ビルドファイル削除&quot;</span></span>
<span id="cb259-116"><a href="#cb259-116" aria-hidden="true" tabindex="-1"></a>    <span class="ch">@</span><span class="fu">echo </span><span class="st">&quot;  distclean - 全ファイル削除&quot;</span></span>
<span id="cb259-117"><a href="#cb259-117" aria-hidden="true" tabindex="-1"></a>    <span class="ch">@</span><span class="fu">echo </span><span class="st">&quot;  help      - このヘルプ&quot;</span></span>
<span id="cb259-118"><a href="#cb259-118" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb259-119"><a href="#cb259-119" aria-hidden="true" tabindex="-1"></a><span class="ot">.PHONY:</span><span class="dt"> all debug release profile test install uninstall package clean distclean help</span></span></code></pre></div>
<h2 data-number="14.4" id="サンプルコード-12"><span
class="header-section-number">14.4</span> サンプルコード</h2>
<h3 data-number="14.4.1" id="分割コンパイルの基本-1"><span
class="header-section-number">14.4.1</span> 分割コンパイルの基本</h3>
<p>プログラムファイル: <code>examples/multi_file_basic/</code></p>
<p>複数ファイルに分割した基本的なプログラムを学習します。</p>
<h3 data-number="14.4.2" id="ライブラリ作成"><span
class="header-section-number">14.4.2</span> ライブラリ作成</h3>
<p>プログラムファイル: <code>examples/library_creation/</code></p>
<p>静的ライブラリの作成と使用方法を学習します。</p>
<h3 data-number="14.4.3" id="実践プロジェクト"><span
class="header-section-number">14.4.3</span> 実践プロジェクト</h3>
<p>プログラムファイル: <code>examples/file_manager/</code></p>
<p>統合された実践的なプロジェクトを学習します。</p>
<h3 data-number="14.4.4" id="コンパイルと実行-12"><span
class="header-section-number">14.4.4</span> コンパイルと実行</h3>
<div class="sourceCode" id="cb260"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb260-1"><a href="#cb260-1" aria-hidden="true" tabindex="-1"></a><span class="co"># プロジェクトディレクトリに移動</span></span>
<span id="cb260-2"><a href="#cb260-2" aria-hidden="true" tabindex="-1"></a><span class="bu">cd</span> examples/multi_file_basic</span>
<span id="cb260-3"><a href="#cb260-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb260-4"><a href="#cb260-4" aria-hidden="true" tabindex="-1"></a><span class="co"># デバッグビルド</span></span>
<span id="cb260-5"><a href="#cb260-5" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> debug</span>
<span id="cb260-6"><a href="#cb260-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb260-7"><a href="#cb260-7" aria-hidden="true" tabindex="-1"></a><span class="co"># リリースビルド</span></span>
<span id="cb260-8"><a href="#cb260-8" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> release</span>
<span id="cb260-9"><a href="#cb260-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb260-10"><a href="#cb260-10" aria-hidden="true" tabindex="-1"></a><span class="co"># 実行</span></span>
<span id="cb260-11"><a href="#cb260-11" aria-hidden="true" tabindex="-1"></a><span class="ex">./bin/program_name</span></span></code></pre></div>
<h2 data-number="14.5" id="演習課題-12"><span
class="header-section-number">14.5</span> 演習課題</h2>
<h3 data-number="14.5.1" id="基礎問題-12"><span
class="header-section-number">14.5.1</span> 基礎問題</h3>
<ol type="1">
<li><strong>分割コンパイル</strong>
<ul>
<li>簡単な計算機プログラムを複数ファイルに分割し、適切なヘッダファイルを作成してください</li>
</ul></li>
<li><strong>extern宣言</strong>
<ul>
<li>グローバル変数を使ってアプリケーションの状態を管理するプログラムを作成してください</li>
</ul></li>
<li><strong>マクロ活用</strong>
<ul>
<li>デバッグ用マクロとリリース用マクロを使い分けるプログラムを実装してください</li>
</ul></li>
</ol>
<h3 data-number="14.5.2" id="応用問題-12"><span
class="header-section-number">14.5.2</span> 応用問題</h3>
<ol type="1">
<li><strong>モジュール設計</strong>
<ul>
<li>データ構造（スタック、キューなど）を独立したモジュールとして実装してください</li>
</ul></li>
<li><strong>設定システム</strong>
<ul>
<li>設定ファイルから値を読み込み、プログラムの動作を制御するシステムを作成してください</li>
</ul></li>
<li><strong>ログシステム</strong>
<ul>
<li>レベル別ログ出力機能を持つライブラリを作成してください</li>
</ul></li>
</ol>
<h3 data-number="14.5.3" id="発展問題-7"><span
class="header-section-number">14.5.3</span> 発展問題</h3>
<ol type="1">
<li><strong>ライブラリ作成</strong>
<ul>
<li>汎用的な文字列処理ライブラリを作成し、テストプログラムで動作確認してください</li>
</ul></li>
<li><strong>プラグインシステム</strong>
<ul>
<li>実行時に機能を追加できるプラグイン機能を実装してください</li>
</ul></li>
<li><strong>プロジェクト統合</strong>
<ul>
<li>これまでの章で学んだ全ての技術を統合した実用的なアプリケーションを作成してください</li>
</ul></li>
</ol>
<h2 data-number="14.6" id="コンパイル方法-12"><span
class="header-section-number">14.6</span> コンパイル方法</h2>
<p>この章では以下のMakefileを使用してコンパイルができます：</p>
<div class="sourceCode" id="cb261"><pre
class="sourceCode bash"><code class="sourceCode bash"><span id="cb261-1"><a href="#cb261-1" aria-hidden="true" tabindex="-1"></a><span class="co"># デバッグビルド</span></span>
<span id="cb261-2"><a href="#cb261-2" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> debug</span>
<span id="cb261-3"><a href="#cb261-3" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb261-4"><a href="#cb261-4" aria-hidden="true" tabindex="-1"></a><span class="co"># リリースビルド</span></span>
<span id="cb261-5"><a href="#cb261-5" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> release</span>
<span id="cb261-6"><a href="#cb261-6" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb261-7"><a href="#cb261-7" aria-hidden="true" tabindex="-1"></a><span class="co"># ライブラリ作成</span></span>
<span id="cb261-8"><a href="#cb261-8" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> library</span>
<span id="cb261-9"><a href="#cb261-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb261-10"><a href="#cb261-10" aria-hidden="true" tabindex="-1"></a><span class="co"># テスト実行</span></span>
<span id="cb261-11"><a href="#cb261-11" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> test</span>
<span id="cb261-12"><a href="#cb261-12" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb261-13"><a href="#cb261-13" aria-hidden="true" tabindex="-1"></a><span class="co"># インストール</span></span>
<span id="cb261-14"><a href="#cb261-14" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> install</span>
<span id="cb261-15"><a href="#cb261-15" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb261-16"><a href="#cb261-16" aria-hidden="true" tabindex="-1"></a><span class="co"># クリーンアップ</span></span>
<span id="cb261-17"><a href="#cb261-17" aria-hidden="true" tabindex="-1"></a><span class="fu">make</span> clean</span></code></pre></div>
<h2 data-number="14.7" id="規格による違い-12"><span
class="header-section-number">14.7</span> 規格による違い</h2>
<h3 data-number="14.7.1" id="c90での制限事項-11"><span
class="header-section-number">14.7.1</span> C90での制限事項</h3>
<ul>
<li>関数プロトタイプ宣言が必須</li>
<li>変数宣言はブロックの先頭のみ</li>
<li>C++スタイルコメント（//）は不可</li>
</ul>
<h3 data-number="14.7.2" id="c99以降の拡張-11"><span
class="header-section-number">14.7.2</span> C99以降の拡張</h3>
<ul>
<li>inline関数サポート</li>
<li>可変長配列</li>
<li>C++スタイルコメント許可</li>
<li>新しいプリプロセッサ機能</li>
</ul>
<h2 data-number="14.8" id="よくある間違い-10"><span
class="header-section-number">14.8</span> 🚨 よくある間違い</h2>
<h3 data-number="14.8.1"
id="ヘッダファイルのインクルードガード忘れ"><span
class="header-section-number">14.8.1</span> 1.
ヘッダファイルのインクルードガード忘れ</h3>
<div class="sourceCode" id="cb262"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb262-1"><a href="#cb262-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* NG: インクルードガードなし */</span></span>
<span id="cb262-2"><a href="#cb262-2" aria-hidden="true" tabindex="-1"></a><span class="co">/* myheader.h */</span></span>
<span id="cb262-3"><a href="#cb262-3" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> my_function<span class="op">(</span><span class="dt">void</span><span class="op">);</span></span>
<span id="cb262-4"><a href="#cb262-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb262-5"><a href="#cb262-5" aria-hidden="true" tabindex="-1"></a><span class="co">/* OK: インクルードガード付き */</span></span>
<span id="cb262-6"><a href="#cb262-6" aria-hidden="true" tabindex="-1"></a><span class="pp">#ifndef MYHEADER_H</span></span>
<span id="cb262-7"><a href="#cb262-7" aria-hidden="true" tabindex="-1"></a><span class="pp">#define MYHEADER_H</span></span>
<span id="cb262-8"><a href="#cb262-8" aria-hidden="true" tabindex="-1"></a><span class="dt">void</span> my_function<span class="op">(</span><span class="dt">void</span><span class="op">);</span></span>
<span id="cb262-9"><a href="#cb262-9" aria-hidden="true" tabindex="-1"></a><span class="pp">#endif </span><span class="co">/* MYHEADER_H */</span></span></code></pre></div>
<h3 data-number="14.8.2" id="extern宣言と定義の混同"><span
class="header-section-number">14.8.2</span> 2.
extern宣言と定義の混同</h3>
<div class="sourceCode" id="cb263"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb263-1"><a href="#cb263-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* NG: ヘッダファイルで変数定義 */</span></span>
<span id="cb263-2"><a href="#cb263-2" aria-hidden="true" tabindex="-1"></a><span class="co">/* header.h */</span></span>
<span id="cb263-3"><a href="#cb263-3" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> global_var <span class="op">=</span> <span class="dv">0</span><span class="op">;</span>  <span class="co">/* 複数のソースファイルでエラー */</span></span>
<span id="cb263-4"><a href="#cb263-4" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb263-5"><a href="#cb263-5" aria-hidden="true" tabindex="-1"></a><span class="co">/* OK: 適切な分離 */</span></span>
<span id="cb263-6"><a href="#cb263-6" aria-hidden="true" tabindex="-1"></a><span class="co">/* header.h */</span></span>
<span id="cb263-7"><a href="#cb263-7" aria-hidden="true" tabindex="-1"></a><span class="kw">extern</span> <span class="dt">int</span> global_var<span class="op">;</span>  <span class="co">/* 宣言 */</span></span>
<span id="cb263-8"><a href="#cb263-8" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb263-9"><a href="#cb263-9" aria-hidden="true" tabindex="-1"></a><span class="co">/* source.c */</span></span>
<span id="cb263-10"><a href="#cb263-10" aria-hidden="true" tabindex="-1"></a><span class="dt">int</span> global_var <span class="op">=</span> <span class="dv">0</span><span class="op">;</span>     <span class="co">/* 定義 */</span></span></code></pre></div>
<h3 data-number="14.8.3" id="循環インクルード"><span
class="header-section-number">14.8.3</span> 3. 循環インクルード</h3>
<div class="sourceCode" id="cb264"><pre
class="sourceCode c"><code class="sourceCode c"><span id="cb264-1"><a href="#cb264-1" aria-hidden="true" tabindex="-1"></a><span class="co">/* NG: 循環インクルード */</span></span>
<span id="cb264-2"><a href="#cb264-2" aria-hidden="true" tabindex="-1"></a><span class="co">/* a.h */</span></span>
<span id="cb264-3"><a href="#cb264-3" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&quot;b.h&quot;</span></span>
<span id="cb264-4"><a href="#cb264-4" aria-hidden="true" tabindex="-1"></a><span class="kw">typedef</span> <span class="kw">struct</span> A <span class="op">{</span> <span class="kw">struct</span> B <span class="op">*</span>b<span class="op">;</span> <span class="op">}</span> A<span class="op">;</span></span>
<span id="cb264-5"><a href="#cb264-5" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb264-6"><a href="#cb264-6" aria-hidden="true" tabindex="-1"></a><span class="co">/* b.h */</span></span>
<span id="cb264-7"><a href="#cb264-7" aria-hidden="true" tabindex="-1"></a><span class="pp">#include </span><span class="im">&quot;a.h&quot;</span></span>
<span id="cb264-8"><a href="#cb264-8" aria-hidden="true" tabindex="-1"></a><span class="kw">typedef</span> <span class="kw">struct</span> B <span class="op">{</span> <span class="kw">struct</span> A <span class="op">*</span>a<span class="op">;</span> <span class="op">}</span> B<span class="op">;</span></span>
<span id="cb264-9"><a href="#cb264-9" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb264-10"><a href="#cb264-10" aria-hidden="true" tabindex="-1"></a><span class="co">/* OK: 前方宣言使用 */</span></span>
<span id="cb264-11"><a href="#cb264-11" aria-hidden="true" tabindex="-1"></a><span class="co">/* a.h */</span></span>
<span id="cb264-12"><a href="#cb264-12" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> B<span class="op">;</span>  <span class="co">/* 前方宣言 */</span></span>
<span id="cb264-13"><a href="#cb264-13" aria-hidden="true" tabindex="-1"></a><span class="kw">typedef</span> <span class="kw">struct</span> A <span class="op">{</span> <span class="kw">struct</span> B <span class="op">*</span>b<span class="op">;</span> <span class="op">}</span> A<span class="op">;</span></span>
<span id="cb264-14"><a href="#cb264-14" aria-hidden="true" tabindex="-1"></a></span>
<span id="cb264-15"><a href="#cb264-15" aria-hidden="true" tabindex="-1"></a><span class="co">/* b.h */</span></span>
<span id="cb264-16"><a href="#cb264-16" aria-hidden="true" tabindex="-1"></a><span class="kw">struct</span> A<span class="op">;</span>  <span class="co">/* 前方宣言 */</span></span>
<span id="cb264-17"><a href="#cb264-17" aria-hidden="true" tabindex="-1"></a><span class="kw">typedef</span> <span class="kw">struct</span> B <span class="op">{</span> <span class="kw">struct</span> A <span class="op">*</span>a<span class="op">;</span> <span class="op">}</span> B<span class="op">;</span></span></code></pre></div>
<h2 data-number="14.9" id="おめでとうございます"><span
class="header-section-number">14.9</span> 🎉 おめでとうございます！</h2>
<p>C言語学習教材の全12章を完了いたしました！</p>
<p>この教材を通じて学習した内容：</p>
<h3 data-number="14.9.1" id="学習完了項目"><span
class="header-section-number">14.9.1</span> 🏁 学習完了項目</h3>
<ol type="1">
<li><strong>基礎知識</strong> - C言語の基本概念と環境構築</li>
<li><strong>データ操作</strong> - 変数、データ型、演算子</li>
<li><strong>制御構造</strong> - 条件分岐とループ処理</li>
<li><strong>データ構造</strong> - 配列と文字列操作</li>
<li><strong>関数設計</strong> - 関数の定義と活用</li>
<li><strong>メモリ管理</strong> - ポインタの理解と活用</li>
<li><strong>構造化</strong> - 構造体を使ったデータ管理</li>
<li><strong>高度な技術</strong> - 関数ポインタと動的プログラミング</li>
<li><strong>プロジェクト構築</strong> - 複数ファイル開発と発展技術</li>
</ol>
<h3 data-number="14.9.2" id="次のステップ"><span
class="header-section-number">14.9.2</span> 🚀 次のステップ</h3>
<p>これからのC言語学習では： - <strong>実践プロジェクト</strong> -
より大規模なアプリケーション開発 - <strong>アルゴリズム学習</strong> -
データ構造とアルゴリズムの実装 - <strong>システムプログラミング</strong>
- OSとの連携やネットワークプログラミング - <strong>組み込み開発</strong>
- マイコンやIoTデバイスの開発 - <strong>他言語への発展</strong> -
C++、Rust、Goなどへの拡張</p>
<h3 data-number="14.9.3" id="参考資料-12"><span
class="header-section-number">14.9.3</span> 参考資料</h3>
<ul>
<li><a
href="https://www.iso.org/standard/74528.html">C言語規格書（ISO/IEC
9899）</a></li>
<li><a href="https://www.gnu.org/software/libc/manual/">GNU Cライブラリ
Documentation</a></li>
<li><a
href="https://www.amazon.com/Expert-Programming-Peter-van-Linden/dp/0131774298">Expert
C Programming</a></li>
</ul>
<p>頑張って学習を継続してください！🎓</p>
</body>
</html>
